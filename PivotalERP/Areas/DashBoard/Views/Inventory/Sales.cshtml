<!-- ChartJS -->
<script src="~/wwwroot/plugins/chart.js/Chart.min.js"></script>
<!-- Sparkline -->
<script src="~/wwwroot/plugins/sparklines/sparkline.js"></script>
<!-- JQVMap -->
<script src="~/wwwroot/plugins/jqvmap/jquery.vmap.min.js"></script>
<script src="~/wwwroot/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
<!-- jQuery Knob Chart -->
<script src="~/wwwroot/plugins/jquery-knob/jquery.knob.min.js"></script>
<!-- daterangepicker -->
<script src="~/wwwroot/plugins/moment/moment.min.js"></script>
<script src="~/wwwroot/plugins/daterangepicker/daterangepicker.js"></script>
<!-- Tempusdominus Bootstrap 4 -->
<script src="~/wwwroot/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
<!-- Summernote -->
<script src="~/wwwroot/plugins/summernote/summernote-bs4.min.js"></script>
<!-- overlayScrollbars -->
<script src="~/wwwroot/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script src="~/jslib/dashboard/inventory/sales.js"></script>
<style>
    .pointer {
        cursor: pointer;
    }
</style>
<style>
    .absolute-tools {
        position: absolute;
        top: 16px;
        right: 170px;
    }

        .absolute-tools .card-tools {
            position: relative;
            z-index: 9999;
        }

    .chat-custom-controlers .card-tools {
        margin-right: 170px;
    }

    .chat-custom-controlers > .card-body {
        margin-top: -52px;
    }
</style>
<div ng-app="myApp" ng-controller="salesDashboardController" ng-class="{waiting: loadingstatus=='running'}">
    @RenderPage("~/Views/Global/_WaitDialog.cshtml")
    <div class="card chat-custom-controlers">
        <div class="card-header border-0">
            <h3 class="card-title">Dealer sales Analysis is less than average</h3>
            <div class="card-tools" style="position: relative; z-index: 9999;">
                <a href="~/DashBoard/Inventory/LastMonthSalesAnalysis" class="btn btn-default btn-sm btn-tool" data-toggle="tooltip" data-placement="top" title="View Complete Report">
                    <i class="far fa-eye"></i>
                </a>
                <div class="d-inline-block">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Basis of:</span>
                        </div>
                        <select class="form-control text-dark" ng-model="dsaOrderBy" ng-change="GetLastMonthAnalysis(dsaOrderBy)">
                            <option ng-value="1" selected>Amount</option>
                            <option ng-value="2">Qty</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div id="chart3">
            </div>
        </div>
    </div>
    <div class="card chat-custom-controlers">
        <div class="card-header border-0">
            <h3 class="card-title">Top 10 Purchaser's last 3 months sales Analysis</h3>
            <div class="card-tools" style="position: relative; z-index: 9999;">
                <a href="~/DashBoard/Inventory/LastMonthSalesAnalysisQty" class="btn btn-default btn-sm btn-tool" data-toggle="tooltip" data-placement="top" title="View Complete Report">
                    <i class="far fa-eye"></i>
                </a>
                <div class="d-inline-block">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Basis of:</span>
                        </div>
                        <select class="form-control text-dark" ng-model="lastPurchaseOrderBy" ng-change="GetLastMonthCurTopAnalysis(lastPurchaseOrderBy)">
                            <option ng-value="1" selected>Amount</option>
                            <option ng-value="2">Qty</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div id="chart4">
            </div>
        </div>
    </div>
    <div class="card">
        <div class="">
            <div class="row">
                <div class="col-md-9 chat-custom-controlers">
                    <div class="card-header border-0">
                        <h3 class="card-title">Top 10 Product Sales Qty Of {{ selectedBrand.Name }}</h3>
                        <div class="card-tools" style="position: relative; z-index: 9999;">
                            <a href="~/DashBoard/Inventory/ProductBrandSummary?ProductBrandId={{selectedBrand.ProductBrandId}}&UnitId={{BrandUnitId}}" class="btn btn-default btn-sm btn-tool" data-toggle="tooltip" data-placement="top" title="View Complete Report">
                                <i class="far fa-eye"></i>
                            </a>
                            <div class="d-inline-block">
                                <div class="input-group input-group-sm">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Basis of:</span>
                                    </div>
                                    <select class="form-control text-dark" ng-model="BrandUnitId" ng-change="GetProductBrandWise(null)">                                      
                                        <optgroup label="Quantity">
                                            <option ng-value="0" ng-selected="BrandUnitId==0">BaseUnit</option>
                                            <option ng-value="un.UnitId" ng-repeat="un in unitColl" ng-selected="un.UnitId==BrandUnitId">{{un.Name}}</option>
                                        </optgroup>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="chart"></div>
                    </div>
                </div>
                <div class="col-md-3 bg-light">
                    <div class="px-2 py-3">
                        <h5>Brands</h5>
                        <div class="brand-list-wrap scroll-only-y" style="height: 390px">
                            <ul class="list-group list-group-flush bg-light">
                                <li class="list-group-item pointer" ng-repeat="pb in ProductBrandColl" ng-click="GetProductBrandWise(pb)" ng-value="pb.ProductBrandId">{{pb.Name}}</li>
                            </ul>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <div class="card chat-custom-controlers">
        <div class="card-header border-0">
            <h3 class="card-title">Sales Projection VS Sales</h3>
            <div class="card-tools" style="position: relative; z-index: 9999;">
                <a href="~/DashBoard/Inventory/SalesProjection?unitId={{ProjectionUnitId}}&agentId={{ProjectionAgentId}}&&dateFrom={{ProjectionFromDate}}&&dateTo={{ProjectionToDate}}" class="btn btn-default btn-sm btn-tool" data-toggle="tooltip" data-placement="top" title="View Complete Report">
                    <i class="far fa-eye"></i>
                </a>
                @*<div class="d-inline-block">
                        <div class="input-group input-group-sm">
                            <div class="input-group-prepend">
                                <span class="input-group-text">From:</span>
                            </div>

                            <input class="form-control text-dark input-sm" type="text" voucher-date-ad ng-model="ProjectionFromDate" style="max-width:100px" />
                        </div>
                    </div>
                    <div class="d-inline-block">
                        <div class="input-group input-group-sm">
                            <div class="input-group-prepend">
                                <span class="input-group-text">To:</span>
                            </div>
                            <input class="form-control text-dark input-sm" type="text" voucher-date-ad ng-model="ProjectionToDate" style="max-width:100px" />
                        </div>
                    </div>*@
                <div class="d-inline-block">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <span class="input-group-text">For Month:</span>
                        </div>
                        <select class="form-control text-dark" ng-model="SelectMonthDet" ng-change="GetSalesProjectionVSSales(ProjectionUnitId)" ng-options="x.Name for x in MonthDetailsColl">
                        </select>
                    </div>
                </div>
                <div class="d-inline-block">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Basis of:</span>
                        </div>
                        <select class="form-control text-dark" ng-model="ProjectionUnitId" ng-change="GetSalesProjectionVSSales(ProjectionUnitId)">
                            <option ng-value="-1" ng-selected="ProjectionUnitId==-1">Amount</option>
                            <optgroup label="Quantity">
                                <option ng-value="0" ng-selected="ProjectionUnitId==0">BaseUnit</option>
                                <option ng-value="un.UnitId" ng-repeat="un in unitColl" ng-selected="un.UnitId==ProjectionUnitId">{{un.Name}}</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
                <div class="d-inline-block">
                    <div class="input-group input-group-sm">
                        <div class="input-group-prepend">
                            <span class="input-group-text">Salesman :</span>
                        </div>
                        <select class="form-control text-dark" ng-model="ProjectionAgentId" ng-change="GetSalesProjectionVSSales(ProjectionUnitId)">
                            <option ng-value="0" ng-selected="ProjectionUnitId==0">All</option>
                            <option ng-value="un.AgentId" ng-repeat="un in AgentColl" ng-selected="un.AgentId==ProjectionAgentId">{{un.Name}}</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div id="salesPVs">
            </div>
        </div>
    </div>
</div>


<script>
    // For Interest Calculation Radio Content
    function interestCalcStatus(x) {
        if (x == 0)
            document.getElementById("interestCalcStstusYes").style.display = "block";
        else
            document.getElementById("interestCalcStstusYes").style.display = "none";
        return;
    }


    // End Interest Calculation Radio Content
</script>