<style>
    .table td, .table th {
        Padding: 0.3rem !important;
    }

    .nav-pills .nav-link.active, .nav-pills .show > .nav-link {
        color: #ffffff;
        background-color: #76be4e;
    }
</style>
<style type="text/css">
    @@media print {
        .noprint {
            display: none;
        }
    }
</style>
<script>
    var TranId=@ViewBag.TranId;
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js" integrity="sha512-JPcRR8yFa8mmCsfrw4TNte1ZvF1e3+1SdGMslZvmrzDYxS69J7J49vkFL8u6u8PlPJK+H3voElBtUCzaXj+6ig==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="~/jslib/export/tableExport.js"></script>

<script src="~/jslib/setup/DashboardDesigner.js?v=20230218"></script>
<div class="hold-transition  layout-navbar-fixed" ng-app="myApp" ng-controller="DashboardViewController" ng-init="LoadData()" ng-cloak>
    <section class="content">
        <div class="container-fluid">
            <section class="iframe-content-starts-here" style="padding-top:55px!important">
                <div class="row">
                    <div class="col-md-12 text-right">
                        <a print-div div-id="'#dvPage'" report-name="'Dashboard'" href="#" title="Print Page" class="btn btn-secondary btn-light btn-sm wait noprint">
                            <i class="fas fa-print"></i>
                        </a>
                    </div>
                </div>
                <div class="row" id="dvPage">
                    <div class="col-md-{{tb.ColumnLen}}" ng-repeat="tb in TabColl" id="div{{$index}}">
                        <div class="card" style="border:1px solid #ccc">
                            <div class="card-header p-2" style="background-color: #eef9f4">
                                <h3 class="card-title">
                                    <i class="fas fa-chart-pie mr-1"></i>
                                    {{tb.Name}}
                                </h3>
                                <div class="card-tools form-inline">
                                    <div class="dropdown dnld-file ml-2 noprint" title="Download File">
                                        <a print-div div-id="tb.DivName" report-name="tb.Name" href="#" title="Print" class="btn btn-secondary btn-light btn-sm wait noprint">
                                            <i class="fas fa-print"></i>
                                        </a>
                                        <button class="btn btn-secondary btn-light btn-sm dropdown-toggle"
                                                type="button" id="dropdownMenuButton" data-toggle="dropdown"
                                                aria-haspopup="true" aria-expanded="false">
                                            <i class="fas fa-download"></i>
                                        </button>
                                        <div class="dropdown-menu dropdown-menu-right"
                                             aria-labelledby="dropdownMenuButton">
                                            <span class="dropdown-item">Choose an option:</span>

                                            <a class="dropdown-item" export-excel table-id="tb.TableName" sheet-name="tb.Name" report-name="tb.Name" href="#">
                                                <img src="~/wwwroot/dynamic/images/flaticons/excel.png"
                                                     class="img-fluid exports-icon" alt="Excel image">
                                                Excel
                                            </a>
                                            <a class="dropdown-item" export-excel table-id="tb.TableName" sheet-name="tb.Name" report-name="tb.Name" href="#" file-type="'csv'">
                                                <img src="~/wwwroot/dynamic/images/flaticons/csv.png"
                                                     class="img-fluid exports-icon">
                                                CSV
                                            </a>
                                            <a class="dropdown-item" print-tbl table-id="tb.TableName" sheet-name="tb.Name" report-name="tb.Name" href="#" title="Print Data">
                                                <i class="fas fa-print text-success mr-3"></i>
                                                Print
                                            </a>
                                        </div>
                                    </div>
                                    <ul class="nav nav-pills ml-auto">
                                        <li class="nav-item" ng-show="tb.ReportType==2 || tb.ReportType==3">
                                            <a class="nav-link p-1 mx-1 {{tb.ReportType==2  ? 'active' :''}}" href="#revenue-chart{{$index}}" data-toggle="tab"><i class="fas fa-table"></i> Tabular Data</a>
                                        </li>
                                        <li class="nav-item" ng-show="tb.ReportType==1 || tb.ReportType==3">
                                            <a class="nav-link p-1 mr-1 {{tb.ReportType==1 || tb.ReportType==3 ? 'active' :''}}" href="#sales-chart{{$index}}" data-toggle="tab"><i class="fas fa-chart-bar"></i> Graphical Data</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body p-0">
                                <div class="tab-content">
                                    <div class="chart tab-pane {{tb.ReportType==2  ? 'active' :''}}" id="revenue-chart{{$index}}" style="position: relative;" ng-show="tb.ReportType==2 || tb.ReportType==3">
                                        <div class="table-responsive table-striped p-0" style="max-height: 350px;">
                                            <table class="table table-head-fixed text-nowrap mb-0" id="tbl{{$index}}">
                                                <thead>
                                                    <tr>
                                                        <th style="width: 90px">S.No.</th>
                                                        <th style="width: 120px" ng-repeat="dc in tb.DataSetFieldColl">{{dc.text}}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="rd in tb.ResultDataColl">
                                                        <td>{{$index+1}}</td>
                                                        <td ng-repeat="dc in tb.DataSetFieldColl">{{rd[dc.text]}}</td>
                                                    </tr>

                                                </tbody>
                                                <tfoot ng-show="tb.HasTableFooter==true" style="position: -webkit-sticky; position: sticky; bottom: 0; background: #eef9f4; color: #000000; z-index: 4; ">
                                                    <tr>
                                                        <td><b>TOTAL :-</b></td>
                                                        <td ng-repeat="ft in tb.TblFooterColl">
                                                            <span ng-show="ft.FunName.length>0 && ft.FunName=='sum'"> <b> {{(tb.ResultDataColl | sumOfValue:ft.Field) |number:2}}</b></span>
                                                            <span ng-show="ft.FunName.length>0 && ft.FunName=='min'"> <b>{{(tb.ResultDataColl | minOfValue:ft.Field) |number:2}}</b></span>
                                                            <span ng-show="ft.FunName.length>0 && ft.FunName=='max'"> <b>{{(tb.ResultDataColl | maxOfValue:ft.Field) |number:2}}</b></span>
                                                            <span ng-show="ft.FunName.length>0 && ft.FunName=='count'"> <b>{{(tb.ResultDataColl | countOfValue:ft.Field) |number:2}}</b></span>
                                                            <span ng-show="ft.FunName.length>0 && ft.FunName=='avg'"> <b> {{(tb.ResultDataColl | avgOfValue:ft.Field) |number:2}}</b></span>
                                                        </td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="chart tab-pane {{tb.ReportType==1 || tb.ReportType==3 ? 'active' :''}}" id="sales-chart{{$index}}" style="position: relative;" ng-show="tb.ReportType==1 || tb.ReportType==3">
                                        <div class="card-body p-2">
                                            <canvas id="chartPreviewTG{{tb.TranId}}" width="800" height="430"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </section>
        </div>
    </section>
</div>   