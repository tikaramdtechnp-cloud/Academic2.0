
<script src="~/jslib/Infrastructure/BuildingBlock.js"></script>
<div class="hold-transition layout-navbar-fixed" ng-app="myApp" ng-controller="BuildingBlockContrioller" ng-init="LoadData()">
    <section class="content">
        <div class="container-fluid">
            <section class="iframe-content-starts-here" style="padding-top:50px!important">
                <div class="tab-content" id="Buildingtbl">
                    <!-- Second Tab Content -->
                    <div class="add-subject-section card py-2">
                        <header class="row">
                            <div class="col-md-7">
                                <div class="clearfix">
                                    <form class="form-inline">
                                        <div class="input-group input-group-sm mr-sm-2">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text cstm">Show</span>
                                            </div>

                                            <select class="form-control border-left-0 border-right-0 pr-0" ng-model="perPage.BuildingBlock">
                                                <option ng-value="pp.value" ng-repeat="pp in perPageColl" ng-selected="pp.value==perPage.BuildingBlock">{{pp.text}}</option>
                                            </select>
                                            <div class="input-group-append">
                                                <span class="input-group-text bg-white"><small>entries</small></span>
                                            </div>
                                        </div>
                                        <div class="input-group input-group-sm table-search-filed">
                                            <input class="form-control form-control-navbar" type="search"
                                                   placeholder="Search" aria-label="Search" ng-model="searchData.BuildingBlock">
                                            <div class="input-group-append">
                                                <button class="btn btn-default border-left-0" type="submit">
                                                    <i class="fas fa-search"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <!-- end col-md-8 -->
                            <div class="col-md-5 text-right">
                                <div class="dropdown dnld-file" data-toggle="tooltip"
                                     data-placement="top" title="Download File">
                                    <button class="btn btn-secondary btn-light btn-sm dropdown-toggle" type="button"
                                            id="dropdownMenuButton" data-toggle="dropdown"
                                            aria-haspopup="true" aria-expanded="false">
                                        <i class="fas fa-download"></i>
                                    </button>
                                    <div class="dropdown-menu dropdown-menu-right"
                                         aria-labelledby="dropdownMenuButton">
                                        <span class="dropdown-item">Choose an option:</span>
                                        <a class="dropdown-item" href="#">
                                            <img src="~/wwwroot/dynamic/images/flaticons/excel.png" class="img-fluid exports-icon" alt="Excel image">
                                            Excel
                                        </a>
                                        <a class="dropdown-item" href="#">
                                            <img src="~/wwwroot/dynamic/images/flaticons/csv.png" class="img-fluid exports-icon" alt="Excel image">
                                            CSV
                                        </a>
                                    </div>
                                </div>
                                <a href="#" class="btn btn-secondary btn-light btn-sm" data-toggle="tooltip"
                                   data-placement="bottom" title="Print">
                                    <i class="fas fa-print"></i>
                                </a>

                                <button type="button" class="btn btn-sm btn-success" id="add-Bulding" style="min-width: 90px">
                                    <i class="fas fa-plus w-t"></i> Add Building Blocks
                                </button>

                            </div>
                        </header>
                        <div>
                            <div class="table-scroll-x-y sales-main-table table-scroll">
                                <table id="#buildingblock" class="main-table table table-sm table-bordered bg-white">
                                    <thead>
                                        <tr>
                                            <th style="width: 80px">Block no.</th>
                                            <th style="width: 95px">No. Of story</th>
                                            <th style="width: 210px">Block Name</th>
                                            <th style="width: 95px">No. of Rooms</th>
                                            <th style="width: 95px">No. of Rooms</th>
                                            <th style="width: 150px">Year of Construction</th>
                                            <th style="width: 115px">Investment amt.</th>
                                            <th style="width: 160px">Structure Type</th>
                                            <th style="width: 130px">Roof Type</th>
                                            <th style="width: 112px">Damage Grade</th>
                                            <th style="width: 130px">No. of Boys Toilet</th>
                                            <th style="width: 130px">No. of Girls Toilet</th>
                                            <th class="cstm-sticky" style="width:70px;right:0;z-index:3">Action</th>
                                        </tr>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>3</td>
                                            <td>Nepal Adarsha English .S School</td>
                                            <td>19</td>
                                            <td>9</td>
                                            <td>2060</td>
                                            <td>35000000</td>
                                            <td>RCC Frame Structure</td>
                                            <td>RCC Slab</td>
                                            <td>No damage</td>
                                            <td>3</td>
                                            <td>3</td>
                                            <td class="cstm-sticky" style="right:0;background-color:#ffffff!important;z-index:2">
                                                <a class="p-1" href="#">
                                                    <i class="fas fa-edit text-info"></i>
                                                </a>
                                                <a class="p-1" href="#">
                                                    <i class="fas fa-trash-alt text-danger"></i>
                                                </a>
                                                @*<a class="btn btn-sm btn-info text-white" data-toggle="modal" data-target="#AddRoom" style="padding-top:1px;padding-bottom:1px">Rooms</a>*@
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <!-- table end -->
                        </div>
                        <footer class="row align-items-center">
                            <div class="col-md-12">
                                <dir-pagination-controls pagination-id="subjectPagination" boundary-links="true" on-page-change="pageChangeHandler(newPageNumber)" template-url="/Scripts/dirPagination.tpl.html">
                                </dir-pagination-controls>
                            </div>
                        </footer>
                    </div>

                </div>

                <!-- form area starts -->
                <div id="building-form">
                    <div class="card card-default">
                        <div class="card-body py-2 px-0">

                            <div class="row">
                                <div class="col-md-9">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Block No. <span style="color: red;">*</span></label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.BlockNo">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Block Name <span style="color: red;">*</span></label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.BlockName">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Address<span style="color: red;">*</span></label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.Address">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>No. Of Floor <span style="color: red;">*</span></label>
                                                <input type="number" class="form-control form-control-sm" ng-model="newDet.NoOfFloor">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Overall Condition <span style="color: red;">*</span></label>
                                                <select class="form-select form-control form-control-sm select2" ng-model="newDet.OverallConditionId">
                                                    <option ng-repeat="A in OverallConditionCOll" ng-value="A.id" ng-selected="A.id==newDet.OverallConditionId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>No. Of Classrooms <span style="color: red;">*</span></label>
                                                <input type="number" class="form-control form-control-sm" ng-model="newDet.NoOfClassRoom">
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>No. Of Other Rooms</label>
                                                <input type="number" class="form-control form-control-sm" ng-model="newDet.NoOfOtherRooms">
                                            </div>
                                        </div>

                                        <div class="col-md-4" ng-show="CompanyConfig.Country == 'Nepal'">
                                            <div class="form-group">
                                                <label>Construction Date<span style="color: red;">*</span></label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.ConstructionDate_TMP" date-picker date-detail="newDet.ConstructedDateDet" ng-change="updateDate()">
                                            </div>
                                        </div>
                                        <div class="col-md-4"  ng-show="CompanyConfig.Country != 'Nepal'">
                                            <div class="form-group">
                                                <label>Construction Date<span style="color: red;">*</span></label>
                                                <input type="Date" class="form-control form-control-sm" ng-model="newDet.ConstructionDate" ng-change="updateDate_BS()">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Structure Type <span style="color: red;">*</span></label>
                                                <select class="form-select form-control form-control-sm select2" ng-model="newDet.StructureTypeId">
                                                    <option ng-repeat="A in StructureTypeColl" ng-value="A.id" ng-selected="A.id==newDet.StructureTypeId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4" ng-show="newDet.StructureTypeId == 14">
                                            <label>Structure Type (Other than list)</label>
                                            <input type="text" class="form-control form-control-sm" ng-model="newDet.OtherStructureType">
                                        </div>


                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Roof Type <span style="color: red;">*</span></label>
                                                <select class="form-select form-control  form-control-sm select2" ng-model="newDet.RoofTypeId">
                                                    <option ng-repeat="A in RoofTypeColl" ng-value="A.id" ng-selected="A.id==newDet.RoofTypeId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4" ng-show="newDet.RoofTypeId==9">
                                            <label>Roof Type (Other than List)</label>
                                            <input type="text" class="form-control form-control-sm" ng-model="newDet.OtherRoofType">

                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Damage Grade <span style="color: red;">*</span></label>
                                                <select class="form-select form-control form-control-sm select2" ng-model="newDet.DamageGradeId">
                                                    <option ng-repeat="A in DamageGradeColl" ng-value="A.id" ng-selected="A.id==newDet.DamageGradeId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Infrastructure/Resource Type <span style="color: red;">*</span></label>
                                                <select class="form-select form-control form-control-sm select2" ng-model="newDet.InfrastructureTypeId">
                                                    <option ng-repeat="A in InfrastructureTypeColl" ng-value="A.id" ng-selected="A.id==newDet.InfrastructureTypeId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Funding Sources <span style="color: red;">*</span></label>
                                                <select class="form-select form-control form-control-sm select2" ng-model="newDet.FundingSourcesId">
                                                    <option ng-repeat="A in FundingSourceColl" ng-value="A.id" ng-selected="A.id==newDet.FundingSourcesId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label>Intervention Type <span style="color: red;">*</span></label>
                                                <select class="form-select form-control form-control-sm select2" ng-model="newDet.InterventionTypeId">
                                                    <option ng-repeat="A in InterventionTypeColl" ng-value="A.id" ng-selected="A.id==newDet.InterventionTypeId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-md-4">
                                            <label>Approved/Design<span style="color: red;">*</span></label>
                                            <div class="form-group clearfix">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" id="rb-interest-calc-yes" name="r5" ng-value="1" ng-model="newDet.isApproved">
                                                    <label class="form-check-label" for="rb-interest-calc-yes">Yes</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" id="rb-interest-cal-no" name="r5" ng-value="0" ng-model="newDet.isApproved">
                                                    <label class="form-check-label" for="rb-interest-cal-no">No</label>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label>Completion Certificate<span style="color: red;">*</span></label>
                                            <div class="form-group clearfix">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" id="CompletionYes-yes" name="r6" ng-value="1" ng-model="newDet.isCompletionCerti">
                                                    <label class="form-check-label" for="CompletionYes-yes">Yes</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" id="CompletionYes-no" name="r6" ng-value="2" ng-model="newDet.isCompletionCerti">
                                                    <label class="form-check-label" for="CompletionYes-no">No</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-4" ng-show="newDet.CompletionCerti==2">
                                            <div class="form-group">
                                                <label>Completion Status <span style="color: red;">*</span></label>
                                                <select class="form-select form-control form-control-sm" ng-model="newDet.CompletionStatusId">
                                                    <option ng-repeat="A in CompletionStatusColl" ng-value="A.id" ng-selected="A.id==newDet.CompletionStatusId">{{A.text}}</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-md-4" ng-show="newDet.CompletionCerti==1">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput2" class="form-label">Completion Date</label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.CompletionDate_TMP" date-picker date-detail="newDet.CompletionDateDet">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput2" class="form-label">Remarks</label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.Remarks">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput2" class="form-label">Investment Amount/Budget</label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.Budget">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput2" class="form-label">No. Of Boys Toilet</label>
                                                <input type="number" class="form-control form-control-sm" ng-model="newDet.BoysToiletNo">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="formGroupExampleInput2" class="form-label">No. Of Girls Toilet</label>
                                                <input type="number" class="form-control form-control-sm" ng-model="newDet.GirlsToiletNo">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <label>All Toilet Functional?<span style="color: red;">*</span></label>

                                            <div class="form-group clearfix">
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" id="ToiletFunctional-yes" name="r7" ng-value="1" ng-model="newDet.isToiletFunctional">
                                                    <label class="form-check-label" for="ToiletFunctional-yes">Yes</label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio" id="ToiletFunctional-no" name="r7" ng-value="0" ng-model="newDet.isToiletFunctional">
                                                    <label class="form-check-label" for="ToiletFunctional-no">No</label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-4" ng-show="newDet.ToiletFunctional==2">
                                            <div class="form-group">
                                                <label>What type of facility is not working? <span style="color: red;">*</span></label>
                                                <input type="text" class="form-control form-control-sm" ng-model="newDet.FacilityNotFunctioning">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <label for="" class="invisible">Photo</label>
                                    <div class="person-photo-attachment-wrap text-center">
                                        <div class="img-wrap mx-auto" >
                                            <img ng-src="{{newDet.BuildingImage || newDet.ImagePath }}" class="img-fluid" alt="" id="imgAcadImage1" style="height:240px;">
                                        </div>
                                        <label for="choose-sfile" type="button" class="btn btn-outline-secondary btn-sm mt-1 mb-0"> <i class="fas fa-camera w-t"></i> Building Photo</label>
                                        <input id="choose-sfile" type="file" accept=".jpg,.jpeg,.pdf,doc,docx,application/msword,.png" style="display: none;" file-model ng-model="newDet.BuildingImage_TMP" fileread="newDet.BuildingImage" />
                                        <canvas id="canvas" width="320" height="240" style="display:none"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="time-label">
                                <span class="d-block border-0 p-3 text-center">
                                    <button type="button" class="btn btn-sm btn-info" id="back-list-btn" style="min-width: 90px;">Back to List</button>
                                    <button type="button" class="btn btn-sm btn-default" style="min-width: 90px;" ng-click="ClearSubject()">Reset</button>
                                    <button type="button" class="btn btn-sm btn-success" style="min-width: 90px;" ng-click="SaveUpdateSubject()">{{newSubject.Mode}}Save</button>

                                </span>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- form area ends -->
            </section>
            <!-- /.row -->
        </div>


        <div class="modal fade" id="AddRoom" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
             aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content" style="margin-top: 50px">
                    <div class="modal-header p-2">
                        <h5 class="modal-title" id="exampleModalLongTitle" style="font-size: 16px">
                            Room Details
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="table-scroll-x-y sales-main-table table-scroll">
                            <table id="#buildingblock" class="main-table table table-sm table-bordered bg-white">
                                <thead>
                                    <tr>
                                        <th style="width: 180px">Room Name</th>
                                        <th style="width: 125px">Utilization</th>
                                        <th style="width: 150px">Sub Utilization</th>
                                        <th style="width: 95px">Length(M)</th>
                                        <th style="width: 95px">Breadth(M)</th>
                                        <th style="width: 110px">No. of users</th>
                                        <th style="width: 145px">Remarks</th>
                                        <th class="cstm-sticky" style="width:70px;right:0;z-index:3">Action</th>
                                    </tr>
                                <tbody>
                                    <tr>
                                        <td><input class="form-control form-control-sm" /></td>
                                        <td>
                                            <select class="form-select form-control form-control-sm">
                                                <option value="2">Good</option>
                                                <option value="3">Fair</option>
                                                <option value="4">Poor</option>
                                            </select>
                                        </td>
                                        <td>
                                            <select class="form-select form-control form-control-sm">
                                                <option value="2">Good</option>
                                                <option value="3">Fair</option>
                                                <option value="4">Poor</option>
                                            </select>
                                        </td>
                                        <td><input class="form-control form-control-sm" /></td>
                                        <td><input class="form-control form-control-sm" /></td>
                                        <td><input class="form-control form-control-sm" /></td>
                                        <td><textarea class="form-control form-control-sm" rows="1"></textarea></td>
                                        <td class="cstm-sticky" style="right:0;background-color:#ffffff!important;z-index:2">
                                            <a class="p-1" ng-click="AddRoomDetails($index)">
                                                <i class="fas fa-plus text-info"></i>
                                            </a>
                                            <a class="p-1" ng-click="delRoomDetails($index)">
                                                <i class="fas fa-trash-alt text-danger"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer" style="padding: 6px">
                        <button type="button" class="btn btn-sm btn-success" data-dismiss="modal" style="min-width: 90px">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>




