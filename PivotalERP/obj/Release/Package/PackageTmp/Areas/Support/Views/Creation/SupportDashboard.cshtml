<link rel="stylesheet" href="~/wwwroot/dynamic/css/student_dashboard.css">
<link rel="stylesheet" href="~/wwwroot/dynamic/css/admin_dashboard.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>


<script src="~/jslib/Support/Dashboard.js?v=20251115"></script>
<div class="hold-transition  layout-navbar-fixed" ng-app="myApp" ng-controller="dashboardController" ng-init="LoadData()">
    <section class="content">
        <div class="container-fluid">
            <section class="iframe-content-starts-here">
                <div class="tab-content" id="table-listing" style="margin-top: -10px;">
                    <div class="row">
                        <div class="col-md-9">
                            <div class="card mt-3" style="box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; ">
                                <div class="card-header p-2">
                                    <h6 class="mb-0">Support Ticket</h6>
                                </div>
                                <div class="card-body p-2">
                                    <div class="row">
                                        <div class="col-md-2">
                                            <div class="col-sm-12 col-lg-12 col-md-12 class-card  px-0">
                                                <div class="subject_box" style="height:90px;box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; ">
                                                    <a href="#">
                                                        <div class="sub_no mb-2">
                                                            <h5>All Tickets</h5>
                                                            <span class="upDownArrow"><i class="fas fa-book"></i></span>
                                                        </div>
                                                        <span  style="font-size: 18px; background-color: #c3cbcf80 !important; padding: 5px 10px; border-radius: 50px; color: #2D3333; ">{{dashB.TicketSumm.TotalT}}</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="col-sm-12 col-lg-12 col-md-12 class-card red">
                                                <div class="subject_box" style="height:90px;box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; ">
                                                    <a href="#">
                                                        <div class="sub_no mb-2">
                                                            <h5>Open</h5>
                                                            <span class="upDownArrow"><i class="fas fa-book-reader"></i></span>
                                                        </div>

                                                        <span class="ellipseBg" style="font-size:18px">{{dashB.TicketSumm.OpenT}}</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <!--New Field Added by suresh on Jestha 6 Starts-->
                                        <div class="col-md-2">
                                            <div class="col-sm-12 col-lg-12 col-md-12 class-card">
                                                <div class="subject_box px-1" style="height: 90px; box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; background-color: #c9e7fb ">
                                                    <a href="#">
                                                        <div class="sub_no mb-2">
                                                            <h5>In Progress</h5>
                                                            <span class="upDownArrow"><i class="fas fa-hourglass-half"></i></span>
                                                        </div>

                                                        <span class="ellipseBg" style="font-size: 18px; background-color: #a0d6fa ">{{dashB.TicketSumm.InProgressT}}</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <!--Ends-->
                                        <div class="col-md-2">
                                            <div class="col-sm-12 col-lg-12 col-md-12">
                                                <div class="subject_box" style="height: 90px; box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; background-color: #ffa50029 ">
                                                    <a href="#">
                                                        <div class="sub_no mb-2">
                                                            <h5>On Hold</h5>
                                                            <span class="upDownArrow"><i class="fas fa-layer-group"></i></span>
                                                        </div>

                                                        <span class="ellipseBg" style="font-size: 18px; background-color: #ffbf61a1">{{dashB.TicketSumm.HoldT}}</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <div class="col-sm-12 col-lg-12 col-md-12 class-card green">
                                                <div class="subject_box" style="height:90px;box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; ">
                                                    <a href="#">
                                                        <div class="sub_no mb-2">
                                                            <h5>Closed</h5>
                                                            <span class="upDownArrow"><i class="fas fa-handshake"></i></span>
                                                        </div>

                                                        <span class="ellipseBg" style="font-size: 18px">{{dashB.TicketSumm.ClosedT}}</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>

                                        <!--New Field Added by suresh on Jestha 6 Starts-->
                                        <div class="col-md-2">
                                            <div class="col-sm-12 col-lg-12 col-md-12 class-card">
                                                <div class="subject_box px-2" style="height: 90px; box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; background-color: #d2e9c5 ">
                                                    <a href="#">
                                                        <div class="sub_no mb-2">
                                                            <h5>Completed</h5>
                                                            <span class="upDownArrow"><i class="fas fa-check-double"></i></span>
                                                        </div>

                                                        <span style="font-size: 18px; background-color: #91cb72 !important; padding: 5px 10px; border-radius: 50px; color: #2D3333; ">{{dashB.TicketSumm.CompletedT}}</span>
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        <!--Ends-->
                                    </div>
                                    <canvas id="barChart" class="mt-3" style="max-height:375px;"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div>
                                <div class="red_box" style="justify-content:left;">
                                    <div class="red_box">
                                        <img style="height:40px;" src="~/wwwroot/dynamic/images/flaticons/subscribe.png" />
                                    </div>
                                    <div class="ml-3">
                                        <h4>Subscriptions</h4>
                                        <h3><b>{{dashB.ExpireAfterDays}} Days Left</b></h3>
                                    </div>
                                </div>

                                @*<div class="red_box" style="justify-content:left;">
                                    <div class="red_box">
                                        <img style="height:35px;" src="~/wwwroot/dynamic/images/flaticons/dueamount.png" />
                                    </div>
                                    <div class="ml-3">
                                        <h4>
                                            <span class="mr-3">Dues</span>
                                            <i class="toggle-password fas fa-solid fa-eye-slash" style="cursor: pointer; color: black;"></i>
                                        </h4>
                                        <h3 class="HideP"><b>Rs.{{dashB.TotalDues |number:2}}</b></h3>
                                    </div>
                                </div>*@
                            </div>
                            <div class="card" style="box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; ">                                
                                <div class="card-body p-0">
                                    <p class="my-0">
                                        <div class="p-2" style="background-color: #d2e9c5;">
                                            <p class="mb-0"><i class="fas fa-user-tag mr-2"></i>Primary Support Executive</p>
                                        </div>
                                        <div class="media p-2" style="background: #d2e9c51a">
                                            <img src="{{dashB.PPhotoPath}}" alt=" "
                                                 class="img-size-50 mr-3 img-circle">
                                            <div class="media-body">
                                                <p class="dropdown-item-title" style="font-weight:500;">
                                                    {{dashB.PName}}
                                                </p>
                                                <p class="mb-1"><i class="fas fa-envelope mr-2 text-success"></i> {{dashB.PEmail}}</p>
                                                <p class="mb-1"><i class="fas fa-phone-alt mr-2 text-success"></i><a href="tel:{{dashB.PContactNo}}">{{dashB.PContactNo}}</a></p>
                                            </div>
                                        </div>
                                    </p>

                                   
                                    <p class="my-0">
                                        <div class="p-2" style="background-color: #d2e9c5;">
                                            <p class="mb-0"><i class="fas fa-user-tag mr-2"></i>Secondary Support Executive</p>
                                        </div>
                                        <div class="media p-2" style="background: #d2e9c51a">
                                            <img src="{{dashB.SPhotoPath}}" alt=""
                                                 class="img-size-50 mr-3 img-circle">
                                            <div class="media-body">
                                                <p class="dropdown-item-title" style="font-weight:500;">
                                                    {{dashB.SName}}
                                                </p>
                                                <p class="mb-1"><i class="fas fa-envelope mr-2 text-success"></i>  {{dashB.SEmail}}</p>
                                                <p class="mb-1"><i class="fas fa-phone-alt mr-2 text-success"></i><a href="tel:{{dashB.SContactNo}}">{{dashB.SContactNo}}</a></p>
                                            </div>
                                        </div>
                                    </p>
                                   
                                    <p href="#" class="my-0">
                                        <div class="p-2" style="background-color: #d2e9c5;">
                                            <p class="mb-0"><i class="fas fa-user-tag mr-2"></i>Customer Relationship Officer</p>
                                        </div>
                                        <div class="media p-2" style="background: #d2e9c51a">
                                            <img src="{{dashB.CPhotoPath}}" alt=" "
                                                 class="img-size-50 mr-3 img-circle">
                                            <div class="media-body">
                                                <p class="dropdown-item-title" style="font-weight:500;">
                                                    {{dashB.CName}}
                                                </p>
                                                <p class="mb-1"><i class="fas fa-envelope mr-2 text-success"></i> {{dashB.CEmail}}</p>
                                                <p class="mb-1"><i class="fas fa-phone-alt mr-2 text-success"></i><a href="tel:{{dashB.CContactNo}}">{{dashB.CContactNo}}</a></p>
                                            </div>
                                        </div>
                                    </p>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </div>
    </section>
</div>


@*Code for show hide due by eye open and close*@
<script>
    var pMemory = null;
    $('.toggle-password').click(function () {
        $(this).toggleClass("fa-eye fa-eye-slash");

        var pElement = $('.HideP').get(0);

        if (pMemory === null) {
            // save to cache
            pMemory = $(pElement).text();
        }

        if (pMemory === $(pElement).text()) {
            $(pElement).text('*'.repeat(pMemory.length));
        } else {
            $(pElement).text(pMemory);
        }
    });
</script>
 
