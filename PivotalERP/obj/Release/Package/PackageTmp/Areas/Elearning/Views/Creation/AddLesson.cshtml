<style>
    .card-head {
        padding: 0px 15px !important;
    }
</style>
<link href="~/wwwroot/dynamic/css/lessonplan.css" rel="stylesheet" />
@*<script src="~/jslib/Academic/LessonPlan.js"></script>*@
<script src="~/jslib/ELearning/LessonPlan.js"></script>
<div class="hold-transition  layout-navbar-fixed" ng-app="myApp" ng-controller="LessonPlanController" ng-init="LoadData()">
    <section class="content">
        <div class="container-fluid">
            <section class="iframe-content-starts-here">
                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-second" role="tabpanel"
                         aria-labelledby="pills-second-tab">
                        <header class="if-page-have-nav-tabs px-2">
                            <div class="row upper-tab">
                                <div class="col-md-12">
                                    <ul class="nav nav-tabs cstm-nav-tabs-border-bottom-active" id="myTab"
                                        role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link active" id="home-tab" data-toggle="tab"
                                               href="#home" role="tab" aria-controls="home"
                                               aria-selected="true">Add Lesson</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" id="profile-tab" data-toggle="tab"
                                               href="#profile" role="tab" aria-controls="profile"
                                               aria-selected="false">List Of Lessons</a>
                                        </li>

                                    </ul>
                                </div>
                            </div>
                        </header>
                        <!-- end if-page-have-nav-tabs -->
                        <div class="tab-content" id="myTabContent">
                            <!--Add Lesson Starts-->
                            <div class="tab-pane fade show active main-section" id="home" role="tabpanel"
                                 aria-labelledby="home-tab">
                                <div class="timeline registration-form">
                                    <!-- new container added -->
                                    <div class="container1">
                                        <div class="row mt-2">
                                            <div class="col-md-10">
                                                <div class="row">

                                                    @*<div class="col-md-3">
                    <div class="form-group">
                        <label>Class</label>
                        <select class="form-control form-control-sm select2" ng-model="newAddLesson.ClassId" ng-change="GetClassWiseSubjectList(newAddLesson.ClassId)">
                            <option ng-value="0">**Select Class**</option>
                            <option ng-value="cl.id" ng-repeat="cl in ClassSection.ClassList" ng-selected="cl.id==newAddLesson.ClassId">{{cl.text}}</option>
                        </select>
                    </div>
                </div>*@
                                                    <div class="col-md-2" ng-show="AcademicConfig.ActiveBatch==true">
                                                        <label for="">Batch</label>
                                                        <select class="form-control form-control-sm select2" ng-model="newAddLesson.BatchId">
                                                            <option ng-value="0">**Select Batch**</option>
                                                            <option ng-value="cl.id" ng-repeat="cl in BatchList" ng-selected="cl.id==newAddLesson.BatchId">{{cl.text}}</option>
                                                        </select>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <div class="form-group mb-2">
                                                            <label for="">Class</label>
                                                            <select class="form-control form-control-sm select2" ng-model="newAddLesson.SelectedClass" ng-change="GetClassWiseSubjectList()">
                                                                <option ng-value="cl" ng-repeat="cl in ClassSection.ClassList">{{cl.text}}</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    @*<div class="col-sm-2 col-lg-2 col-md-2" ng-show="AcademicConfig.ActiveFaculty==true">
                                                        <div class="form-group">
                                                            <label for="">Faculty</label>
                                                            <select class="form-control form-control-sm select2" ng-model="newAddLesson.FacultyId" ng-change="GetClassWiseSubjectList()">
                                                                <option ng-value="0">**Select Batch**</option>
                                                                <option ng-value="cl.id" ng-repeat="cl in FacultyList" ng-selected="cl.id==newAddLesson.FacultyId">{{cl.text}}</option>
                                                            </select>
                                                        </div>
                                                    </div>*@

                                                    <div class="col-md-2" ng-show="newAddLesson.SelectedClass.ClassType==2  &&  AcademicConfig.ActiveClassYear==true">
                                                        <div class="form-group">
                                                            <label for="">Class Year</label>
                                                            <select class="form-control form-control-sm select2" ng-model="newAddLesson.ClassYearId" ng-change="GetClassWiseSubjectList()">
                                                                <option ng-value="0">**Select Year**</option>
                                                                <option ng-value="cl.id" ng-repeat="cl in ClassYearList" ng-selected="cl.id==newAddLesson.ClassYearId">{{cl.text}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2" ng-show="newAddLesson.SelectedClass.ClassType==3 &&  AcademicConfig.ActiveSemester==true">
                                                        <div class="form-group">
                                                            <label for="">Semester</label>
                                                            <select class="form-control form-control-sm select2" ng-model="newAddLesson.SemesterId" ng-change="GetClassWiseSubjectList()">
                                                                <option ng-value="0">**Select Semester**</option>
                                                                <option ng-value="cl.id" ng-repeat="cl in SemesterList" ng-selected="cl.id==newAddLesson.SemesterId">{{cl.text}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="form-group">
                                                            <label>Subject</label>
                                                            <select class="form-control form-control-sm select2" ng-model="newAddLesson.SubjectId" ng-change="GetLessonPlanByClassSubject()">
                                                                <option ng-value="cl.id" ng-repeat="cl in SubjectList" ng-selected="cl.id==newAddLesson.SubjectId">{{cl.text}}</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="quantity">
                                                            <label>Number of Lessons</label>
                                                            <div class="input-group">
                                                                <input type="number" id="quantity" name="quantity" class="input-number form-control form-control-sm addsubtip" ng-model="newAddLesson.NoOfLesson" min="1" max="100" ng-change="ChangeNoOfLesson()">
                                                                <span class="input-group-btn">
                                                                    <button class="quantity-left-minus btn  btn-sm btn btn-number" data-type="plus" data-field="" ng-click="addNL(-1)">
                                                                        <i class="fas fa-minus subt"></i>
                                                                    </button>
                                                                </span>
                                                                <span class="input-group-btn">
                                                                    <button class="quantity-right-plus btn btn-number btn-sm btn" data-type="minus" data-field="" ng-click="addNL(1)">
                                                                        <i class="fas fa-plus add"></i>
                                                                    </button>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2">
                                                <div class="person-photo-attachment-wrap text-center">
                                                    <div class="img-wrap mx-auto mb-2" style="width:85px; height:85px">
                                                        <img ng-src="{{newAddLesson.FilesData || newAddLesson.CoverFilePath}}" class="img-fluid" alt="" data-toggle="modal" data-target="#bookcover">
                                                    </div>
                                                    <!-- Button trigger modal -->
                                                    <label for="choose-file" type="button" class="btn btn-outline-secondary btn-sm"><i class="fas fa-camera w-t"></i> Book Cover</label>
                                                    <input id="choose-file" type="file" accept=".jpg,.jpeg,.png" style="display: none;" file-model ng-model="newAddLesson.Files_TMP" fileread="newAddLesson.FilesData" />
                                                </div>
                                            </div>
                                            @*<div class="col-md-2">
            <div class="addfile">
                <div class="upload-btn-wrapper">
                    <button class="btn"><i class="fas fa-link"></i><br>Book Cover</button>

                    <input id="bookCover" type="file" accept=".jpg,.jpeg,.png" file-model ng-model="newAddLesson.Files_TMP" />
                </div>
            </div>
        </div>*@
                                        </div>

                                        <div class="accordion" id="accordionExample2" style="margin-top: 0;">
                                            <div class="card">
                                                <div id="headingTwo">
                                                    <h2 class="mb-0 collapsed" @*data-toggle="collapse"
                                                        data-target="#collapseTwo" aria-expanded="false"
                                                        aria-controls="collapseTwo"*@>
                                                        <span class="acc_open">Lesson Details</span>

                                                    </h2>
                                                </div>
                                                <div id="collapseTwo" class="collapse show"
                                                     aria-labelledby="headingTwo"
                                                     data-parent="#accordionExample2">
                                                    <div class="card-body">
                                                        <div class="timeline-item">
                                                            <div class="row">
                                                                <div class="col-md-4 addtopic">
                                                                    <h6 class="text-secondary">Add {{newAddLesson.NoOfLesson}} Lessons/Themes</h6>
                                                                    <div class="lesson" ng-repeat="ld in newAddLesson.DetailsColl" @*ng-class="{{ld.SNo==1 ? 'activetopic':''}}"*@>
                                                                        <div class="d-flex">
                                                                            <i class="fas fa-caret-right mr-3"></i>
                                                                            <div><label class="numbering">{{ld.SNo}}</label></div>
                                                                            <div class="titleName">
                                                                                <input class="form-control form-control-sm txtip" placeholder="lesson name" ng-model="ld.LessonName" ng-focus="ChangeCurrentLesson(ld)">
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-8">
                                                                    <h6 class="text-secondary">Add Topics/LOC</h6>
                                                                    <div class="one-lesson-subtopic" ng-repeat="tc in CurrentLesson.TopicColl">

                                                                        <div class="lesson">
                                                                            <div class="d-flex">
                                                                                <div><label class="numbering">{{CurrentLesson.SNo}}.{{tc.SNo}}</label></div>
                                                                                <div class="titleName">
                                                                                    <input type="text" class="form-control form-control-sm txtip" placeholder="lesson topic name" ng-model="tc.TopicName">
                                                                                </div>
                                                                                <i class="fas fa-plus addicon ml-2" ng-show="tc.SNo==CurrentLesson.TopicColl.length" ng-click="AddTopic($index)"></i>
                                                                                <i class="far fa-trash-alt delete-icon ml-2" ng-show="tc.SNo>1" ng-click="DelTopic($index)"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="time-label">
                                            <span class="d-block border-0 p-3 text-center">
                                                <button type="button" class="btn btn-sm btn-default" style="min-width: 90px" ng-click="ClearAddLesson()">
                                                    Reset
                                                </button>
                                                <button type="button" class="btn btn-sm btn-success" style="min-width: 90px" ng-click="CallSaveUpdateLessonPlan()">
                                                    Save
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Add Lesson Ends-->
                            <!--List Of Lessons Starts-->
                            <div class="tab-pane fade main-section" id="profile" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div class="container1">
                                    <div class="accordion" id="accordionExample3" style="margin-top: 0;">
                                        <div class="card mb-2">
                                            <div class="row">
                                                @*<div class="col-md-3">
            <div class="form-group">
                <label>Class</label>
                <select class="form-control form-control-sm select2" ng-model="newListOfLessons.ClassId" ng-change="GetClassWiseSubjectListForLP(newListOfLessons.ClassId)">
                    <option ng-value="0">**Select Class**</option>
                    <option ng-value="cl.id" ng-repeat="cl in ClassSection.ClassList" ng-selected="cl.id==newListOfLessons.ClassId">{{cl.text}}</option>
                </select>
            </div>
        </div>*@
                                                <div class="col-md-2" ng-show="AcademicConfig.ActiveBatch==true">
                                                    <label for="">Batch</label>
                                                    <select class="form-control form-control-sm select2" ng-model="newListOfLessons.BatchId">
                                                        <option ng-value="0">**Select Batch**</option>
                                                        <option ng-value="cl.id" ng-repeat="cl in BatchList" ng-selected="cl.id==newListOfLessons.BatchId">{{cl.text}}</option>
                                                    </select>
                                                </div>

                                                <div class="col-md-2">
                                                    <div class="form-group mb-2">
                                                        <label for="">Class</label>
                                                        <select class="form-control form-control-sm select2" ng-model="newListOfLessons.SelectedClass" ng-change="GetClassWiseSubjectListForLP()">
                                                            <option ng-value="cl" ng-repeat="cl in ClassSection.ClassList">{{cl.text}}</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                @*<div class="col-sm-2 col-lg-2 col-md-2" ng-show="AcademicConfig.ActiveFaculty==true">
                                                    <div class="form-group">
                                                        <label for="">Faculty</label>
                                                        <select class="form-control form-control-sm select2" ng-model="newListOfLessons.FacultyId" ng-change="GetClassWiseSubjectListForLP()">
                                                            <option ng-value="0">**Select Batch**</option>
                                                            <option ng-value="cl.id" ng-repeat="cl in FacultyList" ng-selected="cl.id==newAddLesson.FacultyId">{{cl.text}}</option>
                                                        </select>
                                                    </div>
                                                </div>*@

                                                <div class="col-md-2" ng-show="newListOfLessons.SelectedClass.ClassType==2  &&  AcademicConfig.ActiveClassYear==true">
                                                    <div class="form-group">
                                                        <label for="">Class Year</label>
                                                        <select class="form-control form-control-sm select2" ng-model="newListOfLessons.ClassYearId" ng-change="GetClassWiseSubjectListForLP()">
                                                            <option ng-value="0">**Select Year**</option>
                                                            <option ng-value="cl.id" ng-repeat="cl in ClassYearList" ng-selected="cl.id==newListOfLessons.ClassYearId">{{cl.text}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-2" ng-show="newListOfLessons.SelectedClass.ClassType==3 &&  AcademicConfig.ActiveSemester==true">
                                                    <div class="form-group">
                                                        <label for="">Semester</label>
                                                        <select class="form-control form-control-sm select2" ng-model="newListOfLessons.SemesterId" ng-change="GetClassWiseSubjectListForLP()">
                                                            <option ng-value="0">**Select Semester**</option>
                                                            <option ng-value="cl.id" ng-repeat="cl in SemesterList" ng-selected="cl.id==newListOfLessons.SemesterId">{{cl.text}}</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="col-md-3">
                                                    <div class="form-group">
                                                        <label>Subject</label>
                                                        <select class="form-control form-control-sm select2" ng-model="newListOfLessons.SubjectId" ng-change="GetLessonPlanByClassSubjectLP()">
                                                            <option ng-value="0">**Select Subject**</option>
                                                            <option ng-value="cl.id" ng-repeat="cl in SubjectListLP" ng-selected="cl.id==newListOfLessons.SubjectId">{{cl.text}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                @*<div class="col-md-4">
            <div class="mt-4 float-right">
                <button type="button" class="btn btn-sm btn-default" style="min-width: 90px">
                    Reset
                </button>
                <button type="button" class="btn btn-sm btn-success" id="backList" style="min-width: 90px">
                    Save
                </button>
            </div>
        </div>*@
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion" id="accordionExample4" style="margin-top: 0;">
                                        <div class="card">
                                            <div id="headingfour">
                                                <h2 class="mb-0 collapsed" @*data-toggle="collapse"
                                                    data-target="#collapsefour" aria-expanded="false"
                                                    aria-controls="collapsefour"*@>
                                                    <span class="acc_open">{{newListOfLessonPlan.SubjectName}}</span>
                                                </h2>
                                            </div>
                                            <div id="collapsefour" class="collapse show mt-2"
                                                 aria-labelledby="headingfour"
                                                 data-parent="#accordionExample2">
                                                <div class="card" style="border:1px solid #cad8d2;margin-left:20px;">
                                                    <div class="card-header" style="background-color: #e9f2ee; padding:4px 10px;">
                                                        <div class="row">
                                                            <div class="col-md-11">
                                                                <h6># Lessons and Topics</h6>
                                                            </div>
                                                            @*<div class="col-md-1">
                                                                    <div class="text-center">
                                                                        <h6>Action</h6>
                                                                    </div>
                                                                </div>*@
                                                        </div>
                                                    </div>
                                                    <div class="card-body" style="padding-left: 20px;">
                                                        <div class="row">
                                                            <div class="col-md-11">
                                                                <div class="tab-pane active" id="tabs-1" role="tabpanel">
                                                                    <div id="listing" ng-repeat="ld in newListOfLessons.DetailsColl">
                                                                        <p class="topic">{{ld.SNo}}. {{ld.LessonName}}</p>
                                                                        <ul class="topic_section pl-2">
                                                                            <li class="past_section" ng-repeat="td in ld.TopicColl"><span style="top: -10px;">----</span><a href="#">{{ld.SNo}}.{{td.SNo}}. {{td.TopicName}} </a></li>
                                                                        </ul>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            @*<div class="col-md-1">
                                                                    <div class="text-center mt-2">
                                                                        <div class="row">
                                                                            <div class="col-md-6 col-sm-6 col-lg-6">
                                                                                <a href="#" id="editlist">
                                                                                    <i class="fas fa-edit text-info"></i><br><label>Edit</label>
                                                                                </a>
                                                                            </div>

                                                                            <div class="col-md-6 col-sm-6 col-lg-6">
                                                                                <a href="#">
                                                                                    <i class="far fa-calendar-alt"></i><br><label>L.Plan</label>
                                                                                </a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>*@
                                                        </div>
                                                    </div>

                                                </div>

                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <!--List Of Lessons Ends-->

                        </div>
                    </div>
                </div>

                <!--New Modal Code Added by Suresh on chaitra-30-->
                <div class="modal fade" id="modal-xl">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h6 class="modal-title">Lesson Plan Detail</h6>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body" style="max-height:500px;overflow-y:auto">
                                <div ng-repeat="gDet in CurrentLessionTopic.ContentsColl">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group d-flex">
                                                <label class="mr-2"><b><span>Date </span></b></label>
                                                <input type="text" date-picker
                                                       class="form-control form-control-sm" ng-model="gDet.ForDate_TMP" date-detail="gDet.ForDateDet">
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label><b>Teaching Content</b></label>
                                                <textarea class="textarea" placeholder="Place some text here" style="
                                                                          width: 100%;
                                                                          height:150px!important;
                                                                          font-size: 14px;
                                                                          line-height: 18px;
                                                                          border: 1px solid #dddddd;
                                                                          padding: 10px;
                                                                        " ng-model="gDet.Contents" html-editor></textarea>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="mt-0 mb-2">
                                        <button class="btn btn-sm btn-success" ng-click="AddContentDetails($index)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <button class="btn btn-sm btn-danger" ng-click="delContentDetails($index)">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="time-label">
                                    <span class="d-block border-0 p-3 text-center">

                                        <button type="button" class="btn btn-sm btn-default" style="min-width: 90px;">Reset</button>
                                        <button type="button" class="btn btn-sm btn-success" style="min-width: 90px;" ng-click="CallSaveUpdateLessonTopicTeacherContent()">Save</button>
                                    </span>
                                </div>

                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                </div>


                <!--New Modal Code Added by Suresh on chaitra-30-->
                <div class="modal fade" id="modal-xl-1">
                    <div class="modal-dialog modal-xl">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h6 class="modal-title">Lesson Plan Detail</h6>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body" style="max-height:500px;overflow-y:auto">
                                <div ng-repeat="gDet in CurrentLessonC.ContentsColl">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group d-flex">
                                                <label class="mr-2"><b><span>Date </span></b></label>
                                                <input type="text" date-picker
                                                       class="form-control form-control-sm" ng-model="gDet.ForDate_TMP" date-detail="gDet.ForDateDet">
                                            </div>
                                        </div>
                                        <div class="col-md-12">
                                            <div class="form-group">
                                                <label><b>Teaching Content</b></label>
                                                <textarea class="textarea" placeholder="Place some text here" style="
                                                                          width: 100%;
                                                                          height:150px!important;
                                                                          font-size: 14px;
                                                                          line-height: 18px;
                                                                          border: 1px solid #dddddd;
                                                                          padding: 10px;
                                                                        " ng-model="gDet.Contents" html-editor></textarea>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="mt-0 mb-2">
                                        <button class="btn btn-sm btn-success" ng-click="AddContentDetails1($index)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                        <button class="btn btn-sm btn-danger" ng-click="delContentDetails1($index)">
                                            <i class="fas fa-trash-alt"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="time-label">
                                    <span class="d-block border-0 p-3 text-center">

                                        <button type="button" class="btn btn-sm btn-default" style="min-width: 90px;">Reset</button>
                                        <button type="button" class="btn btn-sm btn-success" style="min-width: 90px;" ng-click="CallSaveUpdateLessonTeacherContent()">Save</button>
                                    </span>
                                </div>

                            </div>
                        </div>
                        <!-- /.modal-content -->
                    </div>
                </div>
            </section>
        </div>
    </section>
    <!--Modal for book cover-->
    <div class="modal fade" id="bookcover">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h6 class="modal-title">Book Cover Name</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <img class="img-fluid" ng-src="{{newAddLesson.FilesData || newAddLesson.CoverFilePath}}" style="background-size: cover;" />

                </div>
            </div>
            <!-- /.modal-content -->
        </div>
    </div>
</div>
