
<script src="~/jslib/Academic/Download.js?v=20251115"></script>
<div class="hold-transition layout-navbar-fixed" ng-app="myApp" ng-controller="DownloadController" ng-init="LoadData()">
    <section class="content">
        <div class="container-fluid">
            <section class="iframe-content-starts-here">
                <div class="tab-content" id="pills-tabContent">
                    <!-- Second Tab Content -->
                    <div class="tab-pane fade show active" id="pills-second" role="tabpanel"
                         aria-labelledby="pills-second-tab">
                        <header class="if-page-have-nav-tabs px-2">
                            <div class="row upper-tab">
                                <div class="col-md-12">
                                    <ul class="nav nav-tabs cstm-nav-tabs-border-bottom-active" id="myTab"
                                        role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home"
                                               role="tab" aria-controls="home" aria-selected="true">Student</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile"
                                               role="tab" aria-controls="profile" aria-selected="false">Employee</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" id="export-tab" data-toggle="tab" href="#export"
                                               role="tab" aria-controls="export" aria-selected="false">
                                                Download all Student Photo
                                            </a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" id="employeepic-tab" data-toggle="tab"
                                               href="#employeepic" role="tab" aria-controls="employeepic"
                                               aria-selected="false">Download all Employee photo</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </header>
                        <div class="tab-content" id="myTabContent">
                            <!--Student Tab Starts-->
                            <div class="tab-pane fade show active main-section" id="home" role="tabpanel"
                                 aria-labelledby="home-tab">
                                <div class="row">
                                    <div class="col-sm-8 col-lg-8 col-md-8">
                                        <label>Select Student</label>
                                        <div class="input-group-prepend">
                                            <select class="input-group-text dropdown-toggle p-0"
                                                    style="outline: none;
                                                                            border-top-right-radius: unset;
                                                                            border-bottom-right-radius: unset;
                                                                            margin-right: -3px;
                                                                            z-index: 1;
                                                                    " ng-model="newStudent.SelectStudent">

                                                <option class="dropdown-item" ng-repeat="ss in StudentSearchOptions" ng-value="ss.value" ng-selected="ss.value==newStudent.StudentSearchBy">
                                                    {{ss.text}}
                                                </option>
                                            </select>
                                            <select class="form-control select2bs4 form-control-sm" all-Student ng-model="newStudent.StudentId" confirm-action="GetStudentFileDataById()" student-detail="newStudent.StudentDetails" side-bar-data="newStudent.EmpSideBarData" search-by="newStudent.StudentSearchBy">
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div id="document-section" class="mt-2">
                                    <div class="card p-2">
                                        <div class="row" ng-if="newStudent.StudentId">
                                            <div class="col-md-2">
                                                <div class="d-flex">
                                                    <img ng-src="{{stdDet.PhotoPath}}"
                                                         style="width: auto;height:100px" />
                                                    <span style="font-weight: bold" class="ml-4 mt-4">
                                                        <br> <small>  </small>
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-2 mt-4">
                                                        <label>Student Id</label><br />
                                                        <label style="font-weight: bold">{{stdDet.StudentId}}</label>
                                                    </div>
                                                    <div class="col-md-4 mt-4">
                                                        <label>Name</label><br />
                                                        <label style="font-weight: bold">{{stdDet.Name}}</label>
                                                    </div>
                                                    <div class="col-md-2 mt-4">
                                                        <label>Class</label><br />

                                                                            <label style="font-weight: bold">

                                                                                {{stdDet.ClassName}} {{stdDet.SectionName}}
                                                                                <span ng-if="stdDet.Batch || stdDet.Semester || stdDet.ClassYear">
                                                                                    - {{stdDet.Batch}} {{stdDet.Semester}} {{stdDet.ClassYear}}
                                                                                </span>

                                                                              
                                                                            </label>
                                                    </div>
                                                    <div class="col-md-2 mt-4">
                                                        <label>Roll No</label><br />
                                                        <label style="font-weight: bold">{{stdDet.RollNo}}</label>
                                                    </div>
                                                    @*<div class="col-md-2 mt-4">
                                                        <label>Board Regd No</label><br />
                                                        <label style="font-weight: bold">{{stdDet.BoardRegdNo}}</label>
                                                    </div>*@
                                                    <div class="col-md-2 mt-4">
                                                        <label>Adm.No</label><br />
                                                        <label style="font-weight: bold">{{stdDet.RegNo}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                           
                                        </div>
                                        <hr>
                                        <div class="teacher-file-attach d-flex bg-white p-2" style="margin-top: -15px;" ng-if="newStudent.StudentId">
                                            <span style="font-size: 16px;">
                                                <i class="fas fa-folder-open text-success"></i> &nbsp; {{stdDet.AttachmentColl.length}}
                                                File(s) Attachment
                                            </span>
                                            @*<span style="font-size: 16px;" class="ml-auto">
                                    <a href="~/wwwroot/dynamic/images/question-paper-sample.jpg" download>
                                        <i class="fas fa-download text-success"
                                           title="Download All"></i>
                                    </a>
                                </span>*@
                                        </div>
                                        <!-- teacher file preview -->
                                        <div class="card p-2">
                                            <div class="row">
                                                <div class="col-md-2" ng-repeat="S in stdDet.AttachmentColl">

                                                    <div class="card" style="border:1px solid #ececec">
                                                        <div class="card-header p-2" style="background-color: #f7f7f7; border: 1px solid #ececec ">
                                                            <label><b>{{$index+1}}. {{S.Name}}</b></label>
                                                        </div>
                                                        <div class="card-body p-2" style="height: 120px;">
                                                            @*<img  data-target="#modalIMG-file"
                                                data-toggle="modal" class="img-fluid"
                                                ng-src="{{S.DocPath}}" style="height:130px" />*@
                                                            <img src="/wwwroot/dynamic/images/flaticons/pdf.png" ng-show="S.Extension == '.pdf'" ng-click="ShowDocPdf(S)" style="max-height: 100px; padding: 16px; " />
                                                            <img ng-src="{{S.DocPath}}" ng-hide="S.Extension == '.pdf'" ng-click="ShowDocPdf(S)" style="height:100px; width:auto; border:1px solid #ccc" />
                                                        </div>
                                                        <div class="card-footer p-2 text-right" style="background-color: #f7f7f7; border: 1px solid #ececec ">
                                                            <span>
                                                                {{S.DocTypeName}} &nbsp; <span style="font-size: 16px;" class="ml-auto">
                                                                    <a href="{{S.DocPath}}" download>
                                                                        <i class="fas fa-download text-success" title="Document Name"></i>
                                                                    </a>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>


                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Student Tab Ends-->
                            <!--Teacher Tab Starts-->
                            <div class="tab-pane fade main-section" id="profile" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div id="employee-section ">
                                    <div class="row">
                                        <div class="col-sm-6 col-lg-6 col-md-6">
                                            <label>Select Employee</label>
                                            <div class="input-group-prepend">
                                                <select class="input-group-text dropdown-toggle p-0"
                                                        style="outline: none;
                                                                            border-top-right-radius: unset;
                                                                            border-bottom-right-radius: unset;
                                                                            margin-right: -3px;
                                                                            z-index: 1;
                                                                    " ng-model="newEmployee.SelectEmployee">

                                                    <option class="dropdown-item" ng-repeat="ss in EmployeeSearchOptions" ng-value="ss.value" ng-selected="ss.value==newEmployee.EmployeeSearchBy">
                                                        {{ss.text}}
                                                    </option>

                                                </select>
                                                <select class="form-control select2bs4 form-control-sm" all-Employee ng-model="newEmployee.EmployeeId" Employee-detail="newEmployee.EmployeeDetails" confirm-action="GetEmployeeFileDataById()" side-bar-data="newEmployee.EmpSideBarData" search-by="newEmployee.EmployeeSearchBy">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div id="emp-document-section">
                                    <div class="card mt-2 p-2">
                                        <div class="row" ng-if="newEmployee.EmployeeId">
                                            <div class="col-md-2">
                                                <div class="d-flex">
                                                    <img ng-src=" {{empDet.PhotoPath}}"
                                                         style="width: auto;height:100px" />
                                                   
                                                </div>
                                            </div>
                                            <div class="col-md-2 mt-5">
                                                <label >Emp.Code</label><br />
                                                <label style="font-weight: bold">{{empDet.EmployeeCode}}</label>
                                            </div>
                                            <div class="col-md-3 mt-5">
                                                <label>Name</label><br />
                                                <label style="font-weight: bold">{{empDet.Name}}</label>
                                            </div>

                                            <div class="col-md-2 mt-5">
                                                <label >Department</label><br />
                                                <label style="font-weight: bold">{{empDet.Department}}</label>
                                            </div>
                                            <div class="col-md-2 mt-5">
                                                <label>Designation</label><br />
                                                <label style="font-weight: bold"> {{empDet.Designation}}</label>
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="teacher-file-attach d-flex bg-white p-2" style="margin-top: -15px;" ng-if="newEmployee.EmployeeId">
                                            <span style="font-size: 16px;">
                                                <i class="fas fa-folder-open text-success"></i> &nbsp; {{empDet.AttachmentColl.length}}
                                                File(s) Attachment
                                            </span>
                                            @*<span style="font-size: 16px;" class="ml-auto">
                                    <a href="~/wwwroot/dynamic/images/question-paper-sample.jpg" download>
                                        <i class="fas fa-download text-success"
                                           title="Download All"></i>
                                    </a>
                                </span>*@
                                        </div>
                                        <!-- teacher file preview -->
                                        <div class="card p-2">
                                            <div class="row">
                                                <div class="col-md-2" ng-repeat="E in empDet.AttachmentColl">
                                                    <div class="card" style="border:1px solid #ececec">
                                                        <div class="card-header p-2" style="background-color: #f7f7f7; border: 1px solid #ececec ">
                                                            <label><b>{{$index+1}}.{{E.Name}}</b></label>
                                                        </div>
                                                        <div class="card-body p-2" style="height: 120px;">
                                                            @*<img data-target="#modalIMG-file"
                                                data-toggle="modal" class="img-fluid"
                                                ng-src="{{E.DocPath}}" style="height:130px" />*@

                                                            <img src="/wwwroot/dynamic/images/flaticons/pdf.png" ng-show="E.Extension == '.pdf'" ng-click="ShowDocPdf(E)" style="max-height: 100px; padding: 16px; " />
                                                            <img ng-src="{{E.DocPath}}" ng-hide="E.Extension == '.pdf'" ng-click="ShowDocPdf(E)" style="height:100px; width:auto; border:1px solid #ccc" />
                                                        </div>
                                                        <div class="card-footer p-2 text-right" style="background-color: #f7f7f7; border: 1px solid #ececec ">
                                                            <span>
                                                                {{E.DocTypeName}} &nbsp; <span style="font-size: 16px;" class="ml-auto">
                                                                    <a href="{{E.DocPath}}" download>
                                                                        <i class="fas fa-download text-success" title="Document Name"></i>
                                                                    </a>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade"
                                         id="modalIMG-empfile" role="dialog" tabindex="-1">
                                        <div class="modal-dialog modal-lg" role="document">
                                            <div class="modal-content">
                                                <div class="modal-body mb-0 p-0">
                                                    <img src="~/wwwroot/dynamic/images/question-paper-sample.jpg" alt=""
                                                         style="width:100%; height: 70vh;">
                                                </div>
                                                <div class="modal-footer">
                                                    <div>
                                                        <a href="~/wwwroot/dynamic/images/question-paper-sample.jpg"
                                                           target="_blank" download>Download</a>
                                                    </div>
                                                    <button class="btn btn-success btn-rounded btn-sm ml-4 text-center"
                                                            data-dismiss="modal" type="button"
                                                            style="min-width: 90px;">
                                                        Close
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!--Teacher Tab Ends-->
                            <!--Download all Student Photos Tab Starts-->
                            <div class="tab-pane fade main-section" id="export" role="tabpanel"
                                 aria-labelledby="export-tab">
                                <div class="card p-2">
                                    <div class="row" style="border-bottom: 2px dashed #76be4e;">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="">Class</label>
                                                <select ng-model="newDownloadStudent.SelectedClass" class="form-control form-control-sm select2"
                                                        ng-options="x.text for x in ClassList.SectionList"></select>
                                            </div>
                                        </div>
                                        @*<div class="col-md-2">
                                <div class="custom-control custom-checkbox mt-4">
                                    <input class="custom-control-input" type="checkbox" id="customCheckbox1"
                                           value="option1">
                                    <label for="customCheckbox1" class="custom-control-label">
                                        For all
                                        Student
                                    </label>
                                </div>
                            </div>*@
                                        <div class="col-md-2">
                                            <a href="/Academic/Setup/DownloadStudentPhoto?ClassId={{newDownloadStudent.SelectedClass.ClassId}}&SectionId={{newDownloadStudent.SelectedClass.SectionId}}" class="btn btn-sm btn-success mt-4"><i class="fas fa-download"></i> Download</a>
                                        </div>
                                    </div>
                                    <h6 class="mt-2"> Download Log</h6>
                                    <table id="main-table"
                                           class="main-table table table-sm table-bordered bg-white">
                                        <thead>
                                            <tr>
                                                <th style="width: 120px">Date</th>
                                                <th style="width: 250px">Class/Sec</th>
                                                <th style="width: 350px">Download By</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td></td>
                                                <td></td>

                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!--Download all Student Photos Tab Ends-->
                            <!--Download all Teacher Photos Tab Starts-->
                            <div class="tab-pane fade main-section" id="employeepic" role="tabpanel"
                                 aria-labelledby="employeepic-tab">
                                <div class="card p-2">
                                    <div class="row" style="border-bottom: 2px dashed #76be4e;">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="">Department</label>
                                                <select class="form-control form-control-sm select2" ng-model="newDownloadEmployee.DepartmentId">
                                                    <option value="1">Maths</option>
                                                    <option value="2">English</option>
                                                    <option value="3">Nepali</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <div class="custom-control custom-checkbox mt-4">
                                                <input class="custom-control-input" type="checkbox" id="customCheckbox1"
                                                       value="option1">
                                                <label for="customCheckbox1" class="custom-control-label">
                                                    For all
                                                    Employee
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                            <button class="btn btn-sm btn-success mt-4"><i class="fas fa-download"></i> Download</button>
                                        </div>
                                    </div>
                                    <h6 class="mt-2">Download Log</h6>
                                    <table id="main-table"
                                           class="main-table table table-sm table-bordered bg-white">
                                        <thead>
                                            <tr>
                                                <th style="width: 120px">Date</th>
                                                <th style="width: 250px">Department</th>
                                                <th style="width: 350px">Download By</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!--Download all Teacher Photos Tab Ends-->
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="DocView" role="dialog" tabindex="-1" style="margin-top:30px">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-body mb-0 p-2">
                        <iframe ng-hide="viewImg1.FileType === 'image'" id="pdfViewer1" style="width: 100%; height: 500px; border: none;"></iframe>
                        <img ng-show="viewImg1.FileType === 'image'" ng-src="{{viewImg1.ContentPath}}" alt="" style="width: 100%; height: auto;" id="imgPreviewAdd">
                    </div>
                    <div class="modal-footer p-2">
                        <div><a href="{{viewImg1.ContentPath}}" class="btn btn-sm load btn-success" download>Download</a></div>
                        <button class="btn btn-danger btn-rounded btn-sm ml-4 btn-add text-center" data-dismiss="modal" type="button" style="min-width: 70px;">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!--/. container-fluid -->
    </section>
</div>

