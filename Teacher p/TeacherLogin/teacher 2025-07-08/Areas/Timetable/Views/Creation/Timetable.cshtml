
@{
    ViewBag.Title = "Timetable";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script src="~/AngularJs/Creation/Timetable.js"></script>
<div class="content-wrapper" ng-app="myApp" ng-controller="TimetableController" ng-init="LoadData()">
    <!-- Main content -->
    <section class="content">
        <div class="container-fluid">
            <section class="iframe-content-starts-here">
                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-second" role="tabpanel"
                         aria-labelledby="pills-second-tab">
                        <!-- if-page-have-nav-tabs -->
                        <header class="if-page-have-nav-tabs">
                            <div class="row upper-tab">
                                <div class="col-md-12">
                                    <!-- <h3 class="menu-title">Class Setup</h3> -->
                                    <ul class="nav nav-tabs cstm-nav-tabs-border-bottom-active" id="myTab"
                                        role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link active" id="mytimetable-tab" data-toggle="tab"
                                               href="#mytimetable" role="tab" aria-controls="mytimetable"
                                               aria-selected="true">My Timetable</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" id="pills-four-tab" data-toggle="tab"
                                               href="#pills-four" role="tab" aria-controls="pills-four"
                                               aria-selected="false">Class Timetable</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="nav-link" id="profile-tab" data-toggle="tab"
                                               href="#profile" role="tab" aria-controls="profile"
                                               aria-selected="false">Exam Timetable</a>
                                        </li>
                                    </ul>
                                </div>

                            </div>
                        </header>
                        <!-- end if-page-have-nav-tabs -->
                        <div class="tab-content" id="myTabContent">
                            <div class="tab-pane fade show active" id="mytimetable" role="tabpanel" aria-labelledby="mytimetable-tab">

                                <div class="card card-primary card-tabs" style="margin-top: -30px;">
                                    <div class="card-header with-gradient-bg p-0 pt-2">
                                        <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                                            <li class="nav-item">
                                                <a ng-class="getFavClassIcon(1)" @*class="nav-link active"*@ id="custom-tabs-one-home-tab"
                                                   data-toggle="pill" href="#custom-tabs-one-home" role="tab" ng-click="GetAccodingToMonth(1)"
                                                   aria-controls="custom-tabs-one-home" aria-selected="true" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Sunday</a>
                                            </li>
                                            <li class="nav-item">
                                                <a ng-class="getFavClassIcon(2)" id="custom-tabs-one-profile-tab" data-toggle="pill"
                                                   href="#custom-tabs-one-profile" role="tab" ng-click="GetAccodingToMonth(2)"
                                                   aria-controls="custom-tabs-one-profile"
                                                   aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Monday</a>
                                            </li>
                                            <li class="nav-item">
                                                <a ng-class="getFavClassIcon(3)" id="custom-tabs-one-messages-tab" data-toggle="pill"
                                                   href="#custom-tabs-one-messages" role="tab" ng-click="GetAccodingToMonth(3)"
                                                   aria-controls="custom-tabs-one-messages"
                                                   aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Tuesday</a>
                                            </li>
                                            <li class="nav-item">
                                                <a ng-class="getFavClassIcon(4)" id="custom-tabs-one-settings-tab" data-toggle="pill"
                                                   href="#custom-tabs-one-settings" role="tab" ng-click="GetAccodingToMonth(4)"
                                                   aria-controls="custom-tabs-one-settings"
                                                   aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Wednesday</a>
                                            </li>
                                            <li class="nav-item">
                                                <a ng-class="getFavClassIcon(5)" id="custom-tabs-one-thrusday-tab" data-toggle="pill"
                                                   href="#custom-tabs-one-thrusday" role="tab" ng-click="GetAccodingToMonth(5)"
                                                   aria-controls="custom-tabs-one-thrusday"
                                                   aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Thursday</a>
                                            </li>
                                            <li class="nav-item">
                                                <a ng-class="getFavClassIcon(6)" id="custom-tabs-one-friday-tab" data-toggle="pill"
                                                   href="#custom-tabs-one-friday" role="tab" ng-click="GetAccodingToMonth(6)"
                                                   aria-controls="custom-tabs-one-friday"
                                                   aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Friday</a>
                                            </li>
                                            <li class="nav-item">
                                                <a ng-class="getFavClassIcon(7)" id="custom-tabs-one-sat-tab" data-toggle="pill"
                                                   href="#custom-tabs-one-sat" role="tab" ng-click="GetAccodingToMonth(7)"
                                                   aria-controls="custom-tabs-one-sat"
                                                   aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Saturday</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body">
                                        <div class="tab-content" id="custom-tabs-one-tabContent">
                                            <div class="tab-pane fade show active" id="custom-tabs-one-home"
                                                 role="tabpanel" aria-labelledby="custom-tabs-one-home-tab">

                                                <div class="pt-3" ng-repeat="C in ClassShiftList">
                                                    <label class="btn btn-sm btn-info" style="min-width: 90px;">{{C.Name}}</label>
                                                    <div class="table-scroll-x-y sales-main-table table-scroll ">
                                                        <table id="main-table" class="main-table table table-sm table-bordered bg-white">
                                                            <thead>
                                                                <tr>
                                                                    <th style="width:80px">Period Name</th>
                                                                    <th style="width:100px">Class/Sec</th>
                                                                    <th style="width:130px">Subject Name</th>
                                                                    <th style="width:180px">Time Duration</th>

                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="F in ClassScheduleCollList | filter:C.Name">
                                                                    <td>{{F.Period}}</td>
                                                                    <td>{{F.ClassName}}-{{F.SectionName}}</td>
                                                                    <td>{{F.SubjectName}}</td>
                                                                    <td>{{F.StartTime}}-{{F.EndTime}}</td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                    <!-- table end -->
                                                </div>
                                               
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /.card -->
                                </div>
                            </div>

                            <!-- My TimetableEnds -->
                            <div class="tab-pane fade" id="pills-four" role="tabpanel" aria-labelledby="pills-four-tab">
                                <div class=" card-tabs" style="margin-top: -30px;">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group ">
                                                <label>Shift</label>
                                                <select class="form-control form-control-sm "  ng-change="OnChangeClassTime()" ng-model="TimeTable.classShiftId">
                                                    <option ng-repeat="ct in ClassShiftColl  track by $index" value="{{ ct.ClassShiftId }}" ng-selected="ct.ClassShiftId==TimeTable.classShiftId">
                                                        {{ct.Name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group ">
                                                <label>Class</label>
                                                <select class="form-control form-control-sm " ng-change="OnChangeClassTime()" ng-model="TimeTable.classId">
                                                    <option ng-repeat="ct in ClassColl  track by $index" value="{{ ct.ClassId }}" ng-selected="ct.ClassId==TimeTable.classId">
                                                        {{ct.Name}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card p-2">
                                        <div class="card-header with-gradient-bg p-0 pt-2">
                                            <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                                                <li class="nav-item">
                                                    <a ng-class="getFavClassIcon(1)" id="custom-tabs-one-home-tab"
                                                       data-toggle="pill" href="#custom-tabs-one-home" role="tab" ng-click="GetAccodingID(1)"
                                                       aria-controls="custom-tabs-one-home" aria-selected="true" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Sunday</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a ng-class="getFavClassIcon(2)" id="custom-tabs-one-profile-tab" data-toggle="pill"
                                                       href="#custom-tabs-one-profile" role="tab" ng-click="GetAccodingID(2)"
                                                       aria-controls="custom-tabs-one-profile"
                                                       aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Monday</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a ng-class="getFavClassIcon(3)" id="custom-tabs-one-messages-tab" data-toggle="pill"
                                                       href="#custom-tabs-one-messages" role="tab" ng-click="GetAccodingID(3)"
                                                       aria-controls="custom-tabs-one-messages"
                                                       aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Tuesday</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a ng-class="getFavClassIcon(4)" id="custom-tabs-one-settings-tab" data-toggle="pill"
                                                       href="#custom-tabs-one-settings" role="tab" ng-click="GetAccodingID(4)"
                                                       aria-controls="custom-tabs-one-settings"
                                                       aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Wednesday</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a ng-class="getFavClassIcon(5)" id="custom-tabs-one-thrusday-tab" data-toggle="pill"
                                                       href="#custom-tabs-one-thrusday" role="tab" ng-click="GetAccodingID(5)"
                                                       aria-controls="custom-tabs-one-thrusday"
                                                       aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Thursday</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a ng-class="getFavClassIcon(6)" id="custom-tabs-one-friday-tab" data-toggle="pill"
                                                       href="#custom-tabs-one-friday" role="tab" ng-click="GetAccodingID(6)"
                                                       aria-controls="custom-tabs-one-friday"
                                                       aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Friday</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a ng-class="getFavClassIcon(7)" id="custom-tabs-one-sat-tab" data-toggle="pill"
                                                       href="#custom-tabs-one-sat" role="tab" ng-click="GetAccodingID(7)"
                                                       aria-controls="custom-tabs-one-sat"
                                                       aria-selected="false" style="padding-left: 2rem;
                                                      padding-right: 2rem;">Saturday</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="card-body">
                                            <div class="tab-content" id="custom-tabs-one-tabContent">
                                                <div class="tab-pane fade show active" id="custom-tabs-one-home"
                                                     role="tabpanel" aria-labelledby="custom-tabs-one-home-tab">

                                                    <div class="pt-3" ng-repeat="C in ClassShiftListID">
                                                        <label class="btn btn-sm btn-info" style="min-width: 90px;">{{C.Name}}</label>
                                                        <div class="table-scroll-x-y sales-main-table table-scroll ">
                                                            <table id="main-table" class="main-table table table-sm table-bordered bg-white">
                                                                <thead>
                                                                    <tr>
                                                                        <th style="width:80px">Period Name</th>
                                                                        <th style="width:100px">Class/Sec</th>
                                                                        <th style="width:130px">Subject Name</th>
                                                                        <th style="width:180px">Time Duration</th>

                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="F in ClassScheduleCollListID | filter:C.Name|filter:TimeTable.classId">
                                                                        <td>{{F.Period}}</td>
                                                                        <td>{{F.ClassName}}-{{F.SectionName}}</td>
                                                                        <td>{{F.SubjectName}}</td>
                                                                        <td>{{F.StartTime}}-{{F.EndTime}}</td>
                                                                    </tr>

                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <!-- table end -->
                                                    </div>

                                                </div>
                                            </div>
                                        </div>

                                        <!--<div class="table-scroll-x-y sales-main-table table-scroll">
    <table id="main-table" class=" table table-sm table-bordered bg-white">
        <thead>
            <tr>
                <th class="fixed-side" style="width: 110px;">Days/Period</th>
                <th style="width: 200px;">1st(10 am-10:45 am)-45 min</th>
                <th style="width: 200px;">2nd(10:45 am-11:30 am)-45 min</th>
                <th style="width: 200px;">3rd(11:30 am-12:15 pm)-45 min</th>
                <th style="width: 200px;">4th(12:15 pm-1:00 pm)-45 min</th>
                <th style="width: 200px;">Break(1:00 pm-1:30 pm)-30 min</th>
                <th style="width: 200px;">5th(1:30 pm-2:15pm)-45 min</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="CT in ClassShiftColl">
                <th-->
                                        @*rowspan="2"*@
                                        <!--class="pt-4 fixed-side">Sunday</th>
        <td>Science <hr />Hari Prasad</td>
        <td>Maths</td>
        <td>Social</td>
        <td>Science</td>
        <td></td>
        <td>Social</td>

    </tr>-->
                                        @*<tr>
            <td style="left: -110px;">Ramesh Sharma</td>
            <td>Hari Prasad</td>
            <td>Sita Kafle</td>
            <td>Ramesh Sharma</td>
            <td></td>
            <td>Sita Kafle</td>
        </tr>
        <tr>
            <th rowspan="2" class="pt-4 fixed-side">Monday</th>
            <td>Science</td>
            <td>Maths</td>
            <td>Social</td>
            <td>Science</td>
            <td></td>
            <td>Social</td>

        </tr>
        <tr>
            <td style="left: -110px;">Ramesh Sharma</td>
            <td>Hari Prasad</td>
            <td>Sita Kafle</td>
            <td>Ramesh Sharma</td>
            <td></td>
            <td>Sita Kafle</td>
        </tr>
        <tr>
            <th rowspan="2" class="pt-4 fixed-side">Tuesday</th>
            <td>Science</td>
            <td>Maths</td>
            <td>Social</td>
            <td>Science</td>
            <td></td>
            <td>Social</td>
        </tr>
        <tr>
            <td style="left: -110px;">Ramesh Sharma</td>
            <td>Hari Prasad</td>
            <td>Sita Kafle</td>
            <td>Ramesh Sharma</td>
            <td></td>
            <td>Sita Kafle</td>
        </tr>
        <tr>
            <th rowspan="2" class="pt-4 fixed-side">Wednesday</th>
            <td>Science</td>
            <td>Maths</td>
            <td>Social</td>
            <td>Science</td>
            <td></td>
            <td>Social</td>
        </tr>
        <tr>
            <td style="left: -110px;">Ramesh Sharma</td>
            <td>Hari Prasad</td>
            <td>Sita Kafle</td>
            <td>Ramesh Sharma</td>
            <td></td>
            <td>Sita Kafle</td>
        </tr>
        <tr>
            <th rowspan="2" class="pt-4 fixed-side">Thursday</th>
            <td>Science</td>
            <td>Maths</td>
            <td>Social</td>
            <td>Science</td>
            <td></td>
            <td>Social</td>
        </tr>
        <tr>
            <td style="left: -110px;">Ramesh Sharma</td>
            <td>Hari Prasad</td>
            <td>Sita Kafle</td>
            <td>Ramesh Sharma</td>
            <td></td>
            <td>Sita Kafle</td>
        </tr>
        <tr>
            <th rowspan="2" class="pt-4 fixed-side">Friday</th>
            <td>Science</td>
            <td>Maths</td>
            <td>Social</td>
            <td>Science</td>
            <td></td>
            <td>Social</td>
        </tr>
        <tr>
            <td style="left: -110px;">Ramesh Sharma</td>
            <td>Hari Prasad</td>
            <td>Sita Kafle</td>
            <td>Ramesh Sharma</td>
            <td></td>
            <td>Sita Kafle</td>
        </tr>*@
                                        <!--</tbody>
        </table>
    </div>-->
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade main-section" id="profile" role="tabpanel"
                                 aria-labelledby="profile-tab">
                                <div id="exam-schedule">
                                    <form action="">
                                        <div class="row">
                                            <div class="col-sm-3 col-lg-3 col-md-3">
                                                <div class="form-group">
                                                   
                                                    <select class="form-control form-control-sm " ng-change="ngChangeExamShedule()" ng-model="ExamShedule.classId">
                                                        <option>-- Select Class --</option>
                                                        <option ng-repeat="ct in ClassColl" value="{{ ct.ClassId }}" ng-selected="ct.ClassId==ExamShedule.classId">
                                                            {{ct.Name}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-4 col-lg-4 col-md-4">
                                                <div class="form-group">
                                                    <select id="cboSection" class="form-control form-control-sm select2" multiple>
                                                        <option ng-repeat="ct in SectionClassColl  |  filter: { ClassId: ExamShedule.classId }  " ng-value="{{ ct.SectionId }}" ng-selected="ct.SectionId==newExamSetup.SectionId">
                                                            {{ct.SectionName}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-sm-3 col-lg-3 col-md-3">
                                                <div class="form-group">
                                                    <select class="form-control form-control-sm " ng-change="ngChangeExamShedule()" style="width:100%" ng-model="ExamShedule.examTypeId">
                                                        <option>-- Select ExamType --</option>
                                                        <option value="{{cl.ExamTypeId}}" ng-repeat="cl in ExamTypeColl" ng-selected="cl.ExamTypeId==newExamSetup.examTypeId">{{cl.Name}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                    <div class="card p-2 ">
                                        <div class="table-scroll-x-y sales-main-table table-scroll "  style="height: calc(100vh - 10rem) ;overflow-x:auto"> 
                                            <table id="main-table" class="main-table table table-sm table-bordered bg-white  table-head-fixed">
                                                <thead>
                                                    <tr>
                                                        <th style="width: 50px;">S No</th>
                                                        <th style="width: 100px;">Date</th>
                                                        <th style="width: 80px;">Day</th>
                                                        <th style="width: 100px;">Time Duration</th>
                                                        <th style="width: 150px;">Class/Sec </th>
                                                        <th style="width: 150px;">Room No </th>
                                                        <th style="width: 150px;">Subject Name </th>
                                                        <th style="width: 250px;">Remarks </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="ES in ExamScheduleList">
                                                        <td>{{$index+1}}</td>
                                                        <td>{{ES.ExamDate_BS}}</td>
                                                        <td>{{ES.ExamDate_AD | date:'EEEE'}}</td>
                                                        <td>{{ES.StartTime}}-{{ES.EndTime}}</td>
                                                        <td>{{ES.ClassName}}-{{ES.SectionName}}</td>
                                                        <td></td>
                                                        <td>{{ES.SubjectName}}</td>
                                                        <td>{{ES.Remarks}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!-- table end -->
                                        </div>


                                    </div>


                                </div>

                            </div>

                        </div>
                    </div>

                </div>
            </section>
            <!-- /.row -->

        </div>
        <!--/. container-fluid -->
    </section>

    <!-- /.content -->
</div>

<style>
    .tablewrapper {
        overflow: auto;
    }

    table {
        position: relative;
        border-collapse: separate;
        border-spacing: 0;
    }

        table th,
        table td {
            background-color: white;
        }

    .fixed-side {
        background-color: #f5f5f9;
    }

    table th {
        position: sticky;
        z-index: 2;
    }

        table th:nth-child(1) {
            left: 0;
            z-index: 3;
        }


    table tbody tr td:nth-child(1) {
        position: sticky;
        left: 0;
        z-index: 1;
    }
</style>