
@{ ViewBag.Title = "Notice";
    Layout = "~/Views/Shared/_Layout.cshtml"; }

<script src="~/AngularJs/Creation/Notice.js?v=1"></script>

<div class="hold-transition  layout-navbar-fixed" ng-app="myApp" ng-controller="NoticeController" ng-init="LoadData()">
    <div class="content-wrapper">
        <section class="content">
            <div class="container-fluid">
                <section class="iframe-content-starts-here">
                    <div class="row">
                        <div class="col-md-3">
                            <!-- Add Notice Card starts -->
                            <div class="card">
                                <div class="card-header">
                                    <h3 class="card-title">Add Notice</h3>
                                </div>
                                <div class="card-body">


                                    <div class="form-group">
                                        <label for="">Title</label>
                                        <input type="text"
                                               class="form-control form-control-sm" ng-model="newNotice.Title" />
                                    </div>
                                    <div class="form-group">
                                        <label>Details</label>
                                        <textarea class="form-control form-control-sm" ng-model="newNotice.Details"
                                                  rows="2"
                                                  placeholder=""></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label>Class</label>
                                        <select class="form-control form-control-sm select2" id="cboClassId" ng-model="V">
                                            <option ng-repeat="ct in ClassColl  track by $index" value="{{ ct.ClassId }}" ng-selected="ct.ClassId==V">
                                                {{ct.Name}}
                                            </option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label>Section</label>
                                        <select class="form-control form-control-sm select2" id="cboSectionId" ng-model="SectionId" multiple>
                                            <option ng-repeat="ct in SectionList  " value="{{ ct.SectionId }}" ng-selected="ct.SectionId==SectionId">
                                                {{ct.ClassName}}-{{ct.SectionName}}
                                            </option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label>Attach File</label>
                                        <div class="form-group">
                                            <input type="file"
                                                   class="form-control-file border p-0 bg-white"
                                                   id="exampleFormControlFile1" />
                                        </div>
                                    </div>

                                    <div class="time-label">
                                        <span class="d-block border-0 p-3 text-center">
                                            <button type="button" class="btn btn-sm btn-default mb-2" style="min-width: 90px;" ng-click="ClearNotice()">Reset</button>
                                            <button type="button" class="btn btn-sm btn-success mb-2" style="min-width: 90px;" ng-click="SaveUpdateNotice()">{{newNotice.Mode}}</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <!-- Add Notice Card Ends -->
                            <!-- Upcoming Notice Card Starts -->
                            <div class="card" style="margin-top:10px">
                                <div class="card-header">
                                    <h3 class="card-title">Upcoming Events</h3>
                                </div>
                                <div class="card-body"
                                     style="height: 350px; overflow-y: auto">
                                    <div class="notice" ng-repeat="eh in EventHolidayList">
                                        <h6>
                                            <a href="#" class="text-secondary">{{eh.Name}}</a>
                                        </h6>
                                        <label>
                                            {{eh.FromDate_BS}} ||
                                            <span class="text-info">{{eh.Remaining}}</span>
                                        </label>
                                    </div>
                                    <hr />                           
                                </div>
                            </div>
                            <!-- Upcoming Notice Card Ends -->
                        </div>
                        <!-- Tab Area Starts -->

                        <div class="col-md-9">
                            <div id="notification-list">
                                <div class="tab-pane"
                                     id="pills-four"
                                     role="tabpanel"
                                     aria-labelledby="pills-four-tab">
                                    <div class="card card-primary card-tabs">
                                        <div class="card-header with-gradient-bg p-0 pt-2">
                                            <ul class="nav nav-tabs"
                                                id="custom-tabs-one-tab"
                                                role="tablist">
                                                <li class="nav-item">
                                                    <a class="nav-link active"
                                                       id="custom-tabs-one-home-tab"
                                                       data-toggle="pill"
                                                       href="#custom-tabs-one-home"
                                                       role="tab"
                                                       aria-controls="custom-tabs-one-home"
                                                       aria-selected="true">Notification</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link"
                                                       id="custom-tabs-one-profile-tab"
                                                       data-toggle="pill"
                                                       href="#custom-tabs-one-profile"
                                                       role="tab"
                                                       aria-controls="custom-tabs-one-profile"
                                                       aria-selected="false">Sent Notification</a>
                                                </li>

                                            </ul>
                                        </div>
                                        <div class="card-body">
                                            <div class="tab-content"
                                                 id="custom-tabs-one-tabContent">
                                                <!-- Notofication Tab Starts -->
                                                <div class="tab-pane fade show active p-2 notice-card"
                                                     id="custom-tabs-one-home"
                                                     role="tabpanel"
                                                     aria-labelledby="custom-tabs-one-home-tab">
                                                    <div class="card-body p-0" style="border: 1px solid #d4dfda;">
                                                        <table class="table table-striped">
                                                            <thead>
                                                                <tr>
                                                                    <th style="background-color: #e9f2ee; width: 120px">Date <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                    <th style="background-color: #e9f2ee; width: 200px">From <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                    <th style="background-color: #e9f2ee; width: 350px">Message <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                    <th style="background-color: #e9f2ee; width: 100px">Attachment <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="nt in NoticeList |  filter: { SendReceived: searchData.Received }">
                                                                    <td>{{nt.LogDate_BS}}<br>{{nt.AtTime}}</td>
                                                                    <td>
                                                                        <div class="row">
                                                                            <div class="col-md-4">
                                                                                <img class="img-circle img-fluid" style="height: 50px;" ng-src="{{nt.SendByPhotoPath}}">
                                                                            </div>
                                                                            <div class="col-md-8">
                                                                                <label><b>{{nt.SendBy}}</b></label><br>
                                                                                <label><i>{{nt.ClassSection}}</i></label>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td id="notification">
                                                                        <label><b>{{nt.Heading}} - {{nt.Subject}}</b></label><br>
                                                                        <label class="detail-msg">{{nt.Content}} </label>
                                                                    </td>
                                                                    <td class="text-center"><img ng-src="{{nt.ContentPath}}"  ng-click="DocumentAtt_Toggle(nt.ContentPath)"  style="height: 70px; border: 1px solid #ccc;"></td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <!--Notification Tab Ends -->
                                                <!-- Sent Notification Tab Starts -->
                                                <div class="tab-pane fade p-2 notice-card"
                                                     id="custom-tabs-one-profile"
                                                     role="tabpanel"
                                                     aria-labelledby="custom-tabs-one-profile-tab">
                                                    <div class="card-body p-0" style="border: 1px solid #d4dfda;">
                                                        <table class="table table-striped">
                                                            <thead>
                                                                <tr>
                                                                    <th style="background-color: #e9f2ee; width: 120px">Date <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                    <th style="background-color: #e9f2ee; width: 180px">From <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                    <th style="background-color: #e9f2ee; width: 350px">Message <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                    <th style="background-color: #e9f2ee; width: 100px">Attachment <i class="fas fa-sort-alpha-down ml-4"></i></th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="nt in NoticeList |  filter: { SendReceived: searchData.Send }">
                                                                    <td>{{nt.LogDate_BS}}<br>{{nt.AtTime}}</td>
                                                                    <td>
                                                                        <div class="row">
                                                                            <div class="col-md-4">
                                                                                <img class="img-circle img-fluid" style="height: 50px;" ng-src="{{nt.SendByPhotoPath}}">
                                                                            </div>
                                                                            <div class="col-md-8">
                                                                                <label><b>{{nt.SendBy}}</b></label><br>
                                                                                <label><i>{{nt.ClassSection}}</i></label>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                    <td id="notification">
                                                                        <label><b>{{nt.Heading}} - {{nt.Subject}}</b></label><br>
                                                                        <label class="detail-msg">{{nt.Content}} </label>
                                                                    </td>
                                                                    <td class="text-center"><img ng-src="{{nt.ContentPath}}" ng-click="DocumentAtt_Toggle(nt.ContentPath)" style="height: 70px; border: 1px solid #ccc;"></td>
                                                                </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <!-- Sent Notification Tab Ends -->

                                            </div>
                                        </div>
                                        <!-- /.card -->
                                    </div>
                                </div>
                            </div>

                            <!-- Notification detail Starts -->
                            <div id="notification-details">
                                <div class="card card-default" style="border: 1px Solid #ccc;">
                                    <div class="card-header" style="background-color: #e9f2ee;">
                                        <h3 class="card-title" style="font-weight: bold">Assignment Title: Multiplication Learning</h3><br>
                                        <p>Assignment Type: Reading</p>
                                    </div>
                                    <div class="card-body">
                                        <div class="p-2" style="background-color: #f8fcf7;border: 1px solid #ccc;">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="d-flex">
                                                        <img src="~/teacherloginFiles/dynamic/images/aryan-shrestha.png" alt="" class="rounded-circle" style="width: 50px;" />
                                                        <span style="font-weight: bold" class="ml-4">Ram Babu Prasad <br> <small>Mathematics Teacher</small> </span>

                                                    </div>

                                                </div>
                                                <div class="col-md-6 mt-2">
                                                    <span class="float-right" style="font-weight: 500">01 April 2021 | 10:00pm</span>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="card homework-description p-2">
                                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam sit amet scelerisque purus. Suspendisse bibendum tellus massa,
                                            viverra eleifend justo sodales a. Cras massa dui, rhoncus nec convallis id, maximus nec enim. Nam iaculis neque at dictum posuere.
                                            Sed a lacus justo. Mauris id nunc feugiat, volutpat tellus sed, blandit sem. Suspendisse potenti. Quisque eu augue vitae metus
                                            tristique pretium. Maecenas mollis nec dui eu hendrerit. Proin aliquet auctor elit semper mollis.

                                        </div>
                                        <div class="teacher-file-attach d-flex bg-white p-2" style="margin-top: -22px;">
                                            <span style="font-size: 16px;"><i class="fas fa-folder-open text-success"></i> &nbsp; 1 File(s) Attachment </span>

                                            <span style="font-size: 16px;" class="ml-auto">
                                                <a href="~/teacherloginFiles/dynamic/images/attach-img.png" download> <i class="fas fa-download text-success" title="Download All"></i></a>
                                            </span>

                                        </div>

                                        <!-- teacher file preview -->
                                        <div class="container">
                                            <div class="row">

                                                <div class="col-md-4">
                                                    <a href="#" data-target="#modalIMG-file" data-toggle="modal" class="color-gray-darker c6 td-hover-none">
                                                        <div class="ba-0 ds-1">
                                                            <img alt="Card image cap" class="img-fluid" src="~/teacherloginFiles/dynamic/images/attach-img.png" style="width:25%;" />

                                                        </div>
                                                    </a>
                                                </div>

                                            </div>

                                        </div>



                                        <!-- teacher file preview end -->

                                    </div>
                                    <div class="time-label">
                                        <span class="d-block border-0 p-3 text-center">
                                            <button type="button" class="btn btn-sm btn-info" id="back-to-list" style="min-width: 90px;">Back to List</button>

                                        </span>
                                    </div>
                                </div>
                            </div>
                            <!-- Notification Detail Ends -->                          
                        </div>
                        <!-- Tab Area Ends -->
                    </div>
                </section>
                <!-- /.row -->
            </div>
            <!--/. container-fluid -->
        </section>
        <!-- /.content -->
    </div>
    <div aria-hidden="true" aria-labelledby="myModalLabel" class="modal fade" id="modalIMG" role="dialog" tabindex="-1" style="margin-top:30px;">
        <div class="modal-dialog modal-xl" role="document">
            <div class="modal-content">
                <div class="modal-body mb-0 p-0">
                    <iframe id="DocumentAtt_Iframe" style='width: 100%;height:calc(100vh - 200px);background-color: white;visibility: visible;' frameborder='0' scrolling='yes'></iframe>
                </div>
                <div class="modal-footer">
                    <div><a href="{{downloadFilePath}}" target="_blank" download>Download</a></div>
                    <button class="btn btn-success btn-rounded btn-sm ml-4 text-center" data-dismiss="modal" type="button" style="min-width: 90px;">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>
