
@{
    ViewBag.Title = "ExamAttendance";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/AngularJs/Creation/ExamAttendance.js"></script>
<div class="hold-transition  layout-navbar-fixed" ng-app="myApp" ng-controller="ExamAttendanceController" ng-init="LoadData()">
    <div class="content-wrapper">
        <!-- Main content -->
        <section class="content">
            <div class="container-fluid">
                <section class="iframe-content-starts-here">
                    <div class="tab-content" id="pills-tabContent">
                        <div class="tab-pane fade show active" id="pills-second" role="tabpanel"
                             aria-labelledby="pills-second-tab">
                            <!-- if-page-have-nav-tabs -->
                            <header class="if-page-have-nav-tabs">
                                <div class="row upper-tab">
                                    <div class="col-md-12">
                                        <!-- <h3 class="menu-title">Class Setup</h3> -->
                                        <ul class="nav nav-tabs cstm-nav-tabs-border-bottom-active" id="myTab"
                                            role="tablist">
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link active" id="pills-four-tab" data-toggle="tab"
                                                   href="#pills-four" role="tab" aria-controls="pills-four"
                                                   aria-selected="true">Exam Attendance</a>
                                            </li>
                                            <li class="nav-item" role="presentation">
                                                <a class="nav-link" id="profile-tab" data-toggle="tab"
                                                   href="#profile" role="tab" aria-controls="profile"
                                                   aria-selected="false">Bulk Attendance</a>
                                            </li>
                                        </ul>
                                    </div>

                                </div>
                            </header>
                            <!-- end if-page-have-nav-tabs -->
                            <div class="tab-content" id="myTabContent">
                                <!-- Exam Attendance Tab Starts -->
                                <div class="tab-pane fade show main-section active" id="pills-four" role="tabpanel" aria-labelledby="pills-four-tab">
                                    <div class="row">
                                        <div class="col-md-9">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label for="Class">Class</label>
                                                    <div class="form-group">
                                                        <select class="form-control form-control-sm select2" ng-model="newExamAttendance.ClassId">
                                                            <option ng-value="0">**Select Class**</option>
                                                            <option ng-value="cl.id" ng-repeat="cl in ClassList" ng-selected="cl.id==newExamAttendance.ClassId">{{cl.text}}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="subject">Subject</label>
                                                    <div class="form-group">
                                                        <select class="form-control form-control-sm select2" ng-model="newExamAttendance.SubjectId">
                                                            <option>Science</option>
                                                            <option>Maths</option>
                                                            <option>Social</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="col-md-3">
                                                    <label for="paper">Paper Type</label>
                                                    <div class="form-group">
                                                        <select class="form-control form-control-sm select2" ng-model="newExamAttendance.PaperTypeId">
                                                            <option>Type 1</option>
                                                            <option>Type 2</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="Exam">Exam</label>
                                                    <div class="form-group">
                                                        <select class="form-control form-control-sm select2" ng-model="newExamAttendance.ExamId">
                                                            <option>First Terminal</option>
                                                            <option>Class Test</option>
                                                            <option>Annual Exam</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="card mb-1 pb-0">
                                                <div class="card-header">
                                                    <h3 class="card-title">Information</h3>
                                                </div>
                                                <div class="card-body">
                                                    <label>Present :30</label>
                                                    <label class="ml-3">Absent :5</label>
                                                    <label class="ml-3">Total :35</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card p-2">
                                        <header class="row mb-3">
                                            <div class="col-md-7">
                                                <div class="clearfix">
                                                    <form class="form-inline">
                                                        <div class="input-group input-group-sm mr-sm-2">
                                                            <div class="input-group-prepend">
                                                                <span class="input-group-text cstm">Show</span>
                                                            </div>
                                                            <!-- <input type="text" class="form-control border-left-0" placeholder=""> -->
                                                            <select class="form-control border-left-0 border-right-0 pr-0" ng-model="perPage.ExamAttendance">
                                                                <option ng-value="pp.value" ng-repeat="pp in perPageColl" ng-selected="pp.value==perPage.ExamAttendance">{{pp.text}}</option>
                                                            </select>
                                                            <div class="input-group-append">
                                                                <span class="input-group-text bg-white"><small>entries</small></span>
                                                            </div>
                                                        </div>
                                                        <div class="input-group input-group-sm table-search-filed">
                                                            <input class="form-control form-control-navbar"
                                                                   type="search" placeholder="Search"
                                                                   aria-label="Search" ng-model="searchData.ExamAttendance">
                                                            <div class="input-group-append">
                                                                <button class="btn btn-default border-left-0"
                                                                        type="submit">
                                                                    <i class="fas fa-search"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            <!-- end col-md-8 -->
                                            <div class="col-md-5 text-right">
                                                <div class="dropdown no-caret d-inline-block">
                                                    <button type="button" class="btn btn-secondary btn-light btn-sm dropdown-toggle" data-toggle="dropdown">
                                                        <i class="fas fa-columns"></i>
                                                    </button>
                                                    <ul class="dropdown-menu cstm-column-visibility dropdown-menu-right">
                                                        <span class="dropdown-item">Column Visibility:</span>
                                                        <li>
                                                            <a href="#" class="small dropdown-item" data-value="option1" tabIndex="-1">
                                                                <label class="checkbox-wrap">
                                                                    Name
                                                                    <input type="checkbox" checked>
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" class="small dropdown-item" data-value="option2" tabIndex="-1">
                                                                <label class="checkbox-wrap">
                                                                    Position
                                                                    <input type="checkbox" checked>
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" class="small dropdown-item" data-value="option3" tabIndex="-1">
                                                                <label class="checkbox-wrap">
                                                                    Office
                                                                    <input type="checkbox" checked>
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" class="small dropdown-item" data-value="option3" tabIndex="-1">
                                                                <label class="checkbox-wrap">
                                                                    Age
                                                                    <input type="checkbox" checked>
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <a href="#" class="small dropdown-item" data-value="option3" tabIndex="-1">
                                                                <label class="checkbox-wrap">
                                                                    Salary
                                                                    <input type="checkbox" checked>
                                                                    <span class="checkmark"></span>
                                                                </label>
                                                            </a>
                                                        </li>
                                                        <li class="btns-wrap">
                                                            <a href="#" class="btn btn-link btn-sm">Restore</a>
                                                            <a href="#" class="btn btn-secondary btn-sm">Appy</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <div class="dropdown dnld-file"
                                                     data-toggle="tooltip"
                                                     data-placement="top"
                                                     title="Download File">
                                                    <button class="btn btn-secondary btn-light btn-sm dropdown-toggle"
                                                            type="button"
                                                            id="dropdownMenuButton"
                                                            data-toggle="dropdown"
                                                            aria-haspopup="true"
                                                            aria-expanded="false">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <div class="dropdown-menu dropdown-menu-right"
                                                         aria-labelledby="dropdownMenuButton">
                                                        <span class="dropdown-item">Choose an option:</span>
                                                        <a class="dropdown-item" href="#">
                                                            <img src="~/teacherloginFiles/dynamic/images/flaticons/excel.png"
                                                                 class="img-fluid exports-icon"
                                                                 alt="Excel image" />
                                                            Excel
                                                        </a>
                                                        <a class="dropdown-item" href="#">
                                                            <img src="~/teacherloginFiles/dynamic/images/flaticons/csv.png"
                                                                 class="img-fluid exports-icon"
                                                                 alt="Excel image" />
                                                            CSV
                                                        </a>
                                                        <a class="dropdown-item" href="#">
                                                            <img src="~/teacherloginFiles/dynamic/images/flaticons/pdf.png"
                                                                 class="img-fluid exports-icon"
                                                                 alt="Excel image" />
                                                            PDF
                                                        </a>
                                                        <a class="dropdown-item" href="#">
                                                            <img src="~/teacherloginFiles/dynamic/images/flaticons/word.png"
                                                                 class="img-fluid exports-icon"
                                                                 alt="Excel image" />
                                                            Word
                                                        </a>
                                                        <a class="dropdown-item" href="#">
                                                            <img src="~/teacherloginFiles/dynamic/images/flaticons/gmail.png"
                                                                 class="img-fluid exports-icon"
                                                                 alt="Excel image" />
                                                            Mail
                                                        </a>
                                                    </div>
                                                </div>
                                                <a href="#"
                                                   class="btn btn-secondary btn-light btn-sm"
                                                   data-toggle="tooltip"
                                                   data-placement="bottom"
                                                   title="Print">
                                                    <i class="fas fa-print"></i>
                                                </a>

                                            </div>
                                        </header>
                                        <div class="table-scroll-x-y sales-main-table table-scroll">
                                            <table id="main-table"
                                                   class="main-table table table-sm table-bordered bg-white">
                                                <thead>
                                                    <tr>
                                                        <th style="width: 250px">Student Image</th>
                                                        <th style="width: 150px">Roll No.</th>
                                                        <th style="width: 150px">Regd. No.</th>
                                                        <th style="width: 150px">Symbol No.</th>
                                                        <th style="width: 200px">Name</th>
                                                        <th style="width: 150px">Present</th>
                                                        <th style="width: 150px">Absent</th>
                                                        <th style="width: 250px">Remarks</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="cl in ExamAttendanceList | filter:searchData.ExamAttendance" >
                                                        <td>{{cl.StudentImage}}</td>
                                                        <td>{{cl.RollNo}}</td>
                                                        <td>{{cl.RegdNo}}</td>
                                                        <td>{{cl.SymbolNo}}</td>
                                                        <td>{{cl.Name}}</td>
                                                        <td>{{cl.Present}}</td>
                                                        <td>{{cl.Absent}}</td>
                                                        <td>{{cl.Remarks}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <!-- table end -->
                                        </div>

                                        <div class="time-label">
                                            <span class="d-block border-0 p-3 text-center">
                                                <button type="button" class="btn btn-sm btn-default" style="min-width: 90px;" ng-click="ClearExamAttendance()">Reset</button>
                                                <button type="button" class="btn btn-sm btn-success" style="min-width: 90px;" ng-click="SaveUpdateExamAttendance()">{{newExamAttendance.Mode}}</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Exam Attendance Tab Closes -->
                                <!-- Bulk Attendance Tab Starts -->
                                <div class="tab-pane fade main-section" id="profile" role="tabpanel"
                                     aria-labelledby="profile-tab">
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Class</label>
                                                <select class="form-control form-control-sm select2" id="cboClassId" ng-model="newBulkAttendance.SelectClassSection" ng-change="GetStudentForSubjectBA()">
                                                    <option ng-repeat="ct in SectionClassColl  track by $index" ng-value="{{ct}}">
                                                        {{ct.text}}
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Exam</label>
                                                <select class="form-control form-control-sm " style="width:100%" ng-model="newBulkAttendance.ExamTypeId" ng-change="GetStudentForSubjectBA()">
                                                    <option ng-value="0">-- Select ExamType --</option>
                                                    <option ng-value="{{cl.ExamTypeId}}" ng-repeat="cl in ExamTypeColl">{{cl.Name}}</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <span>Working Days</span>
                                                <input type="number" class="form-control form-control-sm" ng-model="newBulkAttendance.WorkingDays" ng-change="ChangeWorkingDays()">
                                            </div>
                                        </div>
                                        <div class="col-md-3 mt-4">
                                            <label>Total Students :</label>
                                        </div>
                                    </div>
                                    <div class="card p-2">
                                    
                                        <div class="table-scroll-x-y sales-main-table table-scroll">
                                            <table id="main-table"
                                                   class="main-table table table-sm table-bordered bg-white">
                                                <thead>
                                                    <tr>
                                                        <th style="width: 100px" ng-click="sort('RollNo')">Roll.No.</th>
                                                        <th style="width: 120px" ng-click="sort('RegdNo')">Regd. No.</th>
                                                        <th style="width: 120px" ng-click="sort('SymbolNo')">Symbol No.</th>
                                                        <th style="width: 200px" ng-click="sort('Name')">Name</th>
                                                        <th style="width: 100px" ng-click="sort('PresentDays')">Present</th>
                                                        <th style="width: 100px" ng-click="sort('AbsentDays')">Absent</th>
                                                        <th style="width: 250px" ng-click="sort('Remarks')">Remarks</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="cl in newBulkAttendance.StudentColl |orderBy:sortKey:reverse">
                                                        <td>{{cl.RollNo}}</td>
                                                        <td>{{cl.RegdNo}}</td>
                                                        <td>{{cl.SymbolNo}}</td>
                                                        <td>{{cl.Name}}</td>
                                                        <td>
                                                            <input type="number" class="form-control form-control-sm serial" placeholder="" ng-model="cl.PresentDays" ng-change="ChangePADays(1,cl)">
                                                        </td>
                                                        <td>
                                                            <input type="number" class="form-control form-control-sm serial" placeholder="" ng-model="cl.AbsentDays" ng-change="ChangePADays(2,cl)">
                                                        </td>
                                                        <td>
                                                            <textarea class="form-control form-control-sm serial" rows="1" ng-model="cl.Remarks"></textarea>
                                                        </td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                            <!-- table end -->
                                        </div>

                                        <div class="time-label">
                                            <span class="d-block border-0 p-3 text-center">
                                                <button type="button" class="btn btn-sm btn-default" style="min-width: 90px;" ng-click="ClearExamBA()">Reset</button>                                               
                                                <button type="button" class="btn btn-sm btn-success" style="min-width: 90px;" ng-click="SaveExamBA()">Save</button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <!-- Bulk Attendance Tab Closes -->
                            </div>
                        </div>

                    </div>
                </section>
                <!-- /.row -->

            </div>
            <!--/. container-fluid -->
        </section>
        <!-- /.content -->
    </div>
</div>