function isNumber(n){n=n?n:window.event;var t=n.which?n.which:n.keyCode;return t>31&&(t<48||t>57)?!1:!0}function FormUpdated(){toastr.success("Your data has been updated")}if(function(n,t){function gt(n){var t=n.length,r=i.type(n);return i.isWindow(n)?!1:1===n.nodeType&&t?!0:"array"===r||"function"!==r&&(0===t||"number"==typeof t&&t>0&&t-1 in n)}function te(n){var t=ni[n]={};return i.each(n.match(s)||[],function(n,i){t[i]=!0}),t}function ur(n,r,u,f){if(i.acceptData(n)){var h,o,c=i.expando,l=n.nodeType,s=l?i.cache:n,e=l?n[c]:n[c]&&c;if(e&&s[e]&&(f||s[e].data)||u!==t||"string"!=typeof r)return e||(e=l?n[c]=b.pop()||i.guid++:c),s[e]||(s[e]=l?{}:{toJSON:i.noop}),("object"==typeof r||"function"==typeof r)&&(f?s[e]=i.extend(s[e],r):s[e].data=i.extend(s[e].data,r)),o=s[e],f||(o.data||(o.data={}),o=o.data),u!==t&&(o[i.camelCase(r)]=u),"string"==typeof r?(h=o[r],null==h&&(h=o[i.camelCase(r)])):h=o,h}}function fr(n,t,r){if(i.acceptData(n)){var e,o,s=n.nodeType,u=s?i.cache:n,f=s?n[i.expando]:i.expando;if(u[f]){if(t&&(e=r?u[f]:u[f].data)){for(i.isArray(t)?t=t.concat(i.map(t,i.camelCase)):(t in e)?t=[t]:(t=i.camelCase(t),t=(t in e)?[t]:t.split(" ")),o=t.length;o--;)delete e[t[o]];if(r?!ti(e):!i.isEmptyObject(e))return}(r||(delete u[f].data,ti(u[f])))&&(s?i.cleanData([n],!0):i.support.deleteExpando||u!=u.window?delete u[f]:u[f]=null)}}}function er(n,r,u){if(u===t&&1===n.nodeType){var f="data-"+r.replace(rr,"-$1").toLowerCase();if(u=n.getAttribute(f),"string"==typeof u){try{u="true"===u?!0:"false"===u?!1:"null"===u?null:+u+""===u?+u:ir.test(u)?i.parseJSON(u):u}catch(e){}i.data(n,r,u)}else u=t}return u}function ti(n){var t;for(t in n)if(("data"!==t||!i.isEmptyObject(n[t]))&&"toJSON"!==t)return!1;return!0}function ct(){return!0}function g(){return!1}function cr(){try{return r.activeElement}catch(n){}}function ar(n,t){do n=n[t];while(n&&1!==n.nodeType);return n}function fi(n,t,r){if(i.isFunction(t))return i.grep(n,function(n,i){return!!t.call(n,i,n)!==r});if(t.nodeType)return i.grep(n,function(n){return n===t!==r});if("string"==typeof t){if(oe.test(t))return i.filter(t,n,r);t=i.filter(t,n)}return i.grep(n,function(n){return i.inArray(n,t)>=0!==r})}function vr(n){var i=yr.split("|"),t=n.createDocumentFragment();if(t.createElement)while(i.length)t.createElement(i.pop());return t}function gr(n,t){return i.nodeName(n,"table")&&i.nodeName(1===t.nodeType?t:t.firstChild,"tr")?n.getElementsByTagName("tbody")[0]||n.appendChild(n.ownerDocument.createElement("tbody")):n}function nu(n){return n.type=(null!==i.find.attr(n,"type"))+"/"+n.type,n}function tu(n){var t=ye.exec(n.type);return t?n.type=t[1]:n.removeAttribute("type"),n}function hi(n,t){for(var u,r=0;null!=(u=n[r]);r++)i._data(u,"globalEval",!t||i._data(t[r],"globalEval"))}function iu(n,t){if(1===t.nodeType&&i.hasData(n)){var u,f,o,s=i._data(n),r=i._data(t,s),e=s.events;if(e){delete r.handle;r.events={};for(u in e)for(f=0,o=e[u].length;o>f;f++)i.event.add(t,u,e[u][f])}r.data&&(r.data=i.extend({},r.data))}}function be(n,t){var r,f,u;if(1===t.nodeType){if(r=t.nodeName.toLowerCase(),!i.support.noCloneEvent&&t[i.expando]){u=i._data(t);for(f in u.events)i.removeEvent(t,f,u.handle);t.removeAttribute(i.expando)}"script"===r&&t.text!==n.text?(nu(t).text=n.text,tu(t)):"object"===r?(t.parentNode&&(t.outerHTML=n.outerHTML),i.support.html5Clone&&n.innerHTML&&!i.trim(t.innerHTML)&&(t.innerHTML=n.innerHTML)):"input"===r&&oi.test(n.type)?(t.defaultChecked=t.checked=n.checked,t.value!==n.value&&(t.value=n.value)):"option"===r?t.defaultSelected=t.selected=n.defaultSelected:("input"===r||"textarea"===r)&&(t.defaultValue=n.defaultValue)}}function u(n,r){var s,e,h=0,f=typeof n.getElementsByTagName!==o?n.getElementsByTagName(r||"*"):typeof n.querySelectorAll!==o?n.querySelectorAll(r||"*"):t;if(!f)for(f=[],s=n.childNodes||n;null!=(e=s[h]);h++)!r||i.nodeName(e,r)?f.push(e):i.merge(f,u(e,r));return r===t||r&&i.nodeName(n,r)?i.merge([n],f):f}function ke(n){oi.test(n.type)&&(n.defaultChecked=n.checked)}function ou(n,t){if(t in n)return t;for(var r=t.charAt(0).toUpperCase()+t.slice(1),u=t,i=eu.length;i--;)if(t=eu[i]+r,t in n)return t;return u}function ut(n,t){return n=t||n,"none"===i.css(n,"display")||!i.contains(n.ownerDocument,n)}function su(n,t){for(var f,r,o,e=[],u=0,s=n.length;s>u;u++)r=n[u],r.style&&(e[u]=i._data(r,"olddisplay"),f=r.style.display,t?(e[u]||"none"!==f||(r.style.display=""),""===r.style.display&&ut(r)&&(e[u]=i._data(r,"olddisplay",au(r.nodeName)))):e[u]||(o=ut(r),(f&&"none"!==f||!o)&&i._data(r,"olddisplay",o?f:i.css(r,"display"))));for(u=0;s>u;u++)r=n[u],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?e[u]||"":"none"));return n}function hu(n,t,i){var r=to.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function cu(n,t,r,u,f){for(var e=r===(u?"border":"content")?4:"width"===t?1:0,o=0;4>e;e+=2)"margin"===r&&(o+=i.css(n,r+p[e],!0,f)),u?("content"===r&&(o-=i.css(n,"padding"+p[e],!0,f)),"margin"!==r&&(o-=i.css(n,"border"+p[e]+"Width",!0,f))):(o+=i.css(n,"padding"+p[e],!0,f),"padding"!==r&&(o+=i.css(n,"border"+p[e]+"Width",!0,f)));return o}function lu(n,t,r){var e=!0,u="width"===t?n.offsetWidth:n.offsetHeight,f=v(n),o=i.support.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,f);if(0>=u||null==u){if(u=y(n,t,f),(0>u||null==u)&&(u=n.style[t]),lt.test(u))return u;e=o&&(i.support.boxSizingReliable||u===n.style[t]);u=parseFloat(u)||0}return u+cu(n,t,r||(o?"border":"content"),e,f)+"px"}function au(n){var u=r,t=uu[n];return t||(t=vu(n,u),"none"!==t&&t||(rt=(rt||i("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(u.documentElement),u=(rt[0].contentWindow||rt[0].contentDocument).document,u.write("<!doctype html><html><body>"),u.close(),t=vu(n,u),rt.detach()),uu[n]=t),t}function vu(n,t){var r=i(t.createElement(n)).appendTo(t.body),u=i.css(r[0],"display");return r.remove(),u}function li(n,t,r,u){var f;if(i.isArray(t))i.each(t,function(t,i){r||fo.test(n)?u(n,i):li(n+"["+("object"==typeof i?t:"")+"]",i,r,u)});else if(r||"object"!==i.type(t))u(n,t);else for(f in t)li(n+"["+f+"]",t[f],r,u)}function gu(n){return function(t,r){"string"!=typeof t&&(r=t,t="*");var u,f=0,e=t.toLowerCase().match(s)||[];if(i.isFunction(r))while(u=e[f++])"+"===u[0]?(u=u.slice(1)||"*",(n[u]=n[u]||[]).unshift(r)):(n[u]=n[u]||[]).push(r)}}function nf(n,r,u,f){function o(h){var c;return e[h]=!0,i.each(n[h]||[],function(n,i){var h=i(r,u,f);return"string"!=typeof h||s||e[h]?s?!(c=h):t:(r.dataTypes.unshift(h),o(h),!1)}),c}var e={},s=n===yi;return o(r.dataTypes[0])||!e["*"]&&o("*")}function pi(n,r){var f,u,e=i.ajaxSettings.flatOptions||{};for(u in r)r[u]!==t&&((e[u]?n:f||(f={}))[u]=r[u]);return f&&i.extend(!0,n,f),n}function ao(n,i,r){for(var s,o,f,e,h=n.contents,u=n.dataTypes;"*"===u[0];)u.shift(),o===t&&(o=n.mimeType||i.getResponseHeader("Content-Type"));if(o)for(e in h)if(h[e]&&h[e].test(o)){u.unshift(e);break}if(u[0]in r)f=u[0];else{for(e in r){if(!u[0]||n.converters[e+" "+u[0]]){f=e;break}s||(s=e)}f=f||s}return f?(f!==u[0]&&u.unshift(f),r[f]):t}function vo(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift())if("*"===u)u=e;else if("*"!==e&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]])){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}function rf(){try{return new n.XMLHttpRequest}catch(t){}}function yo(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function ff(){return setTimeout(function(){it=t}),it=i.now()}function ef(n,t,i){for(var u,f=(ft[t]||[]).concat(ft["*"]),r=0,e=f.length;e>r;r++)if(u=f[r].call(i,t,n))return u}function of(n,t,r){var h,e,o=0,l=pt.length,f=i.Deferred().always(function(){delete c.elem}),c=function(){if(e)return!1;for(var s=it||ff(),t=Math.max(0,u.startTime+u.duration-s),h=t/u.duration||0,i=1-h,r=0,o=u.tweens.length;o>r;r++)u.tweens[r].run(i);return f.notifyWith(n,[u,i,t]),1>i&&o?t:(f.resolveWith(n,[u]),!1)},u=f.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{}},r),originalProperties:t,originalOptions:r,startTime:it||ff(),duration:r.duration,tweens:[],createTween:function(t,r){var f=i.Tween(n,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(f),f},stop:function(t){var i=0,r=t?u.tweens.length:0;if(e)return this;for(e=!0;r>i;i++)u.tweens[i].run(1);return t?f.resolveWith(n,[u,t]):f.rejectWith(n,[u,t]),this}}),s=u.props;for(bo(s,u.opts.specialEasing);l>o;o++)if(h=pt[o].call(u,n,s,u.opts))return h;return i.map(s,ef,u),i.isFunction(u.opts.start)&&u.opts.start.call(n,u),i.fx.timer(i.extend(c,{elem:n,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function bo(n,t){var r,f,e,u,o;for(r in n)if(f=i.camelCase(r),e=t[f],u=n[r],i.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function ko(n,t,r){var u,a,v,c,e,y,s=this,l={},o=n.style,h=n.nodeType&&ut(n),f=i._data(n,"fxshow");r.queue||(e=i._queueHooks(n,"fx"),null==e.unqueued&&(e.unqueued=0,y=e.empty.fire,e.empty.fire=function(){e.unqueued||y()}),e.unqueued++,s.always(function(){s.always(function(){e.unqueued--;i.queue(n,"fx").length||e.empty.fire()})}));1===n.nodeType&&("height"in t||"width"in t)&&(r.overflow=[o.overflow,o.overflowX,o.overflowY],"inline"===i.css(n,"display")&&"none"===i.css(n,"float")&&(i.support.inlineBlockNeedsLayout&&"inline"!==au(n.nodeName)?o.zoom=1:o.display="inline-block"));r.overflow&&(o.overflow="hidden",i.support.shrinkWrapBlocks||s.always(function(){o.overflow=r.overflow[0];o.overflowX=r.overflow[1];o.overflowY=r.overflow[2]}));for(u in t)if(a=t[u],po.exec(a)){if(delete t[u],v=v||"toggle"===a,a===(h?"hide":"show"))continue;l[u]=f&&f[u]||i.style(n,u)}if(!i.isEmptyObject(l)){f?"hidden"in f&&(h=f.hidden):f=i._data(n,"fxshow",{});v&&(f.hidden=!h);h?i(n).show():s.done(function(){i(n).hide()});s.done(function(){var t;i._removeData(n,"fxshow");for(t in l)i.style(n,t,l[t])});for(u in l)c=ef(h?f[u]:0,u,s),u in f||(f[u]=c.start,h&&(c.end=c.start,c.start="width"===u||"height"===u?1:0))}}function f(n,t,i,r,u){return new f.prototype.init(n,t,i,r,u)}function wt(n,t){var r,i={height:n},u=0;for(t=t?1:0;4>u;u+=2-t)r=p[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function sf(n){return i.isWindow(n)?n:9===n.nodeType?n.defaultView||n.parentWindow:!1}var et,bi,o=typeof t,hf=n.location,r=n.document,ki=r.documentElement,cf=n.jQuery,lf=n.$,ot={},b=[],bt="1.10.2",di=b.concat,kt=b.push,l=b.slice,gi=b.indexOf,af=ot.toString,k=ot.hasOwnProperty,dt=bt.trim,i=function(n,t){return new i.fn.init(n,t,bi)},st=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,s=/\S+/g,vf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,yf=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,nr=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pf=/^[\],:{}\s]*$/,wf=/(?:^|:|,)(?:\s*\[)+/g,bf=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,kf=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,df=/^-ms-/,gf=/-([\da-z])/gi,ne=function(n,t){return t.toUpperCase()},h=function(n){(r.addEventListener||"load"===n.type||"complete"===r.readyState)&&(tr(),i.ready())},tr=function(){r.addEventListener?(r.removeEventListener("DOMContentLoaded",h,!1),n.removeEventListener("load",h,!1)):(r.detachEvent("onreadystatechange",h),n.detachEvent("onload",h))},ni,ir,rr,wi,at,nt,tt,tf,vt;i.fn=i.prototype={jquery:bt,constructor:i,init:function(n,u,f){var e,o;if(!n)return this;if("string"==typeof n){if(e="<"===n.charAt(0)&&">"===n.charAt(n.length-1)&&n.length>=3?[null,n,null]:yf.exec(n),!e||!e[1]&&u)return!u||u.jquery?(u||f).find(n):this.constructor(u).find(n);if(e[1]){if(u=u instanceof i?u[0]:u,i.merge(this,i.parseHTML(e[1],u&&u.nodeType?u.ownerDocument||u:r,!0)),nr.test(e[1])&&i.isPlainObject(u))for(e in u)i.isFunction(this[e])?this[e](u[e]):this.attr(e,u[e]);return this}if(o=r.getElementById(e[2]),o&&o.parentNode){if(o.id!==e[2])return f.find(n);this.length=1;this[0]=o}return this.context=r,this.selector=n,this}return n.nodeType?(this.context=this[0]=n,this.length=1,this):i.isFunction(n)?f.ready(n):(n.selector!==t&&(this.selector=n.selector,this.context=n.context),i.makeArray(n,this))},selector:"",length:0,toArray:function(){return l.call(this)},get:function(n){return null==n?this.toArray():0>n?this[this.length+n]:this[n]},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(n,t){return i.each(this,n,t)},ready:function(n){return i.ready.promise().done(n),this},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(0>n?i:0);return this.pushStack(t>=0&&i>t?[this[t]]:[])},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:kt,sort:[].sort,splice:[].splice};i.fn.init.prototype=i.fn;i.extend=i.fn.extend=function(){var u,o,r,e,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for("boolean"==typeof n&&(c=n,n=arguments[1]||{},f=2),"object"==typeof n||i.isFunction(n)||(n={}),l===f&&(n=this,--f);l>f;f++)if(null!=(s=arguments[f]))for(e in s)u=n[e],r=s[e],n!==r&&(c&&r&&(i.isPlainObject(r)||(o=i.isArray(r)))?(o?(o=!1,h=u&&i.isArray(u)?u:[]):h=u&&i.isPlainObject(u)?u:{},n[e]=i.extend(c,h,r)):r!==t&&(n[e]=r));return n};i.extend({expando:"jQuery"+(bt+Math.random()).replace(/\D/g,""),noConflict:function(t){return n.$===i&&(n.$=lf),t&&n.jQuery===i&&(n.jQuery=cf),i},isReady:!1,readyWait:1,holdReady:function(n){n?i.readyWait++:i.ready(!0)},ready:function(n){if(n===!0?!--i.readyWait:!i.isReady){if(!r.body)return setTimeout(i.ready);i.isReady=!0;n!==!0&&--i.readyWait>0||(et.resolveWith(r,[i]),i.fn.trigger&&i(r).trigger("ready").off("ready"))}},isFunction:function(n){return"function"===i.type(n)},isArray:Array.isArray||function(n){return"array"===i.type(n)},isWindow:function(n){return null!=n&&n==n.window},isNumeric:function(n){return!isNaN(parseFloat(n))&&isFinite(n)},type:function(n){return null==n?n+"":"object"==typeof n||"function"==typeof n?ot[af.call(n)]||"object":typeof n},isPlainObject:function(n){var r;if(!n||"object"!==i.type(n)||n.nodeType||i.isWindow(n))return!1;try{if(n.constructor&&!k.call(n,"constructor")&&!k.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(u){return!1}if(i.support.ownLast)for(r in n)return k.call(n,r);for(r in n);return r===t||k.call(n,r)},isEmptyObject:function(n){var t;for(t in n)return!1;return!0},error:function(n){throw Error(n);},parseHTML:function(n,t,u){if(!n||"string"!=typeof n)return null;"boolean"==typeof t&&(u=t,t=!1);t=t||r;var f=nr.exec(n),e=!u&&[];return f?[t.createElement(f[1])]:(f=i.buildFragment([n],t,e),e&&i(e).remove(),i.merge([],f.childNodes))},parseJSON:function(r){return n.JSON&&n.JSON.parse?n.JSON.parse(r):null===r?r:"string"==typeof r&&(r=i.trim(r),r&&pf.test(r.replace(bf,"@").replace(kf,"]").replace(wf,"")))?Function("return "+r)():(i.error("Invalid JSON: "+r),t)},parseXML:function(r){var u,f;if(!r||"string"!=typeof r)return null;try{n.DOMParser?(f=new DOMParser,u=f.parseFromString(r,"text/xml")):(u=new ActiveXObject("Microsoft.XMLDOM"),u.async="false",u.loadXML(r))}catch(e){u=t}return u&&u.documentElement&&!u.getElementsByTagName("parsererror").length||i.error("Invalid XML: "+r),u},noop:function(){},globalEval:function(t){t&&i.trim(t)&&(n.execScript||function(t){n.eval.call(n,t)})(t)},camelCase:function(n){return n.replace(df,"ms-").replace(gf,ne)},nodeName:function(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()},each:function(n,t,i){var u,r=0,f=n.length,e=gt(n);if(i){if(e){for(;f>r;r++)if(u=t.apply(n[r],i),u===!1)break}else for(r in n)if(u=t.apply(n[r],i),u===!1)break}else if(e){for(;f>r;r++)if(u=t.call(n[r],r,n[r]),u===!1)break}else for(r in n)if(u=t.call(n[r],r,n[r]),u===!1)break;return n},trim:dt&&!dt.call("﻿ ")?function(n){return null==n?"":dt.call(n)}:function(n){return null==n?"":(n+"").replace(vf,"")},makeArray:function(n,t){var r=t||[];return null!=n&&(gt(Object(n))?i.merge(r,"string"==typeof n?[n]:n):kt.call(r,n)),r},inArray:function(n,t,i){var r;if(t){if(gi)return gi.call(t,n,i);for(r=t.length,i=i?0>i?Math.max(0,r+i):i:0;r>i;i++)if(i in t&&t[i]===n)return i}return-1},merge:function(n,i){var f=i.length,u=n.length,r=0;if("number"==typeof f)for(;f>r;r++)n[u++]=i[r];else while(i[r]!==t)n[u++]=i[r++];return n.length=u,n},grep:function(n,t,i){var u,f=[],r=0,e=n.length;for(i=!!i;e>r;r++)u=!!t(n[r],r),i!==u&&f.push(n[r]);return f},map:function(n,t,i){var u,r=0,e=n.length,o=gt(n),f=[];if(o)for(;e>r;r++)u=t(n[r],r,i),null!=u&&(f[f.length]=u);else for(r in n)u=t(n[r],r,i),null!=u&&(f[f.length]=u);return di.apply([],f)},guid:1,proxy:function(n,r){var f,u,e;return"string"==typeof r&&(e=n[r],r=n,n=e),i.isFunction(n)?(f=l.call(arguments,2),u=function(){return n.apply(r||this,f.concat(l.call(arguments)))},u.guid=n.guid=n.guid||i.guid++,u):t},access:function(n,r,u,f,e,o,s){var h=0,l=n.length,c=null==u;if("object"===i.type(u)){e=!0;for(h in u)i.access(n,r,h,u[h],!0,o,s)}else if(f!==t&&(e=!0,i.isFunction(f)||(s=!0),c&&(s?(r.call(n,f),r=null):(c=r,r=function(n,t,r){return c.call(i(n),r)})),r))for(;l>h;h++)r(n[h],u,s?f:f.call(n[h],h,r(n[h],u)));return e?n:c?r.call(n):l?r(n[0],u):o},now:function(){return(new Date).getTime()},swap:function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f}});i.ready.promise=function(t){if(!et)if(et=i.Deferred(),"complete"===r.readyState)setTimeout(i.ready);else if(r.addEventListener)r.addEventListener("DOMContentLoaded",h,!1),n.addEventListener("load",h,!1);else{r.attachEvent("onreadystatechange",h);n.attachEvent("onload",h);var u=!1;try{u=null==n.frameElement&&r.documentElement}catch(e){}u&&u.doScroll&&function f(){if(!i.isReady){try{u.doScroll("left")}catch(n){return setTimeout(f,50)}tr();i.ready()}}()}return et.promise(t)};i.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(n,t){ot["[object "+t+"]"]=t.toLowerCase()});bi=i(r),function(n,t){function u(n,t,i,r){var p,u,f,l,w,a,k,c,g,d;if((t?t.ownerDocument||t:y)!==s&&nt(t),t=t||s,i=i||[],!n||"string"!=typeof n)return i;if(1!==(l=t.nodeType)&&9!==l)return[];if(v&&!r){if(p=or.exec(n))if(f=p[1]){if(9===l){if(u=t.getElementById(f),!u||!u.parentNode)return i;if(u.id===f)return i.push(u),i}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&ot(t,u)&&u.id===f)return i.push(u),i}else{if(p[2])return b.apply(i,t.getElementsByTagName(n)),i;if((f=p[3])&&e.getElementsByClassName&&t.getElementsByClassName)return b.apply(i,t.getElementsByClassName(f)),i}if(e.qsa&&(!h||!h.test(n))){if(c=k=o,g=t,d=9===l&&n,1===l&&"object"!==t.nodeName.toLowerCase()){for(a=pt(n),(k=t.getAttribute("id"))?c=k.replace(cr,"\\$&"):t.setAttribute("id",c),c="[id='"+c+"'] ",w=a.length;w--;)a[w]=c+wt(a[w]);g=ti.test(n)&&t.parentNode||t;d=a.join(",")}if(d)try{return b.apply(i,g.querySelectorAll(d)),i}catch(tt){}finally{k||t.removeAttribute("id")}}}return pr(n.replace(vt,"$1"),t,i,r)}function ri(){function n(i,u){return t.push(i+=" ")>r.cacheLength&&delete n[t.shift()],n[i]=u}var t=[];return n}function c(n){return n[o]=!0,n}function l(n){var t=s.createElement("div");try{return!!n(t)}catch(i){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ui(n,t){for(var u=n.split("|"),i=n.length;i--;)r.attrHandle[u[i]]=t}function bi(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||vi)-(~n.sourceIndex||vi);if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function lr(n){return function(t){var i=t.nodeName.toLowerCase();return"input"===i&&t.type===n}}function ar(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function rt(n){return c(function(t){return t=+t,c(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ki(){}function pt(n,t){var e,f,s,o,i,h,c,l=li[n+" "];if(l)return t?0:l.slice(0);for(i=n,h=[],c=r.preFilter;i;){(!e||(f=ir.exec(i)))&&(f&&(i=i.slice(f[0].length)||i),h.push(s=[]));e=!1;(f=rr.exec(i))&&(e=f.shift(),s.push({value:e,type:f[0].replace(vt," ")}),i=i.slice(e.length));for(o in r.filter)(f=yt[o].exec(i))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),i=i.slice(e.length));if(!e)break}return t?i.length:i?u.error(n):li(n,h).slice(0)}function wt(n){for(var t=0,r=n.length,i="";r>t;t++)i+=n[t].value;return i}function fi(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=di++;return t.first?function(t,i,f){while(t=t[r])if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,e){var h,s,c,l=p+" "+f;if(e){while(t=t[r])if((1===t.nodeType||u)&&n(t,i,e))return!0}else while(t=t[r])if(1===t.nodeType||u)if(c=t[o]||(t[o]={}),(s=c[r])&&s[0]===l){if((h=s[1])===!0||h===ht)return h===!0}else if(s=c[r]=[l],s[1]=n(t,i,e)||ht,s[1]===!0)return!0}}function ei(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function bt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;s>f;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function oi(n,t,i,r,u,f){return r&&!r[o]&&(r=oi(r)),u&&!u[o]&&(u=oi(u,f)),c(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,k=f||yr(t||"*",o.nodeType?[o]:o,[]),v=!n||!f&&t?k:bt(k,p,n,o,s),h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=bt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?it.call(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=bt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):b.apply(e,h)})}function si(n){for(var s,u,i,e=n.length,h=r.relative[n[0].type],c=h||r.relative[" "],t=h?1:0,l=fi(function(n){return n===s},c,!0),a=fi(function(n){return it.call(s,n)>-1},c,!0),f=[function(n,t,i){return!h&&(i||t!==lt)||((s=t).nodeType?l(n,t,i):a(n,t,i))}];e>t;t++)if(u=r.relative[n[t].type])f=[fi(ei(f),u)];else{if(u=r.filter[n[t].type].apply(null,n[t].matches),u[o]){for(i=++t;e>i;i++)if(r.relative[n[i].type])break;return oi(t>1&&ei(f),t>1&&wt(n.slice(0,t-1).concat({value:" "===n[t-2].type?"*":""})).replace(vt,"$1"),u,i>t&&si(n.slice(t,i)),e>i&&si(n=n.slice(i)),e>i&&wt(n))}f.push(u)}return ei(f)}function vr(n,t){var f=0,i=t.length>0,e=n.length>0,o=function(o,h,c,l,a){var y,g,k,w=[],d=0,v="0",nt=o&&[],tt=null!=a,it=lt,ut=o||e&&r.find.TAG("*",a&&h.parentNode||h),rt=p+=null==it?1:Math.random()||.1;for(tt&&(lt=h!==s&&h,ht=f);null!=(y=ut[v]);v++){if(e&&y){for(g=0;k=n[g++];)if(k(y,h,c)){l.push(y);break}tt&&(p=rt,ht=++f)}i&&((y=!k&&y)&&d--,o&&nt.push(y))}if(d+=v,i&&v!==d){for(g=0;k=t[g++];)k(nt,w,h,c);if(o){if(d>0)while(v--)nt[v]||w[v]||(w[v]=nr.call(l));w=bt(w)}b.apply(l,w);tt&&!o&&w.length>0&&d+t.length>1&&u.uniqueSort(l)}return tt&&(p=rt,lt=it),nt};return i?c(o):o}function yr(n,t,i){for(var r=0,f=t.length;f>r;r++)u(n,t[r],i);return i}function pr(n,t,i,u){var s,f,o,c,l,h=pt(n);if(!u&&1===h.length){if(f=h[0]=h[0].slice(0),f.length>2&&"ID"===(o=f[0]).type&&e.getById&&9===t.nodeType&&v&&r.relative[f[1].type]){if(t=(r.find.ID(o.matches[0].replace(k,d),t)||[])[0],!t)return i;n=n.slice(f.shift().value.length)}for(s=yt.needsContext.test(n)?0:f.length;s--;){if(o=f[s],r.relative[c=o.type])break;if((l=r.find[c])&&(u=l(o.matches[0].replace(k,d),ti.test(f[0].type)&&t.parentNode||t))){if(f.splice(s,1),n=u.length&&wt(f),!n)return b.apply(i,u),i;break}}}return kt(n,h)(u,t,!v,i,ti.test(n)),i}var ut,e,ht,r,ct,hi,kt,lt,g,nt,s,a,v,h,tt,at,ot,o="sizzle"+-new Date,y=n.document,p=0,di=0,ci=ri(),li=ri(),ai=ri(),ft=!1,dt=function(n,t){return n===t?(ft=!0,0):0},st=typeof t,vi=-2147483648,gi={}.hasOwnProperty,w=[],nr=w.pop,tr=w.push,b=w.push,yi=w.slice,it=w.indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(this[t]===n)return t;return-1},gt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",f="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",pi=et.replace("w","w#"),wi="\\["+f+"*("+et+")"+f+"*(?:([*^$|!~]?=)"+f+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+pi+")|)|)"+f+"*\\]",ni=":("+et+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+wi.replace(3,8)+")*)|.*)\\)|)",vt=RegExp("^"+f+"+|((?:^|[^\\\\])(?:\\\\.)*)"+f+"+$","g"),ir=RegExp("^"+f+"*,"+f+"*"),rr=RegExp("^"+f+"*([>+~]|"+f+")"+f+"*"),ti=RegExp(f+"*[+~]"),ur=RegExp("="+f+"*([^\\]'\"]*)"+f+"*\\]","g"),fr=RegExp(ni),er=RegExp("^"+pi+"$"),yt={ID:RegExp("^#("+et+")"),CLASS:RegExp("^\\.("+et+")"),TAG:RegExp("^("+et.replace("w","w*")+")"),ATTR:RegExp("^"+wi),PSEUDO:RegExp("^"+ni),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+f+"*(even|odd|(([+-]|)(\\d*)n|)"+f+"*(?:([+-]|)"+f+"*(\\d+)|))"+f+"*\\)|)","i"),bool:RegExp("^(?:"+gt+")$","i"),needsContext:RegExp("^"+f+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+f+"*((?:-\\d)?\\d*)"+f+"*\\)|)(?=[^-]|$)","i")},ii=/^[^{]+\{\s*\[native \w/,or=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,sr=/^(?:input|select|textarea|button)$/i,hr=/^h\d$/i,cr=/'|\\/g,k=RegExp("\\\\([\\da-f]{1,6}"+f+"?|("+f+")|.)","ig"),d=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(55296|r>>10,56320|1023&r)};try{b.apply(w=yi.call(y.childNodes),y.childNodes);w[y.childNodes.length].nodeType}catch(wr){b={apply:w.length?function(n,t){tr.apply(n,yi.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}hi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?"HTML"!==t.nodeName:!1};e=u.support={};nt=u.setDocument=function(n){var i=n?n.ownerDocument||n:y,u=i.defaultView;return i!==s&&9===i.nodeType&&i.documentElement?(s=i,a=i.documentElement,v=!hi(i),u&&u.attachEvent&&u!==u.top&&u.attachEvent("onbeforeunload",function(){nt()}),e.attributes=l(function(n){return n.className="i",!n.getAttribute("className")}),e.getElementsByTagName=l(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),e.getElementsByClassName=l(function(n){return n.innerHTML="<div class='a'><\/div><div class='a i'><\/div>",n.firstChild.className="i",2===n.getElementsByClassName("i").length}),e.getById=l(function(n){return a.appendChild(n).id=o,!i.getElementsByName||!i.getElementsByName(o).length}),e.getById?(r.find.ID=function(n,t){if(typeof t.getElementById!==st&&v){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},r.filter.ID=function(n){var t=n.replace(k,d);return function(n){return n.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(n){var t=n.replace(k,d);return function(n){var i=typeof n.getAttributeNode!==st&&n.getAttributeNode("id");return i&&i.value===t}}),r.find.TAG=e.getElementsByTagName?function(n,i){return typeof i.getElementsByTagName!==st?i.getElementsByTagName(n):t}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){while(i=u[f++])1===i.nodeType&&r.push(i);return r}return u},r.find.CLASS=e.getElementsByClassName&&function(n,i){return typeof i.getElementsByClassName!==st&&v?i.getElementsByClassName(n):t},tt=[],h=[],(e.qsa=ii.test(i.querySelectorAll))&&(l(function(n){n.innerHTML="<select><option selected=''><\/option><\/select>";n.querySelectorAll("[selected]").length||h.push("\\["+f+"*(?:value|"+gt+")");n.querySelectorAll(":checked").length||h.push(":checked")}),l(function(n){var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("t","");n.querySelectorAll("[t^='']").length&&h.push("[*^$]="+f+"*(?:''|\"\")");n.querySelectorAll(":enabled").length||h.push(":enabled",":disabled");n.querySelectorAll("*,:x");h.push(",.*:")})),(e.matchesSelector=ii.test(at=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&l(function(n){e.disconnectedMatch=at.call(n,"div");at.call(n,"[s!='']:x");tt.push("!=",ni)}),h=h.length&&RegExp(h.join("|")),tt=tt.length&&RegExp(tt.join("|")),ot=ii.test(a.contains)||a.compareDocumentPosition?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},dt=a.compareDocumentPosition?function(n,t){if(n===t)return ft=!0,0;var r=t.compareDocumentPosition&&n.compareDocumentPosition&&n.compareDocumentPosition(t);return r?1&r||!e.sortDetached&&t.compareDocumentPosition(n)===r?n===i||ot(y,n)?-1:t===i||ot(y,t)?1:g?it.call(g,n)-it.call(g,t):0:4&r?-1:1:n.compareDocumentPosition?-1:1}:function(n,t){var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(n===t)return ft=!0,0;if(!o||!s)return n===i?-1:t===i?1:o?-1:s?1:g?it.call(g,n)-it.call(g,t):0;if(o===s)return bi(n,t);for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?bi(f[u],e[u]):f[u]===y?-1:e[u]===y?1:0},i):s};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==s&&nt(n),t=t.replace(ur,"='$1']"),!(!e.matchesSelector||!v||tt&&tt.test(t)||h&&h.test(t)))try{var i=at.call(n,t);if(i||e.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(r){}return u(t,s,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==s&&nt(n),ot(n,t)};u.attr=function(n,i){(n.ownerDocument||n)!==s&&nt(n);var f=r.attrHandle[i.toLowerCase()],u=f&&gi.call(r.attrHandle,i.toLowerCase())?f(n,i,!v):t;return u===t?e.attributes||!v?n.getAttribute(i):(u=n.getAttributeNode(i))&&u.specified?u.value:null:u};u.error=function(n){throw Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ft=!e.detectDuplicates,g=!e.sortStable&&n.slice(0),n.sort(dt),ft){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return n};ct=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=ct(n)}else if(3===t||4===t)return n.nodeValue}else for(;r=n[u];u++)i+=ct(r);return i};r=u.selectors={cacheLength:50,createPseudo:c,match:yt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(k,d),n[3]=(n[4]||n[5]||"").replace(k,d),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var r,i=!n[5]&&n[2];return yt.CHILD.test(n[0])?null:(n[3]&&n[4]!==t?n[2]=n[4]:i&&fr.test(i)&&(r=pt(i,!0))&&(r=i.indexOf(")",i.length-r)-i.length)&&(n[0]=n[0].slice(0,r),n[2]=i.slice(0,r)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(k,d).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=ci[n+" "];return t||(t=RegExp("(^|"+f+")"+n+"("+f+"|$)"))&&ci(n,function(n){return t.test("string"==typeof n.className&&n.className||typeof n.getAttribute!==st&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return null==f?"!="===t:t?(f+="","="===t?f===i:"!="===t?f!==i:"^="===t?i&&0===f.indexOf(i):"*="===t?i&&f.indexOf(i)>-1:"$="===t?i&&f.slice(-i.length)===i:"~="===t?(" "+f+" ").indexOf(i)>-1:"|="===t?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s="nth"!==n.slice(0,3),e="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,h){var a,k,c,l,v,w,b=s!==e?"nextSibling":"previousSibling",y=t.parentNode,g=f&&t.nodeName.toLowerCase(),d=!h&&!f;if(y){if(s){while(b){for(c=t;c=c[b];)if(f?c.nodeName.toLowerCase()===g:1===c.nodeType)return!1;w=b="only"===n&&!w&&"nextSibling"}return!0}if(w=[e?y.firstChild:y.lastChild],e&&d){for(k=y[o]||(y[o]={}),a=k[n]||[],v=a[0]===p&&a[1],l=a[0]===p&&a[2],c=v&&y.childNodes[v];c=++v&&c&&c[b]||(l=v=0)||w.pop();)if(1===c.nodeType&&++l&&c===t){k[n]=[p,v,l];break}}else if(d&&(a=(t[o]||(t[o]={}))[n])&&a[0]===p)l=a[1];else while(c=++v&&c&&c[b]||(l=v=0)||w.pop())if((f?c.nodeName.toLowerCase()===g:1===c.nodeType)&&++l&&(d&&((c[o]||(c[o]={}))[n]=[p,l]),c===t))break;return l-=u,l===r||0==l%r&&l/r>=0}}},PSEUDO:function(n,t){var f,i=r.pseudos[n]||r.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return i[o]?i(t):i.length>1?(f=[n,n,"",t],r.setFilters.hasOwnProperty(n.toLowerCase())?c(function(n,r){for(var u,f=i(n,t),e=f.length;e--;)u=it.call(n,f[e]),n[u]=!(r[u]=f[e])}):function(n){return i(n,0,f)}):i}},pseudos:{not:c(function(n){var i=[],r=[],t=kt(n.replace(vt,"$1"));return t[o]?c(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:c(function(n){return function(t){return u(n,t).length>0}}),contains:c(function(n){return function(t){return(t.textContent||t.innerText||ct(t)).indexOf(n)>-1}}),lang:c(function(n){return er.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(k,d).toLowerCase(),function(t){var i;do if(i=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===a},focus:function(n){return n===s.activeElement&&(!s.hasFocus||s.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return n.disabled===!1},disabled:function(n){return n.disabled===!0},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeName>"@"||3===n.nodeType||4===n.nodeType)return!1;return!0},parent:function(n){return!r.pseudos.empty(n)},header:function(n){return hr.test(n.nodeName)},input:function(n){return sr.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||t.toLowerCase()===n.type)},first:rt(function(){return[0]}),last:rt(function(n,t){return[t-1]}),eq:rt(function(n,t,i){return[0>i?i+t:i]}),even:rt(function(n,t){for(var i=0;t>i;i+=2)n.push(i);return n}),odd:rt(function(n,t){for(var i=1;t>i;i+=2)n.push(i);return n}),lt:rt(function(n,t,i){for(var r=0>i?i+t:i;--r>=0;)n.push(r);return n}),gt:rt(function(n,t,i){for(var r=0>i?i+t:i;t>++r;)n.push(r);return n})}};r.pseudos.nth=r.pseudos.eq;for(ut in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[ut]=lr(ut);for(ut in{submit:!0,reset:!0})r.pseudos[ut]=ar(ut);ki.prototype=r.filters=r.pseudos;r.setFilters=new ki;kt=u.compile=function(n,t){var r,u=[],f=[],i=ai[n+" "];if(!i){for(t||(t=pt(n)),r=t.length;r--;)i=si(t[r]),i[o]?u.push(i):f.push(i);i=ai(n,vr(f,u))}return i};e.sortStable=o.split("").sort(dt).join("")===o;e.detectDuplicates=ft;nt();e.sortDetached=l(function(n){return 1&n.compareDocumentPosition(s.createElement("div"))});l(function(n){return n.innerHTML="<a href='#'><\/a>","#"===n.firstChild.getAttribute("href")})||ui("type|href|height|width",function(n,i,r){return r?t:n.getAttribute(i,"type"===i.toLowerCase()?1:2)});e.attributes&&l(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),""===n.firstChild.getAttribute("value")})||ui("value",function(n,i,r){return r||"input"!==n.nodeName.toLowerCase()?t:n.defaultValue});l(function(n){return null==n.getAttribute("disabled")})||ui(gt,function(n,i,r){var u;return r?t:(u=n.getAttributeNode(i))&&u.specified?u.value:n[i]===!0?i.toLowerCase():null});i.find=u;i.expr=u.selectors;i.expr[":"]=i.expr.pseudos;i.unique=u.uniqueSort;i.text=u.getText;i.isXMLDoc=u.isXML;i.contains=u.contains}(n);ni={};i.Callbacks=function(n){n="string"==typeof n?ni[n]||te(n):i.extend({},n);var s,f,c,e,o,l,r=[],u=!n.once&&[],a=function(t){for(f=n.memory&&t,c=!0,o=l||0,l=0,e=r.length,s=!0;r&&e>o;o++)if(r[o].apply(t[0],t[1])===!1&&n.stopOnFalse){f=!1;break}s=!1;r&&(u?u.length&&a(u.shift()):f?r=[]:h.disable())},h={add:function(){if(r){var t=r.length;(function u(t){i.each(t,function(t,f){var e=i.type(f);"function"===e?n.unique&&h.has(f)||r.push(f):f&&f.length&&"string"!==e&&u(f)})})(arguments);s?e=r.length:f&&(l=t,a(f))}return this},remove:function(){return r&&i.each(arguments,function(n,t){for(var u;(u=i.inArray(t,r,u))>-1;)r.splice(u,1),s&&(e>=u&&e--,o>=u&&o--)}),this},has:function(n){return n?i.inArray(n,r)>-1:!(!r||!r.length)},empty:function(){return r=[],e=0,this},disable:function(){return r=u=f=t,this},disabled:function(){return!r},lock:function(){return u=t,f||h.disable(),this},locked:function(){return!u},fireWith:function(n,t){return!r||c&&!u||(t=t||[],t=[n,t.slice?t.slice():t],s?u.push(t):a(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!c}};return h};i.extend({Deferred:function(n){var u=[["resolve","done",i.Callbacks("once memory"),"resolved"],["reject","fail",i.Callbacks("once memory"),"rejected"],["notify","progress",i.Callbacks("memory")]],f="pending",r={state:function(){return f},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var n=arguments;return i.Deferred(function(f){i.each(u,function(u,e){var s=e[0],o=i.isFunction(n[u])&&n[u];t[e[1]](function(){var n=o&&o.apply(this,arguments);n&&i.isFunction(n.promise)?n.promise().done(f.resolve).fail(f.reject).progress(f.notify):f[s+"With"](this===r?f.promise():this,o?[n]:arguments)})});n=null}).promise()},promise:function(n){return null!=n?i.extend(n,r):r}},t={};return r.pipe=r.then,i.each(u,function(n,i){var e=i[2],o=i[3];r[i[1]]=e.add;o&&e.add(function(){f=o},u[1^n][2].disable,u[2][2].lock);t[i[0]]=function(){return t[i[0]+"With"](this===t?r:this,arguments),this};t[i[0]+"With"]=e.fireWith}),r.promise(t),n&&n.call(t,t),t},when:function(n){var t=0,u=l.call(arguments),r=u.length,e=1!==r||n&&i.isFunction(n.promise)?r:0,f=1===e?n:i.Deferred(),h=function(n,t,i){return function(r){t[n]=this;i[n]=arguments.length>1?l.call(arguments):r;i===o?f.notifyWith(t,i):--e||f.resolveWith(t,i)}},o,c,s;if(r>1)for(o=Array(r),c=Array(r),s=Array(r);r>t;t++)u[t]&&i.isFunction(u[t].promise)?u[t].promise().done(h(t,s,u)).fail(f.reject).progress(h(t,c,o)):--e;return e||f.resolveWith(s,u),f.promise()}});i.support=function(t){var a,e,f,h,c,l,v,y,s,u=r.createElement("div");if(u.setAttribute("className","t"),u.innerHTML="  <link/><table><\/table><a href='/a'>a<\/a><input type='checkbox'/>",a=u.getElementsByTagName("*")||[],e=u.getElementsByTagName("a")[0],!e||!e.style||!a.length)return t;h=r.createElement("select");l=h.appendChild(r.createElement("option"));f=u.getElementsByTagName("input")[0];e.style.cssText="top:1px;float:left;opacity:.5";t.getSetAttribute="t"!==u.className;t.leadingWhitespace=3===u.firstChild.nodeType;t.tbody=!u.getElementsByTagName("tbody").length;t.htmlSerialize=!!u.getElementsByTagName("link").length;t.style=/top/.test(e.getAttribute("style"));t.hrefNormalized="/a"===e.getAttribute("href");t.opacity=/^0.5/.test(e.style.opacity);t.cssFloat=!!e.style.cssFloat;t.checkOn=!!f.value;t.optSelected=l.selected;t.enctype=!!r.createElement("form").enctype;t.html5Clone="<:nav><\/:nav>"!==r.createElement("nav").cloneNode(!0).outerHTML;t.inlineBlockNeedsLayout=!1;t.shrinkWrapBlocks=!1;t.pixelPosition=!1;t.deleteExpando=!0;t.noCloneEvent=!0;t.reliableMarginRight=!0;t.boxSizingReliable=!0;f.checked=!0;t.noCloneChecked=f.cloneNode(!0).checked;h.disabled=!0;t.optDisabled=!l.disabled;try{delete u.test}catch(p){t.deleteExpando=!1}f=r.createElement("input");f.setAttribute("value","");t.input=""===f.getAttribute("value");f.value="t";f.setAttribute("type","radio");t.radioValue="t"===f.value;f.setAttribute("checked","t");f.setAttribute("name","t");c=r.createDocumentFragment();c.appendChild(f);t.appendChecked=f.checked;t.checkClone=c.cloneNode(!0).cloneNode(!0).lastChild.checked;u.attachEvent&&(u.attachEvent("onclick",function(){t.noCloneEvent=!1}),u.cloneNode(!0).click());for(s in{submit:!0,change:!0,focusin:!0})u.setAttribute(v="on"+s,"t"),t[s+"Bubbles"]=v in n||u.attributes[v].expando===!1;u.style.backgroundClip="content-box";u.cloneNode(!0).style.backgroundClip="";t.clearCloneStyle="content-box"===u.style.backgroundClip;for(s in i(t))break;return t.ownLast="0"!==s,i(function(){var h,e,f,c="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",s=r.getElementsByTagName("body")[0];s&&(h=r.createElement("div"),h.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(h).appendChild(u),u.innerHTML="<table><tr><td><\/td><td>t<\/td><\/tr><\/table>",f=u.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",y=0===f[0].offsetHeight,f[0].style.display="",f[1].style.display="none",t.reliableHiddenOffsets=y&&0===f[0].offsetHeight,u.innerHTML="",u.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",i.swap(s,null!=s.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===u.offsetWidth}),n.getComputedStyle&&(t.pixelPosition="1%"!==(n.getComputedStyle(u,null)||{}).top,t.boxSizingReliable="4px"===(n.getComputedStyle(u,null)||{width:"4px"}).width,e=u.appendChild(r.createElement("div")),e.style.cssText=u.style.cssText=c,e.style.marginRight=e.style.width="0",u.style.width="1px",t.reliableMarginRight=!parseFloat((n.getComputedStyle(e,null)||{}).marginRight)),typeof u.style.zoom!==o&&(u.innerHTML="",u.style.cssText=c+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===u.offsetWidth,u.style.display="block",u.innerHTML="<div><\/div>",u.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==u.offsetWidth,t.inlineBlockNeedsLayout&&(s.style.zoom=1)),s.removeChild(h),h=u=f=e=null)}),a=h=c=l=e=f=null,t}({});ir=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/;rr=/([A-Z])/g;i.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(n){return n=n.nodeType?i.cache[n[i.expando]]:n[i.expando],!!n&&!ti(n)},data:function(n,t,i){return ur(n,t,i)},removeData:function(n,t){return fr(n,t)},_data:function(n,t,i){return ur(n,t,i,!0)},_removeData:function(n,t){return fr(n,t,!0)},acceptData:function(n){if(n.nodeType&&1!==n.nodeType&&9!==n.nodeType)return!1;var t=n.nodeName&&i.noData[n.nodeName.toLowerCase()];return!t||t!==!0&&n.getAttribute("classid")===t}});i.fn.extend({data:function(n,r){var e,f,o=null,s=0,u=this[0];if(n===t){if(this.length&&(o=i.data(u),1===u.nodeType&&!i._data(u,"parsedAttrs"))){for(e=u.attributes;e.length>s;s++)f=e[s].name,0===f.indexOf("data-")&&(f=i.camelCase(f.slice(5)),er(u,f,o[f]));i._data(u,"parsedAttrs",!0)}return o}return"object"==typeof n?this.each(function(){i.data(this,n)}):arguments.length>1?this.each(function(){i.data(this,n,r)}):u?er(u,n,i.data(u,n)):null},removeData:function(n){return this.each(function(){i.removeData(this,n)})}});i.extend({queue:function(n,r,u){var f;return n?(r=(r||"fx")+"queue",f=i._data(n,r),u&&(!f||i.isArray(u)?f=i._data(n,r,i.makeArray(u)):f.push(u)),f||[]):t},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};"inprogress"===u&&(u=r.shift(),e--);u&&("fx"===t&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var r=t+"queueHooks";return i._data(n,r)||i._data(n,r,{empty:i.Callbacks("once memory").add(function(){i._removeData(n,t+"queue");i._removeData(n,r)})})}});i.fn.extend({queue:function(n,r){var u=2;return"string"!=typeof n&&(r=n,n="fx",u--),u>arguments.length?i.queue(this[0],n):r===t?this:this.each(function(){var t=i.queue(this,n,r);i._queueHooks(this,n);"fx"===n&&"inprogress"!==t[0]&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},delay:function(n,t){return n=i.fx?i.fx.speeds[n]||n:n,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,n);i.stop=function(){clearTimeout(r)}})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,r){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for("string"!=typeof n&&(r=n,n=t),n=n||"fx";s--;)u=i._data(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(r)}});var d,or,ii=/[\t\r\n\f]/g,ie=/\r/g,re=/^(?:input|select|textarea|button|object)$/i,ue=/^(?:a|area)$/i,ri=/^(?:checked|selected)$/i,a=i.support.getSetAttribute,ht=i.support.input;i.fn.extend({attr:function(n,t){return i.access(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})},prop:function(n,t){return i.access(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return n=i.propFix[n]||n,this.each(function(){try{this[n]=t;delete this[n]}catch(i){}})},addClass:function(n){var e,t,r,u,o,f=0,h=this.length,c="string"==typeof n&&n;if(i.isFunction(n))return this.each(function(t){i(this).addClass(n.call(this,t,this.className))});if(c)for(e=(n||"").match(s)||[];h>f;f++)if(t=this[f],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(ii," "):" ")){for(o=0;u=e[o++];)0>r.indexOf(" "+u+" ")&&(r+=u+" ");t.className=i.trim(r)}return this},removeClass:function(n){var e,t,r,u,o,f=0,h=this.length,c=0===arguments.length||"string"==typeof n&&n;if(i.isFunction(n))return this.each(function(t){i(this).removeClass(n.call(this,t,this.className))});if(c)for(e=(n||"").match(s)||[];h>f;f++)if(t=this[f],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(ii," "):"")){for(o=0;u=e[o++];)while(r.indexOf(" "+u+" ")>=0)r=r.replace(" "+u+" "," ");t.className=n?i.trim(r):""}return this},toggleClass:function(n,t){var r=typeof n;return"boolean"==typeof t&&"string"===r?t?this.addClass(n):this.removeClass(n):i.isFunction(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,this.className,t),t)}):this.each(function(){if("string"===r)for(var t,f=0,u=i(this),e=n.match(s)||[];t=e[f++];)u.hasClass(t)?u.removeClass(t):u.addClass(t);else(r===o||"boolean"===r)&&(this.className&&i._data(this,"__className__",this.className),this.className=this.className||n===!1?"":i._data(this,"__className__")||"")})},hasClass:function(n){for(var i=" "+n+" ",t=0,r=this.length;r>t;t++)if(1===this[t].nodeType&&(" "+this[t].className+" ").replace(ii," ").indexOf(i)>=0)return!0;return!1},val:function(n){var u,r,e,f=this[0];return arguments.length?(e=i.isFunction(n),this.each(function(u){var f;1===this.nodeType&&(f=e?n.call(this,u,i(this).val()):n,null==f?f="":"number"==typeof f?f+="":i.isArray(f)&&(f=i.map(f,function(n){return null==n?"":n+""})),r=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,f,"value")!==t||(this.value=f))})):f?(r=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],r&&"get"in r&&(u=r.get(f,"value"))!==t?u:(u=f.value,"string"==typeof u?u.replace(ie,""):null==u?"":u)):void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return null!=t?t:n.text}},select:{get:function(n){for(var e,t,o=n.options,r=n.selectedIndex,u="select-one"===n.type||0>r,s=u?null:[],h=u?r+1:o.length,f=0>r?h:u?r:0;h>f;f++)if(t=o[f],!(!t.selected&&f!==r||(i.support.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&i.nodeName(t.parentNode,"optgroup"))){if(e=i(t).val(),u)return e;s.push(e)}return s},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(i(r).val(),e)>=0)&&(u=!0);return u||(n.selectedIndex=-1),e}}},attr:function(n,r,u){var f,e,s=n.nodeType;if(n&&3!==s&&8!==s&&2!==s)return typeof n.getAttribute===o?i.prop(n,r,u):(1===s&&i.isXMLDoc(n)||(r=r.toLowerCase(),f=i.attrHooks[r]||(i.expr.match.bool.test(r)?or:d)),u===t?f&&"get"in f&&null!==(e=f.get(n,r))?e:(e=i.find.attr(n,r),null==e?t:e):null!==u?f&&"set"in f&&(e=f.set(n,u,r))!==t?e:(n.setAttribute(r,u+""),u):(i.removeAttr(n,r),t))},removeAttr:function(n,t){var r,u,e=0,f=t&&t.match(s);if(f&&1===n.nodeType)while(r=f[e++])u=i.propFix[r]||r,i.expr.match.bool.test(r)?ht&&a||!ri.test(r)?n[u]=!1:n[i.camelCase("default-"+r)]=n[u]=!1:i.attr(n,r,""),n.removeAttribute(a?r:u)},attrHooks:{type:{set:function(n,t){if(!i.support.radioValue&&"radio"===t&&i.nodeName(n,"input")){var r=n.value;return n.setAttribute("type",t),r&&(n.value=r),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(n,r,u){var e,f,s,o=n.nodeType;if(n&&3!==o&&8!==o&&2!==o)return s=1!==o||!i.isXMLDoc(n),s&&(r=i.propFix[r]||r,f=i.propHooks[r]),u!==t?f&&"set"in f&&(e=f.set(n,u,r))!==t?e:n[r]=u:f&&"get"in f&&null!==(e=f.get(n,r))?e:n[r]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):re.test(n.nodeName)||ue.test(n.nodeName)&&n.href?0:-1}}}});or={set:function(n,t,r){return t===!1?i.removeAttr(n,r):ht&&a||!ri.test(r)?n.setAttribute(!a&&i.propFix[r]||r,r):n[i.camelCase("default-"+r)]=n[r]=!0,r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,r){var u=i.expr.attrHandle[r]||i.find.attr;i.expr.attrHandle[r]=ht&&a||!ri.test(r)?function(n,r,f){var e=i.expr.attrHandle[r],o=f?t:(i.expr.attrHandle[r]=t)!=u(n,r,f)?r.toLowerCase():null;return i.expr.attrHandle[r]=e,o}:function(n,r,u){return u?t:n[i.camelCase("default-"+r)]?r.toLowerCase():null}});ht&&a||(i.attrHooks.value={set:function(n,r,u){return i.nodeName(n,"input")?(n.defaultValue=r,t):d&&d.set(n,r,u)}});a||(d={set:function(n,i,r){var u=n.getAttributeNode(r);return u||n.setAttributeNode(u=n.ownerDocument.createAttribute(r)),u.value=i+="","value"===r||i===n.getAttribute(r)?i:t}},i.expr.attrHandle.id=i.expr.attrHandle.name=i.expr.attrHandle.coords=function(n,i,r){var u;return r?t:(u=n.getAttributeNode(i))&&""!==u.value?u.value:null},i.valHooks.button={get:function(n,i){var r=n.getAttributeNode(i);return r&&r.specified?r.value:t},set:d.set},i.attrHooks.contenteditable={set:function(n,t,i){d.set(n,""===t?!1:t,i)}},i.each(["width","height"],function(n,r){i.attrHooks[r]={set:function(n,i){return""===i?(n.setAttribute(r,"auto"),i):t}}}));i.support.hrefNormalized||i.each(["href","src"],function(n,t){i.propHooks[t]={get:function(n){return n.getAttribute(t,4)}}});i.support.style||(i.attrHooks.style={get:function(n){return n.style.cssText||t},set:function(n,t){return n.style.cssText=t+""}});i.support.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});i.support.enctype||(i.propFix.enctype="encoding");i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,r){return i.isArray(r)?n.checked=i.inArray(i(n).val(),r)>=0:t}};i.support.checkOn||(i.valHooks[this].get=function(n){return null===n.getAttribute("value")?"on":n.value})});var ui=/^(?:input|select|textarea)$/i,fe=/^key/,ee=/^(?:mouse|contextmenu)|click/,sr=/^(?:focusinfocus|focusoutblur)$/,hr=/^([^.]*)(?:\.(.+)|)$/;i.event={global:{},add:function(n,r,u,f,e){var b,p,k,w,c,l,a,v,h,d,g,y=i._data(n);if(y){for(u.handler&&(w=u,u=w.handler,e=w.selector),u.guid||(u.guid=i.guid++),(p=y.events)||(p=y.events={}),(l=y.handle)||(l=y.handle=function(n){return typeof i===o||n&&i.event.triggered===n.type?t:i.event.dispatch.apply(l.elem,arguments)},l.elem=n),r=(r||"").match(s)||[""],k=r.length;k--;)b=hr.exec(r[k])||[],h=g=b[1],d=(b[2]||"").split(".").sort(),h&&(c=i.event.special[h]||{},h=(e?c.delegateType:c.bindType)||h,c=i.event.special[h]||{},a=i.extend({type:h,origType:g,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:d.join(".")},w),(v=p[h])||(v=p[h]=[],v.delegateCount=0,c.setup&&c.setup.call(n,f,d,l)!==!1||(n.addEventListener?n.addEventListener(h,l,!1):n.attachEvent&&n.attachEvent("on"+h,l))),c.add&&(c.add.call(n,a),a.handler.guid||(a.handler.guid=u.guid)),e?v.splice(v.delegateCount++,0,a):v.push(a),i.event.global[h]=!0);n=null}},remove:function(n,t,r,u,f){var y,o,h,b,p,a,c,l,e,w,k,v=i.hasData(n)&&i._data(n);if(v&&(a=v.events)){for(t=(t||"").match(s)||[""],p=t.length;p--;)if(h=hr.exec(t[p])||[],e=k=h[1],w=(h[2]||"").split(".").sort(),e){for(c=i.event.special[e]||{},e=(u?c.delegateType:c.bindType)||e,l=a[e]||[],h=h[2]&&RegExp("(^|\\.)"+w.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=y=l.length;y--;)o=l[y],!f&&k!==o.origType||r&&r.guid!==o.guid||h&&!h.test(o.namespace)||u&&u!==o.selector&&("**"!==u||!o.selector)||(l.splice(y,1),o.selector&&l.delegateCount--,c.remove&&c.remove.call(n,o));b&&!l.length&&(c.teardown&&c.teardown.call(n,w,v.handle)!==!1||i.removeEvent(n,e,v.handle),delete a[e])}else for(e in a)i.event.remove(n,e+t[p],r,u,!0);i.isEmptyObject(a)&&(delete v.handle,i._removeData(n,"events"))}},trigger:function(u,f,e,o){var a,v,s,w,l,c,b,p=[e||r],h=k.call(u,"type")?u.type:u,y=k.call(u,"namespace")?u.namespace.split("."):[];if(s=c=e=e||r,3!==e.nodeType&&8!==e.nodeType&&!sr.test(h+i.event.triggered)&&(h.indexOf(".")>=0&&(y=h.split("."),h=y.shift(),y.sort()),v=0>h.indexOf(":")&&"on"+h,u=u[i.expando]?u:new i.Event(h,"object"==typeof u&&u),u.isTrigger=o?2:3,u.namespace=y.join("."),u.namespace_re=u.namespace?RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u.result=t,u.target||(u.target=e),f=null==f?[u]:i.makeArray(f,[u]),l=i.event.special[h]||{},o||!l.trigger||l.trigger.apply(e,f)!==!1)){if(!o&&!l.noBubble&&!i.isWindow(e)){for(w=l.delegateType||h,sr.test(w+h)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(e.ownerDocument||r)&&p.push(c.defaultView||c.parentWindow||n)}for(b=0;(s=p[b++])&&!u.isPropagationStopped();)u.type=b>1?w:l.bindType||h,a=(i._data(s,"events")||{})[u.type]&&i._data(s,"handle"),a&&a.apply(s,f),a=v&&s[v],a&&i.acceptData(s)&&a.apply&&a.apply(s,f)===!1&&u.preventDefault();if(u.type=h,!o&&!u.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),f)===!1)&&i.acceptData(e)&&v&&e[h]&&!i.isWindow(e)){c=e[v];c&&(e[v]=null);i.event.triggered=h;try{e[h]()}catch(d){}i.event.triggered=t;c&&(e[v]=c)}return u.result}},dispatch:function(n){n=i.event.fix(n);var o,e,r,u,s,h=[],c=l.call(arguments),a=(i._data(this,"events")||{})[n.type]||[],f=i.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!f.preDispatch||f.preDispatch.call(this,n)!==!1){for(h=i.event.handlers.call(this,n,a),o=0;(u=h[o++])&&!n.isPropagationStopped();)for(n.currentTarget=u.elem,s=0;(r=u.handlers[s++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(r.namespace))&&(n.handleObj=r,n.data=r.data,e=((i.event.special[r.origType]||{}).handle||r.handler).apply(u.elem,c),e!==t&&(n.result=e)===!1&&(n.preventDefault(),n.stopPropagation()));return f.postDispatch&&f.postDispatch.call(this,n),n.result}},handlers:function(n,r){var e,o,f,s,c=[],h=r.delegateCount,u=n.target;if(h&&u.nodeType&&(!n.button||"click"!==n.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==n.type)){for(f=[],s=0;h>s;s++)o=r[s],e=o.selector+" ",f[e]===t&&(f[e]=o.needsContext?i(e,this).index(u)>=0:i.find(e,this,null,[u]).length),f[e]&&f.push(o);f.length&&c.push({elem:u,handlers:f})}return r.length>h&&c.push({elem:this,handlers:r.slice(h)}),c},fix:function(n){if(n[i.expando])return n;var e,o,s,u=n.type,f=n,t=this.fixHooks[u];for(t||(this.fixHooks[u]=t=ee.test(u)?this.mouseHooks:fe.test(u)?this.keyHooks:{}),s=t.props?this.props.concat(t.props):this.props,n=new i.Event(f),e=s.length;e--;)o=s[e],n[o]=f[o];return n.target||(n.target=f.srcElement||r),3===n.target.nodeType&&(n.target=n.target.parentNode),n.metaKey=!!n.metaKey,t.filter?t.filter(n,f):n},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(n,t){return null==n.which&&(n.which=null!=t.charCode?t.charCode:t.keyCode),n}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(n,i){var u,o,f,e=i.button,s=i.fromElement;return null==n.pageX&&null!=i.clientX&&(o=n.target.ownerDocument||r,f=o.documentElement,u=o.body,n.pageX=i.clientX+(f&&f.scrollLeft||u&&u.scrollLeft||0)-(f&&f.clientLeft||u&&u.clientLeft||0),n.pageY=i.clientY+(f&&f.scrollTop||u&&u.scrollTop||0)-(f&&f.clientTop||u&&u.clientTop||0)),!n.relatedTarget&&s&&(n.relatedTarget=s===n.target?i.toElement:s),n.which||e===t||(n.which=1&e?1:2&e?3:4&e?2:0),n}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cr()&&this.focus)try{return this.focus(),!1}catch(n){}},delegateType:"focusin"},blur:{trigger:function(){return this===cr()&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},click:{trigger:function(){return i.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t},_default:function(n){return i.nodeName(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==t&&(n.originalEvent.returnValue=n.result)}}},simulate:function(n,t,r,u){var f=i.extend(new i.Event,r,{type:n,isSimulated:!0,originalEvent:{}});u?i.event.trigger(f,null,t):i.event.dispatch.call(t,f);f.isDefaultPrevented()&&r.preventDefault()}};i.removeEvent=r.removeEventListener?function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i,!1)}:function(n,t,i){var r="on"+t;n.detachEvent&&(typeof n[r]===o&&(n[r]=null),n.detachEvent(r,i))};i.Event=function(n,r){return this instanceof i.Event?(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.returnValue===!1||n.getPreventDefault&&n.getPreventDefault()?ct:g):this.type=n,r&&i.extend(this,r),this.timeStamp=n&&n.timeStamp||i.now(),this[i.expando]=!0,t):new i.Event(n,r)};i.Event.prototype={isDefaultPrevented:g,isPropagationStopped:g,isImmediatePropagationStopped:g,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=ct;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=ct;n&&(n.stopPropagation&&n.stopPropagation(),n.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ct;this.stopPropagation()}};i.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return(!r||r!==f&&!i.contains(f,r))&&(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});i.support.submitBubbles||(i.event.special.submit={setup:function(){return i.nodeName(this,"form")?!1:(i.event.add(this,"click._submit keypress._submit",function(n){var u=n.target,r=i.nodeName(u,"input")||i.nodeName(u,"button")?u.form:t;r&&!i._data(r,"submitBubbles")&&(i.event.add(r,"submit._submit",function(n){n._submit_bubble=!0}),i._data(r,"submitBubbles",!0))}),t)},postDispatch:function(n){n._submit_bubble&&(delete n._submit_bubble,this.parentNode&&!n.isTrigger&&i.event.simulate("submit",this.parentNode,n,!0))},teardown:function(){return i.nodeName(this,"form")?!1:(i.event.remove(this,"._submit"),t)}});i.support.changeBubbles||(i.event.special.change={setup:function(){return ui.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(i.event.add(this,"propertychange._change",function(n){"checked"===n.originalEvent.propertyName&&(this._just_changed=!0)}),i.event.add(this,"click._change",function(n){this._just_changed&&!n.isTrigger&&(this._just_changed=!1);i.event.simulate("change",this,n,!0)})),!1):(i.event.add(this,"beforeactivate._change",function(n){var t=n.target;ui.test(t.nodeName)&&!i._data(t,"changeBubbles")&&(i.event.add(t,"change._change",function(n){!this.parentNode||n.isSimulated||n.isTrigger||i.event.simulate("change",this.parentNode,n,!0)}),i._data(t,"changeBubbles",!0))}),t)},handle:function(n){var i=n.target;return this!==i||n.isSimulated||n.isTrigger||"radio"!==i.type&&"checkbox"!==i.type?n.handleObj.handler.apply(this,arguments):t},teardown:function(){return i.event.remove(this,"._change"),!ui.test(this.nodeName)}});i.support.focusinBubbles||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=0,f=function(n){i.event.simulate(t,n.target,i.event.fix(n),!0)};i.event.special[t]={setup:function(){0==u++&&r.addEventListener(n,f,!0)},teardown:function(){0==--u&&r.removeEventListener(n,f,!0)}}});i.fn.extend({on:function(n,r,u,f,e){var s,o;if("object"==typeof n){"string"!=typeof r&&(u=u||r,r=t);for(s in n)this.on(s,r,u,n[s],e);return this}if(null==u&&null==f?(f=r,u=r=t):null==f&&("string"==typeof r?(f=u,u=t):(f=u,u=r,r=t)),f===!1)f=g;else if(!f)return this;return 1===e&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),this.each(function(){i.event.add(this,n,f,u,r)})},one:function(n,t,i,r){return this.on(n,t,i,r,1)},off:function(n,r,u){var f,e;if(n&&n.preventDefault&&n.handleObj)return f=n.handleObj,i(n.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"==typeof n){for(e in n)this.off(e,r,n[e]);return this}return(r===!1||"function"==typeof r)&&(u=r,r=t),u===!1&&(u=g),this.each(function(){i.event.remove(this,n,u,r)})},trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,r){var u=this[0];return u?i.event.trigger(n,r,u,!0):t}});var oe=/^.[^:#\[\.,]*$/,se=/^(?:parents|prev(?:Until|All))/,lr=i.expr.match.needsContext,he={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({find:function(n){var t,r=[],u=this,f=u.length;if("string"!=typeof n)return this.pushStack(i(n).filter(function(){for(t=0;f>t;t++)if(i.contains(u[t],this))return!0}));for(t=0;f>t;t++)i.find(n,u[t],r);return r=this.pushStack(f>1?i.unique(r):r),r.selector=this.selector?this.selector+" "+n:n,r},has:function(n){var t,r=i(n,this),u=r.length;return this.filter(function(){for(t=0;u>t;t++)if(i.contains(this,r[t]))return!0})},not:function(n){return this.pushStack(fi(this,n||[],!0))},filter:function(n){return this.pushStack(fi(this,n||[],!1))},is:function(n){return!!fi(this,"string"==typeof n&&lr.test(n)?i(n):n||[],!1).length},closest:function(n,t){for(var r,f=0,o=this.length,u=[],e=lr.test(n)||"string"!=typeof n?i(n,t||this.context):0;o>f;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(11>r.nodeType&&(e?e.index(r)>-1:1===r.nodeType&&i.find.matchesSelector(r,n))){r=u.push(r);break}return this.pushStack(u.length>1?i.unique(u):u)},index:function(n){return n?"string"==typeof n?i.inArray(this[0],i(n)):i.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){var r="string"==typeof n?i(n,t):i.makeArray(n&&n.nodeType?[n]:n),u=i.merge(this.get(),r);return this.pushStack(i.unique(u))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return i.dir(n,"parentNode")},parentsUntil:function(n,t,r){return i.dir(n,"parentNode",r)},next:function(n){return ar(n,"nextSibling")},prev:function(n){return ar(n,"previousSibling")},nextAll:function(n){return i.dir(n,"nextSibling")},prevAll:function(n){return i.dir(n,"previousSibling")},nextUntil:function(n,t,r){return i.dir(n,"nextSibling",r)},prevUntil:function(n,t,r){return i.dir(n,"previousSibling",r)},siblings:function(n){return i.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return i.sibling(n.firstChild)},contents:function(n){return i.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:i.merge([],n.childNodes)}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return"Until"!==n.slice(-5)&&(u=r),u&&"string"==typeof u&&(f=i.filter(u,f)),this.length>1&&(he[n]||(f=i.unique(f)),se.test(n)&&(f=f.reverse())),this.pushStack(f)}});i.extend({filter:function(n,t,r){var u=t[0];return r&&(n=":not("+n+")"),1===t.length&&1===u.nodeType?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return 1===n.nodeType}))},dir:function(n,r,u){for(var e=[],f=n[r];f&&9!==f.nodeType&&(u===t||1!==f.nodeType||!i(f).is(u));)1===f.nodeType&&e.push(f),f=f[r];return e},sibling:function(n,t){for(var i=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&i.push(n);return i}});var yr="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ce=/ jQuery\d+="(?:null|\d+)"/g,pr=RegExp("<(?:"+yr+")[\\s/>]","i"),ei=/^\s+/,wr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,br=/<([\w:]+)/,kr=/<tbody/i,le=/<|&#?\w+;/,ae=/<(?:script|style|link)/i,oi=/^(?:checkbox|radio)$/i,ve=/checked\s*(?:[^=]|=\s*.checked.)/i,dr=/^$|\/(?:java|ecma)script/i,ye=/^true\/(.*)/,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,e={option:[1,"<select multiple='multiple'>","<\/select>"],legend:[1,"<fieldset>","<\/fieldset>"],area:[1,"<map>","<\/map>"],param:[1,"<object>","<\/object>"],thead:[1,"<table>","<\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:i.support.htmlSerialize?[0,"",""]:[1,"X<div>","<\/div>"]},we=vr(r),si=we.appendChild(r.createElement("div"));e.optgroup=e.option;e.tbody=e.tfoot=e.colgroup=e.caption=e.thead;e.th=e.td;i.fn.extend({text:function(n){return i.access(this,function(n){return n===t?i.text(this):this.empty().append((this[0]&&this[0].ownerDocument||r).createTextNode(n))},null,n,arguments.length)},append:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=gr(this,n);t.appendChild(n)}})},prepend:function(){return this.domManip(arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=gr(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return this.domManip(arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},remove:function(n,t){for(var r,e=n?i.filter(n,this):this,f=0;null!=(r=e[f]);f++)t||1!==r.nodeType||i.cleanData(u(r)),r.parentNode&&(t&&i.contains(r.ownerDocument,r)&&hi(u(r,"script")),r.parentNode.removeChild(r));return this},empty:function(){for(var n,t=0;null!=(n=this[t]);t++){for(1===n.nodeType&&i.cleanData(u(n,!1));n.firstChild;)n.removeChild(n.firstChild);n.options&&i.nodeName(n,"select")&&(n.options.length=0)}return this},clone:function(n,t){return n=null==n?!1:n,t=null==t?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return i.access(this,function(n){var r=this[0]||{},f=0,o=this.length;if(n===t)return 1===r.nodeType?r.innerHTML.replace(ce,""):t;if(!("string"!=typeof n||ae.test(n)||!i.support.htmlSerialize&&pr.test(n)||!i.support.leadingWhitespace&&ei.test(n)||e[(br.exec(n)||["",""])[1].toLowerCase()])){n=n.replace(wr,"<$1><\/$2>");try{for(;o>f;f++)r=this[f]||{},1===r.nodeType&&(i.cleanData(u(r,!1)),r.innerHTML=n);r=0}catch(s){}}r&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var t=i.map(this,function(n){return[n.nextSibling,n.parentNode]}),n=0;return this.domManip(arguments,function(r){var u=t[n++],f=t[n++];f&&(u&&u.parentNode!==f&&(u=this.nextSibling),i(this).remove(),f.insertBefore(r,u))},!0),n?this:this.remove()},detach:function(n){return this.remove(n,!0)},domManip:function(n,t,r){n=di.apply([],n);var h,f,c,o,v,s,e=0,l=this.length,p=this,w=l-1,a=n[0],y=i.isFunction(a);if(y||!(1>=l||"string"!=typeof a||i.support.checkClone)&&ve.test(a))return this.each(function(i){var u=p.eq(i);y&&(n[0]=a.call(this,i,u.html()));u.domManip(n,t,r)});if(l&&(s=i.buildFragment(n,this[0].ownerDocument,!1,!r&&this),h=s.firstChild,1===s.childNodes.length&&(s=h),h)){for(o=i.map(u(s,"script"),nu),c=o.length;l>e;e++)f=s,e!==w&&(f=i.clone(f,!0,!0),c&&i.merge(o,u(f,"script"))),t.call(this[e],f,e);if(c)for(v=o[o.length-1].ownerDocument,i.map(o,tu),e=0;c>e;e++)f=o[e],dr.test(f.type||"")&&!i._data(f,"globalEval")&&i.contains(v,f)&&(f.src?i._evalUrl(f.src):i.globalEval((f.text||f.textContent||f.innerHTML||"").replace(pe,"")));s=h=null}return this}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,r=0,f=[],e=i(n),o=e.length-1;o>=r;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),kt.apply(f,u.get());return this.pushStack(f)}});i.extend({clone:function(n,t,r){var f,h,o,e,s,c=i.contains(n.ownerDocument,n);if(i.support.html5Clone||i.isXMLDoc(n)||!pr.test("<"+n.nodeName+">")?o=n.cloneNode(!0):(si.innerHTML=n.outerHTML,si.removeChild(o=si.firstChild)),!(i.support.noCloneEvent&&i.support.noCloneChecked||1!==n.nodeType&&11!==n.nodeType||i.isXMLDoc(n)))for(f=u(o),s=u(n),e=0;null!=(h=s[e]);++e)f[e]&&be(h,f[e]);if(t)if(r)for(s=s||u(n),f=f||u(o),e=0;null!=(h=s[e]);e++)iu(h,f[e]);else iu(n,o);return f=u(o,"script"),f.length>0&&hi(f,!c&&u(n,"script")),f=s=h=null,o},buildFragment:function(n,t,r,f){for(var h,o,w,s,y,p,l,b=n.length,a=vr(t),c=[],v=0;b>v;v++)if(o=n[v],o||0===o)if("object"===i.type(o))i.merge(c,o.nodeType?[o]:o);else if(le.test(o)){for(s=s||a.appendChild(t.createElement("div")),y=(br.exec(o)||["",""])[1].toLowerCase(),l=e[y]||e._default,s.innerHTML=l[1]+o.replace(wr,"<$1><\/$2>")+l[2],h=l[0];h--;)s=s.lastChild;if(!i.support.leadingWhitespace&&ei.test(o)&&c.push(t.createTextNode(ei.exec(o)[0])),!i.support.tbody)for(o="table"!==y||kr.test(o)?"<table>"!==l[1]||kr.test(o)?0:s:s.firstChild,h=o&&o.childNodes.length;h--;)i.nodeName(p=o.childNodes[h],"tbody")&&!p.childNodes.length&&o.removeChild(p);for(i.merge(c,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=a.lastChild}else c.push(t.createTextNode(o));for(s&&a.removeChild(s),i.support.appendChecked||i.grep(u(c,"input"),ke),v=0;o=c[v++];)if((!f||-1===i.inArray(o,f))&&(w=i.contains(o.ownerDocument,o),s=u(a.appendChild(o),"script"),w&&hi(s),r))for(h=0;o=s[h++];)dr.test(o.type||"")&&r.push(o);return s=null,a},cleanData:function(n,t){for(var r,f,u,e,c=0,s=i.expando,h=i.cache,l=i.support.deleteExpando,a=i.event.special;null!=(r=n[c]);c++)if((t||i.acceptData(r))&&(u=r[s],e=u&&h[u])){if(e.events)for(f in e.events)a[f]?i.event.remove(r,f):i.removeEvent(r,f,e.handle);h[u]&&(delete h[u],l?delete r[s]:typeof r.removeAttribute!==o?r.removeAttribute(s):r[s]=null,b.push(u))}},_evalUrl:function(n){return i.ajax({url:n,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})}});i.fn.extend({wrapAll:function(n){if(i.isFunction(n))return this.each(function(t){i(this).wrapAll(n.call(this,t))});if(this[0]){var t=i(n,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]);t.map(function(){for(var n=this;n.firstChild&&1===n.firstChild.nodeType;)n=n.firstChild;return n}).append(this)}return this},wrapInner:function(n){return i.isFunction(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=i.isFunction(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(){return this.parent().each(function(){i.nodeName(this,"body")||i(this).replaceWith(this.childNodes)}).end()}});var rt,v,y,ci=/alpha\([^)]*\)/i,de=/opacity\s*=\s*([^)]*)/,ge=/^(top|right|bottom|left)$/,no=/^(none|table(?!-c[ea]).+)/,ru=/^margin/,to=RegExp("^("+st+")(.*)$","i"),lt=RegExp("^("+st+")(?!px)[a-z%]+$","i"),io=RegExp("^([+-])=("+st+")","i"),uu={BODY:"block"},ro={position:"absolute",visibility:"hidden",display:"block"},fu={letterSpacing:0,fontWeight:400},p=["Top","Right","Bottom","Left"],eu=["Webkit","O","Moz","ms"];i.fn.extend({css:function(n,r){return i.access(this,function(n,r,u){var e,o,s={},f=0;if(i.isArray(r)){for(o=v(n),e=r.length;e>f;f++)s[r[f]]=i.css(n,r[f],!1,o);return s}return u!==t?i.style(n,r,u):i.css(n,r)},n,r,arguments.length>1)},show:function(){return su(this,!0)},hide:function(){return su(this)},toggle:function(n){return"boolean"==typeof n?n?this.show():this.hide():this.each(function(){ut(this)?i(this).show():i(this).hide()})}});i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=y(n,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:i.support.cssFloat?"cssFloat":"styleFloat"},style:function(n,r,u,f){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var o,s,e,h=i.camelCase(r),c=n.style;if(r=i.cssProps[h]||(i.cssProps[h]=ou(c,h)),e=i.cssHooks[r]||i.cssHooks[h],u===t)return e&&"get"in e&&(o=e.get(n,!1,f))!==t?o:c[r];if(s=typeof u,"string"===s&&(o=io.exec(u))&&(u=(o[1]+1)*o[2]+parseFloat(i.css(n,r)),s="number"),!(null==u||"number"===s&&isNaN(u)||("number"!==s||i.cssNumber[h]||(u+="px"),i.support.clearCloneStyle||""!==u||0!==r.indexOf("background")||(c[r]="inherit"),e&&"set"in e&&(u=e.set(n,u,f))===t)))try{c[r]=u}catch(l){}}},css:function(n,r,u,f){var h,e,o,s=i.camelCase(r);return r=i.cssProps[s]||(i.cssProps[s]=ou(n.style,s)),o=i.cssHooks[r]||i.cssHooks[s],o&&"get"in o&&(e=o.get(n,!0,u)),e===t&&(e=y(n,r,f)),"normal"===e&&r in fu&&(e=fu[r]),""===u||u?(h=parseFloat(e),u===!0||i.isNumeric(h)?h||0:e):e}});n.getComputedStyle?(v=function(t){return n.getComputedStyle(t,null)},y=function(n,r,u){var s,h,c,o=u||v(n),e=o?o.getPropertyValue(r)||o[r]:t,f=n.style;return o&&(""!==e||i.contains(n.ownerDocument,n)||(e=i.style(n,r)),lt.test(e)&&ru.test(r)&&(s=f.width,h=f.minWidth,c=f.maxWidth,f.minWidth=f.maxWidth=f.width=e,e=o.width,f.width=s,f.minWidth=h,f.maxWidth=c)),e}):r.documentElement.currentStyle&&(v=function(n){return n.currentStyle},y=function(n,i,r){var s,e,o,h=r||v(n),u=h?h[i]:t,f=n.style;return null==u&&f&&f[i]&&(u=f[i]),lt.test(u)&&!ge.test(i)&&(s=f.left,e=n.runtimeStyle,o=e&&e.left,o&&(e.left=n.currentStyle.left),f.left="fontSize"===i?"1em":u,u=f.pixelLeft+"px",f.left=s,o&&(e.left=o)),""===u?"auto":u});i.each(["height","width"],function(n,r){i.cssHooks[r]={get:function(n,u,f){return u?0===n.offsetWidth&&no.test(i.css(n,"display"))?i.swap(n,ro,function(){return lu(n,r,f)}):lu(n,r,f):t},set:function(n,t,u){var f=u&&v(n);return hu(n,t,u?cu(n,r,u,i.support.boxSizing&&"border-box"===i.css(n,"boxSizing",!1,f),f):0)}}});i.support.opacity||(i.cssHooks.opacity={get:function(n,t){return de.test((t&&n.currentStyle?n.currentStyle.filter:n.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(n,t){var r=n.style,u=n.currentStyle,e=i.isNumeric(t)?"alpha(opacity="+100*t+")":"",f=u&&u.filter||r.filter||"";r.zoom=1;(t>=1||""===t)&&""===i.trim(f.replace(ci,""))&&r.removeAttribute&&(r.removeAttribute("filter"),""===t||u&&!u.filter)||(r.filter=ci.test(f)?f.replace(ci,e):f+" "+e)}});i(function(){i.support.reliableMarginRight||(i.cssHooks.marginRight={get:function(n,r){return r?i.swap(n,{display:"inline-block"},y,[n,"marginRight"]):t}});!i.support.pixelPosition&&i.fn.position&&i.each(["top","left"],function(n,r){i.cssHooks[r]={get:function(n,u){return u?(u=y(n,r),lt.test(u)?i(n).position()[r]+"px":u):t}}})});i.expr&&i.expr.filters&&(i.expr.filters.hidden=function(n){return 0>=n.offsetWidth&&0>=n.offsetHeight||!i.support.reliableHiddenOffsets&&"none"===(n.style&&n.style.display||i.css(n,"display"))},i.expr.filters.visible=function(n){return!i.expr.filters.hidden(n)});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u="string"==typeof i?i.split(" "):[i];4>r;r++)f[n+p[r]+t]=u[r]||u[r-2]||u[0];return f}};ru.test(n)||(i.cssHooks[n+t].set=hu)});var uo=/%20/g,fo=/\[\]$/,yu=/\r?\n/g,eo=/^(?:submit|button|image|reset|file)$/i,oo=/^(?:input|select|textarea|keygen)/i;i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&oo.test(this.nodeName)&&!eo.test(n)&&(this.checked||!oi.test(n))}).map(function(n,t){var r=i(this).val();return null==r?null:i.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(yu,"\r\n")}}):{name:t.name,value:r.replace(yu,"\r\n")}}).get()}});i.param=function(n,r){var u,f=[],e=function(n,t){t=i.isFunction(t)?t():null==t?"":t;f[f.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(r===t&&(r=i.ajaxSettings&&i.ajaxSettings.traditional),i.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(u in n)li(u,n[u],r,e);return f.join("&").replace(uo,"+")};i.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}});i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)},bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return 1===arguments.length?this.off(n,"**"):this.off(t,n||"**",i)}});var w,c,ai=i.now(),vi=/\?/,so=/#.*$/,pu=/([?&])_=[^&]*/,ho=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,co=/^(?:GET|HEAD)$/,lo=/^\/\//,wu=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bu=i.fn.load,ku={},yi={},du="*/".concat("*");try{c=hf.href}catch(go){c=r.createElement("a");c.href="";c=c.href}w=wu.exec(c.toLowerCase())||[];i.fn.load=function(n,r,u){if("string"!=typeof n&&bu)return bu.apply(this,arguments);var f,s,h,e=this,o=n.indexOf(" ");return o>=0&&(f=n.slice(o,n.length),n=n.slice(0,o)),i.isFunction(r)?(u=r,r=t):r&&"object"==typeof r&&(h="POST"),e.length>0&&i.ajax({url:n,type:h,dataType:"html",data:r}).done(function(n){s=arguments;e.html(f?i("<div>").append(i.parseHTML(n)).find(f):n)}).complete(u&&function(n,t){e.each(u,s||[n.responseText,t,n])}),this};i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}});i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:c,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(w[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":du,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":i.parseJSON,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?pi(pi(n,i.ajaxSettings),t):pi(i.ajaxSettings,n)},ajaxPrefilter:gu(ku),ajaxTransport:gu(yi),ajax:function(n,r){function k(n,r,s,c){var a,rt,k,p,w,l=r;2!==o&&(o=2,g&&clearTimeout(g),y=t,d=c||"",f.readyState=n>0?4:0,a=n>=200&&300>n||304===n,s&&(p=ao(u,f,s)),p=vo(u,p,f,a),a?(u.ifModified&&(w=f.getResponseHeader("Last-Modified"),w&&(i.lastModified[e]=w),w=f.getResponseHeader("etag"),w&&(i.etag[e]=w)),204===n||"HEAD"===u.type?l="nocontent":304===n?l="notmodified":(l=p.state,rt=p.data,k=p.error,a=!k)):(k=l,(n||!l)&&(l="error",0>n&&(n=0))),f.status=n,f.statusText=(r||l)+"",a?tt.resolveWith(h,[rt,l,f]):tt.rejectWith(h,[f,l,k]),f.statusCode(b),b=t,v&&nt.trigger(a?"ajaxSuccess":"ajaxError",[f,u,a?rt:k]),it.fireWith(h,[f,l]),v&&(nt.trigger("ajaxComplete",[f,u]),--i.active||i.event.trigger("ajaxStop")))}"object"==typeof n&&(r=n,n=t);r=r||{};var l,a,e,d,g,v,y,p,u=i.ajaxSetup({},r),h=u.context||u,nt=u.context&&(h.nodeType||h.jquery)?i(h):i.event,tt=i.Deferred(),it=i.Callbacks("once memory"),b=u.statusCode||{},rt={},ut={},o=0,ft="canceled",f={readyState:0,getResponseHeader:function(n){var t;if(2===o){if(!p)for(p={};t=ho.exec(d);)p[t[1].toLowerCase()]=t[2];t=p[n.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===o?d:null},setRequestHeader:function(n,t){var i=n.toLowerCase();return o||(n=ut[i]=ut[i]||n,rt[n]=t),this},overrideMimeType:function(n){return o||(u.mimeType=n),this},statusCode:function(n){var t;if(n)if(2>o)for(t in n)b[t]=[b[t],n[t]];else f.always(n[f.status]);return this},abort:function(n){var t=n||ft;return y&&y.abort(t),k(0,t),this}};if(tt.promise(f).complete=it.add,f.success=f.done,f.error=f.fail,u.url=((n||u.url||c)+"").replace(so,"").replace(lo,w[1]+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=i.trim(u.dataType||"*").toLowerCase().match(s)||[""],null==u.crossDomain&&(l=wu.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===w[1]&&l[2]===w[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(w[3]||("http:"===w[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=i.param(u.data,u.traditional)),nf(ku,u,r,f),2===o)return f;v=u.global;v&&0==i.active++&&i.event.trigger("ajaxStart");u.type=u.type.toUpperCase();u.hasContent=!co.test(u.type);e=u.url;u.hasContent||(u.data&&(e=u.url+=(vi.test(e)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=pu.test(e)?e.replace(pu,"$1_="+ai++):e+(vi.test(e)?"&":"?")+"_="+ai++));u.ifModified&&(i.lastModified[e]&&f.setRequestHeader("If-Modified-Since",i.lastModified[e]),i.etag[e]&&f.setRequestHeader("If-None-Match",i.etag[e]));(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&f.setRequestHeader("Content-Type",u.contentType);f.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+du+"; q=0.01":""):u.accepts["*"]);for(a in u.headers)f.setRequestHeader(a,u.headers[a]);if(u.beforeSend&&(u.beforeSend.call(h,f,u)===!1||2===o))return f.abort();ft="abort";for(a in{success:1,error:1,complete:1})f[a](u[a]);if(y=nf(yi,u,r,f)){f.readyState=1;v&&nt.trigger("ajaxSend",[f,u]);u.async&&u.timeout>0&&(g=setTimeout(function(){f.abort("timeout")},u.timeout));try{o=1;y.send(rt,k)}catch(et){if(!(2>o))throw et;k(-1,et)}}else k(-1,"No Transport");return f},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,r){return i.get(n,t,r,"script")}});i.each(["get","post"],function(n,r){i[r]=function(n,u,f,e){return i.isFunction(u)&&(e=e||f,f=u,u=t),i.ajax({url:n,type:r,dataType:e,data:u,success:f})}});i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(n){return i.globalEval(n),n}}});i.ajaxPrefilter("script",function(n){n.cache===t&&(n.cache=!1);n.crossDomain&&(n.type="GET",n.global=!1)});i.ajaxTransport("script",function(n){if(n.crossDomain){var u,f=r.head||i("head")[0]||r.documentElement;return{send:function(t,i){u=r.createElement("script");u.async=!0;n.scriptCharset&&(u.charset=n.scriptCharset);u.src=n.url;u.onload=u.onreadystatechange=function(n,t){(t||!u.readyState||/loaded|complete/.test(u.readyState))&&(u.onload=u.onreadystatechange=null,u.parentNode&&u.parentNode.removeChild(u),u=null,t||i(200,"success"))};f.insertBefore(u,f.firstChild)},abort:function(){u&&u.onload(t,!0)}}}});wi=[];at=/(=)\?(?=&|$)|\?\?/;i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=wi.pop()||i.expando+"_"+ai++;return this[n]=!0,n}});i.ajaxPrefilter("json jsonp",function(r,u,f){var e,s,o,h=r.jsonp!==!1&&(at.test(r.url)?"url":"string"==typeof r.data&&!(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&at.test(r.data)&&"data");return h||"jsonp"===r.dataTypes[0]?(e=r.jsonpCallback=i.isFunction(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,h?r[h]=r[h].replace(at,"$1"+e):r.jsonp!==!1&&(r.url+=(vi.test(r.url)?"&":"?")+r.jsonp+"="+e),r.converters["script json"]=function(){return o||i.error(e+" was not called"),o[0]},r.dataTypes[0]="json",s=n[e],n[e]=function(){o=arguments},f.always(function(){n[e]=s;r[e]&&(r.jsonpCallback=u.jsonpCallback,wi.push(e));o&&i.isFunction(s)&&s(o[0]);o=s=t}),"script"):t});tf=0;vt=n.ActiveXObject&&function(){var n;for(n in nt)nt[n](t,!0)};i.ajaxSettings.xhr=n.ActiveXObject?function(){return!this.isLocal&&rf()||yo()}:rf;tt=i.ajaxSettings.xhr();i.support.cors=!!tt&&"withCredentials"in tt;tt=i.support.ajax=!!tt;tt&&i.ajaxTransport(function(r){if(!r.crossDomain||i.support.cors){var u;return{send:function(f,e){var h,s,o=r.xhr();if(r.username?o.open(r.type,r.url,r.async,r.username,r.password):o.open(r.type,r.url,r.async),r.xhrFields)for(s in r.xhrFields)o[s]=r.xhrFields[s];r.mimeType&&o.overrideMimeType&&o.overrideMimeType(r.mimeType);r.crossDomain||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest");try{for(s in f)o.setRequestHeader(s,f[s])}catch(c){}o.send(r.hasContent&&r.data||null);u=function(n,f){var s,a,l,c;try{if(u&&(f||4===o.readyState))if(u=t,h&&(o.onreadystatechange=i.noop,vt&&delete nt[h]),f)4!==o.readyState&&o.abort();else{c={};s=o.status;a=o.getAllResponseHeaders();"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(y){l=""}s||!r.isLocal||r.crossDomain?1223===s&&(s=204):s=c.text?200:404}}catch(v){f||e(-1,v)}c&&e(s,l,c,a)};r.async?4===o.readyState?setTimeout(u):(h=++tf,vt&&(nt||(nt={},i(n).unload(vt)),nt[h]=u),o.onreadystatechange=u):u()},abort:function(){u&&u(t,!0)}}}});var it,yt,po=/^(?:toggle|show|hide)$/,uf=RegExp("^(?:([+-])=|)("+st+")([a-z%]*)$","i"),wo=/queueHooks$/,pt=[ko],ft={"*":[function(n,t){var f=this.createTween(n,t),s=f.cur(),r=uf.exec(t),e=r&&r[3]||(i.cssNumber[n]?"":"px"),u=(i.cssNumber[n]||"px"!==e&&+s)&&uf.exec(i.css(f.elem,n)),o=1,h=20;if(u&&u[3]!==e){e=e||u[3];r=r||[];u=+s||1;do o=o||".5",u/=o,i.style(f.elem,n,u+e);while(o!==(o=f.cur()/s)&&1!==o&&--h)}return r&&(u=f.start=+u||+s||0,f.unit=e,f.end=r[1]?u+(r[1]+1)*r[2]:+r[2]),f}]};i.Animation=i.extend(of,{tweener:function(n,t){i.isFunction(n)?(t=n,n=["*"]):n=n.split(" ");for(var r,u=0,f=n.length;f>u;u++)r=n[u],ft[r]=ft[r]||[],ft[r].unshift(t)},prefilter:function(n,t){t?pt.unshift(n):pt.push(n)}});i.Tween=f;f.prototype={constructor:f,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||"swing";this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=f.propHooks[this.prop];return n&&n.get?n.get(this):f.propHooks._default.get(this)},run:function(n){var r,t=f.propHooks[this.prop];return this.pos=r=this.options.duration?i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):n,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),t&&t.set?t.set(this):f.propHooks._default.set(this),this}};f.prototype.init.prototype=f.prototype;f.propHooks={_default:{get:function(n){var t;return null==n.elem[n.prop]||n.elem.style&&null!=n.elem.style[n.prop]?(t=i.css(n.elem,n.prop,""),t&&"auto"!==t?t:0):n.elem[n.prop]},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.style&&(null!=n.elem.style[i.cssProps[n.prop]]||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};f.propHooks.scrollTop=f.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return null==n||"boolean"==typeof n?r.apply(this,arguments):this.animate(wt(t,!0),n,i,u)}});i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(ut).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,r,u){var o=i.isEmptyObject(n),e=i.speed(t,r,u),f=function(){var t=of(this,i.extend({},n),e);(o||i._data(this,"finish"))&&t.stop(!0)};return f.finish=f,o||e.queue===!1?this.each(f):this.queue(e.queue,f)},stop:function(n,r,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return"string"!=typeof n&&(u=r,r=n,n=t),r&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var o=!0,t=null!=n&&n+"queueHooks",e=i.timers,r=i._data(this);if(t)r[t]&&r[t].stop&&f(r[t]);else for(t in r)r[t]&&r[t].stop&&wo.test(t)&&f(r[t]);for(t=e.length;t--;)e[t].elem!==this||null!=n&&e[t].queue!==n||(e[t].anim.stop(u),o=!1,e.splice(t,1));(o||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,f=i._data(this),r=f[n+"queue"],e=f[n+"queueHooks"],u=i.timers,o=r?r.length:0;for(f.finish=!0,i.queue(this,n,[]),e&&e.stop&&e.stop.call(this,!0),t=u.length;t--;)u[t].elem===this&&u[t].queue===n&&(u[t].anim.stop(!0),u.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete f.finish})}});i.each({slideDown:wt("show"),slideUp:wt("hide"),slideToggle:wt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.speed=function(n,t,r){var u=n&&"object"==typeof n?i.extend({},n):{complete:r||!r&&t||i.isFunction(n)&&n,duration:n,easing:r&&t||t&&!i.isFunction(t)&&t};return u.duration=i.fx.off?0:"number"==typeof u.duration?u.duration:u.duration in i.fx.speeds?i.fx.speeds[u.duration]:i.fx.speeds._default,(null==u.queue||u.queue===!0)&&(u.queue="fx"),u.old=u.complete,u.complete=function(){i.isFunction(u.old)&&u.old.call(this);u.queue&&i.dequeue(this,u.queue)},u};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2}};i.timers=[];i.fx=f.prototype.init;i.fx.tick=function(){var u,n=i.timers,r=0;for(it=i.now();n.length>r;r++)u=n[r],u()||n[r]!==u||n.splice(r--,1);n.length||i.fx.stop();it=t};i.fx.timer=function(n){n()&&i.timers.push(n)&&i.fx.start()};i.fx.interval=13;i.fx.start=function(){yt||(yt=setInterval(i.fx.tick,i.fx.interval))};i.fx.stop=function(){clearInterval(yt);yt=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fx.step={};i.expr&&i.expr.filters&&(i.expr.filters.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length});i.fn.offset=function(n){if(arguments.length)return n===t?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r,e,f={top:0,left:0},u=this[0],s=u&&u.ownerDocument;if(s)return r=s.documentElement,i.contains(r,u)?(typeof u.getBoundingClientRect!==o&&(f=u.getBoundingClientRect()),e=sf(s),{top:f.top+(e.pageYOffset||r.scrollTop)-(r.clientTop||0),left:f.left+(e.pageXOffset||r.scrollLeft)-(r.clientLeft||0)}):f};i.offset={setOffset:function(n,t,r){var f=i.css(n,"position");"static"===f&&(n.style.position="relative");var e=i(n),o=e.offset(),l=i.css(n,"top"),a=i.css(n,"left"),v=("absolute"===f||"fixed"===f)&&i.inArray("auto",[l,a])>-1,u={},s={},h,c;v?(s=e.position(),h=s.top,c=s.left):(h=parseFloat(l)||0,c=parseFloat(a)||0);i.isFunction(t)&&(t=t.call(n,r,o));null!=t.top&&(u.top=t.top-o.top+h);null!=t.left&&(u.left=t.left-o.left+c);"using"in t?t.using.call(n,u):e.css(u)}};i.fn.extend({position:function(){if(this[0]){var n,r,t={top:0,left:0},u=this[0];return"fixed"===i.css(u,"position")?r=u.getBoundingClientRect():(n=this.offsetParent(),r=this.offset(),i.nodeName(n[0],"html")||(t=n.offset()),t.top+=i.css(n[0],"borderTopWidth",!0),t.left+=i.css(n[0],"borderLeftWidth",!0)),{top:r.top-t.top-i.css(u,"marginTop",!0),left:r.left-t.left-i.css(u,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent||ki;n&&!i.nodeName(n,"html")&&"static"===i.css(n,"position");)n=n.offsetParent;return n||ki})}});i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,r){var u=/Y/.test(r);i.fn[n]=function(f){return i.access(this,function(n,f,e){var o=sf(n);return e===t?o?r in o?o[r]:o.document.documentElement[f]:n[f]:(o?o.scrollTo(u?i(o).scrollLeft():e,u?e:i(o).scrollTop()):n[f]=e,t)},n,f,arguments.length,null)}});i.each({Height:"height",Width:"width"},function(n,r){i.each({padding:"inner"+n,content:r,"":"outer"+n},function(u,f){i.fn[f]=function(f,e){var o=arguments.length&&(u||"boolean"!=typeof f),s=u||(f===!0||e===!0?"margin":"border");return i.access(this,function(r,u,f){var e;return i.isWindow(r)?r.document.documentElement["client"+n]:9===r.nodeType?(e=r.documentElement,Math.max(r.body["scroll"+n],e["scroll"+n],r.body["offset"+n],e["offset"+n],e["client"+n])):f===t?i.css(r,u,s):i.style(r,u,f,s)},r,o?f:t,o,null)}})});i.fn.size=function(){return this.length};i.fn.andSelf=i.fn.addBack;"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=i:(n.jQuery=n.$=i,"function"==typeof define&&define.amd&&define("jquery",[],function(){return i}))}(window),function(n){n.extend(n.fn,{validate:function(t){if(!this.length)return t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."),void 0;var i=n.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new n.validator(t,this[0]),n.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){i.settings.submitHandler&&(i.submitButton=t.target);n(t.target).hasClass("cancel")&&(i.cancelSubmit=!0);void 0!==n(t.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(t){function r(){var r;return i.settings.submitHandler?(i.submitButton&&(r=n("<input type='hidden'/>").attr("name",i.submitButton.name).val(n(i.submitButton).val()).appendTo(i.currentForm)),i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&r.remove(),!1):!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})),i)},valid:function(){if(n(this[0]).is("form"))return this.validate().form();var t=!0,i=n(this[0].form).validate();return this.each(function(){t=t&&i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return n.each(t.split(/\s/),function(n,t){i[t]=r.attr(t);r.removeAttr(t)}),i},rules:function(t,i){var r=this[0],o,u,h;if(t){var e=n.data(r.form,"validator").settings,s=e.rules,f=n.validator.staticRules(r);switch(t){case"add":n.extend(f,n.validator.normalizeRule(i));delete f.messages;s[r.name]=f;i.messages&&(e.messages[r.name]=n.extend(e.messages[r.name],i.messages));break;case"remove":return i?(o={},n.each(i.split(/\s/),function(n,t){o[t]=f[t];delete f[t]}),o):(delete s[r.name],f)}}return u=n.validator.normalizeRules(n.extend({},n.validator.classRules(r),n.validator.attributeRules(r),n.validator.dataRules(r),n.validator.staticRules(r)),r),u.required&&(h=u.required,delete u.required,u=n.extend({required:h},u)),u}});n.extend(n.expr[":"],{blank:function(t){return!n.trim(""+n(t).val())},filled:function(t){return!!n.trim(""+n(t).val())},unchecked:function(t){return!n(t).prop("checked")}});n.validator=function(t,i){this.settings=n.extend(!0,{},n.validator.defaults,t);this.currentForm=i;this.init()};n.validator.format=function(t,i){return 1===arguments.length?function(){var i=n.makeArray(arguments);return i.unshift(t),n.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)};n.extend(n.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:n([]),errorLabelContainer:n([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(n){this.lastActive=n;this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,n,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(n)).hide())},onfocusout:function(n){!this.checkable(n)&&(n.name in this.submitted||!this.optional(n))&&this.element(n)},onkeyup:function(n,t){(9!==t.which||""!==this.elementValue(n))&&(n.name in this.submitted||n===this.lastElement)&&this.element(n)},onclick:function(n){n.name in this.submitted?this.element(n):n.parentNode.name in this.submitted&&this.element(n.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):n(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):n(t).removeClass(i).addClass(r)}},setDefaults:function(t){n.extend(n.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:n.validator.format("Please enter no more than {0} characters."),minlength:n.validator.format("Please enter at least {0} characters."),rangelength:n.validator.format("Please enter a value between {0} and {1} characters long."),range:n.validator.format("Please enter a value between {0} and {1}."),max:n.validator.format("Please enter a value less than or equal to {0}."),min:n.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function i(t){var i=n.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}var r,t;this.labelContainer=n(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||n(this.currentForm);this.containers=n(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();r=this.groups={};n.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/));n.each(i,function(n,i){r[i]=t})});t=this.settings.rules;n.each(t,function(i,r){t[i]=n.validator.normalizeRule(r)});n(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",i).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",i);this.settings.invalidHandler&&n(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),n.extend(this.submitted,this.errorMap),this.invalid=n.extend({},this.errorMap),this.valid()||n(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var n=0,t=this.currentElements=this.elements();t[n];n++)this.check(t[n]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t));this.lastElement=t;this.prepareElement(t);this.currentElements=n(t);var i=this.check(t)!==!1;return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){n.extend(this.errorMap,t);this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=n.grep(this.successList,function(n){return!(n.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){n.fn.resetForm&&n(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(n){var t=0,i;for(i in n)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{n(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===n.grep(this.errorList,function(n){return n.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return n(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!t.objectLength(n(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(t){return n(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return n(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=n([]);this.toHide=n([]);this.currentElements=n([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(n){this.reset();this.toHide=this.errorsFor(n)},elementValue:function(t){var r=n(t).attr("type"),i=n(t).val();return"radio"===r||"checkbox"===r?n("input[name='"+n(t).attr("name")+"']:checked").val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(t){var r,u;t=this.validationTargetFor(this.clean(t));var i,f=n(t).rules(),e=!1,s=this.elementValue(t);for(r in f){u={method:r,parameters:f[r]};try{if(i=n.validator.methods[r].call(this,s,t,u.parameters),"dependency-mismatch"===i){e=!0;continue}if(e=!1,"pending"===i)return this.toHide=this.toHide.not(this.errorsFor(t)),void 0;if(!i)return this.formatAndAdd(t,u),!1}catch(o){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+u.method+"' method.",o),o;}}if(!e)return(this.objectLength(f)&&this.successList.push(t),!0)},customDataMessage:function(t,i){return n(t).data("msg-"+i.toLowerCase())||t.attributes&&n(t).attr("data-msg-"+i.toLowerCase())},customMessage:function(n,t){var i=this.settings.messages[n];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var n=0;arguments.length>n;n++)if(void 0!==arguments[n])return arguments[n];return void 0},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customDataMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,n.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"<\/strong>")},formatAndAdd:function(t,i){var r=this.defaultMessage(t,i.method),u=/\$?\{(\d+)\}/g;"function"==typeof r?r=r.call(this,i.parameters,t):u.test(r)&&(r=n.validator.format(r.replace(u,"{$1}"),i.parameters));this.errorList.push({message:r,element:t});this.errorMap[t.name]=r;this.submitted[t.name]=r},addWrapper:function(n){return this.settings.wrapper&&(n=n.add(n.parent(this.settings.wrapper))),n},defaultShowErrors:function(){for(var i,t,n=0;this.errorList[n];n++)t=this.errorList[n],this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(n=0;this.successList[n];n++)this.showLabel(this.successList[n]);if(this.settings.unhighlight)for(n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return n(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=n("<"+this.settings.errorElement+">").attr("for",this.idOrName(t)).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,n(t)):r.insertAfter(t)));!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t));this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return n(this).attr("for")===i})},idOrName:function(n){return this.groups[n.name]||(this.checkable(n)?n.name:n.id||n.name)},validationTargetFor:function(n){return this.checkable(n)&&(n=this.findByName(n.name).not(this.settings.ignore)[0]),n},checkable:function(n){return/radio|checkbox/i.test(n.type)},findByName:function(t){return n(this.currentForm).find("[name='"+t+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return n("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(n,t){return this.dependTypes[typeof n]?this.dependTypes[typeof n](n,t):!0},dependTypes:{boolean:function(n){return n},string:function(t,i){return!!n(t,i.form).length},"function":function(n,t){return n(t)}},optional:function(t){var i=this.elementValue(t);return!n.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(n){this.pending[n.name]||(this.pendingRequest++,this.pending[n.name]=!0)},stopRequest:function(t,i){this.pendingRequest--;0>this.pendingRequest&&(this.pendingRequest=0);delete this.pending[t.name];i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(n(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(n(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return n.data(t,"previousValue")||n.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:n.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=n(t).attr("class");return r&&n.each(r.split(" "),function(){this in n.validator.classRuleSettings&&n.extend(i,n.validator.classRuleSettings[this])}),i},attributeRules:function(t){var u={},e=n(t),f=e[0].getAttribute("type"),r,i;for(r in n.validator.methods)"required"===r?(i=e.get(0).getAttribute(r),""===i&&(i=!0),i=!!i):i=e.attr(r),/min|max/.test(r)&&(null===f||/number|range|text/.test(f))&&(i=Number(i)),i?u[r]=i:f===r&&"range"!==f&&(u[r]=!0);return u.maxlength&&/-1|2147483647|524288/.test(u.maxlength)&&delete u.maxlength,u},dataRules:function(t){var i,r,u={},f=n(t);for(i in n.validator.methods)r=f.data("rule-"+i.toLowerCase()),void 0!==r&&(u[i]=r);return u},staticRules:function(t){var i={},r=n.data(t.form,"validator");return r.settings.rules&&(i=n.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return n.each(t,function(r,u){if(u===!1)return delete t[r],void 0;if(u.param||u.depends){var f=!0;switch(typeof u.depends){case"string":f=!!n(u.depends,i.form).length;break;case"function":f=u.depends.call(i,i)}f?t[r]=void 0!==u.param?u.param:!0:delete t[r]}}),n.each(t,function(r,u){t[r]=n.isFunction(u)?u(i):u}),n.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),n.each(["rangelength","range"],function(){var i;t[this]&&(n.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),n.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};n.each(t.split(/\s/),function(){i[this]=!0});t=i}return t},addMethod:function(t,i,r){n.validator.methods[t]=i;n.validator.messages[t]=void 0!==r?r:n.validator.messages[t];3>i.length&&n.validator.addClassRules(t,n.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var u=n(i).val();return u&&u.length>0}return this.checkable(i)?this.getLength(t,i)>0:n.trim(t).length>0},email:function(n,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(n)},url:function(n,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},date:function(n,t){return this.optional(t)||!/Invalid|NaN/.test(""+new Date(n))},dateISO:function(n,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(n)},number:function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(n)},digits:function(n,t){return this.optional(t)||/^\d+$/.test(n)},creditcard:function(n,t){var r,e;if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(n))return!1;var f=0,i=0,u=!1;for(n=n.replace(/\D/g,""),r=n.length-1;r>=0;r--)e=n.charAt(r),i=parseInt(e,10),u&&(i*=2)>9&&(i-=9),f+=i,u=!u;return 0==f%10},minlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r},maxlength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||r>=u},rangelength:function(t,i,r){var u=n.isArray(t)?t.length:this.getLength(n.trim(t),i);return this.optional(i)||u>=r[0]&&r[1]>=u},min:function(n,t,i){return this.optional(t)||n>=i},max:function(n,t,i){return this.optional(t)||i>=n},range:function(n,t,i){return this.optional(t)||n>=i[0]&&i[1]>=n},equalTo:function(t,i,r){var u=n(r);return this.settings.onfocusout&&u.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){n(i).valid()}),t===u.val()},remote:function(t,i,r){var f,u,e;return this.optional(i)?"dependency-mismatch":(f=this.previousValue(i),this.settings.messages[i.name]||(this.settings.messages[i.name]={}),f.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=f.message,r="string"==typeof r&&{url:r}||r,f.old===t)?f.valid:(f.old=t,u=this,this.startRequest(i),e={},e[i.name]=t,n.ajax(n.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:e,success:function(r){var e,h,s,o;u.settings.messages[i.name].remote=f.originalMessage;e=r===!0||"true"===r;e?(h=u.formSubmitted,u.prepareElement(i),u.formSubmitted=h,u.successList.push(i),delete u.invalid[i.name],u.showErrors()):(s={},o=r||u.defaultMessage(i,"remote"),s[i.name]=f.message=n.isFunction(o)?o(t):o,u.invalid[i.name]=!0,u.showErrors(s));f.valid=e;u.stopRequest(i,e)}},r)),"pending")}}});n.format=n.validator.format}(jQuery),function(n){var t={},i;n.ajaxPrefilter?n.ajaxPrefilter(function(n,i,r){var u=n.port;"abort"===n.mode&&(t[u]&&t[u].abort(),t[u]=r)}):(i=n.ajax,n.ajax=function(r){var f=("mode"in r?r:n.ajaxSettings).mode,u=("port"in r?r:n.ajaxSettings).port;return"abort"===f?(t[u]&&t[u].abort(),t[u]=i.apply(this,arguments),t[u]):i.apply(this,arguments)})}(jQuery),function(n){n.extend(n.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var u=n(i.target);if(u.is(t))return r.apply(u,arguments)})}})}(jQuery),function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)}(function(n){function o(t,i){var r,u,f,e=t.nodeName.toLowerCase();return"area"===e?(r=t.parentNode,u=r.name,!t.href||!u||r.nodeName.toLowerCase()!=="map")?!1:(f=n("img[usemap='#"+u+"']")[0],!!f&&s(f)):(/^(input|select|textarea|button|object)$/.test(e)?!t.disabled:"a"===e?t.href||i:i)&&s(t)}function s(t){return n.expr.filters.visible(t)&&!n(t).parents().addBack().filter(function(){return n.css(this,"visibility")==="hidden"}).length}function tt(n){for(var t,i;n.length&&n[0]!==document;){if(t=n.css("position"),(t==="absolute"||t==="relative"||t==="fixed")&&(i=parseInt(n.css("zIndex"),10),!isNaN(i)&&i!==0))return i;n=n.parent()}return 0}function v(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._datepickerShowing=!1;this._inDialog=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};n.extend(this._defaults,this.regional[""]);this.regional.en=n.extend(!0,{},this.regional[""]);this.regional["en-US"]=n.extend(!0,{},this.regional.en);this.dpDiv=y(n("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>"))}function y(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){n(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!==-1&&n(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!==-1&&n(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",p)}function p(){n.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(n(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),n(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&n(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&n(this).addClass("ui-datepicker-next-hover"))}function u(t,i){n.extend(t,i);for(var r in i)i[r]==null&&(t[r]=i[r]);return t}function i(n){return function(){var t=this.element.val();n.apply(this,arguments);this._refresh();t!==this.element.val()&&this._trigger("change")}}var h,f,k,r,d,nt,t,it,rt,ut,ft;n.ui=n.ui||{};n.extend(n.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});n.fn.extend({scrollParent:function(t){var i=this.css("position"),u=i==="absolute",f=t?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var t=n(this);return u&&t.css("position")==="static"?!1:f.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return i==="fixed"||!r.length?n(this[0].ownerDocument||document):r},uniqueId:function(){var n=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&n(this).removeAttr("id")})}});n.extend(n.expr[":"],{data:n.expr.createPseudo?n.expr.createPseudo(function(t){return function(i){return!!n.data(i,t)}}):function(t,i,r){return!!n.data(t,r[3])},focusable:function(t){return o(t,!isNaN(n.attr(t,"tabindex")))},tabbable:function(t){var i=n.attr(t,"tabindex"),r=isNaN(i);return(r||i>=0)&&o(t,!r)}});n("<a>").outerWidth(1).jquery||n.each(["Width","Height"],function(t,i){function f(t,i,r,u){return n.each(e,function(){i-=parseFloat(n.css(t,"padding"+this))||0;r&&(i-=parseFloat(n.css(t,"border"+this+"Width"))||0);u&&(i-=parseFloat(n.css(t,"margin"+this))||0)}),i}var e=i==="Width"?["Left","Right"]:["Top","Bottom"],r=i.toLowerCase(),u={innerWidth:n.fn.innerWidth,innerHeight:n.fn.innerHeight,outerWidth:n.fn.outerWidth,outerHeight:n.fn.outerHeight};n.fn["inner"+i]=function(t){return t===undefined?u["inner"+i].call(this):this.each(function(){n(this).css(r,f(this,t)+"px")})};n.fn["outer"+i]=function(t,e){return typeof t!="number"?u["outer"+i].call(this,t):this.each(function(){n(this).css(r,f(this,t,!0,e)+"px")})}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(n.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,n.camelCase(i)):t.call(this)}}(n.fn.removeData));n.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());n.fn.extend({focus:function(t){return function(i,r){return typeof i=="number"?this.each(function(){var t=this;setTimeout(function(){n(t).focus();r&&r.call(t)},i)}):t.apply(this,arguments)}}(n.fn.focus),disableSelection:function(){var n="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(n+".ui-disableSelection",function(n){n.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(t!==undefined)return this.css("zIndex",t);if(this.length)for(var i=n(this[0]),r,u;i.length&&i[0]!==document;){if(r=i.css("position"),(r==="absolute"||r==="relative"||r==="fixed")&&(u=parseInt(i.css("zIndex"),10),!isNaN(u)&&u!==0))return u;i=i.parent()}return 0}});n.ui.plugin={add:function(t,i,r){var u,f=n.ui[t].prototype;for(u in r)f.plugins[u]=f.plugins[u]||[],f.plugins[u].push([i,r[u]])},call:function(n,t,i,r){var u,f=n.plugins[t];if(f&&(r||n.element[0].parentNode&&n.element[0].parentNode.nodeType!==11))for(u=0;u<f.length;u++)n.options[f[u][0]]&&f[u][1].apply(n.element,i)}};h=0;f=Array.prototype.slice;n.cleanData=function(t){return function(i){for(var r,u,f=0;(u=i[f])!=null;f++)try{r=n._data(u,"events");r&&r.remove&&n(u).triggerHandler("remove")}catch(e){}t(i)}}(n.cleanData);n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];return t=t.split(".")[1],s=e+"-"+t,r||(r=i,i=n.Widget),n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),o=new i,o.options=n.widget.extend({},o.options),n.each(r,function(t,r){if(!n.isFunction(r)){h[t]=r;return}h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}()}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u};n.widget.extend=function(t){for(var e=f.call(arguments,1),u=0,o=e.length,i,r;u<o;u++)for(i in e[u])r=e[u][i],e[u].hasOwnProperty(i)&&r!==undefined&&(t[i]=n.isPlainObject(r)?n.isPlainObject(t[i])?n.widget.extend({},t[i],r):n.widget.extend({},r):r);return t};n.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;n.fn[t]=function(u){var s=typeof u=="string",o=f.call(arguments,1),e=this;return s?this.each(function(){var i,f=n.data(this,r);return u==="instance"?(e=f,!1):f?!n.isFunction(f[u])||u.charAt(0)==="_"?n.error("no such method '"+u+"' for "+t+" widget instance"):(i=f[u].apply(f,o),i!==f&&i!==undefined?(e=i&&i.jquery?e.pushStack(i.get()):i,!1):void 0):n.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+u+"'")}):(o.length&&(u=n.widget.extend.apply(null,[u].concat(o))),this.each(function(){var t=n.data(this,r);t?(t.option(u||{}),t._init&&t._init()):n.data(this,r,new i(u,this))})),e}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=n(i||this.defaultElement||this)[0];this.element=n(i);this.uuid=h++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();i!==this&&(n.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===i&&this.destroy()}}),this.document=n(i.style?i.ownerDocument:i.document||i),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var e=t,r,u,f;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof t=="string")if(e={},r=t.split("."),t=r.shift(),r.length){for(u=e[t]=n.widget.extend({},this.options[t]),f=0;f<r.length-1;f++)u[r[f]]=u[r[f]]||{},u=u[r[f]];if(t=r.pop(),arguments.length===1)return u[t]===undefined?null:u[t];u[t]=i}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){var t;for(t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(i).undelegate(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});k=n.widget;r=!1;n(document).mouseup(function(){r=!1});d=n.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(n){return t._mouseDown(n)}).bind("click."+this.widgetName,function(i){if(!0===n.data(i.target,t.widgetName+".preventClickEvent"))return n.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!r){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(t);this._mouseDownEvent=t;var i=this,u=t.which===1,f=typeof this.options.cancel=="string"&&t.target.nodeName?n(t.target).closest(this.options.cancel).length:!1;return!u||f||!this._mouseCapture(t)?!0:(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted))?(t.preventDefault(),!0):(!0===n.data(t.target,this.widgetName+".preventClickEvent")&&n.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(n){return i._mouseMove(n)},this._mouseUpDelegate=function(n){return i._mouseUp(n)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),r=!0,!0)}},_mouseMove:function(t){return this._mouseMoved&&(n.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button||!t.which)?this._mouseUp(t):((t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted)?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&n.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),r=!1,!1},_mouseDistanceMet:function(n){return Math.max(Math.abs(this._mouseDownEvent.pageX-n.pageX),Math.abs(this._mouseDownEvent.pageY-n.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function a(n,t,i){return[parseFloat(n[0])*(l.test(n[0])?t/100:1),parseFloat(n[1])*(l.test(n[1])?i/100:1)]}function r(t,i){return parseInt(n.css(t,i),10)||0}function y(t){var i=t[0];return i.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:n.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}n.ui=n.ui||{};var u,f,i=Math.max,t=Math.abs,e=Math.round,o=/left|center|right/,s=/top|center|bottom/,h=/[\+\-]\d+(\.[\d]+)?%?/,c=/^\w+/,l=/%$/,v=n.fn.position;n.position={scrollbarWidth:function(){if(u!==undefined)return u;var r,i,t=n("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'><\/div><\/div>"),f=t.children()[0];return n("body").append(t),r=f.offsetWidth,t.css("overflow","scroll"),i=f.offsetWidth,r===i&&(i=t[0].clientWidth),t.remove(),u=r-i},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),u=i==="scroll"||i==="auto"&&t.width<t.element[0].scrollWidth,f=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:f?n.position.scrollbarWidth():0,height:u?n.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=n(t||window),r=n.isWindow(i[0]),u=!!i[0]&&i[0].nodeType===9;return{element:i,isWindow:r,isDocument:u,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:r||u?i.width():i.outerWidth(),height:r||u?i.height():i.outerHeight()}}};n.fn.position=function(u){if(!u||!u.of)return v.apply(this,arguments);u=n.extend({},u);var k,l,p,b,w,g,nt=n(u.of),it=n.position.getWithinInfo(u.within),rt=n.position.getScrollInfo(it),d=(u.collision||"flip").split(" "),tt={};return g=y(nt),nt[0].preventDefault&&(u.at="left top"),l=g.width,p=g.height,b=g.offset,w=n.extend({},b),n.each(["my","at"],function(){var n=(u[this]||"").split(" "),t,i;n.length===1&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]);n[0]=o.test(n[0])?n[0]:"center";n[1]=s.test(n[1])?n[1]:"center";t=h.exec(n[0]);i=h.exec(n[1]);tt[this]=[t?t[0]:0,i?i[0]:0];u[this]=[c.exec(n[0])[0],c.exec(n[1])[0]]}),d.length===1&&(d[1]=d[0]),u.at[0]==="right"?w.left+=l:u.at[0]==="center"&&(w.left+=l/2),u.at[1]==="bottom"?w.top+=p:u.at[1]==="center"&&(w.top+=p/2),k=a(tt.at,l,p),w.left+=k[0],w.top+=k[1],this.each(function(){var y,g,s=n(this),h=s.outerWidth(),c=s.outerHeight(),ut=r(this,"marginLeft"),ft=r(this,"marginTop"),et=h+ut+r(this,"marginRight")+rt.width,ot=c+ft+r(this,"marginBottom")+rt.height,o=n.extend({},w),v=a(tt.my,s.outerWidth(),s.outerHeight());u.my[0]==="right"?o.left-=h:u.my[0]==="center"&&(o.left-=h/2);u.my[1]==="bottom"?o.top-=c:u.my[1]==="center"&&(o.top-=c/2);o.left+=v[0];o.top+=v[1];f||(o.left=e(o.left),o.top=e(o.top));y={marginLeft:ut,marginTop:ft};n.each(["left","top"],function(t,i){n.ui.position[d[t]]&&n.ui.position[d[t]][i](o,{targetWidth:l,targetHeight:p,elemWidth:h,elemHeight:c,collisionPosition:y,collisionWidth:et,collisionHeight:ot,offset:[k[0]+v[0],k[1]+v[1]],my:u.my,at:u.at,within:it,elem:s})});u.using&&(g=function(n){var r=b.left-o.left,a=r+l-h,f=b.top-o.top,v=f+p-c,e={target:{element:nt,left:b.left,top:b.top,width:l,height:p},element:{element:s,left:o.left,top:o.top,width:h,height:c},horizontal:a<0?"left":r>0?"right":"center",vertical:v<0?"top":f>0?"bottom":"middle"};l<h&&t(r+a)<l&&(e.horizontal="center");p<c&&t(f+v)<p&&(e.vertical="middle");e.important=i(t(r),t(a))>i(t(f),t(v))?"horizontal":"vertical";u.using.call(this,n,e)});s.offset(n.extend(o,{using:g}))})};n.ui.position={fit:{left:function(n,t){var e=t.within,u=e.isWindow?e.scrollLeft:e.offset.left,o=e.width,s=n.left-t.collisionPosition.marginLeft,r=u-s,f=s+t.collisionWidth-o-u,h;t.collisionWidth>o?r>0&&f<=0?(h=n.left+r+t.collisionWidth-o-u,n.left+=r-h):n.left=f>0&&r<=0?u:r>f?u+o-t.collisionWidth:u:r>0?n.left+=r:f>0?n.left-=f:n.left=i(n.left-s,n.left)},top:function(n,t){var o=t.within,u=o.isWindow?o.scrollTop:o.offset.top,e=t.within.height,s=n.top-t.collisionPosition.marginTop,r=u-s,f=s+t.collisionHeight-e-u,h;t.collisionHeight>e?r>0&&f<=0?(h=n.top+r+t.collisionHeight-e-u,n.top+=r-h):n.top=f>0&&r<=0?u:r>f?u+e-t.collisionHeight:u:r>0?n.top+=r:f>0?n.top-=f:n.top=i(n.top-s,n.top)}},flip:{left:function(n,i){var r=i.within,y=r.offset.left+r.scrollLeft,c=r.width,o=r.isWindow?r.scrollLeft:r.offset.left,l=n.left-i.collisionPosition.marginLeft,a=l-o,v=l+i.collisionWidth-c-o,u=i.my[0]==="left"?-i.elemWidth:i.my[0]==="right"?i.elemWidth:0,f=i.at[0]==="left"?i.targetWidth:i.at[0]==="right"?-i.targetWidth:0,e=-2*i.offset[0],s,h;a<0?(s=n.left+u+f+e+i.collisionWidth-c-y,(s<0||s<t(a))&&(n.left+=u+f+e)):v>0&&(h=n.left-i.collisionPosition.marginLeft+u+f+e-o,(h>0||t(h)<v)&&(n.left+=u+f+e))},top:function(n,i){var r=i.within,y=r.offset.top+r.scrollTop,c=r.height,o=r.isWindow?r.scrollTop:r.offset.top,l=n.top-i.collisionPosition.marginTop,a=l-o,v=l+i.collisionHeight-c-o,p=i.my[1]==="top",u=p?-i.elemHeight:i.my[1]==="bottom"?i.elemHeight:0,f=i.at[1]==="top"?i.targetHeight:i.at[1]==="bottom"?-i.targetHeight:0,e=-2*i.offset[1],s,h;a<0?(h=n.top+u+f+e+i.collisionHeight-c-y,(h<0||h<t(a))&&(n.top+=u+f+e)):v>0&&(s=n.top-i.collisionPosition.marginTop+u+f+e-o,(s>0||t(s)<v)&&(n.top+=u+f+e))}},flipfit:{left:function(){n.ui.position.flip.left.apply(this,arguments);n.ui.position.fit.left.apply(this,arguments)},top:function(){n.ui.position.flip.top.apply(this,arguments);n.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,u,e,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};o&&n.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in r)t.style[e]=r[e];t.appendChild(s);i=o||document.documentElement;i.insertBefore(t,i.firstChild);s.style.cssText="position: absolute; left: 10.7432222px;";u=n(s).offset().left;f=u>10&&u<11;t.innerHTML="";i.removeChild(t)}()}();var et=n.ui.position,ot=n.widget("ui.accordion",{version:"1.11.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var t=this.options;this.prevShow=this.prevHide=n();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");t.collapsible||t.active!==!1&&t.active!=null||(t.active=0);this._processPanels();t.active<0&&(t.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():n()}},_createIcons:function(){var t=this.options.icons;t&&(n("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var n;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").removeUniqueId();this._destroyIcons();n=this.headers.next().removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeUniqueId();this.options.heightStyle!=="content"&&n.css("height","")},_setOption:function(n,t){if(n==="active"){this._activate(t);return}n==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t));this._super(n,t);n!=="collapsible"||t||this.options.active!==!1||this._activate(0);n==="icons"&&(this._destroyIcons(),t&&this._createIcons());n==="disabled"&&(this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t),this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=n.ui.keyCode,u=this.headers.length,f=this.headers.index(t.target),r=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:r=this.headers[(f+1)%u];break;case i.LEFT:case i.UP:r=this.headers[(f-1+u)%u];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:r=this.headers[0];break;case i.END:r=this.headers[u-1]}r&&(n(t.target).attr("tabIndex",-1),n(r).attr("tabIndex",0),r.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===n.ui.keyCode.UP&&t.ctrlKey&&n(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();(t.active!==!1||t.collapsible!==!0)&&this.headers.length?t.active===!1?this._activate(0):this.active.length&&!n.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=n()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active):(t.active=!1,this.active=n());this._destroyIcons();this._refresh()},_processPanels:function(){var t=this.headers,n=this.panels;this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-state-default ui-corner-all");this.panels=this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide();n&&(this._off(t.not(this.headers)),this._off(n.not(this.panels)))},_refresh:function(){var t,i=this.options,r=i.heightStyle,u=this.element.parent();this.active=this._findActive(i.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(){var t=n(this),r=t.uniqueId().attr("id"),i=t.next(),u=i.uniqueId().attr("id");t.attr("aria-controls",u);i.attr("aria-labelledby",r)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(i.event);r==="fill"?(t=u.height(),this.element.siblings(":visible").each(function(){var i=n(this),r=i.css("position");r!=="absolute"&&r!=="fixed"&&(t-=i.outerHeight(!0))}),this.headers.each(function(){t-=n(this).outerHeight(!0)}),this.headers.next().each(function(){n(this).height(Math.max(0,t-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):r==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,n(this).css("height","").height())}).height(t))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:n.noop}))},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):n()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,i);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,u=this.active,r=n(t.currentTarget),f=r[0]===u[0],e=f&&i.collapsible,s=e?n():r.next(),h=u.next(),o={oldHeader:u,oldPanel:h,newHeader:e?n():r,newPanel:s};(t.preventDefault(),(!f||i.collapsible)&&this._trigger("beforeActivate",t,o)!==!1)&&(i.active=e?!1:this.headers.index(r),this.active=f?n():r,this._toggle(o),u.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&u.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),f||(r.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&r.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),r.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var r=t.newPanel,i=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=r;this.prevHide=i;this.options.animate?this._animate(r,i,t):(i.hide(),r.show(),this._toggleComplete(t));i.attr({"aria-hidden":"true"});i.prev().attr({"aria-selected":"false","aria-expanded":"false"});r.length&&i.length?i.prev().attr({tabIndex:-1,"aria-expanded":"false"}):r.length&&this.headers.filter(function(){return parseInt(n(this).attr("tabIndex"),10)===0}).attr("tabIndex",-1);r.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(n,t,i){var h,r,u,c=this,o=0,l=n.css("box-sizing"),a=n.length&&(!t.length||n.index()<t.index()),e=this.options.animate||{},f=a&&e.down||e,s=function(){c._toggleComplete(i)};if(typeof f=="number"&&(u=f),typeof f=="string"&&(r=f),r=r||f.easing||e.easing,u=u||f.duration||e.duration,!t.length)return n.animate(this.showProps,u,r,s);if(!n.length)return t.animate(this.hideProps,u,r,s);h=n.show().outerHeight();t.animate(this.hideProps,{duration:u,easing:r,step:function(n,t){t.now=Math.round(n)}});n.hide().animate(this.showProps,{duration:u,easing:r,complete:s,step:function(n,i){i.now=Math.round(n);i.prop!=="height"?l==="content-box"&&(o+=i.now):c.options.heightStyle!=="content"&&(i.now=Math.round(h-t.outerHeight()-o),o=0)}})},_toggleComplete:function(n){var t=n.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");t.length&&(t.parent()[0].className=t.parent()[0].className);this._trigger("activate",null,n)}}),st=n.widget("ui.menu",{version:"1.11.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},items:"> *",menus:"ul",position:{my:"left-1 top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0});this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item":function(n){n.preventDefault()},"click .ui-menu-item":function(t){var i=n(t.target);!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&n(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var i=n(t.currentTarget);i.siblings(".ui-state-active").removeClass("ui-state-active");this.focus(t,i)}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(n,t){var i=this.active||this.element.find(this.options.items).eq(0);t||this.focus(n,i)},blur:function(t){this._delay(function(){n.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(n){this._closeOnDocumentClick(n)&&this.collapseAll(n);this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-menu-icons ui-front").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").removeUniqueId().removeClass("ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=n(this);t.data("ui-menu-submenu-carat")&&t.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){var i,u,r,f,e=!0;switch(t.keyCode){case n.ui.keyCode.PAGE_UP:this.previousPage(t);break;case n.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case n.ui.keyCode.HOME:this._move("first","first",t);break;case n.ui.keyCode.END:this._move("last","last",t);break;case n.ui.keyCode.UP:this.previous(t);break;case n.ui.keyCode.DOWN:this.next(t);break;case n.ui.keyCode.LEFT:this.collapse(t);break;case n.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case n.ui.keyCode.ENTER:case n.ui.keyCode.SPACE:this._activate(t);break;case n.ui.keyCode.ESCAPE:this.collapse(t);break;default:e=!1;u=this.previousFilter||"";r=String.fromCharCode(t.keyCode);f=!1;clearTimeout(this.filterTimer);r===u?f=!0:r=u+r;i=this._filterMenuItems(r);i=f&&i.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):i;i.length||(r=String.fromCharCode(t.keyCode),i=this._filterMenuItems(r));i.length?(this.focus(t,i),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}e&&t.preventDefault()},_activate:function(n){this.active.is(".ui-state-disabled")||(this.active.is("[aria-haspopup='true']")?this.expand(n):this.select(n))},refresh:function(){var i,t,u=this,f=this.options.icons.submenu,r=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-front").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=n(this),i=t.parent(),r=n("<span>").addClass("ui-menu-icon ui-icon "+f).data("ui-menu-submenu-carat",!0);i.attr("aria-haspopup","true").prepend(r);t.attr("aria-labelledby",i.attr("id"))});i=r.add(this.element);t=i.find(this.options.items);t.not(".ui-menu-item").each(function(){var t=n(this);u._isDivider(t)&&t.addClass("ui-widget-content ui-menu-divider")});t.not(".ui-menu-item, .ui-menu-divider").addClass("ui-menu-item").uniqueId().attr({tabIndex:-1,role:this._itemRole()});t.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!n.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(n,t){n==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu);n==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t);this._super(n,t)},focus:function(n,t){var i,r;this.blur(n,n&&n.type==="focus");this._scrollIntoView(t);this.active=t.first();r=this.active.addClass("ui-state-focus").removeClass("ui-state-active");this.options.role&&this.element.attr("aria-activedescendant",r.attr("id"));this.active.parent().closest(".ui-menu-item").addClass("ui-state-active");n&&n.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay);i=t.children(".ui-menu");i.length&&n&&/^mouse/.test(n.type)&&this._startOpening(i);this.activeMenu=t.parent();this._trigger("focus",n,{item:t})},_scrollIntoView:function(t){var e,o,i,r,u,f;this._hasScroll()&&(e=parseFloat(n.css(this.activeMenu[0],"borderTopWidth"))||0,o=parseFloat(n.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-e-o,r=this.activeMenu.scrollTop(),u=this.activeMenu.height(),f=t.outerHeight(),i<0?this.activeMenu.scrollTop(r+i):i+f>u&&this.activeMenu.scrollTop(r+i-u+f))},blur:function(n,t){(t||clearTimeout(this.timer),this.active)&&(this.active.removeClass("ui-state-focus"),this.active=null,this._trigger("blur",n,{item:this.active}))},_startOpening:function(n){(clearTimeout(this.timer),n.attr("aria-hidden")==="true")&&(this.timer=this._delay(function(){this._close();this._open(n)},this.delay))},_open:function(t){var i=n.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true");t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer);this.timer=this._delay(function(){var r=i?this.element:n(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element);this._close(r);this.blur(t);this.activeMenu=r},this.delay)},_close:function(n){n||(n=this.active?this.active.parent():this.element);n.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find(".ui-state-active").not(".ui-state-focus").removeClass("ui-state-active")},_closeOnDocumentClick:function(t){return!n(t.target).closest(".ui-menu").length},_isDivider:function(n){return!/[^\-\u2014\u2013\s]/.test(n.text())},collapse:function(n){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(n,t))},expand:function(n){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(n,t)}))},next:function(n){this._move("next","first",n)},previous:function(n){this._move("prev","last",n)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(n,t,i){var r;this.active&&(r=n==="first"||n==="last"?this.active[n==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[n+"All"](".ui-menu-item").eq(0));r&&r.length&&this.active||(r=this.activeMenu.find(this.options.items)[t]());this.focus(i,r)},nextPage:function(t){var i,r,u;if(!this.active){this.next(t);return}this.isLastItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r-u<0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))},previousPage:function(t){var i,r,u;if(!this.active){this.next(t);return}this.isFirstItem()||(this._hasScroll()?(r=this.active.offset().top,u=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=n(this),i.offset().top-r+u>0}),this.focus(t,i)):this.focus(t,this.activeMenu.find(this.options.items).first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||n(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0);this._trigger("select",t,i)},_filterMenuItems:function(t){var i=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+i,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return r.test(n.trim(n(this).text()))})}});n.widget("ui.autocomplete",{version:"1.11.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,r,u=this.element[0].nodeName.toLowerCase(),f=u==="textarea",e=u==="input";this.isMultiLine=f?!0:e?!1:this.element.prop("isContentEditable");this.valueMethod=this.element[f||e?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(u){if(this.element.prop("readOnly")){t=!0;r=!0;i=!0;return}t=!1;r=!1;i=!1;var f=n.ui.keyCode;switch(u.keyCode){case f.PAGE_UP:t=!0;this._move("previousPage",u);break;case f.PAGE_DOWN:t=!0;this._move("nextPage",u);break;case f.UP:t=!0;this._keyEvent("previous",u);break;case f.DOWN:t=!0;this._keyEvent("next",u);break;case f.ENTER:this.menu.active&&(t=!0,u.preventDefault(),this.menu.select(u));break;case f.TAB:this.menu.active&&this.menu.select(u);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(u),u.preventDefault());break;default:i=!0;this._searchTimeout(u)}},keypress:function(r){if(t){t=!1;(!this.isMultiLine||this.menu.element.is(":visible"))&&r.preventDefault();return}if(!i){var u=n.ui.keyCode;switch(r.keyCode){case u.PAGE_UP:this._move("previousPage",r);break;case u.PAGE_DOWN:this._move("nextPage",r);break;case u.UP:this._keyEvent("previous",r);break;case u.DOWN:this._keyEvent("next",r)}}},input:function(n){if(r){r=!1;n.preventDefault();return}this._searchTimeout(n)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(n){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(n);this._change(n)}});this._initSource();this.menu=n("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._on(this.menu.element,{mousedown:function(t){t.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];n(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target===t.element[0]||r.target===i||n.contains(i,r.target)||t.close()})})},menufocus:function(t,i){var r,u;if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){n(t.target).trigger(t.originalEvent)});return}u=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:u})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(u.value);r=i.item.attr("aria-label")||u.value;r&&n.trim(r).length&&(this.liveRegion.children().hide(),n("<div>").text(r).appendTo(this.liveRegion))},menuselect:function(n,t){var i=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r;this.selectedItem=i}));!1!==this._trigger("select",n,{item:i})&&this._value(i.value);this.term=this._value();this.close(n);this.selectedItem=i}});this.liveRegion=n("<span>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(n,t){this._super(n,t);n==="source"&&this._initSource();n==="appendTo"&&this.menu.element.appendTo(this._appendTo());n==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var i,r,t=this;n.isArray(this.options.source)?(i=this.options.source,this.source=function(t,r){r(n.ui.autocomplete.filter(i,t.term))}):typeof this.options.source=="string"?(r=this.options.source,this.source=function(i,u){t.xhr&&t.xhr.abort();t.xhr=n.ajax({url:r,data:i,dataType:"json",success:function(n){u(n)},error:function(){u([])}})}):this.source=this.options.source},_searchTimeout:function(n){clearTimeout(this.searching);this.searching=this._delay(function(){var t=this.term===this._value(),i=this.menu.element.is(":visible"),r=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey;t&&(!t||i||r)||(this.selectedItem=null,this.search(null,n))},this.options.delay)},search:function(n,t){return(n=n!=null?n:this._value(),this.term=this._value(),n.length<this.options.minLength)?this.close(t):this._trigger("search",t)===!1?void 0:this._search(n)},_search:function(n){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:n},this._response())},_response:function(){var t=++this.requestIndex;return n.proxy(function(n){t===this.requestIndex&&this.__response(n);this.pending--;this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(n){n&&(n=this._normalize(n));this._trigger("response",null,{content:n});!this.options.disabled&&n&&n.length&&!this.cancelSearch?(this._suggest(n),this._trigger("open")):this._close()},close:function(n){this.cancelSearch=!0;this._close(n)},_close:function(n){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",n))},_change:function(n){this.previous!==this._value()&&this._trigger("change",n,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:n.map(t,function(t){return typeof t=="string"?{label:t,value:t}:n.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t);this.isNewMenu=!0;this.menu.refresh();i.show();this._resizeMenu();i.position(n.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var n=this.menu.element;n.outerWidth(Math.max(n.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;n.each(i,function(n,i){r._renderItemData(t,i)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return n("<li>").text(i.label).appendTo(t)},_move:function(n,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(n)||this.menu.isLastItem()&&/^next/.test(n)){this.isMultiLine||this._value(this.term);this.menu.blur();return}this.menu[n](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(n,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(n,t),t.preventDefault())}});n.extend(n.ui.autocomplete,{escapeRegex:function(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=new RegExp(n.ui.autocomplete.escapeRegex(i),"i");return n.grep(t,function(n){return r.test(n.label||n.value||n)})}});n.widget("ui.autocomplete",n.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(n){return n+(n>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var i;(this._superApply(arguments),this.options.disabled||this.cancelSearch)||(i=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),n("<div>").text(i).appendTo(this.liveRegion))}});var ht=n.ui.autocomplete,e,c="ui-button ui-widget ui-state-default ui-corner-all",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",g=function(){var t=n(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},a=function(t){var i=t.name,r=t.form,u=n([]);return i&&(i=i.replace(/'/g,"\\'"),u=r?n(r).find("[name='"+i+"'][type=radio]"):n("[name='"+i+"'][type=radio]",t.ownerDocument).filter(function(){return!this.form})),u};n.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,g);typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var i=this,t=this.options,r=this.type==="checkbox"||this.type==="radio",u=r?"":"ui-state-active";t.label===null&&(t.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html());this._hoverable(this.buttonElement);this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){t.disabled||this===e&&n(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){t.disabled||n(this).removeClass(u)}).bind("click"+this.eventNamespace,function(n){t.disabled&&(n.preventDefault(),n.stopImmediatePropagation())});this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}});r&&this.element.bind("change"+this.eventNamespace,function(){i.refresh()});this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(t.disabled)return!1;n(this).addClass("ui-state-active");i.buttonElement.attr("aria-pressed","true");var r=i.element[0];a(r).not(r).map(function(){return n(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(t.disabled)return!1;n(this).addClass("ui-state-active");e=this;i.document.one("mouseup",function(){e=null})}).bind("mouseup"+this.eventNamespace,function(){if(t.disabled)return!1;n(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(i){if(t.disabled)return!1;(i.keyCode===n.ui.keyCode.SPACE||i.keyCode===n.ui.keyCode.ENTER)&&n(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){n(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===n.ui.keyCode.SPACE&&n(this).click()}));this._setOption("disabled",t.disabled);this._resetButton()},_determineButtonType:function(){var n,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button";this.type==="checkbox"||this.type==="radio"?(n=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=n.find(t),this.buttonElement.length||(n=n.length?n.siblings():this.element.siblings(),this.buttonElement=n.filter(t),this.buttonElement.length||(this.buttonElement=n.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(c+" ui-state-active "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(n,t){if(this._super(n,t),n==="disabled"){this.widget().toggleClass("ui-state-disabled",!!t);this.element.prop("disabled",!!t);t&&(this.type==="checkbox"||this.type==="radio"?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active"));return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t);this.type==="radio"?a(this.element[0]).each(function(){n(this).is(":checked")?n(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var i=this.buttonElement.removeClass(l),f=n("<span><\/span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(i.empty()).text(),t=this.options.icons,u=t.primary&&t.secondary,r=[];t.primary||t.secondary?(this.options.text&&r.push("ui-button-text-icon"+(u?"s":t.primary?"-primary":"-secondary")),t.primary&&i.prepend("<span class='ui-button-icon-primary ui-icon "+t.primary+"'><\/span>"),t.secondary&&i.append("<span class='ui-button-icon-secondary ui-icon "+t.secondary+"'><\/span>"),this.options.text||(r.push(u?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||i.attr("title",n.trim(f)))):r.push("ui-button-text-only");i.addClass(r.join(" "))}});n.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(n,t){n==="disabled"&&this.buttons.button("option",n,t);this._super(n,t)},refresh:function(){var i=this.element.css("direction")==="rtl",t=this.element.find(this.options.items),r=t.filter(":ui-button");t.not(":ui-button").button();r.button("refresh");this.buttons=t.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(i?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(i?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return n(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}});nt=n.ui.button;n.extend(n.ui,{datepicker:{version:"1.11.4"}});n.extend(v.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(n){return u(this._defaults,n||{}),this},_attachDatepicker:function(t,i){var r,f,u;r=t.nodeName.toLowerCase();f=r==="div"||r==="span";t.id||(this.uuid+=1,t.id="dp"+this.uuid);u=this._newInst(n(t),f);u.settings=n.extend({},i||{});r==="input"?this._connectDatepicker(t,u):f&&this._inlineDatepicker(t,u)},_newInst:function(t,i){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?y(n("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'><\/div>")):this.dpDiv}},_connectDatepicker:function(t,i){var r=n(t);(i.append=n([]),i.trigger=n([]),r.hasClass(this.markerClassName))||(this._attachments(r,i),r.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),n.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var u,r,f,e=this._get(i,"appendText"),o=this._get(i,"isRTL");i.append&&i.append.remove();e&&(i.append=n("<span class='"+this._appendClass+"'>"+e+"<\/span>"),t[o?"before":"after"](i.append));t.unbind("focus",this._showDatepicker);i.trigger&&i.trigger.remove();u=this._get(i,"showOn");(u==="focus"||u==="both")&&t.focus(this._showDatepicker);(u==="button"||u==="both")&&(r=this._get(i,"buttonText"),f=this._get(i,"buttonImage"),i.trigger=n(this._get(i,"buttonImageOnly")?n("<img/>").addClass(this._triggerClass).attr({src:f,alt:r,title:r}):n("<button type='button'><\/button>").addClass(this._triggerClass).html(f?n("<img/>").attr({src:f,alt:r,title:r}):r)),t[o?"before":"after"](i.trigger),i.trigger.click(function(){return n.datepicker._datepickerShowing&&n.datepicker._lastInput===t[0]?n.datepicker._hideDatepicker():n.datepicker._datepickerShowing&&n.datepicker._lastInput!==t[0]?(n.datepicker._hideDatepicker(),n.datepicker._showDatepicker(t[0])):n.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(n){if(this._get(n,"autoSize")&&!n.inline){var r,u,f,t,i=new Date(2009,11,20),e=this._get(n,"dateFormat");e.match(/[DM]/)&&(r=function(n){for(u=0,f=0,t=0;t<n.length;t++)n[t].length>u&&(u=n[t].length,f=t);return f},i.setMonth(r(this._get(n,e.match(/MM/)?"monthNames":"monthNamesShort"))),i.setDate(r(this._get(n,e.match(/DD/)?"dayNames":"dayNamesShort"))+20-i.getDay()));n.input.attr("size",this._formatDate(n,i).length)}},_inlineDatepicker:function(t,i){var r=n(t);r.hasClass(this.markerClassName)||(r.addClass(this.markerClassName).append(i.dpDiv),n.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,r,f,e){var s,h,c,l,a,o=this._dialogInst;return o||(this.uuid+=1,s="dp"+this.uuid,this._dialogInput=n("<input type='text' id='"+s+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),n("body").append(this._dialogInput),o=this._dialogInst=this._newInst(this._dialogInput,!1),o.settings={},n.data(this._dialogInput[0],"datepicker",o)),u(o.settings,f||{}),i=i&&i.constructor===Date?this._formatDate(o,i):i,this._dialogInput.val(i),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,this._pos||(h=document.documentElement.clientWidth,c=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,a=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+l,c/2-150+a]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),o.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),n.blockUI&&n.blockUI(this.dpDiv),n.data(this._dialogInput[0],"datepicker",o),this},_destroyDatepicker:function(i){var r,u=n(i),f=n.data(i,"datepicker");u.hasClass(this.markerClassName)&&(r=i.nodeName.toLowerCase(),n.removeData(i,"datepicker"),r==="input"?(f.append.remove(),f.trigger.remove(),u.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&u.removeClass(this.markerClassName).empty(),t===f&&(t=null))},_enableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),i==="input"?(t.disabled=!1,f.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):(i==="div"||i==="span")&&(r=u.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}))},_disableDatepicker:function(t){var i,r,u=n(t),f=n.data(t,"datepicker");u.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),i==="input"?(t.disabled=!0,f.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):(i==="div"||i==="span")&&(r=u.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=n.map(this._disabledInputs,function(n){return n===t?null:n}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(n){if(!n)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===n)return!0;return!1},_getInst:function(t){try{return n.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(t,i,r){var e,h,o,s,f=this._getInst(t);if(arguments.length===2&&typeof i=="string")return i==="defaults"?n.extend({},n.datepicker._defaults):f?i==="all"?n.extend({},f.settings):this._get(f,i):null;e=i||{};typeof i=="string"&&(e={},e[i]=r);f&&(this._curInst===f&&this._hideDatepicker(),h=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(f,"min"),s=this._getMinMaxDate(f,"max"),u(f.settings,e),o!==null&&e.dateFormat!==undefined&&e.minDate===undefined&&(f.settings.minDate=this._formatDate(f,o)),s!==null&&e.dateFormat!==undefined&&e.maxDate===undefined&&(f.settings.maxDate=this._formatDate(f,s)),"disabled"in e&&(e.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(n(t),f),this._autoSize(f),this._setDate(f,h),this._updateAlternate(f),this._updateDatepicker(f))},_changeDatepicker:function(n,t,i){this._optionDatepicker(n,t,i)},_refreshDatepicker:function(n){var t=this._getInst(n);t&&this._updateDatepicker(t)},_setDateDatepicker:function(n,t){var i=this._getInst(n);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(n,t){var i=this._getInst(n);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var u,e,f,i=n.datepicker._getInst(t.target),r=!0,o=i.dpDiv.is(".ui-datepicker-rtl");if(i._keyEvent=!0,n.datepicker._datepickerShowing)switch(t.keyCode){case 9:n.datepicker._hideDatepicker();r=!1;break;case 13:return f=n("td."+n.datepicker._dayOverClass+":not(."+n.datepicker._currentClass+")",i.dpDiv),f[0]&&n.datepicker._selectDay(t.target,i.selectedMonth,i.selectedYear,f[0]),u=n.datepicker._get(i,"onSelect"),u?(e=n.datepicker._formatDate(i),u.apply(i.input?i.input[0]:null,[e,i])):n.datepicker._hideDatepicker(),!1;case 27:n.datepicker._hideDatepicker();break;case 33:n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 34:n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&n.datepicker._clearDate(t.target);r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&n.datepicker._gotoToday(t.target);r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?1:-1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?-n.datepicker._get(i,"stepBigMonths"):-n.datepicker._get(i,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,-7,"D");r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,o?-1:1,"D");r=t.ctrlKey||t.metaKey;t.originalEvent.altKey&&n.datepicker._adjustDate(t.target,t.ctrlKey?+n.datepicker._get(i,"stepBigMonths"):+n.datepicker._get(i,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&n.datepicker._adjustDate(t.target,7,"D");r=t.ctrlKey||t.metaKey;break;default:r=!1}else t.keyCode===36&&t.ctrlKey?n.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,r,u=n.datepicker._getInst(t.target);if(n.datepicker._get(u,"constrainInput"))return i=n.datepicker._possibleChars(n.datepicker._get(u,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!i||i.indexOf(r)>-1},_doKeyUp:function(t){var r,i=n.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{r=n.datepicker.parseDate(n.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,n.datepicker._getFormatConfig(i));r&&(n.datepicker._setDateFromField(i),n.datepicker._updateAlternate(i),n.datepicker._updateDatepicker(i))}catch(u){}return!0},_showDatepicker:function(t){if(t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=n("input",t.parentNode)[0]),!n.datepicker._isDisabledDatepicker(t)&&n.datepicker._lastInput!==t){var i,o,s,r,f,e,h;(i=n.datepicker._getInst(t),n.datepicker._curInst&&n.datepicker._curInst!==i&&(n.datepicker._curInst.dpDiv.stop(!0,!0),i&&n.datepicker._datepickerShowing&&n.datepicker._hideDatepicker(n.datepicker._curInst.input[0])),o=n.datepicker._get(i,"beforeShow"),s=o?o.apply(t,[t,i]):{},s!==!1)&&(u(i.settings,s),i.lastVal=null,n.datepicker._lastInput=t,n.datepicker._setDateFromField(i),n.datepicker._inDialog&&(t.value=""),n.datepicker._pos||(n.datepicker._pos=n.datepicker._findPos(t),n.datepicker._pos[1]+=t.offsetHeight),r=!1,n(t).parents().each(function(){return r|=n(this).css("position")==="fixed",!r}),f={left:n.datepicker._pos[0],top:n.datepicker._pos[1]},n.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),n.datepicker._updateDatepicker(i),f=n.datepicker._checkOffset(i,f,r),i.dpDiv.css({position:n.datepicker._inDialog&&n.blockUI?"static":r?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),i.inline||(e=n.datepicker._get(i,"showAnim"),h=n.datepicker._get(i,"duration"),i.dpDiv.css("z-index",tt(n(t))+1),n.datepicker._datepickerShowing=!0,n.effects&&n.effects.effect[e]?i.dpDiv.show(e,n.datepicker._get(i,"showOptions"),h):i.dpDiv[e||"show"](e?h:null),n.datepicker._shouldFocusInput(i)&&i.input.focus(),n.datepicker._curInst=i))}},_updateDatepicker:function(i){this.maxRows=4;t=i;i.dpDiv.empty().append(this._generateHTML(i));this._attachHandlers(i);var r,u=this._getNumberOfMonths(i),f=u[1],e=i.dpDiv.find("."+this._dayOverClass+" a");e.length>0&&p.apply(e.get(0));i.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");f>1&&i.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",17*f+"em");i.dpDiv[(u[0]!==1||u[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");i.dpDiv[(this._get(i,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");i===n.datepicker._curInst&&n.datepicker._datepickerShowing&&n.datepicker._shouldFocusInput(i)&&i.input.focus();i.yearshtml&&(r=i.yearshtml,setTimeout(function(){r===i.yearshtml&&i.yearshtml&&i.dpDiv.find("select.ui-datepicker-year:first").replaceWith(i.yearshtml);r=i.yearshtml=null},0))},_shouldFocusInput:function(n){return n.input&&n.input.is(":visible")&&!n.input.is(":disabled")&&!n.input.is(":focus")},_checkOffset:function(t,i,r){var u=t.dpDiv.outerWidth(),f=t.dpDiv.outerHeight(),h=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,e=document.documentElement.clientWidth+(r?0:n(document).scrollLeft()),s=document.documentElement.clientHeight+(r?0:n(document).scrollTop());return i.left-=this._get(t,"isRTL")?u-h:0,i.left-=r&&i.left===t.input.offset().left?n(document).scrollLeft():0,i.top-=r&&i.top===t.input.offset().top+o?n(document).scrollTop():0,i.left-=Math.min(i.left,i.left+u>e&&e>u?Math.abs(i.left+u-e):0),i.top-=Math.min(i.top,i.top+f>s&&s>f?Math.abs(f+o):0),i},_findPos:function(t){for(var i,r=this._getInst(t),u=this._get(r,"isRTL");t&&(t.type==="hidden"||t.nodeType!==1||n.expr.filters.hidden(t));)t=t[u?"previousSibling":"nextSibling"];return i=n(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var r,f,u,e,i=this._curInst;i&&(!t||i===n.data(t,"datepicker"))&&this._datepickerShowing&&(r=this._get(i,"showAnim"),f=this._get(i,"duration"),u=function(){n.datepicker._tidyDialog(i)},n.effects&&(n.effects.effect[r]||n.effects[r])?i.dpDiv.hide(r,n.datepicker._get(i,"showOptions"),f,u):i.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?f:null,u),r||u(),this._datepickerShowing=!1,e=this._get(i,"onClose"),e&&e.apply(i.input?i.input[0]:null,[i.input?i.input.val():"",i]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),n.blockUI&&(n.unblockUI(),n("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(n){n.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(n.datepicker._curInst){var i=n(t.target),r=n.datepicker._getInst(i[0]);(i[0].id===n.datepicker._mainDivId||i.parents("#"+n.datepicker._mainDivId).length!==0||i.hasClass(n.datepicker.markerClassName)||i.closest("."+n.datepicker._triggerClass).length||!n.datepicker._datepickerShowing||n.datepicker._inDialog&&n.blockUI)&&(!i.hasClass(n.datepicker.markerClassName)||n.datepicker._curInst===r)||n.datepicker._hideDatepicker()}},_adjustDate:function(t,i,r){var f=n(t),u=this._getInst(f[0]);this._isDisabledDatepicker(f[0])||(this._adjustInstDate(u,i+(r==="M"?this._get(u,"showCurrentAtPos"):0),r),this._updateDatepicker(u))},_gotoToday:function(t){var r,u=n(t),i=this._getInst(u[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(r=new Date,i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear());this._notifyChange(i);this._adjustDate(u)},_selectMonthYear:function(t,i,r){var f=n(t),u=this._getInst(f[0]);u["selected"+(r==="M"?"Month":"Year")]=u["draw"+(r==="M"?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10);this._notifyChange(u);this._adjustDate(f)},_selectDay:function(t,i,r,u){var f,e=n(t);n(u).hasClass(this._unselectableClass)||this._isDisabledDatepicker(e[0])||(f=this._getInst(e[0]),f.selectedDay=f.currentDay=n("a",u).html(),f.selectedMonth=f.currentMonth=i,f.selectedYear=f.currentYear=r,this._selectDate(t,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(t){var i=n(t);this._selectDate(i,"")},_selectDate:function(t,i){var u,f=n(t),r=this._getInst(f[0]);i=i!=null?i:this._formatDate(r);r.input&&r.input.val(i);this._updateAlternate(r);u=this._get(r,"onSelect");u?u.apply(r.input?r.input[0]:null,[i,r]):r.input&&r.input.trigger("change");r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,r,u,f=this._get(t,"altField");f&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),u=this.formatDate(i,r,this._getFormatConfig(t)),n(f).each(function(){n(this).val(u)}))},noWeekends:function(n){var t=n.getDay();return[t>0&&t<6,""]},iso8601Week:function(n){var i,t=new Date(n.getTime());return t.setDate(t.getDate()+4-(t.getDay()||7)),i=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(t,i,r){if(t==null||i==null)throw"Invalid arguments";if(i=typeof i=="object"?i.toString():i+"",i==="")return null;for(var a,v,f=0,y=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,d=typeof y!="string"?y:(new Date).getFullYear()%100+parseInt(y,10),g=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,nt=(r?r.dayNames:null)||this._defaults.dayNames,tt=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,it=(r?r.monthNames:null)||this._defaults.monthNames,e=-1,s=-1,h=-1,p=-1,w=!1,u,l=function(n){var i=o+1<t.length&&t.charAt(o+1)===n;return i&&o++,i},c=function(n){var u=l(n),r=n==="@"?14:n==="!"?20:n==="y"&&u?4:n==="o"?3:2,e=n==="y"?r:1,o=new RegExp("^\\d{"+e+","+r+"}"),t=i.substring(f).match(o);if(!t)throw"Missing number at position "+f;return f+=t[0].length,parseInt(t[0],10)},k=function(t,r,u){var e=-1,o=n.map(l(t)?u:r,function(n,t){return[[t,n]]}).sort(function(n,t){return-(n[1].length-t[1].length)});if(n.each(o,function(n,t){var r=t[1];if(i.substr(f,r.length).toLowerCase()===r.toLowerCase())return e=t[0],f+=r.length,!1}),e!==-1)return e+1;throw"Unknown name at position "+f;},b=function(){if(i.charAt(f)!==t.charAt(o))throw"Unexpected literal at position "+f;f++},o=0;o<t.length;o++)if(w)t.charAt(o)!=="'"||l("'")?b():w=!1;else switch(t.charAt(o)){case"d":h=c("d");break;case"D":k("D",g,nt);break;case"o":p=c("o");break;case"m":s=c("m");break;case"M":s=k("M",tt,it);break;case"y":e=c("y");break;case"@":u=new Date(c("@"));e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"!":u=new Date((c("!")-this._ticksTo1970)/1e4);e=u.getFullYear();s=u.getMonth()+1;h=u.getDate();break;case"'":l("'")?b():w=!0;break;default:b()}if(f<i.length&&(v=i.substr(f),!/^\s+/.test(v)))throw"Extra/unparsed characters found in date: "+v;if(e===-1?e=(new Date).getFullYear():e<100&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=d?0:-100)),p>-1){s=1;h=p;do{if(a=this._getDaysInMonth(e,s-1),h<=a)break;s++;h-=a}while(1)}if(u=this._daylightSavingAdjust(new Date(e,s-1,h)),u.getFullYear()!==e||u.getMonth()+1!==s||u.getDate()!==h)throw"Invalid date";return u},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*864e9,formatDate:function(n,t,i){if(!t)return"";var u,h=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,c=(i?i.dayNames:null)||this._defaults.dayNames,l=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,f=function(t){var i=u+1<n.length&&n.charAt(u+1)===t;return i&&u++,i},e=function(n,t,i){var r=""+t;if(f(n))while(r.length<i)r="0"+r;return r},s=function(n,t,i,r){return f(n)?r[t]:i[t]},r="",o=!1;if(t)for(u=0;u<n.length;u++)if(o)n.charAt(u)!=="'"||f("'")?r+=n.charAt(u):o=!1;else switch(n.charAt(u)){case"d":r+=e("d",t.getDate(),2);break;case"D":r+=s("D",t.getDay(),h,c);break;case"o":r+=e("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":r+=e("m",t.getMonth()+1,2);break;case"M":r+=s("M",t.getMonth(),l,a);break;case"y":r+=f("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":r+=t.getTime();break;case"!":r+=t.getTime()*1e4+this._ticksTo1970;break;case"'":f("'")?r+="'":o=!0;break;default:r+=n.charAt(u)}return r},_possibleChars:function(n){for(var i="",r=!1,u=function(i){var r=t+1<n.length&&n.charAt(t+1)===i;return r&&t++,r},t=0;t<n.length;t++)if(r)n.charAt(t)!=="'"||u("'")?i+=n.charAt(t):r=!1;else switch(n.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":u("'")?i+="'":r=!0;break;default:i+=n.charAt(t)}return i},_get:function(n,t){return n.settings[t]!==undefined?n.settings[t]:this._defaults[t]},_setDateFromField:function(n,t){if(n.input.val()!==n.lastVal){var f=this._get(n,"dateFormat"),r=n.lastVal=n.input?n.input.val():null,u=this._getDefaultDate(n),i=u,e=this._getFormatConfig(n);try{i=this.parseDate(f,r,e)||u}catch(o){r=t?"":r}n.selectedDay=i.getDate();n.drawMonth=n.selectedMonth=i.getMonth();n.drawYear=n.selectedYear=i.getFullYear();n.currentDay=r?i.getDate():0;n.currentMonth=r?i.getMonth():0;n.currentYear=r?i.getFullYear():0;this._adjustInstDate(n)}},_getDefaultDate:function(n){return this._restrictMinMax(n,this._determineDate(n,this._get(n,"defaultDate"),new Date))},_determineDate:function(t,i,r){var f=function(n){var t=new Date;return t.setDate(t.getDate()+n),t},e=function(i){try{return n.datepicker.parseDate(n.datepicker._get(t,"dateFormat"),i,n.datepicker._getFormatConfig(t))}catch(h){}for(var o=(i.toLowerCase().match(/^c/)?n.datepicker._getDate(t):null)||new Date,f=o.getFullYear(),e=o.getMonth(),r=o.getDate(),s=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,u=s.exec(i);u;){switch(u[2]||"d"){case"d":case"D":r+=parseInt(u[1],10);break;case"w":case"W":r+=parseInt(u[1],10)*7;break;case"m":case"M":e+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e));break;case"y":case"Y":f+=parseInt(u[1],10);r=Math.min(r,n.datepicker._getDaysInMonth(f,e))}u=s.exec(i)}return new Date(f,e,r)},u=i==null||i===""?r:typeof i=="string"?e(i):typeof i=="number"?isNaN(i)?r:f(i):new Date(i.getTime());return u=u&&u.toString()==="Invalid Date"?r:u,u&&(u.setHours(0),u.setMinutes(0),u.setSeconds(0),u.setMilliseconds(0)),this._daylightSavingAdjust(u)},_daylightSavingAdjust:function(n){return n?(n.setHours(n.getHours()>12?n.getHours()+2:0),n):null},_setDate:function(n,t,i){var u=!t,f=n.selectedMonth,e=n.selectedYear,r=this._restrictMinMax(n,this._determineDate(n,t,new Date));n.selectedDay=n.currentDay=r.getDate();n.drawMonth=n.selectedMonth=n.currentMonth=r.getMonth();n.drawYear=n.selectedYear=n.currentYear=r.getFullYear();f===n.selectedMonth&&e===n.selectedYear||i||this._notifyChange(n);this._adjustInstDate(n);n.input&&n.input.val(u?"":this._formatDate(n))},_getDate:function(n){return!n.currentYear||n.input&&n.input.val()===""?null:this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay))},_attachHandlers:function(t){var r=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){n.datepicker._adjustDate(i,-r,"M")},next:function(){n.datepicker._adjustDate(i,+r,"M")},hide:function(){n.datepicker._hideDatepicker()},today:function(){n.datepicker._gotoToday(i)},selectDay:function(){return n.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return n.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return n.datepicker._selectMonthYear(i,this,"Y"),!1}};n(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(n){var b,s,rt,h,ut,k,ft,et,ri,c,ot,ui,fi,ei,oi,st,g,si,ht,nt,f,y,ct,p,lt,l,u,at,vt,yt,pt,tt,wt,i,bt,kt,d,a,it,dt=new Date,gt=this._daylightSavingAdjust(new Date(dt.getFullYear(),dt.getMonth(),dt.getDate())),e=this._get(n,"isRTL"),li=this._get(n,"showButtonPanel"),hi=this._get(n,"hideIfNoPrevNext"),ni=this._get(n,"navigationAsDateFormat"),o=this._getNumberOfMonths(n),ai=this._get(n,"showCurrentAtPos"),ci=this._get(n,"stepMonths"),ti=o[0]!==1||o[1]!==1,ii=this._daylightSavingAdjust(n.currentDay?new Date(n.currentYear,n.currentMonth,n.currentDay):new Date(9999,9,9)),w=this._getMinMaxDate(n,"min"),v=this._getMinMaxDate(n,"max"),t=n.drawMonth-ai,r=n.drawYear;if(t<0&&(t+=12,r--),v)for(b=this._daylightSavingAdjust(new Date(v.getFullYear(),v.getMonth()-o[0]*o[1]+1,v.getDate())),b=w&&b<w?w:b;this._daylightSavingAdjust(new Date(r,t,1))>b;)t--,t<0&&(t=11,r--);for(n.drawMonth=t,n.drawYear=r,s=this._get(n,"prevText"),s=ni?this.formatDate(s,this._daylightSavingAdjust(new Date(r,t-ci,1)),this._getFormatConfig(n)):s,rt=this._canAdjustMonth(n,-1,r,t)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"e":"w")+"'>"+s+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"e":"w")+"'>"+s+"<\/span><\/a>",h=this._get(n,"nextText"),h=ni?this.formatDate(h,this._daylightSavingAdjust(new Date(r,t+ci,1)),this._getFormatConfig(n)):h,ut=this._canAdjustMonth(n,1,r,t)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"w":"e")+"'>"+h+"<\/span><\/a>":hi?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+h+"'><span class='ui-icon ui-icon-circle-triangle-"+(e?"w":"e")+"'>"+h+"<\/span><\/a>",k=this._get(n,"currentText"),ft=this._get(n,"gotoCurrent")&&n.currentDay?ii:gt,k=ni?this.formatDate(k,ft,this._getFormatConfig(n)):k,et=n.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(n,"closeText")+"<\/button>",ri=li?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(e?et:"")+(this._isInRange(n,ft)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+k+"<\/button>":"")+(e?"":et)+"<\/div>":"",c=parseInt(this._get(n,"firstDay"),10),c=isNaN(c)?0:c,ot=this._get(n,"showWeek"),ui=this._get(n,"dayNames"),fi=this._get(n,"dayNamesMin"),ei=this._get(n,"monthNames"),oi=this._get(n,"monthNamesShort"),st=this._get(n,"beforeShowDay"),g=this._get(n,"showOtherMonths"),si=this._get(n,"selectOtherMonths"),ht=this._getDefaultDate(n),nt="",f,y=0;y<o[0];y++){for(ct="",this.maxRows=4,p=0;p<o[1];p++){if(lt=this._daylightSavingAdjust(new Date(r,t,n.selectedDay)),l=" ui-corner-all",u="",ti){if(u+="<div class='ui-datepicker-group",o[1]>1)switch(p){case 0:u+=" ui-datepicker-group-first";l=" ui-corner-"+(e?"right":"left");break;case o[1]-1:u+=" ui-datepicker-group-last";l=" ui-corner-"+(e?"left":"right");break;default:u+=" ui-datepicker-group-middle";l=""}u+="'>"}for(u+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+l+"'>"+(/all|left/.test(l)&&y===0?e?ut:rt:"")+(/all|right/.test(l)&&y===0?e?rt:ut:"")+this._generateMonthYearHeader(n,t,r,w,v,y>0||p>0,ei,oi)+"<\/div><table class='ui-datepicker-calendar'><thead><tr>",at=ot?"<th class='ui-datepicker-week-col'>"+this._get(n,"weekHeader")+"<\/th>":"",f=0;f<7;f++)vt=(f+c)%7,at+="<th scope='col'"+((f+c+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+ui[vt]+"'>"+fi[vt]+"<\/span><\/th>";for(u+=at+"<\/tr><\/thead><tbody>",yt=this._getDaysInMonth(r,t),r===n.selectedYear&&t===n.selectedMonth&&(n.selectedDay=Math.min(n.selectedDay,yt)),pt=(this._getFirstDayOfMonth(r,t)-c+7)%7,tt=Math.ceil((pt+yt)/7),wt=ti?this.maxRows>tt?this.maxRows:tt:tt,this.maxRows=wt,i=this._daylightSavingAdjust(new Date(r,t,1-pt)),bt=0;bt<wt;bt++){for(u+="<tr>",kt=ot?"<td class='ui-datepicker-week-col'>"+this._get(n,"calculateWeek")(i)+"<\/td>":"",f=0;f<7;f++)d=st?st.apply(n.input?n.input[0]:null,[i]):[!0,""],a=i.getMonth()!==t,it=a&&!si||!d[0]||w&&i<w||v&&i>v,kt+="<td class='"+((f+c+6)%7>=5?" ui-datepicker-week-end":"")+(a?" ui-datepicker-other-month":"")+(i.getTime()===lt.getTime()&&t===n.selectedMonth&&n._keyEvent||ht.getTime()===i.getTime()&&ht.getTime()===lt.getTime()?" "+this._dayOverClass:"")+(it?" "+this._unselectableClass+" ui-state-disabled":"")+(a&&!g?"":" "+d[1]+(i.getTime()===ii.getTime()?" "+this._currentClass:"")+(i.getTime()===gt.getTime()?" ui-datepicker-today":""))+"'"+((!a||g)&&d[2]?" title='"+d[2].replace(/'/g,"&#39;")+"'":"")+(it?"":" data-handler='selectDay' data-event='click' data-month='"+i.getMonth()+"' data-year='"+i.getFullYear()+"'")+">"+(a&&!g?"&#xa0;":it?"<span class='ui-state-default'>"+i.getDate()+"<\/span>":"<a class='ui-state-default"+(i.getTime()===gt.getTime()?" ui-state-highlight":"")+(i.getTime()===ii.getTime()?" ui-state-active":"")+(a?" ui-priority-secondary":"")+"' href='#'>"+i.getDate()+"<\/a>")+"<\/td>",i.setDate(i.getDate()+1),i=this._daylightSavingAdjust(i);u+=kt+"<\/tr>"}t++;t>11&&(t=0,r++);u+="<\/tbody><\/table>"+(ti?"<\/div>"+(o[0]>0&&p===o[1]-1?"<div class='ui-datepicker-row-break'><\/div>":""):"");ct+=u}nt+=ct}return nt+=ri,n._keyEvent=!1,nt},_generateMonthYearHeader:function(n,t,i,r,u,f,e,o){var k,d,h,v,y,p,s,a,w=this._get(n,"changeMonth"),b=this._get(n,"changeYear"),g=this._get(n,"showMonthAfterYear"),c="<div class='ui-datepicker-title'>",l="";if(f||!w)l+="<span class='ui-datepicker-month'>"+e[t]+"<\/span>";else{for(k=r&&r.getFullYear()===i,d=u&&u.getFullYear()===i,l+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!k||h>=r.getMonth())&&(!d||h<=u.getMonth())&&(l+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+o[h]+"<\/option>");l+="<\/select>"}if(g||(c+=l+(f||!(w&&b)?"&#xa0;":"")),!n.yearshtml)if(n.yearshtml="",f||!b)c+="<span class='ui-datepicker-year'>"+i+"<\/span>";else{for(v=this._get(n,"yearRange").split(":"),y=(new Date).getFullYear(),p=function(n){var t=n.match(/c[+\-].*/)?i+parseInt(n.substring(1),10):n.match(/[+\-].*/)?y+parseInt(n,10):parseInt(n,10);return isNaN(t)?y:t},s=p(v[0]),a=Math.max(s,p(v[1]||"")),s=r?Math.max(s,r.getFullYear()):s,a=u?Math.min(a,u.getFullYear()):a,n.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";s<=a;s++)n.yearshtml+="<option value='"+s+"'"+(s===i?" selected='selected'":"")+">"+s+"<\/option>";n.yearshtml+="<\/select>";c+=n.yearshtml;n.yearshtml=null}return c+=this._get(n,"yearSuffix"),g&&(c+=(f||!(w&&b)?"&#xa0;":"")+l),c+"<\/div>"},_adjustInstDate:function(n,t,i){var u=n.drawYear+(i==="Y"?t:0),f=n.drawMonth+(i==="M"?t:0),e=Math.min(n.selectedDay,this._getDaysInMonth(u,f))+(i==="D"?t:0),r=this._restrictMinMax(n,this._daylightSavingAdjust(new Date(u,f,e)));n.selectedDay=r.getDate();n.drawMonth=n.selectedMonth=r.getMonth();n.drawYear=n.selectedYear=r.getFullYear();(i==="M"||i==="Y")&&this._notifyChange(n)},_restrictMinMax:function(n,t){var i=this._getMinMaxDate(n,"min"),r=this._getMinMaxDate(n,"max"),u=i&&t<i?i:t;return r&&u>r?r:u},_notifyChange:function(n){var t=this._get(n,"onChangeMonthYear");t&&t.apply(n.input?n.input[0]:null,[n.selectedYear,n.selectedMonth+1,n])},_getNumberOfMonths:function(n){var t=this._get(n,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(n,t){return this._determineDate(n,this._get(n,t+"Date"),null)},_getDaysInMonth:function(n,t){return 32-this._daylightSavingAdjust(new Date(n,t,32)).getDate()},_getFirstDayOfMonth:function(n,t){return new Date(n,t,1).getDay()},_canAdjustMonth:function(n,t,i,r){var f=this._getNumberOfMonths(n),u=this._daylightSavingAdjust(new Date(i,r+(t<0?t:f[0]*f[1]),1));return t<0&&u.setDate(this._getDaysInMonth(u.getFullYear(),u.getMonth())),this._isInRange(n,u)},_isInRange:function(n,t){var i,f,e=this._getMinMaxDate(n,"min"),o=this._getMinMaxDate(n,"max"),r=null,u=null,s=this._get(n,"yearRange");return s&&(i=s.split(":"),f=(new Date).getFullYear(),r=parseInt(i[0],10),u=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=f),i[1].match(/[+\-].*/)&&(u+=f)),(!e||t.getTime()>=e.getTime())&&(!o||t.getTime()<=o.getTime())&&(!r||t.getFullYear()>=r)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(n){var t=this._get(n,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(n,"dayNamesShort"),dayNames:this._get(n,"dayNames"),monthNamesShort:this._get(n,"monthNamesShort"),monthNames:this._get(n,"monthNames")}},_formatDate:function(n,t,i,r){t||(n.currentDay=n.selectedDay,n.currentMonth=n.selectedMonth,n.currentYear=n.selectedYear);var u=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(n.currentYear,n.currentMonth,n.currentDay));return this.formatDate(this._get(n,"dateFormat"),u,this._getFormatConfig(n))}});n.fn.datepicker=function(t){if(!this.length)return this;n.datepicker.initialized||(n(document).mousedown(n.datepicker._checkExternalClick),n.datepicker.initialized=!0);n("#"+n.datepicker._mainDivId).length===0&&n("body").append(n.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return typeof t=="string"&&(t==="isDisabled"||t==="getDate"||t==="widget")?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this[0]].concat(i)):this.each(function(){typeof t=="string"?n.datepicker["_"+t+"Datepicker"].apply(n.datepicker,[this].concat(i)):n.datepicker._attachDatepicker(this,t)})};n.datepicker=new v;n.datepicker.initialized=!1;n.datepicker.uuid=(new Date).getTime();n.datepicker.version="1.11.4";it=n.datepicker;n.widget("ui.draggable",n.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative();this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._setHandleClassName();this._mouseInit()},_setOption:function(n,t){this._super(n,t);n==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._removeHandleClassName();this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return(this._blurActiveElement(t),this.helper||i.disabled||n(t.target).closest(".ui-resizable-handle").length>0)?!1:(this.handle=this._getHandle(t),!this.handle)?!1:(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=n(this);return n("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=this.document[0];if(this.handleElement.is(t.target))try{i.activeElement&&i.activeElement.nodeName.toLowerCase()!=="body"&&n(i.activeElement).blur()}catch(r){}},_mouseStart:function(t){var i=this.options;return(this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),n.ui.ddmanager&&(n.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return n(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1)?(this._clear(),!1):(this._cacheHelperProportions(),n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this._normalizeRightBottom(),this._mouseDrag(t,!0),n.ui.ddmanager&&n.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(n){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:n.pageX-this.offset.left,top:n.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var r=this,i=!1;return n.ui.ddmanager&&!this.options.dropBehaviour&&(i=n.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!i||this.options.revert==="valid"&&i||this.options.revert===!0||n.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?n(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),n.ui.ddmanager&&n.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.focus(),n.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!n(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element;this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(t){var r=this.options,u=n.isFunction(r.helper),i=u?n(r.helper.apply(this.element[0],[t])):r.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(r.appendTo==="parent"?this.element[0].parentNode:r.appendTo),u&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(n){return/(html|body)/i.test(n.tagName)||n===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==i&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var n=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:n.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f,t,i,r=this.options,u=this.document[0];if(this.relativeContainer=null,!r.containment){this.containment=null;return}if(r.containment==="window"){this.containment=[n(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,n(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,n(window).scrollLeft()+n(window).width()-this.helperProportions.width-this.margins.left,n(window).scrollTop()+(n(window).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment==="document"){this.containment=[0,0,n(u).width()-this.helperProportions.width-this.margins.left,(n(u).height()||u.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(r.containment.constructor===Array){this.containment=r.containment;return}(r.containment==="parent"&&(r.containment=this.helper[0].parentNode),t=n(r.containment),i=t[0],i)&&(f=/(scroll|auto)/.test(t.css("overflow")),this.containment=[(parseInt(t.css("borderLeftWidth"),10)||0)+(parseInt(t.css("paddingLeft"),10)||0),(parseInt(t.css("borderTopWidth"),10)||0)+(parseInt(t.css("paddingTop"),10)||0),(f?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t.css("borderRightWidth"),10)||0)-(parseInt(t.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t.css("borderBottomWidth"),10)||0)-(parseInt(t.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=t)},_convertPositionTo:function(n,t){t||(t=this.position);var i=n==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)*i}},_generatePosition:function(n,t){var i,s,u,f,r=this.options,h=this._isRootNode(this.scrollParent[0]),e=n.pageX,o=n.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,n.pageX-this.offset.click.left<i[0]&&(e=i[0]+this.offset.click.left),n.pageY-this.offset.click.top<i[1]&&(o=i[1]+this.offset.click.top),n.pageX-this.offset.click.left>i[2]&&(e=i[2]+this.offset.click.left),n.pageY-this.offset.click.top>i[3]&&(o=i[3]+this.offset.click.top)),r.grid&&(u=r.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,o=i?u-this.offset.click.top>=i[1]||u-this.offset.click.top>i[3]?u:u-this.offset.click.top>=i[1]?u-r.grid[1]:u+r.grid[1]:u,f=r.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,e=i?f-this.offset.click.left>=i[0]||f-this.offset.click.left>i[2]?f:f-this.offset.click.left>=i[0]?f-r.grid[0]:f+r.grid[0]:f),r.axis==="y"&&(e=this.originalPageX),r.axis==="x"&&(o=this.originalPageY)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){this.options.axis!=="y"&&this.helper.css("right")!=="auto"&&(this.helper.width(this.helper.width()),this.helper.css("right","auto"));this.options.axis!=="x"&&this.helper.css("bottom")!=="auto"&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(t,i,r){return r=r||this._uiHash(),n.ui.plugin.call(this,t,[i,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),n.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});n.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,r){var u=n.extend({},i,{item:r.element});r.sortables=[];n(r.options.connectToSortable).each(function(){var i=n(this).sortable("instance");i&&!i.options.disabled&&(r.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,u))})},stop:function(t,i,r){var u=n.extend({},i,{item:r.element});r.cancelHelperRemoval=!1;n.each(r.sortables,function(){var n=this;n.isOver?(n.isOver=0,r.cancelHelperRemoval=!0,n.cancelHelperRemoval=!1,n._storedCSS={position:n.placeholder.css("position"),top:n.placeholder.css("top"),left:n.placeholder.css("left")},n._mouseStop(t),n.options.helper=n.options._helper):(n.cancelHelperRemoval=!0,n._trigger("deactivate",t,u))})},drag:function(t,i,r){n.each(r.sortables,function(){var f=!1,u=this;u.positionAbs=r.positionAbs;u.helperProportions=r.helperProportions;u.offset.click=r.offset.click;u._intersectsWith(u.containerCache)&&(f=!0,n.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==u&&this._intersectsWith(this.containerCache)&&n.contains(u.element[0],this.element[0])&&(f=!1),f}));f?(u.isOver||(u.isOver=1,r._parent=i.helper.parent(),u.currentItem=i.helper.appendTo(u.element).data("ui-sortable-item",!0),u.options._helper=u.options.helper,u.options.helper=function(){return i.helper[0]},t.target=u.currentItem[0],u._mouseCapture(t,!0),u._mouseStart(t,!0,!0),u.offset.click.top=r.offset.click.top,u.offset.click.left=r.offset.click.left,u.offset.parent.left-=r.offset.parent.left-u.offset.parent.left,u.offset.parent.top-=r.offset.parent.top-u.offset.parent.top,r._trigger("toSortable",t),r.dropped=u.element,n.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,u.fromOutside=r),u.currentItem&&(u._mouseDrag(t),i.position=u.position)):u.isOver&&(u.isOver=0,u.cancelHelperRemoval=!0,u.options._revert=u.options.revert,u.options.revert=!1,u._trigger("out",t,u._uiHash(u)),u._mouseStop(t,!0),u.options.revert=u.options._revert,u.options.helper=u.options._helper,u.placeholder&&u.placeholder.remove(),i.helper.appendTo(r._parent),r._refreshOffsets(t),i.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,n.each(r.sortables,function(){this.refreshPositions()}))})}});n.ui.plugin.add("draggable","cursor",{start:function(t,i,r){var u=n("body"),f=r.options;u.css("cursor")&&(f._cursor=u.css("cursor"));u.css("cursor",f.cursor)},stop:function(t,i,r){var u=r.options;u._cursor&&n("body").css("cursor",u._cursor)}});n.ui.plugin.add("draggable","opacity",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("opacity")&&(f._opacity=u.css("opacity"));u.css("opacity",f.opacity)},stop:function(t,i,r){var u=r.options;u._opacity&&n(i.helper).css("opacity",u._opacity)}});n.ui.plugin.add("draggable","scroll",{start:function(n,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1));i.scrollParentNotHidden[0]!==i.document[0]&&i.scrollParentNotHidden[0].tagName!=="HTML"&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,r){var u=r.options,o=!1,e=r.scrollParentNotHidden[0],f=r.document[0];e!==f&&e.tagName!=="HTML"?(u.axis&&u.axis==="x"||(r.overflowOffset.top+e.offsetHeight-t.pageY<u.scrollSensitivity?e.scrollTop=o=e.scrollTop+u.scrollSpeed:t.pageY-r.overflowOffset.top<u.scrollSensitivity&&(e.scrollTop=o=e.scrollTop-u.scrollSpeed)),u.axis&&u.axis==="y"||(r.overflowOffset.left+e.offsetWidth-t.pageX<u.scrollSensitivity?e.scrollLeft=o=e.scrollLeft+u.scrollSpeed:t.pageX-r.overflowOffset.left<u.scrollSensitivity&&(e.scrollLeft=o=e.scrollLeft-u.scrollSpeed))):(u.axis&&u.axis==="x"||(t.pageY-n(f).scrollTop()<u.scrollSensitivity?o=n(f).scrollTop(n(f).scrollTop()-u.scrollSpeed):n(window).height()-(t.pageY-n(f).scrollTop())<u.scrollSensitivity&&(o=n(f).scrollTop(n(f).scrollTop()+u.scrollSpeed))),u.axis&&u.axis==="y"||(t.pageX-n(f).scrollLeft()<u.scrollSensitivity?o=n(f).scrollLeft(n(f).scrollLeft()-u.scrollSpeed):n(window).width()-(t.pageX-n(f).scrollLeft())<u.scrollSensitivity&&(o=n(f).scrollLeft(n(f).scrollLeft()+u.scrollSpeed))));o!==!1&&n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(r,t)}});n.ui.plugin.add("draggable","snap",{start:function(t,i,r){var u=r.options;r.snapElements=[];n(u.snap.constructor!==String?u.snap.items||":data(ui-draggable)":u.snap).each(function(){var t=n(this),i=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,r){for(var e,o,s,h,c,a,l,v,w,b=r.options,f=b.snapTolerance,y=i.offset.left,k=y+r.helperProportions.width,p=i.offset.top,d=p+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--){if(c=r.snapElements[u].left-r.margins.left,a=c+r.snapElements[u].width,l=r.snapElements[u].top-r.margins.top,v=l+r.snapElements[u].height,k<c-f||y>a+f||d<l-f||p>v+f||!n.contains(r.snapElements[u].item.ownerDocument,r.snapElements[u].item)){r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item}));r.snapElements[u].snapping=!1;continue}b.snapMode!=="inner"&&(e=Math.abs(l-d)<=f,o=Math.abs(v-p)<=f,s=Math.abs(c-k)<=f,h=Math.abs(a-y)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a}).left));w=e||o||s||h;b.snapMode!=="outer"&&(e=Math.abs(l-p)<=f,o=Math.abs(v-d)<=f,s=Math.abs(c-y)<=f,h=Math.abs(a-k)<=f,e&&(i.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),o&&(i.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top),s&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left),h&&(i.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left));!r.snapElements[u].snapping&&(e||o||s||h||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,n.extend(r._uiHash(),{snapItem:r.snapElements[u].item}));r.snapElements[u].snapping=e||o||s||h||w}}});n.ui.plugin.add("draggable","stack",{start:function(t,i,r){var f,e=r.options,u=n.makeArray(n(e.stack)).sort(function(t,i){return(parseInt(n(t).css("zIndex"),10)||0)-(parseInt(n(i).css("zIndex"),10)||0)});u.length&&(f=parseInt(n(u[0]).css("zIndex"),10)||0,n(u).each(function(t){n(this).css("zIndex",f+t)}),this.css("zIndex",f+u.length))}});n.ui.plugin.add("draggable","zIndex",{start:function(t,i,r){var u=n(i.helper),f=r.options;u.css("zIndex")&&(f._zIndex=u.css("zIndex"));u.css("zIndex",f.zIndex)},stop:function(t,i,r){var u=r.options;u._zIndex&&n(i.helper).css("zIndex",u._zIndex)}});rt=n.ui.draggable;n.widget("ui.resizable",n.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(n){return parseInt(n,10)||0},_isNumber:function(n){return!isNaN(parseInt(n,10))},_hasScroll:function(t,i){if(n(t).css("overflow")==="hidden")return!1;var r=i&&i==="left"?"scrollLeft":"scrollTop",u=!1;return t[r]>0?!0:(t[r]=1,u=t[r]>0,t[r]=0,u)},_create:function(){var e,f,u,i,o,r=this,t=this.options;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'><\/div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=n(),this.handles.constructor===String)for(this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},f=0;f<e.length;f++)u=n.trim(e[f]),o="ui-resizable-"+u,i=n("<div class='ui-resizable-handle "+o+"'><\/div>"),i.css({zIndex:t.zIndex}),"se"===u&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[u]=".ui-resizable-"+u,this.element.append(i);this._renderAxis=function(t){var i,u,f,e;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=n(this.handles[i]),this._on(this.handles[i],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(u=n(this.handles[i],this.element),e=/sw|ne|nw|se|n|s/.test(i)?u.outerHeight():u.outerWidth(),f=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(f,e),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.mouseover(function(){r.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=i&&i[1]?i[1]:"se")});t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){t.disabled||(n(this).removeClass("ui-resizable-autohide"),r._handles.show())}).mouseleave(function(){t.disabled||r.resizing||(n(this).addClass("ui-resizable-autohide"),r._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var r,i,u=!1;for(r in this.handles)i=n(this.handles[r])[0],(i===t.target||n.contains(i,t.target))&&(u=!0);return!this.options.disabled&&u},_mouseStart:function(t){var u,f,e,r=this.options,i=this.element;return this.resizing=!0,this._renderProxy(),u=this._num(this.helper.css("left")),f=this._num(this.helper.css("top")),r.containment&&(u+=n(r.containment).scrollLeft()||0,f+=n(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:u,top:f},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalPosition={left:u,top:f},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor",e==="auto"?this.axis+"-resize":e),i.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,r,u=this.originalMousePosition,e=this.axis,o=t.pageX-u.left||0,s=t.pageY-u.top||0,f=this._change[e];return(this._updatePrevProperties(),!f)?!1:(i=f.apply(this,[t,o,s]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var r,u,f,e,o,s,h,c=this.options,i=this;return this._helper&&(r=this._proportionallyResizeElements,u=r.length&&/textarea/i.test(r[0].nodeName),f=u&&this._hasScroll(r[0],"left")?0:i.sizeDiff.height,e=u?0:i.sizeDiff.width,o={width:i.helper.width()-e,height:i.helper.height()-f},s=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null,c.animate||this.element.css(n.extend(o,{top:h,left:s})),i.helper.height(i.size.height),i.helper.width(i.size.width),this._helper&&!c.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var n={};return this.position.top!==this.prevPosition.top&&(n.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(n.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(n.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(n.height=this.size.height+"px"),this.helper.css(n),n},_updateVirtualBoundaries:function(n){var r,u,f,e,t,i=this.options;t={minWidth:this._isNumber(i.minWidth)?i.minWidth:0,maxWidth:this._isNumber(i.maxWidth)?i.maxWidth:Infinity,minHeight:this._isNumber(i.minHeight)?i.minHeight:0,maxHeight:this._isNumber(i.maxHeight)?i.maxHeight:Infinity};(this._aspectRatio||n)&&(r=t.minHeight*this.aspectRatio,f=t.minWidth/this.aspectRatio,u=t.maxHeight*this.aspectRatio,e=t.maxWidth/this.aspectRatio,r>t.minWidth&&(t.minWidth=r),f>t.minHeight&&(t.minHeight=f),u<t.maxWidth&&(t.maxWidth=u),e<t.maxHeight&&(t.maxHeight=e));this._vBoundaries=t},_updateCache:function(n){this.offset=this.helper.offset();this._isNumber(n.left)&&(this.position.left=n.left);this._isNumber(n.top)&&(this.position.top=n.top);this._isNumber(n.height)&&(this.size.height=n.height);this._isNumber(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var t=this.position,i=this.size,r=this.axis;return this._isNumber(n.height)?n.width=n.height*this.aspectRatio:this._isNumber(n.width)&&(n.height=n.width/this.aspectRatio),r==="sw"&&(n.left=t.left+(i.width-n.width),n.top=null),r==="nw"&&(n.top=t.top+(i.height-n.height),n.left=t.left+(i.width-n.width)),n},_respectSize:function(n){var t=this._vBoundaries,i=this.axis,r=this._isNumber(n.width)&&t.maxWidth&&t.maxWidth<n.width,u=this._isNumber(n.height)&&t.maxHeight&&t.maxHeight<n.height,f=this._isNumber(n.width)&&t.minWidth&&t.minWidth>n.width,e=this._isNumber(n.height)&&t.minHeight&&t.minHeight>n.height,o=this.originalPosition.left+this.originalSize.width,s=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return f&&(n.width=t.minWidth),e&&(n.height=t.minHeight),r&&(n.width=t.maxWidth),u&&(n.height=t.maxHeight),f&&h&&(n.left=o-t.minWidth),r&&h&&(n.left=o-t.maxWidth),e&&c&&(n.top=s-t.minHeight),u&&c&&(n.top=s-t.maxHeight),n.width||n.height||n.left||!n.top?n.width||n.height||n.top||!n.left||(n.left=null):n.top=null,n},_getPaddingPlusBorderDimensions:function(n){for(var t=0,i=[],r=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],u=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")];t<4;t++)i[t]=parseInt(r[t],10)||0,i[t]+=parseInt(u[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var n,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)n=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(n)),n.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset();this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'><\/div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);t!=="resize"&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).resizable("instance"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&i._hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var r,f,e,o,s,h,c,t=n(this).resizable("instance"),l=t.options,a=t.element,u=l.containment,i=u instanceof n?u.get(0):/parent/.test(u)?a.parent().get(0):u;i&&(t.containerElement=n(i),/document/.test(u)||u===document?(t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(r=n(i),f=[],n(["Top","Right","Left","Bottom"]).each(function(n,i){f[n]=t._num(r.css("padding"+i))}),t.containerOffset=r.offset(),t.containerPosition=r.position(),t.containerSize={height:r.innerHeight()-f[3],width:r.innerWidth()-f[1]},e=t.containerOffset,o=t.containerSize.height,s=t.containerSize.width,h=t._hasScroll(i,"left")?i.scrollWidth:s,c=t._hasScroll(i)?i.scrollHeight:o,t.parentData={element:i,left:e.left,top:e.top,width:h,height:c}))},resize:function(t){var o,s,h,c,i=n(this).resizable("instance"),v=i.options,r=i.containerOffset,l=i.position,f=i._aspectRatio||t.shiftKey,e={top:0,left:0},a=i.containerElement,u=!0;a[0]!==document&&/static/.test(a.css("position"))&&(e=r);l.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-e.left),f&&(i.size.height=i.size.width/i.aspectRatio,u=!1),i.position.left=v.helper?r.left:0);l.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*i.aspectRatio,u=!1),i.position.top=i._helper?r.top:0);h=i.containerElement.get(0)===i.element.parent().get(0);c=/relative|absolute/.test(i.containerElement.css("position"));h&&c?(i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top):(i.offset.left=i.element.offset().left,i.offset.top=i.element.offset().top);o=Math.abs(i.sizeDiff.width+(i._helper?i.offset.left-e.left:i.offset.left-r.left));s=Math.abs(i.sizeDiff.height+(i._helper?i.offset.top-e.top:i.offset.top-r.top));o+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-o,f&&(i.size.height=i.size.width/i.aspectRatio,u=!1));s+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-s,f&&(i.size.width=i.size.height*i.aspectRatio,u=!1));u||(i.position.left=i.prevPosition.left,i.position.top=i.prevPosition.top,i.size.width=i.prevSize.width,i.size.height=i.prevSize.height)},stop:function(){var t=n(this).resizable("instance"),r=t.options,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});n.ui.plugin.add("resizable","alsoResize",{start:function(){var t=n(this).resizable("instance"),i=t.options;n(i.alsoResize).each(function(){var t=n(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var r=n(this).resizable("instance"),e=r.options,u=r.originalSize,f=r.originalPosition,o={height:r.size.height-u.height||0,width:r.size.width-u.width||0,top:r.position.top-f.top||0,left:r.position.left-f.left||0};n(e.alsoResize).each(function(){var t=n(this),u=n(this).data("ui-resizable-alsoresize"),r={},f=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(f,function(n,t){var i=(u[t]||0)+(o[t]||0);i&&i>=0&&(r[t]=i||null)});t.css(r)})},stop:function(){n(this).removeData("resizable-alsoresize")}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).resizable("instance"),i=t.options,r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(){var h,t=n(this).resizable("instance"),i=t.options,y=t.size,o=t.originalSize,s=t.originalPosition,c=t.axis,l=typeof i.grid=="number"?[i.grid,i.grid]:i.grid,f=l[0]||1,e=l[1]||1,a=Math.round((y.width-o.width)/f)*f,v=Math.round((y.height-o.height)/e)*e,r=o.width+a,u=o.height+v,p=i.maxWidth&&i.maxWidth<r,w=i.maxHeight&&i.maxHeight<u,b=i.minWidth&&i.minWidth>r,k=i.minHeight&&i.minHeight>u;i.grid=l;b&&(r+=f);k&&(u+=e);p&&(r-=f);w&&(u-=e);/^(se|s|e)$/.test(c)?(t.size.width=r,t.size.height=u):/^(ne)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.top=s.top-v):/^(sw)$/.test(c)?(t.size.width=r,t.size.height=u,t.position.left=s.left-a):((u-e<=0||r-f<=0)&&(h=t._getPaddingPlusBorderDimensions(this)),u-e>0?(t.size.height=u,t.position.top=s.top-v):(u=e-h.height,t.size.height=u,t.position.top=s.top+o.height-u),r-f>0?(t.size.width=r,t.position.left=s.left-a):(r=f-h.width,t.size.width=r,t.position.left=s.left+o.width-r))}});ut=n.ui.resizable;ft=n.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=n(this).css(t).offset().top;i<0&&n(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();this.options.draggable&&n.fn.draggable&&this._makeDraggable();this.options.resizable&&n.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?n(t):this.document.find(t||"body").eq(0)},_destroy:function(){var n,t=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(!0,!0).remove();this.originalTitle&&this.element.attr("title",this.originalTitle);n=t.parent.children().eq(t.index);n.length&&n[0]!==this.element[0]?n.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:n.noop,enable:n.noop,close:function(t){var i,r=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement;i&&i.nodeName.toLowerCase()!=="body"&&n(i).blur()}catch(u){}this._hide(this.uiDialog,this.options.hide,function(){r._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var r=!1,f=this.uiDialog.siblings(".ui-front:visible").map(function(){return+n(this).css("z-index")}).get(),u=Math.max.apply(null,f);return u>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",u+1),r=!0),r&&!i&&this._trigger("focus",t),r},open:function(){var t=this;if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this._isOpen=!0;this.opener=n(this.document[0].activeElement);this._size();this._position();this._createOverlay();this._moveToTop(null,!0);this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1);this._show(this.uiDialog,this.options.show,function(){t._focusTabbable();t._trigger("focus")});this._makeFocusTarget();this._trigger("open")},_focusTabbable:function(){var n=this._focusedElement;n||(n=this.element.find("[autofocus]"));n.length||(n=this.element.find(":tabbable"));n.length||(n=this.uiDialogButtonPane.find(":tabbable"));n.length||(n=this.uiDialogTitlebarClose.filter(":tabbable"));n.length||(n=this.uiDialog);n.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||n.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault();i.call(this);this._delay(i)},_createWrapper:function(){this.uiDialog=n("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===n.ui.keyCode.ESCAPE){t.preventDefault();this.close(t);return}if(t.keyCode===n.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),r=i.filter(":first"),u=i.filter(":last");t.target!==u[0]&&t.target!==this.uiDialog[0]||t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(this._delay(function(){u.focus()}),t.preventDefault()):(this._delay(function(){r.focus()}),t.preventDefault())}},mousedown:function(n){this._moveToTop(n)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=n("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,{mousedown:function(t){n(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}});this.uiDialogTitlebarClose=n("<button type='button'><\/button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(n){n.preventDefault();this.close(n)}});t=n("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);this._title(t);this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(n){this.options.title||n.html("&#160;");n.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=n("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=n("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var i=this,t=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),n.isEmptyObject(t)||n.isArray(t)&&!t.length){this.uiDialog.removeClass("ui-dialog-buttons");return}n.each(t,function(t,r){var u,f;r=n.isFunction(r)?{click:r,text:t}:r;r=n.extend({type:"button"},r);u=r.click;r.click=function(){u.apply(i.element[0],arguments)};f={icons:r.icons,text:r.showText};delete r.icons;delete r.showText;n("<button><\/button>",r).button(f).appendTo(i.uiButtonSet)});this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function i(n){return{position:n.position,offset:n.offset}}var t=this,r=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,u){n(this).addClass("ui-dialog-dragging");t._blockFrames();t._trigger("dragStart",r,i(u))},drag:function(n,r){t._trigger("drag",n,i(r))},stop:function(u,f){var e=f.offset.left-t.document.scrollLeft(),o=f.offset.top-t.document.scrollTop();r.position={my:"left top",at:"left"+(e>=0?"+":"")+e+" top"+(o>=0?"+":"")+o,of:t.window};n(this).removeClass("ui-dialog-dragging");t._unblockFrames();t._trigger("dragStop",u,i(f))}})},_makeResizable:function(){function r(n){return{originalPosition:n.originalPosition,originalSize:n.originalSize,position:n.position,size:n.size}}var t=this,i=this.options,u=i.resizable,f=this.uiDialog.css("position"),e=typeof u=="string"?u:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:e,start:function(i,u){n(this).addClass("ui-dialog-resizing");t._blockFrames();t._trigger("resizeStart",i,r(u))},resize:function(n,i){t._trigger("resize",n,r(i))},stop:function(u,f){var e=t.uiDialog.offset(),o=e.left-t.document.scrollLeft(),s=e.top-t.document.scrollTop();i.height=t.uiDialog.height();i.width=t.uiDialog.width();i.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(s>=0?"+":"")+s,of:t.window};n(this).removeClass("ui-dialog-resizing");t._unblockFrames();t._trigger("resizeStop",u,r(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget();this._focusedElement=n(t.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=n.inArray(this,t);i!==-1&&t.splice(i,1)},_trackingInstances:function(){var n=this.document.data("ui-dialog-instances");return n||(n=[],this.document.data("ui-dialog-instances",n)),n},_minHeight:function(){var n=this.options;return n.height==="auto"?n.minHeight:Math.min(n.minHeight,n.height)},_position:function(){var n=this.uiDialog.is(":visible");n||this.uiDialog.show();this.uiDialog.position(this.options.position);n||this.uiDialog.hide()},_setOptions:function(t){var i=this,r=!1,u={};n.each(t,function(n,t){i._setOption(n,t);n in i.sizeRelatedOptions&&(r=!0);n in i.resizableRelatedOptions&&(u[n]=t)});r&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",u)},_setOption:function(n,t){var u,r,i=this.uiDialog;(n==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t),n!=="disabled")&&(this._super(n,t),n==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),n==="buttons"&&this._createButtons(),n==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),n==="draggable"&&(u=i.is(":data(ui-draggable)"),u&&!t&&i.draggable("destroy"),!u&&t&&this._makeDraggable()),n==="position"&&this._position(),n==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),r||t===!1||this._makeResizable()),n==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var t,i,r,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});n.minWidth>n.width&&(n.width=n.minWidth);t=this.uiDialog.css({height:"auto",width:n.width}).outerHeight();i=Math.max(0,n.minHeight-t);r=typeof n.maxHeight=="number"?Math.max(0,n.maxHeight-t):"none";n.height==="auto"?this.element.css({minHeight:i,maxHeight:r,height:"auto"}):this.element.height(Math.max(0,n.height-t));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=n(this);return n("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return n(t.target).closest(".ui-dialog").length?!0:!!n(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(n){t||this._allowInteraction(n)||(n.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=n("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo());this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var n=this.document.data("ui-dialog-overlays")-1;n?this.document.data("ui-dialog-overlays",n):this.document.unbind("focusin").removeData("ui-dialog-overlays");this.overlay.remove();this.overlay=null}}});n.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,r=i.accept;this.isover=!1;this.isout=!0;this.accept=n.isFunction(r)?r:function(n){return n.is(r)};this.proportions=function(){if(arguments.length)t=arguments[0];else return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(i.scope);i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(t){n.ui.ddmanager.droppables[t]=n.ui.ddmanager.droppables[t]||[];n.ui.ddmanager.droppables[t].push(this)},_splice:function(n){for(var t=0;t<n.length;t++)n[t]===this&&n.splice(t,1)},_destroy:function(){var t=n.ui.ddmanager.droppables[this.options.scope];this._splice(t);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){if(t==="accept")this.accept=n.isFunction(i)?i:function(n){return n.is(i)};else if(t==="scope"){var r=n.ui.ddmanager.droppables[this.options.scope];this._splice(r);this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=n.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=n.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||n.ui.ddmanager.current,u=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var i=n(this).droppable("instance");if(i.options.greedy&&!i.options.disabled&&i.options.scope===r.options.scope&&i.accept.call(i.element[0],r.currentItem||r.element)&&n.ui.intersect(r,n.extend(i,{offset:i.element.offset()}),i.options.tolerance,t))return u=!0,!1}),u)?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(n){return{draggable:n.currentItem||n.element,helper:n.helper,position:n.position,offset:n.positionAbs}}});n.ui.intersect=function(){function n(n,t,i){return n>=t&&n<t+i}return function(t,i,r,u){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left+t.margins.left,s=(t.positionAbs||t.position.absolute).top+t.margins.top,h=o+t.helperProportions.width,c=s+t.helperProportions.height,f=i.offset.left,e=i.offset.top,l=f+i.proportions().width,a=e+i.proportions().height;switch(r){case"fit":return f<=o&&h<=l&&e<=s&&c<=a;case"intersect":return f<o+t.helperProportions.width/2&&h-t.helperProportions.width/2<l&&e<s+t.helperProportions.height/2&&c-t.helperProportions.height/2<a;case"pointer":return n(u.pageY,e,i.proportions().height)&&n(u.pageX,f,i.proportions().width);case"touch":return(s>=e&&s<=a||c>=e&&c<=a||s<e&&c>a)&&(o>=f&&o<=l||h>=f&&h<=l||o<f&&h>l);default:return!1}}}();n.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r,f,u=n.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,e=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();n:for(r=0;r<u.length;r++)if(!u[r].options.disabled&&(!t||u[r].accept.call(u[r].element[0],t.currentItem||t.element))){for(f=0;f<e.length;f++)if(e[f]===u[r].element[0]){u[r].proportions().height=0;continue n}(u[r].visible=u[r].element.css("display")!=="none",u[r].visible)&&(o==="mousedown"&&u[r]._activate.call(u[r],i),u[r].offset=u[r].element.offset(),u[r].proportions({width:u[r].element[0].offsetWidth,height:u[r].element[0].offsetHeight}))}},drop:function(t,i){var r=!1;return n.each((n.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&n.ui.intersect(t,this,this.options.tolerance,i)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&n.ui.ddmanager.prepareOffsets(t,i);n.each(n.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r,e,f,o=n.ui.intersect(t,this,this.options.tolerance,i),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;u&&(this.options.greedy&&(e=this.options.scope,f=this.element.parents(":data(ui-droppable)").filter(function(){return n(this).droppable("instance").options.scope===e}),f.length&&(r=n(f[0]).droppable("instance"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,i)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,i),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable");t.options.refreshPositions||n.ui.ddmanager.prepareOffsets(t,i)}};var ct=n.ui.droppable,w="ui-effects-",b=n;n.effects={effect:{}},function(n,t){function e(n,t,i){var r=s[t.type]||{};return n==null?i||!t.def?null:t.def:(n=r.floor?~~n:parseFloat(n),isNaN(n))?t.def:r.mod?(n+r.mod)%r.mod:0>n?0:r.max<n?r.max:n}function l(t){var e=i(),o=e._rgba=[];return(t=t.toLowerCase(),r(v,function(n,i){var r,s=i.re.exec(t),h=s&&i.parse(s),f=i.space||"rgba";if(h)return r=e[f](h),e[u[f].cache]=r[u[f].cache],o=e._rgba=r._rgba,!1}),o.length)?(o.join()==="0,0,0,0"&&n.extend(o,f.transparent),e):f[t]}function o(n,t,i){return(i=(i+1)%1,i*6<1)?n+(t-n)*i*6:i*2<1?t:i*3<2?n+(t-n)*(2/3-i)*6:n}var a=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1]*2.55,n[2]*2.55,n[3]*2.55,n[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(n){return[n[1],n[2]/100,n[3]/100,n[4]]}}],i=n.Color=function(t,i,r,u){return new n.Color.fn.parse(t,i,r,u)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},s={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=i.support={},c=n("<p>")[0],f,r=n.each;c.style.cssText="background-color:rgba(1,1,1,.5)";h.rgba=c.style.backgroundColor.indexOf("rgba")>-1;r(u,function(n,t){t.cache="_"+n;t.props.alpha={idx:3,type:"percent",def:1}});i.fn=n.extend(i.prototype,{parse:function(o,s,h,c){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=n(o).css(s),s=t);var a=this,v=n.type(o),y=this._rgba=[];return(s!==t&&(o=[o,s,h,c],v="array"),v==="string")?this.parse(l(o)||f._default):v==="array"?(r(u.rgba.props,function(n,t){y[t.idx]=e(o[t.idx],t)}),this):v==="object"?(o instanceof i?r(u,function(n,t){o[t.cache]&&(a[t.cache]=o[t.cache].slice())}):r(u,function(t,i){var u=i.cache;r(i.props,function(n,t){if(!a[u]&&i.to){if(n==="alpha"||o[n]==null)return;a[u]=i.to(a._rgba)}a[u][t.idx]=e(o[n],t,!0)});a[u]&&n.inArray(null,a[u].slice(0,3))<0&&(a[u][3]=1,i.from&&(a._rgba=i.from(a[u])))}),this):void 0},is:function(n){var e=i(n),t=!0,f=this;return r(u,function(n,i){var o,u=e[i.cache];return u&&(o=f[i.cache]||i.to&&i.to(f._rgba)||[],r(i.props,function(n,i){if(u[i.idx]!=null)return t=u[i.idx]===o[i.idx]})),t}),t},_space:function(){var n=[],t=this;return r(u,function(i,r){t[r.cache]&&n.push(i)}),n.pop()},transition:function(n,t){var f=i(n),c=f._space(),o=u[c],l=this.alpha()===0?i("transparent"):this,a=l[o.cache]||o.to(l._rgba),h=a.slice();return f=f[o.cache],r(o.props,function(n,i){var c=i.idx,r=a[c],u=f[c],o=s[i.type]||{};u!==null&&(r===null?h[c]=u:(o.mod&&(u-r>o.mod/2?r+=o.mod:r-u>o.mod/2&&(r-=o.mod)),h[c]=e((u-r)*t+r,i)))}),this[c](h)},blend:function(t){if(this._rgba[3]===1)return this;var r=this._rgba.slice(),u=r.pop(),f=i(t)._rgba;return i(n.map(r,function(n,t){return(1-u)*f[t]+u*n}))},toRgbaString:function(){var i="rgba(",t=n.map(this._rgba,function(n,t){return n==null?t>2?1:0:n});return t[3]===1&&(t.pop(),i="rgb("),i+t.join()+")"},toHslaString:function(){var i="hsla(",t=n.map(this.hsla(),function(n,t){return n==null&&(n=t>2?1:0),t&&t<3&&(n=Math.round(n*100)+"%"),n});return t[3]===1&&(t.pop(),i="hsl("),i+t.join()+")"},toHexString:function(t){var i=this._rgba.slice(),r=i.pop();return t&&i.push(~~(r*255)),"#"+n.map(i,function(n){return n=(n||0).toString(16),n.length===1?"0"+n:n}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});i.fn.parse.prototype=i.fn;u.hsla.to=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var i=n[0]/255,r=n[1]/255,f=n[2]/255,s=n[3],u=Math.max(i,r,f),e=Math.min(i,r,f),t=u-e,o=u+e,h=o*.5,c,l;return c=e===u?0:i===u?60*(r-f)/t+360:r===u?60*(f-i)/t+120:60*(i-r)/t+240,l=t===0?0:h<=.5?t/o:t/(2-o),[Math.round(c)%360,l,h,s==null?1:s]};u.hsla.from=function(n){if(n[0]==null||n[1]==null||n[2]==null)return[null,null,null,n[3]];var r=n[0]/360,u=n[1],t=n[2],e=n[3],i=t<=.5?t*(1+u):t+u-t*u,f=2*t-i;return[Math.round(o(f,i,r+1/3)*255),Math.round(o(f,i,r)*255),Math.round(o(f,i,r-1/3)*255),e]};r(u,function(u,f){var s=f.props,o=f.cache,h=f.to,c=f.from;i.fn[u]=function(u){if(h&&!this[o]&&(this[o]=h(this._rgba)),u===t)return this[o].slice();var l,a=n.type(u),v=a==="array"||a==="object"?u:arguments,f=this[o].slice();return r(s,function(n,t){var i=v[a==="object"?n:t.idx];i==null&&(i=f[t.idx]);f[t.idx]=e(i,t)}),c?(l=i(c(f)),l[o]=f,l):i(f)};r(s,function(t,r){i.fn[t]||(i.fn[t]=function(i){var f=n.type(i),h=t==="alpha"?this._hsla?"hsla":"rgba":u,o=this[h](),s=o[r.idx],e;return f==="undefined"?s:(f==="function"&&(i=i.call(this,s),f=n.type(i)),i==null&&r.empty)?this:(f==="string"&&(e=a.exec(i),e&&(i=s+parseFloat(e[2])*(e[1]==="+"?1:-1))),o[r.idx]=i,this[h](o))})})});i.hook=function(t){var u=t.split(" ");r(u,function(t,r){n.cssHooks[r]={set:function(t,u){var o,f,e="";if(u!=="transparent"&&(n.type(u)!=="string"||(o=l(u)))){if(u=i(o||u),!h.rgba&&u._rgba[3]!==1){for(f=r==="backgroundColor"?t.parentNode:t;(e===""||e==="transparent")&&f&&f.style;)try{e=n.css(f,"backgroundColor");f=f.parentNode}catch(s){}u=u.blend(e&&e!=="transparent"?e:"_default")}u=u.toRgbaString()}try{t.style[r]=u}catch(s){}}};n.fx.step[r]=function(t){t.colorInit||(t.start=i(t.elem,r),t.end=i(t.end),t.colorInit=!0);n.cssHooks[r].set(t.elem,t.start.transition(t.end,t.pos))}})};i.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");n.cssHooks.borderColor={expand:function(n){var t={};return r(["Top","Right","Bottom","Left"],function(i,r){t["border"+r+"Color"]=n}),t}};f=n.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(b),function(){function t(t){var r,u,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,f={};if(i&&i.length&&i[0]&&i[i[0]])for(u=i.length;u--;)r=i[u],typeof i[r]=="string"&&(f[n.camelCase(r)]=i[r]);else for(r in i)typeof i[r]=="string"&&(f[r]=i[r]);return f}function u(t,i){var e={},u,f;for(u in i)f=i[u],t[u]!==f&&(r[u]||(n.fx.step[u]||!isNaN(parseFloat(f)))&&(e[u]=f));return e}var i=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};n.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,i){n.fx.step[i]=function(n){(n.end==="none"||n.setAttr)&&(n.pos!==1||n.setAttr)||(b.style(n.elem,i,n.end),n.setAttr=!0)}});n.fn.addBack||(n.fn.addBack=function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))});n.effects.animateClass=function(r,f,e,o){var s=n.speed(f,e,o);return this.queue(function(){var e=n(this),h=e.attr("class")||"",o,f=s.children?e.find("*").addBack():e;f=f.map(function(){var i=n(this);return{el:i,start:t(this)}});o=function(){n.each(i,function(n,t){r[t]&&e[t+"Class"](r[t])})};o();f=f.map(function(){return this.end=t(this.el[0]),this.diff=u(this.start,this.end),this});e.attr("class",h);f=f.map(function(){var i=this,t=n.Deferred(),r=n.extend({},s,{queue:!1,complete:function(){t.resolve(i)}});return this.el.animate(this.diff,r),t.promise()});n.when.apply(n,f.get()).done(function(){o();n.each(arguments,function(){var t=this.el;n.each(this.diff,function(n){t.css(n,"")})});s.complete.call(e[0])})})};n.fn.extend({addClass:function(t){return function(i,r,u,f){return r?n.effects.animateClass.call(this,{add:i},r,u,f):t.apply(this,arguments)}}(n.fn.addClass),removeClass:function(t){return function(i,r,u,f){return arguments.length>1?n.effects.animateClass.call(this,{remove:i},r,u,f):t.apply(this,arguments)}}(n.fn.removeClass),toggleClass:function(t){return function(i,r,u,f,e){return typeof r=="boolean"||r===undefined?u?n.effects.animateClass.call(this,r?{add:i}:{remove:i},u,f,e):t.apply(this,arguments):n.effects.animateClass.call(this,{toggle:i},r,u,f)}}(n.fn.toggleClass),switchClass:function(t,i,r,u,f){return n.effects.animateClass.call(this,{add:i,remove:t},r,u,f)}})}(),function(){function t(t,i,r,u){return n.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},i==null&&(i={}),n.isFunction(i)&&(u=i,r=null,i={}),(typeof i=="number"||n.fx.speeds[i])&&(u=r,r=i,i={}),n.isFunction(r)&&(u=r,r=null),i&&n.extend(t,i),r=r||i.duration,t.duration=n.fx.off?0:typeof r=="number"?r:r in n.fx.speeds?n.fx.speeds[r]:n.fx.speeds._default,t.complete=u||i.complete,t}function i(t){return!t||typeof t=="number"||n.fx.speeds[t]?!0:typeof t=="string"&&!n.effects.effect[t]?!0:n.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}n.extend(n.effects,{version:"1.11.4",save:function(n,t){for(var i=0;i<t.length;i++)t[i]!==null&&n.data(w+t[i],n[0].style[t[i]])},restore:function(n,t){for(var r,i=0;i<t.length;i++)t[i]!==null&&(r=n.data(w+t[i]),r===undefined&&(r=""),n.css(t[i],r))},setMode:function(n,t){return t==="toggle"&&(t=n.is(":hidden")?"show":"hide"),t},getBaseline:function(n,t){var i,r;switch(n[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=n[0]/t.height}switch(n[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=n[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),float:t.css("float")},u=n("<div><\/div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),f={width:t.width(),height:t.height()},r=document.activeElement;try{r.id}catch(e){r=document.body}return t.wrap(u),(t[0]===r||n.contains(t[0],r))&&n(r).focus(),u=t.parent(),t.css("position")==="static"?(u.css({position:"relative"}),t.css({position:"relative"})):(n.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),n.each(["top","left","bottom","right"],function(n,r){i[r]=t.css(r);isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(f),u.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||n.contains(t[0],i))&&n(i).focus()),t},setTransition:function(t,i,r,u){return u=u||{},n.each(i,function(n,i){var f=t.cssUnit(i);f[0]>0&&(u[i]=f[0]*r+f[1])}),u}});n.fn.extend({effect:function(){function e(t){function o(){n.isFunction(e)&&e.call(r[0]);n.isFunction(t)&&t()}var r=n(this),e=i.complete,u=i.mode;(r.is(":hidden")?u==="hide":u==="show")?(r[u](),o()):f.call(r[0],i,o)}var i=t.apply(this,arguments),r=i.mode,u=i.queue,f=n.effects.effect[i.effect];return n.fx.off||!f?r?this[r](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):u===!1?this.each(e):this.queue(u||"fx",e)},show:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="show",this.effect.call(this,u)}}(n.fn.show),hide:function(n){return function(r){if(i(r))return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="hide",this.effect.call(this,u)}}(n.fn.hide),toggle:function(n){return function(r){if(i(r)||typeof r=="boolean")return n.apply(this,arguments);var u=t.apply(this,arguments);return u.mode="toggle",this.effect.call(this,u)}}(n.fn.toggle),cssUnit:function(t){var i=this.css(t),r=[];return n.each(["em","px","%","pt"],function(n,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}})}(),function(){var t={};n.each(["Quad","Cubic","Quart","Quint","Expo"],function(n,i){t[i]=function(t){return Math.pow(t,n+2)}});n.extend(t,{Sine:function(n){return 1-Math.cos(n*Math.PI/2)},Circ:function(n){return 1-Math.sqrt(1-n*n)},Elastic:function(n){return n===0||n===1?n:-Math.pow(2,8*(n-1))*Math.sin(((n-1)*80-7.5)*Math.PI/15)},Back:function(n){return n*n*(3*n-2)},Bounce:function(n){for(var t,i=4;n<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((t*3-2)/22-n,2)}});n.each(t,function(t,i){n.easing["easeIn"+t]=i;n.easing["easeOut"+t]=function(n){return 1-i(1-n)};n.easing["easeInOut"+t]=function(n){return n<.5?i(n*2)/2:1-i(n*-2+2)/2}})}();var lt=n.effects,at=n.effects.effect.blind=function(t,i){var r=n(this),s=["position","top","bottom","left","right","height","width"],v=n.effects.setMode(r,t.mode||"hide"),y=t.direction||"up",f=/up|down|vertical/.test(y),h=f?"height":"width",c=f?"top":"left",p=/up|left|vertical|horizontal/.test(y),l={},a=v==="show",u,e,o;r.parent().is(".ui-effects-wrapper")?n.effects.save(r.parent(),s):n.effects.save(r,s);r.show();u=n.effects.createWrapper(r).css({overflow:"hidden"});e=u[h]();o=parseFloat(u.css(c))||0;l[h]=a?e:0;p||(r.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),l[c]=a?o:e+o);a&&(u.css(h,0),p||u.css(c,o+e));u.animate(l,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){v==="hide"&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()}})},vt=n.effects.effect.bounce=function(t,i){var r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=k==="hide",y=k==="show",h=t.direction||"up",u=t.distance,p=t.times||5,d=p*2+(y||f?1:0),c=t.duration/d,l=t.easing,e=h==="up"||h==="down"?"top":"left",w=h==="up"||h==="left",b,o,s,a=r.queue(),g=a.length;for((y||f)&&v.push("opacity"),n.effects.save(r,v),r.show(),n.effects.createWrapper(r),u||(u=r[e==="top"?"outerHeight":"outerWidth"]()/3),y&&(s={opacity:1},s[e]=0,r.css("opacity",0).css(e,w?-u*2:u*2).animate(s,c,l)),f&&(u=u/Math.pow(2,p-1)),s={},s[e]=0,b=0;b<p;b++)o={},o[e]=(w?"-=":"+=")+u,r.animate(o,c,l).animate(s,c,l),u=f?u*2:u/2;f&&(o={opacity:0},o[e]=(w?"-=":"+=")+u,r.animate(o,c,l));r.queue(function(){f&&r.hide();n.effects.restore(r,v);n.effects.removeWrapper(r);i()});g>1&&a.splice.apply(a,[1,0].concat(a.splice(g,d+1)));r.dequeue()},yt=n.effects.effect.clip=function(t,i){var r=n(this),h=["position","top","bottom","left","right","height","width"],v=n.effects.setMode(r,t.mode||"hide"),f=v==="show",y=t.direction||"vertical",c=y==="vertical",o=c?"height":"width",l=c?"top":"left",s={},a,u,e;n.effects.save(r,h);r.show();a=n.effects.createWrapper(r).css({overflow:"hidden"});u=r[0].tagName==="IMG"?a:r;e=u[o]();f&&(u.css(o,0),u.css(l,e/2));s[o]=f?e:0;s[l]=f?0:e/2;u.animate(s,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f||r.hide();n.effects.restore(r,h);n.effects.removeWrapper(r);i()}})},pt=n.effects.effect.drop=function(t,i){var r=n(this),h=["position","top","bottom","left","right","opacity","height","width"],c=n.effects.setMode(r,t.mode||"hide"),e=c==="show",u=t.direction||"left",o=u==="up"||u==="down"?"top":"left",s=u==="up"||u==="left"?"pos":"neg",l={opacity:e?1:0},f;n.effects.save(r,h);r.show();n.effects.createWrapper(r);f=t.distance||r[o==="top"?"outerHeight":"outerWidth"](!0)/2;e&&r.css("opacity",0).css(o,s==="pos"?-f:f);l[o]=(e?s==="pos"?"+=":"-=":s==="pos"?"-=":"+=")+f;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c==="hide"&&r.hide();n.effects.restore(r,h);n.effects.removeWrapper(r);i()}})},wt=n.effects.effect.explode=function(t,i){function k(){l.push(this);l.length===o*c&&d()}function d(){r.css({visibility:"visible"});n(l).remove();u||r.hide();i()}for(var o=t.pieces?Math.round(Math.sqrt(t.pieces)):3,c=o,r=n(this),b=n.effects.setMode(r,t.mode||"hide"),u=b==="show",w=r.show().css("visibility","hidden").offset(),s=Math.ceil(r.outerWidth()/c),h=Math.ceil(r.outerHeight()/o),l=[],e,a,v,y,p,f=0;f<o;f++)for(v=w.top+f*h,p=f-(o-1)/2,e=0;e<c;e++)a=w.left+e*s,y=e-(c-1)/2,r.clone().appendTo("body").wrap("<div><\/div>").css({position:"absolute",visibility:"visible",left:-e*s,top:-f*h}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:s,height:h,left:a+(u?y*s:0),top:v+(u?p*h:0),opacity:u?0:1}).animate({left:a+(u?0:y*s),top:v+(u?0:p*h),opacity:u?1:0},t.duration||500,t.easing,k)},bt=n.effects.effect.fade=function(t,i){var r=n(this),u=n.effects.setMode(r,t.mode||"toggle");r.animate({opacity:u},{queue:!1,duration:t.duration,easing:t.easing,complete:i})},kt=n.effects.effect.fold=function(t,i){var r=n(this),s=["position","top","bottom","left","right","height","width"],h=n.effects.setMode(r,t.mode||"hide"),e=h==="show",c=h==="hide",f=t.size||15,l=/([0-9]+)%/.exec(f),a=!!t.horizFirst,v=e!==a,y=v?["width","height"]:["height","width"],p=t.duration/2,u,o,w={},b={};n.effects.save(r,s);r.show();u=n.effects.createWrapper(r).css({overflow:"hidden"});o=v?[u.width(),u.height()]:[u.height(),u.width()];l&&(f=parseInt(l[1],10)/100*o[c?0:1]);e&&u.css(a?{height:0,width:f}:{height:f,width:0});w[y[0]]=e?o[0]:f;b[y[1]]=e?o[1]:0;u.animate(w,p,t.easing).animate(b,p,t.easing,function(){c&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()})},dt=n.effects.effect.highlight=function(t,i){var r=n(this),u=["backgroundImage","backgroundColor","opacity"],f=n.effects.setMode(r,t.mode||"show"),e={backgroundColor:r.css("backgroundColor")};f==="hide"&&(e.opacity=0);n.effects.save(r,u);r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(e,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){f==="hide"&&r.hide();n.effects.restore(r,u);i()}})},gt=n.effects.effect.size=function(t,i){var f,l,u,r=n(this),w=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["width","height","overflow"],v=["fontSize"],e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=n.effects.setMode(r,t.mode||"effect"),y=t.restore||h!=="effect",c=t.scale||"both",b=t.origin||["middle","center"],k=r.css("position"),s=y?w:["position","top","bottom","left","right","overflow","opacity"],p={height:0,width:0,outerHeight:0,outerWidth:0};h==="show"&&r.show();f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};t.mode==="toggle"&&h==="show"?(r.from=t.to||p,r.to=t.from||f):(r.from=t.from||(h==="show"?p:f),r.to=t.to||(h==="hide"?p:f));u={from:{y:r.from.height/f.height,x:r.from.width/f.width},to:{y:r.to.height/f.height,x:r.to.width/f.width}};(c==="box"||c==="both")&&(u.from.y!==u.to.y&&(s=s.concat(e),r.from=n.effects.setTransition(r,e,u.from.y,r.from),r.to=n.effects.setTransition(r,e,u.to.y,r.to)),u.from.x!==u.to.x&&(s=s.concat(o),r.from=n.effects.setTransition(r,o,u.from.x,r.from),r.to=n.effects.setTransition(r,o,u.to.x,r.to)));(c==="content"||c==="both")&&u.from.y!==u.to.y&&(s=s.concat(v).concat(a),r.from=n.effects.setTransition(r,v,u.from.y,r.from),r.to=n.effects.setTransition(r,v,u.to.y,r.to));n.effects.save(r,s);r.show();n.effects.createWrapper(r);r.css("overflow","hidden").css(r.from);b&&(l=n.effects.getBaseline(b,f),r.from.top=(f.outerHeight-r.outerHeight())*l.y,r.from.left=(f.outerWidth-r.outerWidth())*l.x,r.to.top=(f.outerHeight-r.to.outerHeight)*l.y,r.to.left=(f.outerWidth-r.to.outerWidth)*l.x);r.css(r.from);(c==="content"||c==="both")&&(e=e.concat(["marginTop","marginBottom"]).concat(v),o=o.concat(["marginLeft","marginRight"]),a=w.concat(e).concat(o),r.find("*[width]").each(function(){var i=n(this),r={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};y&&n.effects.save(i,a);i.from={height:r.height*u.from.y,width:r.width*u.from.x,outerHeight:r.outerHeight*u.from.y,outerWidth:r.outerWidth*u.from.x};i.to={height:r.height*u.to.y,width:r.width*u.to.x,outerHeight:r.height*u.to.y,outerWidth:r.width*u.to.x};u.from.y!==u.to.y&&(i.from=n.effects.setTransition(i,e,u.from.y,i.from),i.to=n.effects.setTransition(i,e,u.to.y,i.to));u.from.x!==u.to.x&&(i.from=n.effects.setTransition(i,o,u.from.x,i.from),i.to=n.effects.setTransition(i,o,u.to.x,i.to));i.css(i.from);i.animate(i.to,t.duration,t.easing,function(){y&&n.effects.restore(i,a)})}));r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){r.to.opacity===0&&r.css("opacity",r.from.opacity);h==="hide"&&r.hide();n.effects.restore(r,s);y||(k==="static"?r.css({position:"relative",top:r.to.top,left:r.to.left}):n.each(["top","left"],function(n,t){r.css(t,function(t,i){var f=parseInt(i,10),u=n?r.to.left:r.to.top;return i==="auto"?u+"px":f+u+"px"})}));n.effects.removeWrapper(r);i()}})},ni=n.effects.effect.scale=function(t,i){var u=n(this),r=n.extend(!0,{},t),f=n.effects.setMode(u,t.mode||"effect"),s=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:f==="hide"?0:100),h=t.direction||"both",c=t.origin,e={height:u.height(),width:u.width(),outerHeight:u.outerHeight(),outerWidth:u.outerWidth()},o={y:h!=="horizontal"?s/100:1,x:h!=="vertical"?s/100:1};r.effect="size";r.queue=!1;r.complete=i;f!=="effect"&&(r.origin=c||["middle","center"],r.restore=!0);r.from=t.from||(f==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:e);r.to={height:e.height*o.y,width:e.width*o.x,outerHeight:e.outerHeight*o.y,outerWidth:e.outerWidth*o.x};r.fade&&(f==="show"&&(r.from.opacity=0,r.to.opacity=1),f==="hide"&&(r.from.opacity=1,r.to.opacity=0));u.effect(r)},ti=n.effects.effect.puff=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"hide"),o=e==="hide",s=parseInt(t.percent,10)||150,f=s/100,u={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};n.extend(t,{effect:"scale",queue:!1,fade:!0,mode:e,complete:i,percent:o?s:100,from:o?u:{height:u.height*f,width:u.width*f,outerHeight:u.outerHeight*f,outerWidth:u.outerWidth*f}});r.effect(t)},ii=n.effects.effect.pulsate=function(t,i){var r=n(this),e=n.effects.setMode(r,t.mode||"show"),h=e==="show",a=e==="hide",v=h||e==="hide",o=(t.times||5)*2+(v?1:0),c=t.duration/o,u=0,f=r.queue(),l=f.length,s;for((h||!r.is(":visible"))&&(r.css("opacity",0).show(),u=1),s=1;s<o;s++)r.animate({opacity:u},c,t.easing),u=1-u;r.animate({opacity:u},c,t.easing);r.queue(function(){a&&r.hide();i()});l>1&&f.splice.apply(f,[1,0].concat(f.splice(l,o+1)));r.dequeue()},ri=n.effects.effect.shake=function(t,i){var r=n(this),v=["position","top","bottom","left","right","height","width"],k=n.effects.setMode(r,t.mode||"effect"),f=t.direction||"left",o=t.distance||20,y=t.times||3,p=y*2+1,u=Math.round(t.duration/p),s=f==="up"||f==="down"?"top":"left",h=f==="up"||f==="left",c={},l={},w={},a,e=r.queue(),b=e.length;for(n.effects.save(r,v),r.show(),n.effects.createWrapper(r),c[s]=(h?"-=":"+=")+o,l[s]=(h?"+=":"-=")+o*2,w[s]=(h?"-=":"+=")+o*2,r.animate(c,u,t.easing),a=1;a<y;a++)r.animate(l,u,t.easing).animate(w,u,t.easing);r.animate(l,u,t.easing).animate(c,u/2,t.easing).queue(function(){k==="hide"&&r.hide();n.effects.restore(r,v);n.effects.removeWrapper(r);i()});b>1&&e.splice.apply(e,[1,0].concat(e.splice(b,p+1)));r.dequeue()},ui=n.effects.effect.slide=function(t,i){var r=n(this),s=["position","top","bottom","left","right","width","height"],h=n.effects.setMode(r,t.mode||"show"),c=h==="show",f=t.direction||"left",e=f==="up"||f==="down"?"top":"left",o=f==="up"||f==="left",u,l={};n.effects.save(r,s);r.show();u=t.distance||r[e==="top"?"outerHeight":"outerWidth"](!0);n.effects.createWrapper(r).css({overflow:"hidden"});c&&r.css(e,o?isNaN(u)?"-"+u:-u:u);l[e]=(c?o?"+=":"-=":o?"-=":"+=")+u;r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){h==="hide"&&r.hide();n.effects.restore(r,s);n.effects.removeWrapper(r);i()}})},fi=n.effects.effect.transfer=function(t,i){var u=n(this),r=n(t.to),f=r.css("position")==="fixed",e=n("body"),o=f?e.scrollTop():0,s=f?e.scrollLeft():0,h=r.offset(),l={top:h.top-o,left:h.left-s,height:r.innerHeight(),width:r.innerWidth()},c=u.offset(),a=n("<div class='ui-effects-transfer'><\/div>").appendTo(document.body).addClass(t.className).css({top:c.top-o,left:c.left-s,height:u.innerHeight(),width:u.innerWidth(),position:f?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){a.remove();i()})},ei=n.widget("ui.progressbar",{version:"1.11.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=n("<div class='ui-progressbar-value ui-widget-header ui-corner-left'><\/div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove()},value:function(n){if(n===undefined)return this.options.value;this.options.value=this._constrainedValue(n);this._refreshValue()},_constrainedValue:function(n){return n===undefined&&(n=this.options.value),this.indeterminate=n===!1,typeof n!="number"&&(n=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,n))},_setOptions:function(n){var t=n.value;delete n.value;this._super(n);this.options.value=this._constrainedValue(t);this._refreshValue()},_setOption:function(n,t){n==="max"&&(t=Math.max(this.min,t));n==="disabled"&&this.element.toggleClass("ui-state-disabled",!!t).attr("aria-disabled",t);this._super(n,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=n("<div class='ui-progressbar-overlay'><\/div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null));this.oldValue!==t&&(this.oldValue=t,this._trigger("change"));t===this.options.max&&this._trigger("complete")}}),oi=n.widget("ui.selectable",n.ui.mouse,{version:"1.11.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable");this.dragged=!1;this.refresh=function(){t=n(i.options.filter,i.element[0]);t.addClass("ui-selectee");t.each(function(){var t=n(this),i=t.offset();n.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})};this.refresh();this.selectees=t.addClass("ui-selectee");this._mouseInit();this.helper=n("<div class='ui-selectable-helper'><\/div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(t){var i=this,r=this.options;(this.opos=[t.pageX,t.pageY],this.options.disabled)||(this.selectees=n(r.filter,this.element[0]),this._trigger("start",t),n(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=n.data(this,"selectable-item");r.startselected=!0;t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,i._trigger("unselecting",t,{unselecting:r.element}))}),n(t.target).parents().addBack().each(function(){var u,r=n.data(this,"selectable-item");if(r)return u=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected"),r.$element.removeClass(u?"ui-unselecting":"ui-selected").addClass(u?"ui-selecting":"ui-unselecting"),r.unselecting=!u,r.selecting=u,r.selected=u,u?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var e,o=this,s=this.options,i=this.opos[0],r=this.opos[1],u=t.pageX,f=t.pageY;return i>u&&(e=u,u=i,i=e),r>f&&(e=f,f=r,r=e),this.helper.css({left:i,top:r,width:u-i,height:f-r}),this.selectees.each(function(){var e=n.data(this,"selectable-item"),h=!1;e&&e.element!==o.element[0]&&(s.tolerance==="touch"?h=!(e.left>u||e.right<i||e.top>f||e.bottom<r):s.tolerance==="fit"&&(h=e.left>i&&e.right<u&&e.top>r&&e.bottom<f),h?(e.selected&&(e.$element.removeClass("ui-selected"),e.selected=!1),e.unselecting&&(e.$element.removeClass("ui-unselecting"),e.unselecting=!1),e.selecting||(e.$element.addClass("ui-selecting"),e.selecting=!0,o._trigger("selecting",t,{selecting:e.element}))):(e.selecting&&((t.metaKey||t.ctrlKey)&&e.startselected?(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.$element.addClass("ui-selected"),e.selected=!0):(e.$element.removeClass("ui-selecting"),e.selecting=!1,e.startselected&&(e.$element.addClass("ui-unselecting"),e.unselecting=!0),o._trigger("unselecting",t,{unselecting:e.element}))),e.selected&&(t.metaKey||t.ctrlKey||e.startselected||(e.$element.removeClass("ui-selected"),e.selected=!1,e.$element.addClass("ui-unselecting"),e.unselecting=!0,o._trigger("unselecting",t,{unselecting:e.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,n(".ui-unselecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-unselecting");r.unselecting=!1;r.startselected=!1;i._trigger("unselected",t,{unselected:r.element})}),n(".ui-selecting",this.element[0]).each(function(){var r=n.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected");r.selecting=!1;r.selected=!0;r.startselected=!0;i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),si=n.widget("ui.selectmenu",{version:"1.11.4",defaultElement:"<select>",options:{appendTo:null,disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:null,change:null,close:null,focus:null,open:null,select:null},_create:function(){var n=this.element.uniqueId().attr("id");this.ids={element:n,button:n+"-button",menu:n+"-menu"};this._drawButton();this._drawMenu();this.options.disabled&&this.disable()},_drawButton:function(){var t=this;this.label=n("label[for='"+this.ids.element+"']").attr("for",this.ids.button);this._on(this.label,{click:function(n){this.button.focus();n.preventDefault()}});this.element.hide();this.button=n("<span>",{"class":"ui-selectmenu-button ui-widget ui-state-default ui-corner-all",tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true"}).insertAfter(this.element);n("<span>",{"class":"ui-icon "+this.options.icons.button}).prependTo(this.button);this.buttonText=n("<span>",{"class":"ui-selectmenu-text"}).appendTo(this.button);this._setText(this.buttonText,this.element.find("option:selected").text());this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){t.menuItems||t._refreshMenu()});this._hoverable(this.button);this._focusable(this.button)},_drawMenu:function(){var t=this;this.menu=n("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=n("<div>",{"class":"ui-selectmenu-menu ui-front"}).append(this.menu).appendTo(this._appendTo());this.menuInstance=this.menu.menu({role:"listbox",select:function(n,i){n.preventDefault();t._setSelection();t._select(i.item.data("ui-selectmenu-item"),n)},focus:function(n,i){var r=i.item.data("ui-selectmenu-item");t.focusIndex!=null&&r.index!==t.focusIndex&&(t._trigger("focus",n,{item:r}),t.isOpen||t._select(r,n));t.focusIndex=r.index;t.button.attr("aria-activedescendant",t.menuItems.eq(r.index).attr("id"))}}).menu("instance");this.menu.addClass("ui-corner-bottom").removeClass("ui-corner-all");this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this._setText(this.buttonText,this._getSelectedItem().text());this.options.width||this._resizeButton()},_refreshMenu:function(){this.menu.empty();var n,t=this.element.find("option");t.length&&(this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup"),n=this._getSelectedItem(),this.menuInstance.focus(null,n),this._setAria(n.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(n){this.options.disabled||(this.menuItems?(this.menu.find(".ui-state-focus").removeClass("ui-state-focus"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",n))},_position:function(){this.menuWrap.position(n.extend({of:this.button},this.options.position))},close:function(n){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",n))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderMenu:function(t,i){var u=this,r="";n.each(i,function(i,f){f.optgroup!==r&&(n("<li>",{"class":"ui-selectmenu-optgroup ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":""),text:f.optgroup}).appendTo(t),r=f.optgroup);u._renderItemData(t,f)})},_renderItemData:function(n,t){return this._renderItem(n,t).data("ui-selectmenu-item",t)},_renderItem:function(t,i){var r=n("<li>");return i.disabled&&r.addClass("ui-state-disabled"),this._setText(r,i.label),r.appendTo(t)},_setText:function(n,t){t?n.text(t):n.html("&#160;")},_move:function(n,t){var i,r,u=".ui-menu-item";this.isOpen?i=this.menuItems.eq(this.focusIndex):(i=this.menuItems.eq(this.element[0].selectedIndex),u+=":not(.ui-state-disabled)");r=n==="first"||n==="last"?i[n==="first"?"prevAll":"nextAll"](u).eq(-1):i[n+"All"](u).eq(0);r.length&&this.menuInstance.focus(t,r)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex)},_toggle:function(n){this[this.isOpen?"close":"open"](n)},_setSelection:function(){var n;this.range&&(window.getSelection?(n=window.getSelection(),n.removeAllRanges(),n.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(n(t.target).closest(".ui-selectmenu-menu, #"+this.ids.button).length||this.close(t))}},_buttonEvents:{mousedown:function(){var n;window.getSelection?(n=window.getSelection(),n.rangeCount&&(this.range=n.getRangeAt(0))):this.range=document.selection.createRange()},click:function(n){this._setSelection();this._toggle(n)},keydown:function(t){var i=!0;switch(t.keyCode){case n.ui.keyCode.TAB:case n.ui.keyCode.ESCAPE:this.close(t);i=!1;break;case n.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case n.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case n.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case n.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case n.ui.keyCode.LEFT:this._move("prev",t);break;case n.ui.keyCode.RIGHT:this._move("next",t);break;case n.ui.keyCode.HOME:case n.ui.keyCode.PAGE_UP:this._move("first",t);break;case n.ui.keyCode.END:case n.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t);i=!1}i&&t.preventDefault()}},_selectFocusedItem:function(n){var t=this.menuItems.eq(this.focusIndex);t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),n)},_select:function(n,t){var i=this.element[0].selectedIndex;this.element[0].selectedIndex=n.index;this._setText(this.buttonText,n.label);this._setAria(n);this._trigger("select",t,{item:n});n.index!==i&&this._trigger("change",t,{item:n});this.close(t)},_setAria:function(n){var t=this.menuItems.eq(n.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t});this.menu.attr("aria-activedescendant",t)},_setOption:function(n,t){n==="icons"&&this.button.find("span.ui-icon").removeClass(this.options.icons.button).addClass(t.button);this._super(n,t);n==="appendTo"&&this.menuWrap.appendTo(this._appendTo());n==="disabled"&&(this.menuInstance.option("disabled",t),this.button.toggleClass("ui-state-disabled",t).attr("aria-disabled",t),this.element.prop("disabled",t),t?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0));n==="width"&&this._resizeButton()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?n(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.toggleClass("ui-corner-top",this.isOpen).toggleClass("ui-corner-all",!this.isOpen).attr("aria-expanded",this.isOpen);this.menuWrap.toggleClass("ui-selectmenu-open",this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var n=this.options.width;n||(n=this.element.show().outerWidth(),this.element.hide());this.button.outerWidth(n)},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){return{disabled:this.element.prop("disabled")}},_parseOptions:function(t){var i=[];t.each(function(t,r){var u=n(r),f=u.parent("optgroup");i.push({element:u,index:t,value:u.val(),label:u.text(),optgroup:f.attr("label")||"",disabled:f.prop("disabled")||u.prop("disabled")})});this.items=i},_destroy:function(){this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.label.attr("for",this.ids.element)}}),hi=n.widget("ui.slider",n.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1;this._mouseSliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");this._refresh();this._setOption("disabled",this.options.disabled);this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var r,i,u=this.options,t=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f=[];for(i=u.values&&u.values.length||1,t.length>i&&(t.slice(i).remove(),t=t.slice(0,i)),r=t.length;r<i;r++)f.push("<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'><\/span>");this.handles=t.add(n(f.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.each(function(t){n(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&t.values.length!==2?t.values=[t.values[0],t.values[0]]:n.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=n("<div><\/div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+(t.range==="min"||t.range==="max"?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all");this._mouseDestroy()},_mouseCapture:function(t){var s,f,r,i,u,h,e,c,o=this,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),s={x:t.pageX,y:t.pageY},f=this._normValueFromMouse(s),r=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var e=Math.abs(f-o.values(t));(r>e||r===e&&(t===o._lastChangedValue||o.values(t)===l.min))&&(r=e,i=n(this),u=t)}),h=this._start(t,u),h===!1)?!1:(this._mouseSliding=!0,this._handleIndex=u,i.addClass("ui-state-active").focus(),e=i.offset(),c=!n(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-e.left-i.width()/2,top:t.pageY-e.top-i.height()/2-(parseInt(i.css("borderTopWidth"),10)||0)-(parseInt(i.css("borderBottomWidth"),10)||0)+(parseInt(i.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,u,f),this._animateOff=!0,!0)},_mouseStart:function(){return!0},_mouseDrag:function(n){var t={x:n.pageX,y:n.pageY},i=this._normValueFromMouse(t);return this._slide(n,this._handleIndex,i),!1},_mouseStop:function(n){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(n,this._handleIndex),this._change(n,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(n){var i,r,t,u,f;return this.orientation==="horizontal"?(i=this.elementSize.width,r=n.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(i=this.elementSize.height,r=n.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=r/i,t>1&&(t=1),t<0&&(t=0),this.orientation==="vertical"&&(t=1-t),u=this._valueMax()-this._valueMin(),f=this._valueMin()+t*u,this._trimAlignValue(f)},_start:function(n,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",n,i)},_slide:function(n,t,i){var r,f,u;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&i>r||t===1&&i<r)&&(i=r),i!==this.values(t)&&(f=this.values(),f[t]=i,u=this._trigger("slide",n,{handle:this.handles[t],value:i,values:f}),r=this.values(t?0:1),u!==!1&&this.values(t,i))):i!==this.value()&&(u=this._trigger("slide",n,{handle:this.handles[t],value:i}),u!==!1&&this.value(i))},_stop:function(n,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._trigger("stop",n,i)},_change:function(n,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values());this._lastChangedValue=t;this._trigger("change",n,i)}},value:function(n){if(arguments.length){this.options.value=this._trimAlignValue(n);this._refreshValue();this._change(null,0);return}return this._value()},values:function(t,i){var u,f,r;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(i);this._refreshValue();this._change(null,t);return}if(arguments.length)if(n.isArray(arguments[0])){for(u=this.options.values,f=arguments[0],r=0;r<u.length;r+=1)u[r]=this._trimAlignValue(f[r]),this._change(null,r);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(t):this.value();else return this._values()},_setOption:function(t,i){var r,u=0;t==="range"&&this.options.range===!0&&(i==="min"?(this.options.value=this._values(0),this.options.values=null):i==="max"&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));n.isArray(this.options.values)&&(u=this.options.values.length);t==="disabled"&&this.element.toggleClass("ui-state-disabled",!!i);this._super(t,i);switch(t){case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();this.handles.css(i==="horizontal"?"bottom":"left","");break;case"value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;r<u;r+=1)this._change(null,r);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case"range":this._animateOff=!0;this._refresh();this._animateOff=!1}},_value:function(){var n=this.options.value;return this._trimAlignValue(n)},_values:function(n){var r,t,i;if(arguments.length)return r=this.options.values[n],this._trimAlignValue(r);if(this.options.values&&this.options.values.length){for(t=this.options.values.slice(),i=0;i<t.length;i+=1)t[i]=this._trimAlignValue(t[i]);return t}return[]},_trimAlignValue:function(n){if(n<=this._valueMin())return this._valueMin();if(n>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(n-this._valueMin())%t,r=n-i;return Math.abs(i)*2>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_calculateNewMax:function(){var n=this.options.max,t=this._valueMin(),i=this.options.step,r=Math.floor(+(n-t).toFixed(this._precision())/i)*i;n=r+t;this.max=parseFloat(n.toFixed(this._precision()))},_precision:function(){var n=this._precisionOf(this.options.step);return this.options.min!==null&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=n.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var s,t,c,f,h,e=this.options.range,i=this.options,r=this,u=this._animateOff?!1:i.animate,o={};this.options.values&&this.options.values.length?this.handles.each(function(f){t=(r.values(f)-r._valueMin())/(r._valueMax()-r._valueMin())*100;o[r.orientation==="horizontal"?"left":"bottom"]=t+"%";n(this).stop(1,1)[u?"animate":"css"](o,i.animate);r.options.range===!0&&(r.orientation==="horizontal"?(f===0&&r.range.stop(1,1)[u?"animate":"css"]({left:t+"%"},i.animate),f===1&&r.range[u?"animate":"css"]({width:t-s+"%"},{queue:!1,duration:i.animate})):(f===0&&r.range.stop(1,1)[u?"animate":"css"]({bottom:t+"%"},i.animate),f===1&&r.range[u?"animate":"css"]({height:t-s+"%"},{queue:!1,duration:i.animate})));s=t}):(c=this.value(),f=this._valueMin(),h=this._valueMax(),t=h!==f?(c-f)/(h-f)*100:0,o[this.orientation==="horizontal"?"left":"bottom"]=t+"%",this.handle.stop(1,1)[u?"animate":"css"](o,i.animate),e==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[u?"animate":"css"]({width:t+"%"},i.animate),e==="max"&&this.orientation==="horizontal"&&this.range[u?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:i.animate}),e==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[u?"animate":"css"]({height:t+"%"},i.animate),e==="max"&&this.orientation==="vertical"&&this.range[u?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:i.animate}))},_handleEvents:{keydown:function(t){var e,r,i,u,f=n(t.target).data("ui-slider-handle-index");switch(t.keyCode){case n.ui.keyCode.HOME:case n.ui.keyCode.END:case n.ui.keyCode.PAGE_UP:case n.ui.keyCode.PAGE_DOWN:case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,n(t.target).addClass("ui-state-active"),e=this._start(t,f),e===!1))return}u=this.options.step;r=this.options.values&&this.options.values.length?i=this.values(f):i=this.value();switch(t.keyCode){case n.ui.keyCode.HOME:i=this._valueMin();break;case n.ui.keyCode.END:i=this._valueMax();break;case n.ui.keyCode.PAGE_UP:i=this._trimAlignValue(r+(this._valueMax()-this._valueMin())/this.numPages);break;case n.ui.keyCode.PAGE_DOWN:i=this._trimAlignValue(r-(this._valueMax()-this._valueMin())/this.numPages);break;case n.ui.keyCode.UP:case n.ui.keyCode.RIGHT:if(r===this._valueMax())return;i=this._trimAlignValue(r+u);break;case n.ui.keyCode.DOWN:case n.ui.keyCode.LEFT:if(r===this._valueMin())return;i=this._trimAlignValue(r-u)}this._slide(t,f,i)},keyup:function(t){var i=n(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),n(t.target).removeClass("ui-state-active"))}}}),ci=n.widget("ui.sortable",n.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(n,t,i){return n>=t&&n<t+i},_isFloating:function(n){return/left|right/.test(n.css("float"))||/inline|table-cell/.test(n.css("display"))},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.offset=this.element.offset();this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(n,t){this._super(n,t);n==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle");n.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle");this._mouseDestroy();for(var n=this.items.length-1;n>=0;n--)this.items[n].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var r=null,f=!1,u=this;return this.reverting?!1:this.options.disabled||this.options.type==="static"?!1:(this._refreshItems(t),n(t.target).parents().each(function(){if(n.data(this,u.widgetName+"-item")===u)return r=n(this),!1}),n.data(t.target,u.widgetName+"-item")===u&&(r=n(t.target)),!r)?!1:this.options.handle&&!i&&(n(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(f=!0)}),!f)?!1:(this.currentItem=r,this._removeCurrentsFromItems(),!0)},_mouseStart:function(t,i,r){var f,e,u=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},n.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,u.cursorAt&&this._adjustOffsetFromHelper(u.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),u.containment&&this._setContainment(),u.cursor&&u.cursor!=="auto"&&(e=this.document.find("body"),this.storedCursor=e.css("cursor"),e.css("cursor",u.cursor),this.storedStylesheet=n("<style>*{ cursor: "+u.cursor+" !important; }<\/style>").appendTo(e)),u.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",u.opacity)),u.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",u.zIndex)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(f=this.containers.length-1;f>=0;f--)this.containers[f]._trigger("activate",t,this._uiHash(this));return n.ui.ddmanager&&(n.ui.ddmanager.current=this),n.ui.ddmanager&&!u.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var e,u,f,o,i=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-this.document.scrollTop()<i.scrollSensitivity?r=this.document.scrollTop(this.document.scrollTop()-i.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<i.scrollSensitivity&&(r=this.document.scrollTop(this.document.scrollTop()+i.scrollSpeed)),t.pageX-this.document.scrollLeft()<i.scrollSensitivity?r=this.document.scrollLeft(this.document.scrollLeft()-i.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<i.scrollSensitivity&&(r=this.document.scrollLeft(this.document.scrollLeft()+i.scrollSpeed))),r!==!1&&n.ui.ddmanager&&!i.dropBehaviour&&n.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),e=this.items.length-1;e>=0;e--)if((u=this.items[e],f=u.item[0],o=this._intersectsWithPointer(u),o)&&u.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[o===1?"next":"prev"]()[0]!==f&&!n.contains(this.placeholder[0],f)&&(this.options.type==="semi-dynamic"?!n.contains(this.element[0],f):!0)){if(this.direction=o===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(u))this._rearrange(t,u);else break;this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),n.ui.ddmanager&&n.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(n.ui.ddmanager&&!this.options.dropBehaviour&&n.ui.ddmanager.drop(this,t),this.options.revert){var e=this,f=this.placeholder.offset(),r=this.options.axis,u={};r&&r!=="x"||(u.left=f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));r&&r!=="y"||(u.top=f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;n(this.helper).animate(u,parseInt(this.options.revert,10)||500,function(){e._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),n.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?n(this.domPosition.prev).after(this.currentItem):n(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},n(r).each(function(){var r=(n(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);r&&i.push((t.key||r[1]+"[]")+"="+(t.key&&t.expression?r[1]:r[2]))}),!i.length&&t.key&&i.push(t.key+"="),i.join("&")},toArray:function(t){var r=this._getItemsAsjQuery(t&&t.connected),i=[];return t=t||{},r.each(function(){i.push(n(t.item||this).attr(t.attribute||"id")||"")}),i},_intersectsWith:function(n){var t=this.positionAbs.left,h=t+this.helperProportions.width,i=this.positionAbs.top,c=i+this.helperProportions.height,r=n.left,f=r+n.width,u=n.top,e=u+n.height,o=this.offset.click.top,s=this.offset.click.left,l=this.options.axis==="x"||i+o>u&&i+o<e,a=this.options.axis==="y"||t+s>r&&t+s<f,v=l&&a;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>n[this.floating?"width":"height"]?v:r<t+this.helperProportions.width/2&&h-this.helperProportions.width/2<f&&u<i+this.helperProportions.height/2&&c-this.helperProportions.height/2<e},_intersectsWithPointer:function(n){var r=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top,n.height),u=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left,n.width),f=r&&u,t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return f?this.floating?i&&i==="right"||t==="down"?2:1:t&&(t==="down"?2:1):!1},_intersectsWithSides:function(n){var r=this._isOverAxis(this.positionAbs.top+this.offset.click.top,n.top+n.height/2,n.height),u=this._isOverAxis(this.positionAbs.left+this.offset.click.left,n.left+n.width/2,n.width),t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i==="right"&&u||i==="left"&&!u:t&&(t==="down"&&r||t==="up"&&!r)},_getDragVerticalDirection:function(){var n=this.positionAbs.top-this.lastPositionAbs.top;return n!==0&&(n>0?"down":"up")},_getDragHorizontalDirection:function(){var n=this.positionAbs.left-this.lastPositionAbs.left;return n!==0&&(n>0?"right":"left")},refresh:function(n){return this._refreshItems(n),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var n=this.options;return n.connectWith.constructor===String?[n.connectWith]:n.connectWith},_getItemsAsjQuery:function(t){function h(){s.push(this)}var r,u,e,i,s=[],f=[],o=this._connectWith();if(o&&t)for(r=o.length-1;r>=0;r--)for(e=n(o[r],this.document[0]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&f.push([n.isFunction(i.options.items)?i.options.items.call(i.element):n(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i]);for(f.push([n.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):n(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),r=f.length-1;r>=0;r--)f[r][0].each(h);return n(s)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=n.grep(this.items,function(n){for(var i=0;i<t.length;i++)if(t[i]===n.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[];this.containers=[this];var r,u,e,i,o,s,h,l,a=this.items,f=[[n.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):n(this.options.items,this.element),this]],c=this._connectWith();if(c&&this.ready)for(r=c.length-1;r>=0;r--)for(e=n(c[r],this.document[0]),u=e.length-1;u>=0;u--)i=n.data(e[u],this.widgetFullName),i&&i!==this&&!i.options.disabled&&(f.push([n.isFunction(i.options.items)?i.options.items.call(i.element[0],t,{item:this.currentItem}):n(i.options.items,i.element),i]),this.containers.push(i));for(r=f.length-1;r>=0;r--)for(o=f[r][1],s=f[r][0],u=0,l=s.length;u<l;u++)h=n(s[u]),h.data(this.widgetName+"-item",o),a.push({item:h,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var r,f,u,i=this.items.length-1;i>=0;i--)(r=this.items[i],r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])||(f=this.options.toleranceElement?n(this.options.toleranceElement,r.item):r.item,t||(r.width=f.outerWidth(),r.height=f.outerHeight()),u=f.offset(),r.left=u.left,r.top=u.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)u=this.containers[i].element.offset(),this.containers[i].containerCache.left=u.left,this.containers[i].containerCache.top=u.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var r,i=t.options;i.placeholder&&i.placeholder.constructor!==String||(r=i.placeholder,i.placeholder={element:function(){var u=t.currentItem[0].nodeName.toLowerCase(),i=n("<"+u+">",t.document[0]).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return u==="tbody"?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),n("<tr>",t.document[0]).appendTo(i)):u==="tr"?t._createTrPlaceholder(t.currentItem,i):u==="img"&&i.attr("src",t.currentItem.attr("src")),r||i.css("visibility","hidden"),i},update:function(n,u){(!r||i.forcePlaceholderSize)&&(u.height()||u.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),u.width()||u.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}});t.placeholder=n(i.placeholder.element.call(t.element,t.currentItem));t.currentItem.after(t.placeholder);i.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var r=this;t.children().each(function(){n("<td>&#160;<\/td>",r.document[0]).attr("colspan",n(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){for(var u,c,f,a,v,o,l,s,h,e=null,i=null,r=this.containers.length-1;r>=0;r--)if(!n.contains(this.currentItem[0],this.containers[r].element[0]))if(this._intersectsWith(this.containers[r].containerCache)){if(e&&n.contains(this.containers[r].element[0],e.element[0]))continue;e=this.containers[r];i=r}else this.containers[r].containerCache.over&&(this.containers[r]._trigger("out",t,this._uiHash(this)),this.containers[r].containerCache.over=0);if(e)if(this.containers.length===1)this.containers[i].containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash(this)),this.containers[i].containerCache.over=1);else{for(c=1e4,f=null,s=e.floating||this._isFloating(this.currentItem),a=s?"left":"top",v=s?"width":"height",h=s?"clientX":"clientY",u=this.items.length-1;u>=0;u--)n.contains(this.containers[i].element[0],this.items[u].item[0])&&this.items[u].item[0]!==this.currentItem[0]&&(o=this.items[u].item.offset()[a],l=!1,t[h]-o>this.items[u][v]/2&&(l=!0),Math.abs(t[h]-o)<c&&(c=Math.abs(t[h]-o),f=this.items[u],this.direction=l?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[i]){this.currentContainer.containerCache.over||(this.containers[i]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1);return}f?this._rearrange(t,f,null,!0):this._rearrange(t,null,this.containers[i].element,!0);this._trigger("change",t,this._uiHash());this.containers[i]._trigger("change",t,this._uiHash(this));this.currentContainer=this.containers[i];this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[i]._trigger("over",t,this._uiHash(this));this.containers[i].containerCache.over=1}},_createHelper:function(t){var r=this.options,i=n.isFunction(r.helper)?n(r.helper.apply(this.element[0],[t,this.currentItem])):r.helper==="clone"?this.currentItem.clone():this.currentItem;return i.parents("body").length||n(r.appendTo!=="parent"?r.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||r.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||r.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" "));n.isArray(t)&&(t={left:+t[0],top:+t[1]||0});"left"in t&&(this.offset.click.left=t.left+this.margins.left);"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left);"top"in t&&(this.offset.click.top=t.top+this.margins.top);"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&n.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var n=this.currentItem.position();return{top:n.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:n.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,r,u,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);(i.containment==="document"||i.containment==="window")&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,i.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]);/^(document|window|parent)$/.test(i.containment)||(t=n(i.containment)[0],r=n(i.containment).offset(),u=n(t).css("overflow")!=="hidden",this.containment=[r.left+(parseInt(n(t).css("borderLeftWidth"),10)||0)+(parseInt(n(t).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(n(t).css("borderTopWidth"),10)||0)+(parseInt(n(t).css("paddingTop"),10)||0)-this.margins.top,r.left+(u?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(n(t).css("borderLeftWidth"),10)||0)-(parseInt(n(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(u?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(n(t).css("borderTopWidth"),10)||0)-(parseInt(n(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var r=t==="absolute"?1:-1,u=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(u[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():f?0:u.scrollTop())*r,left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():f?0:u.scrollLeft())*r}},_generatePosition:function(t){var r,u,i=this.options,f=t.pageX,e=t.pageY,o=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==this.document[0]&&n.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,s=/(html|body)/i.test(o[0].tagName);return this.cssPosition!=="relative"||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),i.grid&&(r=this.originalPageY+Math.round((e-this.originalPageY)/i.grid[1])*i.grid[1],e=this.containment?r-this.offset.click.top>=this.containment[1]&&r-this.offset.click.top<=this.containment[3]?r:r-this.offset.click.top>=this.containment[1]?r-i.grid[1]:r+i.grid[1]:r,u=this.originalPageX+Math.round((f-this.originalPageX)/i.grid[0])*i.grid[0],f=this.containment?u-this.offset.click.left>=this.containment[0]&&u-this.offset.click.left<=this.containment[2]?u:u-this.offset.click.left>=this.containment[0]?u-i.grid[0]:u+i.grid[0]:u)),{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:o.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())}},_rearrange:function(n,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var u=this.counter;this._delay(function(){u===this.counter&&this.refreshPositions(!r)})},_clear:function(n,t){function u(n,t,i){return function(r){i._trigger(n,r,t._uiHash(t))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)(this._storedCSS[i]==="auto"||this._storedCSS[i]==="static")&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&r.push(function(n){this._trigger("receive",n,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(n){this._trigger("update",n,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(n){this._trigger("remove",n,this._uiHash())}),r.push(function(n){return function(t){n._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(n){return function(t){n._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||r.push(u("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(u("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",n,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<r.length;i++)r[i].call(this,n);this._trigger("stop",n,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){n.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||n([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}});var li=n.widget("ui.spinner",{version:"1.11.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);this.value()!==""&&this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return n.each(["min","max","step"],function(n,r){var u=i.attr(r);u!==undefined&&u.length&&(t[r]=u)}),t},_events:{keydown:function(n){this._start(n)&&this._keydown(n)&&n.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(n){if(this.cancelBlur){delete this.cancelBlur;return}this._stop();this._refresh();this.previous!==this.element.val()&&this._trigger("change",n)},mousewheel:function(n,t){if(t){if(!this.spinning&&!this._start(n))return!1;this._spin((t>0?1:-1)*this.options.step,n);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(n)},100);n.preventDefault()}},"mousedown .ui-spinner-button":function(t){function r(){var n=this.element[0]===this.document[0].activeElement;n||(this.element.focus(),this.previous=i,this._delay(function(){this.previous=i}))}var i;(i=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),r.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur;r.call(this)}),this._start(t)!==!1)&&this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(n(t.currentTarget).hasClass("ui-state-active")){if(this._start(t)===!1)return!1;this._repeat(null,n(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var n=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=n.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(n.height()*.5)&&n.height()>0&&n.height(n.height());this.options.disabled&&this.disable()},_keydown:function(t){var r=this.options,i=n.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,r.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-r.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'><\/span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;<\/span><\/a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;<\/span><\/a>"},_start:function(n){return!this.spinning&&this._trigger("start",n)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(n,t,i){n=n||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,t,i)},n);this._spin(t*this.options.step,i)},_spin:function(n,t){var i=this.value()||0;this.counter||(this.counter=1);i=this._adjustValue(i+n*this._increment(this.counter));this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?n.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var n=this._precisionOf(this.options.step);return this.options.min!==null&&(n=Math.max(n,this._precisionOf(this.options.min))),n},_precisionOf:function(n){var t=n.toString(),i=t.indexOf(".");return i===-1?0:t.length-i-1},_adjustValue:function(n){var r,i,t=this.options;return(r=t.min!==null?t.min:0,i=n-r,i=Math.round(i/t.step)*t.step,n=r+i,n=parseFloat(n.toFixed(this._precision())),t.max!==null&&n>t.max)?t.max:t.min!==null&&n<t.min?t.min:n},_stop:function(n){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",n))},_setOption:function(n,t){if(n==="culture"||n==="numberFormat"){var i=this._parse(this.element.val());this.options[n]=t;this.element.val(this._format(i));return}(n==="max"||n==="min"||n==="step")&&typeof t=="string"&&(t=this._parse(t));n==="icons"&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down));this._super(n,t);n==="disabled"&&(this.widget().toggleClass("ui-state-disabled",!!t),this.element.prop("disabled",!!t),this.buttons.button(t?"disable":"enable"))},_setOptions:i(function(n){this._super(n)}),_parse:function(n){return typeof n=="string"&&n!==""&&(n=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(n,10,this.options.culture):+n),n===""||isNaN(n)?null:n},_format:function(n){return n===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(n,this.options.numberFormat,this.options.culture):n},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var n=this.value();return n===null?!1:n===this._adjustValue(n)},_value:function(n,t){var i;n!==""&&(i=this._parse(n),i!==null&&(t||(i=this._adjustValue(i)),n=this._format(i)));this.element.val(n);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:i(function(n){this._stepUp(n)}),_stepUp:function(n){this._start()&&(this._spin((n||1)*this.options.step),this._stop())},stepDown:i(function(n){this._stepDown(n)}),_stepDown:function(n){this._start()&&(this._spin((n||1)*-this.options.step),this._stop())},pageUp:i(function(n){this._stepUp((n||1)*this.options.page)}),pageDown:i(function(n){this._stepDown((n||1)*this.options.page)}),value:function(n){if(!arguments.length)return this._parse(this.element.val());i(this._value).call(this,n)},widget:function(){return this.uiSpinner}}),ai=n.widget("ui.tabs",{version:"1.11.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_isLocal:function(){var n=/#.*$/;return function(t){var i,r;t=t.cloneNode(!1);i=t.href.replace(n,"");r=location.href.replace(n,"");try{i=decodeURIComponent(i)}catch(u){}try{r=decodeURIComponent(r)}catch(u){}return t.hash.length>1&&i===r}}(),_create:function(){var i=this,t=this.options;this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",t.collapsible);this._processTabs();t.active=this._initialActive();n.isArray(t.disabled)&&(t.disabled=n.unique(t.disabled.concat(n.map(this.tabs.filter(".ui-state-disabled"),function(n){return i.tabs.index(n)}))).sort());this.active=this.options.active!==!1&&this.anchors.length?this._findActive(t.active):n();this._refresh();this.active.length&&this.load(t.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,r=location.hash.substring(1);return t===null&&(r&&this.tabs.each(function(i,u){if(n(u).attr("aria-controls")===r)return t=i,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(t===null||t===-1)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):n()}},_tabKeydown:function(t){var r=n(this.document[0].activeElement).closest("li"),i=this.tabs.index(r),u=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case n.ui.keyCode.RIGHT:case n.ui.keyCode.DOWN:i++;break;case n.ui.keyCode.UP:case n.ui.keyCode.LEFT:u=!1;i--;break;case n.ui.keyCode.END:i=this.anchors.length-1;break;case n.ui.keyCode.HOME:i=0;break;case n.ui.keyCode.SPACE:t.preventDefault();clearTimeout(this.activating);this._activate(i);return;case n.ui.keyCode.ENTER:t.preventDefault();clearTimeout(this.activating);this._activate(i===this.options.active?!1:i);return;default:return}t.preventDefault();clearTimeout(this.activating);i=this._focusNextTab(i,u);t.ctrlKey||t.metaKey||(r.attr("aria-selected","false"),this.tabs.eq(i).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",i)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===n.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===n.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===n.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function u(){return t>r&&(t=0),t<0&&(t=r),t}for(var r=this.tabs.length-1;n.inArray(u(),this.options.disabled)!==-1;)t=i?t+1:t-1;return t},_focusNextTab:function(n,t){return n=this._findNextTab(n,t),this.tabs.eq(n).focus(),n},_setOption:function(n,t){if(n==="active"){this._activate(t);return}if(n==="disabled"){this._setupDisabled(t);return}this._super(n,t);n==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0));n==="event"&&this._setupEvents(t);n==="heightStyle"&&this._setupHeightStyle(t)},_sanitizeSelector:function(n){return n?n.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=n.map(i.filter(".ui-state-disabled"),function(n){return i.index(n)});this._processTabs();t.active!==!1&&this.anchors.length?this.active.length&&!n.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=n()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=n());this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this,i=this.tabs,r=this.anchors,u=this.panels;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist").delegate("> li","mousedown"+this.eventNamespace,function(t){n(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){n(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return n("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=n();this.anchors.each(function(i,r){var f,u,e,s=n(r).uniqueId().attr("id"),o=n(r).closest("li"),h=o.attr("aria-controls");t._isLocal(r)?(f=r.hash,e=f.substring(1),u=t.element.find(t._sanitizeSelector(f))):(e=o.attr("aria-controls")||n({}).uniqueId()[0].id,f="#"+e,u=t.element.find(f),u.length||(u=t._createPanel(e),u.insertAfter(t.panels[i-1]||t.tablist)),u.attr("aria-live","polite"));u.length&&(t.panels=t.panels.add(u));h&&o.data("ui-tabs-aria-controls",h);o.attr({"aria-controls":e,"aria-labelledby":s});u.attr("aria-labelledby",s)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel");i&&(this._off(i.not(this.tabs)),this._off(r.not(this.anchors)),this._off(u.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return n("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){n.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i=0,r;r=this.tabs[i];i++)t===!0||n.inArray(i,t)!==-1?n(r).addClass("ui-state-disabled").attr("aria-disabled","true"):n(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={};t&&n.each(t.split(" "),function(n,t){i[t]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(n){n.preventDefault()}});this._on(this.anchors,i);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,r=this.element.parent();t==="fill"?(i=r.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=n(this),r=t.css("position");r!=="absolute"&&r!=="fixed"&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=n(this).outerHeight(!0)}),this.panels.each(function(){n(this).height(Math.max(0,i-n(this).innerHeight()+n(this).height()))}).css("overflow","auto")):t==="auto"&&(i=0,this.panels.each(function(){i=Math.max(i,n(this).height("").height())}).height(i))},_eventHandler:function(t){var u=this.options,r=this.active,c=n(t.currentTarget),i=c.closest("li"),f=i[0]===r[0],e=f&&u.collapsible,o=e?n():this._getPanelForTab(i),s=r.length?this._getPanelForTab(r):n(),h={oldTab:r,oldPanel:s,newTab:e?n():i,newPanel:o};(t.preventDefault(),i.hasClass("ui-state-disabled")||i.hasClass("ui-tabs-loading")||this.running||f&&!u.collapsible||this._trigger("beforeActivate",t,h)===!1)||(u.active=e?!1:this.tabs.index(i),this.active=f?n():i,this.xhr&&this.xhr.abort(),s.length||o.length||n.error("jQuery UI Tabs: Mismatching fragment identifier."),o.length&&this.load(this.tabs.index(i),t),this._toggle(t,h))},_toggle:function(t,i){function e(){u.running=!1;u._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active");r.length&&u.options.show?u._show(r,u.options.show,e):(r.show(),e())}var u=this,r=i.newPanel,f=i.oldPanel;this.running=!0;f.length&&this.options.hide?this._hide(f,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),f.hide(),o());f.attr("aria-hidden","true");i.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});r.length&&f.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return n(this).attr("tabIndex")===0}).attr("tabIndex",-1);r.attr("aria-hidden","false");i.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(t){var r,i=this._findActive(t);i[0]!==this.active[0]&&(i.length||(i=this.active),r=i.find(".ui-tabs-anchor")[0],this._eventHandler({target:r,currentTarget:r,preventDefault:n.noop}))},_findActive:function(t){return t===!1?n():this.tabs.eq(t)},_getIndex:function(n){return typeof n=="string"&&(n=this.anchors.index(this.anchors.filter("[href$='"+n+"']"))),n},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tablist.unbind(this.eventNamespace);this.tabs.add(this.panels).each(function(){n.data(this,"ui-tabs-destroy")?n(this).remove():n(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var t=n(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")});this.panels.show();this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(t){var i=this.options.disabled;i!==!1&&(t===undefined?i=!1:(t=this._getIndex(t),i=n.isArray(i)?n.map(i,function(n){return n!==t?n:null}):n.map(this.tabs,function(n,i){return i!==t?i:null})),this._setupDisabled(i))},disable:function(t){var i=this.options.disabled;if(i!==!0){if(t===undefined)i=!0;else{if(t=this._getIndex(t),n.inArray(t,i)!==-1)return;i=n.isArray(i)?n.merge([t],i).sort():[t]}this._setupDisabled(i)}},load:function(t,i){t=this._getIndex(t);var u=this,r=this.tabs.eq(t),e=r.find(".ui-tabs-anchor"),f=this._getPanelForTab(r),o={tab:r,panel:f},s=function(n,t){t==="abort"&&u.panels.stop(!1,!0);r.removeClass("ui-tabs-loading");f.removeAttr("aria-busy");n===u.xhr&&delete u.xhr};this._isLocal(e[0])||(this.xhr=n.ajax(this._ajaxSettings(e,i,o)),this.xhr&&this.xhr.statusText!=="canceled"&&(r.addClass("ui-tabs-loading"),f.attr("aria-busy","true"),this.xhr.done(function(n,t,r){setTimeout(function(){f.html(n);u._trigger("load",i,o);s(r,t)},1)}).fail(function(n,t){setTimeout(function(){s(n,t)},1)})))},_ajaxSettings:function(t,i,r){var u=this;return{url:t.attr("href"),beforeSend:function(t,f){return u._trigger("beforeLoad",i,n.extend({jqXHR:t,ajaxSettings:f},r))}}},_getPanelForTab:function(t){var i=n(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),vi=n.widget("ui.tooltip",{version:"1.11.4",options:{content:function(){var t=n(this).attr("title")||"";return n("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_addDescribedBy:function(t,i){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(i);t.data("ui-tooltip-id",i).attr("aria-describedby",n.trim(r.join(" ")))},_removeDescribedBy:function(t){var u=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=n.inArray(u,i);r!==-1&&i.splice(r,1);t.removeData("ui-tooltip-id");i=n.trim(i.join(" "));i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable();this.liveRegion=n("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).addClass("ui-helper-hidden-accessible").appendTo(this.document[0].body)},_setOption:function(t,i){var r=this;if(t==="disabled"){this[i?"_disable":"_enable"]();this.options[t]=i;return}this._super(t,i);t==="content"&&n.each(this.tooltips,function(n,t){r._updateContent(t.element)})},_disable:function(){var t=this;n.each(this.tooltips,function(i,r){var u=n.Event("blur");u.target=u.currentTarget=r.element[0];t.close(u,!0)});this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=n(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var r=this,i=n(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&i.parents().each(function(){var t=n(this),i;t.data("ui-tooltip-open")&&(i=n.Event("blur"),i.target=i.currentTarget=this,r.close(i,!0));t.attr("title")&&(t.uniqueId(),r.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(n,t){var i,r=this.options.content,u=this,f=t?t.type:null;if(typeof r=="string")return this._open(t,n,r);i=r.call(n[0],function(i){u._delay(function(){n.data("ui-tooltip-open")&&(t&&(t.type=f),this._open(t,n,i))})});i&&this._open(t,n,i)},_open:function(t,i,r){function s(n){(o.of=n,u.is(":hidden"))||u.position(o)}var f,u,h,e,o=n.extend({},this.options.position);if(r){if(f=this._find(i),f){f.tooltip.find(".ui-tooltip-content").html(r);return}i.is("[title]")&&(t&&t.type==="mouseover"?i.attr("title",""):i.removeAttr("title"));f=this._tooltip(i);u=f.tooltip;this._addDescribedBy(i,u.attr("id"));u.find(".ui-tooltip-content").html(r);this.liveRegion.children().hide();r.clone?(e=r.clone(),e.removeAttr("id").find("[id]").removeAttr("id")):e=r;n("<div>").html(e).appendTo(this.liveRegion);this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:s}),s(t)):u.position(n.extend({of:i},this.options.position));u.hide();this._show(u,this.options.show);this.options.show&&this.options.show.delay&&(h=this.delayedShow=setInterval(function(){u.is(":visible")&&(s(o.of),clearInterval(h))},n.fx.interval));this._trigger("open",t,{tooltip:u})}},_registerCloseHandlers:function(t,i){var r={keyup:function(t){if(t.keyCode===n.ui.keyCode.ESCAPE){var r=n.Event(t);r.currentTarget=i[0];this.close(r,!0)}}};i[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(i).tooltip)});t&&t.type!=="mouseover"||(r.mouseleave="close");t&&t.type!=="focusin"||(r.focusout="close");this._on(!0,i,r)},close:function(t){var u,f=this,i=n(t?t.currentTarget:this.element),r=this._find(i);if(!r){i.removeData("ui-tooltip-open");return}(u=r.tooltip,r.closing)||(clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),r.hiding=!0,u.stop(!0),this._hide(u,this.options.hide,function(){f._removeTooltip(n(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&n.each(this.parents,function(t,i){n(i.element).attr("title",i.title);delete f.parents[t]}),r.closing=!0,this._trigger("close",t,{tooltip:u}),r.hiding||(r.closing=!1))},_tooltip:function(t){var i=n("<div>").attr("role","tooltip").addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||"")),r=i.uniqueId().attr("id");return n("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]={element:t,tooltip:i}},_find:function(n){var t=n.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(n){n.remove();delete this.tooltips[n.attr("id")]},_destroy:function(){var t=this;n.each(this.tooltips,function(i,r){var f=n.Event("blur"),u=r.element;f.target=f.currentTarget=u[0];t.close(f,!0);n("#"+i).remove();u.data("ui-tooltip-title")&&(u.attr("title")||u.attr("title",u.data("ui-tooltip-title")),u.removeData("ui-tooltip-title"))});this.liveRegion.remove()}})}),!jQuery)throw new Error("Bootstrap requires jQuery");+function(n){"use strict";function t(){var i=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n;for(n in t)if(void 0!==i.style[n])return{end:t[n]}}n.fn.emulateTransitionEnd=function(t){var i=!1,u=this,r;n(this).one(n.support.transition.end,function(){i=!0});return r=function(){i||n(u).trigger(n.support.transition.end)},setTimeout(r,t),this};n(function(){n.support.transition=t()})}(window.jQuery);+function(n){"use strict";var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)},r;t.prototype.close=function(t){function f(){i.trigger("closed.bs.alert").remove()}var u=n(this),r=u.attr("data-target"),i;r||(r=u.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));i=n(r);t&&t.preventDefault();i.length||(i=u.hasClass("alert")?u:u.parent());i.trigger(t=n.Event("close.bs.alert"));t.isDefaultPrevented()||(i.removeClass("in"),n.support.transition&&i.hasClass("fade")?i.one(n.support.transition.end,f).emulateTransitionEnd(150):f())};r=n.fn.alert;n.fn.alert=function(i){return this.each(function(){var r=n(this),u=r.data("bs.alert");u||r.data("bs.alert",u=new t(this));"string"==typeof i&&u[i].call(r)})};n.fn.alert.Constructor=t;n.fn.alert.noConflict=function(){return n.fn.alert=r,this};n(document).on("click.bs.alert.data-api",i,t.prototype.close)}(window.jQuery);+function(n){"use strict";var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r)},i;t.DEFAULTS={loadingText:"loading..."};t.prototype.setState=function(n){var i="disabled",t=this.$element,r=t.is("input")?"val":"html",u=t.data();n+="Text";u.resetText||t.data("resetText",t[r]());t[r](u[n]||this.options[n]);setTimeout(function(){"loadingText"==n?t.addClass(i).attr(i,i):t.removeClass(i).removeAttr(i)},0)};t.prototype.toggle=function(){var n=this.$element.closest('[data-toggle="buttons"]'),t;n.length&&(t=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change"),"radio"===t.prop("type")&&n.find(".active").removeClass("active"));this.$element.toggleClass("active")};i=n.fn.button;n.fn.button=function(i){return this.each(function(){var u=n(this),r=u.data("bs.button"),f="object"==typeof i&&i;r||u.data("bs.button",r=new t(this,f));"toggle"==i?r.toggle():i&&r.setState(i)})};n.fn.button.Constructor=t;n.fn.button.noConflict=function(){return n.fn.button=i,this};n(document).on("click.bs.button.data-api","[data-toggle^=button]",function(t){var i=n(t.target);i.hasClass("btn")||(i=i.closest(".btn"));i.button("toggle");t.preventDefault()})}(window.jQuery);+function(n){"use strict";var t=function(t,i){this.$element=n(t);this.$indicators=this.$element.find(".carousel-indicators");this.options=i;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",n.proxy(this.pause,this)).on("mouseleave",n.proxy(this.cycle,this))},i;t.DEFAULTS={interval:5e3,pause:"hover",wrap:!0};t.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(n.proxy(this.next,this),this.options.interval)),this};t.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)};t.prototype.to=function(t){var r=this,i=this.getActiveIndex();if(!(t>this.$items.length-1)&&!(0>t))return this.sliding?this.$element.one("slid",function(){r.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",n(this.$items[t]))};t.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&n.support.transition.end&&(this.$element.trigger(n.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this};t.prototype.next=function(){if(!this.sliding)return this.slide("next")};t.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};t.prototype.slide=function(t,i){var u=this.$element.find(".item.active"),r=i||u[t](),s=this.interval,f="next"==t?"left":"right",h="next"==t?"first":"last",o=this,e;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[h]()}if(this.sliding=!0,s&&this.pause(),e=n.Event("slide.bs.carousel",{relatedTarget:r[0],direction:f}),!r.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=n(o.$indicators.children()[o.getActiveIndex()]);t&&t.addClass("active")})),n.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(e),e.isDefaultPrevented())return;r.addClass(t);r[0].offsetWidth;u.addClass(f);r.addClass(f);u.one(n.support.transition.end,function(){r.removeClass([t,f].join(" ")).addClass("active");u.removeClass(["active",f].join(" "));o.sliding=!1;setTimeout(function(){o.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(e),e.isDefaultPrevented())return;u.removeClass("active");r.addClass("active");this.sliding=!1;this.$element.trigger("slid")}return s&&this.cycle(),this}};i=n.fn.carousel;n.fn.carousel=function(i){return this.each(function(){var u=n(this),r=u.data("bs.carousel"),f=n.extend({},t.DEFAULTS,u.data(),"object"==typeof i&&i),e="string"==typeof i?i:f.slide;r||u.data("bs.carousel",r=new t(this,f));"number"==typeof i?r.to(i):e?r[e]():f.interval&&r.pause().cycle()})};n.fn.carousel.Constructor=t;n.fn.carousel.noConflict=function(){return n.fn.carousel=i,this};n(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(t){var f,i=n(this),r=n(i.attr("data-target")||(f=i.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")),e=n.extend({},r.data(),i.data()),u=i.attr("data-slide-to");u&&(e.interval=!1);r.carousel(e);(u=i.attr("data-slide-to"))&&r.data("bs.carousel").to(u);t.preventDefault()});n(window).on("load",function(){n('[data-ride="carousel"]').each(function(){var t=n(this);t.carousel(t.data())})})}(window.jQuery);+function(n){"use strict";var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.transitioning=null;this.options.parent&&(this.$parent=n(this.options.parent));this.options.toggle&&this.toggle()},i;t.DEFAULTS={toggle:!0};t.prototype.dimension=function(){var n=this.$element.hasClass("width");return n?"width":"height"};t.prototype.show=function(){var u,t,r,i,f,e;if(!this.transitioning&&!this.$element.hasClass("in")&&(u=n.Event("show.bs.collapse"),this.$element.trigger(u),!u.isDefaultPrevented())){if(t=this.$parent&&this.$parent.find("> .panel > .in"),t&&t.length){if(r=t.data("bs.collapse"),r&&r.transitioning)return;t.collapse("hide");r||t.data("bs.collapse",null)}if(i=this.dimension(),this.$element.removeClass("collapse").addClass("collapsing")[i](0),this.transitioning=1,f=function(){this.$element.removeClass("collapsing").addClass("in")[i]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")},!n.support.transition)return f.call(this);e=n.camelCase(["scroll",i].join("-"));this.$element.one(n.support.transition.end,n.proxy(f,this)).emulateTransitionEnd(350)[i](this.$element[0][e])}};t.prototype.hide=function(){var i,t,r;if(!this.transitioning&&this.$element.hasClass("in")&&(i=n.Event("hide.bs.collapse"),this.$element.trigger(i),!i.isDefaultPrevented()))return t=this.dimension(),this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1,r=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")},n.support.transition?(this.$element[t](0).one(n.support.transition.end,n.proxy(r,this)).emulateTransitionEnd(350),void 0):r.call(this)};t.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};i=n.fn.collapse;n.fn.collapse=function(i){return this.each(function(){var r=n(this),u=r.data("bs.collapse"),f=n.extend({},t.DEFAULTS,r.data(),"object"==typeof i&&i);u||r.data("bs.collapse",u=new t(this,f));"string"==typeof i&&u[i]()})};n.fn.collapse.Constructor=t;n.fn.collapse.noConflict=function(){return n.fn.collapse=i,this};n(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(t){var e,i=n(this),s=i.attr("data-target")||t.preventDefault()||(e=i.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""),r=n(s),u=r.data("bs.collapse"),h=u?"toggle":i.data(),f=i.attr("data-parent"),o=f&&n(f);u&&u.transitioning||(o&&o.find('[data-toggle=collapse][data-parent="'+f+'"]').not(i).addClass("collapsed"),i[r.hasClass("in")?"addClass":"removeClass"]("collapsed"));r.collapse(h)})}(window.jQuery);+function(n){"use strict";function r(){n(e).remove();n(i).each(function(t){var i=u(n(this));i.hasClass("open")&&(i.trigger(t=n.Event("hide.bs.dropdown")),t.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown"))})}function u(t){var i=t.attr("data-target"),r;return i||(i=t.attr("href"),i=i&&/#/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,"")),r=i&&n(i),r&&r.length?r:t.parent()}var e=".dropdown-backdrop",i="[data-toggle=dropdown]",t=function(t){n(t).on("click.bs.dropdown",this.toggle)},f;t.prototype.toggle=function(t){var f=n(this),i,e;if(!f.is(".disabled, :disabled")){if(i=u(f),e=i.hasClass("open"),r(),!e){if("ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&n('<div class="dropdown-backdrop"/>').insertAfter(n(this)).on("click",r),i.trigger(t=n.Event("show.bs.dropdown")),t.isDefaultPrevented())return;i.toggleClass("open").trigger("shown.bs.dropdown");f.focus()}return!1}};t.prototype.keydown=function(t){var e,o,s,f,r;if(/(38|40|27)/.test(t.keyCode)&&(e=n(this),t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled"))){if(o=u(e),s=o.hasClass("open"),!s||s&&27==t.keyCode)return 27==t.which&&o.find(i).focus(),e.click();f=n("[role=menu] li:not(.divider):visible a",o);f.length&&(r=f.index(f.filter(":focus")),38==t.keyCode&&r>0&&r--,40==t.keyCode&&r<f.length-1&&r++,~r||(r=0),f.eq(r).focus())}};f=n.fn.dropdown;n.fn.dropdown=function(i){return this.each(function(){var r=n(this),u=r.data("dropdown");u||r.data("dropdown",u=new t(this));"string"==typeof i&&u[i].call(r)})};n.fn.dropdown.Constructor=t;n.fn.dropdown.noConflict=function(){return n.fn.dropdown=f,this};n(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(n){n.stopPropagation()}).on("click.bs.dropdown.data-api",i,t.prototype.toggle).on("keydown.bs.dropdown.data-api",i+", [role=menu]",t.prototype.keydown)}(window.jQuery);+function(n){"use strict";var t=function(t,i){this.options=i;this.$element=n(t);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.load(this.options.remote)},i;t.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};t.prototype.toggle=function(n){return this[this.isShown?"hide":"show"](n)};t.prototype.show=function(t){var i=this,r=n.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r);this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',n.proxy(this.hide,this)),this.backdrop(function(){var u=n.support.transition&&i.$element.hasClass("fade"),r;i.$element.parent().length||i.$element.appendTo(document.body);i.$element.show();u&&i.$element[0].offsetWidth;i.$element.addClass("in").attr("aria-hidden",!1);i.enforceFocus();r=n.Event("shown.bs.modal",{relatedTarget:t});u?i.$element.find(".modal-dialog").one(n.support.transition.end,function(){i.$element.focus().trigger(r)}).emulateTransitionEnd(300):i.$element.focus().trigger(r)}))};t.prototype.hide=function(t){t&&t.preventDefault();t=n.Event("hide.bs.modal");this.$element.trigger(t);this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),n(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),n.support.transition&&this.$element.hasClass("fade")?this.$element.one(n.support.transition.end,n.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())};t.prototype.enforceFocus=function(){n(document).off("focusin.bs.modal").on("focusin.bs.modal",n.proxy(function(n){this.$element[0]===n.target||this.$element.has(n.target).length||this.$element.focus()},this))};t.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",n.proxy(function(n){27==n.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")};t.prototype.hideModal=function(){var n=this;this.$element.hide();this.backdrop(function(){n.removeBackdrop();n.$element.trigger("hidden.bs.modal")})};t.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};t.prototype.backdrop=function(t){var r=this.$element.hasClass("fade")?"fade":"",i;if(this.isShown&&this.options.backdrop){if(i=n.support.transition&&r,this.$backdrop=n('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",n.proxy(function(n){n.target===n.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;i?this.$backdrop.one(n.support.transition.end,t).emulateTransitionEnd(150):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(n.support.transition.end,t).emulateTransitionEnd(150):t()):t&&t()};i=n.fn.modal;n.fn.modal=function(i,r){return this.each(function(){var f=n(this),u=f.data("bs.modal"),e=n.extend({},t.DEFAULTS,f.data(),"object"==typeof i&&i);u||f.data("bs.modal",u=new t(this,e));"string"==typeof i?u[i](r):e.show&&u.show(r)})};n.fn.modal.Constructor=t;n.fn.modal.noConflict=function(){return n.fn.modal=i,this};n(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var i=n(this),r=i.attr("href"),u=n(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),f=u.data("modal")?"toggle":n.extend({remote:!/#/.test(r)&&r},u.data(),i.data());t.preventDefault();u.modal(f,this).one("hide",function(){i.is(":visible")&&i.focus()})});n(document).on("show.bs.modal",".modal",function(){n(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){n(document.body).removeClass("modal-open")})}(window.jQuery);+function(n){"use strict";var t=function(n,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",n,t)},i;t.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};t.prototype.init=function(t,i,r){var f,e,u,o,s;for(this.enabled=!0,this.type=t,this.$element=n(i),this.options=this.getOptions(r),f=this.options.trigger.split(" "),e=f.length;e--;)if(u=f[e],"click"==u)this.$element.on("click."+this.type,this.options.selector,n.proxy(this.toggle,this));else"manual"!=u&&(o="hover"==u?"mouseenter":"focus",s="hover"==u?"mouseleave":"blur",this.$element.on(o+"."+this.type,this.options.selector,n.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,n.proxy(this.leave,this)));this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.getOptions=function(t){return t=n.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t};t.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&n.each(this._options,function(n,r){i[n]!=r&&(t[n]=r)}),t};t.prototype.enter=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show),void 0):i.show()};t.prototype.leave=function(t){var i=t instanceof this.constructor?t:n(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide),void 0):i.hide()};t.prototype.show=function(){var o=n.Event("show.bs."+this.type),i,l;if(this.hasContent()&&this.enabled){if(this.$element.trigger(o),o.isDefaultPrevented())return;i=this.tip();this.setContent();this.options.animation&&i.addClass("fade");var t="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,h=s.test(t);h&&(t=t.replace(s,"")||"top");i.detach().css({top:0,left:0,display:"block"}).addClass(t);this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var r=this.getPosition(),u=i[0].offsetWidth,f=i[0].offsetHeight;if(h){var e=this.$element.parent(),a=t,c=document.documentElement.scrollTop||document.body.scrollTop,v="body"==this.options.container?window.innerWidth:e.outerWidth(),y="body"==this.options.container?window.innerHeight:e.outerHeight(),p="body"==this.options.container?0:e.offset().left;t="bottom"==t&&r.top+r.height+f-c>y?"top":"top"==t&&r.top-c-f<0?"bottom":"right"==t&&r.right+u>v?"left":"left"==t&&r.left-u<p?"right":t;i.removeClass(a).addClass(t)}l=this.getCalculatedOffset(t,r,u,f);this.applyPlacement(l,t);this.$element.trigger("shown.bs."+this.type)}};t.prototype.applyPlacement=function(n,t){var h,i=this.tip(),c=i[0].offsetWidth,f=i[0].offsetHeight,e=parseInt(i.css("margin-top"),10),o=parseInt(i.css("margin-left"),10),u,r,s;isNaN(e)&&(e=0);isNaN(o)&&(o=0);n.top=n.top+e;n.left=n.left+o;i.offset(n).addClass("in");u=i[0].offsetWidth;r=i[0].offsetHeight;("top"==t&&r!=f&&(h=!0,n.top=n.top+f-r),/bottom|top/.test(t))?(s=0,n.left<0&&(s=-2*n.left,n.left=0,i.offset(n),u=i[0].offsetWidth,r=i[0].offsetHeight),this.replaceArrow(s-c+u,u,"left")):this.replaceArrow(r-f,r,"top");h&&i.offset(n)};t.prototype.replaceArrow=function(n,t,i){this.arrow().css(i,n?50*(1-n/t)+"%":"")};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle();n.find(".tooltip-inner")[this.options.html?"html":"text"](t);n.removeClass("fade in top bottom left right")};t.prototype.hide=function(){function i(){"in"!=u.hoverState&&t.detach()}var u=this,t=this.tip(),r=n.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(t.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?t.one(n.support.transition.end,i).emulateTransitionEnd(150):i(),this.$element.trigger("hidden.bs."+this.type),this)};t.prototype.fixTitle=function(){var n=this.$element;(n.attr("title")||"string"!=typeof n.attr("data-original-title"))&&n.attr("data-original-title",n.attr("title")||"").attr("title","")};t.prototype.hasContent=function(){return this.getTitle()};t.prototype.getPosition=function(){var t=this.$element[0];return n.extend({},"function"==typeof t.getBoundingClientRect?t.getBoundingClientRect():{width:t.offsetWidth,height:t.offsetHeight},this.$element.offset())};t.prototype.getCalculatedOffset=function(n,t,i,r){return"bottom"==n?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==n?{top:t.top-r,left:t.left+t.width/2-i/2}:"left"==n?{top:t.top+t.height/2-r/2,left:t.left-i}:{top:t.top+t.height/2-r/2,left:t.left+t.width}};t.prototype.getTitle=function(){var t=this.$element,n=this.options;return t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)};t.prototype.tip=function(){return this.$tip=this.$tip||n(this.options.template)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};t.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)};t.prototype.enable=function(){this.enabled=!0};t.prototype.disable=function(){this.enabled=!1};t.prototype.toggleEnabled=function(){this.enabled=!this.enabled};t.prototype.toggle=function(t){var i=t?n(t.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;i.tip().hasClass("in")?i.leave(i):i.enter(i)};t.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};i=n.fn.tooltip;n.fn.tooltip=function(i){return this.each(function(){var u=n(this),r=u.data("bs.tooltip"),f="object"==typeof i&&i;r||u.data("bs.tooltip",r=new t(this,f));"string"==typeof i&&r[i]()})};n.fn.tooltip.Constructor=t;n.fn.tooltip.noConflict=function(){return n.fn.tooltip=i,this}}(window.jQuery);+function(n){"use strict";var t=function(n,t){this.init("popover",n,t)},i;if(!n.fn.tooltip)throw new Error("Popover requires tooltip.js");t.DEFAULTS=n.extend({},n.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><\/div>'});t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype);t.prototype.constructor=t;t.prototype.getDefaults=function(){return t.DEFAULTS};t.prototype.setContent=function(){var n=this.tip(),t=this.getTitle(),i=this.getContent();n.find(".popover-title")[this.options.html?"html":"text"](t);n.find(".popover-content")[this.options.html?"html":"text"](i);n.removeClass("fade top bottom left right in");n.find(".popover-title").html()||n.find(".popover-title").hide()};t.prototype.hasContent=function(){return this.getTitle()||this.getContent()};t.prototype.getContent=function(){var t=this.$element,n=this.options;return t.attr("data-content")||("function"==typeof n.content?n.content.call(t[0]):n.content)};t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};t.prototype.tip=function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip};i=n.fn.popover;n.fn.popover=function(i){return this.each(function(){var u=n(this),r=u.data("bs.popover"),f="object"==typeof i&&i;r||u.data("bs.popover",r=new t(this,f));"string"==typeof i&&r[i]()})};n.fn.popover.Constructor=t;n.fn.popover.noConflict=function(){return n.fn.popover=i,this}}(window.jQuery);+function(n){"use strict";function t(i,r){var u,f=n.proxy(this.process,this);this.$element=n(i).is("body")?n(window):n(i);this.$body=n("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f);this.options=n.extend({},t.DEFAULTS,r);this.selector=(this.options.target||(u=n(i).attr("href"))&&u.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.offsets=n([]);this.targets=n([]);this.activeTarget=null;this.refresh();this.process()}t.DEFAULTS={offset:10};t.prototype.refresh=function(){var i=this.$element[0]==window?"offset":"position",t;this.offsets=n([]);this.targets=n([]);t=this;this.$body.find(this.selector).map(function(){var f=n(this),r=f.data("target")||f.attr("href"),u=/^#\w/.test(r)&&n(r);return u&&u.length&&[[u[i]().top+(!n.isWindow(t.$scrollElement.get(0))&&t.$scrollElement.scrollTop()),r]]||null}).sort(function(n,t){return n[0]-t[0]}).each(function(){t.offsets.push(this[0]);t.targets.push(this[1])})};t.prototype.process=function(){var n,i=this.$scrollElement.scrollTop()+this.options.offset,f=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,e=f-this.$scrollElement.height(),t=this.offsets,r=this.targets,u=this.activeTarget;if(i>=e)return u!=(n=r.last()[0])&&this.activate(n);for(n=t.length;n--;)u!=r[n]&&i>=t[n]&&(!t[n+1]||i<=t[n+1])&&this.activate(r[n])};t.prototype.activate=function(t){this.activeTarget=t;n(this.selector).parents(".active").removeClass("active");var r=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=n(r).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active"));i.trigger("activate")};var i=n.fn.scrollspy;n.fn.scrollspy=function(i){return this.each(function(){var u=n(this),r=u.data("bs.scrollspy"),f="object"==typeof i&&i;r||u.data("bs.scrollspy",r=new t(this,f));"string"==typeof i&&r[i]()})};n.fn.scrollspy.Constructor=t;n.fn.scrollspy.noConflict=function(){return n.fn.scrollspy=i,this};n(window).on("load",function(){n('[data-spy="scroll"]').each(function(){var t=n(this);t.scrollspy(t.data())})})}(window.jQuery);+function(n){"use strict";var t=function(t){this.element=n(t)},i;t.prototype.show=function(){var t=this.element,e=t.closest("ul:not(.dropdown-menu)"),i=t.attr("data-target"),r,u,f;(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),t.parent("li").hasClass("active"))||(r=e.find(".active:last a")[0],u=n.Event("show.bs.tab",{relatedTarget:r}),(t.trigger(u),u.isDefaultPrevented())||(f=n(i),this.activate(t.parent("li"),e),this.activate(f,f.parent(),function(){t.trigger({type:"shown.bs.tab",relatedTarget:r})})))};t.prototype.activate=function(t,i,r){function f(){u.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");t.addClass("active");e?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade");t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active");r&&r()}var u=i.find("> .active"),e=r&&n.support.transition&&u.hasClass("fade");e?u.one(n.support.transition.end,f).emulateTransitionEnd(150):f();u.removeClass("in")};i=n.fn.tab;n.fn.tab=function(i){return this.each(function(){var u=n(this),r=u.data("bs.tab");r||u.data("bs.tab",r=new t(this));"string"==typeof i&&r[i]()})};n.fn.tab.Constructor=t;n.fn.tab.noConflict=function(){return n.fn.tab=i,this};n(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault();n(this).tab("show")})}(window.jQuery);+function(n){"use strict";var t=function(i,r){this.options=n.extend({},t.DEFAULTS,r);this.$window=n(window).on("scroll.bs.affix.data-api",n.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",n.proxy(this.checkPositionWithEventLoop,this));this.$element=n(i);this.affixed=this.unpin=null;this.checkPosition()},i;t.RESET="affix affix-top affix-bottom";t.DEFAULTS={offset:0};t.prototype.checkPositionWithEventLoop=function(){setTimeout(n.proxy(this.checkPosition,this),1)};t.prototype.checkPosition=function(){var i;if(this.$element.is(":visible")){var s=n(document).height(),e=this.$window.scrollTop(),o=this.$element.offset(),r=this.options.offset,f=r.top,u=r.bottom;"object"!=typeof r&&(u=f=r);"function"==typeof f&&(f=r.top());"function"==typeof u&&(u=r.bottom());i=null!=this.unpin&&e+this.unpin<=o.top?!1:null!=u&&o.top+this.$element.height()>=s-u?"bottom":null!=f&&f>=e?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?o.top-e:null,this.$element.removeClass(t.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-u-this.$element.height()}))}};i=n.fn.affix;n.fn.affix=function(i){return this.each(function(){var u=n(this),r=u.data("bs.affix"),f="object"==typeof i&&i;r||u.data("bs.affix",r=new t(this,f));"string"==typeof i&&r[i]()})};n.fn.affix.Constructor=t;n.fn.affix.noConflict=function(){return n.fn.affix=i,this};n(window).on("load",function(){n('[data-spy="affix"]').each(function(){var i=n(this),t=i.data();t.offset=t.offset||{};t.offsetBottom&&(t.offset.bottom=t.offsetBottom);t.offsetTop&&(t.offset.top=t.offsetTop);i.affix(t)})})}(window.jQuery);!function(n){var t="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?n(exports):t&&(t.hljs=n({}),"function"==typeof define&&define.amd&&define([],function(){return t.hljs}))}(function(n){function t(n){return n.replace(/[&<>]/gm,function(n){return ht[n]})}function o(n){return n.nodeName.toLowerCase()}function s(n,t){var i=n&&n.exec(t);return i&&0===i.index}function y(n){return et.test(n)}function d(n){var i,u,e,r,t=n.className+" ";if(t+=n.parentNode?n.parentNode.className:"",u=ot.exec(t))return f(u[1])?u[1]:"no-highlight";for(t=t.split(/\s+/),i=0,e=t.length;e>i;i++)if(r=t[i],y(r)||f(r))return r}function h(n,t){var i,r={};for(i in n)r[i]=n[i];if(t)for(i in t)r[i]=t[i];return r}function p(n){var t=[];return function i(n,r){for(var u=n.firstChild;u;u=u.nextSibling)3===u.nodeType?r+=u.nodeValue.length:1===u.nodeType&&(t.push({event:"start",offset:r,node:u}),r=i(u,r),o(u).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:u}));return r}(n,0),t}function g(n,i,r){function h(){return n.length&&i.length?n[0].offset!==i[0].offset?n[0].offset<i[0].offset?n:i:"start"===i[0].event?n:i:n.length?n:i}function c(n){function i(n){return" "+n.nodeName+'="'+t(n.value)+'"'}e+="<"+o(n)+k.map.call(n.attributes,i).join("")+">"}function l(n){e+="<\/"+o(n)+">"}function a(n){("start"===n.event?c:l)(n.node)}for(var u,f=0,e="",s=[];n.length||i.length;)if(u=h(),e+=t(r.substring(f,u[0].offset)),f=u[0].offset,u===n){s.reverse().forEach(l);do a(u.splice(0,1)[0]),u=h();while(u===n&&u.length&&u[0].offset===f);s.reverse().forEach(c)}else"start"===u[0].event?s.push(u[0].node):s.pop(),a(u.splice(0,1)[0]);return e+t(r.substr(f))}function nt(n){function i(n){return n&&n.source||n}function t(t,r){return new RegExp(i(t),"m"+(n.cI?"i":"")+(r?"g":""))}function r(u,f){var o,s,e,c;u.compiled||((u.compiled=!0,u.k=u.k||u.bK,u.k)&&(o={},s=function(t,i){n.cI&&(i=i.toLowerCase());i.split(" ").forEach(function(n){var i=n.split("|");o[i[0]]=[t,i[1]?Number(i[1]):1]})},"string"==typeof u.k?s("keyword",u.k):l(u.k).forEach(function(n){s(n,u.k[n])}),u.k=o),u.lR=t(u.l||/\w+/,!0),f&&(u.bK&&(u.b="\\b("+u.bK.split(" ").join("|")+")\\b"),u.b||(u.b=/\B|\b/),u.bR=t(u.b),u.e||u.eW||(u.e=/\B|\b/),u.e&&(u.eR=t(u.e)),u.tE=i(u.e)||"",u.eW&&f.tE&&(u.tE+=(u.e?"|":"")+f.tE)),u.i&&(u.iR=t(u.i)),null==u.r&&(u.r=1),u.c||(u.c=[]),e=[],u.c.forEach(function(n){n.v?n.v.forEach(function(t){e.push(h(n,t))}):e.push("self"===n?u:n)}),u.c=e,u.c.forEach(function(n){r(n,u)}),u.starts&&r(u.starts,f),c=u.c.map(function(n){return n.bK?"\\.?("+n.b+")\\.?":n.b}).concat([u.tE,u.i]).map(i).filter(Boolean),u.t=c.length?t(c.join("|"),!0):{exec:function(){return null}})}r(n)}function e(n,u,o,h){function st(n,t){for(var i=0,r=t.c.length;r>i;i++)if(s(t.c[i].bR,n))return t.c[i]}function rt(n,t){if(s(n.eR,t)){for(;n.endsParent&&n.parent;)n=n.parent;return n}if(n.eW)return rt(n.parent,t)}function ht(n,t){return!o&&s(t.iR,n)}function ct(n,t){var i=w.cI?t[0].toLowerCase():t[0];return n.k.hasOwnProperty(i)&&n.k[i]}function g(n,t,r,u){var e=u?"":i.classPrefix,f='<span class="'+e,o=r?"":v;return f+=n+'">',f+t+o}function lt(){var r,u,n,i;if(!l.k)return t(a);for(i="",u=0,l.lR.lastIndex=0,n=l.lR.exec(a);n;)i+=t(a.substring(u,n.index)),r=ct(l,n),r?(b+=r[1],i+=g(r[0],t(n[0]))):i+=t(n[0]),u=l.lR.lastIndex,n=l.lR.exec(a);return i+t(a.substr(u))}function at(){var i="string"==typeof l.sL,n;return i&&!r[l.sL]?t(a):(n=i?e(l.sL,a,!0,et[l.sL]):c(a,l.sL.length?l.sL:void 0),l.r>0&&(b+=n.r),i&&(et[l.sL]=n.top),g(n.language,n.value,!1,!0))}function tt(){p+=null!=l.sL?at():lt();a=""}function ut(n){p+=n.cN?g(n.cN,"",!0):"";l=Object.create(n,{parent:{value:l}})}function ft(n,t){var i,u,r;if(a+=n,null==t)return tt(),0;if(i=st(t,l),i)return i.skip?a+=t:(i.eB&&(a+=t),tt(),i.rB||i.eB||(a=t)),ut(i,t),i.rB?0:t.length;if(u=rt(l,t),u){r=l;r.skip?a+=t:(r.rE||r.eE||(a+=t),tt(),r.eE&&(a=t));do l.cN&&(p+=v),l.skip||(b+=l.r),l=l.parent;while(l!==u.parent);return u.starts&&ut(u.starts,""),r.rE?0:t.length}if(ht(t,l))throw new Error('Illegal lexeme "'+t+'" for mode "'+(l.cN||"<unnamed>")+'"');return a+=t,t.length||1}var w=f(n),a,b,k,ot,d;if(!w)throw new Error('Unknown language: "'+n+'"');nt(w);for(var l=h||w,et={},p="",y=l;y!==w;y=y.parent)y.cN&&(p=g(y.cN,"",!0)+p);a="";b=0;try{for(d=0;;){if(l.t.lastIndex=d,k=l.t.exec(u),!k)break;ot=ft(u.substring(d,k.index),k[0]);d=k.index+ot}for(ft(u.substr(d)),y=l;y.parent;y=y.parent)y.cN&&(p+=v);return{r:b,value:p,language:n,top:l}}catch(it){if(it.message&&-1!==it.message.indexOf("Illegal"))return{r:0,value:t(u)};throw it;}}function c(n,u){u=u||i.languages||l(r);var o={r:0,value:t(n)},s=o;return u.filter(f).forEach(function(t){var i=e(t,n,!1);i.language=t;i.r>s.r&&(s=i);i.r>o.r&&(s=o,o=i)}),s.language&&(o.second_best=s),o}function w(n){return i.tabReplace||i.useBR?n.replace(st,function(n,t){return i.useBR&&"\n"===n?"<br>":i.tabReplace?t.replace(/\t/g,i.tabReplace):void 0}):n}function tt(n,t,i){var u=t?a[t]:i,r=[n.trim()];return n.match(/\bhljs\b/)||r.push("hljs"),-1===n.indexOf(u)&&r.push(u),r.join(" ").trim()}function b(n){var r,o,t,s,u,f=d(n);y(f)||(i.useBR?(r=document.createElementNS("http://www.w3.org/1999/xhtml","div"),r.innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):r=n,u=r.textContent,t=f?e(f,u,!0):c(u),o=p(r),o.length&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","div"),s.innerHTML=t.value,t.value=g(o,p(s),u)),t.value=w(t.value),n.innerHTML=t.value,n.className=tt(n.className,f,t.language),n.result={language:t.language,re:t.r},t.second_best&&(n.second_best={language:t.second_best.language,re:t.second_best.r}))}function it(n){i=h(i,n)}function u(){if(!u.called){u.called=!0;var n=document.querySelectorAll("pre code");k.forEach.call(n,b)}}function rt(){addEventListener("DOMContentLoaded",u,!1);addEventListener("load",u,!1)}function ut(t,i){var u=r[t]=i(n);u.aliases&&u.aliases.forEach(function(n){a[n]=t})}function ft(){return l(r)}function f(n){return n=(n||"").toLowerCase(),r[n]||r[a[n]]}var k=[],l=Object.keys,r={},a={},et=/^(no-?highlight|plain|text)$/i,ot=/\blang(?:uage)?-([\w-]+)\b/i,st=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,v="<\/span>",i={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},ht={"&":"&amp;","<":"&lt;",">":"&gt;"};return n.highlight=e,n.highlightAuto=c,n.fixMarkup=w,n.highlightBlock=b,n.configure=it,n.initHighlighting=u,n.initHighlightingOnLoad=rt,n.registerLanguage=ut,n.listLanguages=ft,n.getLanguage=f,n.inherit=h,n.IR="[a-zA-Z]\\w*",n.UIR="[a-zA-Z_]\\w*",n.NR="\\b\\d+(\\.\\d+)?",n.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BNR="\\b(0b[01]+)",n.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BE={b:"\\\\[\\s\\S]",r:0},n.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[n.BE]},n.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[n.BE]},n.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},n.C=function(t,i,r){var u=n.inherit({cN:"comment",b:t,e:i,c:[]},r||{});return u.c.push(n.PWM),u.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),u},n.CLCM=n.C("//","$"),n.CBCM=n.C("/\\*","\\*/"),n.HCM=n.C("#","$"),n.NM={cN:"number",b:n.NR,r:0},n.CNM={cN:"number",b:n.CNR,r:0},n.BNM={cN:"number",b:n.BNR,r:0},n.CSSNM={cN:"number",b:n.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},n.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[n.BE,{b:/\[/,e:/\]/,r:0,c:[n.BE]}]},n.TM={cN:"title",b:n.IR,r:0},n.UTM={cN:"title",b:n.UIR,r:0},n.METHOD_GUARD={b:"\\.\\s*"+n.UIR,r:0},n});hljs.registerLanguage("ini",function(n){var t={cN:"string",c:[n.BE],v:[{b:"'''",e:"'''",r:10},{b:'"""',e:'"""',r:10},{b:'"',e:'"'},{b:"'",e:"'"}]};return{aliases:["toml"],cI:!0,i:/\S/,c:[n.C(";","$"),n.HCM,{cN:"section",b:/^\s*\[+/,e:/\]+/},{b:/^[a-z0-9\[\]_-]+\s*=\s*/,e:"$",rB:!0,c:[{cN:"attr",b:/[a-z0-9\[\]_-]+/},{b:/=/,eW:!0,r:0,c:[{cN:"literal",b:/\bon|off|true|false|yes|no\b/},{cN:"variable",v:[{b:/\$[\w\d"][\w\d_]*/},{b:/\$\{(.*?)}/}]},t,{cN:"number",b:/([\+\-]+)?[\d]+_[\d_]+/},n.NM]}]}]}});hljs.registerLanguage("diff",function(){return{aliases:["patch"],c:[{cN:"meta",r:10,v:[{b:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{b:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{b:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{cN:"comment",v:[{b:/Index: /,e:/$/},{b:/={3,}/,e:/$/},{b:/^\-{3}/,e:/$/},{b:/^\*{3} /,e:/$/},{b:/^\+{3}/,e:/$/},{b:/\*{5}/,e:/\*{5}$/}]},{cN:"addition",b:"^\\+",e:"$"},{cN:"deletion",b:"^\\-",e:"$"},{cN:"addition",b:"^\\!",e:"$"}]}});hljs.registerLanguage("coffeescript",function(n){var r={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super yield import export from as default await then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},t="[A-Za-z$_][0-9A-Za-z$_]*",i={cN:"subst",b:/#\{/,e:/}/,k:r},u=[n.BNM,n.inherit(n.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[n.BE]},{b:/'/,e:/'/,c:[n.BE]},{b:/"""/,e:/"""/,c:[n.BE,i]},{b:/"/,e:/"/,c:[n.BE,i]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[i,n.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{b:"@"+t},{sL:"javascript",eB:!0,eE:!0,v:[{b:"```",e:"```"},{b:"`",e:"`"}]}];i.c=u;var f=n.inherit(n.TM,{b:t}),e="(\\(.*\\))?\\s*\\B[-=]>",o={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:r,c:["self"].concat(u)}]};return{aliases:["coffee","cson","iced"],k:r,i:/\/\*/,c:u.concat([n.C("###","###"),n.HCM,{cN:"function",b:"^\\s*"+t+"\\s*=\\s*"+e,e:"[-=]>",rB:!0,c:[f,o]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:e,e:"[-=]>",rB:!0,c:[o]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[f]},f]},{b:t+":",e:":",rB:!0,rE:!0,r:0}])}});hljs.registerLanguage("cs",function(n){var t={keyword:"abstract as base bool break byte case catch char checked const continue decimal default delegate do double else enum event explicit extern finally fixed float for foreach goto if implicit in int interface internal is lock long object operator out override params private protected public readonly ref sbyte sealed short sizeof stackalloc static string struct switch this try typeof uint ulong unchecked unsafe ushort using virtual void volatile while nameof add alias ascending async await by descending dynamic equals from get global group into join let on orderby partial remove select set value var where yield",literal:"null false true"},i={cN:"string",b:'@"',e:'"',c:[{b:'""'}]},h=n.inherit(i,{i:/\n/}),r={cN:"subst",b:"{",e:"}",k:t},u=n.inherit(r,{i:/\n/}),f={cN:"string",b:/\$"/,e:'"',i:/\n/,c:[{b:"{{"},{b:"}}"},n.BE,u]},e={cN:"string",b:/\$@"/,e:'"',c:[{b:"{{"},{b:"}}"},{b:'""'},r]},c=n.inherit(e,{i:/\n/,c:[{b:"{{"},{b:"}}"},{b:'""'},u]}),o,s;return r.c=[e,f,i,n.ASM,n.QSM,n.CNM,n.CBCM],u.c=[c,f,h,n.ASM,n.QSM,n.CNM,n.inherit(n.CBCM,{i:/\n/})],o={v:[e,f,i,n.ASM,n.QSM]},s=n.IR+"(<"+n.IR+"(\\s*,\\s*"+n.IR+")*>)?(\\[\\])?",{aliases:["csharp"],k:t,i:/::/,c:[n.C("///","$",{rB:!0,c:[{cN:"doctag",v:[{b:"///",r:0},{b:"<!--|-->"},{b:"<\/?",e:">"}]}]}),n.CLCM,n.CBCM,{cN:"meta",b:"#",e:"$",k:{"meta-keyword":"if else elif endif define undef warning error line region endregion pragma checksum"}},o,n.CNM,{bK:"class interface",e:/[{;=]/,i:/[^\s:]/,c:[n.TM,n.CLCM,n.CBCM]},{bK:"namespace",e:/[{;=]/,i:/[^\s:]/,c:[n.inherit(n.TM,{b:"[a-zA-Z](\\.?\\w)*"}),n.CLCM,n.CBCM]},{bK:"new return throw await",r:0},{cN:"function",b:"("+s+"\\s+)+"+n.IR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:t,c:[{b:n.IR+"\\s*\\(",rB:!0,c:[n.TM],r:0},{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,k:t,r:0,c:[o,n.CNM,n.CBCM]},n.CLCM,n.CBCM]}]}});hljs.registerLanguage("sql",function(n){var t=n.C("--","$");return{cI:!0,i:/[<>{}*#]/,c:[{bK:"begin end start commit rollback savepoint lock alter create drop rename call delete do handler insert load replace select truncate update set show pragma grant merge describe use explain help declare prepare execute deallocate release unlock purge reset change stop analyze cache flush optimize repair kill install uninstall checksum restore check backup revoke comment",e:/;/,eW:!0,l:/[\w\.]+/,k:{keyword:"abort abs absolute acc acce accep accept access accessed accessible account acos action activate add addtime admin administer advanced advise aes_decrypt aes_encrypt after agent aggregate ali alia alias allocate allow alter always analyze ancillary and any anydata anydataset anyschema anytype apply archive archived archivelog are as asc ascii asin assembly assertion associate asynchronous at atan atn2 attr attri attrib attribu attribut attribute attributes audit authenticated authentication authid authors auto autoallocate autodblink autoextend automatic availability avg backup badfile basicfile before begin beginning benchmark between bfile bfile_base big bigfile bin binary_double binary_float binlog bit_and bit_count bit_length bit_or bit_xor bitmap blob_base block blocksize body both bound buffer_cache buffer_pool build bulk by byte byteordermark bytes cache caching call calling cancel capacity cascade cascaded case cast catalog category ceil ceiling chain change changed char_base char_length character_length characters characterset charindex charset charsetform charsetid check checksum checksum_agg child choose chr chunk class cleanup clear client clob clob_base clone close cluster_id cluster_probability cluster_set clustering coalesce coercibility col collate collation collect colu colum column column_value columns columns_updated comment commit compact compatibility compiled complete composite_limit compound compress compute concat concat_ws concurrent confirm conn connec connect connect_by_iscycle connect_by_isleaf connect_by_root connect_time connection consider consistent constant constraint constraints constructor container content contents context contributors controlfile conv convert convert_tz corr corr_k corr_s corresponding corruption cos cost count count_big counted covar_pop covar_samp cpu_per_call cpu_per_session crc32 create creation critical cross cube cume_dist curdate current current_date current_time current_timestamp current_user cursor curtime customdatum cycle data database databases datafile datafiles datalength date_add date_cache date_format date_sub dateadd datediff datefromparts datename datepart datetime2fromparts day day_to_second dayname dayofmonth dayofweek dayofyear days db_role_change dbtimezone ddl deallocate declare decode decompose decrement decrypt deduplicate def defa defau defaul default defaults deferred defi defin define degrees delayed delegate delete delete_all delimited demand dense_rank depth dequeue des_decrypt des_encrypt des_key_file desc descr descri describ describe descriptor deterministic diagnostics difference dimension direct_load directory disable disable_all disallow disassociate discardfile disconnect diskgroup distinct distinctrow distribute distributed div do document domain dotnet double downgrade drop dumpfile duplicate duration each edition editionable editions element ellipsis else elsif elt empty enable enable_all enclosed encode encoding encrypt end end-exec endian enforced engine engines enqueue enterprise entityescaping eomonth error errors escaped evalname evaluate event eventdata events except exception exceptions exchange exclude excluding execu execut execute exempt exists exit exp expire explain export export_set extended extent external external_1 external_2 externally extract failed failed_login_attempts failover failure far fast feature_set feature_value fetch field fields file file_name_convert filesystem_like_logging final finish first first_value fixed flash_cache flashback floor flush following follows for forall force form forma format found found_rows freelist freelists freepools fresh from from_base64 from_days ftp full function general generated get get_format get_lock getdate getutcdate global global_name globally go goto grant grants greatest group group_concat group_id grouping grouping_id groups gtid_subtract guarantee guard handler hash hashkeys having hea head headi headin heading heap help hex hierarchy high high_priority hosts hour http id ident_current ident_incr ident_seed identified identity idle_time if ifnull ignore iif ilike ilm immediate import in include including increment index indexes indexing indextype indicator indices inet6_aton inet6_ntoa inet_aton inet_ntoa infile initial initialized initially initrans inmemory inner innodb input insert install instance instantiable instr interface interleaved intersect into invalidate invisible is is_free_lock is_ipv4 is_ipv4_compat is_not is_not_null is_used_lock isdate isnull isolation iterate java join json json_exists keep keep_duplicates key keys kill language large last last_day last_insert_id last_value lax lcase lead leading least leaves left len lenght length less level levels library like like2 like4 likec limit lines link list listagg little ln load load_file lob lobs local localtime localtimestamp locate locator lock locked log log10 log2 logfile logfiles logging logical logical_reads_per_call logoff logon logs long loop low low_priority lower lpad lrtrim ltrim main make_set makedate maketime managed management manual map mapping mask master master_pos_wait match matched materialized max maxextents maximize maxinstances maxlen maxlogfiles maxloghistory maxlogmembers maxsize maxtrans md5 measures median medium member memcompress memory merge microsecond mid migration min minextents minimum mining minus minute minvalue missing mod mode model modification modify module monitoring month months mount move movement multiset mutex name name_const names nan national native natural nav nchar nclob nested never new newline next nextval no no_write_to_binlog noarchivelog noaudit nobadfile nocheck nocompress nocopy nocycle nodelay nodiscardfile noentityescaping noguarantee nokeep nologfile nomapping nomaxvalue nominimize nominvalue nomonitoring none noneditionable nonschema noorder nopr nopro noprom nopromp noprompt norely noresetlogs noreverse normal norowdependencies noschemacheck noswitch not nothing notice notrim novalidate now nowait nth_value nullif nulls num numb numbe nvarchar nvarchar2 object ocicoll ocidate ocidatetime ociduration ociinterval ociloblocator ocinumber ociref ocirefcursor ocirowid ocistring ocitype oct octet_length of off offline offset oid oidindex old on online only opaque open operations operator optimal optimize option optionally or oracle oracle_date oradata ord ordaudio orddicom orddoc order ordimage ordinality ordvideo organization orlany orlvary out outer outfile outline output over overflow overriding package pad parallel parallel_enable parameters parent parse partial partition partitions pascal passing password password_grace_time password_lock_time password_reuse_max password_reuse_time password_verify_function patch path patindex pctincrease pctthreshold pctused pctversion percent percent_rank percentile_cont percentile_disc performance period period_add period_diff permanent physical pi pipe pipelined pivot pluggable plugin policy position post_transaction pow power pragma prebuilt precedes preceding precision prediction prediction_cost prediction_details prediction_probability prediction_set prepare present preserve prior priority private private_sga privileges procedural procedure procedure_analyze processlist profiles project prompt protection public publishingservername purge quarter query quick quiesce quota quotename radians raise rand range rank raw read reads readsize rebuild record records recover recovery recursive recycle redo reduced ref reference referenced references referencing refresh regexp_like register regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy reject rekey relational relative relaylog release release_lock relies_on relocate rely rem remainder rename repair repeat replace replicate replication required reset resetlogs resize resource respect restore restricted result result_cache resumable resume retention return returning returns reuse reverse revoke right rlike role roles rollback rolling rollup round row row_count rowdependencies rowid rownum rows rtrim rules safe salt sample save savepoint sb1 sb2 sb4 scan schema schemacheck scn scope scroll sdo_georaster sdo_topo_geometry search sec_to_time second section securefile security seed segment select self sequence sequential serializable server servererror session session_user sessions_per_user set sets settings sha sha1 sha2 share shared shared_pool short show shrink shutdown si_averagecolor si_colorhistogram si_featurelist si_positionalcolor si_stillimage si_texture siblings sid sign sin size size_t sizes skip slave sleep smalldatetimefromparts smallfile snapshot some soname sort soundex source space sparse spfile split sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_small_result sql_variant_property sqlcode sqldata sqlerror sqlname sqlstate sqrt square standalone standby start starting startup statement static statistics stats_binomial_test stats_crosstab stats_ks_test stats_mode stats_mw_test stats_one_way_anova stats_t_test_ stats_t_test_indep stats_t_test_one stats_t_test_paired stats_wsr_test status std stddev stddev_pop stddev_samp stdev stop storage store stored str str_to_date straight_join strcmp strict string struct stuff style subdate subpartition subpartitions substitutable substr substring subtime subtring_index subtype success sum suspend switch switchoffset switchover sync synchronous synonym sys sys_xmlagg sysasm sysaux sysdate sysdatetimeoffset sysdba sysoper system system_user sysutcdatetime table tables tablespace tan tdo template temporary terminated tertiary_weights test than then thread through tier ties time time_format time_zone timediff timefromparts timeout timestamp timestampadd timestampdiff timezone_abbr timezone_minute timezone_region to to_base64 to_date to_days to_seconds todatetimeoffset trace tracking transaction transactional translate translation treat trigger trigger_nestlevel triggers trim truncate try_cast try_convert try_parse type ub1 ub2 ub4 ucase unarchived unbounded uncompress under undo unhex unicode uniform uninstall union unique unix_timestamp unknown unlimited unlock unpivot unrecoverable unsafe unsigned until untrusted unusable unused update updated upgrade upped upper upsert url urowid usable usage use use_stored_outlines user user_data user_resources users using utc_date utc_timestamp uuid uuid_short validate validate_password_strength validation valist value values var var_samp varcharc vari varia variab variabl variable variables variance varp varraw varrawc varray verify version versions view virtual visible void wait wallet warning warnings week weekday weekofyear wellformed when whene whenev wheneve whenever where while whitespace with within without work wrapped xdb xml xmlagg xmlattributes xmlcast xmlcolattval xmlelement xmlexists xmlforest xmlindex xmlnamespaces xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltype xor year year_to_month years yearweek",literal:"true false null",built_in:"array bigint binary bit blob boolean char character date dec decimal float int int8 integer interval number numeric real record serial serial8 smallint text varchar varying void"},c:[{cN:"string",b:"'",e:"'",c:[n.BE,{b:"''"}]},{cN:"string",b:'"',e:'"',c:[n.BE,{b:'""'}]},{cN:"string",b:"`",e:"`",c:[n.BE]},n.CNM,n.CBCM,t]},n.CBCM,t]}});hljs.registerLanguage("fsharp",function(n){var t={b:"<",e:">",c:[n.inherit(n.TM,{b:/'[a-zA-Z0-9_]+/})]};return{aliases:["fs"],k:"abstract and as assert base begin class default delegate do done downcast downto elif else end exception extern false finally for fun function global if in inherit inline interface internal lazy let match member module mutable namespace new null of open or override private public rec return sig static struct then to true try type upcast use val void when while with yield",i:/\/\*/,c:[{cN:"keyword",b:/\b(yield|return|let|do)!/},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},{cN:"string",b:'"""',e:'"""'},n.C("\\(\\*","\\*\\)"),{cN:"class",bK:"type",e:"\\(|=|$",eE:!0,c:[n.UTM,t]},{cN:"meta",b:"\\[<",e:">\\]",r:10},{cN:"symbol",b:"\\B('[A-Za-z])\\b",c:[n.BE]},n.CLCM,n.inherit(n.QSM,{i:null}),n.CNM]}});hljs.registerLanguage("javascript",function(n){var t="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},f={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:n.CNR}],r:0},r={cN:"subst",b:"\\$\\{",e:"\\}",k:i,c:[]},e={cN:"string",b:"`",e:"`",c:[n.BE,r]},u;return r.c=[n.ASM,n.QSM,e,f,n.RM],u=r.c.concat([n.CBCM,n.CLCM]),{aliases:["js","jsx"],k:i,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},n.ASM,n.QSM,e,n.CLCM,n.CBCM,f,{b:/[{,]\s*/,r:0,c:[{b:t+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:t,r:0}]}]},{b:"("+n.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[n.CLCM,n.CBCM,n.RM,{cN:"function",b:"(\\(.*?\\)|"+t+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:t},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:i,c:u}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[n.inherit(n.TM,{b:t}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:u}],i:/\[|%/},{b:/\$[(.]/},n.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},n.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}});hljs.registerLanguage("nginx",function(n){var t={cN:"variable",v:[{b:/\$\d+/},{b:/\$\{/,e:/}/},{b:"[\\$\\@]"+n.UIR}]},i={eW:!0,l:"[a-z/_]+",k:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},r:0,i:"=>",c:[n.HCM,{cN:"string",c:[n.BE,t],v:[{b:/"/,e:/"/},{b:/'/,e:/'/}]},{b:"([a-z]+):/",e:"\\s",eW:!0,eE:!0,c:[t]},{cN:"regexp",c:[n.BE,t],v:[{b:"\\s\\^",e:"\\s|{|;",rE:!0},{b:"~\\*?\\s+",e:"\\s|{|;",rE:!0},{b:"\\*(\\.[a-z\\-]+)+"},{b:"([a-z\\-]+\\.)+\\*"}]},{cN:"number",b:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{cN:"number",b:"\\b\\d+[kKmMgGdshdwy]*\\b",r:0},t]};return{aliases:["nginxconf"],c:[n.HCM,{b:n.UIR+"\\s+{",rB:!0,e:"{",c:[{cN:"section",b:n.UIR}],r:0},{b:n.UIR+"\\s",e:";|{",rB:!0,c:[{cN:"attribute",b:n.UIR,starts:i}],r:0}],i:"[^\\s\\}]"}});hljs.registerLanguage("objectivec",function(n){var t=/[a-zA-Z@][a-zA-Z0-9_]*/,i="@interface @class @protocol @implementation";return{aliases:["mm","objc","obj-c"],k:{keyword:"int float while char export sizeof typedef const struct for union unsigned long volatile static bool mutable if do return goto void enum else break extern asm case short default double register explicit signed typename this switch continue wchar_t inline readonly assign readwrite self @synchronized id typeof nonatomic super unichar IBOutlet IBAction strong weak copy in out inout bycopy byref oneway __strong __weak __block __autoreleasing @private @protected @public @try @property @end @throw @catch @finally @autoreleasepool @synthesize @dynamic @selector @optional @required @encode @package @import @defs @compatibility_alias __bridge __bridge_transfer __bridge_retained __bridge_retain __covariant __contravariant __kindof _Nonnull _Nullable _Null_unspecified __FUNCTION__ __PRETTY_FUNCTION__ __attribute__ getter setter retain unsafe_unretained nonnull nullable null_unspecified null_resettable class instancetype NS_DESIGNATED_INITIALIZER NS_UNAVAILABLE NS_REQUIRES_SUPER NS_RETURNS_INNER_POINTER NS_INLINE NS_AVAILABLE NS_DEPRECATED NS_ENUM NS_OPTIONS NS_SWIFT_UNAVAILABLE NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_REFINED_FOR_SWIFT NS_SWIFT_NAME NS_SWIFT_NOTHROW NS_DURING NS_HANDLER NS_ENDHANDLER NS_VALUERETURN NS_VOIDRETURN",literal:"false true FALSE TRUE nil YES NO NULL",built_in:"BOOL dispatch_once_t dispatch_queue_t dispatch_sync dispatch_async dispatch_once"},l:t,i:"<\/",c:[{cN:"built_in",b:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},n.CLCM,n.CBCM,n.CNM,n.QSM,{cN:"string",v:[{b:'@"',e:'"',i:"\\n",c:[n.BE]},{b:"'",e:"[^\\\\]'",i:"[^\\\\][^']"}]},{cN:"meta",b:"#",e:"$",c:[{cN:"meta-string",v:[{b:'"',e:'"'},{b:"<",e:">"}]}]},{cN:"class",b:"("+i.split(" ").join("|")+")\\b",e:"({|$)",eE:!0,k:i,l:t,c:[n.UTM]},{b:"\\."+n.UIR,r:0}]}});hljs.registerLanguage("php",function(n){var i={b:"\\$+[a-zA-Z_-ÿ][a-zA-Z0-9_-ÿ]*"},t={cN:"meta",b:/<\?(php)?|\?>/},r={cN:"string",c:[n.BE,t],v:[{b:'b"',e:'"'},{b:"b'",e:"'"},n.inherit(n.ASM,{i:null}),n.inherit(n.QSM,{i:null})]},u={v:[n.BNM,n.CNM]};return{aliases:["php3","php4","php5","php6"],cI:!0,k:"and include_once list abstract global private echo interface as static endswitch array null if endwhile or const for endforeach self var while isset public protected exit foreach throw elseif include __FILE__ empty require_once do xor return parent clone use __CLASS__ __LINE__ else break print eval new catch __METHOD__ case exception default die require __FUNCTION__ enddeclare final try switch continue endfor endif declare unset true false trait goto instanceof insteadof __DIR__ __NAMESPACE__ yield finally",c:[n.HCM,n.C("//","$",{c:[t]}),n.C("/\\*","\\*/",{c:[{cN:"doctag",b:"@[A-Za-z]+"}]}),n.C("__halt_compiler.+?;",!1,{eW:!0,k:"__halt_compiler",l:n.UIR}),{cN:"string",b:/<<<['"]?\w+['"]?$/,e:/^\w+;?$/,c:[n.BE,{cN:"subst",v:[{b:/\$\w+/},{b:/\{\$/,e:/\}/}]}]},t,{cN:"keyword",b:/\$this\b/},i,{b:/(::|->)+[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/},{cN:"function",bK:"function",e:/[;{]/,eE:!0,i:"\\$|\\[|%",c:[n.UTM,{cN:"params",b:"\\(",e:"\\)",c:["self",i,n.CBCM,r,u]}]},{cN:"class",bK:"class interface",e:"{",eE:!0,i:/[:\(\$"]/,c:[{bK:"extends implements"},n.UTM]},{bK:"namespace",e:";",i:/[\.']/,c:[n.UTM]},{bK:"use",e:";",c:[n.UTM]},{b:"=>"},r,u]}});hljs.registerLanguage("json",function(n){var i={literal:"true false null"},t=[n.QSM,n.CNM],r={e:",",eW:!0,eE:!0,c:t,k:i},u={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[n.BE],i:"\\n"},n.inherit(r,{b:/:/})],i:"\\S"},f={b:"\\[",e:"\\]",c:[n.inherit(r)],i:"\\S"};return t.splice(t.length,0,u,f),{c:t,k:i,i:"\\S"}});hljs.registerLanguage("cpp",function(n){var r={cN:"keyword",b:"\\b[a-z\\d_]*_t\\b"},i={cN:"string",v:[{b:'(u8?|U)?L?"',e:'"',i:"\\n",c:[n.BE]},{b:'(u8?|U)?R"',e:'"',c:[n.BE]},{b:"'\\\\?.",e:"'",i:"."}]},e={cN:"number",v:[{b:"\\b(0b[01']+)"},{b:"\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{b:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],r:0},u={cN:"meta",b:/#\s*[a-z]+\b/,e:/$/,k:{"meta-keyword":"if else elif endif define undef warning error line pragma ifdef ifndef include"},c:[{b:/\\\n/,r:0},n.inherit(i,{cN:"meta-string"}),{cN:"meta-string",b:"<",e:">",i:"\\n"},n.CLCM,n.CBCM]},o=n.IR+"\\s*\\(",t={keyword:"int float while private char catch import module export virtual operator sizeof dynamic_cast|10 typedef const_cast|10 const struct for static_cast|10 union namespace unsigned long volatile static protected bool template mutable if public friend do goto auto void enum else break extern using class asm case typeid short reinterpret_cast|10 default double register explicit signed typename try this switch continue inline delete alignof constexpr decltype noexcept static_assert thread_local restrict _Bool complex _Complex _Imaginary atomic_bool atomic_char atomic_schar atomic_uchar atomic_short atomic_ushort atomic_int atomic_uint atomic_long atomic_ulong atomic_llong atomic_ullong new throw return",built_in:"std string cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap array shared_ptr abort abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr",literal:"true false nullptr NULL"},f=[r,n.CLCM,n.CBCM,e,i];return{aliases:["c","cc","h","c++","h++","hpp"],k:t,i:"<\/",c:f.concat([u,{b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:t,c:["self",r]},{b:n.IR+"::",k:t},{v:[{b:/=/,e:/;/},{b:/\(/,e:/\)/},{bK:"new throw return else",e:/;/}],k:t,c:f.concat([{b:/\(/,e:/\)/,k:t,c:f.concat(["self"]),r:0}]),r:0},{cN:"function",b:"("+n.IR+"[\\*&\\s]+)+"+o,rB:!0,e:/[{;=]/,eE:!0,k:t,i:/[^\w\s\*&]/,c:[{b:o,rB:!0,c:[n.TM],r:0},{cN:"params",b:/\(/,e:/\)/,k:t,r:0,c:[n.CLCM,n.CBCM,i,e,r]},n.CLCM,n.CBCM,u]}]),exports:{preprocessor:u,strings:i,k:t}}});hljs.registerLanguage("python",function(n){var t={cN:"meta",b:/^(>>>|\.\.\.) /},i={cN:"string",c:[n.BE],v:[{b:/(u|b)?r?'''/,e:/'''/,c:[t],r:10},{b:/(u|b)?r?"""/,e:/"""/,c:[t],r:10},{b:/(u|r|ur)'/,e:/'/,r:10},{b:/(u|r|ur)"/,e:/"/,r:10},{b:/(b|br)'/,e:/'/},{b:/(b|br)"/,e:/"/},n.ASM,n.QSM]},r={cN:"number",r:0,v:[{b:n.BNR+"[lLjJ]?"},{b:"\\b(0o[0-7]+)[lLjJ]?"},{b:n.CNR+"[lLjJ]?"}]},u={cN:"params",b:/\(/,e:/\)/,c:["self",t,r,i]};return{aliases:["py","gyp"],k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10 None True False",built_in:"Ellipsis NotImplemented"},i:/(<\/|->|\?)|=>/,c:[t,r,i,n.HCM,{v:[{cN:"function",bK:"def"},{cN:"class",bK:"class"}],e:/:/,i:/[${=;\n,]/,c:[n.UTM,u,{b:/->/,eW:!0,k:"None"}]},{cN:"meta",b:/^[\t ]*@/,e:/$/},{b:/\b(print|exec)\(/}]}});hljs.registerLanguage("makefile",function(n){var t={cN:"variable",b:/\$\(/,e:/\)/,c:[n.BE]};return{aliases:["mk","mak"],c:[n.HCM,{b:/^\w+\s*\W*=/,rB:!0,r:0,starts:{e:/\s*\W*=/,eE:!0,starts:{e:/$/,r:0,c:[t]}}},{cN:"section",b:/^[\w]+:\s*$/},{cN:"meta",b:/^\.PHONY:/,e:/$/,k:{"meta-keyword":".PHONY"},l:/[\.\w]+/},{b:/^\t+/,e:/$/,r:0,c:[n.QSM,t]}]}});hljs.registerLanguage("xml",function(n){var t={eW:!0,i:/</,r:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},n.C("<!--","-->",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[t],starts:{e:"<\/style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[t],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"<\/?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},t]}]}});hljs.registerLanguage("http",function(){var n="HTTP/[0-9\\.]+";return{aliases:["https"],i:"\\S",c:[{b:"^"+n,e:"$",c:[{cN:"number",b:"\\b\\d{3}\\b"}]},{b:"^[A-Z]+ (.*?) "+n+"$",rB:!0,e:"$",c:[{cN:"string",b:" ",e:" ",eB:!0,eE:!0},{b:n},{cN:"keyword",b:"[A-Z]+"}]},{cN:"attribute",b:"^\\w",e:": ",eE:!0,i:"\\n|\\s|=",starts:{e:"$",r:0}},{b:"\\n\\n",starts:{sL:[],eW:!0}}]}});hljs.registerLanguage("java",function(n){var t="[À-ʸa-zA-Z_$][À-ʸa-zA-Z_$0-9]*",r=t+"(<"+t+"(\\s*,\\s*"+t+")*>)?",i="false synchronized int abstract float private char boolean static null if const for true while long strictfp finally protected import native final void enum else break transient catch instanceof byte super volatile case assert short package default double public try this switch continue throws protected public private module requires exports do";return{aliases:["jsp"],k:i,i:/<\/|#/,c:[n.C("/\\*\\*","\\*/",{r:0,c:[{b:/\w+@/,r:0},{cN:"doctag",b:"@[A-Za-z]+"}]}),n.CLCM,n.CBCM,n.ASM,n.QSM,{cN:"class",bK:"class interface",e:/[{;=]/,eE:!0,k:"class interface",i:/[:"\[\]]/,c:[{bK:"extends implements"},n.UTM]},{bK:"new throw return else",r:0},{cN:"function",b:"("+r+"\\s+)+"+n.UIR+"\\s*\\(",rB:!0,e:/[{;=]/,eE:!0,k:i,c:[{b:n.UIR+"\\s*\\(",rB:!0,r:0,c:[n.UTM]},{cN:"params",b:/\(/,e:/\)/,k:i,r:0,c:[n.ASM,n.QSM,n.CNM,n.CBCM]},n.CLCM,n.CBCM]},{cN:"number",b:"\\b(0[bB]([01]+[01_]+[01]+|[01]+)|0[xX]([a-fA-F0-9]+[a-fA-F0-9_]+[a-fA-F0-9]+|[a-fA-F0-9]+)|(([\\d]+[\\d_]+[\\d]+|[\\d]+)(\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))?|\\.([\\d]+[\\d_]+[\\d]+|[\\d]+))([eE][-+]?\\d+)?)[lLfF]?",r:0},{cN:"meta",b:"@[A-Za-z]+"}]}});hljs.registerLanguage("markdown",function(){return{aliases:["md","mkdown","mkd"],c:[{cN:"section",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"quote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"^```w*s*$",e:"^```s*$"},{b:"`.+?`"},{b:"^( {4}|\t)",e:"$",r:0}]},{b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"string",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"symbol",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:/^\[[^\n]+\]:/,rB:!0,c:[{cN:"symbol",b:/\[/,e:/\]/,eB:!0,eE:!0},{cN:"link",b:/:\s*/,e:/$/,eB:!0}]}]}});hljs.registerLanguage("apache",function(n){var t={cN:"number",b:"[\\$%]\\d+"};return{aliases:["apacheconf"],cI:!0,c:[n.HCM,{cN:"section",b:"<\/?",e:">"},{cN:"attribute",b:/\w+/,r:0,k:{nomarkup:"order deny allow setenv rewriterule rewriteengine rewritecond documentroot sethandler errordocument loadmodule options header listen serverroot servername"},starts:{e:/$/,r:0,k:{literal:"on off all"},c:[{cN:"meta",b:"\\s\\[",e:"\\]$"},{cN:"variable",b:"[\\$%]\\{",e:"\\}",c:["self",t]},t,n.QSM]}}],i:/\S/}});hljs.registerLanguage("css",function(n){var t={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[n.ASM,n.QSM]}]},n.CSSNM,n.QSM,n.ASM,n.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[n.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[n.ASM,n.QSM,n.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[n.CBCM,t]}]}});hljs.registerLanguage("ruby",function(n){var f="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r={keyword:"and then defined module in return redo if BEGIN retry end for self when next until do begin unless END rescue else break undef not super class case require yield alias while ensure elsif or include attr_reader attr_writer attr_accessor",literal:"true false nil"},e={cN:"doctag",b:"@[A-Za-z]+"},o={b:"#<",e:">"},t=[n.C("#","$",{c:[e]}),n.C("^\\=begin","^\\=end",{c:[e],r:10}),n.C("^__END__","\\n$")],u={cN:"subst",b:"#\\{",e:"}",k:r},s={cN:"string",c:[n.BE,u],v:[{b:/'/,e:/'/},{b:/"/,e:/"/},{b:/`/,e:/`/},{b:"%[qQwWx]?\\(",e:"\\)"},{b:"%[qQwWx]?\\[",e:"\\]"},{b:"%[qQwWx]?{",e:"}"},{b:"%[qQwWx]?<",e:">"},{b:"%[qQwWx]?/",e:"/"},{b:"%[qQwWx]?%",e:"%"},{b:"%[qQwWx]?-",e:"-"},{b:"%[qQwWx]?\\|",e:"\\|"},{b:/\B\?(\\\d{1,3}|\\x[A-Fa-f0-9]{1,2}|\\u[A-Fa-f0-9]{4}|\\?\S)\b/},{b:/<<(-?)\w+$/,e:/^\s*\w+$/}]},h={cN:"params",b:"\\(",e:"\\)",endsParent:!0,k:r},i=[s,o,{cN:"class",bK:"class module",e:"$|;",i:/=/,c:[n.inherit(n.TM,{b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?"}),{b:"<\\s*",c:[{b:"("+n.IR+"::)?"+n.IR}]}].concat(t)},{cN:"function",bK:"def",e:"$|;",c:[n.inherit(n.TM,{b:f}),h].concat(t)},{b:n.IR+"::"},{cN:"symbol",b:n.UIR+"(\\!|\\?)?:",r:0},{cN:"symbol",b:":(?!\\s)",c:[s,{b:f}],r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{cN:"params",b:/\|/,e:/\|/,k:r},{b:"("+n.RSR+"|unless)\\s*",c:[o,{cN:"regexp",c:[n.BE,u],i:/\n/,v:[{b:"/",e:"/[a-z]*"},{b:"%r{",e:"}[a-z]*"},{b:"%r\\(",e:"\\)[a-z]*"},{b:"%r!",e:"![a-z]*"},{b:"%r\\[",e:"\\][a-z]*"}]}].concat(t),r:0}].concat(t);u.c=i;h.c=i;var c=[{b:/^\s*=>/,starts:{e:"$",c:i}},{cN:"meta",b:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+>|(\\w+-)?\\d+\\.\\d+\\.\\d(p\\d+)?[^>]+>)",starts:{e:"$",c:i}}];return{aliases:["rb","gemspec","podspec","thor","irb"],k:r,i:/\/\*/,c:t.concat(c).concat(i)}});hljs.registerLanguage("perl",function(n){var i="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",r={cN:"subst",b:"[$@]\\{",e:"\\}",k:i},u={b:"->{",e:"}"},f={v:[{b:/\$\d/},{b:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{b:/[\$%@][^\s\w{]/,r:0}]},e=[n.BE,r,f],t=[f,n.HCM,n.C("^\\=\\w","\\=cut",{eW:!0}),u,{cN:"string",c:e,v:[{b:"q[qwxr]?\\s*\\(",e:"\\)",r:5},{b:"q[qwxr]?\\s*\\[",e:"\\]",r:5},{b:"q[qwxr]?\\s*\\{",e:"\\}",r:5},{b:"q[qwxr]?\\s*\\|",e:"\\|",r:5},{b:"q[qwxr]?\\s*\\<",e:"\\>",r:5},{b:"qw\\s+q",e:"q",r:5},{b:"'",e:"'",c:[n.BE]},{b:'"',e:'"'},{b:"`",e:"`",c:[n.BE]},{b:"{\\w+}",c:[],r:0},{b:"-?\\w+\\s*\\=\\>",c:[],r:0}]},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{b:"(\\/\\/|"+n.RSR+"|\\b(split|return|print|reverse|grep)\\b)\\s*",k:"split return print reverse grep",r:0,c:[n.HCM,{cN:"regexp",b:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",r:10},{cN:"regexp",b:"(m|qr)?/",e:"/[a-z]*",c:[n.BE],r:0}]},{cN:"function",bK:"sub",e:"(\\s*\\(.*?\\))?[;{]",eE:!0,r:5,c:[n.TM]},{b:"-\\w\\b",r:0},{b:"^__DATA__$",e:"^__END__$",sL:"mojolicious",c:[{b:"^@@.*",e:"$",cN:"comment"}]}];return r.c=t,u.c=t,{aliases:["pl","pm"],l:/[\w\.]+/,k:i,c:t}});hljs.registerLanguage("bash",function(n){var t={cN:"variable",v:[{b:/\$[\w\d#@][\w\d_]*/},{b:/\$\{(.*?)}/}]},i={cN:"string",b:/"/,e:/"/,c:[n.BE,t,{cN:"variable",b:/\$\(/,e:/\)/,c:[n.BE]}]};return{aliases:["sh","zsh"],l:/-?[a-z\._]+/,k:{keyword:"if then else elif fi for while in do done case esac function",literal:"true false",built_in:"break cd continue eval exec exit export getopts hash pwd readonly return shift test times trap umask unset alias bind builtin caller command declare echo enable help let local logout mapfile printf read readarray source type typeset ulimit unalias set shopt autoload bg bindkey bye cap chdir clone comparguments compcall compctl compdescribe compfiles compgroups compquote comptags comptry compvalues dirs disable disown echotc echoti emulate fc fg float functions getcap getln history integer jobs kill limit log noglob popd print pushd pushln rehash sched setcap setopt stat suspend ttyctl unfunction unhash unlimit unsetopt vared wait whence where which zcompile zformat zftp zle zmodload zparseopts zprof zpty zregexparse zsocket zstyle ztcp",_:"-ne -eq -lt -gt -f -d -e -s -l -a"},c:[{cN:"meta",b:/^#![^\n]+sh\s*$/,r:10},{cN:"function",b:/\w[\w\d_]*\s*\(\s*\)\s*\{/,rB:!0,c:[n.inherit(n.TM,{b:/\w[\w\d_]*/})],r:0},n.HCM,i,{cN:"string",b:/'/,e:/'/},t]}});!function(n){n(["jquery"],function(n){return function(){function v(n,t,r){return u({type:f.error,iconClass:i().iconClasses.error,message:n,optionsOverride:r,title:t})}function r(r,u){return r||(r=i()),t=n("#"+r.containerId),t.length?t:(u&&(t=nt(r)),t)}function y(n,t,r){return u({type:f.info,iconClass:i().iconClasses.info,message:n,optionsOverride:r,title:t})}function p(n){o=n}function w(n,t,r){return u({type:f.success,iconClass:i().iconClasses.success,message:n,optionsOverride:r,title:t})}function b(n,t,r){return u({type:f.warning,iconClass:i().iconClasses.warning,message:n,optionsOverride:r,title:t})}function k(n,u){var f=i();t||r(f);h(n,f,u)||g(f)}function d(u){var f=i();return t||r(f),u&&0===n(":focus",u).length?void e(u):void(t.children().length&&t.remove())}function g(i){for(var u=t.children(),r=u.length-1;r>=0;r--)h(n(u[r]),i)}function h(t,i,r){var u=!(!r||!r.force)&&r.force;return!(!t||!u&&0!==n(":focus",t).length)&&(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){e(t)}}),!0)}function nt(i){return t=n("<div/>").attr("id",i.containerId).addClass(i.positionClass),t.appendTo(n(i.target)),t}function tt(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;<\/button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function c(n){o&&o(n)}function u(u){function k(n){return null==n&&(n=""),n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nt(){ut();et();ot();st();ht();ct();ft();tt()}function tt(){var n="";switch(u.iconClass){case"toast-success":case"toast-info":n="polite";break;default:n="assertive"}o.attr("aria-live",n)}function it(){f.closeOnHover&&o.hover(vt,at);!f.onclick&&f.tapToDismiss&&o.click(v);f.closeButton&&p&&p.click(function(n){n.stopPropagation?n.stopPropagation():void 0!==n.cancelBubble&&n.cancelBubble!==!0&&(n.cancelBubble=!0);f.onCloseClick&&f.onCloseClick(n);v(!0)});f.onclick&&o.click(function(n){f.onclick(n);v()})}function rt(){o.hide();o[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown});f.timeOut>0&&(y=setTimeout(v,f.timeOut),h.maxHideTime=parseFloat(f.timeOut),h.hideEta=(new Date).getTime()+h.maxHideTime,f.progressBar&&(h.intervalId=setInterval(yt,10)))}function ut(){u.iconClass&&o.addClass(f.toastClass).addClass(w)}function ft(){f.newestOnTop?t.prepend(o):t.append(o)}function et(){if(u.title){var n=u.title;f.escapeHtml&&(n=k(u.title));d.append(n).addClass(f.titleClass);o.append(d)}}function ot(){if(u.message){var n=u.message;f.escapeHtml&&(n=k(u.message));g.append(n).addClass(f.messageClass);o.append(g)}}function st(){f.closeButton&&(p.addClass(f.closeClass).attr("role","button"),o.prepend(p))}function ht(){f.progressBar&&(b.addClass(f.progressClass),o.prepend(b))}function ct(){f.rtl&&o.addClass("rtl")}function lt(n,t){if(n.preventDuplicates){if(t.message===s)return!0;s=t.message}return!1}function v(t){var i=t&&f.closeMethod!==!1?f.closeMethod:f.hideMethod,r=t&&f.closeDuration!==!1?f.closeDuration:f.hideDuration,u=t&&f.closeEasing!==!1?f.closeEasing:f.hideEasing;if(!n(":focus",o).length||t)return clearTimeout(h.intervalId),o[i]({duration:r,easing:u,complete:function(){e(o);clearTimeout(y);f.onHidden&&"hidden"!==a.state&&f.onHidden();a.state="hidden";a.endTime=new Date;c(a)}})}function at(){(f.timeOut>0||f.extendedTimeOut>0)&&(y=setTimeout(v,f.extendedTimeOut),h.maxHideTime=parseFloat(f.extendedTimeOut),h.hideEta=(new Date).getTime()+h.maxHideTime)}function vt(){clearTimeout(y);h.hideEta=0;o.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}function yt(){var n=(h.hideEta-(new Date).getTime())/h.maxHideTime*100;b.width(n+"%")}var f=i(),w=u.iconClass||f.iconClass;if("undefined"!=typeof u.optionsOverride&&(f=n.extend(f,u.optionsOverride),w=u.optionsOverride.iconClass||w),!lt(f,u)){l++;t=r(f,!0);var y=null,o=n("<div/>"),d=n("<div/>"),g=n("<div/>"),b=n("<div/>"),p=n(f.closeHtml),h={intervalId:null,hideEta:null,maxHideTime:null},a={toastId:l,state:"visible",startTime:new Date,options:f,map:u};return nt(),rt(),it(),c(a),f.debug&&console&&console.log(a),o}}function i(){return n.extend({},tt(),a.options)}function e(n){t||(t=r());n.is(":visible")||(n.remove(),n=null,0===t.children().length&&(t.remove(),s=void 0))}var t,o,s,l=0,f={error:"error",info:"info",success:"success",warning:"warning"},a={clear:k,remove:d,error:v,getContainer:r,info:y,options:{},subscribe:p,success:w,version:"2.1.3",warning:b};return a}()})}("function"==typeof define&&define.amd?define:function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)}),function(n,t,i){function v(t,i){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--)f=t[u],n.type(f)==="string"&&r.transports[f]||(i.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));t.length===0&&(i.log("No transports remain within the specified transport array."),t=null)}else if(r.transports[t]||t==="auto"){if(t==="auto"&&r._.ieVersion<=8)return["longPolling"]}else i.log("Invalid transport: "+t.toString()+"."),t=null;return t}function y(n){return n==="http:"?80:n==="https:"?443:void 0}function h(n,t){return t.match(/:\d+$/)?t:t+":"+y(n)}function p(t,i){var u=this,r=[];u.tryBuffer=function(i){return t.state===n.signalR.connectionState.connecting?(r.push(i),!0):!1};u.drain=function(){if(t.state===n.signalR.connectionState.connected)while(r.length>0)i(r.shift())};u.clear=function(){r=[]}}var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof n!="function")throw new Error(f.nojQuery);var r,c,o=t.document.readyState==="complete",e=n(t),l="__Negotiate Aborted__",u={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},w=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r))}},s=function(t,i,r){return i===t.state?(t.state=r,n(t).triggerHandler(u.onStateChanged,[{oldState:i,newState:r}]),!0):!1},b=function(n){return n.state===r.connectionState.disconnected},a=function(n){return n._.keepAliveData.activated&&n.transport.supportsKeepAlive(n)},k=function(i){var f,e;i._.configuredStopReconnectingTimeout||(e=function(t){var i=r._.format(r.resources.reconnectTimeout,t.disconnectTimeout);t.log(i);n(t).triggerHandler(u.onError,[r._.error(i,"TimeoutException")]);t.stop(!1,!1)},i.reconnecting(function(){var n=this;n.state===r.connectionState.reconnecting&&(f=t.setTimeout(function(){e(n)},n.disconnectTimeout))}),i.stateChanged(function(n){n.oldState===r.connectionState.reconnecting&&t.clearTimeout(f)}),i._.configuredStopReconnectingTimeout=!0)};if(r=function(n,t,i){return new r.fn.init(n,t,i)},r._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i}(),error:function(n,t,i){var r=new Error(n);return r.source=t,typeof i!="undefined"&&(r.context=i),r},transportError:function(n,t,r,u){var f=this.error(n,r,u);return f.transport=t?t.name:i,f},format:function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace("{"+n+"}",arguments[n+1]);return t},firefoxMajorVersion:function(n){var t=n.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(i){var f=i._.config,e=function(t){n(i).triggerHandler(u.onError,[t])};f&&!i._.pingIntervalId&&f.pingInterval&&(i._.pingIntervalId=t.setInterval(function(){r.transports._logic.pingServer(i).fail(e)},f.pingInterval))}},r.events=u,r.resources=f,r.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1},r.changeState=s,r.isDisconnecting=b,r.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},r.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.");}},typeof e.on=="function")e.on("load",function(){o=!0});else e.load(function(){o=!0});r.fn=r.prototype={init:function(t,i,r){var f=n(this);this.url=t;this.qs=i;this.lastError=null;this._={keepAliveData:{},connectingMessageBuffer:new p(this,function(n){f.triggerHandler(u.onReceived,[n])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0};typeof r=="boolean"&&(this.logging=r)},_parseResponse:function(n){var t=this;return n?typeof n=="string"?t.json.parse(n):n:n},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(i,r){var u;return(i=n.trim(i),r=r||t.location,i.indexOf("http")!==0)?!1:(u=t.document.createElement("a"),u.href=i,u.protocol+h(u.protocol,u.host)!==r.protocol+h(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:r.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(i,h){var c=this,y={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},d,p=c._deferral||n.Deferred(),w=t.document.createElement("a"),b,g;if(c.lastError=null,c._deferral=p,!c.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if(n.type(i)==="function"?h=i:n.type(i)==="object"&&(n.extend(y,i),n.type(y.callback)==="function"&&(h=y.callback)),y.transport=v(y.transport,c),!y.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return(c._.config=y,!o&&y.waitForPageLoad===!0)?(c._.deferredStartHandler=function(){c.start(i,h)},e.bind("load",c._.deferredStartHandler),p.promise()):c.state===r.connectionState.connecting?p.promise():s(c,r.connectionState.disconnected,r.connectionState.connecting)===!1?(p.resolve(c),p.promise()):(k(c),w.href=c.url,w.protocol&&w.protocol!==":"?(c.protocol=w.protocol,c.host=w.host):(c.protocol=t.document.location.protocol,c.host=w.host||t.document.location.host),c.baseUrl=c.protocol+"//"+c.host,c.wsProtocol=c.protocol==="https:"?"wss://":"ws://",y.transport==="auto"&&y.jsonp===!0&&(y.transport="longPolling"),c.url.indexOf("//")===0&&(c.url=t.location.protocol+c.url,c.log("Protocol relative URL detected, normalizing it to '"+c.url+"'.")),this.isCrossDomain(c.url)&&(c.log("Auto detected cross domain url."),y.transport==="auto"&&(y.transport=["webSockets","serverSentEvents","longPolling"]),typeof y.withCredentials=="undefined"&&(y.withCredentials=!0),y.jsonp||(y.jsonp=!n.support.cors,y.jsonp&&c.log("Using jsonp because this browser doesn't support CORS.")),c.contentType=r._.defaultContentType),c.withCredentials=y.withCredentials,c.ajaxDataType=y.jsonp?"jsonp":"text",n(c).bind(u.onStart,function(){n.type(h)==="function"&&h.call(c);p.resolve(c)}),c._.initHandler=r.transports._logic.initHandler(c),d=function(i,o){var l=r._.error(f.noTransportOnInit);if(o=o||0,o>=i.length){o===0?c.log("No transports supported by the server were selected."):o===1?c.log("No fallback transports were selected."):c.log("Fallback transports exhausted.");n(c).triggerHandler(u.onError,[l]);p.reject(l);c.stop();return}if(c.state!==r.connectionState.disconnected){var y=i[o],h=r.transports[y],v=function(){d(i,o+1)};c.transport=h;try{c._.initHandler.start(h,function(){var i=r._.firefoxMajorVersion(t.navigator.userAgent)>=11,f=!!c.withCredentials&&i;c.log("The start request succeeded. Transitioning to the connected state.");a(c)&&r.transports._logic.monitorKeepAlive(c);r.transports._logic.startHeartbeat(c);r._.configurePingInterval(c);s(c,r.connectionState.connecting,r.connectionState.connected)||c.log("WARNING! The connection was not in the connecting state.");c._.connectingMessageBuffer.drain();n(c).triggerHandler(u.onStart);e.bind("unload",function(){c.log("Window unloading, stopping the connection.");c.stop(f)});i&&e.bind("beforeunload",function(){t.setTimeout(function(){c.stop(f)},0)})},v)}catch(w){c.log(h.name+" transport threw '"+w.message+"' when attempting to start.");v()}}},b=c.url+"/negotiate",g=function(t,i){var e=r._.error(f.errorOnNegotiate,t,i._.negotiateRequest);n(i).triggerHandler(u.onError,e);p.reject(e);i.stop()},n(c).triggerHandler(u.onStarting),b=r.transports._logic.prepareQueryString(c,b),c.log("Negotiating with '"+b+"'."),c._.negotiateRequest=r.transports._logic.ajax(c,{url:b,error:function(n,t){t!==l?g(n,c):p.reject(r._.error(f.stoppedWhileNegotiating,null,c._.negotiateRequest))},success:function(t){var i,e,h,o=[],s=[];try{i=c._parseResponse(t)}catch(l){g(r._.error(f.errorParsingNegotiateResponse,l),c);return}if(e=c._.keepAliveData,c.appRelativeUrl=i.Url,c.id=i.ConnectionId,c.token=i.ConnectionToken,c.webSocketServerUrl=i.WebSocketServerUrl,c._.pollTimeout=i.ConnectionTimeout*1e3+1e4,c.disconnectTimeout=i.DisconnectTimeout*1e3,c._.totalTransportConnectTimeout=c.transportConnectTimeout+i.TransportConnectTimeout*1e3,i.KeepAliveTimeout?(e.activated=!0,e.timeout=i.KeepAliveTimeout*1e3,e.timeoutWarning=e.timeout*c.keepAliveWarnAt,c._.beatInterval=(e.timeout-e.timeoutWarning)/3):e.activated=!1,c.reconnectWindow=c.disconnectTimeout+(e.timeout||0),!i.ProtocolVersion||i.ProtocolVersion!==c.clientProtocol){h=r._.error(r._.format(f.protocolIncompatible,c.clientProtocol,i.ProtocolVersion));n(c).triggerHandler(u.onError,[h]);p.reject(h);return}n.each(r.transports,function(n){if(n.indexOf("_")===0||n==="webSockets"&&!i.TryWebSockets)return!0;s.push(n)});n.isArray(y.transport)?n.each(y.transport,function(t,i){n.inArray(i,s)>=0&&o.push(i)}):y.transport==="auto"?o=s:n.inArray(y.transport,s)>=0&&o.push(y.transport);d(o)}}),p.promise())},starting:function(t){var i=this;return n(i).bind(u.onStarting,function(){t.call(i)}),i},send:function(n){var t=this;if(t.state===r.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===r.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,n),t},received:function(t){var i=this;return n(i).bind(u.onReceived,function(n,r){t.call(i,r)}),i},stateChanged:function(t){var i=this;return n(i).bind(u.onStateChanged,function(n,r){t.call(i,r)}),i},error:function(t){var i=this;return n(i).bind(u.onError,function(n,r,u){i.lastError=r;t.call(i,r,u)}),i},disconnected:function(t){var i=this;return n(i).bind(u.onDisconnect,function(){t.call(i)}),i},connectionSlow:function(t){var i=this;return n(i).bind(u.onConnectionSlow,function(){t.call(i)}),i},reconnecting:function(t){var i=this;return n(i).bind(u.onReconnecting,function(){t.call(i)}),i},reconnected:function(t){var i=this;return n(i).bind(u.onReconnect,function(){t.call(i)}),i},stop:function(i,h){var c=this,v=c._deferral;if(c._.deferredStartHandler&&e.unbind("load",c._.deferredStartHandler),delete c._.config,delete c._.deferredStartHandler,!o&&(!c._.config||c._.config.waitForPageLoad===!0)){c.log("Stopping connection prior to negotiate.");v&&v.reject(r._.error(f.stoppedWhileLoading));return}if(c.state!==r.connectionState.disconnected)return c.log("Stopping connection."),t.clearTimeout(c._.beatHandle),t.clearInterval(c._.pingIntervalId),c.transport&&(c.transport.stop(c),h!==!1&&c.transport.abort(c,i),a(c)&&r.transports._logic.stopMonitoringKeepAlive(c),c.transport=null),c._.negotiateRequest&&(c._.negotiateRequest.abort(l),delete c._.negotiateRequest),c._.initHandler&&c._.initHandler.stop(),delete c._deferral,delete c.messageId,delete c.groupsToken,delete c.id,delete c._.pingIntervalId,delete c._.lastMessageAt,delete c._.lastActiveAt,c._.connectingMessageBuffer.clear(),s(c,c.state,r.connectionState.disconnected),n(c).triggerHandler(u.onDisconnect),c},log:function(n){w(n,this.logging)}};r.fn.init.prototype=r.fn;r.noConflict=function(){return n.connection===r&&(n.connection=c),r};n.connection&&(c=n.connection);n.connection=n.signalR=r}(window.jQuery,window),function(n,t,i){function o(n){n._.keepAliveData.monitoring&&c(n);u.markActive(n)&&(n._.beatHandle=t.setTimeout(function(){o(n)},n._.beatInterval))}function c(t){var i=t._.keepAliveData,u;t.state===r.connectionState.connected&&(u=(new Date).getTime()-t._.lastMessageAt,u>=i.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):u>=i.timeoutWarning?i.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),n(t).triggerHandler(f.onConnectionSlow),i.userNotified=!0):i.userNotified=!1)}function e(n,t){var i=n.url+t;return n.transport&&(i+="?transport="+n.transport.name),u.prepareQueryString(n,i)}function s(n){this.connection=n;this.startRequested=!1;this.startCompleted=!1;this.connectionStopped=!1}var r=n.signalR,f=n.signalR.events,l=n.signalR.changeState,h="__Start Aborted__",u;r.transports={};s.prototype={start:function(n,r,u){var f=this,e=f.connection,o=!1;if(f.startRequested||f.connectionStopped){e.log("WARNING! "+n.name+" transport cannot be started. Initialization ongoing or completed.");return}e.log(n.name+" transport starting.");n.start(e,function(){o||f.initReceived(n,r)},function(t){return o||(o=!0,f.transportFailed(n,t,u)),!f.startCompleted||f.connectionStopped});f.transportTimeoutHandle=t.setTimeout(function(){o||(o=!0,e.log(n.name+" transport timed out when trying to connect."),f.transportFailed(n,i,u))},e._.totalTransportConnectTimeout)},stop:function(){this.connectionStopped=!0;t.clearTimeout(this.transportTimeoutHandle);r.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(n,i){var u=this,f=u.connection;if(u.startRequested){f.log("WARNING! The client received multiple init messages.");return}u.connectionStopped||(u.startRequested=!0,t.clearTimeout(u.transportTimeoutHandle),f.log(n.name+" transport connected. Initiating start request."),r.transports._logic.ajaxStart(f,function(){u.startCompleted=!0;i()}))},transportFailed:function(i,u,e){var o=this.connection,h=o._deferral,s;this.connectionStopped||(t.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(s=r._.error(r.resources.errorDuringStartRequest,u),o.log(i.name+" transport failed during the start request. Stopping the connection."),n(o).triggerHandler(f.onError,[s]),h&&h.reject(s),o.stop()):(i.stop(o),o.log(i.name+" transport failed to connect. Attempting to fall back."),e()))}};u=r.transports._logic={ajax:function(t,i){return n.ajax(n.extend(!0,{},n.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},i))},pingServer:function(t){var e,f,i=n.Deferred();return t.transport?(e=t.url+"/ping",e=u.addQs(e,t.qs),f=u.ajax(t,{url:e,success:function(n){var u;try{u=t._parseResponse(n)}catch(e){i.reject(r._.transportError(r.resources.pingServerFailedParse,t.transport,e,f));t.stop();return}u.Response==="pong"?i.resolve():i.reject(r._.transportError(r._.format(r.resources.pingServerFailedInvalidResponse,n),t.transport,null,f))},error:function(n){n.status===401||n.status===403?(i.reject(r._.transportError(r._.format(r.resources.pingServerFailedStatusCode,n.status),t.transport,n,f)),t.stop()):i.reject(r._.transportError(r.resources.pingServerFailed,t.transport,n,f))}})):i.reject(r._.transportError(r.resources.noConnectionTransport,t.transport)),i.promise()},prepareQueryString:function(n,i){var r;return r=u.addQs(i,"clientProtocol="+n.clientProtocol),r=u.addQs(r,n.qs),n.token&&(r+="&connectionToken="+t.encodeURIComponent(n.token)),n.data&&(r+="&connectionData="+t.encodeURIComponent(n.data)),r},addQs:function(t,i){var r=t.indexOf("?")!==-1?"&":"?",u;if(!i)return t;if(typeof i=="object")return t+r+n.param(i);if(typeof i=="string")return u=i.charAt(0),(u==="?"||u==="&")&&(r=""),t+r+i;throw new Error("Query string property must be either a string or object.");},getUrl:function(n,i,r,f,e){var h=i==="webSockets"?"":n.baseUrl,o=h+n.appRelativeUrl,s="transport="+i;return!e&&n.groupsToken&&(s+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),r?(o+=f?"/poll":"/reconnect",!e&&n.messageId&&(s+="&messageId="+t.encodeURIComponent(n.messageId))):o+="/connect",o+="?"+s,o=u.prepareQueryString(n,o),e||(o+="&tid="+Math.floor(Math.random()*11)),o},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Initialized:typeof n.S!="undefined"?!0:!1,ShouldReconnect:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G}},updateGroups:function(n,t){t&&(n.groupsToken=t)},stringifySend:function(n,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:n.json.stringify(t)},ajaxSend:function(t,i){var h=u.stringifySend(t,i),c=e(t,"/send"),o,s=function(t,u){n(u).triggerHandler(f.onError,[r._.transportError(r.resources.sendFailed,u.transport,t,o),i])};return o=u.ajax(t,{url:c,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:r._.defaultContentType,data:{data:h},success:function(n){var i;if(n){try{i=t._parseResponse(n)}catch(r){s(r,t);t.stop();return}u.triggerReceived(t,i)}},error:function(n,i){i!=="abort"&&i!=="parsererror"&&s(n,t)}})},ajaxAbort:function(n,t){if(typeof n.transport!="undefined"){t=typeof t=="undefined"?!0:t;var i=e(n,"/abort");u.ajax(n,{url:i,async:t,timeout:1e3,type:"POST"});n.log("Fired ajax abort async = "+t+".")}},ajaxStart:function(t,i){var s=function(n){var i=t._deferral;i&&i.reject(n)},o=function(i){t.log("The start request failed. Stopping the connection.");n(t).triggerHandler(f.onError,[i]);s(i);t.stop()};t._.startRequest=u.ajax(t,{url:e(t,"/start"),success:function(n,u,f){var e;try{e=t._parseResponse(n)}catch(s){o(r._.error(r._.format(r.resources.errorParsingStartResponse,n),s,f));return}e.Response==="started"?i():o(r._.error(r._.format(r.resources.invalidStartResponse,n),null,f))},error:function(n,i,u){i!==h?o(r._.error(r.resources.errorDuringStartRequest,u,n)):(t.log("The start request aborted because connection.stop() was called."),s(r._.error(r.resources.stoppedDuringStartRequest,null,n)))}})},tryAbortStartRequest:function(n){n._.startRequest&&(n._.startRequest.abort(h),delete n._.startRequest)},tryInitialize:function(n,t,i){t.Initialized&&i?i():t.Initialized&&n.log("WARNING! The client received an init message after reconnecting.")},triggerReceived:function(t,i){t._.connectingMessageBuffer.tryBuffer(i)||n(t).triggerHandler(f.onReceived,[i])},processMessages:function(t,i,r){var f;u.markLastMessage(t);i&&(f=u.maximizePersistentResponse(i),u.updateGroups(t,f.GroupsToken),f.MessageId&&(t.messageId=f.MessageId),f.Messages&&(n.each(f.Messages,function(n,i){u.triggerReceived(t,i)}),u.tryInitialize(t,f,r)))},monitorKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(i.monitoring=!0,u.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){u.markLastMessage(t)},n(t).bind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+", keep alive timeout of "+i.timeout+" and disconnecting timeout of "+t.disconnectTimeout))},stopMonitoringKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(n){n._.lastActiveAt=(new Date).getTime();o(n)},markLastMessage:function(n){n._.lastMessageAt=(new Date).getTime()},markActive:function(n){return u.verifyLastActive(n)?(n._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(n){return n.state===r.connectionState.connected||n.state===r.connectionState.reconnecting},ensureReconnectingState:function(t){return l(t,r.connectionState.connected,r.connectionState.reconnecting)===!0&&n(t).triggerHandler(f.onReconnecting),t.state===r.connectionState.reconnecting},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout)},verifyLastActive:function(t){if((new Date).getTime()-t._.lastActiveAt>=t.reconnectWindow){var i=r._.format(r.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(i),n(t).triggerHandler(f.onError,[r._.error(i,"TimeoutException")]),t.stop(!1,!1),!1}return!0},reconnect:function(n,i){var f=r.transports[i];if(u.isConnectedOrReconnecting(n)&&!n._.reconnectTimeout){if(!u.verifyLastActive(n))return;n._.reconnectTimeout=t.setTimeout(function(){u.verifyLastActive(n)&&(f.stop(n),u.ensureReconnectingState(n)&&(n.log(i+" reconnecting."),f.start(n)))},n.reconnectDelay)}},handleParseFailure:function(t,i,u,e,o){var s=r._.transportError(r._.format(r.resources.parseFailed,i),t.transport,u,o);e&&e(s)?t.log("Failed to parse server response while attempting to connect."):(n(t).triggerHandler(f.onError,[s]),t.stop())},initHandler:function(n){return new s(n)},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,f){var e=i.stringifySend(t,f);try{t.socket.send(e)}catch(o){n(t).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketsInvalidState,t.transport,o,t.socket),f])}},start:function(e,o,s){var h,c=!1,l=this,a=!o,v=n(e);if(!t.WebSocket){s();return}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=i.getUrl(e,this.name,a),e.log("Connecting to websocket endpoint '"+h+"'."),e.socket=new t.WebSocket(h),e.socket.onopen=function(){c=!0;e.log("Websocket opened.");i.clearReconnectTimeout(e);f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect)},e.socket.onclose=function(t){var i;this===e.socket&&(c&&typeof t.wasClean!="undefined"&&t.wasClean===!1?(i=r._.transportError(r.resources.webSocketClosed,e.transport,t),e.log("Unclean disconnect from websocket: "+(t.reason||"[no reason given]."))):e.log("Websocket closed."),s&&s(i)||(i&&n(e).triggerHandler(u.onError,[i]),l.reconnect(e)))},e.socket.onmessage=function(t){var r;try{r=e._parseResponse(t.data)}catch(u){i.handleParseFailure(e,t.data,u,s,t);return}r&&(n.isEmptyObject(r)||r.M?i.processMessages(e,r,o):i.triggerReceived(e,r))})},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},stop:function(n){i.clearReconnectTimeout(n);n.socket&&(n.log("Closing the Websocket."),n.socket.close(),n.socket=null)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var i=n.signalR,u=n.signalR.events,e=n.signalR.changeState,r=i.transports._logic,f=function(n){t.clearTimeout(n._.reconnectAttemptTimeoutHandle);delete n._.reconnectAttemptTimeoutHandle};i.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(o,s,h){var c=this,l=!1,a=n(o),v=!s,y;if(o.eventSource&&(o.log("The connection already has an event source. Stopping it."),o.stop()),!t.EventSource){h&&(o.log("This browser doesn't support SSE."),h());return}y=r.getUrl(o,this.name,v);try{o.log("Attempting to connect to SSE endpoint '"+y+"'.");o.eventSource=new t.EventSource(y,{withCredentials:o.withCredentials})}catch(p){o.log("EventSource failed trying to connect with error "+p.Message+".");h?h():(a.triggerHandler(u.onError,[i._.transportError(i.resources.eventSourceFailedToConnect,o.transport,p)]),v&&c.reconnect(o));return}v&&(o._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){l===!1&&o.eventSource.readyState!==t.EventSource.OPEN&&c.reconnect(o)},c.timeOut));o.eventSource.addEventListener("open",function(){o.log("EventSource connected.");f(o);r.clearReconnectTimeout(o);l===!1&&(l=!0,e(o,i.connectionState.reconnecting,i.connectionState.connected)===!0&&a.triggerHandler(u.onReconnect))},!1);o.eventSource.addEventListener("message",function(n){var t;if(n.data!=="initialized"){try{t=o._parseResponse(n.data)}catch(i){r.handleParseFailure(o,n.data,i,h,n);return}r.processMessages(o,t,s)}},!1);o.eventSource.addEventListener("error",function(n){var r=i._.transportError(i.resources.eventSourceError,o.transport,n);this===o.eventSource&&(h&&h(r)||(o.log("EventSource readyState: "+o.eventSource.readyState+"."),n.eventPhase===t.EventSource.CLOSED?(o.log("EventSource reconnecting due to the server connection ending."),c.reconnect(o)):(o.log("EventSource error."),a.triggerHandler(u.onError,[r]))))},!1)},reconnect:function(n){r.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){r.ajaxSend(n,t)},stop:function(n){f(n);r.clearReconnectTimeout(n);n&&n.eventSource&&(n.log("EventSource calling close()."),n.eventSource.close(),n.eventSource=null,delete n.eventSource)},abort:function(n,t){r.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var r=n.signalR,e=n.signalR.events,o=n.signalR.changeState,i=r.transports._logic,u=function(){var n=t.document.createElement("iframe");return n.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),n},f=function(){var i=null,f=1e3,n=0;return{prevent:function(){r._.ieVersion<=8&&(n===0&&(i=t.setInterval(function(){var n=u();t.document.body.appendChild(n);t.document.body.removeChild(n);n=null},f)),n++)},cancel:function(){n===1&&t.clearInterval(i);n>0&&n--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(n,r,e){var l=this,s=i.foreverFrame.count+=1,h,o=u(),c=function(){n.log("Forever frame iframe finished loading and is no longer receiving messages.");e&&e()||l.reconnect(n)};if(t.EventSource){e&&(n.log("Forever Frame is not supported by SignalR on browsers with SSE support."),e());return}o.setAttribute("data-signalr-connection-id",n.id);f.prevent();h=i.getUrl(n,this.name);h+="&frameId="+s;t.document.documentElement.appendChild(o);n.log("Binding to iframe's load event.");o.addEventListener?o.addEventListener("load",c,!1):o.attachEvent&&o.attachEvent("onload",c);o.src=h;i.foreverFrame.connections[s]=n;n.frame=o;n.frameId=s;r&&(n.onSuccess=function(){n.log("Iframe transport started.");r()})},reconnect:function(n){var r=this;i.isConnectedOrReconnecting(n)&&i.verifyLastActive(n)&&t.setTimeout(function(){if(i.verifyLastActive(n)&&n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'.");u.src=t}},n.reconnectDelay)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},receive:function(t,u){var f,e,o;if(t.json!==t._originalJson&&(u=t._originalJson.stringify(u)),o=t._parseResponse(u),i.processMessages(t,o,t.onSuccess),t.state===n.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,f=t.frame.contentWindow||t.frame.contentDocument,f&&f.document&&f.document.body)))for(e=f.document.body;e.firstChild;)e.removeChild(e.firstChild)},stop:function(n){var r=null;if(f.cancel(),n.frame){if(n.frame.stop)n.frame.stop();else try{r=n.frame.contentWindow||n.frame.contentDocument;r.document&&r.document.execCommand&&r.document.execCommand("Stop")}catch(u){n.log("Error occurred when stopping foreverFrame transport. Message = "+u.message+".")}n.frame.parentNode===t.document.body&&t.document.body.removeChild(n.frame);delete i.foreverFrame.connections[n.frameId];n.frame=null;n.frameId=null;delete n.frame;delete n.frameId;delete n.onSuccess;delete n.frameMessageCount;n.log("Stopping forever frame.")}},abort:function(n,t){i.ajaxAbort(n,t)},getConnection:function(n){return i.foreverFrame.connections[n]},started:function(t){o(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(e.onReconnect)}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,e=n.signalR.changeState,f=n.signalR.isDisconnecting,i=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(o,s,h){var a=this,v=function(){v=n.noop;o.log("LongPolling connected.");s?s():o.log("WARNING! The client received an init message after reconnecting.")},y=function(n){return h(n)?(o.log("LongPolling failed to connect."),!0):!1},c=o._,l=0,p=function(i){t.clearTimeout(c.reconnectTimeoutId);c.reconnectTimeoutId=null;e(i,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(i.log("Raising the reconnect event"),n(i).triggerHandler(u.onReconnect))},w=36e5;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop());o.messageId=null;c.reconnectTimeoutId=null;c.pollTimeoutId=t.setTimeout(function(){(function e(s,h){var g=s.messageId,nt=g===null,k=!nt,tt=!h,d=i.getUrl(s,a.name,k,tt,!0),b={};(s.messageId&&(b.messageId=s.messageId),s.groupsToken&&(b.groupsToken=s.groupsToken),f(s)!==!0)&&(o.log("Opening long polling request to '"+d+"'."),s.pollXhr=i.ajax(o,{xhrFields:{onprogress:function(){i.markLastMessage(o)}},url:d,type:"POST",contentType:r._.defaultContentType,data:b,timeout:o._.pollTimeout,success:function(r){var h,w=0,u,a;o.log("Long poll complete.");l=0;try{h=o._parseResponse(r)}catch(b){i.handleParseFailure(s,r,b,y,s.pollXhr);return}(c.reconnectTimeoutId!==null&&p(s),h&&(u=i.maximizePersistentResponse(h)),i.processMessages(s,h,v),u&&n.type(u.LongPollDelay)==="number"&&(w=u.LongPollDelay),f(s)!==!0)&&(a=u&&u.ShouldReconnect,!a||i.ensureReconnectingState(s))&&(w>0?c.pollTimeoutId=t.setTimeout(function(){e(s,a)},w):e(s,a))},error:function(f,h){var v=r._.transportError(r.resources.longPollFailed,o.transport,f,s.pollXhr);if(t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,h==="abort"){o.log("Aborted xhr request.");return}if(!y(v)){if(l++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+h+".  Response = "+f.responseText+"."),n(s).triggerHandler(u.onError,[v])),(o.state===r.connectionState.connected||o.state===r.connectionState.reconnecting)&&!i.verifyLastActive(o))return;if(!i.ensureReconnectingState(s))return;c.pollTimeoutId=t.setTimeout(function(){e(s,!0)},a.reconnectDelay)}}}),k&&h===!0&&(c.reconnectTimeoutId=t.setTimeout(function(){p(s)},Math.min(1e3*(Math.pow(2,l)-1),w))))})(o)},250)},lostConnection:function(n){n.pollXhr&&n.pollXhr.abort("lostConnection")},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){t.clearTimeout(n._.pollTimeoutId);t.clearTimeout(n._.reconnectTimeoutId);delete n._.pollTimeoutId;delete n._.reconnectTimeoutId;n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n){function r(n){return n+s}function e(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1)n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));return u}function o(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t}function u(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function f(n,t){var i=n._.invocationCallbacks,r,f;u(i)&&n.log("Clearing hub invocation callbacks with error: "+t+".");n._.invocationCallbackId=0;delete n._.invocationCallbacks;n._.invocationCallbacks={};for(f in i)r=i[f],r.method.call(r.scope,{E:t})}function i(n,t){return new i.fn.init(n,t)}function t(i,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!i||u.useDefaultPath)&&(i=(i||"")+"/signalr"),new t.fn.init(i,u)}var s=".hubProxy",h=n.signalR;i.fn=i.prototype={init:function(n,t){this.state={};this.connection=n;this.hubName=t;this._={callbackMap:{}}},constructor:i,hasSubscriptions:function(){return u(this._.callbackMap)},on:function(t,i){var u=this,f=u._.callbackMap;return t=t.toLowerCase(),f[t]||(f[t]={}),f[t][i]=function(n,t){i.apply(u,t)},n(u).bind(r(t),f[t][i]),u},off:function(t,i){var e=this,o=e._.callbackMap,f;return t=t.toLowerCase(),f=o[t],f&&(f[i]?(n(e).unbind(r(t),f[i]),delete f[i],u(f)||delete o[t]):i||(n(e).unbind(r(t)),delete o[t])),e},invoke:function(t){var i=this,r=i.connection,s=n.makeArray(arguments).slice(1),c=e(s,o),f={H:i.hubName,M:t,A:c,I:r._.invocationCallbackId},u=n.Deferred(),l=function(f){var e=i._maximizeHubResponse(f),s,o;n.extend(i.state,e.State);e.Progress?u.notifyWith?u.notifyWith(i,[e.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+n.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):e.Error?(e.StackTrace&&r.log(e.Error+"\n"+e.StackTrace+"."),s=e.IsHubException?"HubException":"Exception",o=h._.error(e.Error,s),o.data=e.ErrorData,r.log(i.hubName+"."+t+" failed to execute. Error: "+o.message),u.rejectWith(i,[o])):(r.log("Invoked "+i.hubName+"."+t),u.resolveWith(i,[e.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:i,method:l},r._.invocationCallbackId+=1,n.isEmptyObject(i.state)||(f.S=i.state),r.log("Invoking "+i.hubName+"."+t),r.send(f),u.promise()},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Progress:n.P?{Id:n.P.I,Data:n.P.D}:null,Id:n.I,IsHubException:n.H,Error:n.E,StackTrace:n.T,ErrorData:n.D}}};i.fn.init.prototype=i.fn;t.fn=t.prototype=n.connection();t.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},u=this;n.extend(e,i);n.signalR.fn.init.call(u,t,e.qs,e.logging);u.proxies={};u._.invocationCallbackId=0;u._.invocationCallbacks={};u.received(function(t){var f,o,e,i,s,h;t&&(typeof t.P!="undefined"?(e=t.P.I.toString(),i=u._.invocationCallbacks[e],i&&i.method.call(i.scope,t)):typeof t.I!="undefined"?(e=t.I.toString(),i=u._.invocationCallbacks[e],i&&(u._.invocationCallbacks[e]=null,delete u._.invocationCallbacks[e],i.method.call(i.scope,t))):(f=this._maximizeClientHubInvocation(t),u.log("Triggering client hub event '"+f.Method+"' on hub '"+f.Hub+"'."),s=f.Hub.toLowerCase(),h=f.Method.toLowerCase(),o=this.proxies[s],n.extend(o.state,f.State),n(o).triggerHandler(r(h),[f.Args])))});u.error(function(n,t){var i,r;t&&(i=t.I,r=u._.invocationCallbacks[i],r&&(u._.invocationCallbacks[i]=null,delete u._.invocationCallbacks[i],r.method.call(r.scope,{E:n})))});u.reconnecting(function(){u.transport&&u.transport.name==="webSockets"&&f(u,"Connection started reconnecting before invocation result was received.")});u.disconnected(function(){f(u,"Connection was disconnected before invocation result was received.")})};t.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S}};t.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var i=[];n.each(t.proxies,function(n){this.hasSubscriptions()&&(i.push({name:n}),t.log("Client subscribed to hub '"+n+"'."))});i.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");t.data=t.json.stringify(i)}))};t.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=i(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t};t.fn.init.prototype=t.fn;n.hubConnection=t}(window.jQuery,window),function(n){n.signalR.version="2.2.1"}(window.jQuery),function(){"use strict";function n(n){function s(s,h){var rt,ut,p=s==window,l=h&&h.message!==undefined?h.message:undefined,g,k,d,tt,nt,w,b,it,ft,et,at;if(h=n.extend({},n.blockUI.defaults,h||{}),!h.ignoreIfBlocked||!n(s).data("blockUI.isBlocked")){if(h.overlayCSS=n.extend({},n.blockUI.defaults.overlayCSS,h.overlayCSS||{}),rt=n.extend({},n.blockUI.defaults.css,h.css||{}),h.onOverlayClick&&(h.overlayCSS.cursor="pointer"),ut=n.extend({},n.blockUI.defaults.themedCSS,h.themedCSS||{}),l=l===undefined?h.message:l,p&&t&&e(window,{fadeOut:0}),l&&typeof l!="string"&&(l.parentNode||l.jquery)&&(g=l.jquery?l[0]:l,k={},n(s).data("blockUI.history",k),k.el=g,k.parent=g.parentNode,k.display=g.style.display,k.position=g.style.position,k.parent&&k.parent.removeChild(g)),n(s).data("blockUI.onUnblock",h.onUnblock),d=h.baseZ,tt=f||h.forceIframe?n('<iframe class="blockUI" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+h.iframeSrc+'"><\/iframe>'):n('<div class="blockUI" style="display:none"><\/div>'),nt=h.theme?n('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+d+++';display:none"><\/div>'):n('<div class="blockUI blockOverlay" style="z-index:'+d+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"><\/div>'),h.theme&&p?(b='<div class="blockUI '+h.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:fixed">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):h.theme?(b='<div class="blockUI '+h.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(d+10)+';display:none;position:absolute">',h.title&&(b+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(h.title||"&nbsp;")+"<\/div>"),b+='<div class="ui-widget-content ui-dialog-content"><\/div>',b+="<\/div>"):b=p?'<div class="blockUI '+h.blockMsgClass+' blockPage" style="z-index:'+(d+10)+';display:none;position:fixed"><\/div>':'<div class="blockUI '+h.blockMsgClass+' blockElement" style="z-index:'+(d+10)+';display:none;position:absolute"><\/div>',w=n(b),l&&(h.theme?(w.css(ut),w.addClass("ui-widget-content")):w.css(rt)),h.theme||nt.css(h.overlayCSS),nt.css("position",p?"fixed":"absolute"),(f||h.forceIframe)&&tt.css("opacity",0),it=[tt,nt,w],ft=p?n("body"):n(s),n.each(it,function(){this.appendTo(ft)}),h.theme&&h.draggable&&n.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"}),et=v&&(!n.support.boxModel||n("object,embed",p?null:s).length>0),o||et){if(p&&h.allowBodyStretch&&n.support.boxModel&&n("html,body").css("height","100%"),(o||!n.support.boxModel)&&!p)var ot=r(s,"borderTopWidth"),st=r(s,"borderLeftWidth"),ht=ot?"(0 - "+ot+")":0,ct=st?"(0 - "+st+")":0;n.each(it,function(n,t){var i=t[0].style,r,u;i.position="absolute";n<2?(p?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+h.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),p?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),ct&&i.setExpression("left",ct),ht&&i.setExpression("top",ht)):h.centerY?(p&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0):!h.centerY&&p&&(r=h.css&&h.css.top?parseInt(h.css.top,10):0,u="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+r+') + "px"',i.setExpression("top",u))})}if(l&&(h.theme?w.find(".ui-widget-content").append(l):w.append(l),(l.jquery||l.nodeType)&&n(l).show()),(f||h.forceIframe)&&h.showOverlay&&tt.show(),h.fadeIn){var lt=h.onBlock?h.onBlock:u,vt=h.showOverlay&&!l?lt:u,yt=l?lt:u;h.showOverlay&&nt._fadeIn(h.fadeIn,vt);l&&w._fadeIn(h.fadeIn,yt)}else h.showOverlay&&nt.show(),l&&w.show(),h.onBlock&&h.onBlock.bind(w)();c(1,s,h);p?(t=w[0],i=n(h.focusableElements,t),h.focusInput&&setTimeout(a,20)):y(w[0],h.centerX,h.centerY);h.timeout&&(at=setTimeout(function(){p?n.unblockUI(h):n(s).unblock(h)},h.timeout),n(s).data("blockUI.timeout",at))}}function e(r,u){var o,s=r==window,e=n(r),l=e.data("blockUI.history"),a=e.data("blockUI.timeout"),f;a&&(clearTimeout(a),e.removeData("blockUI.timeout"));u=n.extend({},n.blockUI.defaults,u||{});c(0,r,u);u.onUnblock===null&&(u.onUnblock=e.data("blockUI.onUnblock"),e.removeData("blockUI.onUnblock"));f=s?n("body").children().filter(".blockUI").add("body > .blockUI"):e.find(">.blockUI");u.cursorReset&&(f.length>1&&(f[1].style.cursor=u.cursorReset),f.length>2&&(f[2].style.cursor=u.cursorReset));s&&(t=i=null);u.fadeOut?(o=f.length,f.stop().fadeOut(u.fadeOut,function(){--o==0&&h(f,l,u,r)})):h(f,l,u,r)}function h(t,i,r,u){var f=n(u);if(!f.data("blockUI.isBlocked")){if(t.each(function(){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.el.style.cursor="default",i.parent&&i.parent.appendChild(i.el),f.removeData("blockUI.history")),f.data("blockUI.static")&&f.css("position","static"),typeof r.onUnblock=="function")r.onUnblock(u,r);var e=n(document.body),o=e.width(),s=e[0].style.width;e.width(o-1).width(o);e[0].style.width=s}}function c(i,r,u){var f=r==window,o=n(r),e;(i||(!f||t)&&(f||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",i),f&&u.bindEvents&&(!i||u.showOverlay))&&(e="mousedown mouseup keydown keypress keyup touchstart touchend touchmove",i?n(document).bind(e,u,l):n(document).unbind(e,l))}function l(r){var u,f;if(r.type==="keydown"&&r.keyCode&&r.keyCode==9&&t&&r.data.constrainTabKey){var e=i,s=!r.shiftKey&&r.target===e[e.length-1],o=r.shiftKey&&r.target===e[0];if(s||o)return setTimeout(function(){a(o)},10),!1}if(u=r.data,f=n(r.target),f.hasClass("blockOverlay")&&u.onOverlayClick)u.onOverlayClick(r);return f.parents("div."+u.blockMsgClass).length>0?!0:f.parents().children().filter("div.blockUI").length===0}function a(n){if(i){var t=i[n===!0?i.length-1:0];t&&t.focus()}}function y(n,t,i){var u=n.parentNode,f=n.style,e=(u.offsetWidth-n.offsetWidth)/2-r(u,"borderLeftWidth"),o=(u.offsetHeight-n.offsetHeight)/2-r(u,"borderTopWidth");t&&(f.left=e>0?e+"px":"0");i&&(f.top=o>0?o+"px":"0")}function r(t,i){return parseInt(n.css(t,i),10)||0}var t,i;n.fn._fadeIn=n.fn.fadeIn;var u=n.noop||function(){},f=/MSIE/.test(navigator.userAgent),o=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),p=document.documentMode||0,v=n.isFunction(document.createElement("div").style.setExpression);n.blockUI=function(n){s(window,n)};n.unblockUI=function(n){e(window,n)};n.growlUI=function(t,i,r,u){var f=n('<div class="growlUI"><\/div>'),e,o;t&&f.append("<h1>"+t+"<\/h1>");i&&f.append("<h2>"+i+"<\/h2>");r===undefined&&(r=3e3);e=function(t){t=t||{};n.blockUI({message:f,fadeIn:typeof t.fadeIn!="undefined"?t.fadeIn:700,fadeOut:typeof t.fadeOut!="undefined"?t.fadeOut:1e3,timeout:typeof t.timeout!="undefined"?t.timeout:r,centerY:!1,showOverlay:!1,onUnblock:u,css:n.blockUI.defaults.growlCSS})};e();o=f.css("opacity");f.mouseover(function(){e({fadeIn:0,timeout:3e4});var t=n(".blockMsg");t.stop();t.fadeTo(300,1)}).mouseout(function(){n(".blockMsg").fadeOut(1e3)})};n.fn.block=function(t){if(this[0]===window)return n.blockUI(t),this;var i=n.extend({},n.blockUI.defaults,t||{});return this.each(function(){var t=n(this);i.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){n.css(this,"position")=="static"&&(this.style.position="relative",n(this).data("blockUI.static",!0));this.style.zoom=1;s(this,t)})};n.fn.unblock=function(t){return this[0]===window?(n.unblockUI(t),this):this.each(function(){e(this,t)})};n.blockUI.version=2.7;n.blockUI.defaults={message:"<h1>Please wait...<\/h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:999999,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};t=null;i=[]}typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],n):n(jQuery)}();+function(n){"use strict";var t=function(i,r){this.$element=n(i);this.options=n.extend({},t.DEFAULTS,r);this.transitioning=null;this.options.parent&&(this.$parent=n(this.options.parent));this.options.toggle&&this.toggle()},i;t.DEFAULTS={toggle:!0};t.prototype.show=function(){var t,i;if(!this.transitioning&&!this.$element.hasClass("sidebar-open")&&(t=n.Event("show.bs.sidebar"),this.$element.trigger(t),!t.isDefaultPrevented())){if(this.$element.addClass("sidebar-open"),this.transitioning=1,i=function(){this.$element;this.transitioning=0;this.$element.trigger("shown.bs.sidebar")},!n.support.transition)return i.call(this);this.$element.one(n.support.transition.end,n.proxy(i,this)).emulateTransitionEnd(400)}};t.prototype.hide=function(){var t,i;if(!this.transitioning&&this.$element.hasClass("sidebar-open")&&(t=n.Event("hide.bs.sidebar"),this.$element.trigger(t),!t.isDefaultPrevented())){if(this.$element.removeClass("sidebar-open"),this.transitioning=1,i=function(){this.transitioning=0;this.$element.trigger("hidden.bs.sidebar")},!n.support.transition)return i.call(this);this.$element.one(n.support.transition.end,n.proxy(i,this)).emulateTransitionEnd(400)}};t.prototype.toggle=function(){this[this.$element.hasClass("sidebar-open")?"hide":"show"]()};i=n.fn.sidebar;n.fn.sidebar=function(i){return this.each(function(){var u=n(this),r=u.data("bs.sidebar"),f=n.extend({},t.DEFAULTS,u.data(),typeof f=="object"&&i);!r&&f.toggle&&i=="show"&&(i=!i);r||u.data("bs.sidebar",r=new t(this,f));typeof i=="string"&&r[i]()})};n.fn.sidebar.Constructor=t;n.fn.sidebar.noConflict=function(){return n.fn.sidebar=i,this};n(document).on("click.bs.sidebar.data-api",'[data-toggle="sidebar"]',function(t){var i=n(this),r,f=i.attr("data-target")||t.preventDefault()||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""),u=n(f),e=u.data("bs.sidebar"),o=e?"toggle":i.data();u.sidebar(o)});n("html").on("click.bs.sidebar.autohide",function(t){var i=n(t.target),u=i.is('.sidebar, [data-toggle="sidebar"]')||i.parents('.sidebar, [data-toggle="sidebar"]').length,r;u||(r=n(".sidebar"),r.each(function(t,i){var r=n(i);r.data("bs.sidebar")&&r.hasClass("sidebar-open")&&r.sidebar("hide")}))})}(jQuery),function(n){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1};this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}};t!==undefined&&this.setOption(t);var i=this,r=function(){setTimeout(function(){i._options.checkOnLoad===!0&&(i._options.debug===!0&&i._log("onload->eventCallback","A check loading is launched"),i._var.bait===null&&i._creatBait(),setTimeout(function(){i.check()},1))},1)};n.addEventListener!==undefined?n.addEventListener("load",r,!1):n.attachEvent("onload",r)};t.prototype._options=null;t.prototype._var=null;t.prototype._bait=null;t.prototype._log=function(n,t){console.log("[BlockAdBlock]["+n+"] "+t)};t.prototype.setOption=function(n,t){var r,i;t!==undefined&&(r=n,n={},n[r]=t);for(i in n)this._options[i]=n[i],this._options.debug===!0&&this._log("setOption",'The option "'+i+'" he was assigned to "'+n[i]+'"');return this};t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass);t.setAttribute("style",this._options.baitStyle);this._var.bait=n.document.body.appendChild(t);this._var.bait.offsetParent;this._var.bait.offsetHeight;this._var.bait.offsetLeft;this._var.bait.offsetTop;this._var.bait.offsetWidth;this._var.bait.clientHeight;this._var.bait.clientWidth;this._options.debug===!0&&this._log("_creatBait","Bait has been created")};t.prototype._destroyBait=function(){n.document.body.removeChild(this._var.bait);this._var.bait=null;this._options.debug===!0&&this._log("_destroyBait","Bait has been removed")};t.prototype.check=function(n){if(n===undefined&&(n=!0),this._options.debug===!0&&this._log("check","An audit was requested "+(n===!0?"with a":"without")+" loop"),this._var.checking===!0)return this._options.debug===!0&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0;this._var.bait===null&&this._creatBait();var t=this;return this._var.loopNumber=0,n===!0&&(this._var.loop=setInterval(function(){t._checkBait(n)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(n)},1),this._options.debug===!0&&this._log("check","A check is in progress ..."),!0};t.prototype._checkBait=function(t){var i=!1,r;this._var.bait===null&&this._creatBait();(n.document.body.getAttribute("abp")!==null||this._var.bait.offsetParent===null||this._var.bait.offsetHeight==0||this._var.bait.offsetLeft==0||this._var.bait.offsetTop==0||this._var.bait.offsetWidth==0||this._var.bait.clientHeight==0||this._var.bait.clientWidth==0)&&(i=!0);n.getComputedStyle!==undefined&&(r=n.getComputedStyle(this._var.bait,null),r&&(r.getPropertyValue("display")=="none"||r.getPropertyValue("visibility")=="hidden")&&(i=!0));this._options.debug===!0&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(i===!0?"positive":"negative"));t===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop());i===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),t===!0&&(this._var.checking=!1)):(this._var.loop===null||t===!1)&&(this._destroyBait(),this.emitEvent(!1),t===!0&&(this._var.checking=!1))};t.prototype._stopLoop=function(){clearInterval(this._var.loop);this._var.loop=null;this._var.loopNumber=0;this._options.debug===!0&&this._log("_stopLoop","A loop has been stopped")};t.prototype.emitEvent=function(n){var t,i;this._options.debug===!0&&this._log("emitEvent","An event with a "+(n===!0?"positive":"negative")+" detection was called");t=this._var.event[n===!0?"detected":"notDetected"];for(i in t)this._options.debug===!0&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+t.length),t.hasOwnProperty(i)&&t[i]();return this._options.resetOnEnd===!0&&this.clearEvent(),this};t.prototype.clearEvent=function(){this._var.event.detected=[];this._var.event.notDetected=[];this._options.debug===!0&&this._log("clearEvent","The event list has been cleared")};t.prototype.on=function(n,t){return this._var.event[n===!0?"detected":"notDetected"].push(t),this._options.debug===!0&&this._log("on",'A type of event "'+(n===!0?"detected":"notDetected")+'" was added'),this};t.prototype.onDetected=function(n){return this.on(!0,n)};t.prototype.onNotDetected=function(n){return this.on(!1,n)};n.BlockAdBlock=t;n.blockAdBlock===undefined&&(n.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window),function(n,t,i){(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):jQuery&&!jQuery.fn.qtip&&n(jQuery)})(function(r){"use strict";function oi(n,t,i,f){this.id=i;this.target=n;this.tooltip=s;this.elements={target:n};this._id=o+"-"+i;this.timers={img:{}};this.options=t;this.plugins={};this.cache={event:{},target:r(),disabled:u,attr:f,onTooltip:u,lastClass:""};this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=u}function et(n){return n===s||r.type(n)!=="object"}function pi(n){return!(r.isFunction(n)||n&&n.attr||n.length||r.type(n)==="object"&&(n.jquery||n.then))}function dt(n){var t,e,i,o;return et(n)?u:(et(n.metadata)&&(n.metadata={type:n.metadata}),"content"in n&&(t=n.content,et(t)||t.jquery||t.done?(e=pi(t)?u:t,t=n.content={text:e}):e=t.text,"ajax"in t&&(i=t.ajax,o=i&&i.once!==u,delete t.ajax,t.text=function(n,t){var u=e||r(this).attr(t.options.content.attr)||"Loading...",f=r.ajax(r.extend({},i,{context:t})).then(i.success,s,i.error).then(function(n){return n&&o&&t.set("content.text",n),n},function(n,i,r){t.destroyed||n.status===0||t.set("content.text",i+": "+r)});return o?u:(t.set("content.text",u),f)}),"title"in t&&(r.isPlainObject(t.title)&&(t.button=t.title.button,t.title=t.title.text),pi(t.title||u)&&(t.title=u))),"position"in n&&et(n.position)&&(n.position={my:n.position,at:n.position}),"show"in n&&et(n.show)&&(n.show=n.show.jquery?{target:n.show}:n.show===f?{ready:f}:{event:n.show}),"hide"in n&&et(n.hide)&&(n.hide=n.hide.jquery?{target:n.hide}:{event:n.hide}),"style"in n&&et(n.style)&&(n.style={classes:n.style}),r.each(h,function(){this.sanitize&&this.sanitize(n)}),n)}function wi(n,t){for(var u=0,f,i=n,r=t.split(".");i=i[r[u++]];)u<r.length&&(f=i);return[f||n,r.pop()]}function yr(n,t){var i,r,u;for(i in this.checks)if(this.checks.hasOwnProperty(i))for(r in this.checks[i])this.checks[i].hasOwnProperty(r)&&(u=new RegExp(r,"i").exec(n))&&(t.push(u),(i==="builtin"||this.plugins[i])&&this.checks[i][r].apply(this.plugins[i]||this,t))}function gt(n){return ar.concat("").join(n?"-"+n+" ":" ")}function ni(n,t){if(t>0)return setTimeout(r.proxy(n,this),t);n.call(this)}function pr(n){this.tooltip.hasClass(a)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=ni.call(this,function(){this.toggle(f,n)},this.options.show.delay))}function wr(n){if(!this.tooltip.hasClass(a)&&!this.destroyed){var t=r(n.relatedTarget),i=t.closest(rt)[0]===this.tooltip[0],f=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&this.options.position.target==="mouse"&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(n.type)&&(i||f)){try{n.preventDefault();n.stopImmediatePropagation()}catch(e){}return}this.timers.hide=ni.call(this,function(){this.toggle(u,n)},this.options.hide.delay,this)}}function si(n){!this.tooltip.hasClass(a)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=ni.call(this,function(){this.hide(n)},this.options.hide.inactive))}function di(n){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(n)}function gi(n,i,u){r(t.body).delegate(n,(i.split?i:i.join("."+o+" "))+"."+o,function(){var n=c.api[r.attr(this,bt)];n&&!n.disabled&&u.apply(n,arguments)})}function br(n,i,e){var y,l,v,h,b,k=r(t.body),p=n[0]===t?k:n,w=n.metadata?n.metadata(e.metadata):s,d=e.metadata.type==="html5"&&w?w[e.metadata.name]:s,a=n.data(e.metadata.name||"qtipopts");try{a=typeof a=="string"?r.parseJSON(a):a}catch(g){}if(h=r.extend(f,{},c.defaults,e,typeof a=="object"?dt(a):s,dt(d||w)),l=h.position,h.id=i,"boolean"==typeof h.content.text)if(v=n.attr(h.content.attr),h.content.attr!==u&&v)h.content.text=v;else return u;if(l.container.length||(l.container=k),l.target===u&&(l.target=p),h.show.target===u&&(h.show.target=p),h.show.solo===f&&(h.show.solo=l.container.closest("body")),h.hide.target===u&&(h.hide.target=p),h.position.viewport===f&&(h.position.viewport=l.container),l.container=l.container.eq(0),l.at=new it(l.at,f),l.my=new it(l.my),n.data(o))if(h.overwrite)n.qtip("destroy",!0);else if(h.overwrite===u)return u;return n.attr(fi,i),h.suppress&&(b=n.attr("title"))&&n.removeAttr("title").attr(ut,b).attr("title",""),y=new oi(n,h,i,!!v),n.data(o,y),y}function pt(n){return n.charAt(0).toUpperCase()+n.slice(1)}function kr(n,t){var u=t.charAt(0).toUpperCase()+t.slice(1),e=(t+" "+fr.join(u+" ")+u).split(" "),r,f,o=0;if(ri[t])return n.css(ri[t]);while(r=e[o++])if((f=n.css(r))!==i)return ri[t]=r,f}function lt(n,t){return Math.ceil(parseFloat(kr(n,t)))}function er(n,t){this._ns="tip";this.options=t;this.offset=t.offset;this.size=[t.width,t.height];this.qtip=n;this.init(n)}function or(n,t){this.options=t;this._ns="-modal";this.qtip=n;this.init(n)}function cr(n){this._ns="ie6";this.qtip=n;this.init(n)}var f=!0,u=!1,s=null,w="x",y="y",d="width",at="height",b="top",p="left",tt="bottom",k="right",l="center",lr="flipinvert",ft="shift",c,e,it,wt,h={},o="qtip",fi="data-hasqtip",bt="data-qtip-id",ar=["ui-widget","ui-tooltip"],rt="."+o,vi="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),yi=o+"-fixed",ei=o+"-default",st=o+"-focus",vr=o+"-hover",a=o+"-disabled",ht="_replacedByqTip",ut="oldtitle",kt,v={ie:function(){for(var n=4,i=t.createElement("div");(i.innerHTML="<!--[if gt IE "+n+"]><i><\/i><![endif]-->")&&i.getElementsByTagName("i")[0];n+=1);return n>4?n:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||u},bi,ki,vt,ri,fr,ai,g,ui,nt,sr,hr;e=oi.prototype;e._when=function(n){return r.when.apply(r,n)};e.render=function(n){if(this.rendered||this.destroyed)return this;var i=this,t=this.options,s=this.cache,y=this.elements,p=t.content.text,l=t.content.title,w=t.content.button,e=t.position,v=[];return r.attr(this.target[0],"aria-describedby",this._id),s.posClass=this._createPosClass((this.position={my:e.my,at:e.at}).my),this.tooltip=y.tooltip=r("<div/>",{id:this._id,"class":[o,ei,t.style.classes,s.posClass].join(" "),width:t.style.width||"",height:t.style.height||"",tracking:e.target==="mouse"&&e.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":u,"aria-describedby":this._id+"-content","aria-hidden":f}).toggleClass(a,this.disabled).attr(bt,this.id).data(o,this).appendTo(e.container).append(y.content=r("<div />",{"class":o+"-content",id:this._id+"-content","aria-atomic":f})),this.rendered=-1,this.positioning=f,l&&(this._createTitle(),r.isFunction(l)||v.push(this._updateTitle(l,u))),w&&this._createButton(),r.isFunction(p)||v.push(this._updateContent(p,u)),this.rendered=f,this._setWidget(),r.each(h,function(n){var t;this.initialize==="render"&&(t=this(i))&&(i.plugins[n]=t)}),this._unassignEvents(),this._assignEvents(),this._when(v).then(function(){i._trigger("render");i.positioning=u;!i.hiddenDuringWait&&(t.show.ready||n)&&i.toggle(f,s.event,u);i.hiddenDuringWait=u}),c.api[this.id]=this,this};e.destroy=function(n){function t(){if(!this.destroyed){this.destroyed=f;var n=this.target,i=n.attr(ut),t;this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove();r.each(this.plugins,function(){this.destroy&&this.destroy()});for(t in this.timers)this.timers.hasOwnProperty(t)&&clearTimeout(this.timers[t]);n.removeData(o).removeAttr(bt).removeAttr(fi).removeAttr("aria-describedby");this.options.suppress&&i&&n.attr("title",i).removeAttr(ut);this._unassignEvents();this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=s;delete c.api[this.id]}}if(this.destroyed)return this.target;if((n!==f||this.triggering==="hide")&&this.rendered){this.tooltip.one("tooltiphidden",r.proxy(t,this));this.triggering||this.hide()}else t.call(this);return this.target};wt=e.checks={builtin:{"^id$":function(n,t,i,e){var s=i===f?c.nextid:i,h=o+"-"+s;s!==u&&s.length>0&&!r("#"+h).length?(this._id=h,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):n[t]=e},"^prerender":function(n,t,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(n,t,i){this._updateContent(i)},"^content.attr$":function(n,t,i,r){this.options.content.text===this.target.attr(r)&&this._updateContent(this.target.attr(i))},"^content.title$":function(n,t,i){if(!i)return this._removeTitle();i&&!this.elements.title&&this._createTitle();this._updateTitle(i)},"^content.button$":function(n,t,i){this._updateButton(i)},"^content.title.(text|button)$":function(n,t,i){this.set("content."+t,i)},"^position.(my|at)$":function(n,t,i){"string"==typeof i&&(this.position[t]=n[t]=new it(i,t==="at"))},"^position.container$":function(n,t,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(n,t,i){i&&(!this.rendered&&this.render(f)||this.toggle(f))},"^style.classes$":function(n,t,i,r){this.rendered&&this.tooltip.removeClass(r).addClass(i)},"^style.(width|height)":function(n,t,i){this.rendered&&this.tooltip.css(t,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(n,t,i){this.rendered&&this.tooltip.toggleClass(ei,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(n,t,i){this.rendered&&this.tooltip[(r.isFunction(i)?"":"un")+"bind"]("tooltip"+t,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var n=this.options.position;this.tooltip.attr("tracking",n.target==="mouse"&&n.adjust.mouse);this._unassignEvents();this._assignEvents()}}}};e.get=function(n){if(this.destroyed)return this;var i=wi(this.options,n.toLowerCase()),t=i[0][i[1]];return t.precedance?t.string():t};bi=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i;ki=/^prerender|show\.ready/i;e.set=function(n,t){if(this.destroyed)return this;var h=this.rendered,i=u,e=this.options,o;return"string"==typeof n?(o=n,n={},n[o]=t):n=r.extend({},n),r.each(n,function(t,u){if(h&&ki.test(t)){delete n[t];return}var f=wi(e,t.toLowerCase()),o;o=f[0][f[1]];f[0][f[1]]=u&&u.nodeType?r(u):u;i=bi.test(t)||i;n[t]=[f[0],f[1],u,o]}),dt(e),this.positioning=f,r.each(n,r.proxy(yr,this)),this.positioning=u,this.rendered&&this.tooltip[0].offsetWidth>0&&i&&this.reposition(e.position.target==="mouse"?s:this.cache.event),this};e._update=function(n,t){var i=this,e=this.cache;return!this.rendered||!n?u:(r.isFunction(n)&&(n=n.call(this.elements.target,e.event,this)||""),r.isFunction(n.then))?(e.waiting=f,n.then(function(n){return e.waiting=u,i._update(n,t)},s,function(n){return i._update(n,t)})):n===u||!n&&n!==""?u:(n.jquery&&n.length>0?t.empty().append(n.css({display:"block",visibility:"visible"})):t.html(n),this._waitForContent(t).then(function(n){i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(e.event,!n.length)}))};e._waitForContent=function(n){var t=this.cache;return t.waiting=f,(r.fn.imagesLoaded?n.imagesLoaded():(new r.Deferred).resolve([])).done(function(){t.waiting=u}).promise()};e._updateContent=function(n,t){this._update(n,this.elements.content,t)};e._updateTitle=function(n,t){this._update(n,this.elements.title,t)===u&&this._removeTitle(u)};e._createTitle=function(){var n=this.elements,t=this._id+"-title";n.titlebar&&this._removeTitle();n.titlebar=r("<div />",{"class":o+"-titlebar "+(this.options.style.widget?gt("header"):"")}).append(n.title=r("<div />",{id:t,"class":o+"-title","aria-atomic":f})).insertBefore(n.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(n){r(this).toggleClass("ui-state-active ui-state-focus",n.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(n){r(this).toggleClass("ui-state-hover",n.type==="mouseover")});this.options.content.button&&this._createButton()};e._removeTitle=function(n){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=s,n!==u&&this.reposition())};e._createPosClass=function(n){return o+"-pos-"+(n||this.options.position.my).abbrev()};e.reposition=function(i,e){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=f;var c=this.cache,d=this.tooltip,a=this.options.position,o=a.target,et=a.my,g=a.at,ot=a.viewport,ht=a.container,ut=a.adjust,vt=ut.method.split(" "),ct=d.outerWidth(u),lt=d.outerHeight(u),nt=0,it=0,yt=d.css("position"),s={left:0,top:0},wt=d[0].offsetWidth>0,bt=i&&i.type==="scroll",st=r(n),pt=ht[0].ownerDocument,rt=this.mouse,y,w,ft,at;if(r.isArray(o)&&o.length===2)g={x:p,y:b},s={left:o[0],top:o[1]};else if(o==="mouse")g={x:p,y:b},(!ut.mouse||this.options.hide.distance)&&c.origin&&c.origin.pageX?i=c.origin:!i||i&&(i.type==="resize"||i.type==="scroll")?i=c.event:rt&&rt.pageX&&(i=rt),yt!=="static"&&(s=ht.offset()),pt.body.offsetWidth!==(n.innerWidth||pt.documentElement.clientWidth)&&(w=r(t.body).offset()),s={left:i.pageX-s.left+(w&&w.left||0),top:i.pageY-s.top+(w&&w.top||0)},ut.mouse&&bt&&rt&&(s.left-=(rt.scrollX||0)-st.scrollLeft(),s.top-=(rt.scrollY||0)-st.scrollTop());else{if(o==="event"?i&&i.target&&i.type!=="scroll"&&i.type!=="resize"?c.target=r(i.target):i.target||(c.target=this.elements.target):o!=="event"&&(c.target=r(o.jquery?o:this.elements.target)),o=c.target,o=r(o).eq(0),o.length===0)return this;o[0]===t||o[0]===n?(nt=v.iOS?n.innerWidth:o.width(),it=v.iOS?n.innerHeight:o.height(),o[0]===n&&(s={top:(ot||o).scrollTop(),left:(ot||o).scrollLeft()})):h.imagemap&&o.is("area")?y=h.imagemap(this,o,g,h.viewport?vt:u):h.svg&&o&&o[0].ownerSVGElement?y=h.svg(this,o,g,h.viewport?vt:u):(nt=o.outerWidth(u),it=o.outerHeight(u),s=o.offset());y&&(nt=y.width,it=y.height,w=y.offset,s=y.position);s=this.reposition.offset(o,s,ht);(v.iOS>3.1&&v.iOS<4.1||v.iOS>=4.3&&v.iOS<4.33||!v.iOS&&yt==="fixed")&&(s.left-=st.scrollLeft(),s.top-=st.scrollTop());(!y||y&&y.adjustable!==u)&&(s.left+=g.x===k?nt:g.x===l?nt/2:0,s.top+=g.y===tt?it:g.y===l?it/2:0)}return(s.left+=ut.x+(et.x===k?-ct:et.x===l?-ct/2:0),s.top+=ut.y+(et.y===tt?-lt:et.y===l?-lt/2:0),h.viewport?(ft=s.adjusted=h.viewport(this,s,a,nt,it,ct,lt),w&&ft.left&&(s.left+=w.left),w&&ft.top&&(s.top+=w.top),ft.my&&(this.position.my=ft.my)):s.adjusted={left:0,top:0},c.posClass!==(at=this._createPosClass(this.position.my))&&(c.posClass=at,d.removeClass(c.posClass).addClass(at)),!this._trigger("move",[s,ot.elem||ot],i))?this:(delete s.adjusted,e===u||!wt||isNaN(s.left)||isNaN(s.top)||o==="mouse"||!r.isFunction(a.effect)?d.css(s):r.isFunction(a.effect)&&(a.effect.call(d,this,r.extend({},s)),d.queue(function(n){r(this).css({opacity:"",height:""});v.ie&&this.style.removeAttribute("filter");n()})),this.positioning=u,this)};e.reposition.offset=function(n,i,u){function l(n,t){i.left+=t*n.scrollLeft();i.top+=t*n.scrollTop()}if(!u[0])return i;var s=r(n[0].ownerDocument),a=!!v.ie&&t.compatMode!=="CSS1Compat",f=u[0],o,h,e,c;do(h=r.css(f,"position"))!=="static"&&(h==="fixed"?(e=f.getBoundingClientRect(),l(s,-1)):(e=r(f).position(),e.left+=parseFloat(r.css(f,"borderLeftWidth"))||0,e.top+=parseFloat(r.css(f,"borderTopWidth"))||0),i.left-=e.left+(parseFloat(r.css(f,"marginLeft"))||0),i.top-=e.top+(parseFloat(r.css(f,"marginTop"))||0),o||(c=r.css(f,"overflow"))==="hidden"||c==="visible"||(o=r(f)));while(f=f.offsetParent);return o&&(o[0]!==s[0]||a)&&l(o,1),i};vt=(it=e.reposition.Corner=function(n,t){n=(""+n).replace(/([A-Z])/," $1").replace(/middle/gi,l).toLowerCase();this.x=(n.match(/left|right/i)||n.match(/center/)||["inherit"])[0].toLowerCase();this.y=(n.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();this.forceY=!!t;var i=n.charAt(0);this.precedance=i==="t"||i==="b"?y:w}).prototype;vt.invert=function(n,t){this[n]=this[n]===p?k:this[n]===k?p:t||this[n]};vt.string=function(n){var t=this.x,i=this.y,r=t!==i?t==="center"||i!=="center"&&(this.precedance===y||this.forceY)?[i,t]:[t,i]:[t];return n!==!1?r.join(" "):r};vt.abbrev=function(){var n=this.string(!1);return n[0].charAt(0)+(n[1]&&n[1].charAt(0)||"")};vt.clone=function(){return new it(this.string(),this.forceY)};e.toggle=function(n,i){var c=this.cache,b=this.options,e=this.tooltip;if(i){if(/over|enter/.test(i.type)&&c.event&&/out|leave/.test(c.event.type)&&b.show.target.add(i.target).length===b.show.target.length&&e.has(i.relatedTarget).length)return this;c.event=r.event.fix(i)}if(this.waiting&&!n&&(this.hiddenDuringWait=f),this.rendered){if(this.destroyed||this.disabled)return this}else return n?this.render(1):this;var y=n?"show":"hide",h=this.options[y],k=this.options.position,l=this.options.content,d=this.tooltip.css("width"),g=this.tooltip.is(":visible"),nt=n||h.target.length===1,tt=!i||h.target.length<2||c.target[0]===i.target,p,w,a;return((typeof n).search("boolean|number")&&(n=!g),p=!e.is(":animated")&&g===n&&tt,w=p?s:!!this._trigger(y,[90]),this.destroyed)?this:(w!==u&&n&&this.focus(i),!w||p)?this:(r.attr(e[0],"aria-hidden",!!!n),n?(this.mouse&&(c.origin=r.event.fix(this.mouse)),r.isFunction(l.text)&&this._updateContent(l.text,u),r.isFunction(l.title)&&this._updateTitle(l.title,u),!kt&&k.target==="mouse"&&k.adjust.mouse&&(r(t).bind("mousemove."+o,this._storeMouse),kt=f),d||e.css("width",e.outerWidth(u)),this.reposition(i,arguments[2]),d||e.css("width",""),!h.solo||(typeof h.solo=="string"?r(h.solo):r(rt,h.solo)).not(e).not(h.target).qtip("hide",new r.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete c.origin,kt&&!r(rt+'[tracking="true"]:visible',h.solo).not(e).length&&(r(t).unbind("mousemove."+o),kt=u),this.blur(i)),a=r.proxy(function(){n?(v.ie&&e[0].style.removeAttribute("filter"),e.css("overflow",""),"string"==typeof h.autofocus&&r(this.options.show.autofocus,e).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):e.css({display:"",visibility:"",opacity:"",left:"",top:""});this._trigger(n?"visible":"hidden")},this),h.effect===u||nt===u?(e[y](),a()):r.isFunction(h.effect)?(e.stop(1,1),h.effect.call(e,this),e.queue("fx",function(n){a();n()})):e.fadeTo(90,n?1:0,a),n&&h.target.trigger("qtip-"+this.id+"-inactive"),this)};e.show=function(n){return this.toggle(f,n)};e.hide=function(n){return this.toggle(u,n)};e.focus=function(n){if(!this.rendered||this.destroyed)return this;var t=r(rt),i=this.tooltip,f=parseInt(i[0].style.zIndex,10),u=c.zindex+t.length;return i.hasClass(st)||this._trigger("focus",[u],n)&&(f!==u&&(t.each(function(){this.style.zIndex>f&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+st).qtip("blur",n)),i.addClass(st)[0].style.zIndex=u),this};e.blur=function(n){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(st),this._trigger("blur",[this.tooltip.css("zIndex")],n),this)};e.disable=function(n){return this.destroyed?this:(n==="toggle"?n=!(this.rendered?this.tooltip.hasClass(a):this.disabled):"boolean"!=typeof n&&(n=f),this.rendered&&this.tooltip.toggleClass(a,n).attr("aria-disabled",n),this.disabled=!!n,this)};e.enable=function(){return this.disable(u)};e._createButton=function(){var e=this,n=this.elements,i=n.tooltip,t=this.options.content.button,s=typeof t=="string",f=s?t:"Close tooltip";n.button&&n.button.remove();n.button=t.jquery?t:r("<a />",{"class":"qtip-close "+(this.options.style.widget?"":o+"-icon"),title:f,"aria-label":f}).prepend(r("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"}));n.button.appendTo(n.titlebar||i).attr("role","button").click(function(n){return i.hasClass(a)||e.hide(n),u})};e._updateButton=function(n){if(!this.rendered)return u;var t=this.elements.button;n?this._createButton():t.remove()};e._setWidget=function(){var t=this.options.style.widget,n=this.elements,i=n.tooltip,r=i.hasClass(a);i.removeClass(a);a=t?"ui-state-disabled":"qtip-disabled";i.toggleClass(a,r);i.toggleClass("ui-helper-reset "+gt(),t).toggleClass(ei,this.options.style.def&&!t);n.content&&n.content.toggleClass(gt("content"),t);n.titlebar&&n.titlebar.toggleClass(gt("header"),t);n.button&&n.button.toggleClass(o+"-icon",!t)};e._storeMouse=function(n){return(this.mouse=r.event.fix(n)).type="mousemove",this};e._bind=function(n,t,i,u,f){if(n&&i&&t.length){var e="."+this._id+(u?"-"+u:"");return r(n).bind((t.split?t:t.join(e+" "))+e,r.proxy(i,f||this)),this}};e._unbind=function(n,t){return n&&r(n).unbind("."+this._id+(t?"-"+t:"")),this};e._trigger=function(n,t,i){var f=new r.Event("tooltip"+n);return f.originalEvent=i&&r.extend({},i)||this.cache.event||s,this.triggering=n,this.tooltip.trigger(f,[this].concat(t||[])),this.triggering=u,!f.isDefaultPrevented()};e._bindEvents=function(n,t,i,u,f,e){var o=i.filter(u).add(u.filter(i)),s=[];o.length&&(r.each(t,function(t,i){var u=r.inArray(i,n);u>-1&&s.push(n.splice(u,1)[0])}),s.length&&(this._bind(o,s,function(n){var t=this.rendered?this.tooltip[0].offsetWidth>0:!1;(t?e:f).call(this,n)}),i=i.not(o),u=u.not(o)));this._bind(i,n,f);this._bind(u,t,e)};e._assignInitialEvents=function(n){function o(n){if(this.disabled||this.destroyed)return u;this.cache.event=n&&r.event.fix(n);this.cache.target=n&&r(n.target);clearTimeout(this.timers.show);this.timers.show=ni.call(this,function(){this.render(typeof n=="object"||t.show.ready)},t.prerender?0:t.show.delay)}var t=this.options,i=t.show.target,s=t.hide.target,h=t.show.event?r.trim(""+t.show.event).split(" "):[],e=t.hide.event?r.trim(""+t.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy");/mouse(over|enter)/i.test(t.show.event)&&!/mouse(out|leave)/i.test(t.hide.event)&&e.push("mouseleave");this._bind(i,"mousemove",function(n){this._storeMouse(n);this.cache.onTarget=f});this._bindEvents(h,e,i,s,o,function(){if(!this.timers)return u;clearTimeout(this.timers.show)});(t.show.ready||t.prerender)&&o.call(this,n)};e._assignEvents=function(){var y=this,i=this.options,f=i.position,e=this.tooltip,s=i.show.target,o=i.hide.target,p=f.container,h=f.viewport,l=r(t),v=r(n),w=i.show.event?r.trim(""+i.show.event).split(" "):[],b=i.hide.event?r.trim(""+i.hide.event).split(" "):[];r.each(i.events,function(n,t){y._bind(e,n==="toggle"?["tooltipshow","tooltiphide"]:["tooltip"+n],t,null,e)});/mouse(out|leave)/i.test(i.hide.event)&&i.hide.leave==="window"&&this._bind(l,["mouseout","blur"],function(n){/select|option/.test(n.target.nodeName)||n.relatedTarget||this.hide(n)});i.hide.fixed?o=o.add(e.addClass(yi)):/mouse(over|enter)/i.test(i.show.event)&&this._bind(o,"mouseleave",function(){clearTimeout(this.timers.show)});(""+i.hide.event).indexOf("unfocus")>-1&&this._bind(p.closest("html"),["mousedown","touchstart"],function(n){var t=r(n.target),i=this.rendered&&!this.tooltip.hasClass(a)&&this.tooltip[0].offsetWidth>0,u=t.parents(rt).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||u||this.target.has(t[0]).length||!i||this.hide(n)});"number"==typeof i.hide.inactive&&(this._bind(s,"qtip-"+this.id+"-inactive",si,"inactive"),this._bind(o.add(e),c.inactiveEvents,si));this._bindEvents(w,b,s,o,pr,wr);this._bind(s.add(e),"mousemove",function(n){if("number"==typeof i.hide.distance){var t=this.cache.origin||{},r=this.options.hide.distance,u=Math.abs;(u(n.pageX-t.pageX)>=r||u(n.pageY-t.pageY)>=r)&&this.hide(n)}this._storeMouse(n)});f.target==="mouse"&&f.adjust.mouse&&(i.hide.event&&this._bind(s,["mouseenter","mouseleave"],function(n){if(!this.cache)return u;this.cache.onTarget=n.type==="mouseenter"}),this._bind(l,"mousemove",function(n){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(a)&&this.tooltip[0].offsetWidth>0&&this.reposition(n)}));(f.adjust.resize||h.length)&&this._bind(r.event.special.resize?h:v,"resize",di);f.adjust.scroll&&this._bind(v.add(f.container),"scroll",di)};e._unassignEvents=function(){var u=this.options,f=u.show.target,e=u.hide.target,i=r.grep([this.elements.target[0],this.rendered&&this.tooltip[0],u.position.container[0],u.position.viewport[0],u.position.container.closest("html")[0],n,t],function(n){return typeof n=="object"});f&&f.toArray&&(i=i.concat(f.toArray()));e&&e.toArray&&(i=i.concat(e.toArray()));this._unbind(i)._unbind(i,"destroy")._unbind(i,"inactive")};r(function(){gi(rt,["mouseenter","mouseleave"],function(n){var u=n.type==="mouseenter",i=r(n.currentTarget),f=r(n.relatedTarget||n.target),t=this.options;u?(this.focus(n),i.hasClass(yi)&&!i.hasClass(a)&&clearTimeout(this.timers.hide)):t.position.target==="mouse"&&t.position.adjust.mouse&&t.hide.event&&t.show.target&&!f.closest(t.show.target[0]).length&&this.hide(n);i.toggleClass(vr,u)});gi("["+bt+"]",vi,si)});c=r.fn.qtip=function(n,t,e){var a=(""+n).toLowerCase(),y=s,p=r.makeArray(arguments).slice(1),v=p[p.length-1],l=this[0]?r.data(this[0],o):s;return!arguments.length&&l||a==="api"?l:"string"==typeof n?(this.each(function(){var n=r.data(this,o);if(!n)return f;if(v&&v.timeStamp&&(n.cache.event=v),t&&(a==="option"||a==="options"))if(e!==i||r.isPlainObject(t))n.set(t,e);else return y=n.get(t),u;else n[a]&&n[a].apply(n,p)}),y!==s?y:this):"object"==typeof n||!arguments.length?(l=dt(r.extend(f,{},n)),this.each(function(n){var i,t;if(t=r.isArray(l.id)?l.id[n]:l.id,t=!t||t===u||t.length<1||c.api[t]?c.nextid++:t,i=br(r(this),t,l),i===u)return f;c.api[t]=i;r.each(h,function(){this.initialize==="initialize"&&this(i)});i._assignInitialEvents(v)})):void 0};r.qtip=oi;c.api={};r.each({attr:function(n,t){if(this.length){var u=this[0],f="title",i=r.data(u,"qtip");if(n===f&&i&&i.options&&"object"==typeof i&&"object"==typeof i.options&&i.options.suppress)return arguments.length<2?r.attr(u,ut):(i&&i.options.content.attr===f&&i.cache.attr&&i.set("content.text",t),this.attr(ut,t))}return r.fn["attr"+ht].apply(this,arguments)},clone:function(n){var t=r.fn["clone"+ht].apply(this,arguments);return n||t.filter("["+ut+"]").attr("title",function(){return r.attr(this,ut)}).removeAttr(ut),t}},function(n,t){if(!t||r.fn[n+ht])return f;var i=r.fn[n+ht]=r.fn[n];r.fn[n]=function(){return t.apply(this,arguments)||i.apply(this,arguments)}});r.ui||(r["cleanData"+ht]=r.cleanData,r.cleanData=function(n){for(var i=0,t;(t=r(n[i])).length;i++)if(t.attr(fi))try{t.triggerHandler("removeqtip")}catch(u){}r["cleanData"+ht].apply(this,arguments)});c.version="3.0.3";c.nextid=0;c.inactiveEvents=vi;c.zindex=15e3;c.defaults={prerender:u,id:u,overwrite:f,suppress:f,content:{text:f,attr:"title",title:u,button:u},position:{my:"top left",at:"bottom right",target:u,container:u,viewport:u,adjust:{x:0,y:0,mouse:f,scroll:f,resize:f,method:"flipinvert flipinvert"},effect:function(n,t){r(this).animate(t,{duration:200,queue:u})}},show:{target:u,event:"mouseenter",effect:f,delay:90,solo:u,ready:u,autofocus:u},hide:{target:u,event:"mouseleave",effect:f,delay:0,fixed:u,inactive:u,leave:"window",distance:u},style:{classes:"",widget:u,width:u,height:u,def:f},events:{render:s,move:s,show:s,hide:s,toggle:s,visible:s,hidden:s,focus:s,blur:s}};var hi,ci,ot,nr,tr,li="margin",ti="border",yt="color",ct="background-color",ir="transparent",rr=" !important",ii=!!t.createElement("canvas").getContext,ur=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i;ri={};fr=["Webkit","O","Moz","ms"];ii?(nr=n.devicePixelRatio||1,tr=function(){var n=t.createElement("canvas").getContext("2d");return n.backingStorePixelRatio||n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||1}(),ot=nr/tr):ci=function(n,t,i){return"<qtipvml:"+n+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};r.extend(er.prototype,{init:function(n){var t,i;i=this.element=n.elements.tip=r("<div />",{"class":o+"-tip"}).prependTo(n.tooltip);ii?(t=r("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=ci("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),n._bind(r("*",i).add(i),["click","mousedown"],function(n){n.stopPropagation()},this._ns));n._bind(n.tooltip,"tooltipmove",this.reposition,this._ns,this);this.create()},_swapDimensions:function(){this.size[0]=this.options.height;this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width;this.size[1]=this.options.height},_useTitle:function(n){var t=this.qtip.elements.titlebar;return t&&(n.y===b||n.y===l&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight(f))},_parseCorner:function(n){var t=this.qtip.options.position.my;return n===u||t===u?n=u:n===f?n=new it(t.string()):n.string||(n=new it(n),n.fixed=f),n},_parseWidth:function(n,t,i){var r=this.qtip.elements,u=ti+pt(t)+"Width";return(i?lt(i,u):lt(r.content,u)||lt(this._useTitle(n)&&r.titlebar||r.content,u)||lt(r.tooltip,u))||0},_parseRadius:function(n){var t=this.qtip.elements,i=ti+pt(n.y)+pt(n.x)+"Radius";return v.ie<9?0:lt(this._useTitle(n)&&t.titlebar||t.content,i)||lt(t.tooltip,i)||0},_invalidColour:function(n,t,i){var r=n.css(t);return!r||i&&r===n.css(i)||ur.test(r)?u:r},_parseColours:function(n){var i=this.qtip.elements,u=this.element.css("cssText",""),f=ti+pt(n[n.precedance])+pt(yt),o=this._useTitle(n)&&i.titlebar||i.content,t=this._invalidColour,e=[];return e[0]=t(u,ct)||t(o,ct)||t(i.content,ct)||t(i.tooltip,ct)||u.css(ct),e[1]=t(u,f,yt)||t(o,f,yt)||t(i.content,f,yt)||t(i.tooltip,f,yt)||i.tooltip.css(f),r("*",u).add(u).css("cssText",ct+":"+ir+rr+";"+ti+":0"+rr+";"),e},_calculateSize:function(n){var o=n.precedance===y,s=this.options.width,r=this.options.height,h=n.abbrev()==="c",c=(o?s:r)*(h?.5:1),i=Math.pow,l=Math.round,a,f,e,u=Math.sqrt(i(c,2)+i(r,2)),t=[this.border/c*u,this.border/r*u];return t[2]=Math.sqrt(i(t[0],2)-i(this.border,2)),t[3]=Math.sqrt(i(t[1],2)-i(this.border,2)),a=u+t[2]+t[3]+(h?0:t[0]),f=a/u,e=[l(f*s),l(f*r)],o?e:e.reverse()},_calculateTip:function(n,t,i){i=i||1;t=t||this.size;var r=t[0]*i,u=t[1]*i,e=Math.ceil(r/2),o=Math.ceil(u/2),f={br:[0,0,r,u,r,0],bl:[0,0,r,0,0,u],tr:[0,u,r,0,r,u],tl:[0,0,0,u,r,u],tc:[0,u,e,0,r,u],bc:[0,0,r,0,e,u],rc:[0,0,r,o,0,u],lc:[r,0,r,u,0,o]};return f.lt=f.br,f.rt=f.bl,f.lb=f.tr,f.rb=f.tl,f[n.abbrev()]},_drawCoords:function(n,t){n.beginPath();n.moveTo(t[0],t[1]);n.lineTo(t[2],t[3]);n.lineTo(t[4],t[5]);n.closePath()},create:function(){var n=this.corner=(ii||v.ie)&&this._parseCorner(this.options.corner);return this.enabled=!!this.corner&&this.corner.abbrev()!=="c",this.enabled&&(this.qtip.cache.corner=n.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,i){if(!this.enabled)return this;var ct=this.qtip.elements,st=this.element,rt=st.children(),ut=this.options,nt=this.size,e=ut.mimic,ft=Math.round,a,et,h,c,ht,g,o,s;t||(t=this.qtip.cache.corner||this.corner);e===u?e=t:(e=new it(e),e.precedance=t.precedance,e.x==="inherit"?e.x=t.x:e.y==="inherit"?e.y=t.y:e.x===e.y&&(e[t.precedance]=t[t.precedance]));et=e.precedance;t.precedance===w?this._swapDimensions():this._resetDimensions();a=this.color=this._parseColours(t);a[1]!==ir?(s=this.border=this._parseWidth(t,t[t.precedance]),ut.border&&s<1&&!ur.test(a[1])&&(a[0]=a[1]),this.border=s=ut.border!==f?ut.border:s):this.border=s=0;o=this.size=this._calculateSize(t);st.css({width:o[0],height:o[1],lineHeight:o[1]+"px"});g=t.precedance===y?[ft(e.x===p?s:e.x===k?o[0]-nt[0]-s:(o[0]-nt[0])/2),ft(e.y===b?o[1]-nt[1]:0)]:[ft(e.x===p?o[0]-nt[0]:0),ft(e.y===b?s:e.y===tt?o[1]-nt[1]-s:(o[1]-nt[1])/2)];ii?(h=rt[0].getContext("2d"),h.restore(),h.save(),h.clearRect(0,0,6e3,6e3),c=this._calculateTip(e,nt,ot),ht=this._calculateTip(e,this.size,ot),rt.attr(d,o[0]*ot).attr(at,o[1]*ot),rt.css(d,o[0]).css(at,o[1]),this._drawCoords(h,ht),h.fillStyle=a[1],h.fill(),h.translate(g[0]*ot,g[1]*ot),this._drawCoords(h,c),h.fillStyle=a[0],h.fill()):(c=this._calculateTip(e),c="m"+c[0]+","+c[1]+" l"+c[2]+","+c[3]+" "+c[4]+","+c[5]+" xe",g[2]=s&&/^(r|b)/i.test(t.string())?v.ie===8?2:1:0,rt.css({coordsize:o[0]+s+" "+o[1]+s,antialias:""+(e.string().indexOf(l)>-1),left:g[0]-g[2]*Number(et===w),top:g[1]-g[2]*Number(et===y),width:o[0]+s,height:o[1]+s}).each(function(n){var t=r(this);t[t.prop?"prop":"attr"]({coordsize:o[0]+s+" "+o[1]+s,path:c,fillcolor:a[0],filled:!!n,stroked:!n}).toggle(!!(s||n));n||t.html(ci("stroke",'weight="'+s*2+'px" color="'+a[1]+'" miterlimit="1000" joinstyle="miter"'))}));n.opera&&setTimeout(function(){ct.tip.css({display:"inline-block",visibility:"visible"})},1);i!==u&&this.calculate(t,o)},calculate:function(n,t){if(!this.enabled)return u;var e=this,s=this.qtip.elements,c=this.element,h=this.options.offset,i={},f,o;return n=n||this.corner,f=n.precedance,t=t||this._calculateSize(n),o=[n.x,n.y],f===w&&o.reverse(),r.each(o,function(r,u){var o,a,c;u===l?(o=f===y?p:b,i[o]="50%",i[li+"-"+o]=-Math.round(t[f===y?0:1]/2)+h):(o=e._parseWidth(n,u,s.tooltip),a=e._parseWidth(n,u,s.content),c=e._parseRadius(n),i[u]=Math.max(-e.border,r?a:h+(c>o?c:-o)))}),i[n[f]]-=t[f===w?0:1],c.css({margin:"",top:"",bottom:"",left:"",right:""}).css(i),i},reposition:function(n,t,r){function it(n,t,i,r,u){n===ft&&s.precedance===t&&h[r]&&s[i]!==l?s.precedance=s.precedance===w?y:w:n!==ft&&h[r]&&(s[t]=s[t]===l?h[r]>0?r:u:s[t]===r?u:r)}function rt(n,t,f){s[n]===l?nt[li+"-"+t]=o[n]=e[li+"-"+t]-h[t]:(a=e[f]!==i?[h[t],-e[t]]:[-h[t],e[t]],(o[n]=Math.max(a[0],a[1]))>a[0]&&(r[t]-=h[t],o[t]=u),nt[e[f]!==i?f:t]=o[n])}if(this.enabled){var c=t.cache,s=this.corner.clone(),h=r.adjusted,v=t.options.position.adjust.method.split(" "),d=v[0],g=v[1]||v[0],o={left:u,top:u,x:0,y:0},e,nt={},a;this.corner.fixed!==f&&(it(d,w,y,p,k),it(g,y,w,b,tt),(s.string()!==c.corner.string()||c.cornerTop!==h.top||c.cornerLeft!==h.left)&&this.update(s,u));e=this.calculate(s);e.right!==i&&(e.left=-e.right);e.bottom!==i&&(e.top=-e.bottom);e.user=this.offset;o.left=d===ft&&!!h.left;o.left&&rt(w,p,k);o.top=g===ft&&!!h.top;o.top&&rt(y,b,tt);this.element.css(nt).toggle(!(o.x&&o.y||s.x===l&&o.y||s.y===l&&o.x));r.left-=e.left.charAt?e.user:d!==ft||o.top||!o.left&&!o.top?e.left+this.border:0;r.top-=e.top.charAt?e.user:g!==ft||o.left||!o.left&&!o.top?e.top+this.border:0;c.cornerLeft=h.left;c.cornerTop=h.top;c.corner=s.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns);this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}});hi=h.tip=function(n){return new er(n,n.options.style.tip)};hi.initialize="render";hi.sanitize=function(n){if(n.style&&"tip"in n.style){var t=n.style.tip;typeof t!="object"&&(t=n.style.tip={corner:t});/string|boolean/i.test(typeof t.corner)||(t.corner=f)}};wt.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create();this.qtip.reposition()},"^style.tip.(height|width)$":function(n){this.size=[n.width,n.height];this.update();this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}};r.extend(f,c.defaults,{style:{tip:{corner:f,mimic:u,width:6,height:6,border:f,offset:0}}});ui="qtip-modal";nt="."+ui;g=function(){function l(n){if(r.expr[":"].focusable)return r.expr[":"].focusable;var e=!isNaN(r.attr(n,"tabindex")),t=n.nodeName&&n.nodeName.toLowerCase(),i,u,f;return"area"===t?(i=n.parentNode,u=i.name,!n.href||!u||i.nodeName.toLowerCase()!=="map")?!1:(f=r("img[usemap=#"+u+"]")[0],!!f&&f.is(":visible")):/input|select|textarea|button|object/.test(t)?!n.disabled:"a"===t?n.href||e:e}function c(n){o.length<1&&n.length?n.not("body").blur():o.first().focus()}function a(t){if(n.is(":visible")){var f=r(t.target),e=i.tooltip,o=f.closest(rt),s;s=o.length<1?u:parseInt(o[0].style.zIndex,10)>parseInt(e[0].style.zIndex,10);s||f.closest(rt)[0]===e[0]||c(f)}}var e=this,o={},i,h,n;r.extend(e,{init:function(){return n=e.elem=r("<div />",{id:"qtip-overlay",html:"<div><\/div>",mousedown:function(){return u}}).hide(),r(t.body).bind("focusin"+nt,a),r(t).bind("keydown"+nt,function(n){i&&i.options.show.modal.escape&&n.keyCode===27&&i.hide(n)}),n.bind("click"+nt,function(n){i&&i.options.show.modal.blur&&i.hide(n)}),e},update:function(n){i=n;o=n.options.show.modal.stealfocus!==u?n.tooltip.find("*").filter(function(){return l(this)}):[]},toggle:function(o,l,a){var p=o.tooltip,v=o.options.show.modal,y=v.effect,w=l?"show":"hide",b=n.is(":visible"),k=r(nt).filter(":visible:not(:animated)").not(p);return(e.update(o),l&&v.stealfocus!==u&&c(r(":focus")),n.toggleClass("blurs",v.blur),l&&n.appendTo(t.body),n.is(":animated")&&b===l&&h!==u||!l&&k.length)?e:(n.stop(f,u),r.isFunction(y)?y.call(n,l):y===u?n[w]():n.fadeTo(parseInt(a,10)||90,l?1:0,function(){l||n.hide()}),l||n.queue(function(t){n.css({left:"",top:""});r(nt).length||n.detach();t()}),h=l,i.destroyed&&(i=s),e)}});e.init()};g=new g;r.extend(or.prototype,{init:function(n){var t=n.tooltip;if(!this.options.on)return this;n.elements.overlay=g.elem;t.addClass(ui).css("z-index",c.modal_zindex+r(nt).length);n._bind(t,["tooltipshow","tooltiphide"],function(n,i,u){var f=n.originalEvent;if(n.target===t[0])if(f&&n.type==="tooltiphide"&&/mouse(leave|enter)/.test(f.type)&&r(f.relatedTarget).closest(g.elem[0]).length)try{n.preventDefault()}catch(e){}else(!f||f&&f.type!=="tooltipsolo")&&this.toggle(n,n.type==="tooltipshow",u)},this._ns,this);n._bind(t,"tooltipfocus",function(n,i){if(!n.isDefaultPrevented()&&n.target===t[0]){var u=r(nt),f=c.modal_zindex+u.length,e=parseInt(t[0].style.zIndex,10);g.elem[0].style.zIndex=f-1;u.each(function(){this.style.zIndex>e&&(this.style.zIndex-=1)});u.filter("."+st).qtip("blur",n.originalEvent);t.addClass(st)[0].style.zIndex=f;g.update(i);try{n.preventDefault()}catch(o){}}},this._ns,this);n._bind(t,"tooltiphide",function(n){n.target===t[0]&&r(nt).filter(":visible").not(t).last().qtip("focus",n)},this._ns,this)},toggle:function(n,t,i){if(n&&n.isDefaultPrevented())return this;g.toggle(this.qtip,!!t,i)},destroy:function(){this.qtip.tooltip.removeClass(ui);this.qtip._unbind(this.qtip.tooltip,this._ns);g.toggle(this.qtip,u);delete this.qtip.elements.overlay}});ai=h.modal=function(n){return new or(n,n.options.show.modal)};ai.sanitize=function(n){n.show&&(typeof n.show.modal!="object"?n.show.modal={on:!!n.show.modal}:typeof n.show.modal.on=="undefined"&&(n.show.modal.on=f))};c.modal_zindex=c.zindex-200;ai.initialize="render";wt.modal={"^show.modal.(on|blur)$":function(){this.destroy();this.init();this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}};r.extend(f,c.defaults,{show:{modal:{on:u,effect:f,blur:f,stealfocus:f,escape:f}}});h.viewport=function(i,r,f,e,o,s,h){function wt(n,t,i,u,f,e,o,s,h){var y=r[f],c=a[n],k=kt[n],rt=i===ft,g=c===f?h:c===e?-h:-h/2,ut=k===f?s:k===e?-s:-s/2,tt=lt[f]+it[f]-(pt?0:nt[f]),b=tt-y,w=y+h-(o===d?ht:ct)-tt,p=g-(a.precedance===n||c===a[t]?ut:0)-(k===l?s/2:0);return rt?(p=(c===f?1:-1)*g,r[f]+=b>0?b:w>0?-w:0,r[f]=Math.max(-nt[f]+it[f],y-p,Math.min(Math.max(-nt[f]+it[f]+(o===d?ht:ct),y+p),r[f],c==="center"?y-g:1e9))):(u*=i===lr?2:0,b>0&&(c!==f||w>0)?(r[f]-=p+u,v.invert(n,f)):w>0&&(c!==e||b>0)&&(r[f]-=(c===l?-p:p)+u,v.invert(n,e)),r[f]<lt[f]&&-r[f]>w&&(r[f]=y,v=a.clone())),r[f]-y}var vt=f.target,bt=i.elements.tooltip,a=f.my,kt=f.at,g=f.adjust,rt=g.method.split(" "),ut=rt[0],et=rt[1]||rt[0],c=f.viewport,yt=f.container,ot={left:0,top:0},st,v,nt,pt,ht,ct,lt,it;return!c.jquery||vt[0]===n||vt[0]===t.body||g.method==="none"?ot:(nt=yt.offset()||ot,pt=yt.css("position")==="static",st=bt.css("position")==="fixed",ht=c[0]===n?c.width():c.outerWidth(u),ct=c[0]===n?c.height():c.outerHeight(u),lt={left:st?0:c.scrollLeft(),top:st?0:c.scrollTop()},it=c.offset()||ot,(ut!=="shift"||et!=="shift")&&(v=a.clone()),{left:ut!=="none"?wt(w,y,ut,g.x,p,k,d,e,s):0,top:et!=="none"?wt(y,w,et,g.y,b,tt,at,o,h):0,my:v})};h.polys={polygon:function(n,t){for(var i={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:u},f=0,r,e=[],o=1,s=1,a=0,v=0,h,c,f=n.length;f--;)r=[parseInt(n[--f],10),parseInt(n[f+1],10)],r[0]>i.position.right&&(i.position.right=r[0]),r[0]<i.position.left&&(i.position.left=r[0]),r[1]>i.position.bottom&&(i.position.bottom=r[1]),r[1]<i.position.top&&(i.position.top=r[1]),e.push(r);if(h=i.width=Math.abs(i.position.right-i.position.left),c=i.height=Math.abs(i.position.bottom-i.position.top),t.abbrev()==="c")i.position={left:i.position.left+i.width/2,top:i.position.top+i.height/2};else{while(h>0&&c>0&&o>0&&s>0)for(h=Math.floor(h/2),c=Math.floor(c/2),t.x===p?o=h:t.x===k?o=i.width-h:o+=Math.floor(h/2),t.y===b?s=c:t.y===tt?s=i.height-c:s+=Math.floor(c/2),f=e.length;f--;){if(e.length<2)break;a=e[f][0]-i.position.left;v=e[f][1]-i.position.top;(t.x===p&&a>=o||t.x===k&&a<=o||t.x===l&&(a<o||a>i.width-o)||t.y===b&&v>=s||t.y===tt&&v<=s||t.y===l&&(v<s||v>i.height-s))&&e.splice(f,1)}i.position={left:e[0][0],top:e[0][1]}}return i},rect:function(n,t,i,r){return{width:Math.abs(i-n),height:Math.abs(r-t),position:{left:Math.min(n,i),top:Math.min(t,r)}}},_angles:{tc:3/2,tr:7/4,tl:5/4,bc:1/2,br:1/4,bl:3/4,rc:2,lc:1,c:0},ellipse:function(n,t,i,r,f){var e=h.polys._angles[f.abbrev()],o=e===0?0:i*Math.cos(e*Math.PI),s=r*Math.sin(e*Math.PI);return{width:i*2-Math.abs(o),height:r*2-Math.abs(s),position:{left:n+o,top:t+s},adjustable:u}},circle:function(n,t,i,r){return h.polys.ellipse(n,t,i,i,r)}};h.svg=function(n,i,f){for(var e=i[0],a=r(e.ownerSVGElement),l=e.ownerDocument,b=(parseInt(i.css("stroke-width"),10)||0)/2,v,k,p,d,w,y,s,o,c;!e.getBBox;)e=e.parentNode;if(!e.getBBox||!e.parentNode)return u;switch(e.nodeName){case"ellipse":case"circle":o=h.polys.ellipse(e.cx.baseVal.value,e.cy.baseVal.value,(e.rx||e.r).baseVal.value+b,(e.ry||e.r).baseVal.value+b,f);break;case"line":case"polygon":case"polyline":for(s=e.points||[{x:e.x1.baseVal.value,y:e.y1.baseVal.value},{x:e.x2.baseVal.value,y:e.y2.baseVal.value}],o=[],y=-1,d=s.numberOfItems||s.length;++y<d;)w=s.getItem?s.getItem(y):s[y],o.push.apply(o,[w.x,w.y]);o=h.polys.polygon(o,f);break;default:o=e.getBBox();o={width:o.width,height:o.height,position:{left:o.x,top:o.y}}}return c=o.position,a=a[0],a.createSVGPoint&&(k=e.getScreenCTM(),s=a.createSVGPoint(),s.x=c.left,s.y=c.top,p=s.matrixTransform(k),c.left=p.x,c.top=p.y),l!==t&&n.position.target!=="mouse"&&(v=r((l.defaultView||l.parentWindow).frameElement).offset(),v&&(c.left+=v.left,c.top+=v.top)),l=r(l),c.left+=l.scrollLeft(),c.top+=l.scrollTop(),o};h.imagemap=function(n,t,i){t.jquery||(t=r(t));var s=(t.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),f=r('img[usemap="#'+t.parent("map").attr("name")+'"]'),y=r.trim(t.attr("coords")),c=y.replace(/,$/,"").split(","),e,l,a,o,v;if(!f.length)return u;if(s==="polygon")o=h.polys.polygon(c,i);else if(h.polys[s]){for(a=-1,v=c.length,l=[];++a<v;)l.push(parseInt(c[a],10));o=h.polys[s].apply(this,l.concat(i))}else return u;return e=f.offset(),e.left+=Math.ceil((f.outerWidth(u)-f.width())/2),e.top+=Math.ceil((f.outerHeight(u)-f.height())/2),o.position.left+=e.left,o.position.top+=e.top,o};hr='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"><\/iframe>';r.extend(cr.prototype,{_scroll:function(){var t=this.qtip.elements.overlay;t&&(t[0].style.top=r(n).scrollTop()+"px")},init:function(i){var u=i.tooltip;r("select, object").length<1&&(this.bgiframe=i.elements.bgiframe=r(hr).appendTo(u),i._bind(u,"tooltipmove",this.adjustBGIFrame,this._ns,this));this.redrawContainer=r("<div/>",{id:o+"-rcontainer"}).appendTo(t.body);i.elements.overlay&&i.elements.overlay.addClass("qtipmodal-ie6fix")&&(i._bind(n,["scroll","resize"],this._scroll,this._ns,this),i._bind(u,["tooltipshow"],this._scroll,this._ns,this));this.redraw()},adjustBGIFrame:function(){var t=this.qtip.tooltip,e={height:t.outerHeight(u),width:t.outerWidth(u)},r=this.qtip.plugins.tip,f=this.qtip.elements.tip,i,n;n=parseInt(t.css("borderLeftWidth"),10)||0;n={left:-n,top:-n};r&&f&&(i=r.corner.precedance==="x"?[d,p]:[at,b],n[i[1]]-=f[i[0]]());this.bgiframe.css(n).css(e)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var t=this.qtip.tooltip,u=this.qtip.options.style,e=this.qtip.options.position.container,f,n,i,r;return this.qtip.drawing=1,u.height&&t.css(at,u.height),u.width?t.css(d,u.width):(t.css(d,"").appendTo(this.redrawContainer),n=t.width(),n%2<1&&(n+=1),i=t.css("maxWidth")||"",r=t.css("minWidth")||"",f=(i+r).indexOf("%")>-1?e.width()/100:0,i=(i.indexOf("%")>-1?f:1*parseInt(i,10))||n,r=(r.indexOf("%")>-1?f:1*parseInt(r,10))||0,n=i+r?Math.min(Math.max(n,r),i):n,t.css(d,Math.round(n)).appendTo(e)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove();this.qtip._unbind([n,this.qtip.tooltip],this._ns)}});sr=h.ie6=function(n){return v.ie===6?new cr(n):u};sr.initialize="render";wt.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),function(n){n.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var t=this,r,i,u;this.element.is("input")?(this.tagList=n("<ul><\/ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last();this.tagInput=n('<input type="text" />').addClass("ui-widget-content");this.options.readOnly&&this.tagInput.attr("disabled","disabled");this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex);this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText);this.options.autocomplete.source||(this.options.autocomplete.source=function(t,i){var u=t.term.toLowerCase(),r=n.grep(this.options.availableTags,function(n){return 0===n.toLowerCase().indexOf(u)});this.options.allowDuplicates||(r=this._subtractArray(r,this.assignedTags()));i(r)});this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(){t._showAutocomplete()}),"undefined"==typeof this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0));n.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=n.proxy(this.options.autocomplete.source,this));n.isFunction(this.options.tagSource)&&(this.options.tagSource=n.proxy(this.options.tagSource,this));this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(n('<li class="tagit-new"><\/li>').append(this.tagInput)).click(function(i){var r=n(i.target);r.hasClass("tagit-label")?(r=r.closest(".tagit-choice"),r.hasClass("removed")||t._trigger("onTagClicked",i,{tag:r,tagLabel:t.tagLabel(r)})):t.tagInput.focus()});r=!1;this.options.singleField&&(this.options.singleFieldNode?(i=n(this.options.singleFieldNode),u=i.val().split(this.options.singleFieldDelimiter),i.val(""),n.each(u,function(n,i){t.createTag(i,null,!0);r=!0})):(this.options.singleFieldNode=n('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode)));r||this.tagList.children("li").each(function(){n(this).hasClass("tagit-new")||(t.createTag(n(this).text(),n(this).attr("class"),!0),n(this).remove())});this.tagInput.keydown(function(i){if(i.which==n.ui.keyCode.BACKSPACE&&""===t.tagInput.val()){var r=t._lastTag();!t.options.removeConfirmation||r.hasClass("remove")?t.removeTag(r):t.options.removeConfirmation&&r.addClass("remove ui-state-highlight")}else t.options.removeConfirmation&&t._lastTag().removeClass("remove ui-state-highlight");(i.which===n.ui.keyCode.COMMA&&!1===i.shiftKey||i.which===n.ui.keyCode.ENTER||i.which==n.ui.keyCode.TAB&&""!==t.tagInput.val()||i.which==n.ui.keyCode.SPACE&&!0!==t.options.allowSpaces&&('"'!=n.trim(t.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==n.trim(t.tagInput.val()).charAt(0)&&'"'==n.trim(t.tagInput.val()).charAt(n.trim(t.tagInput.val()).length-1)&&0!=n.trim(t.tagInput.val()).length-1))&&(i.which===n.ui.keyCode.ENTER&&""===t.tagInput.val()||i.preventDefault(),t.options.autocomplete.autoFocus&&t.tagInput.data("autocomplete-open")||(t.tagInput.autocomplete("close"),t.createTag(t._cleanedInput())))}).blur(function(){t.tagInput.data("autocomplete-open")||t.createTag(t._cleanedInput())});(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)&&(i={select:function(n,i){return t.createTag(i.item.value),!1}},n.extend(i,this.options.autocomplete),i.source=this.options.tagSource||i.source,this.tagInput.autocomplete(i).bind("autocompleteopen.tagit",function(){t.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tagit",function(){t.tagInput.data("autocomplete-open",!1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete"))},destroy:function(){return n.Widget.prototype.destroy.call(this),this.element.unbind(".tagit"),this.tagList.unbind(".tagit"),this.tagInput.removeData("autocomplete-open"),this.tagList.removeClass("tagit ui-widget ui-widget-content ui-corner-all tagit-hidden-field"),this.element.is("input")?(this.element.removeClass("tagit-hidden-field"),this.tagList.remove()):(this.element.children("li").each(function(){n(this).hasClass("tagit-new")?n(this).remove():(n(this).removeClass("tagit-choice ui-widget-content ui-state-default ui-state-highlight ui-corner-all remove tagit-choice-editable tagit-choice-read-only"),n(this).text(n(this).children(".tagit-label").text()))}),this.singleFieldNode&&this.singleFieldNode.remove()),this},_cleanedInput:function(){return n.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var i=this,t=[];return this.options.singleField?(t=n(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===t[0]&&(t=[])):this._tags().each(function(){t.push(i.tagLabel(this))}),t},_updateSingleTagsField:function(t){n(this.options.singleFieldNode).val(t.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(t,i){for(var u=[],r=0;r<t.length;r++)-1==n.inArray(t[r],i)&&u.push(t[r]);return u},tagLabel:function(t){return this.options.singleField?n(t).find(".tagit-label:first").text():n(t).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(t){var i=this,r=null;return this._tags().each(function(){if(i._formatStr(t)==i._formatStr(i.tagLabel(this)))return r=n(this),!1}),r},_isNew:function(n){return!this._findTagByLabel(n)},_formatStr:function(t){return this.options.caseSensitive?t:n.trim(t.toLowerCase())},_effectExists:function(t){return Boolean(n.effects&&(n.effects[t]||n.effects.effect&&n.effects.effect[t]))},createTag:function(t,i,r){var e=this,f,u;if(t=n.trim(t),this.options.preprocessTag&&(t=this.options.preprocessTag(t)),""===t)return!1;if(!this.options.allowDuplicates&&!this._isNew(t))return t=this._findTagByLabel(t),!1!==this._trigger("onTagExists",null,{existingTag:t,duringInitialization:r})&&this._effectExists("highlight")&&t.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:r}),!1;f=n(this.options.onTagClicked?'<a class="tagit-label"><\/a>':'<span class="tagit-label"><\/span>').text(t);u=n("<li><\/li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(i).append(f);this.options.readOnly?u.addClass("tagit-choice-read-only"):(u.addClass("tagit-choice-editable"),i=n("<span><\/span>").addClass("ui-icon ui-icon-close"),i=n('<a><span class="text-icon">×<\/span><\/a>').addClass("tagit-close").append(i).click(function(){e.removeTag(u)}),u.append(i));this.options.singleField||(f=f.html(),u.append('<input type="hidden" value="'+f+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />'));!1!==this._trigger("beforeTagAdded",null,{tag:u,tagLabel:this.tagLabel(u),duringInitialization:r})&&(this.options.singleField&&(f=this.assignedTags(),f.push(t),this._updateSingleTagsField(f)),this._trigger("onTagAdded",null,u),this.tagInput.val(""),this.tagInput.parent().before(u),this._trigger("afterTagAdded",null,{tag:u,tagLabel:this.tagLabel(u),duringInitialization:r}),this.options.showAutocompleteOnFocus&&!r&&setTimeout(function(){e._showAutocomplete()},0))},removeTag:function(t,i){var r,u;if(i="undefined"==typeof i?this.options.animate:i,t=n(t),this._trigger("onTagRemoved",null,t),!1!==this._trigger("beforeTagRemoved",null,{tag:t,tagLabel:this.tagLabel(t)})){if(this.options.singleField){var r=this.assignedTags(),f=this.tagLabel(t),r=n.grep(r,function(n){return n!=f});this._updateSingleTagsField(r)}i?(t.addClass("removed"),r=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],u=this,r.push(function(){t.remove();u._trigger("afterTagRemoved",null,{tag:t,tagLabel:u.tagLabel(t)})}),t.fadeOut("fast").hide.apply(t,r).dequeue()):(t.remove(),this._trigger("afterTagRemoved",null,{tag:t,tagLabel:this.tagLabel(t)}))}},removeTagByLabel:function(n,t){var i=this._findTagByLabel(n);if(!i)throw"No such tag exists with the name '"+n+"'";this.removeTag(i,t)},removeAll:function(){var n=this;this._tags().each(function(t,i){n.removeTag(i,!1)})}})}(jQuery);!function(){"use strict";function ip(){var n=[];return function t(i,r){return n.push(i+" ")>b.cacheLength&&delete t[n.shift()],t[i+" "]=r}}function yi(n){return n[ft]=!0,n}function iit(n,t){var i=t&&n,r=i&&1===n.nodeType&&1===t.nodeType&&(~t.sourceIndex||-2147483648)-(~n.sourceIndex||-2147483648);if(r)return r;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return n?1:-1}function cgt(n){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===n}}function lgt(n){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===n}}function tf(n){return yi(function(t){return t=+t,yi(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function rp(n){return n&&typeof n.getElementsByTagName!==ec&&n}function rit(){}function hc(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function up(n,t,i){var r=t.dir,u=i&&"parentNode"===r,f=kdt++;return t.first?function(t,i,f){for(;t=t[r];)if(1===t.nodeType||u)return n(t,i,f)}:function(t,i,e){var o,s,h=[di,f];if(e){for(;t=t[r];)if((1===t.nodeType||u)&&n(t,i,e))return!0}else for(;t=t[r];)if(1===t.nodeType||u){if((o=(s=t[ft]||(t[ft]={}))[r])&&o[0]===di&&o[1]===f)return h[2]=o[2];if((s[r]=h)[2]=n(t,i,e))return!0}}}function fp(n){return 1<n.length?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function cc(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=null!=t;f<s;f++)(e=n[f])&&(i&&!i(e,r,u)||(o.push(e),h&&t.push(f)));return o}function ep(n,t,i,r,u,f){return r&&!r[ft]&&(r=ep(r)),u&&!u[ft]&&(u=ep(u,f)),yi(function(f,e,o,s){var l,c,a,w=[],p=[],b=e.length,k=f||function(n,t,i){for(var r=0,u=t.length;r<u;r++)v(n,t[r],i);return i}(t||"*",o.nodeType?[o]:o,[]),y=!n||!f&&t?k:cc(k,w,n,o,s),h=i?u||(f?n:b||r)?[]:e:y;if(i&&i(y,h,o,s),r)for(l=cc(h,p),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[p[c]]=!(y[p[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(y[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&-1<(l=u?gu.call(f,a):w[c])&&(f[l]=!(e[l]=a))}}else h=cc(h===e?h.splice(b,h.length):h),u?u(null,e,h,s):kr.apply(e,h)})}function op(n){for(var e,r,i,f=n.length,o=b.relative[n[0].type],s=o||b.relative[" "],t=o?1:0,h=up(function(n){return n===e},s,!0),c=up(function(n){return-1<gu.call(e,n)},s,!0),u=[function(n,t,i){return!o&&(i||t!==tc)||((e=t).nodeType?h(n,t,i):c(n,t,i))}];t<f;t++)if(r=b.relative[n[t].type])u=[up(fp(u),r)];else{if((r=b.filter[n[t].type].apply(null,n[t].matches))[ft]){for(i=++t;i<f&&!b.relative[n[i].type];i++);return ep(1<t&&fp(u),1<t&&hc(n.slice(0,t-1).concat({value:" "===n[t-2].type?"*":""})).replace(oc,"$1"),r,t<i&&op(n.slice(t,i)),i<f&&op(n=n.slice(i)),i<f&&hc(n))}u.push(r)}return fp(u)}function et(n,t){var i=n,r=function(n,i,r,u){var e,f;if(n){if(!u&&n[i])return n[i];if(n!==t){if(e=n[r])return e;for(f=n.parentNode;f&&f!==t;f=f.parentNode)if(e=f[r])return e}}};this.current=function(){return i};this.next=function(n){return i=r(i,"firstChild","nextSibling",n)};this.prev=function(n){return i=r(i,"lastChild","previousSibling",n)};this.prev2=function(n){return i=function(n,i,r,u){var e,o,f;if(n){if(e=n[r],t&&e===t)return;if(e){if(!u)for(f=e[i];f;f=f[i])if(!f[i])return f;return e}if((o=n.parentNode)&&o!==t)return o}}(i,"lastChild","previousSibling",n)}}function fu(n){var v,y,o,p,w,s,b,k,u,h,d,c,g,t={},i={},f=[],nt={},tt={},r=function(t,i,r){var u=n[t];return u?u=re(u,/[, ]/,re(u.toUpperCase(),/[, ]/)):(u=uu[t])||(u=re(i," ",re(i.toUpperCase()," ")),u=uw(u,r),uu[t]=u),u};o=iii((n=n||{}).schema);!1===n.verify_html&&(n.valid_elements="*[*]");v=fw(n.valid_styles);y=fw(n.invalid_styles,"map");k=fw(n.valid_classes,"map");p=r("whitespace_elements","pre script noscript style textarea video audio iframe object code");w=r("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr");s=r("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track");b=r("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls");h=r("non_empty_elements","td th iframe video audio object script pre code",s);d=r("move_caret_before_on_enter_elements","table",h);c=r("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure");u=r("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",c);g=r("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");st((n.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(n){tt[n]=new RegExp("<\/"+n+"[^>]*>","gi")});var rt=function(n){return new RegExp("^"+n.replace(/([?+*])/g,".$1")+"$")},e=function(n){var y,g,p,nt,r,i,e,v,h,u,w,c,s,o,b,l,k,d,a,tt=/[*?+]/;if(n)for(n=it(n,","),t["@"]&&(l=t["@"].attributes,k=t["@"].attributesOrder),y=0,g=n.length;y<g;y++)if(r=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/.exec(n[y])){if(o=r[1],h=r[2],b=r[3],v=r[5],i={attributes:c={},attributesOrder:s=[]},"#"===o&&(i.paddEmpty=!0),"-"===o&&(i.removeEmpty=!0),"!"===r[4]&&(i.removeEmptyAttrs=!0),l){for(d in l)c[d]=l[d];s.push.apply(s,k)}if(v)for(p=0,nt=(v=it(v,"|")).length;p<nt;p++)if(r=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/.exec(v[p])){if(e={},w=r[1],u=r[2].replace(/[\\:]:/g,":"),o=r[3],a=r[4],"!"===w&&(i.attributesRequired=i.attributesRequired||[],i.attributesRequired.push(u),e.required=!0),"-"===w){delete c[u];s.splice(tii(s,u),1);continue}o&&("="===o&&(i.attributesDefault=i.attributesDefault||[],i.attributesDefault.push({name:u,value:a}),e.defaultValue=a),":"===o&&(i.attributesForced=i.attributesForced||[],i.attributesForced.push({name:u,value:a}),e.forcedValue=a),"<"===o&&(e.validValues=re(a,"?")));tt.test(u)?(i.attributePatterns=i.attributePatterns||[],e.pattern=rt(u),i.attributePatterns.push(e)):(c[u]||s.push(u),c[u]=e)}l||"@"!==h||(l=c,k=s);b&&(i.outputName=h,t[b]=i);tt.test(h)?(i.pattern=rt(h),f.push(i)):t[h]=i}},ut=function(n){t={};f=[];e(n);st(o,function(n,t){i[t]=n.children})},ft=function(n){var r=/^(~)?(.+)$/;n&&(uu.text_block_elements=uu.block_elements=null,st(it(n,","),function(n){var s=r.exec(n),h="~"===s[1],e=h?"span":"div",f=s[2],o;(i[f]=i[e],nt[f]=e,h||(u[f.toUpperCase()]={},u[f]={}),t[f])||(o=t[e],delete(o=uw({},o)).removeEmptyAttrs,delete o.removeEmpty,t[f]=o);st(i,function(n,t){n[e]&&(i[t]=n=uw({},i[t]),n[f]=n[e])})}))},l=function(t){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;uu[n.schema]=null;t&&st(it(t,","),function(n){var u,f,t=r.exec(n);t&&(f=t[1],u=f?i[t[2]]:i[t[2]]={"#comment":{}},u=i[t[2]],st(it(t[3],"|"),function(n){"-"===f?delete u[n]:u[n]={}}))})},a=function(n){var r,i=t[n];if(i)return i;for(r=f.length;r--;)if((i=f[r]).pattern.test(n))return i};return n.valid_elements?ut(n.valid_elements):(st(o,function(n,r){t[r]={attributes:n.attributes,attributesOrder:n.attributesOrder};i[r]=n.children}),"html5"!==n.schema&&st(it("strong/b em/i"),function(n){n=it(n,"/");t[n[1]].outputName=n[0]}),st(it("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(n){t[n]&&(t[n].removeEmpty=!0)}),st(it("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(n){t[n].paddEmpty=!0}),st(it("span"),function(n){t[n].removeEmptyAttrs=!0})),ft(n.custom_elements),l(n.valid_children),e(n.extended_valid_elements),l("+ol[ul|ol],+ul[ul|ol]"),st({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(n,i){t[i]&&(t[i].parentsRequired=it(n))}),n.invalid_elements&&st(sft(n.invalid_elements),function(n){t[n]&&delete t[n]}),a("span")||e("span[!data-mce-type|*]"),{children:i,elements:t,getValidStyles:function(){return v},getValidClasses:function(){return k},getBlockElements:function(){return u},getInvalidStyles:function(){return y},getShortEndedElements:function(){return s},getTextBlockElements:function(){return c},getTextInlineElements:function(){return g},getBoolAttrs:function(){return b},getElementRule:a,getSelfClosingElements:function(){return w},getNonEmptyElements:function(){return h},getMoveCaretBeforeOnEnterElements:function(){return d},getWhiteSpaceElements:function(){return p},getSpecialElements:function(){return tt},isValidChild:function(n,t){var r=i[n.toLowerCase()];return!(!r||!r[t.toLowerCase()])},isValid:function(n,t){var i,r,u=a(n);if(u){if(!t||u.attributes[t])return!0;if(i=u.attributePatterns)for(r=i.length;r--;)if(i[r].pattern.test(n))return!0}return!1},getCustomElements:function(){return nt},addValidElements:e,setValidElements:ut,addCustomElements:ft,addValidChildren:l}}function ow(n,t){var i,r,o,u,s=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,l=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,h=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,f={},e="﻿";for(n=n||{},t&&(o=t.getValidStyles(),u=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+e).split(" "),i=0;i<r.length;i++)f[r[i]]=e+i,f[e+i]=r[i];return{toHex:function(n){return n.replace(s,ew)},parse:function(t){var v,o,u,w,g,b,y,p,r={},nt=n.url_converter,rt=n.url_converter_scope||this,a=function(n,t,u){var e,o,s,h,f;if((e=r[n+"-top"+t])&&(o=r[n+"-right"+t])&&(s=r[n+"-bottom"+t])&&(h=r[n+"-left"+t])){for(f=[e,o,s,h],i=f.length-1;i--&&f[i]===f[i+1];);-1<i&&u||(r[n+t]=-1===i?f[0]:f.join(" "),delete r[n+"-top"+t],delete r[n+"-right"+t],delete r[n+"-bottom"+t],delete r[n+"-left"+t])}},k=function(n){var i,t=r[n];if(t){for(i=(t=t.split(" ")).length;i--;)if(t[i]!==t[0])return!1;return r[n]=t[0],!0}},tt=function(n){return w=!0,f[n]},d=function(n,t){return w&&(n=n.replace(/\uFEFF[0-9]/g,function(n){return f[n]})),t||(n=n.replace(/\\([\'\";:])/g,"$1")),n},ut=function(n){return String.fromCharCode(parseInt(n.slice(1),16))},it=function(n){return n.replace(/\\[0-9a-f]+/gi,ut)},ft=function(t,i,r,u,f,e){if(f=f||e)return"'"+(f=d(f)).replace(/\'/g,"\\'")+"'";if(i=d(i||r||u),!n.allow_script_urls){var o=i.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(o)||!n.allow_svg_data_urls&&/^data:image\/svg/i.test(o))return""}return nt&&(i=nt.call(rt,i,"style")),"url('"+i.replace(/\'/g,"\\'")+"')"};if(t){for(t=(t=t.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,tt).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(n){return n.replace(/[;:]/g,tt)});v=h.exec(t);)if(h.lastIndex=v.index+v[0].length,o=v[1].replace(c,"").toLowerCase(),u=v[2].replace(c,""),o&&u){if(o=it(o),u=it(u),-1!==o.indexOf(e)||-1!==o.indexOf('"'))continue;if(!n.allow_script_urls&&("behavior"===o||/expression\s*\(|\/\*|\*\//.test(u)))continue;"font-weight"===o&&"700"===u?u="bold":"color"!==o&&"background-color"!==o||(u=u.toLowerCase());u=(u=u.replace(s,ew)).replace(l,ft);r[o]=w?d(u,!0):u}a("border","",!0);a("border","-width");a("border","-color");a("border","-style");a("padding","");a("margin","");g="border";y="border-style";p="border-color";k(b="border-width")&&k(y)&&k(p)&&(r[g]=r[b]+" "+r[y]+" "+r[p],delete r[b],delete r[y],delete r[p]);"medium none"===r.border&&delete r.border;"none"===r["border-image"]&&delete r["border-image"]}return r},serialize:function(n,t){var f,s,e,h,i,r="",c=function(t){var u,i,f,e;if(u=o[t])for(i=0,f=u.length;i<f;i++)t=u[i],(e=n[t])&&(r+=(0<r.length?" ":"")+t+": "+e+";")};if(t&&o)c("*"),c(t);else for(f in n)(s=n[f])&&(!u||!(e=f,h=t,i=void 0,(i=u["*"])&&i[e]||(i=u[h])&&i[e]))&&(r+=(0<r.length?" ":"")+f+": "+s+";");return r}}}function ee(n,f){var nt,fi=this;void 0===f&&(f={});var ht={},b=window,tt={},ei=0,oi=function(n,r){var e,c=0,f={};e=(r=r||{}).maxLoadTime||5e3;var o=function(t){n.getElementsByTagName("head")[0].appendChild(t)},s=function(t,r,u){var h,l,p,s,a=function(){for(var n=s.passed,t=n.length;t--;)n[t]();s.status=2;s.passed=[];s.failed=[]},v=function(){for(var n=s.failed,t=n.length;t--;)n[t]();s.status=3;s.passed=[];s.failed=[]},w=function(n,t){n()||((new Date).getTime()-p<e?bt.setTimeout(t):v())},y=function(){w(function(){for(var t,i,r=n.styleSheets,u=r.length;u--;)if((i=(t=r[u]).ownerNode?t.ownerNode:t.owningElement)&&i.id===h.id)return a(),!0},y)},b=function(){w(function(){try{var n=l.sheet.cssRules;return a(),!!n}catch(t){}},b)},k;if(t=i._addCacheSuffix(t),f[t]?s=f[t]:(s={passed:[],failed:[]},f[t]=s),r&&s.passed.push(r),u&&s.failed.push(u),1!==s.status)if(2!==s.status)if(3!==s.status){if(s.status=1,(h=n.createElement("link")).rel="stylesheet",h.type="text/css",h.id="u"+c++,h.async=!1,h.defer=!1,p=(new Date).getTime(),"onload"in h&&!((k=navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(k[1],10)<536))h.onload=y,h.onerror=v;else{if(0<navigator.userAgent.indexOf("Firefox"))return(l=n.createElement("style")).textContent='@import "'+t+'"',b(),void o(l);y()}o(h);h.href=t}else v();else a()},l=function(n){return yut.nu(function(i){s(n,t.compose(i,t.constant(wut.value(n))),t.compose(i,t.constant(wut.error(n))))})},h=function(n){return n.fold(t.identity,t.identity)};return{load:s,loadAll:function(n,t,i){oti.par(u.map(n,l)).get(function(n){var r=u.partition(n,function(n){return n.isValue()});0<r.fail.length?i(r.fail.map(h)):t(r.pass.map(h))})}}}(n),c=[],y=f.schema?f.schema:fu({}),a=ow({url_converter:f.url_converter,url_converter_scope:f.url_converter_scope},f.schema),p=f.ownEvents?new ur(f.proxy):ur.Event,ct=y.getBlockElements(),lt=o.overrideDefaults(function(){return{context:n,element:l.getRoot()}}),h=function(t){if(t&&n&&"string"==typeof t){var i=n.getElementById(t);return i&&i.id!==t?n.getElementsByName(t)[1]:i}return t},e=function(n){return"string"==typeof n&&(n=h(n)),lt(n)},it=function(n,t,i){var u,r,f=e(n);return f.length&&(r=(u=nt[t])&&u.get?u.get(f,t):f.attr(t)),void 0===r&&(r=i||""),r},k=function(n){var t=h(n);return t?t.attributes:[]},d=function(n,t,i){var o,u,r;""===i&&(i=null);r=e(n);o=r.attr(t);r.length&&((u=nt[t])&&u.set?u.set(r,i,t):r.attr(t,i),o!==i&&f.onSetAttrib&&f.onSetAttrib({attrElm:r,attrName:t,attrValue:i}))},g=function(){return f.root_element||n.body},at=function(t,i){return rti.getPos(n.body,h(t),i)},rt=function(n,t,i){var r=e(n);return i?r.css(t):("float"===(t=t.replace(/-(\D)/g,function(n,t){return t.toUpperCase()}))&&(t=s.ie&&s.ie<12?"styleFloat":"cssFloat"),r[0]&&r[0].style?r[0].style[t]:undefined)},vt=function(n){var t,i;return n=h(n),t=rt(n,"width"),i=rt(n,"height"),-1===t.indexOf("px")&&(t=0),-1===i.indexOf("px")&&(i=0),{w:parseInt(t,10)||n.offsetWidth||n.clientWidth,h:parseInt(i,10)||n.offsetHeight||n.clientHeight}},ut=function(n,t){var i,u,f,r;if(!n)return!1;if(!Array.isArray(n)){if("*"===t)return 1===n.nodeType;if(uii.test(t)){for(u=t.toLowerCase().split(/,/),f=n.nodeName.toLowerCase(),i=u.length-1;0<=i;i--)if(u[i]===f)return!0;return!1}if(n.nodeType&&1!==n.nodeType)return!1}return r=Array.isArray(n)?n:[n],0<v(t,r[0].ownerDocument||r[0],null,r).length},yt=function(n,t,r,u){var e,o=[],f=h(n);for(u=u===undefined,r=r||("BODY"!==g().nodeName?g().parentNode:null),i.is(t,"string")&&(t="*"===(e=t)?function(n){return 1===n.nodeType}:function(n){return ut(n,e)});f&&f!==r&&f.nodeType&&9!==f.nodeType;){if(!t||"function"==typeof t&&t(f)){if(!u)return[f];o.push(f)}f=f.parentNode}return u?o:null},pt=function(n,t,i){var r=t;if(n)for("string"==typeof t&&(r=function(n){return ut(n,t)}),n=n[i];n;n=n[i])if("function"==typeof r&&r(n))return n;return null},w=function(n,t,r){var f,u="string"==typeof n?h(n):n,e;return u?i.isArray(u)&&(u.length||0===u.length)?(f=[],ue(u,function(n,i){n&&("string"==typeof n&&(n=h(n)),f.push(t.call(r,n,i)))}),f):(e=r||fi,t.call(e,u)):!1},wt=function(n,t){e(n).each(function(n,i){ue(t,function(n,t){d(i,t,n)})})},kt=function(n,t){var i=e(n);hft?i.each(function(n,i){if(!1!==i.canHaveHTML){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t;i.removeChild(i.firstChild)}catch(r){o("<div><\/div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t}}):i.html(t)},dt=function(t,i,r,u,f){return w(t,function(t){var e="string"==typeof i?n.createElement(i):i;return wt(e,r),u&&("string"!=typeof u&&u.nodeType?e.appendChild(u):"string"==typeof u&&kt(e,u)),f?e:t.appendChild(e)})},ft=function(t,i,r){return dt(n.createElement(t),t,i,r,!0)},si=uf.decode,gt=uf.encodeAllRaw,ot=function(n,t){var i=e(n);return t?i.each(function(){for(var n;n=this.firstChild;)3===n.nodeType&&0===n.data.length?this.removeChild(n):this.parentNode.insertBefore(n,this)}).remove():i.remove(),1<i.length?i.toArray():i[0]},ni=function(n,t,i){e(n).toggleClass(t,i).each(function(){""===this.className&&o(this).attr("class",null)})},ti=function(n,t,r){return w(t,function(t){return i.is(t,"array")&&(n=n.cloneNode(!0)),r&&ue(rii(t.childNodes),function(t){n.appendChild(t)}),t.parentNode.replaceChild(n,t)})},st=function(){return n.createRange()},ii=function(t,r,u,e){if(i.isArray(t)){for(var o=t.length;o--;)t[o]=ii(t[o],r,u,e);return t}return!f.collect||t!==n&&t!==b||c.push([t,r,u,e]),p.bind(t,r,u,e||l)},ri=function(t,r,u){var f,e;if(i.isArray(t)){for(f=t.length;f--;)t[f]=ri(t[f],r,u);return t}if(c&&(t===n||t===b))for(f=c.length;f--;)e=c[f],t!==e[0]||r&&r!==e[1]||u&&u!==e[2]||p.unbind(e[0],e[1],e[2]);return p.unbind(t,r,u)},ui=function(n){if(n&&r.isElement(n)){var t=n.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==n.contentEditable?n.contentEditable:null}return null},l={doc:n,settings:f,win:b,files:tt,stdMode:!0,boxModel:!0,styleSheetLoader:oi,boundEvents:c,styles:a,schema:y,events:p,isBlock:function(n){if("string"==typeof n)return!!ct[n];if(n){var t=n.nodeType;if(t)return!(1!==t||!ct[n.nodeName])}return!1},$:lt,$$:e,root:null,clone:function(t,i){if(!hft||1!==t.nodeType||i)return t.cloneNode(i);if(!i){var r=n.createElement(t.nodeName);return ue(k(t),function(n){d(r,n.nodeName,it(t,n.nodeName))}),r}return null},getRoot:g,getViewPort:function(n){var t=n||b,r=t.document,i=r.documentElement;return{x:t.pageXOffset||i.scrollLeft,y:t.pageYOffset||i.scrollTop,w:t.innerWidth||i.clientWidth,h:t.innerHeight||i.clientHeight}},getRect:function(n){var t,i;return n=h(n),t=at(n),i=vt(n),{x:t.x,y:t.y,w:i.w,h:i.h}},getSize:vt,getParent:function(n,t,i){var r=yt(n,t,i,!1);return r&&0<r.length?r[0]:null},getParents:yt,get:h,getNext:function(n,t){return pt(n,t,"nextSibling")},getPrev:function(n,t){return pt(n,t,"previousSibling")},select:function(t,i){return v(t,h(i)||f.root_element||n,[])},is:ut,add:dt,create:ft,createHTML:function(n,t,i){var r,u="";for(r in u+="<"+n,t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(u+=" "+r+'="'+gt(t[r])+'"');return void 0!==i?u+">"+i+"<\/"+n+">":u+" />"},createFragment:function(t){var i,r=n.createElement("div"),u=n.createDocumentFragment();for(t&&(r.innerHTML=t);i=r.firstChild;)u.appendChild(i);return u},remove:ot,setStyle:function(n,t,i){var r=e(n).css(t,i);f.update_styles&&lft(a,r)},getStyle:rt,setStyles:function(n,t){var i=e(n).css(t);f.update_styles&&lft(a,i)},removeAllAttribs:function(n){return w(n,function(n){for(var i=n.attributes,t=i.length-1;0<=t;t--)n.removeAttributeNode(i.item(t))})},setAttrib:d,setAttribs:wt,getAttrib:it,getPos:at,parseStyle:function(n){return a.parse(n)},serializeStyle:function(n,t){return a.serialize(n,t)},addStyle:function(t){var r,i;if(l!==ee.DOM&&n===document){if(ht[t])return;ht[t]=!0}(i=n.getElementById("mceDefaultStyles"))||((i=n.createElement("style")).id="mceDefaultStyles",i.type="text/css",(r=n.getElementsByTagName("head")[0]).firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i));i.styleSheet?i.styleSheet.cssText+=t:i.appendChild(n.createTextNode(t))},loadCSS:function(t){var r;l===ee.DOM||n!==document?(t||(t=""),r=n.getElementsByTagName("head")[0],ue(t.split(","),function(n){var t;n=i._addCacheSuffix(n);tt[n]||(tt[n]=!0,t=ft("link",{rel:"stylesheet",href:n}),r.appendChild(t))})):ee.DOM.loadCSS(t)},addClass:function(n,t){e(n).addClass(t)},removeClass:function(n,t){ni(n,t,!1)},hasClass:function(n,t){return e(n).hasClass(t)},toggleClass:ni,show:function(n){e(n).show()},hide:function(n){e(n).hide()},isHidden:function(n){return"none"===e(n).css("display")},uniqueId:function(n){return(n||"mce_")+ei++},setHTML:kt,getOuterHTML:function(n){var t="string"==typeof n?h(n):n;return r.isElement(t)?t.outerHTML:o("<div><\/div>").append(o(t).clone()).html()},setOuterHTML:function(n,t){e(n).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(n){}ot(o(this).html(t),!0)})},decode:si,encode:gt,insertAfter:function(n,t){var i=h(t);return w(n,function(n){var t,r;return t=i.parentNode,(r=i.nextSibling)?t.insertBefore(n,r):t.appendChild(n),n})},replace:ti,rename:function(n,t){var i;return n.nodeName!==t.toUpperCase()&&(i=ft(t),ue(k(n),function(t){d(i,t.nodeName,it(n,t.nodeName))}),ti(i,n,!0)),i||n},findCommonAncestor:function(n,t){for(var r,i=n;i;){for(r=t;r&&i!==r;)r=r.parentNode;if(i===r)break;i=i.parentNode}return!i&&n.ownerDocument?n.ownerDocument.documentElement:i},toHex:function(n){return a.toHex(i.trim(n))},run:w,getAttribs:k,isEmpty:function(n,t){var e,s,u,h,f,i,c=0,o;if(n=n.firstChild){f=new et(n,n.parentNode);t=t||(y?y.getNonEmptyElements():null);h=y?y.getWhiteSpaceElements():{};do{if(u=n.nodeType,r.isElement(n)){if(o=n.getAttribute("data-mce-bogus"),o){n=f.next("all"===o);continue}if(i=n.nodeName.toLowerCase(),t&&t[i]){if("br"===i){c++;n=f.next();continue}return!1}for(e=(s=k(n)).length;e--;)if("name"===(i=s[e].nodeName)||"data-mce-bookmark"===i)return!1}if(8===u||3===u&&!cft.test(n.nodeValue)||3===u&&n.parentNode&&h[n.parentNode.nodeName]&&cft.test(n.nodeValue))return!1;n=f.next()}while(n)}return c<=1},createRng:st,nodeIndex:fe,split:function(n,t,i){var f,e,u,r=st();if(n&&t)return r.setStart(n.parentNode,fe(n)),r.setEnd(t.parentNode,fe(t)),f=r.extractContents(),(r=st()).setStart(t.parentNode,fe(t)+1),r.setEnd(n.parentNode,fe(n)+1),e=r.extractContents(),(u=n.parentNode).insertBefore(fft.trimNode(l,f),n),i?u.insertBefore(i,n):u.insertBefore(t,n),u.insertBefore(fft.trimNode(l,e),n),ot(n),i||t},bind:ii,unbind:ri,fire:function(n,t,i){return p.fire(n,t,i)},getContentEditable:ui,getContentEditableParent:function(n){for(var i=g(),t=null;n&&n!==i&&null===(t=ui(n));n=n.parentNode);return t},destroy:function(){var t,n;if(c)for(t=c.length;t--;)n=c[t],p.unbind(n[0],n[1],n[2]);v.setDocument&&v.setDocument()},isChildOf:function(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1},dumpRng:function(n){return"startContainer: "+n.startContainer.nodeName+", startOffset: "+n.startOffset+", endContainer: "+n.endContainer.nodeName+", endOffset: "+n.endOffset}};return nt=fii(a,f,function(){return l}),l}function yt(){var h=this,r=[],t={},n={},i=[],f=function(t){var i;return n[t]&&(i=n[t].dependencies),i||[]},e=function(n,t){return"object"==typeof t?t:"string"==typeof n?{prefix:"",resource:t,suffix:""}:{prefix:n.prefix,resource:t,suffix:n.suffix}},o=function(n,t,i){var r=f(name);el(r,function(t){var i=e(n,t);s(i.resource,i,undefined,undefined)});t&&(i?t.call(i):t.call(or))},s=function(i,r,u,f,e){if(!t[i]){var s="string"==typeof r?r:r.prefix+r.resource+r.suffix;0!==s.indexOf("/")&&-1===s.indexOf("://")&&(s=yt.baseURL+"/"+s);t[i]=s.substring(0,s.lastIndexOf("/"));n[i]?o(r,u,f):or.ScriptLoader.add(s,function(){return o(r,u,f)},f,e)}};return{items:r,urls:t,lookup:n,_listeners:i,get:function(t){return n[t]?n[t].instance:undefined},dependencies:f,requireLangPack:function(n,i){var r=yt.language;if(r&&!1!==yt.languageLoad){if(i)if(-1!==(i=","+i+",").indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1===i.indexOf(","+r+","))return;or.ScriptLoader.add(t[n]+"/langs/"+r+".js")}},add:function(t,f,e){r.push(f);n[t]={instance:f,dependencies:e};var o=u.partition(i,function(n){return n.name===t});return i=o.fail,el(o.pass,function(n){n.callback()}),f},remove:function(i){delete t[i];delete n[i]},createUrl:e,addComponents:function(n,t){var i=h.urls[n];el(t,function(n){or.ScriptLoader.add(i+"/"+n)})},load:s,waitFor:function(t,r){n.hasOwnProperty(t)?r():i.push({name:t,callback:r})}}}function rt(n,t,i){var r=function(){return i||(i=nri(rt(n,t))),i};return{container:ot.constant(n),offset:ot.constant(t),toRange:function(){var i;return(i=dw(n.ownerDocument)).setStart(n,t),i.setEnd(n,t),i},getClientRects:r,isVisible:function(){return 0<r().length},isAtStart:function(){return ns(n),0===t},isAtEnd:function(){return ns(n)?t>=n.data.length:t>=n.childNodes.length},isEqual:function(i){return i&&n===i.container()&&t===i.offset()},getNode:function(i){return cl(n,i?t-1:t)}}}function tht(n){var i,f,u,r,e,t=[];return i=(n=n||{}).indent,f=nht(n.indent_before||""),u=nht(n.indent_after||""),r=uf.getEncodeFunc(n.entity_encoding||"raw",n.entities),e="html"===n.element_format,{start:function(n,o,s){var h,a,l,c;if(i&&f[n]&&0<t.length&&0<(c=t[t.length-1]).length&&"\n"!==c&&t.push("\n"),t.push("<",n),o)for(h=0,a=o.length;h<a;h++)l=o[h],t.push(" ",l.name,'="',r(l.value,!0),'"');t[t.length]=!s||e?">":" />";s&&i&&u[n]&&0<t.length&&0<(c=t[t.length-1]).length&&"\n"!==c&&t.push("\n")},end:function(n){var r;t.push("<\/",n,">");i&&u[n]&&0<t.length&&0<(r=t[t.length-1]).length&&"\n"!==r&&t.push("\n")},text:function(n,i){0<n.length&&(t[t.length]=i?n:r(n))},cdata:function(n){t.push("<![CDATA[",n,"]\]>")},comment:function(n){t.push("<!--",n,"-->")},pi:function(n,u){u?t.push("<?",n," ",r(u),"?>"):t.push("<?",n,"?>");i&&t.push("\n")},doctype:function(n){t.push("<!DOCTYPE",n,">",i?"\n":"")},reset:function(){t.length=0},getContent:function(){return t.join("").replace(/\n$/,"")}}}function cs(n,t){void 0===t&&(t=fu());var i=tht(n);return(n=n||{}).validate=!("validate"in n)||n.validate,{serialize:function(r){var f,e,u;return e=n.validate,f={3:function(n){i.text(n.value,n.raw)},8:function(n){i.comment(n.value)},7:function(n){i.pi(n.name,n.value)},10:function(n){i.doctype(n.value)},4:function(n){i.cdata(n.value)},11:function(n){if(n=n.firstChild)for(;u(n),n=n.next;);}},i.reset(),u=function(n){var y,a,r,o,c,h,s,l,v,p=f[n.type];if(p)p(n);else{if(y=n.name,a=n.shortEnded,r=n.attributes,e&&r&&1<r.length&&((h=[]).map={},v=t.getElementRule(n.name))){for(s=0,l=v.attributesOrder.length;s<l;s++)(o=v.attributesOrder[s])in r.map&&(c=r.map[o],h.map[o]=c,h.push({name:o,value:c}));for(s=0,l=r.length;s<l;s++)(o=r[s].name)in h.map||(c=r.map[o],h.map[o]=c,h.push({name:o,value:c}));r=h}if(i.start(n.name,r,a),!a){if(n=n.firstChild)for(;u(n),n=n.next;);i.end(y)}}},1!==r.type||n.inner?f[11](r):u(r),i.getContent()}}}function iht(t,i,r,u,f){return t(r,u)?n.some(r):p.isFunction(f)&&f(r)?n.none():i(r,u,f)}function eat(n){var i,t,u,v,f={state:{},exec:{},value:{}},c=n.settings,o;n.on("PreInit",function(){i=n.dom;t=n.selection;c=n.settings;u=n.formatter});var l=function(t){var i;if(!n.quirks.isHidden()&&!n.removed){if(t=t.toLowerCase(),i=f.state[t])return i(t);try{return n.getDoc().queryCommandState(t)}catch(r){}return!1}},h=function(n,t){t=t||"exec";ga(n,function(n,i){ga(i.toLowerCase().split(","),function(i){f[t][i]=n})})},a=function(t,i,r){t=t.toLowerCase();f.value[t]=function(){return i.call(r||n)}};khi(this,{execCommand:function(t,i,r,u){var s,o,e=!1;if(!n.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(t)||u&&u.skip_focus?whi(n):n.focus(),(u=n.fire("BeforeExecCommand",{command:t,ui:i,value:r})).isDefaultPrevented())return!1;if(o=t.toLowerCase(),s=f.exec[o])return s(o,i,r),n.fire("ExecCommand",{command:t,ui:i,value:r}),!0;if(ga(n.plugins,function(u){if(u.execCommand&&u.execCommand(t,i,r))return n.fire("ExecCommand",{command:t,ui:i,value:r}),!(e=!0)}),e)return e;if(n.theme&&n.theme.execCommand&&n.theme.execCommand(t,i,r))return n.fire("ExecCommand",{command:t,ui:i,value:r}),!0;try{e=n.getDoc().execCommand(t,i,r)}catch(h){}return!!e&&(n.fire("ExecCommand",{command:t,ui:i,value:r}),!0)}},queryCommandState:l,queryCommandValue:function(t){var i;if(!n.quirks.isHidden()&&!n.removed){if(t=t.toLowerCase(),i=f.value[t])return i(t);try{return n.getDoc().queryCommandValue(t)}catch(r){}}},queryCommandSupported:function(t){if(t=t.toLowerCase(),f.exec[t])return!0;try{return n.getDoc().queryCommandSupported(t)}catch(i){}return!1},addCommands:h,addCommand:function(t,i,r){t=t.toLowerCase();f.exec[t]=function(t,u,f,e){return i.call(r||n,u,f,e)}},addQueryStateHandler:function(t,i,r){t=t.toLowerCase();f.state[t]=function(){return i.call(r||n)}},addQueryValueHandler:a,hasCustomCommand:function(n){return n=n.toLowerCase(),!!f.exec[n]}});var y=function(t,i,r){return i===undefined&&(i=!1),r===undefined&&(r=null),n.getDoc().execCommand(t,i,r)},p=function(n){return u.match(n)},e=function(t,i){u.toggle(t,i?{value:i}:undefined);n.nodeChanged()},w=function(n){v=t.getBookmark(n)},b=function(){t.moveToBookmark(v)};h({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){n.undoManager.add()},"Cut,Copy,Paste":function(t){var r,u=n.getDoc(),i;try{y(t)}catch(f){r=!0}("paste"!==t||u.queryCommandEnabled(t)||(r=!0),r||!u.queryCommandSupported(t))&&(i=n.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),s.mac&&(i=i.replace(/Ctrl\+/g,"⌘+")),n.notificationManager.open({text:i,type:"error"}))},unlink:function(){if(t.isCollapsed()){var i=n.dom.getParent(n.selection.getStart(),"a");i&&n.dom.remove(i,!0)}else u.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(n){var t=n.substring(7);"full"===t&&(t="justify");ga("left,center,right,justify".split(","),function(n){t!==n&&u.remove("align"+n)});"none"!==t&&e("align"+t)},"InsertUnorderedList,InsertOrderedList":function(n){var r,u;y(n);(r=i.getParent(t.getNode(),"ol,ul"))&&(u=r.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(u.nodeName)&&(w(),i.split(u,r),b()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){e(n)},"ForeColor,HiliteColor":function(n,t,i){e(n,i)},FontName:function(t,i,r){var u,f;f=r;(u=n).formatter.toggle("fontname",{value:vlt(u,f)});u.nodeChanged()},FontSize:function(t,i,r){var u,f;f=r;(u=n).formatter.toggle("fontsize",{value:vlt(u,f)});u.nodeChanged()},RemoveFormat:function(n){u.remove(n)},mceBlockQuote:function(){e("blockquote")},FormatBlock:function(n,t,i){return e(i||"p")},mceCleanup:function(){var i=t.getBookmark();n.setContent(n.getContent());t.moveToBookmark(i)},mceRemoveNode:function(i,r,u){var f=u||t.getNode();f!==n.getBody()&&(w(),n.dom.remove(f,!0),b())},mceSelectNodeDepth:function(r,u,f){var e=0;i.getParent(t.getNode(),function(n){if(1===n.nodeType&&e++===f)return t.select(n),!1},n.getBody())},mceSelectNode:function(n,i,r){t.select(r)},mceInsertContent:function(t,i,r){pfi(n,r)},mceInsertRawHTML:function(i,r,u){var f=n.getContent();t.setContent("tiny_mce_marker");n.setContent(f.replace(/tiny_mce_marker/g,function(){return u}))},mceToggleFormat:function(n,t,i){e(i)},mceSetContent:function(t,i,r){n.setContent(r)},"Indent,Outdent":function(t){bhi(n,t)},mceRepaint:function(){},InsertHorizontalRule:function(){n.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual;n.addVisual()},mceReplaceContent:function(i,r,u){n.execCommand("mceInsertContent",!1,u.replace(/\{\$selection\}/g,t.getContent({format:"text"})))},mceInsertLink:function(n,r,f){var e;"string"==typeof f&&(f={href:f});e=i.getParent(t.getNode(),"a");f.href=f.href.replace(" ","%20");e&&f.href||u.remove("link");f.href&&u.apply("link",f,e)},selectAll:function(){var u=i.getParent(t.getStart(),r.isContentEditableTrue),n;u&&(n=i.createRng(),n.selectNodeContents(u),t.setRng(n))},"delete":function(){ksi(n)},forwardDelete:function(){dsi(n)},mceNewDocument:function(){n.setContent("")},InsertLineBreak:function(t,i,r){return glt(n,r),!0}});o=function(n){return function(){var r=t.isCollapsed()?[i.getParent(t.getNode(),i.isBlock)]:t.getSelectedBlocks(),f=dhi(r,function(t){return!!u.matchNode(t,n)});return-1!==ghi(f,!0)}};h({JustifyLeft:o("alignleft"),JustifyCenter:o("aligncenter"),JustifyRight:o("alignright"),JustifyFull:o("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(n){return p(n)},mceBlockQuote:function(){return p("blockquote")},Outdent:function(){var n;return c.inline_styles&&((n=i.getParent(t.getStart(),i.isBlock))&&0<parseInt(n.style.paddingLeft,10)||(n=i.getParent(t.getEnd(),i.isBlock))&&0<parseInt(n.style.paddingLeft,10))?!0:l("InsertUnorderedList")||l("InsertOrderedList")||!c.inline_styles&&!!i.getParent(t.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(n){var r=i.getParent(t.getNode(),"ul,ol");return r&&("insertunorderedlist"===n&&"UL"===r.tagName||"insertorderedlist"===n&&"OL"===r.tagName)}},"state");h({Undo:function(){n.undoManager.undo()},Redo:function(){n.undoManager.redo()}});a("FontName",function(){return alt(t=n).fold(function(){return llt(t).map(function(n){return wa.getFontFamily(t.getBody(),n)}).getOr("")},function(n){return wa.getFontFamily(t.getBody(),n)});var t},this);a("FontSize",function(){return alt(t=n).fold(function(){return llt(t).map(function(n){return wa.getFontSize(t.getBody(),n)}).getOr("")},function(n){return wa.getFontSize(t.getBody(),n)});var t},this)}function gat(n){var r={},t=[],o=function(n){var r,i,t={};for(i in wk(bk(n,"+"),function(n){n in dat?t[n]=!0:/^[0-9]{2,}$/.test(n)?t.keyCode=parseInt(n,10):(t.charCode=n.charCodeAt(0),t.keyCode=aci[n]||n.toUpperCase().charCodeAt(0))}),r=[t.keyCode],dat)t[i]?r.push(i):t[i]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,s.mac?t.ctrl=!0:t.shift=!0),t.meta&&(s.mac?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t},u=function(t,r,u,f){var e;return(e=i.map(bk(t,">"),o))[e.length-1]=i.extend(e[e.length-1],{func:u,scope:f||n}),i.extend(e[0],{desc:n.translate(r),subpatterns:e.slice(1)})},f=function(n,t){return!!t&&t.ctrl===n.ctrlKey&&t.meta===n.metaKey&&t.alt===n.altKey&&t.shift===n.shiftKey&&!!(n.keyCode===t.keyCode||n.charCode&&n.charCode===t.charCode)&&(n.preventDefault(),!0)},e=function(n){return n.func?n.func.call(n.scope):null};n.on("keyup keypress keydown",function(n){var i,u;((u=n).altKey||u.ctrlKey||u.metaKey||"keydown"===(i=n).type&&112<=i.keyCode&&i.keyCode<=123)&&!n.isDefaultPrevented()&&(wk(r,function(i){if(f(n,i))return t=i.subpatterns.slice(0),"keydown"===n.type&&e(i),!0}),f(n,t[0])&&(1===t.length&&"keydown"===n.type&&e(t[0]),t.shift()))});this.add=function(t,f,e,o){var s;return"string"==typeof(s=e)?e=function(){n.execCommand(s,!1,null)}:i.isArray(s)&&(e=function(){n.execCommand(s[0],s[1],s[2])}),wk(bk(i.trim(t.toLowerCase())),function(n){var t=u(n,f,e,o);r[t.id]=t}),!0};this.remove=function(n){var t=u(n);return!!r[t.id]&&(delete r[t.id],!0)}}function evt(t){var f,i=[],r=function(){var n,i=t.theme;return i&&i.getNotificationManagerImpl?i.getNotificationManagerImpl():{open:n=function(){throw new Error("Theme did not provide a NotificationManager implementation.");},close:n,reposition:n,getArgs:n}},e=function(){0<i.length&&r().reposition(i)},o=function(n){u.findIndex(i,function(t){return t===n}).each(function(n){i.splice(n,1)})},s=function(n){if(!t.removed&&tli(t))return u.find(i,function(t){return i=r().getArgs(t),u=n,!(i.type!==u.type||i.text!==u.text||i.progressBar||i.timeout||u.progressBar||u.timeout);var i,u}).getOrThunk(function(){t.editorManager.setActive(t);var f,u=r().open(n,function(){o(u);e()});return f=u,i.push(f),e(),u})};return(f=t).on("SkinLoaded",function(){var n=f.settings.service_message;n&&s({text:n,type:"warning",timeout:0,icon:""})}),f.on("ResizeEditor ResizeWindow",function(){bt.requestAnimationFrame(e)}),f.on("remove",function(){u.each(i,function(n){r().close(n)})}),{open:s,close:function(){n.from(i[0]).each(function(n){r().close(n);o(n);e()})},getNotifications:function(){return i}}}function ovt(t){var i=[],r=function(){var n,i=t.theme;return i&&i.getWindowManagerImpl?i.getWindowManagerImpl():{open:n=function(){throw new Error("Theme did not provide a WindowManager implementation.");},alert:n,confirm:n,close:n,getParams:n,setParams:n}},s=function(n,t){return function(){return t?t.apply(n,arguments):undefined}},e=function(n){var r;i.push(n);r=n;t.fire("OpenWindow",{win:r})},f=function(n){u.findIndex(i,function(t){return t===n}).each(function(r){var u;i.splice(r,1);u=n;t.fire("CloseWindow",{win:u});0===i.length&&t.focus()})},o=function(){return n.from(i[i.length-1])};return t.on("remove",function(){u.each(i.slice(0),function(n){r().close(n)})}),{windows:i,open:function(n,i){t.editorManager.setActive(t);da(t);var u=r().open(n,i,f);return e(u),u},alert:function(n,t,i){var u=r().alert(n,s(i||this,t),f);e(u)},confirm:function(n,t,i){var u=r().confirm(n,s(i||this,t),f);e(u)},close:function(){o().each(function(n){r().close(n);f(n)})},getParams:function(){return o().map(r().getParams).getOr(null)},setParams:function(n){o().each(function(t){r().setParams(t,n)})},getWindows:function(){return i}}}function nd(){return new(du.getOrDie("XMLHttpRequest"))}function eli(n,t){var r={},f=function(n,i,r,u){var f,e;(f=new nd).open("POST",t.url);f.withCredentials=t.credentials;f.upload.onprogress=function(n){u(n.loaded/n.total*100)};f.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+f.status)};f.onload=function(){var n,u,e;f.status<200||300<=f.status?r("HTTP Error: "+f.status):(n=JSON.parse(f.responseText))&&"string"==typeof n.location?i((u=t.basePath,e=n.location,u?u.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e)):r("Invalid JSON: "+f.responseText)};(e=new FormData).append("file",n.blob(),n.filename());f.send(e)},e=function(n,t){return{url:t,blobInfo:n,status:!0}},u=function(n,t){return{url:"",blobInfo:n,status:!1,error:t}},o=function(n,t){i.each(r[n],function(n){n(t)});delete r[n]},s=function(f,s){return f=i.grep(f,function(t){return!n.isUploaded(t.blobUri())}),ri.all(i.map(f,function(i){return n.isPending(i.blobUri())?(h=i.blobUri(),new ri(function(n){r[h]=r[h]||[];r[h].push(n)})):(f=i,c=t.handler,l=s,n.markPending(f.blobUri()),new ri(function(t){var i,r;try{r=function(){i&&i.close()};c(f,function(i){r();n.markUploaded(f.blobUri(),i);o(f.blobUri(),e(f,i));t(e(f,i))},function(i){r();n.removeFailed(f.blobUri());o(f.blobUri(),u(f,i));t(u(f,i))},function(n){n<0||100<n||(i||(i=l()),i.progressBar.value(n))})}catch(s){t(u(f,s.message))}}));var f,c,l,h}))};return t=i.extend({credentials:!1,handler:f},t),{upload:function(n,i){return t.url||t.handler!==f?s(n,i):new ri(function(n){n([])})}}}function lvt(n,t){return new(du.getOrDie("Blob"))(n,t)}function oli(){return new(du.getOrDie("FileReader"))}function sli(n){return new(du.getOrDie("Uint8Array"))(n)}function pli(n){var u,i,w,b,l,o,c,t,a,v,f=(u=[],i=ot.constant,w=function(n){var t,r,u;if(!n.blob||!n.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return t=n.id||td.uuid("blobid"),r=n.name||t,{id:i(t),name:i(r),filename:i(r+"."+(u=n.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[u.toLowerCase()]||"dat")),blob:i(n.blob),base64:i(n.base64),blobUri:i(n.blobUri||gh.createObjectURL(n.blob)),uri:i(n.uri)}},{create:function(n,t,i,r){return w("object"==typeof n?n:{id:n,name:r,blob:t,base64:i})},add:function(n){b(n.id())||u.push(n)},get:b=function(n){return l(function(t){return t.id()===n})},getByUri:function(n){return l(function(t){return t.blobUri()===n})},findFirst:l=function(n){return h.filter(u,n)[0]},removeByUri:function(n){u=h.filter(u,function(t){return t.blobUri()!==n||(gh.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){h.each(u,function(n){gh.revokeObjectURL(n.blobUri())});u=[]}}),r=n.settings,e=(t={},a=function(n,t){return{status:n,resultUri:t}},{hasBlobUri:v=function(n){return n in t},getResultUri:function(n){var i=t[n];return i?i.resultUri:null},isPending:function(n){return!!v(n)&&1===t[n].status},isUploaded:function(n){return!!v(n)&&2===t[n].status},markPending:function(n){t[n]=a(1,null)},markUploaded:function(n,i){t[n]=a(2,i)},removeFailed:function(n){delete t[n]},destroy:function(){t={}}}),y=function(t){return function(i){return n.selection?t(i):[]}},k=function(n,t,i){for(var r=0;-1!==(r=n.indexOf(t,r))&&(n=n.substring(0,r)+i+n.substr(r+t.length),r+=i.length-t.length+1),-1!==r;);return n},d=function(n,t,i){return n=k(n,'src="'+t+'"','src="'+i+'"'),n=k(n,'data-mce-src="'+t+'"','data-mce-src="'+i+'"')},g=function(t,i){h.each(n.undoManager.data,function(n){"fragmented"===n.type?n.fragments=h.map(n.fragments,function(n){return d(n,t,i)}):n.content=d(n.content,t,i)})},rt=function(){return n.notificationManager.open({text:n.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},ut=function(t,i){f.removeByUri(t.src);g(t.src,i);n.$(t).attr({src:r.images_reuse_filename?i+"?"+(new Date).getTime():i,"data-mce-src":n.convertURL(i,"src")})},nt=function(t){return o||(o=eli(e,{url:r.images_upload_url,basePath:r.images_upload_base_path,credentials:r.images_upload_credentials,handler:r.images_upload_handler})),p().then(y(function(i){var r;return r=h.map(i,function(n){return n.blobInfo}),o.upload(r,rt).then(y(function(r){var u=h.map(r,function(t,r){var u=i[r].image;return t.status&&!1!==n.settings.images_replace_blob_uris?ut(u,t.url):t.error&&uli(n,t.error),{element:u,status:t.status}});return t&&t(u),u}))}))},tt=function(n){if(!1!==r.automatic_uploads)return nt(n)},ft=function(n){return!r.images_dataimg_filter||r.images_dataimg_filter(n)},p=function(){var i,r,t;return c||(i=e,r=f,t={},c={findAll:function(n,u){var f,e;return u||(u=ot.constant(!0)),f=h.filter(vli(n),function(n){var t=n.src;return!!s.fileApi&&!n.hasAttribute("data-mce-bogus")&&!n.hasAttribute("data-mce-placeholder")&&!(!t||t===s.transparentSrc)&&(0===t.indexOf("blob:")?!i.isUploaded(t):0===t.indexOf("data:")&&u(n))}),e=h.map(f,function(n){if(t[n.src])return new ri(function(i){t[n.src].then(function(t){if("string"==typeof t)return t;i({image:n,blobInfo:t.blobInfo})})});var i=new ri(function(t,i){ali(r,n,t,i)}).then(function(n){return delete t[n.image.src],n})["catch"](function(i){return delete t[n.src],i});return t[n.src]=i}),ri.all(e)}}),c.findAll(n.getBody(),ft).then(y(function(t){return t=h.filter(t,function(t){return"string"!=typeof t||(fli(n,t),!1)}),h.each(t,function(n){g(n.image.src,n.blobInfo.blobUri());n.image.src=n.blobInfo.blobUri();n.image.removeAttribute("data-mce-src")}),t}))},it=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,i){var u=e.getResultUri(i),r;return u?'src="'+u+'"':(r=f.getByUri(i),r||(r=h.reduce(n.editorManager.get(),function(n,t){return n||t.editorUpload&&t.editorUpload.blobCache.getByUri(i)},null)),r?'src="data:'+r.blob().type+";base64,"+r.base64()+'"':t)})};return n.on("setContent",function(){!1!==n.settings.automatic_uploads?tt():p()}),n.on("RawSaveContent",function(n){n.content=it(n.content)}),n.on("getContent",function(n){n.source_view||"raw"===n.format||(n.content=it(n.content))}),n.on("PostRender",function(){n.parser.addNodeFilter("img",function(n){h.each(n,function(n){var i=n.attr("src"),t;f.getByUri(i)||(t=e.getResultUri(i),t&&n.attr("src",t))})})}),{blobCache:f,uploadImages:nt,uploadImagesAuto:tt,scanForImages:p,destroy:function(){f.destroy();e.destroy();c=o=null}}}function gli(n){var i,t=[];"onselectionchange"in n.getDoc()||n.on("NodeChange Click MouseUp KeyUp Focus",function(t){var r,u;u={startContainer:(r=n.selection.getRng()).startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};"nodechange"!==t.type&&hk(u,i)||n.fire("SelectionChange");i=u});n.on("contextmenu",function(){n.fire("SelectionChange")});n.on("SelectionChange",function(){var i=n.selection.getStart(!0);i&&(s.range||!n.selection.isCollapsed())&&fd(n)&&!function(i){var r,u;if((u=n.$(i).parentsUntil(n.getBody()).add(i)).length===t.length){for(r=u.length;0<=r&&u[r]===t[r];r--);if(-1===r)return t=u,!0}return t=u,!1}(i)&&n.dom.isChildOf(i,n.getBody())&&n.nodeChanged({selectionChange:!0})});n.on("MouseUp",function(t){!t.isDefaultPrevented()&&fd(n)&&("IMG"===n.selection.getNode().nodeName?bt.setEditorTimeout(n,function(){n.nodeChanged()}):n.nodeChanged())});this.nodeChanged=function(t){var i,u,r,f=n.selection;n.initialized&&f&&!n.settings.disable_nodechange&&!n.readonly&&(r=n.getBody(),(i=f.getStart(!0)||r).ownerDocument===n.getDoc()&&n.dom.isChildOf(i,r)||(i=r),u=[],n.dom.getParent(i,function(n){if(n===r)return!0;u.push(n)}),(t=t||{}).element=i,t.parents=u,n.fire("NodeChange",t))}}function ld(n,t){var r;void 0===t&&(t=fu());r=function(){};!1!==(n=n||{}).fix_self_closing&&(n.fix_self_closing=!0);var e=n.comment?n.comment:r,o=n.cdata?n.cdata:r,u=n.text?n.text:r,s=n.start?n.start:r,f=n.end?n.end:r,h=n.pi?n.pi:r,c=n.doctype?n.doctype:r;return{parse:function(r){var a,l,lt,p,y,ut,g,ft,vt,yt,pt,at,it,d,w,nt,tt,wt,et,ot,st,ht,bt,kt,rt,dt,gt,k,ni,v=0,b=[],ti=0,ct=uf.decode,ii=i.makeMap("src,href,data,background,formaction,poster,xlink:href"),ui=/((java|vb)script|mhtml):/i,ri=function(n){for(var i,t=b.length;t--&&b[t].name!==n;);if(0<=t){for(i=b.length-1;t<=i;i--)(n=b[i]).valid&&f(n.name);b.length=t}},fi=function(t,i,r,u,f){var o,s,c,l,h,e;if(r=(i=i.toLowerCase())in pt?i:ct(r||u||f||""),it&&!ft&&0==(0===(c=i).indexOf("data-")||0===c.indexOf("aria-"))){if(!(o=wt[i])&&et){for(s=et.length;s--&&!(o=et[s]).pattern.test(i););-1===s&&(o=null)}if(!o)return;if(o.validValues&&!(r in o.validValues))return}if(ii[i]&&!n.allow_script_urls){e=r.replace(/[\s\u0000-\u001F]+/g,"");try{e=decodeURIComponent(e)}catch(a){e=unescape(e)}if(ui.test(e))return;if(h=e,!(l=n).allow_html_data_urls&&(/^data:image\//i.test(h)?!1===l.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(h):/^data:/i.test(h)))return}ft&&(i in ii||0===i.indexOf("on"))||(p.map[i]=r,p.push({name:i,value:r}))};for(rt=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),dt=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,yt=t.getShortEndedElements(),kt=n.self_closing_elements||t.getSelfClosingElements(),pt=t.getBoolAttrs(),it=n.validate,vt=n.remove_internals,ni=n.fix_self_closing,gt=t.getSpecialElements(),bt=r+">";a=rt.exec(bt);){if(v<a.index&&u(ct(r.substr(v,a.index-v))),l=a[6])":"===(l=l.toLowerCase()).charAt(0)&&(l=l.substr(1)),ri(l);else if(l=a[7]){if(a.index+a[0].length>r.length){u(ct(r.substr(a.index)));v=a.index+a[0].length;continue}if(":"===(l=l.toLowerCase()).charAt(0)&&(l=l.substr(1)),at=l in yt,ni&&kt[l]&&0<b.length&&b[b.length-1].name===l&&ri(l),!it||(d=t.getElementRule(l))){if(w=!0,it&&(wt=d.attributes,et=d.attributePatterns),(tt=a[8])?((ft=-1!==tt.indexOf("data-mce-type"))&&vt&&(w=!1),(p=[]).map={},tt.replace(dt,fi)):(p=[]).map={},it&&!ft){if(ot=d.attributesRequired,st=d.attributesDefault,ht=d.attributesForced,d.removeEmptyAttrs&&!p.length&&(w=!1),ht)for(y=ht.length;y--;)g=(nt=ht[y]).name,"{$uid}"===(k=nt.value)&&(k="mce_"+ti++),p.map[g]=k,p.push({name:g,value:k});if(st)for(y=st.length;y--;)(g=(nt=st[y]).name)in p.map||("{$uid}"===(k=nt.value)&&(k="mce_"+ti++),p.map[g]=k,p.push({name:g,value:k}));if(ot){for(y=ot.length;y--&&!(ot[y]in p.map););-1===y&&(w=!1)}if(nt=p.map["data-mce-bogus"]){if("all"===nt){v=fyt(t,r,rt.lastIndex);rt.lastIndex=v;continue}w=!1}}w&&s(l,p,at)}else w=!1;if(lt=gt[l]){lt.lastIndex=v=a.index+a[0].length;(a=lt.exec(r))?(w&&(ut=r.substr(v,a.index-v)),v=a.index+a[0].length):(ut=r.substr(v),v=r.length);w&&(0<ut.length&&u(ut,!0),f(l));rt.lastIndex=v;continue}at||(tt&&tt.indexOf("/")===tt.length-1?w&&f(l):b.push({name:l,valid:w}))}else(l=a[1])?(">"===l.charAt(0)&&(l=" "+l),n.allow_conditional_comments||"[if"!==l.substr(0,3).toLowerCase()||(l=" "+l),e(l)):(l=a[2])?o(l.replace(/<!--|-->/g,"")):(l=a[3])?c(l):(l=a[4])&&h(l,a[5]);v=a.index+a[0].length}for(v<r.length&&u(ct(r.substr(v))),y=b.length-1;0<=y;y--)(l=b[y]).valid&&f(l.name)}}}function lyt(n){var l,s,r=this,u=0,t=[],h=0,c=function(){return 0===h},e=function(n){c()&&(r.typing=n)},o=function(t){n.setDirty(t)},f=function(n){e(!1);r.add({},n)},a=function(){r.typing&&(e(!1),r.add())};return n.on("init",function(){r.add()}),n.on("BeforeExecCommand",function(n){var t=n.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(a(),r.beforeChange())}),n.on("ExecCommand",function(n){var t=n.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&f(n)}),n.on("ObjectResizeStart Cut",function(){r.beforeChange()}),n.on("SaveContent ObjectResized blur",f),n.on("DragEnd",f),n.on("KeyUp",function(i){var u=i.keyCode;i.isDefaultPrevented()||((33<=u&&u<=36||37<=u&&u<=40||45===u||i.ctrlKey)&&(f(),n.nodeChanged()),46!==u&&8!==u||n.nodeChanged(),s&&r.typing&&!1===wd(yd(n),t[0])&&(!1===n.isDirty()&&(o(!0),n.fire("change",{level:t[0],lastLevel:null})),n.fire("TypingUndo"),s=!1,n.nodeChanged()))}),n.on("KeyDown",function(n){var t=n.keyCode,i;n.isDefaultPrevented()||(33<=t&&t<=36||37<=t&&t<=40||45===t?r.typing&&f(n):(i=n.ctrlKey&&!n.altKey||n.metaKey,(t<16||20<t)&&224!==t&&91!==t&&!r.typing&&!i&&(r.beforeChange(),e(!0),r.add({},n),s=!0)))}),n.on("MouseDown",function(n){r.typing&&f(n)}),n.on("input",function(n){var t;n.inputType&&("insertReplacementText"===n.inputType||"insertText"===(t=n).inputType&&null===t.data)&&f(n)}),n.addShortcut("meta+z","","Undo"),n.addShortcut("meta+y,meta+shift+z","","Redo"),n.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||n.nodeChanged()}),r={data:t,typing:!1,beforeChange:function(){c()&&(l=hs.getUndoBookmark(n.selection))},add:function(r,f){var e,s,a,v=n.settings,h;if((a=yd(n),r=r||{},r=i.extend(r,a),!1===c()||n.removed)||(s=t[u],n.fire("BeforeAddUndo",{level:r,lastLevel:s,originalEvent:f}).isDefaultPrevented())||s&&wd(s,r))return null;if(t[u]&&(t[u].beforeBookmark=l),v.custom_undo_redo_levels&&t.length>v.custom_undo_redo_levels){for(e=0;e<t.length-1;e++)t[e]=t[e+1];t.length--;u=t.length}return r.bookmark=hs.getUndoBookmark(n.selection),u<t.length-1&&(t.length=u+1),t.push(r),u=t.length-1,h={level:r,lastLevel:s,originalEvent:f},n.fire("AddUndo",h),0<u&&(o(!0),n.fire("change",h)),r},undo:function(){var i;return r.typing&&(r.add(),r.typing=!1,e(!1)),0<u&&(i=t[--u],pd(n,i,!0),o(!0),n.fire("undo",{level:i})),i},redo:function(){var i;return u<t.length-1&&(i=t[++u],pd(n,i,!1),o(!0),n.fire("redo",{level:i})),i},clear:function(){t=[];u=0;r.typing=!1;r.data=t;n.fire("ClearUndos")},hasUndo:function(){return 0<u||r.typing&&t[0]&&!wd(yd(n),t[0])},hasRedo:function(){return u<t.length-1&&!r.typing},transact:function(n){return a(),r.beforeChange(),r.ignore(n),r.add()},ignore:function(n){try{h++;n()}finally{h--}},extra:function(i,f){var e,o;r.transact(i)&&(o=t[u].bookmark,e=t[u-1],pd(n,e,!0),r.transact(f)&&(t[u-1].beforeBookmark=o))}}}function nwt(n){var e,r,u,f=(e=n,r={},(u=function(n,t){n&&("string"!=typeof n?i.each(n,function(n,t){u(t,n)}):(t=t.length?t:[t],i.each(t,function(n){"undefined"==typeof n.deep&&(n.deep=!n.selector);"undefined"==typeof n.split&&(n.split=!n.selector||n.inline);"undefined"==typeof n.remove&&n.selector&&!n.inline&&(n.remove="none");n.selector&&n.inline&&(n.mixed=!0,n.block_expand=!0);"string"==typeof n.classes&&(n.classes=n.classes.split(/\s+/))}),r[n]=t))})(iyi.get(e.dom)),u(e.settings.formats),{get:function(n){return n?r[n]:r},register:u,unregister:function(n){return n&&r[n]&&delete r[n],r}}),o=rs(null);return oyi(n),cvi(n),{get:f.get,register:f.register,unregister:f.unregister,apply:t.curry(dpt.applyFormat,n),remove:t.curry(apt,n),toggle:t.curry(eyi,n,f),match:t.curry(ei.match,n),matchAll:t.curry(ei.matchAll,n),matchNode:t.curry(ei.matchNode,n),canApply:t.curry(ei.canApply,n),formatChanged:t.curry(tyi,n,o),getCssText:t.curry(fyi,n)}}function hg(n,t){var e,o;void 0===t&&(t=fu());var r={},i=[],u={},f={};return(n=n||{}).validate=!("validate"in n)||n.validate,n.root_name=n.root_name||"body",e=function(n){var o,t,e;for((t in r)&&((e=u[t])?e.push(n):u[t]=[n]),o=i.length;o--;)(t=i[o].name)in n.attributes.map&&((e=f[t])?e.push(n):f[t]=[n]);return n},o={schema:t,addAttributeFilter:function(n,t){swt(hwt(n),function(n){for(var r=0;r<i.length;r++)if(i[r].name===n)return void i[r].callbacks.push(t);i.push({name:n,callbacks:[t]})})},getAttributeFilters:function(){return[].concat(i)},addNodeFilter:function(n,t){swt(hwt(n),function(n){var i=r[n];i||(r[n]=i=[]);i.push(t)})},getNodeFilters:function(){var t=[],n;for(n in r)r.hasOwnProperty(n)&&t.push({name:n,callbacks:r[n]});return t},filterNode:e,parse:function(o,s){var et,a,v,d,c,ot,l,g,p,w,h,it=[],y,tt,k;s=s||{};u={};f={};p=byi(owt("script,style,head,html,body,title,meta,param"),t.getBlockElements());var st=t.getNonEmptyElements(),ht=t.children,nt=n.validate,rt="forced_root_block"in s?s.forced_root_block:n.forced_root_block,b=t.getWhiteSpaceElements(),ut=/^[ \t\r\n]+/,ft=/[ \t\r\n]+$/,lt=/[ \t\r\n]+/g,ct=/^[ \t\r\n]+$/;if(w=b.hasOwnProperty(s.context)||b.hasOwnProperty(n.root_name),y=function(n,t){var f,i=new ai(n,t);return n in r&&((f=u[n])?f.push(i):u[n]=[i]),i},tt=function(n){for(var r,u,f,e=t.getBlockElements(),i=n.prev;i&&3===i.type;){if(0<(u=i.value.replace(ft,"")).length)return void(i.value=u);if(r=i.next){if(3===r.type&&r.value.length){i=i.prev;continue}if(!e[r.name]&&"script"!==r.name&&"style"!==r.name){i=i.prev;continue}}f=i.prev;i.remove();i=f}},et=ad({validate:nt,allow_script_urls:n.allow_script_urls,allow_conditional_comments:n.allow_conditional_comments,self_closing_elements:function(n){var t,i={};for(t in n)"li"!==t&&"p"!==t&&(i[t]=n[t]);return i}(t.getSelfClosingElements()),cdata:function(n){h.append(y("#cdata",4)).value=n},text:function(n,t){var i;w||(n=n.replace(lt," "),pyi(h.lastChild,p)&&(n=n.replace(ut,"")));0!==n.length&&((i=y("#text",3)).raw=!!t,h.append(i).value=n)},comment:function(n){h.append(y("#comment",8)).value=n},pi:function(n,t){h.append(y(n,7)).value=t;tt(h)},doctype:function(n){h.append(y("#doctype",10)).value=n;tt(h)},start:function(n,r,u){var e,o,c,s,a;if(c=nt?t.getElementRule(n):{}){for((e=y(c.outputName||n,1)).attributes=r,e.shortEnded=u,h.append(e),(a=ht[h.name])&&ht[e.name]&&!a[e.name]&&it.push(e),o=i.length;o--;)(s=i[o].name)in r.map&&((l=f[s])?l.push(e):f[s]=[e]);p[n]&&tt(e);u||(h=e);!w&&b[n]&&(w=!0)}},end:function(i){var r,e,u,f,o;if(e=nt?t.getElementRule(i):{}){if(p[i]&&!w){if((r=h.firstChild)&&3===r.type)if(0<(u=r.value.replace(ut,"")).length)r.value=u,r=r.next;else for(f=r.next,r.remove(),r=f;r&&3===r.type;)u=r.value,f=r.next,(0===u.length||ct.test(u))&&(r.remove(),r=f),r=f;if((r=h.lastChild)&&3===r.type)if(0<(u=r.value.replace(ft,"")).length)r.value=u,r=r.prev;else for(f=r.prev,r.remove(),r=f;r&&3===r.type;)u=r.value,f=r.prev,(0===u.length||ct.test(u))&&(r.remove(),r=f),r=f}if(w&&b[i]&&(w=!1),e.removeEmpty&&rh(t,st,b,h)&&!h.attributes.map.name&&!h.attr("id"))return o=h.parent,p[h.name]?h.empty().remove():h.unwrap(),void(h=o);e.paddEmpty&&(yyi(h)||rh(t,st,b,h))&&fwt(n,s,p,h);h=h.parent}}},t),k=h=new ai(s.context||n.root_name,11),et.parse(o),nt&&it.length&&(s.context?s.invalid=!0:function(n){var l,i,u,f,a,h,c,s,o,v,y,w,p,b,r,k;for(w=owt("tr,td,th,tbody,thead,tfoot,table"),v=t.getNonEmptyElements(),y=t.getWhiteSpaceElements(),p=t.getTextBlockElements(),b=t.getSpecialElements(),l=0;l<n.length;l++)if((i=n[l]).parent&&!i.fixed)if(p[i.name]&&"li"===i.parent.name){for(r=i.next;r&&p[r.name];)r.name="li",r.fixed=!0,i.parent.insert(r,i.parent),r=r.next;i.unwrap(i)}else{for(f=[i],u=i.parent;u&&!t.isValidChild(u.name,i.name)&&!w[u.name];u=u.parent)f.push(u);if(u&&1<f.length){for(f.reverse(),a=h=e(f[0].clone()),o=0;o<f.length-1;o++){for(t.isValidChild(h.name,f[o].name)?(c=e(f[o].clone()),h.append(c)):c=h,s=f[o].firstChild;s&&s!==f[o+1];)k=s.next,c.append(s),s=k;h=c}rh(t,v,y,a)?u.insert(i,f[0],!0):(u.insert(a,f[0],!0),u.insert(i,a));u=f[0];(rh(t,v,y,u)||ewt(u,"br"))&&u.empty().remove()}else if(i.parent){if("li"===i.name){if((r=i.prev)&&("ul"===r.name||"ul"===r.name)){r.append(i);continue}if((r=i.next)&&("ul"===r.name||"ul"===r.name)){r.insert(i,r.firstChild,!0);continue}i.wrap(e(new ai("ul",1)));continue}t.isValidChild(i.parent.name,"div")&&t.isValidChild("div",i.name)?i.wrap(e(new ai("div",1))):b[i.name]?i.empty().remove():i.unwrap()}}}(it)),rt&&("body"===k.name||s.isRootContent)&&function(){var u,r,i=k.firstChild,f=function(n){n&&((i=n.firstChild)&&3===i.type&&(i.value=i.value.replace(ut,"")),(i=n.lastChild)&&3===i.type&&(i.value=i.value.replace(ft,"")))};if(t.isValidChild(k.name,rt.toLowerCase())){for(;i;)u=i.next,3===i.type||1===i.type&&"p"!==i.name&&!p[i.name]&&!i.attr("data-mce-type")?(r||((r=y(rt,1)).attr(n.forced_root_block_attrs),k.insert(r,i)),r.append(i)):(f(r),r=null),i=u;f(r)}}(),!s.invalid){for(g in u){for(l=r[g],c=(a=u[g]).length;c--;)a[c].parent||a.splice(c,1);for(v=0,d=l.length;v<d;v++)l[v](a,g,s)}for(v=0,d=i.length;v<d;v++)if((l=i[v]).name in f){for(c=(a=f[l.name]).length;c--;)a[c].parent||a.splice(c,1);for(c=0,ot=l.callbacks.length;c<ot;c++)l.callbacks[c](a,l.name,s)}}return k}},wyi(o,n),ayi.register(o,n),o}function cwt(n,i){var r,u,s,e,o,h,f=(r=n,h=["data-mce-selected"],s=(u=i)&&u.dom?u.dom:d.DOM,e=u&&u.schema?u.schema:fu(r),r.entity_encoding=r.entity_encoding||"named",r.remove_trailing_brs=!("remove_trailing_brs"in r)||r.remove_trailing_brs,o=hg(r,e),rwt.register(o,r,s),{schema:e,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:function(n,t){var i=ih.merge({format:"html"},t||{}),h=hyi.process(u,n,i),c=dyi(s,h,i),f=gyi(o,c,i);return"tree"===i.format?f:npi(u,r,e,f,i)},addRules:function(n){e.addValidElements(n)},setRules:function(n){e.setValidElements(n)},addTempAttr:t.curry(kyi,o,h),getTempAttrs:function(){return h}});return{schema:f.schema,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:f.serialize,addRules:f.addRules,setRules:f.setRules,addTempAttr:f.addTempAttr,getTempAttrs:f.getTempAttrs}}function cg(n){return{getBookmark:t.curry(ufi,n),moveToBookmark:t.curry(ffi,n)}}function tbi(n){var o,h,c,p=i.each,l=a.BACKSPACE,g=a.DELETE,t=n.dom,r=n.selection,e=n.settings,nt=n.parser,w=s.gecko,tt=s.ie,it=s.webkit,v="data:text/mce-internal,",b=tt?"Text":"URL",f=function(t,i){try{n.getDoc().execCommand(t,!1,i)}catch(r){}},u=function(n){return n.isDefaultPrevented()},k=function(){n.shortcuts.add("meta+a",null,"SelectAll")},y=function(){n.on("keydown",function(n){if(!u(n)&&n.keyCode===l&&r.isCollapsed()&&0===r.getRng().startOffset){var t=r.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return n.preventDefault(),!1}})},d=function(){n.inline||(n.contentStyles.push("body {min-height: 150px}"),n.on("click",function(t){var i;if("HTML"===t.target.nodeName){if(11<s.ie)return void n.getBody().focus();i=n.selection.getRng();n.getBody().focus();n.selection.setRng(i);n.selection.normalize();n.nodeChanged()}}))};return n.on("keydown",function(i){var e,o,s,h,f;if(!u(i)&&i.keyCode===a.BACKSPACE&&(o=(e=r.getRng()).startContainer,s=e.startOffset,h=t.getRoot(),f=o,e.collapsed&&0===s)){for(;f&&f.parentNode&&f.parentNode.firstChild===f&&f.parentNode!==h;)f=f.parentNode;"BLOCKQUOTE"===f.tagName&&(n.formatter.toggle("blockquote",null,f),(e=t.createRng()).setStart(o,0),e.setEnd(o,0),r.setRng(e))}}),o=function(n){var i=t.create("body"),u=n.cloneContents();return i.appendChild(u),r.serializer.serialize(i,{format:"html"})},n.on("keydown",function(i){var f,r,e,s,h,c=i.keyCode;if(!u(i)&&(c===g||c===l)){if(f=n.selection.isCollapsed(),r=n.getBody(),f&&!t.isEmpty(r))return;if(!f&&(e=n.selection.getRng(),s=o(e),(h=t.createRng()).selectNode(n.getBody()),s!==o(h)))return;i.preventDefault();n.setContent("");r.firstChild&&t.isBlock(r.firstChild)?n.selection.setCursorLocation(r.firstChild,0):n.selection.setCursorLocation(r,0);n.nodeChanged()}}),s.windowsPhone||n.on("keyup focusin mouseup",function(n){a.modifierPressed(n)||r.normalize()},!0),it&&(n.settings.content_editable||t.bind(n.getDoc(),"mousedown mouseup",function(t){var i;if(t.target===n.getDoc().documentElement)if(i=r.getRng(),n.getBody().focus(),"mousedown"===t.type){if(ui(i.startContainer))return;r.placeCaretAt(t.clientX,t.clientY)}else r.setRng(i)}),n.on("click",function(i){var u=i.target;/^(IMG|HR)$/.test(u.nodeName)&&"false"!==t.getContentEditableParent(u)&&(i.preventDefault(),n.selection.select(u),n.nodeChanged());"A"===u.nodeName&&t.hasClass(u,"mce-item-anchor")&&(i.preventDefault(),r.select(u))}),e.forced_root_block&&n.on("init",function(){f("DefaultParagraphSeparator",e.forced_root_block)}),n.on("init",function(){n.dom.bind(n.getBody(),"submit",function(n){n.preventDefault()})}),y(),nt.addNodeFilter("br",function(n){for(var t=n.length;t--;)"Apple-interchange-newline"===n[t].attr("class")&&n[t].remove()}),s.iOS?(n.inline||n.on("keydown",function(){document.activeElement===document.body&&n.getWin().focus()}),d(),n.on("click",function(n){var t=n.target;do if("A"===t.tagName)return void n.preventDefault();while(t=t.parentNode)}),n.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):k()),11<=s.ie&&(d(),y()),s.ie&&(k(),f("AutoUrlDetect",!1),n.on("dragstart",function(t){var i,u,f;(i=t).dataTransfer&&(n.selection.isCollapsed()&&"IMG"===i.target.tagName&&r.select(i.target),0<(u=n.selection.getContent()).length&&(f=v+escape(n.id)+","+escape(u),i.dataTransfer.setData(b,f)))}),n.on("drop",function(t){var f,o,e,s,h,i;u(t)||(f=(h=t).dataTransfer&&(i=h.dataTransfer.getData(b))&&0<=i.indexOf(v)?(i=i.substr(v.length).split(","),{id:unescape(i[0]),html:unescape(i[1])}):null,f&&f.id!==n.id&&(t.preventDefault(),o=lg(t.x,t.y,n.getDoc()),r.setRng(o),e=f.html,s=!0,n.queryCommandSupported("mceInsertClipboardContent")?n.execCommand("mceInsertClipboardContent",!1,{content:e,internal:s}):n.execCommand("mceInsertContent",!1,e)))})),w&&(n.on("keydown",function(i){if(!u(i)&&i.keyCode===l){if(!n.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&0===r.getRng().startOffset){var e=r.getNode(),f=e.previousSibling;if("HR"===e.nodeName)return t.remove(e),void i.preventDefault();f&&f.nodeName&&"hr"===f.nodeName.toLowerCase()&&(t.remove(f),i.preventDefault())}}}),Range.prototype.getClientRects||n.on("mousedown",function(t){if(!u(t)&&"HTML"===t.target.nodeName){var i=n.getBody();i.blur();bt.setEditorTimeout(n,function(){i.focus()})}}),h=function(){var i=t.getAttribs(r.getStart().cloneNode(!1));return function(){var u=r.getStart();u!==n.getBody()&&(t.setAttrib(u,"style",null),p(i,function(n){u.setAttributeNode(n.cloneNode(!0))}))}},c=function(){return!r.isCollapsed()&&t.getParent(r.getStart(),t.isBlock)!==t.getParent(r.getEnd(),t.isBlock)},n.on("keypress",function(t){var i;if(!u(t)&&(8===t.keyCode||46===t.keyCode)&&c())return i=h(),n.getDoc().execCommand("delete",!1,null),i(),t.preventDefault(),!1}),t.bind(n.getDoc(),"cut",function(t){var i;!u(t)&&c()&&(i=h(),bt.setEditorTimeout(n,function(){i()}))}),e.readonly||n.on("BeforeExecCommand MouseDown",function(){f("StyleWithCSS",!1);f("enableInlineTableEditing",!1);e.object_resizing||f("enableObjectResizing",!1)}),n.on("SetContent ExecCommand",function(n){"setcontent"!==n.type&&"mceInsertLink"!==n.command||p(t.select("a"),function(n){var i=n.parentNode,r=t.getRoot();if(i.lastChild===n){for(;i&&!t.isBlock(i);){if(i.parentNode.lastChild!==i||i===r)return;i=i.parentNode}t.add(i,"br",{"data-mce-bogus":1})}})}),n.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),s.mac&&n.on("keydown",function(t){!a.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),n.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}),y()),{refreshContentEditable:function(){},isHidden:function(){var t;return!w||n.removed?0:!(t=n.selection.getSel())||!t.rangeCount||0===t.rangeCount}}}function sn(n){return{walk:function(t,i){return ug(n,t,i)},split:ng,normalize:function(i){return ba(n,i).fold(t.constant(!1),function(n){return i.setStart(n.startContainer,n.startOffset),i.setEnd(n.endContainer,n.endOffset),!0})}}}var yn,pn,wn,hy,bn,ph,hi,wh,bh,kn,dn,so,kh,cy,gn,ntt,ttt,ly=function(n){return function(){return n}},odt=ly(!1),sdt=ly(!0),t={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:ly,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:odt,always:sdt},ho=t.never,ay=t.always,ku=function(){return vy},vy=(hy={fold:function(n){return n()},is:ho,isSome:ho,isNone:ay,getOr:wn=function(n){return n},getOrThunk:pn=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:wn,orThunk:pn,map:ku,ap:ku,each:function(){},bind:ku,flatten:ku,exists:ho,forall:ay,filter:ku,equals:yn=function(n){return n.isNone()},equals_:yn,toArray:function(){return[]},toString:t.constant("none()")},Object.freeze&&Object.freeze(hy),hy),dh=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:ay,isNone:ho,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:function(t){return dh(t(n))},ap:function(t){return t.fold(ku,function(t){return dh(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:vy},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(ho,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},n={some:dh,none:ku,from:function(n){return null===n||n===undefined?vy:dh(n)}},vr=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},p={isString:vr("string"),isObject:vr("object"),isArray:vr("array"),isNull:vr("null"),isBoolean:vr("boolean"),isUndefined:vr("undefined"),isFunction:vr("function"),isNumber:vr("number")},itt=(bn=Array.prototype.indexOf)===undefined?function(n,t){return hdt(n,t)}:function(n,t){return bn.call(n,t)},rtt=function(n,t){return-1<itt(n,t)},utt=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},ftt=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},ett=function(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i,n)},ott=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},stt=function(t,i){for(var r=0,u=t.length;r<u;r++)if(i(t[r],r,t))return n.some(r);return n.none()},hdt=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},cdt=Array.prototype.push,htt=function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);cdt.apply(i,n[t])}return i},ctt=function(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i,n))return!1;return!0},yy=Array.prototype.slice,ldt=p.isFunction(Array.from)?Array.from:function(n){return yy.call(n)},u={map:utt,each:ftt,eachr:ett,partition:function(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i,n)?u:f).push(r);return{pass:u,fail:f}},filter:ott,groupBy:function(n,t){var f,e;if(0===n.length)return[];for(var o=t(n[0]),r=[],i=[],u=0,s=n.length;u<s;u++)f=n[u],e=t(f),e!==o&&(r.push(i),i=[]),o=e,i.push(f);return 0!==i.length&&r.push(i),r},indexOf:function(t,i){var r=itt(t,i);return-1===r?n.none():n.some(r)},foldr:function(n,t,i){return ett(n,function(n){i=t(i,n)}),i},foldl:function(n,t,i){return ftt(n,function(n){i=t(i,n)}),i},find:function(t,i){for(var u,r=0,f=t.length;r<f;r++)if(u=t[r],i(u,r,t))return n.some(u);return n.none()},findIndex:stt,flatten:htt,bind:function(n,t){var i=utt(n,t);return htt(i)},forall:ctt,exists:function(n,t){return stt(n,t).isSome()},contains:rtt,equal:function(n,t){return n.length===t.length&&ctt(n,function(n,i){return n===t[i]})},reverse:function(n){var t=yy.call(n,0);return t.reverse(),t},chunk:function(n,t){for(var u,r=[],i=0;i<n.length;i+=t)u=n.slice(i,i+t),r.push(u);return r},difference:function(n,t){return ott(n,function(n){return!rtt(t,n)})},mapToObject:function(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u},pure:function(n){return[n]},sort:function(n,t){var i=yy.call(n,0);return i.sort(t),i},range:function(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r},head:function(t){return 0===t.length?n.none():n.some(t[0])},last:function(t){return 0===t.length?n.none():n.some(t[t.length-1])},from:ldt},adt="undefined"!=typeof window?window:Function("return this;")(),vdt=function(n,t){for(var i=t!==undefined&&null!==t?t:adt,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i},ydt=function(n,t){var i=n.split(".");return vdt(i,t)},du={getOrDie:function(n,t){var i=ydt(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i}},ltt=function(){return du.getOrDie("URL")},gh={createObjectURL:function(n){return ltt().createObjectURL(n)},revokeObjectURL:function(n){ltt().revokeObjectURL(n)}},py=navigator,ci=py.userAgent,att=function(n){return"matchMedia"in window&&matchMedia(n).matches},v,ac,iw,ew,fl,el,oat,ws,uy,on,an,yh;kh=/Android/.test(ci);hi=(hi=!(ph=/WebKit/.test(ci))&&/MSIE/gi.test(ci)&&/Explorer/gi.test(py.appName))&&/MSIE (\w+)\./.exec(ci)[1];wh=-1!==ci.indexOf("Trident/")&&(-1!==ci.indexOf("rv:")||-1!==py.appName.indexOf("Netscape"))&&11;bh=-1!==ci.indexOf("Edge/")&&!hi&&!wh&&12;hi=hi||wh||bh;kn=!ph&&!wh&&/Gecko/.test(ci);dn=-1!==ci.indexOf("Mac");so=/(iPad|iPhone)/.test(ci);cy="FormData"in window&&"FileReader"in window&&"URL"in window&&!!gh.createObjectURL;gn=att("only screen and (max-device-width: 480px)")&&(kh||so);ntt=att("only screen and (min-width: 800px)")&&(kh||so);ttt=-1!==ci.indexOf("Windows Phone");bh&&(ph=!1);var wy,kf,tt,b,nc,vtt,co,by,ytt,tc,yr,df,pr,ii,ic,ki,wr,gf,lo,s={opera:!1,webkit:ph,ie:hi,gecko:kn,mac:dn,iOS:so,android:kh,contentEditable:!so||cy||534<=parseInt(ci.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==hi,range:window.getSelection&&"Range"in window,documentMode:hi&&!bh?document.documentMode||7:10,fileApi:cy,ceFalse:!1===hi||8<hi,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===hi||11<hi,desktop:!gn&&!ntt,windowsPhone:ttt},ri=window.Promise?window.Promise:function(){function t(n,t){return function(){n.apply(t,arguments)}}function r(n){var t=this;null!==this._state?s(function(){var i=t._state?n.onFulfilled:n.onRejected,r;if(null!==i){try{r=i(t._value)}catch(u){return void n.reject(u)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)}):this._deferreds.push(n)}function u(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if("function"==typeof r)return void e(t(r,n),t(u,this),t(i,this))}this._state=!0;this._value=n;f.call(this)}catch(o){i.call(this,o)}}function i(n){this._state=!1;this._value=n;f.call(this)}function f(){for(var n=0,t=this._deferreds.length;n<t;n++)r.call(this,this._deferreds[n]);this._deferreds=null}function h(n,t,i,r){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.resolve=i;this.reject=r}function e(n,t,i){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,i(n))})}catch(u){if(r)return;r=!0;i(u)}}var o=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)},n=function(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null;this._value=null;this._deferreds=[];e(n,t(u,this),t(i,this))},s=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,1)};return n.prototype["catch"]=function(n){return this.then(null,n)},n.prototype.then=function(t,i){var u=this;return new n(function(n,f){r.call(u,new h(t,i,n,f))})},n.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&o(arguments[0])?arguments[0]:arguments);return new n(function(n,i){function f(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){f(r,n)},i)}t[r]=e;0==--u&&n(t)}catch(s){i(s)}}var u,r;if(0===t.length)return n([]);for(u=t.length,r=0;r<t.length;r++)f(r,t[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n}(),ky=function(n,t){return"number"!=typeof t&&(t=0),setTimeout(n,t)},ptt=function(n,t){return"number"!=typeof t&&(t=1),setInterval(n,t)},wtt=function(n,t){var i,r;return(r=function(){var r=arguments;clearTimeout(i);i=ky(function(){n.apply(this,r)},t)}).stop=function(){clearTimeout(i)},r},bt={requestAnimationFrame:function(n,t){wy?wy.then(n):wy=new ri(function(n){t||(t=document.body),function(n,t){for(var i=window.requestAnimationFrame,u=["ms","moz","webkit"],r=0;r<u.length&&!i;r++)i=window[u[r]+"RequestAnimationFrame"];i||(i=function(n){window.setTimeout(n,0)});i(n,t)}(n,t)}).then(n)},setTimeout:ky,setInterval:ptt,setEditorTimeout:function(n,t,i){return ky(function(){n.removed||t()},i)},setEditorInterval:function(n,t,i){var r;return r=ptt(function(){n.removed?clearInterval(r):t()},i)},debounce:wtt,throttle:wtt,clearInterval:function(n){return clearInterval(n)},clearTimeout:function(n){return clearTimeout(n)}},pdt=/^(?:mouse|contextmenu)|click/,wdt={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},rc=function(){return!1},uc=function(){return!0},fc=function(n,t,i,r){n.addEventListener?n.addEventListener(t,i,r||!1):n.attachEvent&&n.attachEvent("on"+t,i)},dy=function(n,t,i,r){n.removeEventListener?n.removeEventListener(t,i,r||!1):n.detachEvent&&n.detachEvent("on"+t,i)},ao=function(n,t){var e,o,c,f,h,l,i=t||{};for(e in n)wdt[e]||(i[e]=n[e]);if(i.target||(i.target=i.srcElement||document),s.experimentalShadowDom&&(i.target=(o=n,c=i.target,h=c,(f=o.path)&&0<f.length&&(h=f[0]),o.composedPath&&(f=o.composedPath())&&0<f.length&&(h=f[0]),h)),n&&pdt.test(n.type)&&n.pageX===undefined&&n.clientX!==undefined){var a=i.target.ownerDocument||document,r=a.documentElement,u=a.body;i.pageX=n.clientX+(r&&r.scrollLeft||u&&u.scrollLeft||0)-(r&&r.clientLeft||u&&u.clientLeft||0);i.pageY=n.clientY+(r&&r.scrollTop||u&&u.scrollTop||0)-(r&&r.clientTop||u&&u.clientTop||0)}return i.preventDefault=function(){i.isDefaultPrevented=uc;n&&(n.preventDefault?n.preventDefault():n.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=uc;n&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0)},!(i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=uc;i.stopPropagation()})==((l=i).isDefaultPrevented===uc||l.isDefaultPrevented===rc)&&(i.isDefaultPrevented=rc,i.isPropagationStopped=rc,i.isImmediatePropagationStopped=rc),"undefined"==typeof i.metaKey&&(i.metaKey=!1),i},bdt=function(n,t,i){var r=n.document,f={type:"ready"};if(i.domLoaded)t(f);else{var e=function(){return"complete"===r.readyState||"interactive"===r.readyState&&r.body},u=function(){i.domLoaded||(i.domLoaded=!0,t(f))},o=function(){e()&&(dy(r,"readystatechange",o),u())},h=function(){try{r.documentElement.doScroll("left")}catch(n){return void bt.setTimeout(h)}u()};!r.addEventListener||s.ie&&s.ie<11?(fc(r,"readystatechange",o),r.documentElement.doScroll&&n.self===n.top&&h()):e()?u():fc(n,"DOMContentLoaded",u);fc(n,"load",u)}},ur=function(){var u,t,f,e,o,n=this,i={},r;t="mce-data-"+(+new Date).toString(32);e="onmouseenter"in document.documentElement;f="onfocusin"in document.documentElement;o={mouseenter:"mouseover",mouseleave:"mouseout"};u=1;n.domLoaded=!1;n.events=i;r=function(n,t){var u,r,e,f,o=i[t];if(u=o&&o[n.type])for(r=0,e=u.length;r<e;r++)if((f=u[r])&&!1===f.func.call(f.scope,n)&&n.preventDefault(),n.isImmediatePropagationStopped())return};n.bind=function(s,h,c,l){var v,y,k,a,w,p,b,d=window,g=function(n){r(ao(n||d.event),v)};if(s&&3!==s.nodeType&&8!==s.nodeType){for(s[t]?v=s[t]:(v=u++,s[t]=v,i[v]={}),l=l||s,k=(h=h.split(" ")).length;k--;)p=g,w=b=!1,"DOMContentLoaded"===(a=h[k])&&(a="ready"),n.domLoaded&&"ready"===a&&"complete"===s.readyState?c.call(l,ao({type:a})):(e||(w=o[a])&&(p=function(n){var i,t;if(i=n.currentTarget,(t=n.relatedTarget)&&i.contains)t=i.contains(t);else for(;t&&t!==i;)t=t.parentNode;t||((n=ao(n||d.event)).type="mouseout"===n.type?"mouseleave":"mouseenter",n.target=i,r(n,v))}),f||"focusin"!==a&&"focusout"!==a||(b=!0,w="focusin"===a?"focus":"blur",p=function(n){(n=ao(n||d.event)).type="focus"===n.type?"focusin":"focusout";r(n,v)}),(y=i[v][a])?"ready"===a&&n.domLoaded?c({type:a}):y.push({func:c,scope:l}):(i[v][a]=y=[{func:c,scope:l}],y.fakeName=w,y.capture=b,y.nativeHandler=p,"ready"===a?bdt(s,p,n):fc(s,w||a,p,b)));return s=y=0,c}};n.unbind=function(r,u,f){var c,e,l,h,o,s;if(!r||3===r.nodeType||8===r.nodeType)return n;if(c=r[t]){if(s=i[c],u){for(l=(u=u.split(" ")).length;l--;)if(e=s[o=u[l]]){if(f)for(h=e.length;h--;)if(e[h].func===f){var a=e.nativeHandler,v=e.fakeName,y=e.capture;(e=e.slice(0,h).concat(e.slice(h+1))).nativeHandler=a;e.fakeName=v;e.capture=y;s[o]=e}f&&0!==e.length||(delete s[o],dy(r,e.fakeName||o,e.nativeHandler,e.capture))}}else{for(o in s)e=s[o],dy(r,e.fakeName||o,e.nativeHandler,e.capture);s={}}for(o in s)return n;delete i[c];try{delete r[t]}catch(p){r[t]=null}}return n};n.fire=function(i,u,f){var e;if(!i||3===i.nodeType||8===i.nodeType)return n;for((f=ao(null,f)).type=u,f.target=i;(e=i[t])&&r(f,e),(i=i.parentNode||i.ownerDocument||i.defaultView||i.parentWindow)&&!f.isPropagationStopped(););return n};n.clean=function(i){var r,f,u=n.unbind;if(!i||3===i.nodeType||8===i.nodeType)return n;if(i[t]&&u(i),i.getElementsByTagName||(i=i.document),i&&i.getElementsByTagName)for(u(i),r=(f=i.getElementsByTagName("*")).length;r--;)(i=f[r])[t]&&u(i);return n};n.destroy=function(){i={}};n.cancel=function(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}};ur.Event=new ur;ur.Event.bind(window,"ready",function(){});var ft="sizzle"+-new Date,vi=window.document,di=0,kdt=0,btt=ip(),ktt=ip(),dtt=ip(),gy=function(n,t){return n===t&&(df=!0),0},ec=typeof undefined,ddt={}.hasOwnProperty,br=[],gdt=br.pop,ngt=br.push,kr=br.push,gtt=br.slice,gu=br.indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(this[t]===n)return t;return-1},g="[\\x20\\t\\r\\n\\f]",nf="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",nit="\\["+g+"*("+nf+")(?:"+g+"*([*^$|!~]?=)"+g+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+nf+"))|)"+g+"*\\]",tit=":("+nf+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nit+")*)|.*)\\)|)",oc=new RegExp("^"+g+"+|((?:^|[^\\\\])(?:\\\\.)*)"+g+"+$","g"),tgt=new RegExp("^"+g+"*,"+g+"*"),igt=new RegExp("^"+g+"*([>+~]|"+g+")"+g+"*"),rgt=new RegExp("="+g+"*([^\\]'\"]*?)"+g+"*\\]","g"),ugt=new RegExp(tit),fgt=new RegExp("^"+nf+"$"),sc={ID:new RegExp("^#("+nf+")"),CLASS:new RegExp("^\\.("+nf+")"),TAG:new RegExp("^("+nf+"|[*])"),ATTR:new RegExp("^"+nit),PSEUDO:new RegExp("^"+tit),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+g+"*(even|odd|(([+-]|)(\\d*)n|)"+g+"*(?:([+-]|)"+g+"*(\\d+)|))"+g+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+g+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+g+"*((?:-\\d)?\\d*)"+g+"*\\)|)(?=[^-]|$)","i")},egt=/^(?:input|select|textarea|button)$/i,ogt=/^h\d$/i,np=/^[^{]+\{\s*\[native \w/,sgt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tp=/[+~]/,hgt=/'|\\/g,dr=new RegExp("\\\\([\\da-f]{1,6}"+g+"?|("+g+")|.)","ig"),gr=function(n,t,i){var r="0x"+t-65536;return r!=r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{kr.apply(br=gtt.call(vi.childNodes),vi.childNodes);br[vi.childNodes.length].nodeType}catch(yki){kr={apply:br.length?function(n,t){ngt.apply(n,gtt.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}v=function(n,t,i,r){var h,u,f,o,c,s,l,e,v,a;if((t?t.ownerDocument||t:vi)!==ii&&pr(t),i=i||[],!n||"string"!=typeof n)return i;if(1!==(o=(t=t||ii).nodeType)&&9!==o)return[];if(ki&&!r){if(h=sgt.exec(n))if(f=h[1]){if(9===o){if(!(u=t.getElementById(f))||!u.parentNode)return i;if(u.id===f)return i.push(u),i}else if(t.ownerDocument&&(u=t.ownerDocument.getElementById(f))&&lo(t,u)&&u.id===f)return i.push(u),i}else{if(h[2])return kr.apply(i,t.getElementsByTagName(n)),i;if((f=h[3])&&tt.getElementsByClassName)return kr.apply(i,t.getElementsByClassName(f)),i}if(tt.qsa&&(!wr||!wr.test(n))){if(e=l=ft,v=t,a=9===o&&n,1===o&&"object"!==t.nodeName.toLowerCase()){for(s=co(n),(l=t.getAttribute("id"))?e=l.replace(hgt,"\\$&"):t.setAttribute("id",e),e="[id='"+e+"'] ",c=s.length;c--;)s[c]=e+hc(s[c]);v=tp.test(n)&&rp(t.parentNode)||t;a=s.join(",")}if(a)try{return kr.apply(i,v.querySelectorAll(a)),i}catch(y){}finally{l||t.removeAttribute("id")}}}return ytt(n.replace(oc,"$1"),t,i,r)};for(kf in tt=v.support={},vtt=v.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return!!t&&"HTML"!==t.nodeName},pr=v.setDocument=function(n){var r,t=n?n.ownerDocument||n:vi,i=t.defaultView;return t!==ii&&9===t.nodeType&&t.documentElement?(ic=(ii=t).documentElement,ki=!vtt(t),i&&i!==function(n){try{return n.top}catch(t){}return null}(i)&&(i.addEventListener?i.addEventListener("unload",function(){pr()},!1):i.attachEvent&&i.attachEvent("onunload",function(){pr()})),tt.attributes=!0,tt.getElementsByTagName=!0,tt.getElementsByClassName=np.test(t.getElementsByClassName),tt.getById=!0,b.find.ID=function(n,t){if(typeof t.getElementById!==ec&&ki){var i=t.getElementById(n);return i&&i.parentNode?[i]:[]}},b.filter.ID=function(n){var t=n.replace(dr,gr);return function(n){return n.getAttribute("id")===t}},b.find.TAG=tt.getElementsByTagName?function(n,t){if(typeof t.getElementsByTagName!==ec)return t.getElementsByTagName(n)}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if("*"===n){for(;i=u[f++];)1===i.nodeType&&r.push(i);return r}return u},b.find.CLASS=tt.getElementsByClassName&&function(n,t){if(ki)return t.getElementsByClassName(n)},gf=[],wr=[],tt.disconnectedMatch=!0,wr=wr.length&&new RegExp(wr.join("|")),gf=gf.length&&new RegExp(gf.join("|")),r=np.test(ic.compareDocumentPosition),lo=r||np.test(ic.contains)?function(n,t){var r=9===n.nodeType?n.documentElement:n,i=t&&t.parentNode;return n===i||!(!i||1!==i.nodeType||!(r.contains?r.contains(i):n.compareDocumentPosition&&16&n.compareDocumentPosition(i)))}:function(n,t){if(t)for(;t=t.parentNode;)if(t===n)return!0;return!1},gy=r?function(n,i){if(n===i)return df=!0,0;var r=!n.compareDocumentPosition-!i.compareDocumentPosition;return r||(1&(r=(n.ownerDocument||n)===(i.ownerDocument||i)?n.compareDocumentPosition(i):1)||!tt.sortDetached&&i.compareDocumentPosition(n)===r?n===t||n.ownerDocument===vi&&lo(vi,n)?-1:i===t||i.ownerDocument===vi&&lo(vi,i)?1:yr?gu.call(yr,n)-gu.call(yr,i):0:4&r?-1:1)}:function(n,i){if(n===i)return df=!0,0;var r,u=0,o=n.parentNode,s=i.parentNode,f=[n],e=[i];if(!o||!s)return n===t?-1:i===t?1:o?-1:s?1:yr?gu.call(yr,n)-gu.call(yr,i):0;if(o===s)return iit(n,i);for(r=n;r=r.parentNode;)f.unshift(r);for(r=i;r=r.parentNode;)e.unshift(r);for(;f[u]===e[u];)u++;return u?iit(f[u],e[u]):f[u]===vi?-1:e[u]===vi?1:0},t):ii},v.matches=function(n,t){return v(n,null,null,t)},v.matchesSelector=function(n,t){if((n.ownerDocument||n)!==ii&&pr(n),t=t.replace(rgt,"='$1']"),tt.matchesSelector&&ki&&(!gf||!gf.test(t))&&(!wr||!wr.test(t)))try{var i=(void 0).call(n,t);if(i||tt.disconnectedMatch||n.document&&11!==n.document.nodeType)return i}catch(r){}return 0<v(t,ii,null,[n]).length},v.contains=function(n,t){return(n.ownerDocument||n)!==ii&&pr(n),lo(n,t)},v.attr=function(n,t){(n.ownerDocument||n)!==ii&&pr(n);var r=b.attrHandle[t.toLowerCase()],i=r&&ddt.call(b.attrHandle,t.toLowerCase())?r(n,t,!ki):undefined;return i!==undefined?i:tt.attributes||!ki?n.getAttribute(t):(i=n.getAttributeNode(t))&&i.specified?i.value:null},v.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);},v.uniqueSort=function(n){var r,u=[],t=0,i=0;if(df=!tt.detectDuplicates,yr=!tt.sortStable&&n.slice(0),n.sort(gy),df){for(;r=n[i++];)r===n[i]&&(t=u.push(i));for(;t--;)n.splice(u[t],1)}return yr=null,n},nc=v.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof n.textContent)return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=nc(n)}else if(3===t||4===t)return n.nodeValue}else for(;r=n[u++];)i+=nc(r);return i},(b=v.selectors={cacheLength:50,createPseudo:yi,match:sc,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(dr,gr),n[3]=(n[3]||n[4]||n[5]||"").replace(dr,gr),"~="===n[2]&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),"nth"===n[1].slice(0,3)?(n[3]||v.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*("even"===n[3]||"odd"===n[3])),n[5]=+(n[7]+n[8]||"odd"===n[3])):n[3]&&v.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return sc.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&ugt.test(t)&&(i=co(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(dr,gr).toLowerCase();return"*"===n?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=btt[n+" "];return t||(t=new RegExp("(^|"+g+")"+n+"("+g+"|$)"))&&btt(n,function(n){return t.test("string"==typeof n.className&&n.className||typeof n.getAttribute!==ec&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var u=v.attr(r,n);return null==u?"!="===t:!t||(u+="","="===t?u===i:"!="===t?u!==i:"^="===t?i&&0===u.indexOf(i):"*="===t?i&&-1<u.indexOf(i):"$="===t?i&&u.slice(-i.length)===i:"~="===t?-1<(" "+u+" ").indexOf(i):"|="===t&&(u===i||u.slice(0,i.length+1)===i+"-"))}},CHILD:function(n,t,i,r,u){var o="nth"!==n.slice(0,3),e="last"!==n.slice(-4),f="of-type"===t;return 1===r&&0===u?function(n){return!!n.parentNode}:function(t,i,s){var a,b,h,c,l,y,p=o!==e?"nextSibling":"previousSibling",v=t.parentNode,k=f&&t.nodeName.toLowerCase(),w=!s&&!f;if(v){if(o){for(;p;){for(h=t;h=h[p];)if(f?h.nodeName.toLowerCase()===k:1===h.nodeType)return!1;y=p="only"===n&&!y&&"nextSibling"}return!0}if(y=[e?v.firstChild:v.lastChild],e&&w){for(l=(a=(b=v[ft]||(v[ft]={}))[n]||[])[0]===di&&a[1],c=a[0]===di&&a[2],h=l&&v.childNodes[l];h=++l&&h&&h[p]||(c=l=0)||y.pop();)if(1===h.nodeType&&++c&&h===t){b[n]=[di,l,c];break}}else if(w&&(a=(t[ft]||(t[ft]={}))[n])&&a[0]===di)c=a[1];else for(;(h=++l&&h&&h[p]||(c=l=0)||y.pop())&&((f?h.nodeName.toLowerCase()!==k:1!==h.nodeType)||!++c||(w&&((h[ft]||(h[ft]={}))[n]=[di,c]),h!==t)););return(c-=u)===r||c%r==0&&0<=c/r}}},PSEUDO:function(n,t){var r,i=b.pseudos[n]||b.setFilters[n.toLowerCase()]||v.error("unsupported pseudo: "+n);return i[ft]?i(t):1<i.length?(r=[n,n,"",t],b.setFilters.hasOwnProperty(n.toLowerCase())?yi(function(n,r){for(var e,u=i(n,t),f=u.length;f--;)n[e=gu.call(n,u[f])]=!(r[e]=u[f])}):function(n){return i(n,0,r)}):i}},pseudos:{not:yi(function(n){var i=[],r=[],t=by(n.replace(oc,"$1"));return t[ft]?yi(function(n,i,r,u){for(var e,o=t(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(i[f]=e))}):function(n,u,f){return i[0]=n,t(i,null,f,r),!r.pop()}}),has:yi(function(n){return function(t){return 0<v(n,t).length}}),contains:yi(function(n){return n=n.replace(dr,gr),function(t){return-1<(t.textContent||t.innerText||nc(t)).indexOf(n)}}),lang:yi(function(n){return fgt.test(n||"")||v.error("unsupported lang: "+n),n=n.replace(dr,gr).toLowerCase(),function(t){var i;do if(i=ki?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===n||0===i.indexOf(n+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(n){var t=window.location&&window.location.hash;return t&&t.slice(1)===n.id},root:function(n){return n===ic},focus:function(n){return n===ii.activeElement&&(!ii.hasFocus||ii.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:function(n){return!1===n.disabled},disabled:function(n){return!0===n.disabled},checked:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&!!n.checked||"option"===t&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,!0===n.selected},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!b.pseudos.empty(n)},header:function(n){return ogt.test(n.nodeName)},input:function(n){return egt.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return"input"===t&&"button"===n.type||"button"===t},text:function(n){var t;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(t=n.getAttribute("type"))||"text"===t.toLowerCase())},first:tf(function(){return[0]}),last:tf(function(n,t){return[t-1]}),eq:tf(function(n,t,i){return[i<0?i+t:i]}),even:tf(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:tf(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:tf(function(n,t,i){for(var r=i<0?i+t:i;0<=--r;)n.push(r);return n}),gt:tf(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[kf]=cgt(kf);for(kf in{submit:!0,reset:!0})b.pseudos[kf]=lgt(kf);rit.prototype=b.filters=b.pseudos;b.setFilters=new rit;co=v.tokenize=function(n,t){var u,r,e,f,i,o,s,h=ktt[n+" "];if(h)return t?0:h.slice(0);for(i=n,o=[],s=b.preFilter;i;){for(f in u&&!(r=tgt.exec(i))||(r&&(i=i.slice(r[0].length)||i),o.push(e=[])),u=!1,(r=igt.exec(i))&&(u=r.shift(),e.push({value:u,type:r[0].replace(oc," ")}),i=i.slice(u.length)),b.filter)(r=sc[f].exec(i))&&(!s[f]||(r=s[f](r)))&&(u=r.shift(),e.push({value:u,type:f,matches:r}),i=i.slice(u.length));if(!u)break}return t?i.length:i?v.error(n):ktt(n,o).slice(0)};by=v.compile=function(n,t){var u,f,e,r,o,s,h=[],c=[],i=dtt[n+" "];if(!i){for(t||(t=co(n)),u=t.length;u--;)(i=op(t[u]))[ft]?h.push(i):c.push(i);(i=dtt(n,(f=c,r=0<(e=h).length,o=0<f.length,s=function(n,t,i,u,s){var c,p,a,y=0,h="0",w=n&&[],l=[],k=tc,d=n||o&&b.find.TAG("*",s),g=di+=null==k?1:Math.random()||.1,nt=d.length;for(s&&(tc=t!==ii&&t);h!==nt&&null!=(c=d[h]);h++){if(o&&c){for(p=0;a=f[p++];)if(a(c,t,i)){u.push(c);break}s&&(di=g)}r&&((c=!a&&c)&&y--,n&&w.push(c))}if(y+=h,r&&h!==y){for(p=0;a=e[p++];)a(w,l,t,i);if(n){if(0<y)for(;h--;)w[h]||l[h]||(l[h]=gdt.call(u));l=cc(l)}kr.apply(u,l);s&&!n&&0<l.length&&1<y+e.length&&v.uniqueSort(u)}return s&&(di=g,tc=k),w},r?yi(s):s))).selector=n}return i};ytt=v.select=function(n,t,i,r){var e,u,f,h,c,s="function"==typeof n&&n,o=!r&&co(n=s.selector||n);if(i=i||[],1===o.length){if(2<(u=o[0]=o[0].slice(0)).length&&"ID"===(f=u[0]).type&&tt.getById&&9===t.nodeType&&ki&&b.relative[u[1].type]){if(!(t=(b.find.ID(f.matches[0].replace(dr,gr),t)||[])[0]))return i;s&&(t=t.parentNode);n=n.slice(u.shift().value.length)}for(e=sc.needsContext.test(n)?0:u.length;e--&&(f=u[e],!b.relative[h=f.type]);)if((c=b.find[h])&&(r=c(f.matches[0].replace(dr,gr),tp.test(u[0].type)&&rp(t.parentNode)||t))){if(u.splice(e,1),!(n=r.length&&hc(u)))return kr.apply(i,r),i;break}}return(s||by(n,o))(r,t,!ki,i,tp.test(n)&&rp(t.parentNode)||t),i};tt.sortStable=ft.split("").sort(gy).join("")===ft;tt.detectDuplicates=!!df;pr();tt.sortDetached=!0;var uit=Array.isArray,sp=function(n,t,i){var r,u;if(!n)return 0;if(i=i||n,n.length!==undefined){for(r=0,u=n.length;r<u;r++)if(!1===t.call(i,n[r],r,n))return 0}else for(r in n)if(n.hasOwnProperty(r)&&!1===t.call(i,n[r],r,n))return 0;return 1},fit=function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r],r,n))return r;return-1},h={isArray:uit,toArray:function(n){var t,r,i=n;if(!uit(n))for(i=[],t=0,r=n.length;t<r;t++)i[t]=n[t];return i},each:sp,map:function(n,t){var i=[];return sp(n,function(r,u){i.push(t(r,u,n))}),i},filter:function(n,t){var i=[];return sp(n,function(r,u){t&&!t(r,u,n)||i.push(r)}),i},indexOf:function(n,t){var i,r;if(n)for(i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},reduce:function(n,t,i,r){var u=0;for(arguments.length<3&&(i=n[0]);u<n.length;u++)i=t.call(r,i,n[u],u);return i},findIndex:fit,find:function(n,t,i){var r=fit(n,t,i);return-1!==r?n[r]:undefined},last:function(n){return n[n.length-1]}},agt=/^\s*|\s*$/g,eit=function(n){return null===n||n===undefined?"":(""+n).replace(agt,"")},oit=function(n,t){return t?!("array"!==t||!h.isArray(n))||typeof n===t:n!==undefined},sit=function(n,t,i,r){r=r||this;n&&(i&&(n=n[i]),h.each(n,function(n,u){if(!1===t.call(r,n,u,i))return!1;sit(n,t,i,r)}))},i={trim:eit,isArray:h.isArray,is:oit,toArray:h.toArray,makeMap:function(n,t,i){var r;for(t=t||",","string"==typeof(n=n||[])&&(n=n.split(t)),i=i||{},r=n.length;r--;)i[n[r]]={};return i},each:h.each,map:h.map,grep:h.filter,inArray:h.indexOf,hasOwn:function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},extend:function(n,t){for(var r,e,u,s,f,o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];for(f=arguments,r=1,e=f.length;r<e;r++)for(u in t=f[r])t.hasOwnProperty(u)&&(s=t[u])!==undefined&&(n[u]=s);return n},create:function(n,t,i){var f,u,r,o,s,e=this,h=0;if(n=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(n),r=n[3].match(/(^|\.)(\w+)$/i)[2],!(u=e.createNS(n[3].replace(/\.\w+$/,""),i))[r]){if("static"===n[2])return u[r]=t,void(this.onCreate&&this.onCreate(n[2],n[3],u[r]));t[r]||(t[r]=function(){},h=1);u[r]=t[r];e.extend(u[r].prototype,t);n[5]&&(f=e.resolve(n[5]).prototype,o=n[5].match(/\.(\w+)$/i)[1],s=u[r],u[r]=h?function(){return f[o].apply(this,arguments)}:function(){return this.parent=f[o],s.apply(this,arguments)},u[r].prototype[r]=u[r],e.each(f,function(n,t){u[r].prototype[t]=f[t]}),e.each(t,function(n,t){f[t]?u[r].prototype[t]=function(){return this.parent=f[t],n.apply(this,arguments)}:t!==r&&(u[r].prototype[t]=n)}));e.each(t["static"],function(n,t){u[r][t]=n})}},walk:sit,createNS:function(n,t){var i,r;for(t=t||window,n=n.split("."),i=0;i<n.length;i++)t[r=n[i]]||(t[r]={}),t=t[r];return t},resolve:function(n,t){var i,r;for(t=t||window,i=0,r=(n=n.split(".")).length;i<r&&(t=t[n[i]]);i++);return t},explode:function(n,t){return!n||oit(n,"array")?n:h.map(n.split(t||","),eit)},_addCacheSuffix:function(n){var t=s.cacheSuffix;return t&&(n+=(-1===n.indexOf("?")?"?":"&")+t),n}},hit=document,hp=Array.prototype.push,vgt=Array.prototype.slice,ygt=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,vo=ur.Event,pgt=i.makeMap("children,contents,next,prev"),yo=function(n){return void 0!==n},cp=function(n){return"string"==typeof n},cit=function(n,t){var i,u,r;for(r=(t=t||hit).createElement("div"),i=t.createDocumentFragment(),r.innerHTML=n;u=r.firstChild;)i.appendChild(u);return i},ne=function(n,t,i,r){var u;if(cp(t))t=cit(t,lp(n[0]));else if(t.length&&!t.nodeType){if(t=o.makeArray(t),r)for(u=t.length-1;0<=u;u--)ne(n,t[u],i,r);else for(u=0;u<t.length;u++)ne(n,t[u],i,r);return n}if(t.nodeType)for(u=n.length;u--;)i.call(n[u],t);return n},lit=function(n,t){return n&&t&&-1!==(" "+n.className+" ").indexOf(" "+t+" ")},ait=function(n,t,i){var u,r;return t=o(t)[0],n.each(function(){var n=this;i&&u===n.parentNode||(u=n.parentNode,r=t.cloneNode(!1),n.parentNode.insertBefore(r,n));r.appendChild(n)}),n},wgt=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),bgt=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),kgt={"for":"htmlFor","class":"className",readonly:"readOnly"},vit={float:"cssFloat"},po={},lc={},o=function(n,t){return new o.fn.init(n,t)},dgt=/^\s*|\s*$/g,yit=function(n){return null===n||n===undefined?"":(""+n).replace(dgt,"")},gi=function(n,t){var f,u,r,i;if(n)if((f=n.length)===undefined){for(u in n)if(n.hasOwnProperty(u)&&(i=n[u],!1===t.call(i,u,i)))break}else for(r=0;r<f&&(i=n[r],!1!==t.call(i,r,i));r++);return n},pit=function(n,t){var i=[];return gi(n,function(n,r){t(r,n)&&i.push(r)}),i},lp=function(n){return n?9===n.nodeType?n:n.ownerDocument:hit};o.fn=o.prototype={constructor:o,selector:"",context:null,length:0,init:function(n,t){var u,r,i=this;if(!n)return i;if(n.nodeType)return i.context=i[0]=n,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return o(n).attr(t);i.context=t=document}if(cp(n)){if(!(u="<"===(i.selector=n).charAt(0)&&">"===n.charAt(n.length-1)&&3<=n.length?[null,n,null]:ygt.exec(n)))return o(t).find(n);if(u[1])for(r=cit(n,lp(t)).firstChild;r;)hp.call(i,r),r=r.nextSibling;else{if(!(r=lp(t).getElementById(u[2])))return i;if(r.id!==u[2])return i.find(n);i.length=1;i[0]=r}}else this.add(n,!1);return i},toArray:function(){return i.toArray(this)},add:function(n,t){var u,r,i=this;if(cp(n))return i.add(o(n));if(!1!==t)for(u=o.unique(i.toArray().concat(o.makeArray(n))),i.length=u.length,r=0;r<u.length;r++)i[r]=u[r];else hp.apply(i,o.makeArray(n));return i},attr:function(n,t){var r,i=this;if("object"==typeof n)gi(n,function(n,t){i.attr(n,t)});else{if(!yo(t)){if(i[0]&&1===i[0].nodeType){if((r=po[n])&&r.get)return r.get(i[0],n);if(bgt[n])return i.prop(n)?n:undefined;null===(t=i[0].getAttribute(n,2))&&(t=undefined)}return t}this.each(function(){var i;if(1===this.nodeType){if((i=po[n])&&i.set)return void i.set(this,t);null===t?this.removeAttribute(n,2):this.setAttribute(n,t,2)}})}return i},removeAttr:function(n){return this.attr(n,null)},prop:function(n,t){var i=this;if("object"==typeof(n=kgt[n]||n))gi(n,function(n,t){i.prop(n,t)});else{if(!yo(t))return i[0]&&i[0].nodeType&&n in i[0]?i[0][n]:t;this.each(function(){1===this.nodeType&&(this[n]=t)})}return i},css:function(n,t){var i,r,u=this,f=function(n){return n.replace(/-(\D)/g,function(n,t){return t.toUpperCase()})},e=function(n){return n.replace(/[A-Z]/g,function(n){return"-"+n})};if("object"==typeof n)gi(n,function(n,t){u.css(n,t)});else if(yo(t))n=f(n),"number"!=typeof t||wgt[n]||(t=t.toString()+"px"),u.each(function(){var i=this.style;if((r=lc[n])&&r.set)r.set(this,t);else{try{this.style[vit[n]||n]=t}catch(u){}null!==t&&""!==t||(i.removeProperty?i.removeProperty(e(n)):i.removeAttribute(n))}});else{if(i=u[0],(r=lc[n])&&r.get)return r.get(i);if(!i.ownerDocument.defaultView)return i.currentStyle?i.currentStyle[f(n)]:"";try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(e(n))}catch(o){return undefined}}return u},remove:function(){for(var n,t=this.length;t--;)n=this[t],vo.clean(n),n.parentNode&&n.parentNode.removeChild(n);return this},empty:function(){for(var n,t=this.length;t--;)for(n=this[t];n.firstChild;)n.removeChild(n.firstChild);return this},html:function(n){var i,t=this;if(yo(n)){i=t.length;try{for(;i--;)t[i].innerHTML=n}catch(r){o(t[i]).empty().append(n)}return t}return t[0]?t[0].innerHTML:""},text:function(n){var i,t=this;if(yo(n)){for(i=t.length;i--;)"innerText"in t[i]?t[i].innerText=n:t[0].textContent=n;return t}return t[0]?t[0].innerText||t[0].textContent:""},append:function(){return ne(this,arguments,function(n){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(n)})},prepend:function(){return ne(this,arguments,function(n){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(n,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?ne(this,arguments,function(n){this.parentNode.insertBefore(n,this)}):this},after:function(){return this[0]&&this[0].parentNode?ne(this,arguments,function(n){this.parentNode.insertBefore(n,this.nextSibling)},!0):this},appendTo:function(n){return o(n).append(this),this},prependTo:function(n){return o(n).prepend(this),this},replaceWith:function(n){return this.before(n).remove()},wrap:function(n){return ait(this,n)},wrapAll:function(n){return ait(this,n,!0)},wrapInner:function(n){return this.each(function(){o(this).contents().wrapAll(n)}),this},unwrap:function(){return this.parent().each(function(){o(this).replaceWith(this.childNodes)})},clone:function(){var n=[];return this.each(function(){n.push(this.cloneNode(!0))}),o(n)},addClass:function(n){return this.toggleClass(n,!0)},removeClass:function(n){return this.toggleClass(n,!1)},toggleClass:function(n,t){var i=this;return"string"!=typeof n||(-1!==n.indexOf(" ")?gi(n.split(" "),function(){i.toggleClass(this,t)}):i.each(function(i,r){var u,f;(f=lit(r,n))!==t&&(u=r.className,f?r.className=yit((" "+u+" ").replace(" "+n+" "," ")):r.className+=u?" "+n:n)})),i},hasClass:function(n){return lit(this[0],n)},each:function(n){return gi(this,n)},on:function(n,t){return this.each(function(){vo.bind(this,n,t)})},off:function(n,t){return this.each(function(){vo.unbind(this,n,t)})},trigger:function(n){return this.each(function(){"object"==typeof n?vo.fire(this,n.type,n):vo.fire(this,n)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new o(vgt.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(n){for(var r=[],t=0,i=this.length;t<i;t++)o.find(n,this[t],r);return o(r)},filter:function(n){return o("function"==typeof n?pit(this.toArray(),function(t,i){return n(i,t)}):o.filter(n,this.toArray()))},closest:function(n){var t=[];return n instanceof o&&(n=n[0]),this.each(function(i,r){for(;r;){if("string"==typeof n&&o(r).is(n)){t.push(r);break}if(r===n){t.push(r);break}r=r.parentNode}}),o(t)},offset:function(n){var i,r,t,u,f=0,e=0;return n?this.css(n):((i=this[0])&&(t=(r=i.ownerDocument).documentElement,i.getBoundingClientRect&&(f=(u=i.getBoundingClientRect()).left+(t.scrollLeft||r.body.scrollLeft)-t.clientLeft,e=u.top+(t.scrollTop||r.body.scrollTop)-t.clientTop)),{left:f,top:e})},push:hp,sort:[].sort,splice:[].splice};i.extend(o,{extend:i.extend,makeArray:function(n){return(t=n)&&t===t.window||n.nodeType?[n]:i.toArray(n);var t},inArray:function(n,t){var i;if(t.indexOf)return t.indexOf(n);for(i=t.length;i--;)if(t[i]===n)return i;return-1},isArray:i.isArray,each:gi,trim:yit,grep:pit,find:v,expr:v.selectors,unique:v.uniqueSort,text:v.getText,contains:v.contains,filter:function(n,t,i){var r=t.length;for(i&&(n=":not("+n+")");r--;)1!==t[r].nodeType&&t.splice(r,1);return 1===t.length?o.find.matchesSelector(t[0],n)?[t[0]]:[]:o.find.matches(n,t)}});var wit=function(n,t,i){var u=[],r=n[t];for("string"!=typeof i&&i instanceof o&&(i=i[0]);r&&9!==r.nodeType;){if(i!==undefined){if(r===i)break;if("string"==typeof i&&o(r).is(i))break}1===r.nodeType&&u.push(r);r=r[t]}return u},ap=function(n,t,i,r){var u=[];for(r instanceof o&&(r=r[0]);n;n=n[t])if(!i||n.nodeType===i){if(r!==undefined){if(n===r)break;if("string"==typeof r&&o(n).is(r))break}u.push(n)}return u},bit=function(n,t,i){for(n=n[t];n;n=n[t])if(n.nodeType===i)return n;return null};gi({parent:function(n){var t=n.parentNode;return t&&11!==t.nodeType?t:null},parents:function(n){return wit(n,"parentNode")},next:function(n){return bit(n,"nextSibling",1)},prev:function(n){return bit(n,"previousSibling",1)},children:function(n){return ap(n.firstChild,"nextSibling",1)},contents:function(n){return i.toArray(("iframe"===n.nodeName?n.contentDocument||n.contentWindow.document:n).childNodes)}},function(n,t){o.fn[n]=function(i){var r=[];return this.each(function(){var n=t.call(r,this,i,r);n&&(o.isArray(n)?r.push.apply(r,n):r.push(n))}),1<this.length&&(pgt[n]||(r=o.unique(r)),0===n.indexOf("parents")&&(r=r.reverse())),r=o(r),i?r.filter(i):r}});gi({parentsUntil:function(n,t){return wit(n,"parentNode",t)},nextUntil:function(n,t){return ap(n,"nextSibling",1,t).slice(1)},prevUntil:function(n,t){return ap(n,"previousSibling",1,t).slice(1)}},function(n,t){o.fn[n]=function(i,r){var u=[];return this.each(function(){var n=t.call(u,this,i,u);n&&(o.isArray(n)?u.push.apply(u,n):u.push(n))}),1<this.length&&(u=o.unique(u),0!==n.indexOf("parents")&&"prevUntil"!==n||(u=u.reverse())),u=o(u),r?u.filter(r):u}});o.fn.is=function(n){return!!n&&0<this.filter(n).length};o.fn.init.prototype=o.fn;o.overrideDefaults=function(n){var t,i=function(r,u){return t=t||n(),0===arguments.length&&(r=t.element),u||(u=t.context),new i.fn.init(r,u)};return o.extend(i,this),i};ac=function(n,t,i){gi(i,function(i,r){n[i]=n[i]||{};n[i][t]=r})};s.ie&&s.ie<8&&(ac(po,"get",{maxlength:function(n){var t=n.maxLength;return 2147483647===t?undefined:t},size:function(n){var t=n.size;return 20===t?undefined:t},"class":function(n){return n.className},style:function(n){var t=n.style.cssText;return 0===t.length?undefined:t}}),ac(po,"set",{"class":function(n,t){n.className=t},style:function(n,t){n.style.cssText=t}}));s.ie&&s.ie<9&&(vit.float="styleFloat",ac(lc,"set",{opacity:function(n,t){var i=n.style;null===t||""===t?i.removeAttribute("filter"):(i.zoom=1,i.filter="alpha(opacity="+100*t+")")}}));o.attrHooks=po;o.cssHooks=lc;var kit,dit=function(n){var t,i=!1;return function(){return i||(i=!0,t=n.apply(null,arguments)),t}},ggt=function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},vp(i(1),i(2))):{major:0,minor:0}},git=function(){return vp(0,0)},vp=function(n,t){return{major:n,minor:t}},vc={nu:vp,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?git():ggt(n,i)},unknown:git},nrt="Firefox",te=function(n,t){return function(){return t===n}},trt=function(n){var t=n.current;return{current:t,version:n.version,isEdge:te("Edge",t),isChrome:te("Chrome",t),isIE:te("IE",t),isOpera:te("Opera",t),isFirefox:te(nrt,t),isSafari:te("Safari",t)}},irt={unknown:function(){return trt({current:undefined,version:vc.unknown()})},nu:trt,edge:t.constant("Edge"),chrome:t.constant("Chrome"),ie:t.constant("IE"),opera:t.constant("Opera"),firefox:t.constant(nrt),safari:t.constant("Safari")},rrt="Windows",urt="Android",frt="Solaris",ert="FreeBSD",rf=function(n,t){return function(){return t===n}},ort=function(n){var t=n.current;return{current:t,version:n.version,isWindows:rf(rrt,t),isiOS:rf("iOS",t),isAndroid:rf(urt,t),isOSX:rf("OSX",t),isLinux:rf("Linux",t),isSolaris:rf(frt,t),isFreeBSD:rf(ert,t)}},srt={unknown:function(){return ort({current:undefined,version:vc.unknown()})},nu:ort,windows:t.constant(rrt),ios:t.constant("iOS"),android:t.constant(urt),linux:t.constant("Linux"),osx:t.constant("OSX"),solaris:t.constant(frt),freebsd:t.constant(ert)},hrt=function(n,t){var i=String(t).toLowerCase();return u.find(n,function(n){return n.search(i)})},nnt=function(n,t){return hrt(n,t).map(function(n){var i=vc.detect(n.versionRegexes,t);return{current:n.name,version:i}})},tnt=function(n,t){return hrt(n,t).map(function(n){var i=vc.detect(n.versionRegexes,t);return{current:n.name,version:i}})},kt=function(n,t){return-1!==n.indexOf(t)},int=function(n){return n.replace(/^\s+|\s+$/g,"")},yp=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,nu=function(n){return function(t){return kt(t,n)}},rnt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return kt(n,"edge/")&&kt(n,"chrome")&&kt(n,"safari")&&kt(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yp],search:function(n){return kt(n,"chrome")&&!kt(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return kt(n,"msie")||kt(n,"trident")}},{name:"Opera",versionRegexes:[yp,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:nu("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:nu("firefox")},{name:"Safari",versionRegexes:[yp,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(kt(n,"safari")||kt(n,"mobile/"))&&kt(n,"applewebkit")}}],unt=[{name:"Windows",search:nu("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return kt(n,"iphone")||kt(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:nu("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:nu("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:nu("linux"),versionRegexes:[]},{name:"Solaris",search:nu("sunos"),versionRegexes:[]},{name:"FreeBSD",search:nu("freebsd"),versionRegexes:[]}],crt={browsers:t.constant(rnt),oses:t.constant(unt)},fnt=function(n){var i,o,r,u,s,h,c,f,e,l,a,p=crt.browsers(),w=crt.oses(),v=nnt(p,n).fold(irt.unknown,irt.nu),y=tnt(w,n).fold(srt.unknown,srt.nu);return{browser:v,os:y,deviceType:(o=v,r=n,u=(i=y).isiOS()&&!0===/ipad/i.test(r),s=i.isiOS()&&!u,h=i.isAndroid()&&3===i.version.major,c=i.isAndroid()&&4===i.version.major,f=u||h||c&&!0===/mobile/i.test(r),e=i.isiOS()||i.isAndroid(),l=e&&!f,a=o.isSafari()&&i.isiOS()&&!1===/safari/i.test(r),{isiPad:t.constant(u),isiPhone:t.constant(s),isTablet:t.constant(f),isPhone:t.constant(l),isTouch:t.constant(e),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:t.constant(a)})}},tu={detect:dit(function(){var n=navigator.userAgent;return fnt(n)})},wo=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:t.constant(n)}},f={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return wo(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return wo(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return wo(i)},fromDom:wo,fromPoint:function(t,i,r){return n.from(t.dom().elementFromPoint(i,r)).map(wo)}},ent=8,lrt=9,art=1,vrt=function(n){return n.dom().nodeName.toLowerCase()},pp=function(n){return n.dom().nodeType},wp=function(n){return function(t){return pp(t)===n}},ont=wp(art),snt=wp(3),hnt=wp(lrt),nt={name:vrt,type:pp,value:function(n){return n.dom().nodeValue},isElement:ont,isText:snt,isDocument:hnt,isComment:function(n){return pp(n)===ent||"#comment"===vrt(n)}},bp=(kit=Object.keys)===undefined?function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}:kit,yc=function(n,t){for(var r,u=bp(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},yrt=function(n,t){var i={};return yc(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},prt=function(n,t){var i=[];return yc(n,function(n,r){i.push(t(n,r))}),i},wrt=function(n){return prt(n,function(n){return n})},ie={bifilter:function(n,t){var i={},r={};return yc(n,function(n,u){(t(n,u)?i:r)[u]=n}),{t:i,f:r}},each:yc,map:function(n,t){return yrt(n,function(n,i,r){return{k:i,v:t(n,i,r)}})},mapToArray:prt,tupleMap:yrt,find:function(t,i){for(var u,f,e=bp(t),r=0,o=e.length;r<o;r++)if(u=e[r],f=t[u],i(f,u,t))return n.some(f);return n.none()},keys:bp,values:wrt,size:function(n){return wrt(n).length}},brt=function(n,t,i){if(!(p.isString(i)||p.isBoolean(i)||p.isNumber(i)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")},krt=function(n,t,i){brt(n.dom(),t,i)},drt=function(n,t){var i=n.dom().getAttribute(t);return null===i?undefined:i},kp=function(n,t){var i=n.dom();return!(!i||!i.hasAttribute)&&i.hasAttribute(t)},dt={clone:function(n){return u.foldl(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:krt,setAll:function(n,t){var i=n.dom();ie.each(t,function(n,t){brt(i,t,n)})},get:drt,has:kp,remove:function(n,t){n.dom().removeAttribute(t)},hasNone:function(n){var t=n.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(n,t,i){nt.isElement(n)&&nt.isElement(t)&&u.each(i,function(i){var f,u,r;u=t;kp(f=n,r=i)&&!kp(u,r)&&krt(u,r,drt(f,r))})}},cnt=dit(function(){return grt(f.fromDom(document))}),grt=function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return f.fromDom(t)},nut={body:cnt,getBody:grt,inBody:function(n){var t=nt.isText(n)?n.dom().parentNode:n.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)}},tut=function(n){return n.style!==undefined},lnt=function(n,t,i){if(!p.isString(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);tut(n)&&n.style.setProperty(t,i)},iut=function(n,t){return tut(n)?n.style.getPropertyValue(t):""},ant=function(t,i){var r=t.dom(),u=iut(r,i);return n.from(u).filter(function(n){return 0<n.length})},vnt=function(n,t){var i=n.dom();ie.each(t,function(n,t){lnt(i,t,n)})},rut=function(n,t){var i=n.dom(),r=window.getComputedStyle(i).getPropertyValue(t),u=""!==r||nut.inBody(n)?r:iut(i,t);return null===u?undefined:u},ynt=ant,pc=function(n){return n.slice(0).sort()},pnt=function(n,t){throw new Error("All required keys ("+pc(n).join(", ")+") were not specified. Specified keys were: "+pc(t).join(", ")+".");},wnt=function(n){throw new Error("Unsupported keys for object: "+pc(n).join(", "));},uut=function(n,t){if(!p.isArray(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");u.each(t,function(t){if(!p.isString(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.");})},bnt=function(n){var t=pc(n);u.find(t,function(n,i){return i<t.length-1&&n===t[i+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].");})},nr={immutable:function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return function(){for(var f,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];if(n.length!==i.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+i.length+" arguments");return f={},u.each(n,function(n,r){f[n]=t.constant(i[r])}),f}},immutableBag:function(i,r){var f=i.concat(r);if(0===f.length)throw new Error("You must specify at least one required or optional field.");return uut("required",i),uut("optional",r),bnt(f),function(e){var s=ie.keys(e),h,o;return u.forall(i,function(n){return u.contains(s,n)})||pnt(i,s),h=u.filter(s,function(n){return!u.contains(f,n)}),0<h.length&&wnt(h),o={},u.each(i,function(n){o[n]=t.constant(e[n])}),u.each(r,function(i){o[i]=t.constant(Object.prototype.hasOwnProperty.call(e,i)?n.some(e[i]):n.none())}),o}}},fut=function(n,t){for(var i=[],u=function(n){return i.push(n),t(n)},r=t(n);(r=r.bind(u)).isSome(););return i},knt=function(){return du.getOrDie("Node")},dnt=function(n,t,i){return 0!=(n.compareDocumentPosition(t)&i)},gnt=function(n,t){return dnt(n,t,knt().DOCUMENT_POSITION_CONTAINED_BY)},eut=art,nti=lrt,out=function(n){return n.nodeType!==eut&&n.nodeType!==nti||0===n.childElementCount},iu={all:function(n,t){var i=t===undefined?document:t.dom();return out(i)?[]:u.map(i.querySelectorAll(n),f.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==eut)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(t,i){var r=i===undefined?document:i.dom();return out(r)?n.none():n.from(r.querySelector(t)).map(f.fromDom)}},sut=function(n,t){return n.dom()===t.dom()},tti=tu.detect().browser.isIE()?function(n,t){return gnt(n.dom(),t.dom())}:function(n,t){var i=n.dom(),r=t.dom();return i!==r&&i.contains(r)},w={eq:sut,isEqualNode:function(n,t){return n.dom().isEqualNode(t.dom())},member:function(n,i){return u.exists(i,t.curry(sut,n))},contains:tti,is:iu.is},hut=function(n){return f.fromDom(n.dom().ownerDocument)},dp=function(t){var i=t.dom();return n.from(i.parentNode).map(f.fromDom)},cut=function(t){var i=t.dom();return n.from(i.previousSibling).map(f.fromDom)},lut=function(t){var i=t.dom();return n.from(i.nextSibling).map(f.fromDom)},wc=function(n){var t=n.dom();return u.map(t.childNodes,f.fromDom)},gp=function(t,i){var r=t.dom().childNodes;return n.from(r[i]).map(f.fromDom)},aut=nr.immutable("element","offset"),y={owner:hut,defaultView:function(n){var t=n.dom().ownerDocument.defaultView;return f.fromDom(t)},documentElement:function(n){var t=hut(n);return f.fromDom(t.dom().documentElement)},parent:dp,findIndex:function(n){return dp(n).bind(function(t){var i=wc(t);return u.findIndex(i,function(t){return w.eq(n,t)})})},parents:function(n,i){for(var u,e,s=p.isFunction(i)?i:t.constant(!1),r=n.dom(),o=[];null!==r.parentNode&&r.parentNode!==undefined;){if(u=r.parentNode,e=f.fromDom(u),o.push(e),!0===s(e))break;r=u}return o},siblings:function(n){return dp(n).map(wc).map(function(t){return u.filter(t,function(t){return!w.eq(n,t)})}).getOr([])},prevSibling:cut,offsetParent:function(t){var i=t.dom();return n.from(i.offsetParent).map(f.fromDom)},prevSiblings:function(n){return u.reverse(fut(n,cut))},nextSibling:lut,nextSiblings:function(n){return fut(n,lut)},children:wc,child:gp,firstChild:function(n){return gp(n,0)},lastChild:function(n){return gp(n,n.dom().childNodes.length-1)},childNodesCount:function(n){return n.dom().childNodes.length},hasChildNodes:function(n){return n.dom().hasChildNodes()},leaf:function(n,t){var i=wc(n);return 0<i.length&&t<i.length?aut(i[t],0):aut(n,t)}},iti=tu.detect().browser,vut=function(n){return u.find(n,nt.isElement)},rti={getPos:function(n,t,i){var r,h,s,e=0,u=0,o=n.ownerDocument;if(i=i||n,t){if(i===n&&t.getBoundingClientRect&&"static"===rut(f.fromDom(n),"position"))return{x:e=(h=t.getBoundingClientRect()).left+(o.documentElement.scrollLeft||n.scrollLeft)-o.documentElement.clientLeft,y:u=h.top+(o.documentElement.scrollTop||n.scrollTop)-o.documentElement.clientTop};for(r=t;r&&r!==i&&r.nodeType;)e+=r.offsetLeft||0,u+=r.offsetTop||0,r=r.offsetParent;for(r=t.parentNode;r&&r!==i&&r.nodeType;)e-=r.scrollLeft||0,u-=r.scrollTop||0,r=r.parentNode;u+=(s=f.fromDom(t),iti.isFirefox()&&"table"===nt.name(s)?vut(y.children(s)).filter(function(n){return"caption"===nt.name(n)}).bind(function(n){return vut(y.nextSiblings(n)).map(function(t){var i=t.dom().offsetTop,r=n.dom().offsetTop,u=n.dom().offsetHeight;return i<=r?-u:0})}).getOr(0):0)}return{x:e,y:u}}},nw=function(t){var i=n.none(),r=[],f=function(n){e()?o(n):r.push(n)},e=function(){return i.isSome()},s=function(n){u.each(n,o)},o=function(n){i.each(function(t){setTimeout(function(){n(t)},0)})};return t(function(t){i=n.some(t);s(r);r=[]}),{get:f,map:function(n){return nw(function(t){f(function(i){t(n(i))})})},isReady:e}},uti={nu:nw,pure:function(n){return nw(function(t){t(n)})}},fti=function(n){return function(){var t=Array.prototype.slice.call(arguments),i=this;setTimeout(function(){n.apply(i,t)},0)}},bo=function(n){var t=function(t){n(fti(t))};return{map:function(n){return bo(function(i){t(function(t){var r=n(t);i(r)})})},bind:function(n){return bo(function(i){t(function(t){n(t).get(i)})})},anonBind:function(n){return bo(function(i){t(function(){n.get(i)})})},toLazy:function(){return uti.nu(t)},get:t}},yut={nu:bo,pure:function(n){return bo(function(t){t(n)})}},eti=function(n,t){return t(function(t){var i=[],r=0;0===n.length?t([]):u.each(n,function(u,f){var e;u.get((e=f,function(u){i[e]=u;++r>=n.length&&t(i)}))})})},put=function(n){return eti(n,yut.nu)},oti={par:put,mapM:function(n,t){var i=u.map(n,t);return put(i)},compose:function(n,t){return function(i){return t(i).bind(n)}}},bc=function(i){return{is:function(n){return i===n},isValue:t.always,isError:t.never,getOr:t.constant(i),getOrThunk:t.constant(i),getOrDie:t.constant(i),or:function(){return bc(i)},orThunk:function(){return bc(i)},fold:function(n,t){return t(i)},map:function(n){return bc(n(i))},each:function(n){n(i)},bind:function(n){return n(i)},exists:function(n){return n(i)},forall:function(n){return n(i)},toOption:function(){return n.some(i)}}},tw=function(i){return{is:t.never,isValue:t.never,isError:t.always,getOr:t.identity,getOrThunk:function(n){return n()},getOrDie:function(){return t.die(String(i))()},or:function(n){return n},orThunk:function(n){return n()},fold:function(n){return n(i)},map:function(){return tw(i)},each:t.noop,bind:function(){return tw(i)},exists:t.never,forall:t.always,toOption:n.none}},wut={value:bc,error:tw};var kc,ru,but,fr=function(n){var i;return function(r){return(i=i||u.mapToObject(n,t.constant(!0))).hasOwnProperty(nt.name(r))}},sti=fr(["h1","h2","h3","h4","h5","h6"]),ko=fr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),kut=function(n){return nt.isElement(n)&&!ko(n)},dut=function(n){return nt.isElement(n)&&"br"===nt.name(n)},gut=fr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),nft=fr(["ul","ol","dl"]),dc=fr(["li","dd","dt"]),hti=fr(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),cti=fr(["thead","tbody","tfoot"]),gc=fr(["td","th"]),nl=fr(["pre","script","textarea","style"]),tl=function(n){return function(t){return!!t&&t.nodeType===n}},er=tl(1),tft=function(n){var t=n.toLowerCase().split(" ");return function(n){var i,r;if(n&&n.nodeType)for(r=n.nodeName.toLowerCase(),i=0;i<t.length;i++)if(r===t[i])return!0;return!1}},ift=function(n){return function(t){return er(t)&&(t.contentEditable===n||t.getAttribute("data-mce-contenteditable")===n)?!0:!1}},lti=tl(3),ati=tl(8),vti=tl(9),yti=tft("br"),pti=ift("true"),wti=ift("false"),r={isText:lti,isElement:er,isComment:ati,isDocument:vti,isBr:yti,isContentEditableTrue:pti,isContentEditableFalse:wti,matchNodeNames:tft,hasPropValue:function(n,t){return function(i){return er(i)&&i[n]===t}},hasAttribute:function(n){return function(t){return er(t)&&t.hasAttribute(n)}},hasAttributeValue:function(n,t){return function(i){return er(i)&&i.getAttribute(n)===t}},matchStyleValues:function(n,t){var i=t.toLowerCase().split(" ");return function(t){var r,u;if(er(t))for(r=0;r<i.length;r++)if(u=t.ownerDocument.defaultView.getComputedStyle(t,null),(u?u.getPropertyValue(n):null)===i[r])return!0;return!1}},isBogus:function(n){return er(n)&&n.hasAttribute("data-mce-bogus")},isBogusAll:function(n){return er(n)&&"all"===n.getAttribute("data-mce-bogus")},isTable:function(n){return er(n)&&"TABLE"===n.tagName}},rft=function(n){return n&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type")},uft=function(n,t){var e,u=t.childNodes,s,o,h,c;if(!r.isElement(t)||!rft(t)){for(e=u.length-1;0<=e;e--)uft(n,u[e]);if(!1===r.isDocument(t)){if(r.isText(t)&&0<t.nodeValue.length){if(s=i.trim(t.nodeValue).length,n.isBlock(t.parentNode)||0<s)return;if(0===s&&(h=(o=t).previousSibling&&"SPAN"===o.previousSibling.nodeName,c=o.nextSibling&&"SPAN"===o.nextSibling.nodeName,h&&c))return}else if(r.isElement(t)&&(1===(u=t.childNodes).length&&rft(u[0])&&t.parentNode.insertBefore(u[0],t),u.length||hti(f.fromDom(t))))return;n.remove(t)}return t}},fft={trimNode:uft},bti=i.makeMap,il=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kti=/[<>&\"\']/g,dti=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,gti={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};ru={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"};but={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};iw=function(n,t){var i,r,u,f={};if(n){for(n=n.split(","),t=t||10,i=0;i<n.length;i+=2)r=String.fromCharCode(parseInt(n[i],t)),ru[r]||(u="&"+n[i+1]+";",f[r]=u,f[u]=r);return f}};kc=iw("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var eft=function(n,t){return n.replace(t?il:rl,function(n){return ru[n]||n})},oft=function(n,t){return n.replace(t?il:rl,function(n){return 1<n.length?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":ru[n]||"&#"+n.charCodeAt(0)+";"})},rw=function(n,t,i){return i=i||kc,n.replace(t?il:rl,function(n){return ru[n]||i[n]||n})},uf={encodeRaw:eft,encodeAllRaw:function(n){return(""+n).replace(kti,function(n){return ru[n]||n})},encodeNumeric:oft,encodeNamed:rw,getEncodeFunc:function(n,t){var r=iw(t)||kc,i=bti(n.replace(/\+/g,","));return i.named&&i.numeric?function(n,t){return n.replace(t?il:rl,function(n){return ru[n]!==undefined?ru[n]:r[n]!==undefined?r[n]:1<n.length?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":"&#"+n.charCodeAt(0)+";"})}:i.named?t?function(n,t){return rw(n,t,r)}:rw:i.numeric?oft:eft},decode:function(n){return n.replace(dti,function(n,t){return t?65535<(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):gti[t]||String.fromCharCode(t):but[n]||kc[n]||(i=n,(r=f.fromTag("div").dom()).innerHTML=i,r.textContent||r.innerText||i);var i,r})}},uu={},nii={},re=i.makeMap,st=i.each,uw=i.extend,sft=i.explode,tii=i.inArray,it=function(n,t){return(n=i.trim(n))?n.split(t||" "):[]},iii=function(n){var o,e,u,r,s,h,f={},t=function(n,t,i){var r,u,e,s=function(n,t){for(var u={},i=0,r=n.length;i<r;i++)u[n[i]]=t||{};return u};for(t=t||"","string"==typeof(i=i||[])&&(i=it(i)),r=(n=it(n)).length;r--;)e={attributes:s(u=it([o,t].join(" "))),attributesOrder:u,children:s(i,nii)},f[n[r]]=e},i=function(n,t){var r,u,i,e;for(r=(n=it(n)).length,t=it(t);r--;)for(u=f[n[r]],i=0,e=t.length;i<e;i++)u.attributes[t[i]]={},u.attributesOrder.push(t[i])};return uu[n]?uu[n]:(o="id accesskey class dir lang style tabindex title role",e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",u="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==n&&(o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",e+=" article aside details dialog figure header footer hgroup section nav",u+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==n&&(o+=" xml:lang",u=[u,h="acronym applet basefont big font strike tt"].join(" "),st(it(h),function(n){t(n,"",u)}),e=[e,s="center dir isindex noframes"].join(" "),r=[e,u].join(" "),st(it(s),function(n){t(n,"",r)})),r=r||[e,u].join(" "),t("html","manifest","head body"),t("head","","base command link meta noscript script style title"),t("title hr noscript br"),t("base","href target"),t("link","href rel media hreflang type sizes hreflang"),t("meta","name http-equiv content charset"),t("style","media type scoped"),t("script","src async defer type charset"),t("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),t("address dt dd div caption","",r),t("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",u),t("blockquote","cite",r),t("ol","reversed start type","li"),t("ul","","li"),t("li","value",r),t("dl","","dt dd"),t("a","href target rel media hreflang type",u),t("q","cite",u),t("ins del","cite datetime",r),t("img","src sizes srcset alt usemap ismap width height"),t("iframe","src name width height",r),t("embed","src type width height"),t("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),t("param","name value"),t("map","name",[r,"area"].join(" ")),t("area","alt coords shape href target rel media hreflang type"),t("table","border","caption colgroup thead tfoot tbody tr"+("html4"===n?" col":"")),t("colgroup","span","col"),t("col","span"),t("tbody thead tfoot","","tr"),t("tr","","td th"),t("td","colspan rowspan headers",r),t("th","colspan rowspan headers scope abbr",r),t("form","accept-charset action autocomplete enctype method name novalidate target",r),t("fieldset","disabled form name",[r,"legend"].join(" ")),t("label","form for",u),t("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),t("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===n?r:u),t("select","disabled form multiple name required size","option optgroup"),t("optgroup","disabled label","option"),t("option","disabled label selected value"),t("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),t("menu","type label",[r,"li"].join(" ")),t("noscript","",r),"html4"!==n&&(t("wbr"),t("ruby","",[u,"rt rp"].join(" ")),t("figcaption","",r),t("mark rt rp summary bdi","",u),t("canvas","width height",r),t("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),t("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),t("picture","","img source"),t("source","src srcset type media sizes"),t("track","kind src srclang label default"),t("datalist","",[u,"option"].join(" ")),t("article section nav aside header footer","",r),t("hgroup","","h1 h2 h3 h4 h5 h6"),t("figure","",[r,"figcaption"].join(" ")),t("time","datetime",u),t("dialog","open",r),t("command","type label icon disabled checked radiogroup command"),t("output","for form name",u),t("progress","value max",u),t("meter","value min max low high optimum",u),t("details","open",[r,"summary"].join(" ")),t("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==n&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==n&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),st(it("a form meter progress dfn"),function(n){f[n]&&delete f[n].children[n]}),delete f.caption.children.table,delete f.script,uu[n]=f)},fw=function(n,t){var i;return n&&(i={},"string"==typeof n&&(n={"*":n}),st(n,function(n,r){i[r]=i[r.toUpperCase()]="map"===t?re(n,/[, ]/):sft(n,/[, ]/)})),i};ew=function(n,t,i,r){var u=function(n){return 1<(n=parseInt(n,10).toString(16)).length?n:"0"+n};return"#"+u(t)+u(i)+u(r)};var sw,ue=i.each,rii=i.grep,hft=s.ie,uii=/^([a-z0-9],?)+$/i,cft=/^[ \t\r\n]*$/,fii=function(n,t,i){var r={},u=t.keep_values,f={set:function(n,r,u){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||i(),r,u,n[0]));n.attr("data-mce-"+u,r).attr(u,r)},get:function(n,t){return n.attr("data-mce-"+t)||n.attr(t)}};return r={style:{set:function(n,t){null===t||"object"!=typeof t?(u&&n.attr("data-mce-style",t),n.attr("style",t)):n.css(t)},get:function(t){var i=t.attr("data-mce-style")||t.attr("style");return n.serialize(n.parse(i),t[0].nodeName)}}},u&&(r.href=r.src=f),r},lft=function(n,t){var r=t.attr("style"),i=n.serialize(n.parse(r),t[0].nodeName);i||(i=null);t.attr("data-mce-style",i)},fe=function(n,t){var r,i,u=0;if(n)for(r=n.nodeType,n=n.previousSibling;n;n=n.previousSibling)i=n.nodeType,(!t||3!==i||i!==r&&n.nodeValue.length)&&(u++,r=i);return u};(sw=ee||(ee={})).DOM=sw(document);sw.nodeIndex=fe;var d=ee,eii=d.DOM,hw=i.each,oii=i.grep,ul=function(n){return"function"==typeof n},or=function(){var n={},f=[],t={},u=[],r=0;this.isDone=function(t){return 2===n[t]};this.markDone=function(t){n[t]=2};this.add=this.load=function(i,r,u,e){n[i]===undefined&&(f.push(i),n[i]=0);r&&(t[i]||(t[i]=[]),t[i].push({success:r,failure:e,scope:u||this}))};this.remove=function(i){delete n[i];delete t[i]};this.loadQueue=function(n,t,i){this.loadScripts(f,n,t,i)};this.loadScripts=function(f,e,o,s){var c,l=[],h=function(n,i){hw(t[i],function(t){ul(t[n])&&t[n].call(t.scope)});t[i]=undefined};u.push({success:e,failure:s,scope:o||this});(c=function(){var e=oii(f),t;(f.length=0,hw(e,function(t){var f,a,e,u,o,v,s;2!==n[t]?3!==n[t]?1!==n[t]&&(n[t]=1,r++,f=t,a=function(){n[t]=2;r--;h("success",t);c()},e=function(){n[t]=3;r--;l.push(t);h("failure",t);c()},s=function(){v.remove(o);u&&(u.onreadystatechange=u.onload=u=null);a()},o=(v=eii).uniqueId(),(u=document.createElement("script")).id=o,u.type="text/javascript",u.src=i._addCacheSuffix(f),"onreadystatechange"in u?u.onreadystatechange=function(){/loaded|complete/.test(u.readyState)&&s()}:u.onload=s,u.onerror=function(){ul(e)?e():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+f)},(document.getElementsByTagName("head")[0]||document.body).appendChild(u)):h("failure",t):h("success",t)}),r)||(t=u.slice(0),u.length=0,hw(t,function(n){0===l.length?ul(n.success)&&n.success.call(n.scope):ul(n.failure)&&n.failure.call(n.scope,l)}))})()}};or.ScriptLoader=new or;el=i.each;(fl=yt||(yt={})).PluginManager=fl();fl.ThemeManager=fl();var pt,cw="﻿",sii=function(n){return n===cw},at=cw,eu=function(n){return n.replace(new RegExp(cw,"g"),"")},hii=r.isElement,oe=r.isText,se=function(n){return oe(n)&&(n=n.parentNode),hii(n)&&n.hasAttribute("data-mce-caret")},ol=function(n){return oe(n)&&sii(n.data)},ui=function(n){return se(n)||ol(n)},aft=function(n){return n.firstChild!==n.lastChild||!r.isBr(n.firstChild)},lw=function(n){var t=n.container();return n&&r.isText(t)&&t.data.charAt(n.offset())===at},aw=function(n){var t=n.container();return n&&r.isText(t)&&t.data.charAt(n.offset()-1)===at},cii=function(n,t,i){var r,u,f;return(r=t.ownerDocument.createElement(n)).setAttribute("data-mce-caret",i?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(((f=document.createElement("br")).setAttribute("data-mce-bogus","1"),f)),u=t.parentNode,i?u.insertBefore(r,t):t.nextSibling?u.insertBefore(r,t.nextSibling):u.appendChild(r),r},sl=function(n){return oe(n)&&n.data[0]===at},hl=function(n){return oe(n)&&n.data[n.data.length-1]===at},vw=function(n){return n&&n.hasAttribute("data-mce-caret")?(i=n.getElementsByTagName("br"),t=i[i.length-1],r.isBogus(t)&&t.parentNode.removeChild(t),n.removeAttribute("data-mce-caret"),n.removeAttribute("data-mce-bogus"),n.removeAttribute("style"),n.removeAttribute("_moz_abspos"),n):null;var i,t},vft=r.isContentEditableTrue,lii=r.isContentEditableFalse,aii=r.isBr,vii=r.isText,yii=r.matchNodeNames("script style textarea"),yft=r.matchNodeNames("img input textarea hr iframe video audio object"),pii=r.matchNodeNames("table"),wii=ui,tr=function(n){return!wii(n)&&(vii(n)?!yii(n.parentNode):yft(n)||aii(n)||pii(n)||yw(n))},yw=function(n){return!1===(t=n,r.isElement(t)&&"true"===t.getAttribute("unselectable"))&&lii(n);var t},pw=function(n,t){return tr(n)&&function(n,t){for(n=n.parentNode;n&&n!==t;n=n.parentNode){if(yw(n))return!1;if(vft(n))return!0}return!0}(n,t)},he=Math.round,ce=function(n){return n?{left:he(n.left),top:he(n.top),bottom:he(n.bottom),right:he(n.right),width:he(n.width),height:he(n.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},pft=function(n,t){return n=ce(n),t||(n.left=n.left+n.width),n.right=n.left,n.width=0,n},wft=function(n,t,i){return 0<=n&&n<=Math.min(t.height,i.height)/2},le=function(n,t){return n.bottom-n.height/2<t.top||!(n.top>t.bottom)&&wft(t.top-n.bottom,n,t)},ae=function(n,t){return n.top>t.bottom||!(n.bottom<t.top)&&wft(t.bottom-n.top,n,t)},ww=function(n){var t=n.startContainer,i=n.startOffset;return t.hasChildNodes()&&n.endOffset===i+1?t.childNodes[i]:null},ve=function(n,t){return 1===n.nodeType&&n.hasChildNodes()&&(t>=n.childNodes.length&&(t=n.childNodes.length-1),n=n.childNodes[t]),n},bii=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),bft=function(n){return"string"==typeof n&&768<=n.charCodeAt(0)&&bii.test(n)},bw=[].slice,kft=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=bw.call(arguments),i.length-1>=n.length?n.apply(this,i.slice(1)):function(){var n=i.concat([].slice.call(arguments));return kft.apply(this,n)}},ot={constant:function(n){return function(){return n}},negate:function(n){return function(t){return!n(t)}},and:function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t=bw.call(arguments),function(n){for(var i=0;i<t.length;i++)if(!t[i](n))return!1;return!0}},or:function(){for(var t,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return t=bw.call(arguments),function(n){for(var i=0;i<t.length;i++)if(t[i](n))return!0;return!1}},curry:kft,compose:function(n,t){return function(i){return n(t(i))}},noop:function(){}},gt=function(t,i){for(var f,u=[],r=0;r<t.length;r++){if(f=t[r],!f.isSome())return n.none();u.push(f.getOrDie())}return n.some(i.apply(null,u))},dft=r.isElement,kii=tr,gft=r.matchStyleValues("display","block table"),dii=r.matchStyleValues("float","left right"),go=ot.and(dft,kii,ot.negate(dii)),gii=ot.negate(r.matchStyleValues("white-space","pre pre-line pre-wrap")),ns=r.isText,kw=r.isBr,net=d.nodeIndex,cl=ve,dw=function(n){return"createRange"in n?n.createRange():d.DOM.createRng()},gw=function(n){return n&&/[\r\n\t ]/.test(n)},tet=function(n){return!!n.setStart&&!!n.setEnd},nb=function(n){var t,i=n.startContainer,u=n.startOffset;return!!(gw(n.toString())&&gii(i.parentNode)&&r.isText(i)&&(t=i.data,gw(t[u-1])||gw(t[u+1])))},iet=function(n){return 0===n.left&&0===n.right&&0===n.top&&0===n.bottom},ou=function(n){var i,o,f,s,e,u,t,h;return i=0<(o=n.getClientRects()).length?ce(o[0]):ce(n.getBoundingClientRect()),!tet(n)&&kw(n)&&iet(i)?(e=(f=n).ownerDocument,u=dw(e),t=e.createTextNode(" "),(h=f.parentNode).insertBefore(t,f),u.setStart(t,0),u.setEnd(t,1),s=ce(u.getBoundingClientRect()),h.removeChild(t),s):iet(i)&&tet(n)?function(n){var u=n.startContainer,t=n.endContainer,f=n.startOffset,e=n.endOffset,i;return u===t&&r.isText(t)&&0===f&&1===e?(i=n.cloneRange(),i.setEndAfter(t),ou(i)):null}(n):i},ff=function(n,t){var i=pft(n,t);return i.width=1,i.right=i.left+1,i},nri=function(n){var u,t,i=[],r=function(n){var t,r;0!==n.height&&(0<i.length&&(t=n,r=i[i.length-1],t.left===r.left&&t.top===r.top&&t.bottom===r.bottom&&t.right===r.right)||i.push(n))},f=function(n,t){var u=dw(n.ownerDocument);if(t<n.data.length){if(bft(n.data[t]))return i;if(bft(n.data[t-1])&&(u.setStart(n,t),u.setEnd(n,t+1),!nb(u)))return r(ff(ou(u),!1)),i}0<t&&(u.setStart(n,t-1),u.setEnd(n,t),nb(u)||r(ff(ou(u),!1)));t<n.data.length&&(u.setStart(n,t),u.setEnd(n,t+1),nb(u)||r(ff(ou(u),!0)))};if(ns(n.container()))return f(n.container(),n.offset()),i;if(dft(n.container()))if(n.isAtEnd())t=cl(n.container(),n.offset()),ns(t)&&f(t,t.data.length),go(t)&&!kw(t)&&r(ff(ou(t),!1));else{if(t=cl(n.container(),n.offset()),ns(t)&&f(t,0),go(t)&&n.isAtEnd())return r(ff(ou(t),!1)),i;u=cl(n.container(),n.offset()-1);go(u)&&!kw(u)&&(gft(u)||gft(t)||!go(t))&&r(ff(ou(u),!1));go(t)&&r(ff(ou(t),!0))}return i};(pt=rt||(rt={})).fromRangeStart=function(n){return pt(n.startContainer,n.startOffset)};pt.fromRangeEnd=function(n){return pt(n.endContainer,n.endOffset)};pt.after=function(n){return pt(n.parentNode,net(n)+1)};pt.before=function(n){return pt(n.parentNode,net(n))};pt.isAbove=function(n,t){return gt([u.head(t.getClientRects()),u.last(n.getClientRects())],le).getOr(!1)};pt.isBelow=function(n,t){return gt([u.last(t.getClientRects()),u.head(n.getClientRects())],ae).getOr(!1)};pt.isAtStart=function(n){return!!n&&n.isAtStart()};pt.isAtEnd=function(n){return!!n&&n.isAtEnd()};pt.isTextPosition=function(n){return!!n&&r.isText(n.container())};pt.isElementPosition=function(n){return!1===pt.isTextPosition(n)};var sr,su,e=rt,tri=r.isElement,ret=r.isText,uet=function(n){var t=n.parentNode;t&&t.removeChild(n)},fet=function(n,t){0===t.length?uet(n):n.nodeValue=t},eet=function(n){var t=eu(n);return{count:n.length-t.length,text:t}},oet=function(n,t){return tb(n),t},iri=function(n,t){return ret(n)&&t.container()===n?(i=t,u=eet((r=n).data.substr(0,i.offset())),f=eet(r.data.substr(i.offset())),0<(o=u.text+f.text).length?(fet(r,o),e(r,i.offset()-u.count)):i):oet(n,t);var r,i,u,f,o},rri=function(n,t){return t.container()===n.parentNode?(r=n,f=(i=t).container(),o=u.indexOf(u.from(f.childNodes),r).map(function(n){return n<i.offset()?e(f,i.offset()-1):i}).getOr(i),tb(r),o):oet(n,t);var r,i,f,o},tb=function(n){if(tri(n)&&ui(n)&&(aft(n)?n.removeAttribute("data-mce-caret"):uet(n)),ret(n)){var t=eu(function(n){try{return n.nodeValue}catch(t){return""}}(n));fet(n,t)}},ye={removeAndReposition:function(n,t){return e.isTextPosition(t)?iri(n,t):rri(n,t)},remove:tb},set=function(n){return e.isTextPosition(n)?0===n.offset():tr(n.getNode())},het=function(n){if(e.isTextPosition(n)){var t=n.container();return n.offset()===t.data.length}return tr(n.getNode(!0))},cet=function(n,t){return!e.isTextPosition(n)&&!e.isTextPosition(t)&&n.getNode()===t.getNode(!0)},uri=function(n,t,i){return n?!cet(t,i)&&(u=t,!(!e.isTextPosition(u)&&r.isBr(u.getNode())))&&het(t)&&set(i):!cet(i,t)&&set(t)&&het(i);var u},pe=function(t,i,r){var u=ir(i);return n.from(t?u.next(r):u.prev(r))},ib=function(t,i){var s,h,o,c,f,u=t?i.firstChild:i.lastChild;return r.isText(u)?n.some(e(u,t?0:u.data.length)):u?tr(u)?n.some(t?e.before(u):(f=u,r.isBr(f)?e.before(f):e.after(f))):(h=i,o=u,c=(s=t)?e.before(o):e.after(o),pe(s,h,c)):n.none()},c={fromPosition:pe,nextPosition:t.curry(pe,!0),prevPosition:t.curry(pe,!1),navigate:function(t,i,r){return pe(t,i,r).bind(function(u){return au(r,u,i)&&uri(t,r,u)?pe(t,i,u):n.some(u)})},positionIn:ib,firstPositionIn:t.curry(ib,!0),lastPositionIn:t.curry(ib,!1)},fri=r.isContentEditableTrue,ll=r.isContentEditableFalse,hu=function(n,t,i,r,u){return t._selectionOverrides.showCaret(n,i,r,u)},rb=function(n,t){var i,r;return n.fire("BeforeObjectSelected",{target:t}).isDefaultPrevented()?null:((r=(i=t).ownerDocument.createRange()).selectNode(i),r)},aet=function(n,t,i){var s=bl(1,n.getBody(),t),r=e.fromRangeStart(s),o=r.getNode(),u,f;return ll(o)?hu(1,n,o,!r.isAtEnd(),!1):(u=r.getNode(!0),ll(u))?hu(1,n,u,!1,!1):(f=n.dom.getParent(r.getNode(),function(n){return ll(n)||fri(n)}),ll(f)?hu(1,n,f,!1,i):null)},al=function(n,t,i){if(!t||!t.collapsed)return t;var r=aet(n,t,i);return r||t};(su=sr||(sr={}))[su.Br=0]="Br";su[su.Block=1]="Block";su[su.Wrap=2]="Wrap";su[su.Eol=3]="Eol";var fi,vl,yl=function(n,t){return n===fi.Backwards?t.reverse():t},vet=function(t,i,u,f){for(var y,e,a,v,h,c,l,p=ir(u),o=f,s=[];o&&(c=p,l=o,e=i===fi.Forwards?c.next(l):c.prev(l));){if(r.isBr(e.getNode(!1)))return i===fi.Forwards?{positions:yl(i,s).concat([e]),breakType:sr.Br,breakAt:n.some(e)}:{positions:yl(i,s),breakType:sr.Br,breakAt:n.some(e)};if(e.isVisible()){if(t(o,e))return y=(a=i,v=o,h=e,r.isBr(h.getNode(a===fi.Forwards))?sr.Br:!1===au(v,h)?sr.Block:sr.Wrap),{positions:yl(i,s),breakType:y,breakAt:n.some(e)};s.push(e);o=e}else o=e}return{positions:yl(i,s),breakType:sr.Eol,breakAt:n.none()}},yet=function(n,t,i,r){return t(i,r).breakAt.map(function(r){var u=t(i,r).positions;return n===fi.Backwards?u.concat(r):[r].concat(u)}).getOr([])},ub=function(t,i){return u.foldl(t,function(t,r){return t.fold(function(){return n.some(r)},function(n){return gt([u.head(n.getClientRects()),u.head(r.getClientRects())],function(t,u){var f=Math.abs(i-t.left);return Math.abs(i-u.left)<=f?r:n}).or(t)})},n.none())},pet=function(n,t){return u.head(t.getClientRects()).bind(function(t){return ub(n,t.left)})},fb=t.curry(vet,rt.isAbove,-1),eb=t.curry(vet,rt.isBelow,1),eri=t.curry(yet,-1,fb),ori=t.curry(yet,1,eb),hr=function(n,t){return iu.all(t,n)},wet=function(t,i,r,e,o){var s,l,a,h,c,v=hr(f.fromDom(r),"td,th").map(function(n){return n.dom()}),y=u.filter((s=t,l=v,u.bind(l,function(n){var t,i,r=(t=n.getBoundingClientRect(),i=-1,{left:t.left-i,top:t.top-i,right:t.right+2*i,bottom:t.bottom+2*i,width:t.width+i,height:t.height+i});return[{x:r.left,y:s(r),cell:n},{x:r.right,y:s(r),cell:n}]})),function(n){return i(n,o)});return(a=y,h=e,c=o,u.foldl(a,function(t,i){return t.fold(function(){return n.some(i)},function(t){var r=Math.sqrt(Math.abs(t.x-h)+Math.abs(t.y-c)),u=Math.sqrt(Math.abs(i.x-h)+Math.abs(i.y-c));return n.some(u<r?i:t)})},n.none())).map(function(n){return n.cell})},sri=t.curry(wet,function(n){return n.bottom},function(n,t){return n.y<t}),hri=t.curry(wet,function(n){return n.top},function(n,t){return n.y>t}),cri=function(n,t){return u.head(t.getClientRects()).bind(function(t){return sri(n,t.left,t.top)}).bind(function(n){return pet((i=n,c.lastPositionIn(i).map(function(n){return fb(i,n).positions.concat(n)}).getOr([])),t);var i})},lri=function(n,t){return u.last(t.getClientRects()).bind(function(t){return hri(n,t.left,t.top)}).bind(function(n){return pet((i=n,c.firstPositionIn(i).map(function(n){return[n].concat(eb(i,n).positions)}).getOr([])),t);var i})},bet=function(n){for(var i=0,r=0,t=n;t&&t.nodeType;)i+=t.offsetLeft||0,r+=t.offsetTop||0,t=t.offsetParent;return{x:i,y:r}},ari=function(n,t,i){var u,s,f,e,h,c=n.dom,a=c.getRoot(),l=0,o;if(h={elm:t,alignToTop:i},n.fire("scrollIntoView",h),!h.isDefaultPrevented()&&r.isElement(t)){if((!1===i&&(l=t.offsetHeight),"BODY"!==a.nodeName)&&(o=n.selection.getScrollContainer(),o))return u=bet(t).y-bet(o).y+l,e=o.clientHeight,void((u<(f=o.scrollTop)||f+e<u+25)&&(o.scrollTop=u<f?u:u-e+25));s=c.getViewPort(n.getWin());u=c.getPos(t).y+l;f=s.y;e=s.h;(u<s.y||f+e<u+25)&&n.getWin().scrollTo(0,u<f?u:u-e+25)}},vri=function(n,t){u.head(rt.fromRangeStart(t).getClientRects()).each(function(t){var c,l,r,u,f,e,o,s,h,a=function(n){if(n.inline)return n.getBody().getBoundingClientRect();var t=n.getWin();return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight,width:t.innerWidth,height:t.innerHeight}}(n),i={x:(f=c=a,e=l=t,e.left>f.left&&e.right<f.right?0:e.left<f.left?e.left-f.left:e.right-f.right),y:(r=c,u=l,u.top>r.top&&u.bottom<r.bottom?0:u.top<r.top?u.top-r.top:u.bottom-r.bottom)};s=0!==i.x?0<i.x?i.x+4:i.x-4:0;h=0!==i.y?0<i.y?i.y+4:i.y-4:0;(o=n).inline?(o.getBody().scrollLeft+=s,o.getBody().scrollTop+=h):o.getWin().scrollBy(s,h)})},ket=function(n,t,i){var u=n.getParam(t,i),r;return-1!==u.indexOf("=")?(r=n.getParam(t,"","hash"),r.hasOwnProperty(n.id)?r[n.id]:i):u},yri=function(n){return n.getParam("iframe_attrs",{})},pri=function(n){return n.getParam("doctype","<!DOCTYPE html>")},wri=function(n){return n.getParam("document_base_url","")},bri=function(n){return ket(n,"body_id","tinymce")},kri=function(n){return ket(n,"body_class","")},det=function(n){return n.getParam("content_security_policy","")},dri=function(n){return n.getParam("br_in_pre",!0)},ef=function(n){if(n.getParam("force_p_newlines",!1))return"p";var t=n.getParam("forced_root_block","p");return!1===t?"":t},get=function(n){return n.getParam("forced_root_block_attrs",{})},gri=function(n){return n.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},nui=function(n){return n.getParam("no_newline_selector","")},tui=function(n){return n.getParam("keep_styles",!0)},iui=function(n){return n.getParam("end_container_on_empty_block",!1)},rui=function(n){return i.explode(n.getParam("font_size_style_values",""))},uui=function(n){return i.explode(n.getParam("font_size_classes",""))},pl=function(n,t){y.parent(n).each(function(i){i.dom().insertBefore(t.dom(),n.dom())})},ts=function(n,t){n.dom().appendChild(t.dom())},ut={before:pl,after:function(n,t){y.nextSibling(n).fold(function(){y.parent(n).each(function(n){ts(n,t)})},function(n){pl(n,t)})},prepend:function(n,t){y.firstChild(n).fold(function(){ts(n,t)},function(i){n.dom().insertBefore(t.dom(),i.dom())})},append:ts,appendAt:function(n,t,i){y.child(n,i).fold(function(){ts(n,t)},function(n){pl(n,t)})},wrap:function(n,t){pl(n,t);ts(t,n)}},ob=tu.detect().browser,not=function(){return ob.isIE()||ob.isEdge()||ob.isFirefox()},is=function(n,t){n.selection.setRng(t);vri(n,t)},tot=function(n,t,i){var r=n(t,i);return r.breakType===sr.Wrap&&0===r.positions.length?r.breakAt.map(function(i){return n(t,i).breakAt.isNone()}).getOr(!0):r.breakAt.isNone()},fui=ot.curry(tot,fb),eui=ot.curry(tot,eb),oui=function(n,t,i){var r,u,f,o,h=n.selection.getRng(),l=t?1:-1,s;return not()&&(r=t,u=h,f=i,o=e.fromRangeStart(u),c.positionIn(!r,f).map(function(n){return n.isEqual(o)}).getOr(!1))?(s=hu(l,n,i,!t,!0),is(n,s),!0):!1},sui=function(t,i){var u=i.getNode(t);return r.isElement(u)&&"TABLE"===u.nodeName?n.some(u):n.none()},iot=function(n,t,i){var r=sui(!!t,i),u=!1===t;r.fold(function(){return is(n,i.toRange())},function(r){return c.positionIn(u,n.getBody()).filter(function(n){return n.isEqual(i)}).fold(function(){return is(n,i.toRange())},function(){return o=t,e=r,s=i,void((h=ef(u=n))?u.undoManager.transact(function(){var n=f.fromTag(h),t;dt.setAll(n,get(u));ut.append(n,f.fromTag("br"));o?ut.after(f.fromDom(e),n):ut.before(f.fromDom(e),n);t=u.dom.createRng();t.setStart(n.dom(),0);t.setEnd(n.dom(),0);is(u,t)}):is(u,s.toRange()));var o,u,e,s,h})})},hui=function(n,t,i,r){var c,s,l,a,h,v,p=n.selection.getRng(),f=e.fromRangeStart(p),y=n.getBody(),o;return!t&&fui(r,f)?(o=(a=y,cri(h=i,v=f).orThunk(function(){return u.head(v.getClientRects()).bind(function(n){return ub(eri(a,e.before(h)),n.left)})}).getOr(e.before(h))),iot(n,t,o),!0):!(!t||!eui(r,f))&&(c=y,o=lri(s=i,l=f).orThunk(function(){return u.head(l.getClientRects()).bind(function(n){return ub(ori(c,e.after(s)),n.left)})}).getOr(e.after(s)),iot(n,t,o),!0)},rot=function(t,i){return function(){return n.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(r){return n.from(t.dom.getParent(r,"table")).map(function(n){return oui(t,i,n)})}).getOr(!1)}},uot=function(t,i){return function(){return n.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(function(r){return n.from(t.dom.getParent(r,"table")).map(function(n){return hui(t,i,n,r)})}).getOr(!1)}},rs=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return rs(i())}}},fot=r.isContentEditableFalse,eot=function(n,t,i){var o,u,f,e,s,r=pft(t.getBoundingClientRect(),i);return"BODY"===n.tagName?(o=n.ownerDocument.documentElement,u=n.scrollLeft||o.scrollLeft,f=n.scrollTop||o.scrollTop):(s=n.getBoundingClientRect(),u=n.scrollLeft-s.left,f=n.scrollTop-s.top),r.left+=u,r.right+=u,r.top+=f,r.bottom+=f,r.width=1,0<(e=t.offsetWidth-t.clientWidth)&&(i&&(e*=-1),r.left+=e,r.right+=e),r},cui=function(t,i,u){var s,f,e=rs(n.none()),h=function(){!function(n){for(var f,t,u,r=o("*[contentEditable=false]",n),i=0;i<r.length;i++)t=(f=r[i]).previousSibling,hl(t)&&(1===(u=t.data).length?t.parentNode.removeChild(t):t.deleteData(u.length-1,1)),t=f.nextSibling,sl(t)&&(1===(u=t.data).length?t.parentNode.removeChild(t):t.deleteData(0,1))}(t);f&&(ye.remove(f),f=null);e.get().each(function(t){o(t.caret).remove();e.set(n.none())});clearInterval(s)},c=function(){s=bt.setInterval(function(){u()?o("div.mce-visual-caret",t).toggleClass("mce-visual-caret-hidden"):o("div.mce-visual-caret",t).addClass("mce-visual-caret-hidden")},500)};return{show:function(u,s){var a,l,v,y;return(h(),v=s,r.isElement(v)&&/^(TD|TH)$/i.test(v.tagName))?null:i(s)?(f=cii("p",s,u),a=eot(t,s,u),o(f).css("top",a.top),y=o('<div class="mce-visual-caret" data-mce-bogus="all"><\/div>').css(a).appendTo(t)[0],e.set(n.some({caret:y,element:s,before:u})),e.get().each(function(n){u&&o(n.caret).addClass("mce-visual-caret-before")}),c(),(l=s.ownerDocument.createRange()).setStart(f,0),l.setEnd(f,0),l):(f=function(n,t){var i,r,u;if(r=n.ownerDocument.createTextNode(at),u=n.parentNode,t){if(i=n.previousSibling,oe(i)){if(ui(i))return i;if(hl(i))return i.splitText(i.data.length-1)}u.insertBefore(r,n)}else{if(i=n.nextSibling,oe(i)){if(ui(i))return i;if(sl(i))return i.splitText(1),i}n.nextSibling?u.insertBefore(r,n.nextSibling):u.appendChild(r)}return r}(s,u),l=s.ownerDocument.createRange(),fot(f.nextSibling)?(l.setStart(f,0),l.setEnd(f,0)):(l.setStart(f,1),l.setEnd(f,1)),l)},hide:h,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){e.get().each(function(n){var i=eot(t,n.element,n.before);o(n.caret).css(i)})},destroy:function(){return bt.clearInterval(s)}}},cr=function(n){return fot(n)||r.isTable(n)&&not()},us=r.isContentEditableFalse,lui=r.matchStyleValues("display","block table table-cell table-caption list-item"),oot=ui,sb=se,cu=ot.curry,sot=r.isElement,aui=tr,we=function(n){return 0<n},of=function(n){return n<0},wl=function(n,t){for(var i;i=n(t);)if(!sb(i))return i;return null},be=function(n,t,i,r,u){var f=new et(n,r);if(of(t)){if((us(n)||sb(n))&&i(n=wl(f.prev,!0)))return n;for(;n=wl(f.prev,u);)if(i(n))return n}if(we(t)){if((us(n)||sb(n))&&i(n=wl(f.next,!0)))return n;for(;n=wl(f.next,u);)if(i(n))return n}return null},lu=function(n,t){for(;n&&n!==t;){if(lui(n))return n;n=n.parentNode}return null},au=function(n,t,i){return lu(n.container(),i)===lu(t.container(),i)},hb=function(n,t){var i,r;return t?(i=t.container(),r=t.offset(),sot(i)?i.childNodes[r+n]:null):null},hot=function(n,t){var i=t.ownerDocument.createRange();return n?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)),i},cot=function(n,t,i){for(var r,f,e,u=n?"previousSibling":"nextSibling";i&&i!==t;){if(r=i[u],oot(r)&&(r=r[u]),us(r)){if(e=i,lu(r,f=t)===lu(e,f))return r;break}if(aui(r))break;i=i.parentNode}return null},fs=cu(hot,!0),es=cu(hot,!1),bl=function(n,t,i){var u,f,e,h,o=cu(cot,!0,t),s=cu(cot,!1,t);if(f=i.startContainer,e=i.startOffset,se(f)){if(sot(f)||(f=f.parentNode),"before"===(h=f.getAttribute("data-mce-caret"))&&(u=f.nextSibling,cr(u)))return fs(u);if("after"===h&&(u=f.previousSibling,cr(u)))return es(u)}if(!i.collapsed)return i;if(r.isText(f)){if(oot(f)){if(1===n){if(u=s(f))return fs(u);if(u=o(f))return es(u)}if(-1===n){if(u=o(f))return es(u);if(u=s(f))return fs(u)}return i}if(hl(f)&&e>=f.data.length-1)return 1===n&&(u=s(f))?fs(u):i;if(sl(f)&&e<=1)return-1===n&&(u=o(f))?es(u):i;if(e===f.data.length)return(u=s(f))?fs(u):i;if(0===e)return(u=o(f))?es(u):i}return i},lot=function(n,t){var i=hb(n,t);return us(i)&&!r.isBogusAll(i)},aot=function(n,t){return r.isTable(hb(n,t))},vot=function(t,i){return n.from(hb(t?0:-1,i)).filter(us)},yot=function(n,t,i){var r=bl(n,t,i);return-1===n?rt.fromRangeStart(r):rt.fromRangeEnd(r)},kl=cu(lot,0),dl=cu(lot,-1),vui=cu(aot,0),yui=cu(aot,-1);(vl=fi||(fi={}))[vl.Backwards=-1]="Backwards";vl[vl.Forwards=1]="Forwards";var gl,os,cb,lb,pot,pui=r.isContentEditableFalse,lr=r.isText,wot=r.isElement,ab=r.isBr,ss=tr,bot=function(n){return yft(n)||!!yw(t=n)&&!0!==h.reduce(t.getElementsByTagName("*"),function(n,t){return n||vft(t)},!1);var t},na=pw,kot=function(n,t){return n.hasChildNodes()&&t<n.childNodes.length?n.childNodes[t]:null},dot=function(n,t){if(we(n)){if(ss(t.previousSibling)&&!lr(t.previousSibling))return e.before(t);if(lr(t))return e(t,0)}if(of(n)){if(ss(t.nextSibling)&&!lr(t.nextSibling))return e.after(t);if(lr(t))return e(t,t.data.length)}return of(n)?ab(t)?e.before(t):e.after(t):e.before(t)},ta=function(n,t,i){var l,u,o,a,s,v,y,p,f,c;if(!wot(i)||!t)return null;if(t.isEqual(e.after(i))&&i.lastChild){if(s=e.after(i.lastChild),of(n)&&ss(i.lastChild)&&wot(i.lastChild))return ab(i.lastChild)?e.before(i.lastChild):s}else s=t;if(f=s.container(),c=s.offset(),lr(f)){if(of(n)&&0<c)return e(f,--c);if(we(n)&&c<f.length)return e(f,++c);l=f}else{if(of(n)&&0<c&&(u=kot(f,c-1),ss(u)))return!bot(u)&&(o=be(u,n,na,u))?lr(o)?e(o,o.data.length):e.after(o):lr(u)?e(u,u.data.length):e.before(u);if(we(n)&&c<f.childNodes.length&&(u=kot(f,c),ss(u)))return ab(u)&&i.lastChild===u?null:(v=u,y=i,r.isBr(v)&&(p=ta(1,e.after(v),y))&&!au(e.before(v),e.before(p),y)?ta(n,e.after(u),i):!bot(u)&&(o=be(u,n,na,u))?lr(o)?e(o,0):e.before(o):lr(u)?e(u,0):e.after(u));l=u||s.getNode()}return(we(n)&&s.isAtEnd()||of(n)&&s.isAtStart())&&(l=be(l,n,ot.constant(!0),i,!0),na(l,i))?dot(n,l):(u=be(l,n,na,i),!(a=h.last(h.filter(function(n,t){for(var i=[];n&&n!==t;)i.push(n),n=n.parentNode;return i}(f,i),pui)))||u&&a.contains(u)?u?dot(n,u):null:s=we(n)?e.after(a):e.before(a))},ir=function(n){return{next:function(t){return ta(fi.Forwards,t,n)},prev:function(t){return ta(fi.Backwards,t,n)}}},wui=function(n){return i.grep(n.childNodes,function(n){return"LI"===n.nodeName})},bui=function(n){return n&&n.firstChild&&n.firstChild===n.lastChild&&(" "===(t=n.firstChild).data||r.isBr(t));var t},kui=function(n){return 0<n.length&&(!(t=n[n.length-1]).firstChild||bui(t))?n.slice(0,-1):n;var t},vb=function(n,t){var i=n.getParent(t,n.isBlock);return i&&"LI"===i.nodeName?i:null},got=function(n,t){var r=e.after(n),i=ir(t).prev(r);return i?i.toRange():null},dui=function(n,t,r){var u,f,o,s,h=n.parentNode;return i.each(t,function(t){h.insertBefore(t,n)}),u=n,f=r,o=e.before(u),(s=ir(f).next(o))?s.toRange():null},gui=function(n,t){var o,u,f,s,e,h,i=t.firstChild,r=t.lastChild;return i&&"meta"===i.name&&(i=i.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),u=r,h=(o=n).getNonEmptyElements(),u&&(u.isEmpty(h)||(f=u,o.getBlockElements()[f.name]&&(e=f).firstChild&&e.firstChild===e.lastChild&&("br"===(s=f.firstChild).name||" "===s.value)))&&(r=r.prev),!(!i||i!==r||"ul"!==i.name&&"ol"!==i.name)},nfi=function(n,t,r,u){var g,nt,a,o,s,tt,it,rt,v,ut,f,h,ft,y,et,p,w,b,c,st=(g=t,nt=u,tt=n.serialize(nt),it=g.createFragment(tt),o=(a=it).firstChild,s=a.lastChild,o&&"META"===o.nodeName&&o.parentNode.removeChild(o),s&&"mce_marker"===s.id&&s.parentNode.removeChild(s),a),l=vb(t,r.startContainer),k=kui(wui(st.firstChild)),d=t.getRoot(),ot=function(n){var i=e.fromRangeStart(r),u=ir(t.getRoot()),f=1===n?u.prev(i):u.next(i);return!f||vb(t,f.getNode())!==l};return ot(1)?dui(l,k,d):ot(2)?(rt=l,v=k,ut=d,t.insertAfter(v.reverse(),rt),got(v[0],ut)):(h=k,ft=d,y=f=l,p=(et=r).cloneRange(),w=et.cloneRange(),p.setStartBefore(y),w.setEndAfter(y),b=[p.cloneContents(),w.cloneContents()],(c=f.parentNode).insertBefore(b[0],f),i.each(h,function(n){c.insertBefore(n,f)}),c.insertBefore(b[1],f),c.removeChild(f),got(h[h.length-1],ft))},tfi=function(n,t){return!!vb(n,t)},pi=r.isText,nst=r.isBogus,tst=d.nodeIndex,ist=function(n){var t=n.parentNode;return nst(t)?ist(t):t},yb=function(n){return n?h.reduce(n.childNodes,function(n,t){return nst(t)&&"BR"!==t.nodeName?n=n.concat(yb(t)):n.push(t),n},[]):[]},rst=function(n){return function(t){return n===t}},ust=function(n){var i,t,u,f;return(pi(n)?"text()":n.nodeName.toLowerCase())+"["+(t=yb(ist(i=n)),u=h.findIndex(t,rst(i),i),t=t.slice(0,u+1),f=h.reduce(t,function(n,i,r){return pi(i)&&pi(t[r-1])&&n++,n},0),t=h.filter(t,r.matchNodeNames(i.nodeName)),(u=h.findIndex(t,rst(i),i))-f)+"]"},fst=function(n,t){var i,u,f,o,e,s=[];return i=t.container(),u=t.offset(),pi(i)?f=function(n,t){for(;(n=n.previousSibling)&&pi(n);)t+=n.data.length;return t}(i,u):(u>=(o=i.childNodes).length?(f="after",u=o.length-1):f="before",i=o[u]),s.push(ust(i)),e=function(n,t,i){var r=[];for(t=t.parentNode;!(t===n||i&&i(t));t=t.parentNode)r.push(t);return r}(n,i),e=h.filter(e,ot.negate(r.isBogus)),(s=s.concat(h.map(e,function(n){return ust(n)}))).reverse().join("/")+","+f},est=function(n,t){var f,i,u;return t?(t=(f=t.split(","))[0].split("/"),u=1<f.length?f[1]:"before",(i=h.reduce(t,function(n,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),u=n,f=t[1],e=parseInt(t[2],10),i=yb(u),i=h.filter(i,function(n,t){return!pi(n)||!pi(i[t-1])}),(i=h.filter(i,r.matchNodeNames(f)))[e]):null;var u,f,e,i},n))?pi(i)?function(n,t){for(var r,i=n,u=0;pi(i);){if(r=i.data.length,u<=t&&t<=u+r){n=i;t-=u;break}if(!pi(i.nextSibling)){n=i;t=r;break}u+=r;i=i.nextSibling}return pi(n)&&t>n.data.length&&(t=n.data.length),e(n,t)}(i,parseInt(u,10)):(u="after"===u?tst(i)+1:tst(i),e(i.parentNode,u)):null):null},ia=r.isContentEditableFalse,ost=function(n,t,i,u,f){var s,e=u[f?"startContainer":"endContainer"],o=u[f?"startOffset":"endOffset"],h=[],c=0,l=n.getRoot();for(r.isText(e)?h.push(i?function(n,t,i){for(var f=n(t.data.slice(0,i)).length,u=t.previousSibling;u&&r.isText(u);u=u.previousSibling)f+=n(u.data).length;return f}(t,e,o):o):(o>=(s=e.childNodes).length&&s.length&&(c=1,o=Math.max(0,s.length-1)),h.push(n.nodeIndex(s[o],i)+c));e&&e!==l;e=e.parentNode)h.push(n.nodeIndex(e,i));return h},sst=function(n){r.isText(n)&&0===n.data.length&&n.parentNode.removeChild(n)},pb=function(n,t,r){var u=0;return i.each(n.select(t),function(n){if("all"!==n.getAttribute("data-mce-bogus"))return n!==r&&void u++}),u},hst=function(n,t){var i,u,f,e=t?"start":"end";i=n[e+"Container"];u=n[e+"Offset"];r.isElement(i)&&"TR"===i.nodeName&&(i=(f=i.childNodes)[Math.min(t?u:u-1,f.length-1)])&&(u=t?0:i.childNodes.length,n["set"+(t?"Start":"End")](i,u))},cst=function(n){return hst(n,!0),hst(n,!1),n},lst=function(n,t){var i;return r.isElement(n)&&(n=ve(n,t),ia(n))?n:ui(n)&&((r.isText(n)&&se(n)&&(n=n.parentNode),i=n.previousSibling,ia(i))||(i=n.nextSibling,ia(i)))?i:void 0},ast=function(n,t,i){var u=i.getNode(),r=u?u.nodeName:null,a=i.getRng(),f,o,v,s,h,c,l,e;return ia(u)||"IMG"===r?{name:r,index:pb(i.dom,r,u)}:(e=lst((f=a).startContainer,f.startOffset)||lst(f.endContainer,f.endOffset),e?{name:r=e.tagName,index:pb(i.dom,r,e)}:(o=n,s=t,h=a,c=(v=i).dom,(l={}).start=ost(c,o,s,h,!0),v.isCollapsed()||(l.end=ost(c,o,s,h,!1)),l))},vst=function(n,t,i){var r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return i?n.create("span",r,"&#xFEFF;"):n.create("span",r)},yst=function(n,t){var i=n.dom,r=n.getRng(),u=i.uniqueId(),c=n.isCollapsed(),h=n.getNode(),f=h.nodeName,e,o,s;return"IMG"===f?{name:f,index:pb(i,f,h)}:(e=cst(r.cloneRange()),c||(e.collapse(!1),o=vst(i,u+"_end",t),e.insertNode(o),sst(o.nextSibling)),(r=cst(r)).collapse(!0),s=vst(i,u+"_start",t),r.insertNode(s),sst(s.previousSibling),n.moveToBookmark({id:u,keep:1}),{id:u})},hs={getBookmark:function(n,t,i){return 2===t?ast(eu,i,n):3===t?(u=(r=n).getRng(),{start:fst(r.dom.getRoot(),e.fromRangeStart(u)),end:fst(r.dom.getRoot(),e.fromRangeEnd(u))}):t?{rng:n.getRng()}:yst(n,!1);var r,u},getUndoBookmark:t.curry(ast,t.identity,!0),getPersistentBookmark:yst},pst="_mce_caret",sf=function(n){return r.isElement(n)&&n.id===pst},hf=function(n,t){for(;t&&t!==n;){if(t.id===pst)return t;t=t.parentNode}return null},wst=function(n,t){return!n.isBlock(t)||t.innerHTML||s.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t},ifi=function(n,t){return c.lastPositionIn(n).fold(function(){return!1},function(n){return t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0})},bst=function(n,t,i){return!(!1!==t.hasChildNodes()||!hf(n,t)||(u=i,r=(f=t).ownerDocument.createTextNode(at),f.appendChild(r),u.setStart(r,0),u.setEnd(r,0),0));var f,u,r},kst=function(n,t,i,r){var e,u,o,s,f=i[t?"start":"end"],h=n.getRoot();if(f){for(o=f[0],u=h,e=f.length-1;1<=e;e--){if(s=u.childNodes,bst(h,u,r))return!0;if(f[e]>s.length-1)return!!bst(h,u,r)||ifi(u,r);u=s[f[e]]}3===u.nodeType&&(o=Math.min(f[0],u.nodeValue.length));1===u.nodeType&&(o=Math.min(f[0],u.childNodes.length));t?r.setStart(u,o):r.setEnd(u,o)}return!0},wb=function(n){return r.isText(n)&&0<n.data.length},dst=function(t,u,f){var c,h,a,l,v,y,o=t.get(f.id+"_"+u),p=f.keep;if(o){if(c=o.parentNode,"start"===u?p?o.hasChildNodes()?(c=o.firstChild,h=1):wb(o.nextSibling)?(c=o.nextSibling,h=0):wb(o.previousSibling)?(c=o.previousSibling,h=o.previousSibling.data.length):(c=o.parentNode,h=t.nodeIndex(o)+1):h=t.nodeIndex(o):p?o.hasChildNodes()?(c=o.firstChild,h=1):wb(o.previousSibling)?(c=o.previousSibling,h=o.previousSibling.data.length):(c=o.parentNode,h=t.nodeIndex(o)):h=t.nodeIndex(o),v=c,y=h,!p){for(l=o.previousSibling,a=o.nextSibling,i.each(i.grep(o.childNodes),function(n){r.isText(n)&&(n.nodeValue=n.nodeValue.replace(/\uFEFF/g,""))});o=t.get(f.id+"_"+u);)t.remove(o,!0);l&&a&&l.nodeType===a.nodeType&&r.isText(l)&&!s.opera&&(h=l.nodeValue.length,l.appendData(a.nodeValue),t.remove(a),v=l,y=h)}return n.some(e(v,y))}return n.none()},rfi=function(t,r){var h,c,f,b,l,k,a,d,v,y,e,u,p,w,o,g,s=t.dom;if(r){if(g=r,i.isArray(g.start))return w=r,o=(p=s).createRng(),kst(p,!0,w,o)&&kst(p,!1,w,o)?n.some(o):n.none();if("string"==typeof r.start)return n.some((y=r,e=(v=s).createRng(),u=est(v.getRoot(),y.start),e.setStart(u.container(),u.offset()),u=est(v.getRoot(),y.end),e.setEnd(u.container(),u.offset()),e));if(r.hasOwnProperty("id"))return a=dst(f=s,"start",b=r),d=dst(f,"end",b),gt([a,(l=d,k=a,l.isSome()?l:k)],function(n,t){var i=f.createRng();return i.setStart(wst(f,n.container()),n.offset()),i.setEnd(wst(f,t.container()),t.offset()),i});if(r.hasOwnProperty("name"))return h=s,c=r,n.from(h.select(c.name)[c.index]).map(function(n){var t=h.createRng();return t.selectNode(n),t});if(r.hasOwnProperty("rng"))return n.some(r.rng)}return n.none()},ufi=function(n,t,i){return hs.getBookmark(n,t,i)},ffi=function(n,t){rfi(n,t).each(function(t){n.setRng(t)})},wi=function(n){return r.isElement(n)&&"SPAN"===n.tagName&&"bookmark"===n.getAttribute("data-mce-type")},efi=i.each,gst=function(n){this.compare=function(t,i){if(t.nodeName!==i.nodeName)return!1;var r=function(t){var i={};return efi(n.getAttribs(t),function(r){var u=r.nodeName.toLowerCase();0!==u.indexOf("_")&&"style"!==u&&0!==u.indexOf("data-")&&(i[u]=n.getAttrib(t,u))}),i},u=function(n,t){var r,i;for(i in n)if(n.hasOwnProperty(i)){if(void 0===(r=t[i])||n[i]!==r)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0};return!(!u(r(t),r(i))||!u(n.parseStyle(n.getAttrib(t,"style")),n.parseStyle(n.getAttrib(i,"style")))||wi(t)||wi(i))}},ofi=function(n,t){u.each(t,function(t){ut.before(n,t)})},bb=function(n,t){u.each(t,function(t){ut.append(n,t)})},kb=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},ht={empty:function(n){n.dom().textContent="";u.each(y.children(n),function(n){kb(n)})},remove:kb,unwrap:function(n){var t=y.children(n);0<t.length&&ofi(n,t);kb(n)}},sfi=(gl=nt.isText,os="text",cb=function(t){return gl(t)?n.from(t.dom().nodeValue):n.none()},lb=tu.detect().browser,{get:function(n){if(!gl(n))throw new Error("Can only get "+os+" value of a "+os+" node");return pot(n).getOr("")},getOption:pot=lb.isIE()&&10===lb.version.major?function(t){try{return cb(t)}catch(i){return n.none()}}:cb,set:function(n,t){if(!gl(n))throw new Error("Can only set raw "+os+" value of a "+os+" node");n.dom().nodeValue=t}}),hfi=function(n){return sfi.get(n)},cfi=function(n){var i=hr(n,"br"),t=u.filter(function(n){for(var i=[],t=n.dom();t;)i.push(f.fromDom(t)),t=t.lastChild;return i}(n).slice(-1),dut);i.length===t.length&&u.each(t,ht.remove)},ra=function(n){ht.empty(n);ut.append(n,f.fromHtml('<br data-mce-bogus="1">'))},lfi=function(n){y.lastChild(n).each(function(t){y.prevSibling(t).each(function(i){ko(n)&&dut(t)&&ko(i)&&ht.remove(t)})})},nht=i.makeMap;var afi=function(n){var t=e.fromRangeStart(n),r=e.fromRangeEnd(n),i=n.commonAncestorContainer;return c.fromPosition(!1,i,r).map(function(u){return!au(t,r,i)&&au(t,u,i)?(e=t.container(),o=t.offset(),s=u.container(),h=u.offset(),(f=document.createRange()).setStart(e,o),f.setEnd(s,h),f):n;var e,o,s,h,f}).getOr(n)},db=function(n){return n.collapsed?n:afi(n)},vfi=r.matchNodeNames("td th"),yfi=function(t,r,u){var nt,k,l,v,y,p,ut,c,o,d,tt,ft,lt=t.schema.getTextInlineElements(),a=t.selection,h=t.dom,et,it,b,g,ot,w,st,ht,ct,rt;if(/^ | $/.test(r)&&(r=function(n){var i,t,r,u;return i=a.getRng(),t=i.startContainer,r=i.startOffset,u=function(n){return t[n]&&3===t[n].nodeType},3===t.nodeType&&(0<r?n=n.replace(/^&nbsp;/," "):u("previousSibling")||(n=n.replace(/^ /,"&nbsp;")),r<t.length?n=n.replace(/&nbsp;(<br>|)$/," "):u("nextSibling")||(n=n.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),n}(r)),nt=t.parser,ft=u.merge,k=cs({validate:t.settings.validate},t.schema),tt='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;<\/span>',p={content:r,format:"html",selection:!0,paste:u.paste},(p=t.fire("BeforeSetContent",p)).isDefaultPrevented())t.fire("SetContent",{content:p.content,format:"html",selection:!0,paste:u.paste});else{if(-1===(r=p.content).indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,tt),ot=(c=a.getRng()).startContainer||(c.parentElement?c.parentElement():null),w=t.getBody(),ot===w&&a.isCollapsed()&&h.isBlock(w.firstChild)&&(et=w.firstChild)&&!t.schema.getShortEndedElements()[et.nodeName]&&h.isEmpty(w.firstChild)&&((c=h.createRng()).setStart(w.firstChild,0),c.setEnd(w.firstChild,0),a.setRng(c)),a.isCollapsed()||(t.selection.setRng(db(t.selection.getRng())),t.getDoc().execCommand("Delete",!1,null),b=(it=a.getRng()).startContainer,g=it.startOffset,3===b.nodeType&&it.collapsed&&(" "===b.data[g]?(b.deleteData(g,1),/[\u00a0| ]$/.test(r)||(r+=" ")):" "===b.data[g-1]&&(b.deleteData(g-1,1),/[\u00a0| ]$/.test(r)||(r=" "+r)))),rt={context:(l=a.getNode()).nodeName.toLowerCase(),data:u.data,insert:!0},y=nt.parse(r,rt),!0===u.paste&&gui(t.schema,y)&&tfi(h,l))return c=nfi(k,h,t.selection.getRng(),y),t.selection.setRng(c),void t.fire("SetContent",p);if(function(n){for(var t=n;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(y),"mce_marker"===(o=y.lastChild).attr("id"))for(o=(ut=o).prev;o;o=o.walk(!0))if(3===o.type||!h.isBlock(o.name)){t.schema.isValidChild(o.parent.name,"span")&&o.parent.insert(ut,o,"br"===o.name);break}if(t._selectionOverrides.showBlockCaretContainer(l),rt.invalid){for(a.setContent(tt),l=a.getNode(),v=t.getBody(),9===l.nodeType?l=o=v:o=l;o!==v;)o=(l=o).parentNode;r=l===v?v.innerHTML:h.getOuterHTML(l);r=k.serialize(nt.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return k.serialize(y)})));l===v?h.setHTML(v,r):h.setOuterHTML(l,r)}else r=k.serialize(y),function(n,t,i){if("all"===i.getAttribute("data-mce-bogus"))i.parentNode.insertBefore(n.dom.createFragment(t),i);else{var r=i.firstChild,u=i.lastChild;!r||r===u&&"BR"===r.nodeName?n.dom.setHTML(i,t):n.selection.setContent(t)}}(t,r,l);!function(){if(ft){var n=t.getBody(),r=new gst(h);i.each(h.select("*[data-mce-fragment]"),function(t){for(var i=t.parentNode;i&&i!==n;i=i.parentNode)lt[t.nodeName.toLowerCase()]&&r.compare(i,t)&&h.remove(t,!0)})}}(),function(n){var r,i,u;if(n){if(a.scrollIntoView(n),r=function(n){for(var i=t.getBody();n&&n!==i;n=n.parentNode)if("false"===t.dom.getContentEditable(n))return n;return null}(n))return h.remove(n),a.select(r);c=h.createRng();(o=n.previousSibling)&&3===o.nodeType?(c.setStart(o,o.nodeValue.length),s.ie||(d=n.nextSibling)&&3===d.nodeType&&(o.appendData(d.data),d.parentNode.removeChild(d))):(c.setStartBefore(n),c.setEndBefore(n));i=h.getParent(n,h.isBlock);h.remove(n);i&&h.isEmpty(i)&&(t.$(i).empty(),c.setStart(i,0),c.setEnd(i,0),vfi(i)||i.getAttribute("data-mce-fragment")||!(u=function(n){var i=e.fromRangeStart(n);if(i=ir(t.getBody()).next(i))return i.toRange()}(c))?h.add(i,h.create("br",{"data-mce-bogus":"1"})):(c=u,h.remove(i)));a.setRng(c)}}(h.get("mce_marker"));st=t.getBody();i.each(st.getElementsByTagName("*"),function(n){n.removeAttribute("data-mce-fragment")});ht=t.dom;ct=t.selection.getStart();n.from(ht.getParent(ct,"td,th")).map(f.fromDom).each(lfi);t.fire("SetContent",p);t.addVisual()}},pfi=function(n,t){var r,u,f="string"!=typeof(r=t)?(u=i.extend({paste:r.paste,data:{paste:r.paste}},r),{content:r.content,details:u}):{content:r,details:{}};yfi(n,f.content,f.details)};var rht=function(i,r,u){for(var o,e=i.dom(),s=p.isFunction(u)?u:t.constant(!1);e.parentNode;){if(e=e.parentNode,o=f.fromDom(e),r(o))return n.some(o);if(s(o))break}return n.none()},uht=function(n,i){return u.find(n.dom().childNodes,t.compose(i,f.fromDom)).map(f.fromDom)},fht=function(t,i){var r=function(t){for(var e,u=0;u<t.childNodes.length;u++){if(i(f.fromDom(t.childNodes[u])))return n.some(f.fromDom(t.childNodes[u]));if(e=r(t.childNodes[u]),e.isSome())return e}return n.none()};return r(t.dom())},ls={first:function(n){return fht(nut.body(),n)},ancestor:rht,closest:function(n,t,i){return iht(function(n){return t(n)},rht,n,t,i)},sibling:function(t,i){var r=t.dom();return r.parentNode?uht(f.fromDom(r.parentNode),function(n){return!w.eq(t,n)&&i(n)}):n.none()},child:uht,descendant:fht},wfi=nr.immutable("sections","settings"),bfi=tu.detect().deviceType.isTouch(),kfi=["lists","autolink","autosave"],dfi={theme:"mobile"},ua=function(n){var t=p.isArray(n)?n.join(" "):n,i=u.map(p.isString(t)?t.split(" "):[],int);return u.filter(i,function(n){return 0<n.length})},eht=function(n,t){return n.sections().hasOwnProperty(t)},gfi=function(n,r,f,e){var o,s,c=ua(f.forced_plugins),h=ua(e.plugins),l=n&&eht(r,"mobile")?(o=h,u.filter(o,t.curry(u.contains,kfi))):h,a=(s=l,[].concat(ua(c)).concat(ua(s)));return i.extend(e,{plugins:a.join(" ")})},nei=function(n,t,r,f){var v,y,s,o,h,c,l,p,a,w,b,k,d,e=(v=["mobile"],y=f,s=ie.bifilter(y,function(n,t){return u.contains(v,t)}),wfi(s.t,s.f)),g=i.extend(t,r,e.settings(),(b=n,d=(k=e).settings().inline,b&&eht(k,"mobile")&&!d?(l="mobile",p=dfi,a=e.sections(),w=a.hasOwnProperty(l)?a[l]:{},i.extend({},p,w)):{}),{validate:!0,content_editable:e.settings().inline,external_plugins:(o=r,h=e.settings(),c=h.external_plugins?h.external_plugins:{},o&&o.external_plugins?i.extend({},o.external_plugins,c):c)});return gfi(n,e,r,g)},vu=function(t,i,r){return n.from(i.settings[r]).filter(t)},tei=t.curry(vu,p.isString),iei=function(n,t,r,f){var s,e,o,h=t in n.settings?n.settings[t]:r;return"hash"===f?(o={},"string"==typeof(e=h)?u.each(0<e.indexOf("=")?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(","),function(n){var t=n.split("=");o[i.trim(t[0])]=1<t.length?i.trim(t[1]):i.trim(t)}):o=e,o):"string"===f?vu(p.isString,n,t).getOr(r):"number"===f?vu(p.isNumber,n,t).getOr(r):"boolean"===f?vu(p.isBoolean,n,t).getOr(r):"object"===f?vu(p.isObject,n,t).getOr(r):"array"===f?vu(p.isArray,n,t).getOr(r):"string[]"===f?vu((s=p.isString,function(n){return p.isArray(n)&&u.forall(n,s)}),n,t).getOr(r):"function"===f?vu(p.isFunction,n,t).getOr(r):h},rei=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,gb=function(n,t){var i=t.container(),u=t.offset();return n?ol(i)?r.isText(i.nextSibling)?e(i.nextSibling,0):e.after(i):lw(t)?e(i,u+1):t:ol(i)?r.isText(i.previousSibling)?e(i.previousSibling,i.previousSibling.data.length):e.before(i):aw(t)?e(i,u-1):t},k={isInlineTarget:function(n,t){var i=tei(n,"inline_boundaries_selector").getOr("a[href],code");return iu.is(f.fromDom(t),i)},findRootInline:function(t,i,r){var f,e,o,s=(f=t,e=i,o=r,u.filter(d.DOM.getParents(o.container(),"*",e),f));return n.from(s[s.length-1])},isRtl:function(n){return"rtl"===d.DOM.getStyle(n,"direction",!0)||(t=n.textContent,rei.test(t));var t},isAtZwsp:function(n){return lw(n)||aw(n)},normalizePosition:gb,normalizeForwards:t.curry(gb,!0),normalizeBackwards:t.curry(gb,!1),hasSameParentBlock:function(n,t,i){var r=lu(t,n),u=lu(i,n);return r&&r===u}},fa=function(t,i){return w.contains(t,i)?ls.closest(i,function(n){return gut(n)||dc(n)},(r=t,function(n){return w.eq(r,f.fromDom(n.dom().parentNode))})):n.none();var r},oht=function(n){var i,t,r;n.dom.isEmpty(n.getBody())&&(n.setContent(""),t=(i=n).getBody(),r=t.firstChild&&i.dom.isBlock(t.firstChild)?t.firstChild:t,i.selection.setCursorLocation(r,0))},uei=function(n,t,i){return gt([c.firstPositionIn(i),c.lastPositionIn(i)],function(r,u){var f=k.normalizePosition(!0,r),e=k.normalizePosition(!1,u),o=k.normalizePosition(!1,t);return n?c.nextPosition(i,o).map(function(n){return n.isEqual(e)&&t.isEqual(f)}).getOr(!1):c.prevPosition(i,o).map(function(n){return n.isEqual(f)&&t.isEqual(e)}).getOr(!1)}).getOr(!0)},sht=function(n,t,i){return ls.ancestor(n,function(n){return iu.is(n,t)},i)},nk=sht,tk=function(n,t){return iu.one(t,n)},fei=function(n,t,i){return iht(iu.is,sht,n,t,i)},eei=function(n,t,i){return nk(n,t,i).isSome()},oei=function(n,i){return r.isText(i)&&/^[ \t\r\n]*$/.test(i.data)&&!1===(u=n,e=i,o=f.fromDom(u),s=f.fromDom(e),eei(s,"pre,code",t.curry(w.eq,o)));var u,e,o,s},hht=function(n,t){return tr(t)&&!1===oei(n,t)||(i=t,r.isElement(i)&&"A"===i.nodeName&&i.hasAttribute("name"))||sei(t);var i},sei=r.hasAttribute("data-mce-bookmark"),hei=r.hasAttribute("data-mce-bogus"),cei=r.hasAttributeValue("data-mce-bogus","all"),yu=function(n){return function(n){var i,t,u=0;if(hht(n,n))return!1;if(!(t=n.firstChild))return!0;i=new et(t,n);do if(cei(t))t=i.next(!0);else if(hei(t))t=i.next();else if(r.isBr(t))u++,t=i.next();else{if(hht(n,t))return!1;t=i.next()}while(t);return u<=1}(n.dom())},lei=nr.immutable("block","position"),aei=nr.immutable("from","to"),ik=function(n,t){var i=f.fromDom(n),r=f.fromDom(t.container());return fa(i,r).map(function(n){return lei(n,t)})},vei=function(t,i,u){var f=ik(t,e.fromRangeStart(u)),o=f.bind(function(u){return c.fromPosition(i,t,u.position()).bind(function(u){return ik(t,u).map(function(u){return e=t,o=i,f=u,r.isBr(f.position().getNode())&&!1===yu(f.block())?c.positionIn(!1,f.block().dom()).bind(function(t){return t.isEqual(f.position())?c.fromPosition(o,e,t).bind(function(n){return ik(e,n)}):n.some(f)}).getOr(f):f;var e,o,f})})});return gt([f,o],aei).filter(function(n){return u=n,!1===w.eq(u.from().block(),u.to().block())&&(i=n,y.parent(i.from().block()).bind(function(n){return y.parent(i.to().block()).filter(function(t){return w.eq(n,t)})}).isSome())&&(t=n,!1===r.isContentEditableFalse(t.from().block())&&!1===r.isContentEditableFalse(t.to().block()));var t,i,u})},yei=function(t,i,r){return r.collapsed?vei(t,i,r):n.none()},pei=function(n,t,i){return w.contains(t,n)?y.parents(n,function(n){return i(n)||w.eq(n,t)}).slice(0,-1):[]},cht=function(n,i){return pei(n,i,t.constant(!1))},wei=cht,as=function(n,t){return[n].concat(cht(n,t))},bei=function(n){var i,t,r=(i=n,t=y.children(i),u.findIndex(t,ko).fold(function(){return t},function(n){return t.slice(0,n)}));return u.each(r,function(n){ht.remove(n)}),r},lht=function(n,t){c.positionIn(n,t.dom()).each(function(n){var t=n.getNode();r.isBr(t)&&ht.remove(f.fromDom(t))})},aht=function(n,t){var i=as(t,n);return u.find(i.reverse(),yu).each(ht.remove)},kei=function(t,i){return w.contains(i,t)?y.parent(t).bind(function(r){return w.eq(r,i)?n.some(t):(f=i,e=t,u=y.parents(e,function(n){return w.eq(n,f)}),n.from(u[u.length-2]));var f,e,u}):n.none()},vht=function(n,t,i){if(yu(i))return ht.remove(i),yu(t)&&ra(t),c.firstPositionIn(t.dom());lht(!0,t);lht(!1,i);var r=bei(t);return kei(t,i).fold(function(){aht(n,t);var f=c.lastPositionIn(i.dom());return u.each(r,function(n){ut.append(i,n)}),f},function(f){var o=c.prevPosition(i.dom(),e.before(f.dom()));return u.each(r,function(n){ut.before(f,n)}),aht(n,t),o})},yht=function(n,t,i,r){return t?vht(n,r,i):vht(n,i,r)},ea=function(n,t){var i,r=f.fromDom(n.getBody());return(i=yei(r.dom(),t,n.selection.getRng()).bind(function(n){return yht(r,t,n.from().block(),n.to().block())})).each(function(t){n.selection.setRng(t.toRange())}),i.isSome()},pht=function(n,i){var r=f.fromDom(i),u=t.curry(w.eq,n);return ls.ancestor(r,gc,u).isSome()},dei=function(n,t){var i,r,u=c.prevPosition(n.dom(),e.fromRangeStart(t)).isNone(),f=c.nextPosition(n.dom(),e.fromRangeEnd(t)).isNone();return!(pht(i=n,(r=t).startContainer)||pht(i,r.endContainer))&&u&&f},gei=function(n){var t,r,i,u,e=f.fromDom(n.getBody()),o=n.selection.getRng();return dei(e,o)?((u=n).setContent(""),u.selection.setCursorLocation(),!0):(t=e,r=n.selection,i=r.getRng(),gt([fa(t,f.fromDom(i.startContainer)),fa(t,f.fromDom(i.endContainer))],function(n,u){return!1===w.eq(n,u)&&(i.deleteContents(),yht(t,!0,n,u).each(function(n){r.setRng(n.toRange())}),!0)}).getOr(!1))},oa=function(n){return!n.selection.isCollapsed()&&gei(n)},ke=function(n){if(!p.isArray(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],i={};return u.each(n,function(r,f){var s=ie.keys(r),e,o;if(1!==s.length)throw new Error("one and only one name per case");if(e=s[0],o=r[e],i[e]!==undefined)throw new Error("duplicate key detected:"+e);if("cata"===e)throw new Error("cannot have a case named cata (sorry)");if(!p.isArray(o))throw new Error("case arguments must be an array");t.push(e);i[e]=function(){var s=arguments.length,i,r;if(s!==o.length)throw new Error("Wrong number of arguments to case "+e+". Expected "+o.length+" ("+o+"), got "+s);for(i=new Array(s),r=0;r<i.length;r++)i[r]=arguments[r];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[f].apply(null,i)},match:function(n){var r=ie.keys(n);if(t.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+r.join(","));if(!u.forall(t,function(n){return u.contains(r,n)}))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+t.join(", "));return n[e].apply(null,i)},log:function(n){console.log(n,{constructors:t,constructor:e,params:i})}}}}),i},li=ke([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),wht=function(t,i,r,u){var e=u.getNode(!1===i);return fa(f.fromDom(t),f.fromDom(r.getNode())).map(function(n){return yu(n)?li.remove(n.dom()):li.moveToElement(e)}).orThunk(function(){return n.some(li.moveToElement(e))})},bht=function(i,u,e){return c.fromPosition(u,i,e).bind(function(o){return c=o.getNode(),gc(f.fromDom(c))||dc(f.fromDom(c))?n.none():(l=i,s=o,h=function(n){return kut(f.fromDom(n))&&!au(v,s,l)},vot(!(a=u),v=e).fold(function(){return vot(a,s).fold(t.constant(!1),h)},h)?n.none():u&&r.isContentEditableFalse(o.getNode())?wht(i,u,e,o):!1===u&&r.isContentEditableFalse(o.getNode(!0))?wht(i,u,e,o):u&&dl(e)?n.some(li.moveToPosition(o)):!1===u&&kl(e)?n.some(li.moveToPosition(o)):n.none());var l,a,v,s,h,c})},noi=function(t,i,u){return o=i,s=u.getNode(!1===o),h=o?"after":"before",r.isElement(s)&&s.getAttribute("data-mce-caret")===h?(e=i,f=u.getNode(!1===i),e&&r.isContentEditableFalse(f.nextSibling)?n.some(li.moveToElement(f.nextSibling)):!1===e&&r.isContentEditableFalse(f.previousSibling)?n.some(li.moveToElement(f.previousSibling)):n.none()).fold(function(){return bht(t,i,u)},n.some):bht(t,i,u).bind(function(i){return r=t,f=u,i.fold(function(t){return n.some(li.remove(t))},function(t){return n.some(li.moveToElement(t))},function(t){return au(f,t,r)?n.none():n.some(li.moveToPosition(t))});var r,f});var e,f,o,s,h},toi=function(n,t){return r=n,u=(i=t).container(),f=i.offset(),!1===e.isTextPosition(i)&&u===r.parentNode&&f>e.before(r).offset()?e(t.container(),t.offset()-1):t;var i,r,u,f},kht=function(t){return tr(t.previousSibling)?n.some((i=t.previousSibling,r.isText(i)?e(i,i.data.length):e.after(i))):t.previousSibling?c.lastPositionIn(t.previousSibling):n.none();var i},dht=function(t){return tr(t.nextSibling)?n.some((i=t.nextSibling,r.isText(i)?e(i,0):e.before(i))):t.nextSibling?c.firstPositionIn(t.nextSibling):n.none();var i},ioi=function(t,i){return kht(i).orThunk(function(){return dht(i)}).orThunk(function(){return u=t,r=i,f=e.before(r.previousSibling?r.previousSibling:r.parentNode),c.prevPosition(u,f).fold(function(){return c.nextPosition(u,e.after(r))},n.some);var u,r,f})},roi=function(t,i){return dht(i).orThunk(function(){return kht(i)}).orThunk(function(){return r=t,u=i,c.nextPosition(r,e.after(u)).fold(function(){return c.prevPosition(r,e.before(u))},n.some);var r,u})},uoi=function(n,i,r){return(e=n,u=i,f=r,e?roi(u,f):ioi(u,f)).map(t.curry(toi,r));var e,u,f},ght=function(n,t,i){i.fold(function(){n.focus()},function(i){n.selection.setRng(i.toRange(),t)})},foi=function(n,t){return t&&n.schema.getBlockElements().hasOwnProperty(nt.name(t))},eoi=function(t){if(yu(t)){var i=f.fromHtml('<br data-mce-bogus="1">');return ht.empty(t),ut.append(t,i),n.some(e.before(i.dom()))}return n.none()},vs=function(i,u,f){var h,o,s,c=uoi(u,i.getBody(),f.dom()),l=ls.ancestor(f,t.curry(foi,i),(h=i.getBody(),function(n){return n.dom()===h})),a=(o=f,s=c,gt([y.prevSibling(o),y.nextSibling(o),s],function(n,t,i){var s,u=n.dom(),f=t.dom();return r.isText(u)&&r.isText(f)?(s=u.data.length,u.appendData(f.data),ht.remove(t),ht.remove(o),i.container()===f?e(u,s):i):(ht.remove(o),i)}).orThunk(function(){return ht.remove(o),s}));i.dom.isEmpty(i.getBody())?(i.setContent(""),i.selection.setCursorLocation()):l.bind(eoi).fold(function(){ght(i,u,a)},function(t){ght(i,u,n.some(t))})},ooi=function(t,i){var o,u,s,h,r;return(o=t.getBody(),u=i,s=t.selection.getRng(),h=bl(u?1:-1,o,s),r=e.fromRangeStart(h),!1===u&&dl(r)?n.some(li.remove(r.getNode(!0))):u&&kl(r)?n.some(li.remove(r.getNode())):noi(o,u,r)).map(function(n){return n.fold((r=t,h=i,function(n){return r._selectionOverrides.hideFakeCaret(),vs(r,h,f.fromDom(n)),!0}),(o=t,s=i,function(n){var t=s?e.before(n):e.after(n);return o.selection.setRng(t.toRange()),!0}),(u=t,function(n){return u.selection.setRng(n.toRange()),!0}));var u,o,s,r,h}).getOr(!1)},soi=function(n,t){var i,e=n.selection.getNode();return!!r.isContentEditableFalse(e)&&(i=f.fromDom(n.getBody()),u.each(hr(i,".mce-offscreen-selection"),ht.remove),vs(n,t,f.fromDom(n.selection.getNode())),oht(n),!0)},sa=function(n,t){return n.selection.isCollapsed()?ooi(n,t):soi(n,t)},nct=function(n){var i,t=function(n,t){for(;t&&t!==n;){if(r.isContentEditableTrue(t)||r.isContentEditableFalse(t))return t;t=t.parentNode}return null}(n.getBody(),n.selection.getNode());return r.isContentEditableTrue(t)&&n.dom.isBlock(t)&&n.dom.isEmpty(t)&&(i=n.dom.create("br",{"data-mce-bogus":"1"}),n.dom.setHTML(t,""),t.appendChild(i),n.selection.setRng(e.before(i).toRange())),!0},de=r.isText,tct=function(n){return de(n)&&n.data[0]===at},ict=function(n){return de(n)&&n.data[n.data.length-1]===at},rct=function(n){return n.ownerDocument.createTextNode(at)},ha=function(n,t){return n?function(n){if(de(n.previousSibling))return ict(n.previousSibling)||n.previousSibling.appendData(at),n.previousSibling;if(de(n))return tct(n)||n.insertData(0,at),n;var t=rct(n);return n.parentNode.insertBefore(t,n),t}(t):function(n){if(de(n.nextSibling))return tct(n.nextSibling)||n.nextSibling.insertData(0,at),n.nextSibling;if(de(n))return ict(n)||n.appendData(at),n;var t=rct(n);return n.nextSibling?n.parentNode.insertBefore(t,n.nextSibling):n.parentNode.appendChild(t),t}(t)},hoi=t.curry(ha,!0),coi=t.curry(ha,!1),uct=function(n,t){return r.isText(n.container())?ha(t,n.container()):ha(t,n.getNode())},fct=function(n,t){var i=t.get();return i&&n.container()===i&&ol(i)},ect=function(t,i){return i.fold(function(i){ye.remove(t.get());var r=hoi(i);return t.set(r),n.some(e(r,r.length-1))},function(n){return c.firstPositionIn(n).map(function(n){if(fct(n,t))return e(t.get(),1);ye.remove(t.get());var i=uct(n,!0);return t.set(i),e(i,1)})},function(n){return c.lastPositionIn(n).map(function(n){if(fct(n,t))return e(t.get(),t.get().length-1);ye.remove(t.get());var i=uct(n,!1);return t.set(i),e(i,i.length-1)})},function(i){ye.remove(t.get());var r=coi(i);return t.set(r),n.some(e(r,1))})},oct=function(t,i){for(var u,r=0;r<t.length;r++)if(u=t[r].apply(null,i),u.isSome())return u;return n.none()},ct=ke([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),sct=function(n,t){var i=lu(t,n);return i||n},loi=function(i,r,u){var f=k.normalizeForwards(u),e=sct(r,f.container());return k.findRootInline(i,e,f).fold(function(){return c.nextPosition(e,f).bind(t.curry(k.findRootInline,i,e)).map(function(n){return ct.before(n)})},n.none)},aoi=function(n,t){return null===hf(n,t)},hct=function(n,i,r){return k.findRootInline(n,i,r).filter(t.curry(aoi,i))},voi=function(t,i,r){var u=k.normalizeBackwards(r);return hct(t,i,u).bind(function(t){return c.prevPosition(t,u).isNone()?n.some(ct.start(t)):n.none()})},yoi=function(t,i,r){var u=k.normalizeForwards(r);return hct(t,i,u).bind(function(t){return c.nextPosition(t,u).isNone()?n.some(ct.end(t)):n.none()})},poi=function(i,r,u){var f=k.normalizeBackwards(u),e=sct(r,f.container());return k.findRootInline(i,e,f).fold(function(){return c.prevPosition(e,f).bind(t.curry(k.findRootInline,i,e)).map(function(n){return ct.after(n)})},n.none)},cct=function(n){return!1===k.isRtl(rk(n))},ca=function(n,t,i){return oct([loi,voi,yoi,poi],[n,t,i]).filter(cct)},rk=function(n){return n.fold(t.identity,t.identity,t.identity,t.identity)},lct=function(n){return n.fold(t.constant("before"),t.constant("start"),t.constant("end"),t.constant("after"))},act=function(n){return n.fold(ct.before,ct.before,ct.after,ct.after)},woi=function(n,t,i,r,u,f){return gt([k.findRootInline(t,i,r),k.findRootInline(t,i,u)],function(t,r){return t!==r&&k.hasSameParentBlock(i,t,r)?ct.after(n?t:r):f}).getOr(f)},boi=function(n,i){return n.fold(t.constant(!0),function(n){return t=i,!(lct(r=n)===lct(t)&&rk(r)===rk(t));var r,t})},koi=function(i,r){return i?r.fold(t.compose(n.some,ct.start),n.none,t.compose(n.some,ct.after),n.none):r.fold(n.none,t.compose(n.some,ct.before),n.none,t.compose(n.some,ct.end))},uk=function(n,i,r,u){var f=k.normalizePosition(n,u),e=ca(i,r,f);return ca(i,r,f).bind(t.curry(koi,n)).orThunk(function(){return f=n,s=i,o=r,h=e,a=u,l=k.normalizePosition(f,a),c.fromPosition(f,o,l).map(t.curry(k.normalizePosition,f)).fold(function(){return h.map(act)},function(n){return ca(s,o,n).map(t.curry(woi,f,s,o,l,n)).filter(t.curry(boi,h))}).filter(cct);var f,s,o,h,a,l})},ge=ca,doi=uk,vct=(t.curry(uk,!1),t.curry(uk,!0),act),fk=function(n){return n.fold(ct.start,ct.start,ct.end,ct.end)},goi=function(n){return p.isFunction(n.selection.getSel().modify)},yct=function(n,t,i){var r=n?1:-1;return t.setRng(e(i.container(),i.offset()+r).toRange()),t.getSel().modify("move",n?"forward":"backward","word"),!0},nsi=function(n,t){var r=t.selection.getRng(),i=n?e.fromRangeEnd(r):e.fromRangeStart(r);return!!goi(t)&&(n&&lw(i)?yct(!0,t.selection,i):!(n||!aw(i))&&yct(!1,t.selection,i))},ek=function(n,t){var i=n.dom.createRng();i.setStart(t.container(),t.offset());i.setEnd(t.container(),t.offset());n.selection.setRng(i)},ok=function(n){return!1!==n.settings.inline_boundaries},pct=function(n,t){n?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},wct=function(n,t,i){return ect(t,i).map(function(t){return ek(n,t),i})},bct=function(n,t){return function(){return!!ok(t)&&nsi(n,t)}},no={move:function(n,i,r){return function(){return!!ok(n)&&(u=n,f=i,o=r,s=u.getBody(),h=e.fromRangeStart(u.selection.getRng()),c=t.curry(k.isInlineTarget,u),doi(o,c,s,h).bind(function(n){return wct(u,f,n)})).isSome();var u,f,o,s,h,c}},moveNextWord:t.curry(bct,!0),movePrevWord:t.curry(bct,!1),setupSelectedState:function(n){var i=rs(null),r=t.curry(k.isInlineTarget,n);return n.on("NodeChange",function(f){var o,c,l,s,h;ok(n)&&(o=r,c=n.dom,l=f.parents,s=u.filter(c.select('*[data-mce-selected="inline-boundary"]'),o),h=u.filter(l,o),u.each(u.difference(s,h),t.curry(pct,!1)),u.each(u.difference(h,s),t.curry(pct,!0)),function(n,t){if(n.selection.isCollapsed()&&!0!==n.composing&&t.get()){var i=e.fromRangeStart(n.selection.getRng());e.isTextPosition(i)&&!1===k.isAtZwsp(i)&&(ek(n,ye.removeAndReposition(t.get(),i)),t.set(null))}}(n,i),function(n,t,i,r){if(t.selection.isCollapsed()){var f=u.filter(r,n);u.each(f,function(){var r=e.fromRangeStart(t.selection.getRng());ge(n,t.getBody(),r).bind(function(n){return wct(t,i,n)})})}}(r,n,i,f.parents))}),i},setCaretPosition:ek},kct=function(n,t){return function(i){return ect(t,i).map(function(t){return no.setCaretPosition(n,t),!0}).getOr(!1)}},dct=function(n,i,r,u){var f=n.getBody(),o=t.curry(k.isInlineTarget,n);n.undoManager.ignore(function(){var t,s,h;n.selection.setRng((t=r,s=u,(h=document.createRange()).setStart(t.container(),t.offset()),h.setEnd(s.container(),s.offset()),h));n.execCommand("Delete");ge(o,f,e.fromRangeStart(n.selection.getRng())).map(fk).map(kct(n,i))});n.nodeChanged()},tsi=function(i,r,u,e){var s,l,o=(s=i.getBody(),l=e.container(),lu(l,s)||s),h=t.curry(k.isInlineTarget,i),a=ge(h,o,e);return a.bind(function(i){return u?i.fold(t.constant(n.some(fk(i))),n.none,t.constant(n.some(vct(i))),n.none):i.fold(n.none,t.constant(n.some(vct(i))),n.none,t.constant(n.some(fk(i))))}).map(kct(i,r)).getOrThunk(function(){var n=c.navigate(u,o,e),t=n.bind(function(n){return ge(h,o,n)});return a.isSome()&&t.isSome()?k.findRootInline(h,o,e).map(function(n){return t=n,!!gt([c.firstPositionIn(t),c.lastPositionIn(t)],function(n,i){var r=k.normalizePosition(!0,n),u=k.normalizePosition(!1,i);return c.nextPosition(t,r).map(function(n){return n.isEqual(u)}).getOr(!0)}).getOr(!0)&&(vs(i,u,f.fromDom(n)),!0);var t}).getOr(!1):t.bind(function(){return n.map(function(n){return u?dct(i,r,e,n):dct(i,r,n,e),!0})}).getOr(!1)})},la=function(n,t,i){if(n.selection.isCollapsed()&&!1!==n.settings.inline_boundaries){var r=e.fromRangeStart(n.selection.getRng());return tsi(n,t,i,r)}return!1},ys=nr.immutable("start","end"),isi=nr.immutable("rng","table","cells"),gct=ke([{removeTable:["element"]},{emptyCells:["cells"]}]),aa=function(n,t){return fei(f.fromDom(n),"td,th",t)},ps=function(n,t){return nk(n,"table",t)},rsi=function(n){return!1===w.eq(n.start(),n.end())},nlt=function(t,i){return ps(t.start(),i).bind(function(r){return ps(t.end(),i).bind(function(t){return w.eq(r,t)?n.some(r):n.none()})})},va=function(n){return hr(n,"td,th")},usi=function(t,i){var r=aa(i.startContainer,t),f=aa(i.endContainer,t);return i.collapsed?n.none():gt([r,f],ys).fold(function(){return r.fold(function(){return f.bind(function(n){return ps(n,t).bind(function(t){return u.head(va(t)).map(function(t){return ys(t,n)})})})},function(n){return ps(n,t).bind(function(t){return u.last(va(t)).map(function(t){return ys(n,t)})})})},function(i){return tlt(t,i)?n.none():(f=t,ps((r=i).start(),f).bind(function(n){return u.last(va(n)).map(function(n){return ys(r.start(),n)})}));var r,f})},tlt=function(n,t){return nlt(t,n).isSome()},fsi=function(n,i){var f,u,r,e,o,s=(f=n,t.curry(w.eq,f));return(u=i,r=s,e=aa(u.startContainer,r),o=aa(u.endContainer,r),gt([e,o],ys).filter(rsi).filter(function(n){return tlt(r,n)}).orThunk(function(){return usi(r,u)})).bind(function(n){return nlt(t=n,s).map(function(n){return isi(t,n,va(n))});var t})},ilt=function(n,t){return u.findIndex(n,function(n){return w.eq(n,t)})},esi=function(n){return(t=n,gt([ilt(t.cells(),t.rng().start()),ilt(t.cells(),t.rng().end())],function(n,i){return t.cells().slice(n,i+1)})).map(function(t){var i=n.cells();return t.length===i.length?gct.removeTable(n.table()):gct.emptyCells(t)});var t},osi=function(n,t){return fsi(n,t).bind(esi)},rlt=function(n){var i=[],t;if(n)for(t=0;t<n.rangeCount;t++)i.push(n.getRangeAt(t));return i},ult=rlt,ssi=function(n){return u.bind(n,function(n){var t=ww(n);return t?[f.fromDom(t)]:[]})},hsi=function(n){return 1<rlt(n).length},csi=function(n){return u.filter(ssi(n),gc)},lsi=function(n){return hr(n,"td[data-mce-selected],th[data-mce-selected]")},flt=function(n,t){var i=lsi(t),r=csi(n);return 0<i.length?i:r},asi=flt,elt=function(n){return flt(ult(n.selection.getSel()),f.fromDom(n.getBody()))},olt=function(n,t){return u.each(t,ra),n.selection.setCursorLocation(t[0].dom(),0),!0},vsi=function(n,t){return vs(n,!1,t),!0},ysi=function(n,i,r,u){return sk(i,u).fold(function(){return u=n,osi(i,r).map(function(n){return n.fold(t.curry(vsi,u),t.curry(olt,u))});var u},function(t){return ya(n,t)}).getOr(!1)},slt=function(n,t){return u.find(as(t,n),gc)},sk=function(n,t){return u.find(as(t,n),function(n){return"caption"===nt.name(n)})},ya=function(t,i){return ra(i),t.selection.setCursorLocation(i.dom(),0),n.some(!0)},psi=function(t,i,r,u,e){return c.navigate(r,t.getBody(),e).bind(function(n){return o=u,v=r,s=e,h=n,c.firstPositionIn(o.dom()).bind(function(n){return c.lastPositionIn(o.dom()).map(function(t){return v?s.isEqual(n)&&h.isEqual(t):s.isEqual(t)&&h.isEqual(n)})}).getOr(!0)?ya(t,u):(l=u,a=n,sk(i,f.fromDom(a.getNode())).map(function(n){return!1===w.eq(n,l)}));var l,a,o,v,s,h}).or(n.some(!0))},wsi=function(n,t,i,r){var u=e.fromRangeStart(n.selection.getRng());return slt(i,r).bind(function(r){return yu(r)?ya(n,r):(e=n,o=i,s=t,h=r,l=u,c.navigate(s,e.getBody(),l).bind(function(n){return slt(o,f.fromDom(n.getNode())).map(function(n){return!1===w.eq(n,h)})}));var e,o,s,h,l})},bsi=function(n,t,i){var r=f.fromDom(n.getBody());return sk(r,i).fold(function(){return wsi(n,t,r,i)},function(i){return u=n,o=t,s=r,f=i,h=e.fromRangeStart(u.selection.getRng()),yu(f)?ya(u,f):psi(u,s,o,f,h);var u,o,s,f,h}).getOr(!1)},pa=function(n,t){var i,r,u,e,o,s=f.fromDom(n.selection.getStart(!0)),h=elt(n);return n.selection.isCollapsed()&&0===h.length?bsi(n,t,s):(i=n,r=s,u=f.fromDom(i.getBody()),e=i.selection.getRng(),0!==(o=elt(i)).length?olt(i,o):ysi(i,u,e,r))},hlt=function(n,t){n.getDoc().execCommand(t,!1,null)},ksi=function(n){sa(n,!1)||la(n,!1)||ea(n,!1)||pa(n)||oa(n,!1)||(hlt(n,"Delete"),oht(n))},dsi=function(n){sa(n,!0)||la(n,!0)||ea(n,!0)||pa(n)||oa(n,!0)||hlt(n,"ForwardDelete")},clt=function(t){return function(i,r){return n.from(r).map(f.fromDom).filter(nt.isElement).bind(function(r){return(s=t,h=i,c=r.dom(),u=function(n){return ynt(n,s)},ls.closest(f.fromDom(c),function(n){return u(n).isSome()},function(n){return w.eq(f.fromDom(h),n)}).bind(u)).or((e=t,o=r.dom(),n.from(d.DOM.getStyle(o,e,!0))));var e,o,s,h,c,u}).getOr("")}},wa={getFontSize:clt("font-size"),getFontFamily:t.compose(function(n){return n.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},clt("font-family")),toPt:function(n,t){return/[0-9.]+px$/.test(n)?(r=72*parseInt(n,10)/96,u=t||0,i=Math.pow(10,u),Math.round(r*i)/i+"pt"):n;var r,u,i}},llt=function(n){return c.firstPositionIn(n.getBody()).map(function(n){var t=n.container();return r.isText(t)?t.parentNode:t})},alt=function(t){return n.from(t.selection.getRng()).bind(function(i){var r,u,f=t.getBody();return u=f,(r=i).startContainer===u&&0===r.startOffset?n.none():n.from(t.selection.getStart(!0))})},vlt=function(n,t){var i,u,r;return/^[0-9\.]+$/.test(t)?(i=parseInt(t,10),1<=i&&i<=7)?(u=rui(n),r=uui(n),r?r[i-1]||t:u[i-1]||t):t:t},hk=function(n,t){return n&&t&&n.startContainer===t.startContainer&&n.startOffset===t.startOffset&&n.endContainer===t.endContainer&&n.endOffset===t.endOffset},ylt=function(n,t,i){return null!==function(n,t,i){for(;n&&n!==t;){if(i(n))return n;n=n.parentNode}return null}(n,t,i)},gsi=function(n,t,i){return ylt(n,t,function(n){return n.nodeName===i})},ck=function(n){return n&&"TABLE"===n.nodeName},plt=function(n,t,i){for(var u=new et(t,n.getParent(t.parentNode,n.isBlock)||n.getRoot());t=u[i?"prev":"next"]();)if(r.isBr(t))return!0},lk=function(t,i,u,f,e){var l,s,h,o,a,v,c=t.getRoot(),y=t.schema.getNonEmptyElements();if(h=t.getParent(e.parentNode,t.isBlock)||c,f&&r.isBr(e)&&i&&t.isEmpty(h))return n.some(rt(e.parentNode,t.nodeIndex(e)));for(l=new et(e,h);o=l[f?"prev":"next"]();){if("false"===t.getContentEditableParent(o)||(v=c,ui(a=o)&&!1===ylt(a,v,sf)))return n.none();if(r.isText(o)&&0<o.nodeValue.length)return!1===gsi(o,c,"A")?n.some(rt(o,f?o.nodeValue.length:0)):n.none();if(t.isBlock(o)||y[o.nodeName.toLowerCase()])return n.none();s=o}return u&&s?n.some(rt(s,0)):n.none()},wlt=function(t,i,u,f){var e,s,v,o,y,h,l,p,w,b,a=t.getRoot(),c=!1;if(e=f[(u?"start":"end")+"Container"],s=f[(u?"start":"end")+"Offset"],l=r.isElement(e)&&s===e.childNodes.length,y=t.schema.getNonEmptyElements(),h=u,ui(e))return n.none();if(r.isElement(e)&&s>e.childNodes.length-1&&(h=!1),r.isDocument(e)&&(e=a,s=0),e===a){if(h&&(o=e.childNodes[0<s?s-1:0])&&(ui(o)||y[o.nodeName]||ck(o)))return n.none();if(e.hasChildNodes()){if((s=Math.min(!h&&0<s?s-1:s,e.childNodes.length-1),e=e.childNodes[s],s=r.isText(e)&&l?e.data.length:0,!i&&e===a.lastChild&&ck(e))||function(n,t){for(;t&&t!==n;){if(r.isContentEditableFalse(t))return!0;t=t.parentNode}return!1}(a,e)||ui(e))return n.none();if(e.hasChildNodes()&&!1===ck(e)){v=new et(o=e,a);do{if(r.isContentEditableFalse(o)||ui(o)){c=!1;break}if(r.isText(o)&&0<o.nodeValue.length){s=h?0:o.nodeValue.length;e=o;c=!0;break}if(y[o.nodeName.toLowerCase()]&&(!(p=o)||!/^(TD|TH|CAPTION)$/.test(p.nodeName))){s=t.nodeIndex(o);e=o.parentNode;h||s++;c=!0;break}}while(o=h?v.next():v.prev())}}}return i&&(r.isText(e)&&0===s&&lk(t,l,i,!0,e).each(function(n){e=n.container();s=n.offset();c=!0}),r.isElement(e)&&((o=e.childNodes[s])||(o=e.childNodes[s-1]),!o||!r.isBr(o)||(b="A",(w=o).previousSibling&&w.previousSibling.nodeName===b)||plt(t,o,!1)||plt(t,o,!0)||lk(t,l,i,!0,o).each(function(n){e=n.container();s=n.offset();c=!0}))),h&&!i&&r.isText(e)&&s===e.nodeValue.length&&lk(t,l,i,!1,e).each(function(n){e=n.container();s=n.offset();c=!0}),c?n.some(rt(e,s)):n.none()},ba=function(t,i){var u=i.collapsed,r=i.cloneRange(),f=rt.fromRangeStart(i);return wlt(t,u,!0,r).each(function(n){u&&rt.isAbove(f,n)||r.setStart(n.container(),n.offset())}),u||wlt(t,u,!1,r).each(function(n){r.setEnd(n.container(),n.offset())}),u&&r.collapse(!0),hk(i,r)?n.none():n.some(r)},blt=function(n,t,i){var r=n.create("span",{},"&nbsp;");i.parentNode.insertBefore(r,i);t.scrollIntoView(r);n.remove(r)},klt=function(n,t,i,r){var u=n.createRng();r?(u.setStartBefore(i),u.setEndBefore(i)):(u.setStartAfter(i),u.setEndAfter(i));t.setRng(u)},nhi=function(n,t){var f,c,s=n.selection,r=n.dom,u=s.getRng(),e,i,l;ba(r,u).each(function(n){u.setStart(n.startContainer,n.startOffset);u.setEnd(n.endContainer,n.endOffset)});e=u.startOffset;i=u.startContainer;1===i.nodeType&&i.hasChildNodes()&&(l=e>i.childNodes.length-1,i=i.childNodes[Math.min(e,i.childNodes.length-1)]||i,e=l&&3===i.nodeType?i.nodeValue.length:0);var o=r.getParent(i,r.isBlock),h=o?r.getParent(o.parentNode,r.isBlock):null,a=h?h.nodeName.toUpperCase():"",v=t&&t.ctrlKey;"LI"!==a||v||(o=h);i&&3===i.nodeType&&e>=i.nodeValue.length&&(function(n,t,i){for(var r,u=new et(t,i),f=n.getNonEmptyElements();r=u.next();)if(f[r.nodeName.toLowerCase()]||0<r.length)return!0}(n.schema,i,o)||(f=r.create("br"),u.insertNode(f),u.setStartAfter(f),u.setEndAfter(f),c=!0));f=r.create("br");u.insertNode(f);blt(r,s,f);klt(r,s,f,c);n.undoManager.add()},thi=function(n,t){var i=f.fromTag("br");ut.before(f.fromDom(t),i);n.undoManager.add()},ihi=function(n,t){rhi(n.getBody(),t)||ut.after(f.fromDom(t),f.fromTag("br"));var i=f.fromTag("br");ut.after(f.fromDom(t),i);blt(n.dom,n.selection,i.dom());klt(n.dom,n.selection,i.dom(),!1);n.undoManager.add()},rhi=function(n,t){return i=e.after(t),!!r.isBr(i.getNode())||c.nextPosition(n,e.after(t)).map(function(n){return r.isBr(n.getNode())}).getOr(!1);var i},dlt=function(n){return n&&"A"===n.nodeName&&"href"in n},uhi=function(n){return n.fold(t.constant(!1),dlt,dlt,t.constant(!1))},fhi=function(n,i){i.fold(t.noop,t.curry(thi,n),t.curry(ihi,n),t.noop)},glt=function(n,i){var r,u,f,o=(r=n,u=t.curry(k.isInlineTarget,r),f=e.fromRangeStart(r.selection.getRng()),ge(u,r.getBody(),f).filter(uhi));o.isSome()?o.each(t.curry(fhi,n)):nhi(n,i)},ak=ke([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ehi=(ak.before,ak.on,ak.after,function(n){return n.fold(t.identity,t.identity,t.identity)}),ka=ke([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ohi=nr.immutable("start","soffset","finish","foffset"),nat={domRange:ka.domRange,relative:ka.relative,exact:ka.exact,exactFromRange:function(n){return ka.exact(n.start(),n.soffset(),n.finish(),n.foffset())},range:ohi,getWin:function(n){var t=n.match({domRange:function(n){return f.fromDom(n.startContainer)},relative:function(n){return ehi(n)},exact:function(n){return n}});return y.defaultView(t)}},shi=tu.detect().browser,tat=function(n,t){var i=nt.isText(t)?hfi(t).length:y.children(t).length+1;return i<n?i:n<0?0:n},hhi=function(n){return nat.range(n.start(),tat(n.soffset(),n.start()),n.finish(),tat(n.foffset(),n.finish()))},iat=function(n,t){return w.contains(n,t)||w.eq(n,t)},rat=function(n){return function(t){return iat(n,t.start())&&iat(n,t.finish())}},chi=function(n){return!0===n.inline||shi.isIE()},lhi=function(n){return nat.range(f.fromDom(n.startContainer),n.startOffset,f.fromDom(n.endContainer),n.endOffset)},ahi=function(t){var i=t.getSelection();return(i&&0!==i.rangeCount?n.from(i.getRangeAt(0)):n.none()).map(lhi)},vhi=function(n){var t=y.defaultView(n);return ahi(t.dom()).filter(rat(n))},yhi=function(t,i){return n.from(i).filter(rat(t)).map(hhi)},phi=function(t){var i=document.createRange();try{return i.setStart(t.start().dom(),t.soffset()),i.setEnd(t.finish().dom(),t.foffset()),n.some(i)}catch(r){return n.none()}},uat=function(i){return(i.bookmark?i.bookmark:n.none()).bind(t.curry(yhi,f.fromDom(i.getBody()))).bind(phi)},da=function(t){var i=chi(t)?vhi(f.fromDom(t.getBody())):n.none();t.bookmark=i.isSome()?i:t.bookmark},whi=function(n){uat(n).each(function(t){n.selection.setRng(t)})},fat=uat,bhi=function(n,t){var i=n.settings,r=n.dom,f=n.selection,e=n.formatter,o=/[a-z%]+$/i.exec(i.indentation)[0],s=parseInt(i.indentation,10),h=n.getParam("indent_use_margin",!1);n.queryCommandState("InsertUnorderedList")||n.queryCommandState("InsertOrderedList")||(i.forced_root_block||r.getParent(f.getNode(),r.isBlock)||e.apply("div"),u.each(f.getSelectedBlocks(),function(n){return function(n,t,i,r,u,f){var e,o;"false"!==n.getContentEditable(f)&&"LI"!==f.nodeName&&(e=i?"margin":"padding",(e="TABLE"===f.nodeName?"margin":e,e+="rtl"===n.getStyle(f,"direction",!0)?"Right":"Left","outdent"===t)?(o=Math.max(0,parseInt(f.style[e]||0,10)-r),n.setStyle(f,e,o?o+u:"")):(o=parseInt(f.style[e]||0,10)+r+u,n.setStyle(f,e,o)))}(r,t,h,s,o,n)}))},ga=i.each,khi=i.extend,dhi=i.map,ghi=i.inArray;oat=i.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," ");ws=function(n){var e,u,r=this,t={},f=function(){return!1},o=function(){return!0},s,h;e=(n=n||{}).scope||r;u=n.toggleEvent||f;s=function(n,e,o,s){var h,l,c;if(!1===e&&(e=f),e)for(e={func:e},s&&i.extend(e,s),c=(l=n.toLowerCase().split(" ")).length;c--;)n=l[c],(h=t[n])||(h=t[n]=[],u(n,!0)),o?h.unshift(e):h.push(e);return r};h=function(n,i){var o,f,s,h,e;if(n)for(o=(h=n.toLowerCase().split(" ")).length;o--;){if(n=h[o],f=t[n],!n){for(s in t)u(s,!1),delete t[s];return r}if(f){if(i)for(e=f.length;e--;)f[e].func===i&&(f=f.slice(0,e).concat(f.slice(e+1)),t[n]=f);else f.length=0;f.length||(u(n,!1),delete t[n])}}else{for(n in t)u(n,!1);t={}}return r};r.fire=function(i,r){var s,u,l,c;if(i=i.toLowerCase(),(r=r||{}).type=i,r.target||(r.target=e),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=o},r.stopPropagation=function(){r.isPropagationStopped=o},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=o},r.isDefaultPrevented=f,r.isPropagationStopped=f,r.isImmediatePropagationStopped=f),n.beforeFire&&n.beforeFire(r),s=t[i])for(u=0,l=s.length;u<l;u++){if((c=s[u]).once&&h(i,c.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===c.func.call(e,r))return r.preventDefault(),r}return r};r.on=s;r.off=h;r.once=function(n,t,i){return s(n,t,i,{once:!0})};r.has=function(n){return n=n.toLowerCase(),!(!t[n]||0===t[n].length)}};ws.isNative=function(n){return!!oat[n.toLowerCase()]};var cf,bs=function(n){return n._eventDispatcher||(n._eventDispatcher=new ws({scope:n,toggleEvent:function(t,i){ws.isNative(t)&&n.toggleNativeEvent&&n.toggleNativeEvent(t,i)}})),n._eventDispatcher},nv={fire:function(n,t,i){if(this.removed&&"remove"!==n)return t;if(t=bs(this).fire(n,t,i),!1!==i&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(n,t,!1),r=r.parent();return t},on:function(n,t,i){return bs(this).on(n,t,i)},off:function(n,t){return bs(this).off(n,t)},once:function(n,t){return bs(this).once(n,t)},hasEventListeners:function(n){return bs(this).has(n)}},vk=function(n,t){var i=dt.get(n,t);return i===undefined||""===i?[]:i.split(" ")},nci=vk,tci=function(n,t,i){var r=vk(n,t).concat([i]);dt.set(n,t,r.join(" "))},ici=function(n,t,i){var r=u.filter(vk(n,t),function(n){return n!==i});0<r.length?dt.set(n,t,r.join(" ")):dt.remove(n,t)},sat=function(n){return nci(n,"class")},hat=function(n,t){return tci(n,"class",t)},cat=function(n,t){return ici(n,"class",t)},rci=sat,lat=hat,aat=cat,uci=function(n,t){u.contains(sat(n),t)?cat(n,t):hat(n,t)},to=function(n){return n.dom().classList!==undefined},vat=function(n,t){return to(n)&&n.dom().classList.contains(t)},yk={add:function(n,t){to(n)?n.dom().classList.add(t):lat(n,t)},remove:function(n,t){var i;to(n)?n.dom().classList.remove(t):aat(n,t);0===(to(i=n)?i.dom().classList:rci(i)).length&&dt.remove(i,"class")},toggle:function(n,t){return to(n)?n.dom().classList.toggle(t):uci(n,t)},toggler:function(n,t){var r,u,f,i,e,o,s=to(n),h=n.dom().classList;return r=function(){s?h.remove(t):aat(n,t)},u=function(){s?h.add(t):lat(n,t)},f=vat(n,t),i=f||!1,{on:e=function(){u();i=!0},off:o=function(){r();i=!1},toggle:function(){(i?o:e)()},isOn:function(){return i}}},has:vat},fci=function(n,t){return n.fire("PreProcess",t)},eci=function(n,t){return n.fire("PostProcess",t)},oci=function(n){return n.fire("remove")},sci=function(n,t){return n.fire("SwitchMode",{mode:t})},hci=function(n,t,i,r){n.fire("ObjectResizeStart",{target:t,width:i,height:r})},cci=function(n,t,i,r){n.fire("ObjectResized",{target:t,width:i,height:r})},pk=function(n,t,i){try{n.getDoc().execCommand(t,!1,i)}catch(r){}},yat=function(n,t){var i,r,u;i=f.fromDom(n.getBody());r="mce-content-readonly";u=t;yk.has(i,r)&&!1===u?yk.remove(i,r):u&&yk.add(i,r);t?(n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable="false"):(n.readonly=!1,n.getBody().contentEditable="true",pk(n,"StyleWithCSS",!1),pk(n,"enableInlineTableEditing",!1),pk(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())},lci=function(n){return n.readonly?"readonly":"design"},tv=d.DOM,iv=function(n,t){return"selectionchange"===t?n.getDoc():!n.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?n.getDoc().documentElement:n.settings.event_root?(n.eventRoot||(n.eventRoot=tv.select(n.settings.event_root)[0]),n.eventRoot):n.getBody()},pat=function(n,t,i){var r;(r=n).hidden||r.readonly?!0===n.readonly&&i.preventDefault():n.fire(t,i)},wat=function(n,t){var r,i;if(n.delegates||(n.delegates={}),!n.delegates[t]&&!n.removed)if(r=iv(n,t),n.settings.event_root){if(cf||(cf={},n.editorManager.on("removeEditor",function(){var t;if(!n.editorManager.activeEditor&&cf){for(t in cf)n.dom.unbind(iv(n,t));cf=null}})),cf[t])return;i=function(i){for(var f,e=i.target,r=n.editorManager.get(),u=r.length;u--;)f=r[u].getBody(),(f===e||tv.isChildOf(e,f))&&pat(r[u],t,i)};cf[t]=i;tv.bind(r,t,i)}else i=function(i){pat(n,t,i)},tv.bind(r,t,i),n.delegates[t]=i},bat={bindPendingEventDelegates:function(){var n=this;i.each(n._pendingNativeEvents,function(t){wat(n,t)})},toggleNativeEvent:function(n,t){var i=this;"focus"!==n&&"blur"!==n&&(t?i.initialized?wat(i,n):i._pendingNativeEvents?i._pendingNativeEvents.push(n):i._pendingNativeEvents=[n]:i.initialized&&(i.dom.unbind(iv(i,n),n,i.delegates[n]),delete i.delegates[n]))},unbindAllNativeEvents:function(){var i,n=this,r=n.getBody(),t=n.dom;if(n.delegates){for(i in n.delegates)n.dom.unbind(iv(n,i),i,n.delegates[i]);delete n.delegates}!n.inline&&r&&t&&(r.onload=null,t.unbind(n.getWin()),t.unbind(n.getDoc()));t&&(t.unbind(r),t.unbind(n.getContainer()))}},kat=bat=i.extend({},nv,bat),wk=i.each,bk=i.explode,aci={f9:120,f10:121,f11:122},dat=i.makeMap("alt,ctrl,shift,meta,access");var vci=function(t){var i=t!==undefined?t.dom():document;return n.from(i.activeElement).map(f.fromDom)},nvt=function(n){var t=y.owner(n).dom();return n.dom()===t.activeElement},yci=function(n){return vci(y.owner(n)).filter(function(t){return n.dom().contains(t.dom())})},pci=function(t,i){return(r=i,r.collapsed?n.from(ve(r.startContainer,r.startOffset)).map(f.fromDom):n.none()).bind(function(i){return cti(i)?n.some(i):!1===w.contains(t,i)?n.some(t):n.none()});var r},tvt=function(n,t){pci(f.fromDom(n.getBody()),t).bind(function(n){return c.firstPositionIn(n.dom())}).fold(function(){n.selection.normalize()},function(t){return n.selection.setRng(t.toRange())})},kk=function(n){if(n.setActive)try{n.setActive()}catch(t){n.focus()}else n.focus()},wci=function(n){var t,i=n.getBody();return i&&(t=f.fromDom(i),nvt(t)||yci(t).isSome())},ivt=function(n){return n.inline?wci(n):(t=n).iframeElement&&nvt(f.fromDom(t.iframeElement));var t},dk=function(n){return n.editorManager.setActive(n)},bci=function(n,t){n.removed||(t?dk(n):function(n){var f=n.selection,e=n.settings.content_editable,t=n.getBody(),i=f.getRng(),r,o,u;if(n.quirks.refreshContentEditable(),u=(r=n,o=f.getNode(),r.dom.getParent(o,function(n){return"true"===r.dom.getContentEditable(n)})),n.$.contains(t,u))return kk(u),tvt(n,i),dk(n);n.bookmark!==undefined&&!1===ivt(n)&&fat(n).each(function(t){n.selection.setRng(t);i=t});e||(s.opera||kk(t),n.getWin().focus());(s.gecko||e)&&(kk(t),tvt(n,i));dk(n)}(n))},ks=ivt,rvt=function(n,t){return t.dom()[n]},uvt=function(n,t){return parseInt(rut(t,n),10)},kci=t.curry(rvt,"clientWidth"),dci=t.curry(rvt,"clientHeight"),gci=t.curry(uvt,"margin-top"),nli=t.curry(uvt,"margin-left"),fvt=function(n,t,i){var u,r,h,c,e,l,o,s,a,v,p=f.fromDom(n.getBody()),w=n.inline?p:y.documentElement(p),b=(u=n.inline,h=t,c=i,e=(r=w).dom().getBoundingClientRect(),{x:h-(u?e.left+r.dom().clientLeft+nli(r):0),y:c-(u?e.top+r.dom().clientTop+gci(r):0)});return o=b.x,s=b.y,a=kci(l=w),v=dci(l),0<=o&&0<=s&&o<=a&&s<=v},tli=function(t){var i,r=t.inline?t.getBody():t.getContentAreaContainer();return(i=r,n.from(i).map(f.fromDom)).map(function(n){return w.contains(y.owner(n),n)}).getOr(!1)};var svt=yt.PluginManager,ili=function(n,t){var i=function(n,t){for(var i in svt.urls)if(svt.urls[i]+"/plugin"+t+".js"===n)return i;return null}(t,n.suffix);return i?"Failed to load plugin: "+i+" from url "+t:"Failed to load plugin url: "+t},hvt=function(n,t){n.notificationManager.open({type:"error",text:t})},gk=function(n,t){n._skinLoaded?hvt(n,t):n.on("SkinLoaded",function(){hvt(n,t)})},rli=function(n,t){gk(n,ili(n,t))},uli=function(n,t){gk(n,"Failed to upload image: "+t)},fli=gk,cvt=function(){for(var n,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];n=window.console;n&&(n.error?n.error.apply(n,arguments):n.log.apply(n,arguments))},ar=yt.PluginManager,lf=yt.ThemeManager;var hli=function(n){return du.getOrDie("atob")(n)},avt=function(n){var t,i;return n=decodeURIComponent(n).split(","),(i=/data:([^;]+)/.exec(n[0]))&&(t=i[1]),{type:t,data:n[1]}},vvt=function(n){return 0===n.indexOf("blob:")?(i=n,new ri(function(n,t){var u=function(){t("Cannot convert "+i+" to Blob. Resource might not exist or is inaccessible.")},r;try{r=new nd;r.open("GET",i,!0);r.responseType="blob";r.onload=function(){200===this.status?n(this.response):u()};r.onerror=u;r.send()}catch(f){u()}})):0===n.indexOf("data:")?(t=n,new ri(function(n){var u,r,i;t=avt(t);try{u=hli(t.data)}catch(f){return void n(new lvt([]))}for(r=new sli(u.length),i=0;i<r.length;i++)r[i]=u.charCodeAt(i);n(new lvt([r],{type:t.type}))})):null;var i,t},cli=function(n){return new ri(function(t){var i=new oli;i.onloadend=function(){t(i.result)};i.readAsDataURL(n)})},yvt=avt,lli=0,pvt=function(n){return(n||"blobid")+lli++},ali=function(n,t,i,r){var f,u;0!==t.src.indexOf("blob:")?(f=yvt(t.src).data,(u=n.findFirst(function(n){return n.base64()===f}))?i({image:t,blobInfo:u}):vvt(t.src).then(function(r){u=n.create(pvt(),r,f);n.add(u);i({image:t,blobInfo:u})},function(n){r(n)})):(u=n.getByUri(t.src))?i({image:t,blobInfo:u}):vvt(t.src).then(function(r){cli(r).then(function(e){f=yvt(e).data;u=n.create(pvt(),r,f);n.add(u);i({image:t,blobInfo:u})})},function(n){r(n)})},vli=function(n){return n?n.getElementsByTagName("img"):[]},yli=0,td={uuid:function(n){return n+yli+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+t()+t()+t());var t}};var id=function(n,t){return n.hasOwnProperty(t.nodeName)},wli=function(n,t){return r.isText(t)&&(0===t.nodeValue.length||/^\s+$/.test(t.nodeValue)&&(!t.nextSibling||id(n,t.nextSibling)))?!0:!1},bli=function(n){var i,v,y,p,w,e,s,b,k,d,h,ft=n.settings,g=n.dom,c=n.selection,nt=n.schema,l=nt.getBlockElements(),t=c.getStart(),a=n.getBody(),tt,it,rt,ut,o;if(h=ft.forced_root_block,t&&r.isElement(t)&&h&&(d=a.nodeName.toLowerCase(),nt.isValidChild(d,h.toLowerCase())&&(tt=l,it=a,rt=t,!u.exists(wei(f.fromDom(rt),f.fromDom(it)),function(n){return id(tt,n.dom())})))){for(v=(i=c.getRng()).startContainer,y=i.startOffset,p=i.endContainer,w=i.endOffset,k=ks(n),t=a.firstChild;t;)if(ut=l,o=t,r.isText(o)||r.isElement(o)&&!id(ut,o)&&!wi(o)){if(wli(l,t)){t=(s=t).nextSibling;g.remove(s);continue}e||(e=g.create(h,n.settings.forced_root_block_attrs),t.parentNode.insertBefore(e,t),b=!0);t=(s=t).nextSibling;e.appendChild(s)}else e=null,t=t.nextSibling;b&&k&&(i.setStart(v,y),i.setEnd(p,w),c.setRng(i),n.nodeChanged())}},kli=function(n){n.settings.forced_root_block&&n.on("NodeChange",t.curry(bli,n))},wvt=function(n){return y.firstChild(n).fold(t.constant([n]),function(t){return[n].concat(wvt(t))})},rd=function(n){return y.lastChild(n).fold(t.constant([n]),function(t){return"br"===nt.name(t)?y.prevSibling(t).map(function(t){return[n].concat(rd(t))}).getOr([]):[n].concat(rd(t))})},dli=function(i,e){return gt([(l=e,s=l.startContainer,a=l.startOffset,r.isText(s)?0===a?n.some(f.fromDom(s)):n.none():n.from(s.childNodes[a]).map(f.fromDom)),(h=e,o=h.endContainer,c=h.endOffset,r.isText(o)?c===o.data.length?n.some(f.fromDom(o)):n.none():n.from(o.childNodes[c-1]).map(f.fromDom))],function(n,r){var f=u.find(wvt(i),t.curry(w.eq,n)),e=u.find(rd(i),t.curry(w.eq,r));return f.isSome()&&e.isSome()}).getOr(!1);var h,o,c,l,s,a},ud=function(n,t,r,u){var f=r,e=new et(r,f),o=n.schema.getNonEmptyElements();do{if(3===r.nodeType&&0!==i.trim(r.nodeValue).length)return void(u?t.setStart(r,0):t.setEnd(r,r.nodeValue.length));if(o[r.nodeName]&&!/^(TD|TH)$/.test(r.nodeName))return void(u?t.setStartBefore(r):"BR"===r.nodeName?t.setEndBefore(r):t.setEndAfter(r));if(s.ie&&s.ie<11&&n.isBlock(r)&&n.isEmpty(r))return void(u?t.setStart(r,0):t.setEnd(r,0))}while(r=u?e.next():e.prev());"BODY"===f.nodeName&&(u?t.setStart(f,0):t.setEnd(f,f.childNodes.length))},fd=function(n){var t=n.selection.getSel();return t&&0<t.rangeCount};var io,rv,bvt=function(n){var u,t,i,r;return r=n.getBoundingClientRect(),t=(u=n.ownerDocument).documentElement,i=u.defaultView,{top:r.top+i.pageYOffset-t.clientTop,left:r.left+i.pageXOffset-t.clientLeft}},nai=function(n,t){return i=(o=n).inline?bvt(o.getBody()):{left:0,top:0},u=(e=n).getBody(),r=e.inline?{left:u.scrollLeft,top:u.scrollTop}:{left:0,top:0},{pageX:(f=function(n,t){var r,u,f,i,e,o,s;return t.target.ownerDocument!==n.getDoc()?(r=bvt(n.getContentAreaContainer()),u=(i=(f=n).getBody(),e=f.getDoc().documentElement,o={left:i.scrollLeft,top:i.scrollTop},s={left:i.scrollLeft||e.scrollLeft,top:i.scrollTop||e.scrollTop},f.inline?o:s),{left:t.pageX-r.left+u.left,top:t.pageY-r.top+u.top}):{left:t.pageX,top:t.pageY}}(n,t)).left-i.left+r.left,pageY:f.top-i.top+r.top};var i,r,f,e,u,o},ds=r.isContentEditableFalse,tai=r.isContentEditableTrue,kvt=function(n){n&&n.parentNode&&n.parentNode.removeChild(n)},iai=function(n,t){return function(i){var r,o,s;if(0===i.button&&(r=h.find(t.dom.getParents(i.target),ot.or(ds,tai)),o=t.getBody(),ds(s=r)&&s!==o)){var u=t.dom.getPos(r),f=t.getBody(),e=t.getDoc().documentElement;n.element=r;n.screenX=i.screenX;n.screenY=i.screenY;n.maxX=(t.inline?f.scrollWidth:e.offsetWidth)-2;n.maxY=(t.inline?f.scrollHeight:e.offsetHeight)-2;n.relX=i.pageX-u.x;n.relY=i.pageY-u.y;n.width=r.offsetWidth;n.height=r.offsetHeight;n.ghost=function(n,t,i,r){var u=t.cloneNode(!0),f;return n.dom.setStyles(u,{width:i,height:r}),n.dom.setAttrib(u,"data-mce-selected",null),f=n.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"}),n.dom.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:i,height:r}),n.dom.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f}(t,r,n.width,n.height)}}},rai=function(n,t){return function(i){var r,e,s,h,c,u,o,l,f;!n.dragging||(l=(c=t).selection,f=l.getSel().getRangeAt(0).startContainer,u=3===f.nodeType?f.parentNode:f,o=n.element,u===o||c.dom.isChildOf(u,o)||ds(u))||(r=(s=n.element,(h=s.cloneNode(!0)).removeAttribute("data-mce-selected"),h),e=t.fire("drop",{targetClone:r,clientX:i.clientX,clientY:i.clientY}),e.isDefaultPrevented()||(r=e.targetClone,t.undoManager.transact(function(){kvt(n.element);t.insertContent(t.dom.getOuterHTML(r));t._selectionOverrides.hideFakeCaret()})));dvt(n)}},dvt=function(n){n.dragging=!1;n.element=null;kvt(n.ghost)},uai=function(n){var r,h,f,c,o,u,t,i,l,s,a,e={};r=d.DOM;u=document;h=iai(e,n);t=e;i=n;l=bt.throttle(function(n,t){i._selectionOverrides.hideFakeCaret();i.selection.placeCaretAt(n,t)},0);f=function(n){var u,r,f,e,o,s,h,c,a,v,y,p,b=Math.max(Math.abs(n.screenX-t.screenX),Math.abs(n.screenY-t.screenY)),w;if(t.element&&!t.dragging&&10<b){if(i.fire("dragstart",{target:t.element}).isDefaultPrevented())return;t.dragging=!0;i.focus()}t.dragging&&(w=(y=t,{pageX:(p=nai(i,n)).pageX-y.relX,pageY:p.pageY+5}),a=t.ghost,v=i.getBody(),a.parentNode!==v&&v.appendChild(a),u=t.ghost,r=w,f=t.width,e=t.height,o=t.maxX,s=t.maxY,c=h=0,u.style.left=r.pageX+"px",u.style.top=r.pageY+"px",r.pageX+f>o&&(h=r.pageX+f-o),r.pageY+e>s&&(c=r.pageY+e-s),u.style.width=f-h+"px",u.style.height=e-c+"px",l(n.clientX,n.clientY))};c=rai(e,n);s=e;o=function(){s.dragging&&a.fire("dragend");dvt(s)};(a=n).on("mousedown",h);n.on("mousemove",f);n.on("mouseup",c);r.bind(u,"mousemove",f);r.bind(u,"mouseup",o);n.on("remove",function(){r.unbind(u,"mousemove",f);r.unbind(u,"mouseup",o)})},fai=function(n){var t;uai(n);(t=n).on("drop",function(n){var i="undefined"!=typeof n.clientX?t.getDoc().elementFromPoint(n.clientX,n.clientY):null;(ds(i)||ds(t.dom.getContentEditableParent(i)))&&n.preventDefault()})},ed=function(n){return h.reduce(n,function(n,t){return n.concat(function(n){var i=function(t){return h.map(t,function(t){return(t=ce(t)).node=n,t})},t;return r.isElement(n)?i(n.getClientRects()):r.isText(n)?(t=n.ownerDocument.createRange(),t.setStart(n,0),t.setEnd(n,n.data.length),i(t.getClientRects())):void 0}(t))},[])};(rv=io||(io={}))[rv.Up=-1]="Up";rv[rv.Down=1]="Down";var gvt=function(n,t,i,r,u,f){var o,s,c=0,e=[],l=function(r){var l,f,o;for(o=ed([r]),-1===n&&(o=o.reverse()),l=0;l<o.length;l++)if(f=o[l],!i(f,s)){if(0<e.length&&t(f,h.last(e))&&c++,f.line=c,u(f))return!0;e.push(f)}};return(s=h.last(f.getClientRects()))&&(l(o=f.getNode()),function(n,t,i,r){for(;r=be(r,n,pw,t);)if(i(r))return}(n,r,l,o)),e},eai=t.curry(gvt,io.Up,le,ae),oai=t.curry(gvt,io.Down,ae,le),nyt=function(n){return function(t){return i=n,t.line>i;var i}},od=function(n){return function(t){return i=n,t.line===i;var i}},sai=r.isContentEditableFalse,hai=be,sd=function(n,t){return Math.abs(n.left-t)},hd=function(n,t){return Math.abs(n.right-t)},tyt=function(n,t){return n>=t.left&&n<=t.right},uv=function(n,t){return h.reduce(n,function(n,i){var r,u;return r=Math.min(sd(n,t),hd(n,t)),u=Math.min(sd(i,t),hd(i,t)),tyt(t,i)?i:tyt(t,n)?n:u===r&&sai(i.node)?i:u<r?i:n})},iyt=function(n,t,i,r){for(;r=hai(r,n,pw,t);)if(i(r))return},cai=function(n,i,r){var u,a,o,s,c,f,e,l,v=ed((a=n,h.filter(h.toArray(a.getElementsByTagName("*")),cr))),y=h.filter(v,function(n){return r>=n.top&&r<=n.bottom});return(u=uv(y,i))&&(u=uv((c=n,l=function(n,t){var i;return i=h.filter(ed([t]),function(t){return!n(t,f)}),e=e.concat(i),0===i.length},(e=[]).push(f=u),iyt(io.Up,c,t.curry(l,le),f.node),iyt(io.Down,c,t.curry(l,ae),f.node),e),i))&&cr(u.node)?(s=i,{node:(o=u).node,before:sd(o,s)<hd(o,s)}):null},ryt=function(n,t,i){return!i.collapsed&&u.foldl(i.getClientRects(),function(i,r){return i||(f=t,(e=n)>=(u=r).left&&e<=u.right&&f>=u.top&&f<=u.bottom);var u,e,f},!1)},uyt=function(n,t){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){var r=arguments;null===i&&(i=setTimeout(function(){n.apply(null,r);r=i=null},t))}}},lai=function(n){var t=uyt(function(){if(!n.removed&&n.selection.getRng().collapsed){var t=al(n,n.selection.getRng(),!1);n.selection.setRng(t)}},0);n.on("focus",function(){t.throttle()});n.on("blur",function(){t.cancel()})},a={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(n){return n.shiftKey||n.ctrlKey||n.altKey||this.metaKeyPressed(n)},metaKeyPressed:function(n){return s.mac?n.metaKey:n.ctrlKey&&!n.altKey}},cd=r.isContentEditableTrue,pu=r.isContentEditableFalse,aai=dl,vai=kl,fv=function(n,t){for(var i=n.getBody();t&&t!==i;){if(cd(t)||pu(t))return t;t=t.parentNode}return null},yai=function(n){var t,y,c,l=n.getBody(),r=cui(n.getBody(),function(t){return n.dom.isBlock(t)},function(){return ks(n)}),v="sel-"+n.dom.uniqueId(),p=function(t){t&&n.selection.setRng(t)},b=function(){return n.selection.getRng()},i=function(t,i,u,f){return void 0===f&&(f=!0),n.fire("ShowCaret",{target:i,direction:t,before:u}).isDefaultPrevented()?null:(f&&n.selection.scrollIntoView(i,-1===t),r.show(u,i))},k=function(n,t){return t=bl(n,l,t),-1===n?e.fromRangeStart(t):e.fromRangeEnd(t)},d=function(n){return ui(n)||sl(n)||hl(n)},g=function(n){return d(n.startContainer)||d(n.endContainer)},w=function(r,e){var a,c,b,l,p,d,nt,o,y,tt,w=n.$,it=n.dom;if(!r)return null;if(r.collapsed){if(!g(r))if(!1===e){if(o=k(-1,r),cr(o.getNode(!0)))return i(-1,o.getNode(!0),!1,!1);if(cr(o.getNode()))return i(-1,o.getNode(),!o.isAtEnd(),!1)}else{if(o=k(1,r),cr(o.getNode()))return i(1,o.getNode(),!o.isAtEnd(),!1);if(cr(o.getNode(!0)))return i(1,o.getNode(!0),!1,!1)}return null}return l=r.startContainer,p=r.startOffset,d=r.endOffset,3===l.nodeType&&0===p&&pu(l.parentNode)&&(l=l.parentNode,p=it.nodeIndex(l),l=l.parentNode),1!==l.nodeType?null:(d===p+1&&(a=l.childNodes[p]),pu(a)?(y=tt=a.cloneNode(!0),(nt=n.fire("ObjectSelected",{target:a,targetClone:y})).isDefaultPrevented()?null:(c=tk(f.fromDom(n.getBody()),"#"+v).fold(function(){return w([])},function(n){return w([n.dom()])}),y=nt.targetClone,0===c.length&&(c=w('<div data-mce-bogus="all" class="mce-offscreen-selection"><\/div>').attr("id",v)).appendTo(n.getBody()),r=n.dom.createRng(),y===tt&&s.ie?(c.empty().append('<p style="font-size: 0" data-mce-bogus="all"> <\/p>').append(y),r.setStartAfter(c[0].firstChild.firstChild),r.setEndAfter(y)):(c.empty().append(" ").append(y).append(" "),r.setStart(c[0].firstChild,1),r.setEnd(c[0].lastChild,0)),c.css({top:it.getPos(a,n.getBody()).y}),c[0].focus(),(b=n.selection.getSel()).removeAllRanges(),b.addRange(r),u.each(hr(f.fromDom(n.getBody()),"*[data-mce-selected]"),function(n){dt.remove(n,"data-mce-selected")}),a.setAttribute("data-mce-selected","1"),t=a,h(),r)):null)},o=function(){t&&t.removeAttribute("data-mce-selected");tk(f.fromDom(n.getBody()),"#"+v).each(ht.remove);t=null},h=function(){r.hide()};return s.ceFalse&&(function(){n.on("mouseup",function(t){var i=b();i.collapsed&&fvt(n,t.clientX,t.clientY)&&p(aet(n,i,!1))});n.on("click",function(t){var i;(i=fv(n,t.target))&&(pu(i)&&(t.preventDefault(),n.focus()),cd(i)&&n.dom.isChildOf(i,n.selection.getNode())&&o())});n.on("blur NewBlock",function(){o()});n.on("ResizeWindow FullscreenStateChanged",function(){return r.reposition()});var u,f,c=function(t,i){var u,f,r=n.dom.getParent(t,n.dom.isBlock),o=n.dom.getParent(i,n.dom.isBlock);return!(!r||!n.dom.isChildOf(r,o)||!1!==pu(fv(n,r)))||r&&(u=r,f=o,!(n.dom.getParent(u,n.dom.isBlock)===n.dom.getParent(f,n.dom.isBlock)))&&function(n){var r=ir(n),i,t;return n.firstChild?(i=e.before(n.firstChild),t=r.next(i),t&&!vai(t)&&!aai(t)):!1}(r)};f=!1;(u=n).on("touchstart",function(){f=!1});u.on("touchmove",function(){f=!0});u.on("touchend",function(n){var t=fv(u,n.target);pu(t)&&(f||(n.preventDefault(),w(rb(u,t))))});n.on("mousedown",function(t){var f,r=t.target,u,e;(r===l||"HTML"===r.nodeName||n.dom.isChildOf(r,l))&&!1!==fvt(n,t.clientX,t.clientY)&&((f=fv(n,r))?pu(f)?(t.preventDefault(),w(rb(n,f))):(o(),cd(f)&&t.shiftKey||ryt(t.clientX,t.clientY,n.selection.getRng())||(h(),n.selection.placeCaretAt(t.clientX,t.clientY))):!1===cr(r)&&(o(),h(),u=cai(l,t.clientX,t.clientY),u&&!c(t.target,u.node)&&(t.preventDefault(),e=i(1,u.node,u.before,!1),n.getBody().focus(),p(e))))});n.on("keypress",function(t){a.modifierPressed(t)||(t.keyCode,pu(n.selection.getNode())&&t.preventDefault())});n.on("getSelectionRange",function(n){var i=n.range;if(t){if(!t.parentNode)return void(t=null);(i=i.cloneRange()).selectNode(t);n.range=i}});n.on("setSelectionRange",function(n){var t;(t=w(n.range,n.forward))&&(n.range=t)});n.on("AfterSetSelectionRange",function(t){var i,r=t.range;g(r)||h();i=r.startContainer.parentNode;n.dom.hasClass(i,"mce-offscreen-selection")||o()});n.on("copy",function(t){var r,u=t.clipboardData,i;t.isDefaultPrevented()||!t.clipboardData||s.ie||(i=(r=n.dom.get(v))?r.getElementsByTagName("*")[0]:r,i&&(t.preventDefault(),u.clearData(),u.setData("text/html",i.outerHTML),u.setData("text/plain",i.outerText)))});fai(n);lai(n)}(),y=n.contentStyles,c=".mce-content-body",y.push(r.getCss()),y.push(c+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+c+" *[contentEditable=false] {cursor: default;}"+c+" *[contentEditable=true] {cursor: text;}")),{showCaret:i,showBlockCaretContainer:function(t){t.hasAttribute("data-mce-caret")&&(vw(t),p(b()),n.selection.scrollIntoView(t[0]))},hideFakeCaret:h,destroy:function(){r.destroy();t=null}}},fyt=function(n,t,i){var u,r,f,o,e=1;for(o=n.getShortEndedElements(),(f=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=u=i;r=f.exec(t);){if(u=f.lastIndex,"/"===r[1])e--;else if(!r[1]){if(r[2]in o)continue;e++}if(0===e)break}return u};(ld||(ld={})).findEndTag=fyt;var ad=ld,eyt=function(n,t){var o,r,u,f,s,h,c,l,i=t,e=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,a=n.schema;for(h=n.getTempAttrs(),c=i,l=new RegExp(["\\s?("+h.join("|")+')="[^"]+"'].join("|"),"gi"),i=c.replace(l,""),s=a.getShortEndedElements();f=e.exec(i);)r=e.lastIndex,u=f[0].length,o=s[f[1]]?r:ad.findEndTag(a,i,r),i=i.substring(0,r-u)+i.substring(o),e.lastIndex=r-u;return eu(i)},oyt={trimExternal:eyt,trimInternal:eyt},pai=0,wai=2,bai=1,kai=function(n,t){var f=n.length+t.length+2,r=new Array(f),i=new Array(f),u=function(i,r,f,e,o){var h=s(i,r,f,e),c,l,a;if(null===h||h.start===r&&h.diag===r-e||h.end===i&&h.diag===i-f)for(c=i,l=f;c<r||l<e;)c<r&&l<e&&n[c]===t[l]?(o.push([0,n[c]]),++c,++l):e-f<r-i?(o.push([2,n[c]]),++c):(o.push([1,t[l]]),++l);else{for(u(i,h.start,f,h.start-h.diag,o),a=h.start;a<h.end;++a)o.push([0,n[a]]);u(h.end,r,h.end-h.diag,e,o)}},e=function(i,r,u,f){for(var e=i;e-r<f&&e<u&&n[e]===t[e-r];)++e;return{start:i,end:e,diag:r}},s=function(u,f,o,s){var w=f-u,b=s-o;if(0===w||0===b)return null;var l,c,h,v,y,a=w-b,k=b+w,p=(k%2==0?k:k+1)/2;for(r[1+p]=u,i[1+p]=f+1,l=0;l<=p;++l){for(c=-l;c<=l;c+=2){for(h=c+p,r[h]=c===-l||c!==l&&r[h-1]<r[h+1]?r[h+1]:r[h-1]+1,y=(v=r[h])-u+o-c;v<f&&y<s&&n[v]===t[y];)r[h]=++v,++y;if(a%2!=0&&a-l<=c&&c<=a+l&&i[h-a]<=r[h])return e(i[h-a],c+u-o,f,s)}for(c=a-l;c<=a+l;c+=2){for(h=c+p-a,i[h]=c===a-l||c!==a+l&&i[h+1]<=i[h-1]?i[h+1]-1:i[h-1],y=(v=i[h]-1)-u+o-c;u<=v&&o<=y&&n[v]===t[y];)i[h]=v--,y--;if(a%2==0&&-l<=c&&c<=l&&i[h]<=r[h+a])return e(i[h],c+u-o,f,s)}}},o=[];return u(0,n.length,0,t.length,o),o},syt=function(n){return r.isElement(n)?n.outerHTML:r.isText(n)?uf.encodeRaw(n.data,!1):r.isComment(n)?"<!--"+n.data+"-->":""},dai=function(n,t,i){var u=function(n){var t,r,i;for(i=document.createElement("div"),t=document.createDocumentFragment(),n&&(i.innerHTML=n);r=i.firstChild;)t.appendChild(r);return t}(t),r;n.hasChildNodes()&&i<n.childNodes.length?(r=n.childNodes[i],r.parentNode.insertBefore(u,r)):n.appendChild(u)},gai=function(n){return h.filter(h.map(n.childNodes,syt),function(n){return 0<n.length})},nvi=function(n,t){var u,r,i,f=h.map(t.childNodes,syt);return u=kai(f,n),r=t,i=0,h.each(u,function(n){n[0]===pai?i++:n[0]===bai?(dai(r,n[1],i),i++):n[0]===wai&&function(n,t){if(n.hasChildNodes()&&t<n.childNodes.length){var i=n.childNodes[t];i.parentNode.removeChild(i)}}(r,i)}),t},tvi=function(n,t){var i=(t||document).createElement("div");return i.innerHTML=n,y.children(f.fromDom(i))},ivi=function(n){return n.dom().innerHTML},rvi=ivi,uvi=function(n,t){var i=y.owner(n).dom(),r=f.fromDom(i.createDocumentFragment()),u=tvi(t,i);bb(r,u);ht.empty(n);ut.append(n,r)},hyt=rs(n.none()),fvi=function(n){return{type:"fragmented",fragments:n,content:"",bookmark:null,beforeBookmark:null}},evi=function(n){return{type:"complete",fragments:null,content:n,bookmark:null,beforeBookmark:null}},vd=function(n){return"fragmented"===n.type?n.fragments.join(""):n.content},cyt=function(t){var i=f.fromTag("body",hyt.get().getOrThunk(function(){var t=document.implementation.createHTMLDocument("undo");return hyt.set(n.some(t)),t}));return uvi(i,vd(t)),u.each(hr(i,"*[data-mce-bogus]"),ht.unwrap),rvi(i)},yd=function(n){var t,i,r;return t=gai(n.getBody()),-1!==(i=(r=u.bind(t,function(t){var i=oyt.trimInternal(n.serializer,t);return 0<i.length?[i]:[]})).join("")).indexOf("<\/iframe>")?fvi(r):evi(i)},pd=function(n,t,i){"fragmented"===t.type?nvi(t.fragments,n.getBody()):n.setContent(t.content,{format:"raw"});n.selection.moveToBookmark(i?t.beforeBookmark:t.bookmark)},wd=function(n,t){return!(!n||!t)&&(r=t,vd(n)===vd(r)||(i=t,cyt(n)===cyt(i)));var i,r};var bd,ayt,vyt=function(n){return n&&/^(IMG)$/.test(n.nodeName)},kd=function(n){return n&&3===n.nodeType&&/^([\t \r\n]+|)$/.test(n.nodeValue)},yyt=function(n,t,i){return"color"!==i&&"backgroundColor"!==i||(t=n.toHex(t)),"fontWeight"===i&&700===t&&(t="bold"),"fontFamily"===i&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t},l={isInlineBlock:vyt,moveStart:function(n,t,i){var f,r,e,o=i.startOffset,u=i.startContainer;if((i.startContainer!==i.endContainer||!vyt(i.startContainer.childNodes[i.startOffset]))&&1===u.nodeType)for(o<(e=u.childNodes).length?f=new et(u=e[o],n.getParent(u,n.isBlock)):(f=new et(u=e[e.length-1],n.getParent(u,n.isBlock))).next(!0),r=f.current();r;r=f.next())if(3===r.nodeType&&!kd(r))return i.setStart(r,0),void t.setRng(i)},getNonWhiteSpaceSibling:function(n,t,i){if(n)for(t=t?"nextSibling":"previousSibling",n=i?n:n[t];n;n=n[t])if(1===n.nodeType||!kd(n))return n},isTextBlock:function(n,t){return t.nodeType&&(t=t.nodeName),!!n.schema.getTextBlockElements()[t.toLowerCase()]},isValid:function(n,t,i){return n.schema.isValidChild(t,i)},isWhiteSpaceNode:kd,replaceVars:function(n,t){return"string"!=typeof n?n=n(t):t&&(n=n.replace(/%(\w+)/g,function(n,i){return t[i]||n})),n},isEq:function(n,t){return t=t||"",n=""+((n=n||"").nodeName||n),t=""+(t.nodeName||t),n.toLowerCase()===t.toLowerCase()},normalizeStyleValue:yyt,getStyle:function(n,t,i){return yyt(n,n.getStyle(t,i),i)},getTextDecoration:function(n,t){var i;return n.getParent(t,function(t){return(i=n.getStyle(t,"text-decoration"))&&"none"!==i}),i},getParents:function(n,t,i){return n.getParents(t,i,n.getRoot())}},af=wi,pyt=l.getParents,wyt=l.isWhiteSpaceNode,ovi=l.isTextBlock,byt=function(n,t){for(void 0===t&&(t=3===n.nodeType?n.length:n.childNodes.length);n&&n.hasChildNodes();)(n=n.childNodes[t])&&(t=3===n.nodeType?n.length:n.childNodes.length);return{node:n,offset:t}},kyt=function(n,t){for(var i=t;i;){if(1===i.nodeType&&n.getContentEditable(i))return"false"===n.getContentEditable(i)?i:t;i=i.parentNode}return t},dyt=function(n,t,i,r){var u,f,e=i.nodeValue;return void 0===r&&(r=n?e.length:0),n?(u=e.lastIndexOf(" ",r),-1===(u=(f=e.lastIndexOf(" ",r))<u?u:f)||t||u++):(u=e.indexOf(" ",r),f=e.indexOf(" ",r),u=-1!==u&&(-1===f||u<f)?u:f),u},gyt=function(n,t,i,r,u,f){var h,e,s,o;if(3===i.nodeType){if(-1!==(s=dyt(u,f,i,r)))return{container:i,offset:s};o=i}for(h=new et(i,n.getParent(i,n.isBlock)||t);e=h[u?"prev":"next"]();)if(3===e.nodeType){if(-1!==(s=dyt(u,f,o=e)))return{container:e,offset:s}}else if(n.isBlock(e))break;if(o)return{container:o,offset:r=u?0:o.length}},npt=function(n,t,i,r,u){var e,f,o,s;for(3===r.nodeType&&0===r.nodeValue.length&&r[u]&&(r=r[u]),e=pyt(n,r),f=0;f<e.length;f++)for(o=0;o<t.length;o++)if(!("collapsed"in(s=t[o])&&s.collapsed!==i.collapsed)&&n.is(e[f],s.selector))return e[f];return r},tpt=function(n,t,i,r){var u,f=n.dom,e=f.getRoot(),o;if((t[0].wrapper||(u=f.getParent(i,t[0].block,e)),u)||(o=f.getParent(i,"LI,TD,TH"),u=f.getParent(3===i.nodeType?i.parentNode:i,function(t){return t!==e&&ovi(n,t)},o)),u&&t[0].wrapper&&(u=pyt(f,u,"ul,ol").reverse()[0]||u),!u)for(u=i;u[r]&&!f.isBlock(u[r])&&(u=u[r],!l.isEq(u,"br")););return u||i},ev=function(n,t,i,r,u,f,e){var s,o,h,c,l,a;if(s=o=e?i:u,c=e?"previousSibling":"nextSibling",l=n.getRoot(),3===s.nodeType&&!wyt(s)&&(e?0<r:f<s.nodeValue.length))return s;for(;;){if(!t[0].block_expand&&n.isBlock(o))return o;for(h=o[c];h;h=h[c])if(!af(h)&&!wyt(h)&&("BR"!==(a=h).nodeName||!a.getAttribute("data-mce-bogus")||a.nextSibling))return o;if(o===l||o.parentNode===l){s=o;break}o=o.parentNode}return s},gs=function(n,t,i,r){var h,f=t.startContainer,s=t.startOffset,u=t.endContainer,e=t.endOffset,o=n.dom;return 1===f.nodeType&&f.hasChildNodes()&&3===(f=ve(f,s)).nodeType&&(s=0),1===u.nodeType&&u.hasChildNodes()&&3===(u=ve(u,t.collapsed?e:e-1)).nodeType&&(e=u.nodeValue.length),f=kyt(o,f),u=kyt(o,u),(af(f.parentNode)||af(f))&&3===(f=(f=af(f)?f:f.parentNode).nextSibling||f).nodeType&&(s=0),(af(u.parentNode)||af(u))&&3===(u=(u=af(u)?u:u.parentNode).previousSibling||u).nodeType&&(e=u.length),i[0].inline&&(t.collapsed&&((h=gyt(o,n.getBody(),f,s,!0,r))&&(f=h.container,s=h.offset),(h=gyt(o,n.getBody(),u,e,!1,r))&&(u=h.container,e=h.offset)),u=r?u:function(n,t){var i=byt(n,t);if(i.node){for(;i.node&&0===i.offset&&i.node.previousSibling;)i=byt(i.node.previousSibling);i.node&&0<i.offset&&3===i.node.nodeType&&" "===i.node.nodeValue.charAt(i.offset-1)&&1<i.offset&&(n=i.node).splitText(i.offset-1)}return n}(u,e)),(i[0].inline||i[0].block_expand)&&(i[0].inline&&3===f.nodeType&&0!==s||(f=ev(o,i,f,s,u,e,!0)),i[0].inline&&3===u.nodeType&&e!==u.nodeValue.length||(u=ev(o,i,f,s,u,e,!1))),i[0].selector&&!1!==i[0].expand&&!i[0].inline&&(f=npt(o,i,t,f,"previousSibling"),u=npt(o,i,t,u,"nextSibling")),(i[0].block||i[0].selector)&&(f=tpt(n,i,f,"previousSibling"),u=tpt(n,i,u,"nextSibling"),i[0].block&&(o.isBlock(f)||(f=ev(o,i,f,s,u,e,!0)),o.isBlock(u)||(u=ev(o,i,f,s,u,e,!1)))),1===f.nodeType&&(s=o.nodeIndex(f),f=f.parentNode),1===u.nodeType&&(e=o.nodeIndex(u)+1,u=u.parentNode),{startContainer:f,startOffset:s,endContainer:u,endOffset:e}},dd=l.isEq,ipt=function(n,t,i){var u=n.formatter.get(i),r;if(u)for(r=0;r<u.length;r++)if(!1===u[r].inherit&&n.dom.is(t,u[r].selector))return!0;return!1},gd=function(n,t,i,r){var u=n.dom.getRoot();return t!==u&&(t=n.dom.getParent(t,function(t){return!!ipt(n,t,i)||t.parentNode===u||!!ov(n,t,i,r,!0)}),ov(n,t,i,r))},rpt=function(n,t,i){return!!dd(t,i.inline)||!!dd(t,i.block)||(i.selector?1===t.nodeType&&n.is(t,i.selector):void 0)},upt=function(n,t,i,r,u,f){var o,h,s,e=i[r];if(i.onmatch)return i.onmatch(t,i,r);if(e)if("undefined"==typeof e.length){for(o in e)if(e.hasOwnProperty(o)){if(h="attributes"===r?n.getAttrib(t,o):l.getStyle(n,t,o),u&&!h&&!i.exact)return;if((!u||i.exact)&&!dd(h,l.normalizeStyleValue(n,l.replaceVars(e[o],f),o)))return}}else for(s=0;s<e.length;s++)if("attributes"===r?n.getAttrib(t,e[s]):l.getStyle(n,t,e[s]))return i;return i},ov=function(n,t,i,r,u){var f,e,o,s,h=n.formatter.get(i),c=n.dom;if(h&&t)for(e=0;e<h.length;e++)if(f=h[e],rpt(n.dom,t,f)&&upt(c,t,f,"attributes",u,r)&&upt(c,t,f,"styles",u,r)){if(s=f.classes)for(o=0;o<s.length;o++)if(!n.dom.hasClass(t,s[o]))return;return f}},ei={matchNode:ov,matchName:rpt,match:function(n,t,i,r){var u;return r?gd(n,r,t,i):(r=n.selection.getNode(),!!gd(n,r,t,i)||!((u=n.selection.getStart())===r||!gd(n,u,t,i)))},matchAll:function(n,t,i){var r,u=[],f={};return r=n.selection.getStart(),n.dom.getParent(r,function(r){for(var e,o=0;o<t.length;o++)e=t[o],!f[e]&&ov(n,r,e,i)&&(f[e]=!0,u.push(e))},n.dom.getRoot()),u},canApply:function(n,t){var e,f,r,i,o,u=n.formatter.get(t),s=n.dom;if(u)for(e=n.selection.getStart(),f=l.getParents(s,e),i=u.length-1;0<=i;i--){if(!(o=u[i].selector)||u[i].defaultBlock)return!0;for(r=f.length-1;0<=r;r--)if(s.is(f[r],o))return!0}return!1},matchesUnInheritedFormatSelector:ipt},sv=function(n,t){return n.splitText(t)},ng=function(n){var t=n.startContainer,i=n.startOffset,u=n.endContainer,f=n.endOffset;return t===u&&r.isText(t)?0<i&&i<t.nodeValue.length&&(t=(u=sv(t,i)).previousSibling,i<f?(t=u=sv(u,f-=i).previousSibling,f=u.nodeValue.length,i=0):f=0):(r.isText(t)&&0<i&&i<t.nodeValue.length&&(t=sv(t,i),i=0),r.isText(u)&&0<f&&f<u.nodeValue.length&&(f=(u=sv(u,f).previousSibling).nodeValue.length)),{startContainer:t,startOffset:i,endContainer:u,endOffset:f}},ro=at,fpt="_mce_caret",svi=function(n){return 0<function(n){for(var t=[];n;){if(3===n.nodeType&&n.nodeValue!==ro||1<n.childNodes.length)return[];1===n.nodeType&&t.push(n);n=n.firstChild}return t}(n).length},ept=function(n){var t;if(n)for(n=(t=new et(n,n)).current();n;n=t.next())if(3===n.nodeType)return n;return null},tg=function(n){var t=f.fromTag("span");return dt.setAll(t,{id:fpt,"data-mce-bogus":"1","data-mce-type":"format-caret"}),n&&ut.append(t,f.fromText(ro)),t},ig=function(n,t,i,r){var u,o,e,s;u=t.getRng(!0);o=n.getParent(i,n.isBlock);svi(i)?(!1!==r&&(u.setStartBefore(i),u.setEndBefore(i)),n.remove(i)):((s=ept(i))&&s.nodeValue.charAt(0)===ro&&s.deleteData(0,1),e=s,u.startContainer===e&&0<u.startOffset&&u.setStart(e,u.startOffset-1),u.endContainer===e&&0<u.endOffset&&u.setEnd(e,u.endOffset-1),n.remove(i,!0));o&&n.isEmpty(o)&&ra(f.fromDom(o));t.setRng(u)},rg=function(n,t,i,r,u){if(r)ig(t,i,r,u);else if(!(r=hf(n,i.getStart())))for(;r=t.get(fpt);)ig(t,i,r,!1)},hvi=function(n,t,i){var r=n.dom,u=r.getParent(i,ot.curry(l.isTextBlock,n));u&&r.isEmpty(u)?i.parentNode.replaceChild(t,i):(cfi(f.fromDom(i)),r.isEmpty(i)?i.parentNode.replaceChild(t,i):r.insertAfter(t,i))},opt=function(n,t){return n.appendChild(t),t},spt=function(n,t){var i=u.foldr(n,function(n,t){return opt(n,t.cloneNode(!1))},t);return opt(i,i.ownerDocument.createTextNode(ro))},cvi=function(n){var t=n.dom,i=n.selection,r=n.getBody();n.on("mouseup keydown",function(n){var f,e,u,o;f=r;e=t;u=i;o=n.keyCode;rg(f,e,u,null,!1);8===o&&u.isCollapsed()&&u.getStart().innerHTML===ro&&rg(f,e,u,hf(f,u.getStart()));37!==o&&39!==o||rg(f,e,u,hf(f,u.getStart()))})},lvi=function(n,t){return n.schema.getTextInlineElements().hasOwnProperty(nt.name(t))&&!sf(t.dom())&&!r.isBogus(t.dom())},hv={},hpt=h.filter,cpt=h.each;ayt=function(n){var t,i,u=n.selection.getRng();t=r.matchNodeNames("pre");u.collapsed||(i=n.selection.getSelectedBlocks(),cpt(hpt(hpt(i,t),function(n){return t(n.previousSibling)&&-1!==h.indexOf(i,n.previousSibling)}),function(n){var t,i;t=n.previousSibling;o(i=n).remove();o(t).append("<br><br>").append(i.childNodes)}))};hv[bd="pre"]||(hv[bd]=[]);hv[bd].push(ayt);var avi=function(n,t){cpt(hv[n],function(n){n(t)})},vvi=i.each,ug=function(n,t,i){var e,s,h,r,v,c,p,u=t.startContainer,w=t.startOffset,f=t.endContainer,b=t.endOffset;if(0<(p=n.select("td[data-mce-selected],th[data-mce-selected]")).length)vvi(p,function(n){i([n])});else{var k,o,l,y=function(n){var t;return 3===(t=n[0]).nodeType&&t===u&&w>=t.nodeValue.length&&n.splice(0,1),t=n[n.length-1],0===b&&0<n.length&&t===f&&3===t.nodeType&&n.splice(n.length-1,1),n},d=function(n,t,i){for(var r=[];n&&n!==i;n=n[t])r.push(n);return r},g=function(n,t){do{if(n.parentNode===t)return n;n=n.parentNode}while(n)},a=function(n,t,u){var f=u?"nextSibling":"previousSibling";for(v=(r=n).parentNode;r&&r!==t;r=v)v=r.parentNode,(c=d(r===n?r:r[f],f)).length&&(u||c.reverse(),i(y(c)))};if(1===u.nodeType&&u.hasChildNodes()&&(u=u.childNodes[w]),1===f.nodeType&&f.hasChildNodes()&&(o=b,l=(k=f).childNodes,--o>l.length-1?o=l.length-1:o<0&&(o=0),f=l[o]||k),u===f)return i(y([u]));for(e=n.findCommonAncestor(u,f),r=u;r;r=r.parentNode){if(r===f)return a(u,e,!0);if(r===e)break}for(r=f;r;r=r.parentNode){if(r===u)return a(f,e);if(r===e)break}s=g(u,e)||u;h=g(f,e)||f;a(u,s,!0);(c=d(s===u?s:s.nextSibling,"nextSibling",h===f?h.nextSibling:h)).length&&i(y(c));a(f,h)}},yvi=/^(src|href|style)$/,vf=i.each,uo=l.isEq,fg=function(n){return/^(TH|TD)$/.test(n.nodeName)},lpt=function(n,t,i){var u,f,e;return u=t[i?"startContainer":"endContainer"],f=t[i?"startOffset":"endOffset"],r.isElement(u)&&(e=u.childNodes.length-1,!i&&f&&f--,u=u.childNodes[e<f?e:f]),r.isText(u)&&i&&f>=u.nodeValue.length&&(u=new et(u,n.getBody()).next()||u),r.isText(u)&&!i&&0===f&&(u=new et(u,n.getBody()).prev()||u),u},cv=function(n,t,i,r){var u=n.create(i,r);return t.parentNode.insertBefore(u,t),u.appendChild(t),u},lv=function(n,t,i,r){return!(t=l.getNonWhiteSpaceSibling(t,i,r))||"BR"===t.nodeName||n.isBlock(t)},nh=function(n,t,u,f,e){var y,k,nt,tt,it,p,w,a,o,c,v,d,s,b,h=n.dom,g;if(it=h,!(uo(p=f,(w=t).inline)||uo(p,w.block)||(w.selector?r.isElement(p)&&it.is(p,w.selector):void 0)||(tt=f,t.links&&"A"===tt.tagName)))return!1;if("all"!==t.remove)for(vf(t.styles,function(n,i){n=l.normalizeStyleValue(h,l.replaceVars(n,u),i);"number"==typeof i&&(i=n,e=0);(t.remove_similar||!e||uo(l.getStyle(h,e,i),n))&&h.setStyle(f,i,"");nt=1}),nt&&""===h.getAttrib(f,"style")&&(f.removeAttribute("style"),f.removeAttribute("data-mce-style")),vf(t.attributes,function(n,t){var i;if(n=l.replaceVars(n,u),"number"==typeof t&&(t=n,e=0),!e||uo(h.getAttrib(e,t),n)){if("class"===t&&(n=h.getAttrib(f,t))&&(i="",vf(n.split(/\s+/),function(n){/mce\-\w+/.test(n)&&(i+=(i?" ":"")+n)}),i))return void h.setAttrib(f,t,i);"class"===t&&f.removeAttribute("className");yvi.test(t)&&f.removeAttribute("data-mce-"+t);f.removeAttribute(t)}}),vf(t.classes,function(n){n=l.replaceVars(n,u);e&&!h.hasClass(e,n)||h.removeClass(f,n)}),k=h.getAttribs(f),y=0;y<k.length;y++)if(g=k[y].nodeName,0!==g.indexOf("_")&&0!==g.indexOf("data-"))return!1;if("none"!==t.remove)return(a=n,c=t,d=(o=f).parentNode,s=a.dom,b=a.settings.forced_root_block,c.block&&(b?d===s.getRoot()&&(c.list_block&&uo(o,c.list_block)||vf(i.grep(o.childNodes),function(n){l.isValid(a,b,n.nodeName.toLowerCase())?v?v.appendChild(n):(v=cv(s,n,b),s.setAttribs(v,a.settings.forced_root_block_attrs)):v=0})):s.isBlock(o)&&!s.isBlock(d)&&(lv(s,o,!1)||lv(s,o.firstChild,!0,1)||o.insertBefore(s.create("br"),o.firstChild),lv(s,o,!0)||lv(s,o.lastChild,!1,1)||o.appendChild(s.create("br")))),c.selector&&c.inline&&!uo(c.inline,o)||s.remove(o,1),!0)},eg=nh,apt=function(n,t,u,f,e){var k,p,s=n.formatter.get(t),c=s[0],v=!0,o=n.dom,h=n.selection,y=function(i){var r,o,h,a,v,f,y=(r=n,o=i,h=t,a=u,v=e,vf(l.getParents(r.dom,o.parentNode).reverse(),function(n){var t;f||"_start"===n.id||"_end"===n.id||(t=ei.matchNode(r,n,h,a,v))&&!1!==t.split&&(f=n)}),f);return function(n,t,i,r,u,f,e,o){var h,s,c,a,l,y,v=n.dom;if(i){for(y=i.parentNode,h=r.parentNode;h&&h!==y;h=h.parentNode){for(s=v.clone(h,!1),l=0;l<t.length;l++)if(nh(n,t[l],o,s,s)){s=0;break}s&&(c&&s.appendChild(c),a||(a=s),c=s)}!f||e.mixed&&v.isBlock(i)||(r=v.split(i,r));c&&(u.parentNode.insertBefore(c,u),a.appendChild(u))}return r}(n,s,y,i,i,!0,c,u)},d=function(t){var e,f,h,a,l;if(r.isElement(t)&&o.getContentEditable(t)&&(a=v,v="true"===o.getContentEditable(t),l=!0),e=i.grep(t.childNodes),v&&!l)for(f=0,h=s.length;f<h&&!nh(n,s[f],u,t,t);f++);if(c.deep&&e.length){for(f=0,h=e.length;f<h;f++)d(e[f]);l&&(v=a)}},w=function(n){var i=o.get(n?"_start":"_end"),t=i[n?"firstChild":"lastChild"];return wi(t)&&(t=t[n?"firstChild":"lastChild"]),r.isText(t)&&0===t.data.length&&(t=n?i.previousSibling||i.nextSibling:i.nextSibling||i.previousSibling),o.remove(i,!0),t},b=function(t){var i,u,f=t.commonAncestorContainer;if(t=gs(n,t,s,!0),c.split){if((i=lpt(n,t,!0))!==(u=lpt(n,t))){if(/^(TR|TH|TD)$/.test(i.nodeName)&&i.firstChild&&(i="TR"===i.nodeName?i.firstChild.firstChild||i:i.firstChild||i),f&&/^T(HEAD|BODY|FOOT|R)$/.test(f.nodeName)&&fg(u)&&u.firstChild&&(u=u.firstChild||u),o.isChildOf(i,u)&&i!==u&&!o.isBlock(u)&&!fg(i)&&!fg(u))return i=cv(o,i,"span",{id:"_start","data-mce-type":"bookmark"}),y(i),void(i=w(!0));i=cv(o,i,"span",{id:"_start","data-mce-type":"bookmark"});u=cv(o,u,"span",{id:"_end","data-mce-type":"bookmark"});y(i);y(u);i=w(!0);u=w()}else i=u=y(i);t.startContainer=i.parentNode?i.parentNode:i;t.startOffset=o.nodeIndex(i);t.endContainer=u.parentNode?u.parentNode:u;t.endOffset=o.nodeIndex(u)+1}ug(o,t,function(t){vf(t,function(t){d(t);r.isElement(t)&&"underline"===n.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===l.getTextDecoration(o,t.parentNode)&&nh(n,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})},a,g;if(f)f.nodeType?((p=o.createRng()).setStartBefore(f),p.setEndAfter(f),b(p)):b(f);else if("false"!==o.getContentEditable(h.getNode()))h.isCollapsed()&&c.inline&&!o.select("td[data-mce-selected],th[data-mce-selected]").length?function(n,t,i,r){var h,y,p,c,u,f,l,a=n.dom,e=n.selection,w=[],o=e.getRng(),s,v,b;for(h=o.startContainer,y=o.startOffset,3===(u=h).nodeType&&(y!==h.nodeValue.length&&(c=!0),u=u.parentNode);u;){if(ei.matchNode(n,u,t,i,r)){f=u;break}u.nextSibling&&(c=!0);w.push(u);u=u.parentNode}f&&(c?(p=e.getBookmark(),o.collapse(!0),s=gs(n,o,n.formatter.get(t),!0),s=ng(s),n.formatter.remove(t,i,s),e.moveToBookmark(p)):(l=hf(n.getBody(),f),v=tg(!1).dom(),b=spt(w,v),hvi(n,v,l||f),ig(a,e,l,!1),e.setCursorLocation(b,1),a.isEmpty(f)&&a.remove(f)))}(n,t,u,e):(k=hs.getPersistentBookmark(n.selection,!0),b(h.getRng()),h.moveToBookmark(k),c.inline&&ei.match(n,t,u,h.getStart())&&l.moveStart(o,h,h.getRng()),n.nodeChanged());else for(f=h.getNode(),a=0,g=s.length;a<g&&(!s[a].ceFalseOverride||!nh(n,s[a],u,f,f));a++);},th=i.each,og=function(n){return n&&1===n.nodeType&&!wi(n)&&!sf(n)&&!r.isBogus(n)},vpt=function(n,t){for(var i=n;i;i=i[t]){if(3===i.nodeType&&0!==i.nodeValue.length)return n;if(1===i.nodeType&&!wi(i))return i}return n},ypt=function(n,t,r){var u,f,e=new gst(n);if(t&&r&&(t=vpt(t,"previousSibling"),r=vpt(r,"nextSibling"),e.compare(t,r))){for(u=t.nextSibling;u&&u!==r;)u=(f=u).nextSibling,t.appendChild(f);return n.remove(r),i.each(i.grep(r.childNodes),function(n){t.appendChild(n)}),t}return r},sg=function(n,t,i){th(n.childNodes,function(n){og(n)&&(t(n)&&i(n),n.hasChildNodes()&&sg(n,t,i))})},ppt=function(n,i){return t.curry(function(t,i){return!(!i||!l.getStyle(n,i,t))},i)},wpt=function(n,i,r){return t.curry(function(t,i,r){n.setStyle(r,t,i);""===r.getAttribute("style")&&r.removeAttribute("style");pvi(n,r)},i,r)},pvi=function(n,t){"SPAN"===t.nodeName&&0===n.getAttribs(t).length&&n.remove(t,!0)},bpt=function(n,t){var i;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(i=l.getTextDecoration(n,t.parentNode),n.getStyle(t,"color")&&i?n.setStyle(t,"text-decoration",i):n.getStyle(t,"text-decoration")===i&&n.setStyle(t,"text-decoration",null))},wvi=function(n,t,i,r){th(t,function(t){th(n.dom.select(t.inline,r),function(r){og(r)&&eg(n,t,i,r,t.exact?r:null)}),function(n,t,i){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";th(n.select(r,i),function(i){og(i)&&th(t.styles,function(t,r){n.setStyle(i,r,"")})})}}(n.dom,t,r)})},bvi=function(n,r,u,f){(r.styles.color||r.styles.textDecoration)&&(i.walk(f,t.curry(bpt,n),"childNodes"),bpt(n,f))},kvi=function(n,t,i,r){t.styles&&t.styles.backgroundColor&&sg(r,ppt(n,"fontSize"),wpt(n,"backgroundColor",l.replaceVars(t.styles.backgroundColor,i)))},dvi=function(n,t,i,r){"sub"!==t.inline&&"sup"!==t.inline||(sg(r,ppt(n,"fontSize"),wpt(n,"fontSize","")),n.remove(n.select("sup"===t.inline?"sub":"sup",r),!0))},gvi=function(n,t,i,r){r&&!1!==t.merge_siblings&&(r=ypt(n,l.getNonWhiteSpaceSibling(r),r),r=ypt(n,r,l.getNonWhiteSpaceSibling(r,!0)))},nyi=function(n,t,i,r,u){ei.matchNode(n,u.parentNode,i,r)&&eg(n,t,r,u)||t.merge_with_parents&&n.dom.getParent(u.parentNode,function(f){if(ei.matchNode(n,f,i,r))return eg(n,t,r,u),!0})},bi=i.each,kpt=function(n,t,u,f){var w,v,s=n.formatter.get(t),e=s[0],b=!f&&n.selection.isCollapsed(),o=n.dom,h=n.selection,c=function(n,t){if(t=t||e,n){if(t.onformat&&t.onformat(n,t,u,f),bi(t.styles,function(t,i){o.setStyle(n,i,l.replaceVars(t,u))}),t.styles){var i=o.getAttrib(n,"style");i&&n.setAttribute("data-mce-style",i)}bi(t.attributes,function(t,i){o.setAttrib(n,i,l.replaceVars(t,u))});bi(t.classes,function(t){t=l.replaceVars(t,u);o.hasClass(n,t)||o.addClass(n,t)})}},k=function(n,t){var i=!1;return!!e.selector&&(bi(n,function(n){if(!("collapsed"in n&&n.collapsed!==b))return o.is(t,n.selector)&&!sf(t)?(c(t,n),!(i=!0)):void 0}),i)},y=function(f,o,h,a){var v,w,p=[],y=!0;v=e.inline||e.block;w=f.create(v);c(w);ug(f,o,function(r){var o,h=function(r){var b,g,d,nt,tt;if(nt=y,b=r.nodeName.toLowerCase(),g=r.parentNode.nodeName.toLowerCase(),1===r.nodeType&&f.getContentEditable(r)&&(nt=y,y="true"===f.getContentEditable(r),d=!0),l.isEq(b,"br"))return o=0,void(e.block&&f.remove(r));if(e.wrapper&&ei.matchNode(n,r,t,u))o=0;else{if(y&&!d&&e.block&&!e.wrapper&&l.isTextBlock(n,b)&&l.isValid(n,g,v))return r=f.rename(r,v),c(r),p.push(r),void(o=0);if(e.selector&&(tt=k(s,r),!e.inline||tt))return void(o=0);!y||d||!l.isValid(n,v,b)||!l.isValid(n,g,v)||!a&&3===r.nodeType&&1===r.nodeValue.length&&65279===r.nodeValue.charCodeAt(0)||sf(r)||e.inline&&f.isBlock(r)?(o=0,bi(i.grep(r.childNodes),h),d&&(y=nt),o=0):(o||(o=f.clone(w,!1),r.parentNode.insertBefore(o,r),p.push(o)),o.appendChild(r))}};bi(r,h)});!0===e.links&&bi(p,function(n){var t=function(n){"A"===n.nodeName&&c(n,e);bi(i.grep(n.childNodes),t)};t(n)});bi(p,function(i){var a,v,y,o,h,w=function(n){var t=!1;return bi(n.childNodes,function(n){if((i=n)&&1===i.nodeType&&!wi(i)&&!sf(i)&&!r.isBogus(i))return t=n,!1;var i}),t};v=0;bi(i.childNodes,function(n){l.isWhiteSpaceNode(n)||wi(n)||v++});a=v;!(1<p.length)&&f.isBlock(i)||0!==a?(e.inline||e.wrapper)&&(e.exact||1!==a||((o=w(y=i))&&!wi(o)&&ei.matchName(f,o,e)&&(h=f.clone(o,!1),c(h),f.replace(h,y,!0),f.remove(o,1)),i=h||y),wvi(n,s,u,i),nyi(n,e,t,u,i),kvi(f,e,u,i),dvi(f,e,u,i),gvi(f,e,u,i)):f.remove(i,1)})},p,a,d;if("false"!==o.getContentEditable(h.getNode()))e&&(f?f.nodeType?k(s,f)||((v=o.createRng()).setStartBefore(f),v.setEndAfter(f),y(o,gs(n,v,s),0,!0)):y(o,f,0,!0):b&&e.inline&&!o.select("td[data-mce-selected],th[data-mce-selected]").length?!function(n,t,i){var r,f,s,u,c,e,o=n.selection,l,a,h;u=(r=o.getRng(!0)).startOffset;e=r.startContainer.nodeValue;(f=hf(n.getBody(),o.getStart()))&&(s=ept(f));h=/[^\s\u00a0\u00ad\u200b\ufeff]/;e&&0<u&&u<e.length&&h.test(e.charAt(u))&&h.test(e.charAt(u-1))?(c=o.getBookmark(),r.collapse(!0),r=gs(n,r,n.formatter.get(t)),r=ng(r),n.formatter.apply(t,i,r),o.moveToBookmark(c)):(f&&s.nodeValue===ro||(l=n.getDoc(),a=tg(!0).dom(),s=(f=l.importNode(a,!0)).firstChild,r.insertNode(f),u=1),n.formatter.apply(t,i,f),o.setCursorLocation(s,u))}(n,t,u):(p=n.selection.getNode(),n.settings.forced_root_block||!s[0].defaultBlock||o.getParent(p,o.isBlock)||kpt(n,s[0].defaultBlock),n.selection.setRng(db(n.selection.getRng())),w=hs.getPersistentBookmark(n.selection,!0),y(o,gs(n,h.getRng(),s)),e.styles&&bvi(o,e,u,p),h.moveToBookmark(w),l.moveStart(o,h,h.getRng()),n.nodeChanged()),avi(t,n));else for(f=h.getNode(),a=0,d=s.length;a<d;a++)if(s[a].ceFalseOverride&&o.is(f,s[a].selector))return void c(f,s[a])},dpt={applyFormat:kpt},fo=i.each,tyi=function(n,t,r,u,f){var h,o,s,c,a,v,y,e;null===t.get()&&(o=n,s={},(h=t).set({}),o.on("NodeChange",function(n){var t=l.getParents(o.dom,n.element),r={};t=i.grep(t,function(n){return 1===n.nodeType&&!n.getAttribute("data-mce-bogus")});fo(h.get(),function(n,i){fo(t,function(u){return o.formatter.matchNode(u,i,{},n.similar)?(s[i]||(fo(n,function(n){n(!0,{node:u,format:i,parents:t})}),s[i]=n),r[i]=n,!1):!ei.matchesUnInheritedFormatSelector(o,u,i)&&void 0})});fo(s,function(i,u){r[u]||(delete s[u],fo(i,function(i){i(!1,{node:n.element,format:u,parents:t})}))})}));a=r;v=u;y=f;e=(c=t).get();fo(a.split(","),function(n){e[n]||(e[n]=[],e[n].similar=y);e[n].push(v)});c.set(e)},iyi={get:function(n){var t={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(t,r,u){i.each(u,function(i,r){n.setAttrib(t,r,i)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return i.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(n){t[n]={block:n,remove:"all"}}),t}},av=i.each,lt=d.DOM,gpt=function(n,t){var f,r,e,s=t&&t.schema||fu({}),u=function(n){var t,i,u;return r="string"==typeof n?{name:n,classes:[],attrs:{}}:n,t=lt.create(r.name),i=t,(u=r).classes.length&&lt.addClass(i,u.classes.join(" ")),lt.setAttribs(i,u.attrs),t},o=function(n,t,r){var e,f,l,a,h,p,v,c,y=0<t.length&&t[0],w=y&&y.name;if(h=w,p="string"!=typeof(a=n)?a.nodeName.toLowerCase():a,v=s.getElementRule(p),l=!(!(c=v&&v.parentsRequired)||!c.length)&&(h&&-1!==i.inArray(c,h)?h:c[0]))w===l?(f=t[0],t=t.slice(1)):f=l;else if(y)f=t[0],t=t.slice(1);else if(!r)return n;return f&&(e=u(f)).appendChild(n),r&&(e||(e=lt.create("div")).appendChild(n),i.each(r,function(t){var i=u(t);e.insertBefore(i,n)})),o(e,t,f&&f.siblings)};return n&&n.length?(r=n[0],f=u(r),(e=lt.create("div")).appendChild(o(f,n.slice(1),r.siblings)),e):""},ryi=function(n){var r,t={classes:[],attrs:{}};return"*"!==(n=t.selector=i.trim(n))&&(r=n.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(n,r,u,f,e){switch(r){case"#":t.attrs.id=u;break;case".":t.classes.push(u);break;case":":-1!==i.inArray("checked disabled enabled read-only required".split(" "),u)&&(t.attrs[u]=u)}if("["===f){var o=e.match(/([\w\-]+)(?:\=\"([^\"]+))?/);o&&(t.attrs[o[1]]=o[2])}return""})),t.name=r||"div",t},uyi=function(n){return n&&"string"==typeof n?(n=(n=n.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),i.map(n.split(/(?:>|\s+(?![^\[\]]+\]))/),function(n){var t=i.map(n.split(/(?:~\+|~|\+)/),ryi),r=t.pop();return t.length&&(r.siblings=t),r}).reverse()):[]},fyi=function(n,t){var f,i,r,o,u,e,h="",s;if(!1===(e=n.settings.preview_styles))return"";if("string"!=typeof e&&(e="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),s=function(n){return n.replace(/%(\w+)/g,"")},"string"==typeof t){if(!(t=n.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(e=t.preview)?"":(f=t.block||t.inline||"span",(o=uyi(t.selector)).length?(o[0].name||(o[0].name=f),f=t.selector,i=gpt(o,n)):i=gpt([f],n),r=lt.select(f,i)[0]||i.firstChild,av(t.styles,function(n,t){(n=s(n))&&lt.setStyle(r,t,n)}),av(t.attributes,function(n,t){(n=s(n))&&lt.setAttrib(r,t,n)}),av(t.classes,function(n){n=s(n);lt.hasClass(r,n)||lt.addClass(r,n)}),n.fire("PreviewFormats"),lt.setStyles(i,{position:"absolute",left:-65535}),n.getBody().appendChild(i),u=lt.getStyle(n.getBody(),"fontSize",!0),u=/px$/.test(u)?parseInt(u,10):0,av(e.split(" "),function(t){var i=lt.getStyle(r,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(i)&&(i=lt.getStyle(n.getBody(),t,!0),"#ffffff"===lt.toHex(i).toLowerCase())||"color"===t&&"#000000"===lt.toHex(i).toLowerCase())){if("font-size"===t&&/em|%$/.test(i)){if(0===u)return;i=parseFloat(i)/(/%$/.test(i)?100:1)*u+"px"}"border"===t&&i&&(h+="padding:0 2px;");h+=t+":"+i+";"}}),n.fire("AfterPreviewFormats"),lt.remove(i),h)},eyi=function(n,t,i,r,u){var f=t.get(i);!ei.match(n,i,r,u)||"toggle"in f[0]&&!f[0].toggle?dpt.applyFormat(n,i,r,u):apt(n,i,r,u)},oyi=function(n){n.addShortcut("meta+b","","Bold");n.addShortcut("meta+i","","Italic");n.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)n.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);n.addShortcut("access+7","",["FormatBlock",!1,"p"]);n.addShortcut("access+8","",["FormatBlock",!1,"div"]);n.addShortcut("access+9","",["FormatBlock",!1,"address"])};var twt=function(n){return function(){for(var u,f,e,r,t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(u={},f=0;f<t.length;f++){e=t[f];for(r in e)e.hasOwnProperty(r)&&(u[r]=n(u[r],e[r]))}return u}},iwt=twt(function(n,t){return p.isObject(n)&&p.isObject(t)?iwt(n,t):t}),syi=twt(function(n,t){return t}),ih={deepMerge:iwt,merge:syi},rwt={register:function(n,t,i){n.addAttributeFilter("data-mce-tabindex",function(n,t){for(var i,r=n.length;r--;)(i=n[r]).attr("tabindex",i.attributes.map["data-mce-tabindex"]),i.attr(t,null)});n.addAttributeFilter("src,href,style",function(n,r){for(var f,u,e=n.length,o="data-mce-"+r,s=t.url_converter,h=t.url_converter_scope;e--;)(u=(f=n[e]).attributes.map[o])!==undefined?(f.attr(r,0<u.length?u:null),f.attr(o,null)):(u=f.attributes.map[r],"style"===r?u=i.serializeStyle(i.parseStyle(u),f.name):s&&(u=s.call(h,u,r,f.name)),f.attr(r,0<u.length?u:null))});n.addAttributeFilter("class",function(n){for(var i,t,r=n.length;r--;)(t=(i=n[r]).attr("class"))&&(t=i.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),i.attr("class",0<t.length?t:null))});n.addAttributeFilter("data-mce-type",function(n,t,i){for(var r,u=n.length;u--;)"bookmark"!==(r=n[u]).attributes.map["data-mce-type"]||i.cleanup||r.remove()});n.addNodeFilter("noscript",function(n){for(var t,i=n.length;i--;)(t=n[i].firstChild)&&(t.value=uf.decode(t.value))});n.addNodeFilter("script,style",function(n,i){for(var r,u,f,e=n.length,o=function(n){return n.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};e--;)u=(r=n[e]).firstChild?r.firstChild.value:"","script"===i?((f=r.attr("type"))&&r.attr("type","mce-no/type"===f?null:f.replace(/^mce\-/,"")),"xhtml"===t.element_format&&0<u.length&&(r.firstChild.value="// <![CDATA[\n"+o(u)+"\n// ]\]>")):"xhtml"===t.element_format&&0<u.length&&(r.firstChild.value="<!--\n"+o(u)+"\n-->")});n.addNodeFilter("#comment",function(n){for(var t,i=n.length;i--;)0===(t=n[i]).value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))});n.addNodeFilter("xml:namespace,input",function(n,t){for(var i,r=n.length;r--;)7===(i=n[r]).type?i.remove():1===i.type&&("input"!==t||"type"in i.attributes.map||i.attr("type","text"))});n.addAttributeFilter("data-mce-type",function(t){u.each(t,function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(n.schema.getNonEmptyElements())?t.remove():t.unwrap())})});n.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)})},trimTrailingBr:function(n){var t,i,r=function(n){return n&&"br"===n.name};r(t=n.lastChild)&&r(i=t.prev)&&(t.remove(),i.remove())}},hyi={process:function(n,t,r){return a=r,(l=n)&&l.hasEventListeners("PreProcess")&&!a.no_events?(u=t,h=r,e=(s=n).dom,u=u.cloneNode(!0),(c=document.implementation).createHTMLDocument&&(f=c.createHTMLDocument(""),i.each("BODY"===u.nodeName?u.childNodes:[u],function(n){f.body.appendChild(f.importNode(n,!0))}),u="BODY"!==u.nodeName?f.body.firstChild:f.body,o=e.doc,e.doc=f),fci(s,ih.merge(h,{node:u})),o&&(e.doc=o),u):t;var s,u,h,c,f,o,e,l,a}},cyi=function(n,t,i){n.addNodeFilter("font",function(n){u.each(n,function(n){var f,e,r=t.parse(n.attr("style")),o=n.attr("color"),s=n.attr("face"),h=n.attr("size");o&&(r.color=o);s&&(r["font-family"]=s);h&&(r["font-size"]=i[parseInt(n.attr("size"),10)-1]);n.name="span";n.attr("style",t.serialize(r));f=n;e=["color","face","size"];u.each(e,function(n){f.attr(n,null)})})})},lyi=function(n,t){var r,f=ow();t.convert_fonts_to_spans&&cyi(n,f,i.explode(t.font_size_legacy_values));r=f;n.addNodeFilter("strike",function(n){u.each(n,function(n){var t=r.parse(n.attr("style"));t["text-decoration"]="line-through";n.name="span";n.attr("style",r.serialize(t))})})},ayi={register:function(n,t){t.inline_styles&&lyi(n,t)}},uwt=/^[ \t\r\n]*$/,vyi={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},vv=function(n,t,i){var u,r,f=i?"lastChild":"firstChild",e=i?"prev":"next";if(n[f])return n[f];if(n!==t){if(u=n[e])return u;for(r=n.parent;r&&r!==t;r=r.parent)if(u=r[e])return u}},ai=function(){function n(n,t){this.name=n;1===(this.type=t)&&(this.attributes=[],this.attributes.map={})}return n.create=function(t,i){var r,u;if(r=new n(t,vyi[t]||1),i)for(u in i)r.attr(u,i[u]);return r},n.prototype.replace=function(n){return n.parent&&n.remove(),this.insert(n,this),this.remove(),this},n.prototype.attr=function(n,t){var i,r;if("string"!=typeof n){for(r in n)this.attr(r,n[r]);return this}if(i=this.attributes){if(t!==undefined){if(null===t){if(n in i.map)for(delete i.map[n],r=i.length;r--;)if(i[r].name===n)return i=i.splice(r,1),this;return this}if(n in i.map){for(r=i.length;r--;)if(i[r].name===n){i[r].value=t;break}}else i.push({name:n,value:t});return i.map[n]=t,this}return i.map[n]}},n.prototype.clone=function(){var r,e,f,t,i,u=new n(this.name,this.type);if(f=this.attributes){for((i=[]).map={},r=0,e=f.length;r<e;r++)"id"!==(t=f[r]).name&&(i[i.length]={name:t.name,value:t.value},i.map[t.name]=t.value);u.attributes=i}return u.value=this.value,u.shortEnded=this.shortEnded,u},n.prototype.wrap=function(n){return this.parent.insert(n,this),n.append(this),this},n.prototype.unwrap=function(){for(var t,n=this.firstChild;n;)t=n.next,this.insert(n,this,!0),n=t;this.remove()},n.prototype.remove=function(){var n=this.parent,t=this.next,i=this.prev;return n&&(n.firstChild===this?(n.firstChild=t)&&(t.prev=null):i.next=t,n.lastChild===this?(n.lastChild=i)&&(i.next=null):t.prev=i,this.parent=this.next=this.prev=null),this},n.prototype.append=function(n){var t;return n.parent&&n.remove(),(t=this.lastChild)?((t.next=n).prev=t,this.lastChild=n):this.lastChild=this.firstChild=n,n.parent=this,n},n.prototype.insert=function(n,t,i){var r;return n.parent&&n.remove(),r=t.parent||this,i?(t===r.firstChild?r.firstChild=n:t.prev.next=n,n.prev=t.prev,(n.next=t).prev=n):(t===r.lastChild?r.lastChild=n:t.next.prev=n,n.next=t.next,(n.prev=t).next=n),n.parent=r,n},n.prototype.getAll=function(n){for(var i=[],t=this.firstChild;t;t=vv(t,this))t.name===n&&i.push(t);return i},n.prototype.empty=function(){var t,i,n;if(this.firstChild){for(t=[],n=this.firstChild;n;n=vv(n,this))t.push(n);for(i=t.length;i--;)(n=t[i]).parent=n.firstChild=n.lastChild=n.next=n.prev=null}return this.firstChild=this.lastChild=null,this},n.prototype.isEmpty=function(n,t,i){var u,f,r=this.firstChild;if(t=t||{},r)do{if(1===r.type){if(r.attributes.map["data-mce-bogus"])continue;if(n[r.name])return!1;for(u=r.attributes.length;u--;)if("name"===(f=r.attributes[u].name)||0===f.indexOf("data-mce-bookmark"))return!1}if(8===r.type||3===r.type&&!uwt.test(r.value)||3===r.type&&r.parent&&t[r.parent.name]&&uwt.test(r.value)||i&&i(r))return!1}while(r=vv(r,this));return!0},n.prototype.walk=function(n){return vv(this,null,n)},n}(),fwt=function(n,t,i,r){(n.padd_empty_with_br||t.insert)&&i[r.name]?r.empty().append(new ai("br",1)).shortEnded=!0:r.empty().append(new ai("#text",3)).value=" "},yyi=function(n){return ewt(n,"#text")&&" "===n.firstChild.value},ewt=function(n,t){return n&&n.firstChild&&n.firstChild===n.lastChild&&n.firstChild.name===t},rh=function(n,t,i,r){return r.isEmpty(t,i,function(t){return i=t,(r=n.getElementRule(i.name))&&r.paddEmpty;var i,r})},pyi=function(n,t){return n&&(t[n.name]||"br"===n.name)},wyi=function(n,t){var r=n.schema;t.remove_trailing_brs&&n.addNodeFilter("br",function(n,u,f){var c,o,e,h,s,a,v,y,p=n.length,l=i.extend({},r.getBlockElements()),w=r.getNonEmptyElements(),b=r.getNonEmptyElements();for(l.body=1,c=0;c<p;c++)if(e=(o=n[c]).parent,l[o.parent.name]&&o===e.lastChild){for(s=o.prev;s;){if("span"!==(a=s.name)||"bookmark"!==s.attr("data-mce-type")){if("br"!==a)break;if("br"===a){o=null;break}}s=s.prev}o&&(o.remove(),rh(r,w,b,e)&&(v=r.getElementRule(e.name))&&(v.removeEmpty?e.remove():v.paddEmpty&&fwt(t,f,l,e)))}else{for(h=o;e&&e.firstChild===h&&e.lastChild===h&&!l[(h=e).name];)e=e.parent;h===e&&!0!==t.padd_empty_with_br&&((y=new ai("#text",3)).value=" ",o.replace(y))}});n.addAttributeFilter("href",function(n){var r,f,u,e=n.length;if(!t.allow_unsafe_link_target)for(;e--;)"a"===(r=n[e]).name&&"_blank"===r.attr("target")&&r.attr("rel",(f=r.attr("rel"),u=f?i.trim(f):"",/\b(noopener)\b/g.test(u)?u:u.split(" ").filter(function(n){return 0<n.length}).concat(["noopener"]).sort().join(" ")))});t.allow_html_in_named_anchor||n.addAttributeFilter("id,name",function(n){for(var i,r,u,t,f=n.length;f--;)if("a"===(t=n[f]).name&&t.firstChild&&!t.attr("href"))for(u=t.parent,i=t.lastChild;r=i.prev,u.insert(i,t),i=r;);});t.fix_list_elements&&n.addNodeFilter("ul,ol",function(n){for(var t,u,r,i=n.length;i--;)("ul"===(u=(t=n[i]).parent).name||"ol"===u.name)&&(t.prev&&"li"===t.prev.name?t.prev.append(t):(r=new ai("li",1),r.attr("style","list-style-type: none"),t.wrap(r)))});t.validate&&r.getValidClasses()&&n.addAttributeFilter("class",function(n){for(var o,s,f,e,t,i,u,h=n.length,c=r.getValidClasses();h--;){for(s=(o=n[h]).attr("class").split(" "),t="",f=0;f<s.length;f++)e=s[f],u=!1,(i=c["*"])&&i[e]&&(u=!0),i=c[o.name],!u&&i&&i[e]&&(u=!0),u&&(t&&(t+=" "),t+=e);t.length||(t=null);o.attr("class",t)}})},owt=i.makeMap,swt=i.each,hwt=i.explode,byi=i.extend;var kyi=function(n,t,r){-1===i.inArray(t,r)&&(n.addAttributeFilter(r,function(n,t){for(var i=n.length;i--;)n[i].attr(t,null)}),t.push(r))},dyi=function(n,t,r){var u=eu(r.getInner?t.innerHTML:n.getOuterHTML(t));return r.selection||nl(f.fromDom(t))?u:i.trim(u)},gyi=function(n,t,i){var u=i.selection?ih.merge({forced_root_block:!1},i):i,r=n.parse(t,u);return rwt.trimTrailingBr(r),r},npi=function(n,t,i,r,u){var o,f,s,e,h=(o=r,cs(t,i).serialize(o));return f=n,e=h,!(s=u).no_events&&f?eci(f,ih.merge(s,{content:e})).content:e};(cg||(cg={})).isBookmarkNode=wi;var lwt=cg,awt=r.isContentEditableFalse,tpi=r.isContentEditableTrue,vwt=function(n,t){var u,e,k,d,l,lt,at,g,nt,y,p,tt,it,o,h,vt,yt,r=t.dom,pt=i.each,w=t.getDoc(),b=document,wt=Math.abs,ft=Math.round,c=t.getBody(),v;d={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};v=".mce-content-body";t.contentStyles.push(v+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+v+" .mce-resizehandle:hover {background: #000}"+v+" img[data-mce-selected],"+v+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+v+" .mce-clonedresizable {position: absolute;"+(s.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+v+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var st=function(n){return n&&("IMG"===n.nodeName||t.dom.is(n,"figure.image"))},ti=function(n){var i,r,u=n.target;i=n;r=t.selection.getRng();!st(i.target)||ryt(i.clientX,i.clientY,r)||n.isDefaultPrevented()||(n.preventDefault(),t.selection.select(u))},rt=function(n){return t.dom.is(n,"figure.image")?n.querySelector("img"):n},kt=function(n){var i=t.settings.object_resizing;return!1!==i&&!s.iOS&&("string"!=typeof i&&(i="table,img,figure.image,div"),"false"!==n.getAttribute("data-mce-resize")&&n!==t.getBody()&&iu.is(f.fromDom(n),i))},et=function(n){var i,f,s,v;i=n.screenX-lt;f=n.screenY-at;o=i*l[2]+y;h=f*l[3]+p;o=o<5?5:o;h=h<5?5:h;(st(u)&&!1!==t.settings.resize_img_proportional?!a.modifierPressed(n):a.modifierPressed(n)||st(u)&&l[2]*l[3]!=0)&&(wt(i)>wt(f)?(h=ft(o*tt),o=ft(h/tt)):(o=ft(h/tt),h=ft(o*tt)));r.setStyles(rt(e),{width:o,height:h});s=0<(s=l.startPos.x+i)?s:0;v=0<(v=l.startPos.y+f)?v:0;r.setStyles(k,{left:s,top:v,display:"block"});k.innerHTML=o+" &times; "+h;l[2]<0&&e.clientWidth<=o&&r.setStyle(e,"left",g+(y-o));l[3]<0&&e.clientHeight<=h&&r.setStyle(e,"top",nt+(p-h));(i=c.scrollWidth-vt)+(f=c.scrollHeight-yt)!=0&&r.setStyles(k,{left:s-i,top:v-f});it||(hci(t,u,y,p),it=!0)},ot=function(){it=!1;var n=function(n,i){i&&(u.style[n]||!t.schema.isValid(u.nodeName.toLowerCase(),n)?r.setStyle(rt(u),n,i):r.setAttrib(rt(u),n,i))};n("width",o);n("height",h);r.unbind(w,"mousemove",et);r.unbind(w,"mouseup",ot);b!==w&&(r.unbind(b,"mousemove",et),r.unbind(b,"mouseup",ot));r.remove(e);r.remove(k);ht(u);cci(t,u,o,h);r.setAttrib(u,"style",r.getAttrib(u,"style"));t.nodeChanged()},ht=function(n){var f,a,v,it,i;ut();ct();f=r.getPos(n,c);g=f.x;nt=f.y;i=n.getBoundingClientRect();a=i.width||i.right-i.left;v=i.height||i.bottom-i.top;u!==n&&(u=n,o=h=0);it=t.fire("ObjectSelected",{target:n});kt(n)&&!it.isDefaultPrevented()?pt(d,function(n,t){var i;(i=r.get("mceResizeHandle"+t))&&r.remove(i);i=r.add(c,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"});11===s.ie&&(i.contentEditable=!1);r.bind(i,"mousedown",function(t){var i;t.stopImmediatePropagation();t.preventDefault();lt=(i=t).screenX;at=i.screenY;y=rt(u).clientWidth;p=rt(u).clientHeight;tt=p/y;(l=n).startPos={x:a*n[0]+g,y:v*n[1]+nt};vt=c.scrollWidth;yt=c.scrollHeight;e=u.cloneNode(!0);r.addClass(e,"mce-clonedresizable");r.setAttrib(e,"data-mce-bogus","all");e.contentEditable=!1;e.unSelectabe=!0;r.setStyles(e,{left:g,top:nt,margin:0});e.removeAttribute("data-mce-selected");c.appendChild(e);r.bind(w,"mousemove",et);r.bind(w,"mouseup",ot);b!==w&&(r.bind(b,"mousemove",et),r.bind(b,"mouseup",ot));k=r.add(c,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},y+" &times; "+p)});n.elm=i;r.setStyles(i,{left:a*n[0]+g-i.offsetWidth/2,top:v*n[1]+nt-i.offsetHeight/2})}):ut();u.setAttribute("data-mce-selected","1")},ut=function(){var t,n;for(t in ct(),u&&u.removeAttribute("data-mce-selected"),d)(n=r.get("mceResizeHandle"+t))&&(r.unbind(n),r.remove(n))},dt=function(i){var u,f=function(n,t){if(n)do if(n===t)return!0;while(n=n.parentNode)};it||t.removed||(pt(r.select("img[data-mce-selected],hr[data-mce-selected]"),function(n){n.removeAttribute("data-mce-selected")}),u="mousedown"===i.type?i.target:n.getNode(),f(u=r.$(u).closest("table,img,figure.image,hr")[0],c)&&(ni(),f(n.getStart(!0),u)&&f(n.getEnd(!0),u))?ht(u):ut())},gt=function(n){return awt(function(n,t){for(;t&&t!==n;){if(tpi(t)||awt(t))return t;t=t.parentNode}return null}(t.getBody(),n))},ct=function(){var t,n;for(t in d)n=d[t],n.elm&&(r.unbind(n.elm),delete n.elm)},ni=function(){try{t.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(n){}};return t.on("init",function(){ni();s.ie&&11<=s.ie&&(t.on("mousedown click",function(n){var i=n.target,r=i.nodeName;it||!/^(TABLE|IMG|HR)$/.test(r)||gt(i)||(2!==n.button&&t.selection.select(i,"TABLE"===r),"mousedown"===n.type&&t.nodeChanged())}),t.dom.bind(c,"mscontrolselect",function(n){var i=function(n){bt.setEditorTimeout(t,function(){t.selection.select(n)})};if(gt(n.target))return n.preventDefault(),void i(n.target);/^(TABLE|IMG|HR)$/.test(n.target.nodeName)&&(n.preventDefault(),"IMG"===n.target.tagName&&i(n.target))}));var n=bt.throttle(function(n){t.composing||dt(n)});t.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",n);t.on("keyup compositionend",function(t){u&&"TABLE"===u.nodeName&&n(t)});t.on("hide blur",ut);t.on("contextmenu",ti)}),t.on("remove",ct),{isResizable:kt,showResizeRect:ht,hideResizeRect:ut,updateResizeRect:dt,destroy:function(){u=e=null}}},ipi=function(n){return r.isContentEditableTrue(n)||r.isContentEditableFalse(n)},lg=function(n,t,u){var f,s,e,h,c,o=u;if(o.caretPositionFromPoint)(s=o.caretPositionFromPoint(n,t))&&((f=u.createRange()).setStart(s.offsetNode,s.offset),f.collapse(!0));else if(u.caretRangeFromPoint)f=u.caretRangeFromPoint(n,t);else if(o.body.createTextRange){f=o.body.createTextRange();try{f.moveToPoint(n,t);f.collapse(!0)}catch(l){f=function(n,t,r){var f,u,e;if(f=r.elementFromPoint(n,t),u=r.body.createTextRange(),f&&"HTML"!==f.tagName||(f=r.body),u.moveToElementText(f),0<(e=(e=i.toArray(u.getClientRects())).sort(function(n,i){return(n=Math.abs(Math.max(n.top-t,n.bottom-t)))-(i=Math.abs(Math.max(i.top-t,i.bottom-t)))})).length){t=(e[0].bottom+e[0].top)/2;try{return u.moveToPoint(n,t),u.collapse(!0),u}catch(o){}}return null}(n,t,u)}return e=f,h=u.body,c=e&&e.parentElement?e.parentElement():null,r.isContentEditableFalse(function(n,t,i){for(;n&&n!==t;){if(i(n))return n;n=n.parentNode}return null}(c,h,ipi))?null:e}return f},ag=function(n,t){return u.map(t,function(t){var i=n.fire("GetSelectionRange",{range:t});return i.range!==t?i.range:t})},ywt=function(n,t){return f.fromDom(n.dom().cloneNode(t))},rpi=function(n){return ywt(n,!0)},uh=function(n){return ywt(n,!1)},pwt=rpi,vg=function(n,t){var i=(t||document).createDocumentFragment();return u.each(n,function(n){i.appendChild(n.dom())}),f.fromDom(i)},yg=nr.immutable("element","width","rows"),wwt=nr.immutable("element","cells"),upi=nr.immutable("x","y"),bwt=function(n,t){var i=parseInt(dt.get(n,t),10);return isNaN(i)?1:i},kwt=function(n){return u.foldl(n,function(n,t){return t.cells().length>n?t.cells().length:n},0)},dwt=function(t,i){for(var e,u,f=t.rows(),r=0;r<f.length;r++)for(e=f[r].cells(),u=0;u<e.length;u++)if(w.eq(e[u],i))return n.some(upi(u,r));return n.none()},gwt=function(n,t,i,r,u){for(var e,h,o=[],s=n.rows(),f=i;f<=u;f++)e=s[f].cells(),h=t<r?e.slice(t,r+1):e.slice(r,t+1),o.push(wwt(s[f].element(),h));return o},fpi=function(n){var t=yg(uh(n),0,[]);return u.each(hr(n,"tr"),function(n,i){u.each(hr(n,"td,th"),function(r,u){!function(n,t,i,r,u){for(var e,s=bwt(u,"rowspan"),h=bwt(u,"colspan"),o=n.rows(),f=i;f<i+s;f++)for(o[f]||(o[f]=wwt(pwt(r),[])),e=t;e<t+h;e++)o[f].cells()[e]=f===i&&e===t?u:uh(u)}(t,function(n,t,i){for(;f=t,r=i,u=void 0,((u=n.rows())[r]?u[r].cells():[])[f];)t++;var f,r,u;return t}(t,u,i),i,n,r)})}),yg(t.element(),kwt(t.rows()),t.rows())},epi=function(n){return o=r=n,e=u.map(o.rows(),function(n){var i=u.map(n.cells(),function(n){var t=pwt(n);return dt.remove(t,"colspan"),dt.remove(t,"rowspan"),t}),t=uh(n.element());return bb(t,i),t}),t=uh(r.element()),i=f.fromTag("tbody"),bb(i,e),ut.append(t,i),t;var r,e,t,i,o},opi=function(n,t,i){return dwt(n,t).bind(function(t){return dwt(n,i).map(function(i){return r=n,e=i,o=(c=t).x(),u=c.y(),s=e.x(),f=e.y(),h=u<f?gwt(r,o,u,s,f):gwt(r,o,f,s,u),yg(r.element(),kwt(h),h);var r,c,e,o,u,s,f,h})})},spi=function(n,i){return u.find(n,function(n){return"li"===nt.name(n)&&dli(n,i)}).fold(t.constant([]),function(){return(t=n,u.find(t,function(n){return"ul"===nt.name(n)||"ol"===nt.name(n)})).map(function(n){return[f.fromTag("li"),f.fromTag(nt.name(n))]}).getOr([]);var t})},hpi=function(n,i){var r,e=f.fromDom(i.commonAncestorContainer),o=as(e,n),h=u.filter(o,function(n){return kut(n)||sti(n)}),s=spi(o,i),c=h.concat(s.length?s:dc(r=e)?y.parent(r).filter(nft).fold(t.constant([]),function(n){return[r,n]}):nft(r)?[r]:[]);return u.map(c,uh)},nbt=function(){return vg([])},cpi=function(n,t){return e=f.fromDom(t.cloneContents()),i=hpi(n,t),r=u.foldl(i,function(n,t){return ut.append(t,n),t},e),0<i.length?vg([r]):r;var e,i,r},lpi=function(n,i){return(r=n,u=i[0],nk(u,"table",t.curry(w.eq,r))).bind(function(n){var t=i[0],r=i[i.length-1],u=fpi(n);return opi(u,t,r).map(function(n){return vg([epi(n)])})}).getOrThunk(nbt);var r,u},api=function(n,t){var r,i,u=asi(t,n);return 0<u.length?lpi(n,u):(r=n,0<(i=t).length&&i[0].collapsed?nbt():cpi(r,i[0]))},vpi=function(n,t){var o,i=n.selection.getRng(),r=n.dom.create("body"),u=n.selection.getSel(),s=ag(n,ult(u)),e;return((t=t||{}).get=!0,t.format=t.format||"html",t.selection=!0,(t=n.fire("BeforeGetContent",t)).isDefaultPrevented())?(n.fire("GetContent",t),t.content):"text"===t.format?n.selection.isCollapsed()?"":eu(i.text||(u.toString?u.toString():"")):(i.cloneContents?(o=t.contextual?api(f.fromDom(n.getBody()),s).dom():i.cloneContents())&&r.appendChild(o):i.item!==undefined||i.htmlText!==undefined?(r.innerHTML="<br>"+(i.item?i.item(0).outerHTML:i.htmlText),r.removeChild(r.firstChild)):r.innerHTML=i.toString(),t.getInner=!0,e=n.selection.serializer.serialize(r,t),"tree"===t.format?e:(t.content=n.selection.isCollapsed()?"":e,n.fire("GetContent",t),t.content))},ypi=function(n,t,i){var f,e,o,r=n.selection.getRng(),u=n.getDoc();if((i=i||{format:"html"}).set=!0,i.selection=!0,i.content=t,i.no_events||!(i=n.fire("BeforeSetContent",i)).isDefaultPrevented()){if(t=i.content,r.insertNode){t+='<span id="__caret">_<\/span>';r.startContainer===u&&r.endContainer===u?u.body.innerHTML=t:(r.deleteContents(),0===u.body.childNodes.length?u.body.innerHTML=t:r.createContextualFragment?r.insertNode(r.createContextualFragment(t)):(e=u.createDocumentFragment(),o=u.createElement("div"),e.appendChild(o),o.outerHTML=t,r.insertNode(e)));f=n.dom.get("__caret");(r=u.createRange()).setStartBefore(f);r.setEndBefore(f);n.selection.setRng(r);n.dom.remove("__caret");try{n.selection.setRng(r)}catch(s){}}else r.item&&(u.execCommand("Delete",!1,null),r=n.getRng()),/^\s+/.test(t)?(r.pasteHTML('<span id="__mce_tmp">_<\/span>'+t),n.dom.remove("__mce_tmp")):r.pasteHTML(t);i.no_events||n.fire("SetContent",i)}else n.fire("SetContent",i)},tbt=function(t,i,r,u,e){var o=r?i.startContainer:i.endContainer,s=r?i.startOffset:i.endOffset;return n.from(o).map(f.fromDom).map(function(n){return u&&i.collapsed?n:y.child(n,e(n,s)).getOr(n)}).bind(function(t){return nt.isElement(t)?n.some(t):y.parent(t)}).map(function(n){return n.dom()}).getOr(t)},ibt=function(n,t,i){return tbt(n,t,!0,i,function(n,t){return Math.min(y.childNodesCount(n),t)})},rbt=function(n,t,i){return tbt(n,t,!1,i,function(n,t){return 0<t?t-1:t})},ubt=function(n,t){for(var i=n;n&&r.isText(n)&&0===n.length;)n=t?n.nextSibling:n.previousSibling;return n||i},fh=i.each,fbt=function(n){return!!n.select},ebt=function(n){return!(!n||!n.ownerDocument)&&w.contains(f.fromDom(n.ownerDocument),f.fromDom(n))},obt=function(t,i,r,u){var y,p,h,c,l,w=function(n,t){return ypi(u,n,t)},b=function(n){var t=f();t.collapse(!!n);o(t)},a=function(){return i.getSelection?i.getSelection():i.document.selection},f=function(){var f,n,e,r,s=function(n,t,i){try{return t.compareBoundaryPoints(n,i)}catch(r){return-1}},o;if(!i||null==(r=i.document))return null;if(u.bookmark!==undefined&&!1===ks(u)&&(o=fat(u),o.isSome()))return o.map(function(n){return ag(u,[n])[0]}).getOr(r.createRange());try{(f=a())&&(n=0<f.rangeCount?f.getRangeAt(0):f.createRange?f.createRange():r.createRange())}catch(l){}return(n=ag(u,[n])[0])||(n=r.createRange?r.createRange():r.body.createTextRange()),n.setStart&&9===n.startContainer.nodeType&&n.collapsed&&(e=t.getRoot(),n.setStart(e,0),n.setEnd(e,0)),h&&c&&(0===s(n.START_TO_START,n,h)&&0===s(n.END_TO_END,n,h)?n=c:c=h=null),n},o=function(n,t){var i,r,f,e;if((f=n)&&(fbt(f)||ebt(f.startContainer)&&ebt(f.endContainer)))if(e=fbt(n)?n:null,e){c=null;try{e.select()}catch(o){}}else{if(i=a(),n=u.fire("SetSelectionRange",{range:n,forward:t}).range,i){c=n;try{i.removeAllRanges();i.addRange(n)}catch(o){}!1===t&&i.extend&&(i.collapse(n.endContainer,n.endOffset),i.extend(n.startContainer,n.startOffset));h=0<i.rangeCount?i.getRangeAt(0):null}n.collapsed||n.startContainer!==n.endContainer||!i.setBaseAndExtent||s.ie||n.endOffset-n.startOffset<2&&n.startContainer.hasChildNodes()&&(r=n.startContainer.childNodes[n.startOffset])&&"IMG"===r.tagName&&(i.setBaseAndExtent(n.startContainer,n.startOffset,n.endContainer,n.endOffset),i.anchorNode===n.startContainer&&i.focusNode===n.endContainer||i.setBaseAndExtent(r,0,r,1));u.fire("AfterSetSelectionRange",{range:n,forward:t})}},k=function(){var i,r,n=a();return!(n&&n.anchorNode&&n.focusNode)||((i=t.createRng()).setStart(n.anchorNode,n.anchorOffset),i.collapse(!0),(r=t.createRng()).setStart(n.focusNode,n.focusOffset),r.collapse(!0),i.compareBoundaryPoints(i.START_TO_START,r)<=0)},v={bookmarkManager:null,controlSelection:null,dom:t,win:i,serializer:r,editor:u,collapse:b,setCursorLocation:function(n,i){var r=t.createRng();n?(r.setStart(n,i),r.setEnd(n,i),o(r),b(!1)):(ud(t,r,u.getBody(),!0),o(r))},getContent:function(n){return vpi(u,n)},setContent:w,getBookmark:function(n,t){return y.getBookmark(n,t)},moveToBookmark:function(n){return y.moveToBookmark(n)},select:function(i,r){var u,f,e;return(u=t,f=i,e=r,n.from(f).map(function(n){var i=u.nodeIndex(n),t=u.createRng();return t.setStart(n.parentNode,i),t.setEnd(n.parentNode,i+1),e&&(ud(u,t,n,!0),ud(u,t,n,!1)),t})).each(o),i},isCollapsed:function(){var n=f(),t=a();return!(!n||n.item)&&(n.compareEndPoints?0===n.compareEndPoints("StartToEnd",n):!t||n.collapsed)},isForward:k,setNode:function(n){return w(t.getOuterHTML(n)),n},getNode:function(){return s=u.getBody(),(t=f())?(n=t.startContainer,i=t.endContainer,e=t.startOffset,o=t.endOffset,r=t.commonAncestorContainer,!t.collapsed&&(n===i&&o-e<2&&n.hasChildNodes()&&(r=n.childNodes[e]),3===n.nodeType&&3===i.nodeType&&(n=n.length===e?ubt(n.nextSibling,!0):n.parentNode,i=0===o?ubt(i.previousSibling,!1):i.parentNode,n&&n===i))?n:r&&3===r.nodeType?r.parentNode:r):s;var s,t,r,n,i,e,o},getSel:a,setRng:o,getRng:f,getStart:function(n){return ibt(u.getBody(),f(),n)},getEnd:function(n){return rbt(u.getBody(),f(),n)},getSelectedBlocks:function(n,i){return function(n,t,i,r){var f,u,e=[],o;if(u=n.getRoot(),i=n.getParent(i||ibt(u,t,!1),n.isBlock),r=n.getParent(r||rbt(u,t,!1),n.isBlock),i&&i!==u&&e.push(i),i&&r&&i!==r)for(o=new et(f=i,u);(f=o.next())&&f!==r;)n.isBlock(f)&&e.push(f);return r&&i!==r&&r!==u&&e.push(r),e}(t,f(),n,i)},normalize:function(){var n=f(),r=a(),i;return!hsi(r)&&fd(u)?(i=ba(t,n),i.each(function(n){o(n,k())}),i.getOr(n)):n},selectorChanged:function(n,i){var r;return l||(l={},r={},u.on("NodeChange",function(n){var u=n.element,i=t.getParents(u,null,t.getRoot()),f={};fh(l,function(n,u){fh(i,function(e){if(t.is(e,u))return r[u]||(fh(n,function(n){n(!0,{node:e,selector:u,parents:i})}),r[u]=n),f[u]=n,!1})});fh(r,function(n,t){f[t]||(delete r[t],fh(n,function(n){n(!1,{node:u,selector:t,parents:i})}))})})),l[n]||(l[n]=[]),l[n].push(i),v},getScrollContainer:function(){for(var i,n=t.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){i=n;break}n=n.parentNode}return i},scrollIntoView:function(n,t){return ari(u,n,t)},placeCaretAt:function(n,t){return o(lg(n,t,u.getDoc()))},getBoundingClientRect:function(){var n=f();return n.collapsed?e.fromRangeStart(n).getClientRects()[0]:n.getBoundingClientRect()},destroy:function(){i=h=c=null;p.destroy()}};return y=lwt(v),p=vwt(v,u),v.bookmarkManager=y,v.controlSelection=p,v},sbt=r.isContentEditableFalse,hbt=ww,cbt=dl,lbt=kl,yv=function(n,t){for(;t=n(t);)if(t.isVisible())return t;return t},ppi=function(n,t,i,u){var o,f,s,h,l,a,e=n===fi.Forwards,c=e?lbt:cbt;return!u.collapsed&&(o=hbt(u),sbt(o))?hu(n,t,o,n===fi.Backwards,!0):(h=se(u.startContainer),c(f=yot(n,t.getBody(),u))?rb(t,f.getNode(!e)):(f=i(f))?c(f)?hu(n,t,f.getNode(!e),e,!0):c(s=i(f))&&(!(a=au(l=f,s))&&r.isBr(l.getNode())||a)?hu(n,t,s.getNode(!e),e,!0):h?al(t,f.toRange(),!0):null:h?u:null)},wpi=function(n,t,i,r){var u,a,v,f,c,o,y,p,s,l;return(s=hbt(r),u=yot(n,t.getBody(),r),a=i(t.getBody(),nyt(1),u),v=h.filter(a,od(1)),c=h.last(u.getClientRects()),(lbt(u)||vui(u))&&(s=u.getNode()),(cbt(u)||yui(u))&&(s=u.getNode(!0)),!c)?null:(o=c.left,(f=uv(v,o))&&sbt(f.node))?(y=Math.abs(o-f.left),p=Math.abs(o-f.right),hu(n,t,f.node,y<p,!0)):s&&((l=function(n,t,i,r){var s,c,l,u,f,a,v=ir(t),o=[],y=0,p=function(n){return h.last(n.getClientRects())};1===n?(s=v.next,c=ae,l=le,u=e.after(r)):(s=v.prev,c=le,l=ae,u=e.before(r));a=p(u);do if(u.isVisible()&&!l(f=p(u),a)){if(0<o.length&&c(f,h.last(o))&&y++,(f=ce(f)).position=u,f.line=y,i(f))return o;o.push(f)}while(u=s(u));return o}(n,t.getBody(),nyt(1),s),f=uv(h.filter(l,od(1)),o))||(f=h.last(h.filter(l,od(0)))))?al(t,f.position.toRange(),!0):void 0},abt=function(n,t,i){var u,r,o,f,h=ir(n.getBody()),c=ot.curry(yv,h.next),l=ot.curry(yv,h.prev);if(i.collapsed&&n.settings.forced_root_block){if(!(u=n.dom.getParent(i.startContainer,"PRE")))return;(1===t?c(e.fromRangeStart(i)):l(e.fromRangeStart(i)))||(f=(o=n).dom.create(o.settings.forced_root_block),(!s.ie||11<=s.ie)&&(f.innerHTML='<br data-mce-bogus="1">'),r=f,1===t?n.$(u).after(r):n.$(u).before(r),n.selection.select(r,!0),n.selection.collapse())}},vbt=function(n,t){return function(){var i,r,u,f,s,h,e,c,o,l=(r=t,f=ir((i=n).getBody()),s=ot.curry(yv,f.next),h=ot.curry(yv,f.prev),e=r?fi.Forwards:fi.Backwards,c=r?s:h,o=i.selection.getRng(),(u=ppi(e,i,c,o))?u:(u=abt(i,e,o))||null);return!!l&&(n.selection.setRng(l),!0)}},ybt=function(n,t){return function(){var i,e,r,u,o,f,s=(u=(e=t)?1:-1,o=e?oai:eai,f=(i=n).selection.getRng(),(r=wpi(u,i,o,f))?r:(r=abt(i,u,f))||null);return!!s&&(n.selection.setRng(s),!0)}},bpi=function(n,i){return u.bind((r=n,u.map(r,function(n){return ih.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t.noop},n)})),function(n){return t=n,(r=i).keyCode===t.keyCode&&r.shiftKey===t.shiftKey&&r.altKey===t.altKey&&r.ctrlKey===t.ctrlKey&&r.metaKey===t.metaKey?[n]:[];var t,r});var r},wt=function(n){for(var r,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return r=Array.prototype.slice.call(arguments,1),function(){return n.apply(null,r)}},pv=function(n,t){return u.find(bpi(n,t),function(n){return n.action()})},kpi=function(n,t){n.on("keydown",function(i){var r,u,e,f;!1===i.isDefaultPrevented()&&(r=n,u=t,e=i,f=tu.detect().os,pv([{keyCode:a.RIGHT,action:vbt(r,!0)},{keyCode:a.LEFT,action:vbt(r,!1)},{keyCode:a.UP,action:ybt(r,!1)},{keyCode:a.DOWN,action:ybt(r,!0)},{keyCode:a.RIGHT,action:rot(r,!0)},{keyCode:a.LEFT,action:rot(r,!1)},{keyCode:a.UP,action:uot(r,!1)},{keyCode:a.DOWN,action:uot(r,!0)},{keyCode:a.RIGHT,action:no.move(r,u,!0)},{keyCode:a.LEFT,action:no.move(r,u,!1)},{keyCode:a.RIGHT,ctrlKey:!f.isOSX(),altKey:f.isOSX(),action:no.moveNextWord(r,u)},{keyCode:a.LEFT,ctrlKey:!f.isOSX(),altKey:f.isOSX(),action:no.movePrevWord(r,u)}],e).each(function(){e.preventDefault()}))})},dpi=function(n){return 1===y.children(n).length},gpi=function(n,i,r,o){var s,c,h,l,y=t.curry(lvi,i),a=u.map(u.filter(o,y),function(n){return n.dom()}),v;0===a.length?vs(i,n,r):(v=(s=r.dom(),c=a,h=tg(!1),l=spt(c,h.dom()),ut.before(f.fromDom(s),h),ht.remove(f.fromDom(s)),e(l,0)),i.selection.setRng(v.toRange()))},nwi=function(n,i){var r,s=f.fromDom(n.getBody()),h=f.fromDom(n.selection.getStart()),o=u.filter((r=as(h,s),u.findIndex(r,ko).fold(t.constant(r),function(n){return r.slice(0,n)})),dpi);return u.last(o).map(function(t){var r=e.fromRangeStart(n.selection.getRng());return!!uei(i,r,t.dom())&&(gpi(i,n,t,o),!0)}).getOr(!1)},pbt=function(n,t){return!!n.selection.isCollapsed()&&nwi(n,t)},twi=function(n,t){n.on("keydown",function(i){var r,u,f;!1===i.isDefaultPrevented()&&(r=n,u=t,f=i,pv([{keyCode:a.BACKSPACE,action:wt(sa,r,!1)},{keyCode:a.DELETE,action:wt(sa,r,!0)},{keyCode:a.BACKSPACE,action:wt(la,r,u,!1)},{keyCode:a.DELETE,action:wt(la,r,u,!0)},{keyCode:a.BACKSPACE,action:wt(oa,r,!1)},{keyCode:a.DELETE,action:wt(oa,r,!0)},{keyCode:a.BACKSPACE,action:wt(ea,r,!1)},{keyCode:a.DELETE,action:wt(ea,r,!0)},{keyCode:a.BACKSPACE,action:wt(pa,r,!1)},{keyCode:a.DELETE,action:wt(pa,r,!0)},{keyCode:a.BACKSPACE,action:wt(pbt,r,!1)},{keyCode:a.DELETE,action:wt(pbt,r,!0)}],f).each(function(){f.preventDefault()}))});n.on("keyup",function(t){var i,r;!1===t.isDefaultPrevented()&&(i=n,r=t,pv([{keyCode:a.BACKSPACE,action:wt(nct,i)},{keyCode:a.DELETE,action:wt(nct,i)}],r))})},pg=function(t){return n.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock))},eh=function(n,t){var e,u,i,o=t,f=n.dom,h=n.schema.getMoveCaretBeforeOnEnterElements(),s;if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)&&(s=function(n){for(;n;){if(1===n.nodeType||3===n.nodeType&&n.data&&/[\r\n\s]/.test(n.data))return n;n=n.nextSibling}}(t.firstChild),s&&/^(UL|OL|DL)$/.test(s.nodeName)&&t.insertBefore(f.doc.createTextNode(" "),t.firstChild)),i=f.createRng(),t.normalize(),t.hasChildNodes()){for(e=new et(t,t);u=e.current();){if(r.isText(u)){i.setStart(u,0);i.setEnd(u,0);break}if(h[u.nodeName.toLowerCase()]){i.setStartBefore(u);i.setEndBefore(u);break}o=u;u=e.next()}u||(i.setStart(o,0),i.setEnd(o,0))}else r.isBr(t)?t.nextSibling&&f.isBlock(t.nextSibling)?(i.setStartBefore(t),i.setEndBefore(t)):(i.setStartAfter(t),i.setEndAfter(t)):(i.setStart(t,0),i.setEnd(t,0));n.selection.setRng(i);f.remove(void 0);n.selection.scrollIntoView(t)}},iwi=function(n,t){for(var u,r=n.getRoot(),i=t;i!==r&&"false"!==n.getContentEditable(i);)"true"===n.getContentEditable(i)&&(u=i),i=i.parentNode;return i!==r?u:r},rwi=pg,uwi=function(n){return pg(n).fold(t.constant(""),function(n){return n.nodeName.toUpperCase()})},fwi=function(n){return pg(n).filter(function(n){return dc(f.fromDom(n))}).isSome()},wbt=function(n,t){return n&&n.parentNode&&n.parentNode.nodeName===t},bbt=function(n){return n&&/^(OL|UL|LI)$/.test(n.nodeName)},wv=function(n){var t=n.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:n},bv=function(n,t,i){for(var u=n[i?"firstChild":"lastChild"];u&&!r.isElement(u);)u=u[i?"nextSibling":"previousSibling"];return u===t},ewi=function(n,t,i,r,u){var e=n.dom,a=n.selection.getRng(),h,c,l,f,s,o;i!==n.getBody()&&(bbt(h=i)&&bbt(h.parentNode)&&(u="LI"),f=u?t(u):e.create("BR"),bv(i,r,!0)&&bv(i,r,!1)?wbt(i,"LI")?e.insertAfter(f,wv(i)):e.replace(f,i):bv(i,r,!0)?wbt(i,"LI")?(e.insertAfter(f,wv(i)),f.appendChild(e.doc.createTextNode(" ")),f.appendChild(i)):i.parentNode.insertBefore(f,i):bv(i,r,!1)?e.insertAfter(f,wv(i)):(i=wv(i),s=a.cloneRange(),s.setStartAfter(r),s.setEndAfter(i),o=s.extractContents(),"LI"===u&&(l="LI",(c=o).firstChild&&c.firstChild.nodeName===l)?(f=o.firstChild,e.insertAfter(o,i)):(e.insertAfter(o,i),e.insertAfter(f,i))),e.remove(r),eh(n,f))},wg=function(n){n.innerHTML='<br data-mce-bogus="1">'},bg=function(n,t){return n.nodeName===t||n.previousSibling&&n.previousSibling.nodeName===t},kbt=function(n,t){return t&&n.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==n.getContentEditable(t)},kg=function(n,t,i){return!1===r.isText(t)?i:n?1===i&&t.data.charAt(i-1)===at?0:i:i===t.data.length-1&&t.data.charAt(i)===at?t.data.length:i},dbt=function(n,t){for(var u,r=n.getRoot(),i=t;i!==r&&"false"!==n.getContentEditable(i);)"true"===n.getContentEditable(i)&&(u=i),i=i.parentNode;return i!==r?u:r},dg=function(n,t){var i=ef(n);i&&i.toLowerCase()===t.tagName.toLowerCase()&&n.dom.setAttribs(t,get(n))},owi=function(n,t){var tt,it,f,a,u,b,o,k,h,v,d,s,y,g,nt,rt,c,p,e=n.dom,ut=n.schema,ft=ut.getNonEmptyElements(),l=n.selection.getRng(),w=function(t){var i,o,h,r=f,c=ut.getTextInlineElements();if(t||"TABLE"===v||"HR"===v?(i=e.create(t||s),dg(n,i)):i=u.cloneNode(!1),h=i,!1===tui(n))e.setAttrib(i,"style",null),e.setAttrib(i,"class",null);else do if(c[r.nodeName]){if(sf(r))continue;o=r.cloneNode(!1);e.setAttrib(o,"id","");i.hasChildNodes()?o.appendChild(i.firstChild):h=o;i.appendChild(o)}while((r=r.parentNode)&&r!==it);return wg(h),i},ot=function(n){var t,i,o,e;if(e=kg(n,f,a),r.isText(f)&&(n?0<e:e<f.nodeValue.length))return!1;if(f.parentNode===u&&y&&!n||n&&r.isElement(f)&&f===u.firstChild)return!0;if(bg(f,"TABLE")||bg(f,"HR"))return y&&!n||!y&&n;for(t=new et(f,u),r.isText(f)&&(n&&0===e?t.prev():n||e!==f.nodeValue.length||t.next());i=t.current();){if(r.isElement(i)){if(!i.getAttribute("data-mce-bogus")&&(o=i.nodeName.toLowerCase(),ft[o]&&"br"!==o))return!1}else if(r.isText(i)&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;n?t.prev():t.next()}return!0},st=function(){o=/^(H[1-6]|PRE|FIGURE)$/.test(v)&&"HGROUP"!==d?w(s):w();iui(n)&&kbt(e,h)&&e.isEmpty(u)?o=e.split(h,u):e.insertAfter(o,u);eh(n,o)};ba(e,l).each(function(n){l.setStart(n.startContainer,n.startOffset);l.setEnd(n.endContainer,n.endOffset)});f=l.startContainer;a=l.startOffset;s=ef(n);b=t.shiftKey;r.isElement(f)&&f.hasChildNodes()&&(y=a>f.childNodes.length-1,f=f.childNodes[Math.min(a,f.childNodes.length-1)]||f,a=y&&r.isText(f)?f.nodeValue.length:0);(it=dbt(e,f))&&((s&&!b||!s&&b)&&(f=function(n,t,i,r,u){var e,o,h,f,l,a,v,c=t||"P",s=n.dom,y=dbt(s,r);if(!(o=s.getParent(r,s.isBlock))||!kbt(s,o)){if(a=(o=o||y)===n.getBody()||(v=o)&&/^(TD|TH|CAPTION)$/.test(v.nodeName)?o.nodeName.toLowerCase():o.parentNode.nodeName.toLowerCase(),!o.hasChildNodes())return e=s.create(c),dg(n,e),o.appendChild(e),i.setStart(e,0),i.setEnd(e,0),e;for(f=r;f.parentNode!==o;)f=f.parentNode;for(;f&&!s.isBlock(f);)f=(h=f).previousSibling;if(h&&n.schema.isValidChild(a,c.toLowerCase())){for(e=s.create(c),dg(n,e),h.parentNode.insertBefore(e,h),f=h;f&&!s.isBlock(f);)l=f.nextSibling,e.appendChild(f),f=l;i.setStart(r,u);i.setEnd(r,u)}}return r}(n,s,l,f,a)),u=e.getParent(f,e.isBlock),h=u?e.getParent(u.parentNode,e.isBlock):null,v=u?u.nodeName.toUpperCase():"","LI"!==(d=h?h.nodeName.toUpperCase():"")||t.ctrlKey||(h=(u=h).parentNode,v=d),/^(LI|DT|DD)$/.test(v)&&e.isEmpty(u)?ewi(n,w,h,u,s):s&&u===n.getBody()||(s=s||"P",se(u)?(o=vw(u),e.isEmpty(u)&&wg(u),eh(n,o)):ot()?st():ot(!0)?(o=u.parentNode.insertBefore(w(),u),eh(n,bg(u,"HR")?o:u)):((tt=(c=l,p=c.cloneRange(),p.setStart(c.startContainer,kg(!0,c.startContainer,c.startOffset)),p.setEnd(c.endContainer,kg(!1,c.endContainer,c.endOffset)),p).cloneRange()).setEndAfter(u),function(n){for(;r.isText(n)&&(n.nodeValue=n.nodeValue.replace(/^[\r\n]+/,"")),n=n.firstChild;);}(k=tt.extractContents()),o=k.firstChild,e.insertAfter(k,u),function(n,t,u){var o,f=u,s=[],e;if(f){for(;f=f.firstChild;){if(n.isBlock(f))return;r.isElement(f)&&!t[f.nodeName.toLowerCase()]&&s.push(f)}for(o=s.length;o--;)!(f=s[o]).hasChildNodes()||f.firstChild===f.lastChild&&""===f.firstChild.nodeValue?n.remove(f):(e=f)&&"A"===e.nodeName&&0===i.trim(eu(e.innerText||e.textContent)).length&&n.remove(f)}}(e,ft,o),g=e,(nt=u).normalize(),(rt=nt.lastChild)&&!/^(left|right)$/gi.test(g.getStyle(rt,"float",!0))||g.add(nt,"br"),e.isEmpty(u)&&wg(u),o.normalize(),e.isEmpty(o)?(e.remove(o),st()):eh(n,o)),e.setAttrib(o,"id",""),n.fire("NewBlock",{newBlock:o})))},gbt=function(n,t){return rwi(n).filter(function(n){return 0<t.length&&iu.is(f.fromDom(n),t)}).isSome()},swi=function(n){return gbt(n,gri(n))},hwi=function(n){return gbt(n,nui(n))},ni=ke([{br:[]},{block:[]},{none:[]}]),cwi=function(n){return hwi(n)},gg=function(n){return function(t){return""===ef(t)===n}},nkt=function(n){return function(t){return fwi(t)===n}},tkt=function(n,t){return function(i){return uwi(i)===n.toUpperCase()===t}},kv=function(n){return tkt("pre",n)},dv=function(n){return function(t){return dri(t)===n}},lwi=function(n){return swi(n)},oh=function(n,t){return t},ikt=function(n){var i=ef(n),t=iwi(n.dom,n.selection.getStart());return t&&n.schema.isValidChild(t.nodeName,i||"P")},oi=function(t,i){return function(r,f){return u.foldl(t,function(n,t){return n&&t(r,f)},!0)?n.some(i):n.none()}},awi=function(n,t){return oct([oi([cwi],ni.none()),oi([tkt("summary",!0)],ni.br()),oi([kv(!0),dv(!1),oh],ni.br()),oi([kv(!0),dv(!1)],ni.block()),oi([kv(!0),dv(!0),oh],ni.block()),oi([kv(!0),dv(!0)],ni.br()),oi([nkt(!0),oh],ni.br()),oi([nkt(!0)],ni.block()),oi([gg(!0),oh,ikt],ni.block()),oi([gg(!0)],ni.br()),oi([lwi],ni.br()),oi([gg(!1),oh],ni.br()),oi([ikt],ni.block())],[n,t.shiftKey]).getOr(ni.none())},vwi=function(n,i){awi(n,i).fold(function(){glt(n,i)},function(){owi(n,i)},t.noop)},ywi=function(n){n.on("keydown",function(t){var i,r,u;t.keyCode===a.ENTER&&(i=n,(r=t).isDefaultPrevented()||(r.preventDefault(),(u=i.undoManager).typing&&(u.typing=!1,u.add()),i.undoManager.transact(function(){!1===i.selection.isCollapsed()&&i.execCommand("Delete");vwi(i,r)})))})},pwi=function(n,t,i){return s=t,!(!wwi(i)||!r.isText(s.container())||(e=n,u=(o=t).container(),f=o.offset(),u.insertData(f," "),e.selection.setCursorLocation(u,f+1),0));var e,o,u,f,s},wwi=function(n){return n.fold(t.constant(!1),t.constant(!0),t.constant(!0),t.constant(!1))},bwi=function(n){return!!n.selection.isCollapsed()&&(i=n,u=t.curry(k.isInlineTarget,i),r=e.fromRangeStart(i.selection.getRng()),ge(u,i.getBody(),r).map(t.curry(pwi,i,r)).getOr(!1));var i,u,r},kwi=function(n){n.on("keydown",function(t){var r,i;!1===t.isDefaultPrevented()&&(r=n,i=t,pv([{keyCode:a.SPACEBAR,action:wt(bwi,r)}],i).each(function(){i.preventDefault()}))})},rkt=function(n,t){var i;t.hasAttribute("data-mce-caret")&&(vw(t),(i=n).selection.setRng(i.selection.getRng()),n.selection.scrollIntoView(t))},dwi=function(n,i){var u,r=(u=n,tk(f.fromDom(u.getBody()),"*[data-mce-caret]").fold(t.constant(null),function(n){return n.dom()}));if(r)return"compositionstart"===i.type?(i.preventDefault(),i.stopPropagation(),void rkt(n,r)):void(aft(r)&&(rkt(n,r),n.undoManager.add()))},gwi=function(n){n.on("keyup compositionstart",t.curry(dwi,n))},nbi=function(n){var t=no.setupSelectedState(n);gwi(n);kpi(n,t);twi(n,t);ywi(n);kwi(n)};var ukt=function(n){return r.isElement(n)&&gut(f.fromDom(n))},ibi=function(n){n.on("click",function(t){3===t.detail&&function(n){var i=n.selection.getRng(),r=rt.fromRangeStart(i),u=rt.fromRangeEnd(i),t;rt.isElementPosition(r)&&(t=r.container(),ukt(t)&&c.firstPositionIn(t).each(function(n){return i.setStart(n.container(),n.offset())}));rt.isElementPosition(u)&&(t=r.container(),ukt(t)&&c.lastPositionIn(t).each(function(n){return i.setEnd(n.container(),n.offset())}));n.selection.setRng(db(i))}(n)})},rbi=function(n){var t,i;(t=n).on("click",function(n){t.dom.getParent(n.target,"details")&&n.preventDefault()});(i=n).parser.addNodeFilter("details",function(n){u.each(n,function(n){n.attr("data-mce-open",n.attr("open"));n.attr("open","open")})});i.serializer.addNodeFilter("details",function(n){u.each(n,function(n){var t=n.attr("data-mce-open");n.attr("open",p.isString(t)?t:null);n.attr("data-mce-open",null)})})},yf=d.DOM,fkt=function(n){var t;n.bindPendingEventDelegates();n.initialized=!0;n.fire("init");n.focus(!0);n.nodeChanged({initial:!0});n.execCallback("init_instance_callback",n);(t=n).settings.auto_focus&&bt.setEditorTimeout(t,function(){var n;(n=!0===t.settings.auto_focus?t:t.editorManager.get(t.settings.auto_focus)).destroyed||n.focus()},100)},nn=function(n,t){var u,c,o,s,l,v,y,p,h,r=n.settings,a=n.getElement(),e=n.getDoc();r.inline||(n.getElement().style.visibility=n.orgVisibility);t||r.content_editable||(e.open(),e.write(n.iframeHTML),e.close());r.content_editable&&(n.on("remove",function(){var n=this.getBody();yf.removeClass(n,"mce-content-body");yf.removeClass(n,"mce-edit-focus");yf.setAttrib(n,"contentEditable",null)}),yf.addClass(a,"mce-content-body"),n.contentDocument=e=r.content_document||document,n.contentWindow=r.content_window||window,n.bodyElement=a,r.content_document=r.content_window=null,r.root_name=a.nodeName.toLowerCase());(u=n.getBody()).disabled=!0;n.readonly=r.readonly;n.readonly||(n.inline&&"static"===yf.getStyle(u,"position",!0)&&(u.style.position="relative"),u.contentEditable=n.getParam("content_editable_state",!0));u.disabled=!1;n.editorUpload=pli(n);n.schema=fu(r);n.dom=d(e,{keep_values:!0,url_converter:n.convertURL,url_converter_scope:n,hex_colors:r.force_hex_style_colors,class_filter:r.class_filter,update_styles:!0,root_element:n.inline?n.getBody():null,collect:r.content_editable,schema:n.schema,onSetAttrib:function(t){n.fire("SetAttrib",t)}});n.parser=((s=hg((o=n).settings,o.schema)).addAttributeFilter("src,href,style,tabindex",function(n,t){for(var r,i,u,f=n.length,e=o.dom;f--;)if(i=(r=n[f]).attr(t),u="data-mce-"+t,!r.attributes.map[u]){if(0===i.indexOf("data:")||0===i.indexOf("blob:"))continue;"style"===t?((i=e.serializeStyle(e.parseStyle(i),r.name)).length||(i=null),r.attr(u,i),r.attr(t,i)):"tabindex"===t?(r.attr(u,i),r.attr(t,null)):r.attr(u,o.convertURL(i,t,r.name))}}),s.addNodeFilter("script",function(n){for(var t,i,r=n.length;r--;)0!==(i=(t=n[r]).attr("type")||"no/type").indexOf("mce-")&&t.attr("type","mce-"+i)}),s.addNodeFilter("#cdata",function(n){for(var t,i=n.length;i--;)(t=n[i]).type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(n){for(var t,i=n.length,r=o.schema.getNonEmptyElements();i--;)(t=n[i]).isEmpty(r)&&0===t.getAll("br").length&&(t.append(new ai("br",1)).shortEnded=!0)}),s);n.serializer=cwt(r,n);n.selection=obt(n.dom,n.getWin(),n.serializer,n);n.formatter=nwt(n);n.undoManager=lyt(n);n._nodeChangeDispatcher=new gli(n);n._selectionOverrides=yai(n);rbi(n);ibi(n);nbi(n);kli(n);n.fire("PreInit");r.browser_spellcheck||r.gecko_spellcheck||(e.body.spellcheck=!1,yf.setAttrib(u,"spellcheck","false"));n.quirks=tbi(n);n.fire("PostRender");r.directionality&&(u.dir=r.directionality);r.nowrap&&(u.style.whiteSpace="nowrap");r.protect&&n.on("BeforeSetContent",function(n){i.each(r.protect,function(t){n.content=n.content.replace(t,function(n){return"<!--mce:protected "+escape(n)+"-->"})})});n.on("SetContent",function(){n.addVisual(n.getBody())});n.load({initial:!0,format:"html"});n.startContent=n.getContent({format:"raw"});n.on("compositionstart compositionend",function(t){n.composing="compositionstart"===t.type});0<n.contentStyles.length&&(c="",i.each(n.contentStyles,function(n){c+=n+"\r\n"}),n.dom.addStyle(c));(l=n,l.inline?yf.styleSheetLoader:l.dom.styleSheetLoader).loadAll(n.contentCSS,function(){fkt(n)},function(){fkt(n)});r.content_style&&(v=n,y=r.content_style,p=f.fromDom(v.getDoc().head),h=f.fromTag("style"),dt.set(h,"type","text/css"),ut.append(h,f.fromText(y)),ut.append(p,h))},sh=d.DOM,ubi=function(n,t){var h,c,l,a,o,v,r,b=n.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),u=(h=n.id,c=b,l=t.height,a=yri(n),r=f.fromTag("iframe"),dt.setAll(r,a),dt.setAll(r,{id:h+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),vnt(r,{width:"100%",height:(o=l,v="number"==typeof o?o+"px":o,v||""),display:"block"}),r).dom(),i,y,p,e,w;return u.onload=function(){u.onload=null;n.fire("load")},w=function(n,t){var i,r;return document.domain!==window.location.hostname&&s.ie&&s.ie<12?(i=td.uuid("mce"),n[i]=function(){nn(n)},r='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+n.id+'");document.write(ed.iframeHTML);document.close();ed.'+i+"(true);})()",sh.setAttrib(t,"src",r),!0):!1}(n,u),n.contentAreaContainer=t.iframeContainer,n.iframeElement=u,n.iframeHTML=(e=pri(i=n)+"<html><head>",wri(i)!==i.documentBaseUrl&&(e+='<base href="'+i.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',y=bri(i),p=kri(i),det(i)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+det(i)+'" />'),e+='<\/head><body id="'+y+'" class="mce-content-body '+p+'" data-id="'+i.id+'"><br><\/body><\/html>'),sh.add(t.iframeContainer,u),w},fbi=function(n,t){var i=ubi(n,t);t.editorContainer&&(sh.get(t.editorContainer).style.display=n.orgDisplay,n.hidden=sh.isHidden(t.editorContainer));n.getElement().style.display="none";sh.setAttrib(n.id,"aria-hidden","true");i||nn(n)},hh=d.DOM,ekt=function(n,t,r){var u,f,e=ar.get(r);if(u=ar.urls[r]||n.documentBaseUrl.replace(/\/$/,""),r=i.trim(r),e&&-1===i.inArray(t,r)){if(i.each(ar.dependencies(r),function(i){ekt(n,t,i)}),n.plugins[r])return;f=new e(n,u,n.$);(n.plugins[r]=f).init&&(f.init(n,u),t.push(r))}},okt=function(n){return n.replace(/^\-/,"")},skt=function(n){return{editorContainer:n,iframeContainer:n}},ebi=function(n){var i,t,r=n.getElement();return n.inline?skt(null):(i=r,t=hh.create("div"),hh.insertAfter(t,i),skt(t))},obi=function(n){var u,t,h,c,f,i,s,l,e,r,o,a=n.settings,v=n.getElement();return n.orgDisplay=v.style.display,p.isString(a.theme)?(r=(c=n).settings,o=c.getElement(),f=r.width||hh.getStyle(o,"width")||"100%",i=r.height||hh.getStyle(o,"height")||o.offsetHeight,s=r.min_height||100,(l=/^[0-9\.]+(|px)$/i).test(""+f)&&(f=Math.max(parseInt(f,10),100)),l.test(""+i)&&(i=Math.max(parseInt(i,10),s)),e=c.theme.renderUI({targetNode:o,width:f,height:i,deltaWidth:r.delta_width,deltaHeight:r.delta_height}),r.content_editable||(i=(e.iframeHeight||i)+("number"==typeof i?e.deltaHeight||0:""))<s&&(i=s),e.height=i,e):p.isFunction(a.theme)?(h=(u=n).getElement(),(t=u.settings.theme(u,h)).editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||u.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||u.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:h.offsetHeight,t):ebi(n)},hkt=function(n){var f,t,o,u,e,s,r=n.settings,h=n.getElement();return n.rtl=r.rtl_ui||n.editorManager.i18n.rtl,n.editorManager.i18n.setCode(r.language),r.aria_label=r.aria_label||hh.getAttrib(h,"aria-label",n.getLang("aria.rich_text_area")),n.fire("ScriptsLoaded"),u=(t=n).settings.theme,p.isString(u)?(t.settings.theme=okt(u),o=lf.get(u),t.theme=new o(t,lf.urls[u]),t.theme.init&&t.theme.init(t,lf.urls[u]||t.documentBaseUrl.replace(/\/$/,""),t.$)):t.theme={},e=n,s=[],i.each(e.settings.plugins.split(/[ ,]/),function(n){ekt(e,s,okt(n))}),f=obi(n),n.editorContainer=f.editorContainer?f.editorContainer:null,r.content_css&&i.each(i.explode(r.content_css),function(t){n.contentCSS.push(n.documentBaseURI.toAbsolute(t))}),r.content_editable?nn(n):fbi(n,f)},pf=d.DOM,ckt=function(n){return"-"===n.charAt(0)},sbi=function(n,t){var r=or.ScriptLoader;!function(n,t,i,r){var e=t.settings,u=e.theme,f;p.isString(u)?(ckt(u)||lf.urls.hasOwnProperty(u)||(f=e.theme_url,f?lf.load(u,t.documentBaseURI.toAbsolute(f)):lf.load(u,"themes/"+u+"/theme"+i+".js")),n.loadQueue(function(){lf.waitFor(u,r)})):r()}(r,n,t,function(){var s,e,u,f,o;s=r;(u=(e=n).settings).language&&"en"!==u.language&&!u.language_url&&(u.language_url=e.editorManager.baseURL+"/langs/"+u.language+".js");u.language_url&&!e.editorManager.i18n.data[u.language]&&s.add(u.language_url);f=n.settings;o=t;i.isArray(f.plugins)&&(f.plugins=f.plugins.join(" "));i.each(f.external_plugins,function(n,t){ar.load(t,n);f.plugins+=" "+t});i.each(f.plugins.split(/[ ,]/),function(n){if((n=i.trim(n))&&!ar.urls[n])if(ckt(n)){n=n.substr(1,n.length);var t=ar.dependencies(n);i.each(t,function(n){var t={prefix:"plugins/",resource:n,suffix:"/plugin"+o+".js"};n=ar.createUrl(t,n);ar.load(n.resource,n)})}else ar.load(n,{prefix:"plugins/",resource:n,suffix:"/plugin"+o+".js"})});r.loadQueue(function(){n.removed||hkt(n)},n,function(t){rli(n,t[0]);n.removed||hkt(n)})})},hbi=function(n){var i=n.settings,r=n.id,u=function(){pf.unbind(window,"ready",u);n.render()},t;ur.Event.domLoaded?n.getElement()&&s.contentEditable&&(i.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden"),t=n.getElement().form||pf.getParent(r,"form"),t&&(n.formElement=t,i.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(pf.insertAfter(pf.create("input",{type:"hidden",name:r}),r),n.hasHiddenInput=!0),n.formEventDelegate=function(t){n.fire(t.type,t)},pf.bind(t,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!i.submit_patch||t.submit.nodeType||t.submit.length||t._mceOldSubmit||(t._mceOldSubmit=t.submit,t.submit=function(){return n.editorManager.triggerSave(),n.setDirty(!1),t._mceOldSubmit(t)})),n.windowManager=ovt(n),n.notificationManager=evt(n),"xml"===i.encoding&&n.on("GetContent",function(n){n.save&&(n.content=pf.encode(n.content))}),i.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),i.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),n.editorManager.add(n),sbi(n,n.suffix)):pf.bind(window,"ready",u)},cbi=function(n,t,i){var r=n.sidebars?n.sidebars:[];r.push({name:t,settings:i});n.sidebars=r},lkt=i.each,lbi=i.trim,abi="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),vbi={ftp:21,http:80,https:443,mailto:25},si=function(n,t){var r,u,i=this,f;(n=lbi(n),r=(t=i.settings=t||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n))?i.source=n:(f=0===n.indexOf("//"),0!==n.indexOf("/")||f||(n=(r&&r.protocol||"http")+"://mce_host"+n),/^[\w\-]*:?\/\//.test(n)||(u=t.base_uri?t.base_uri.path:new si(document.location.href).directory,""==t.base_uri.protocol?n="//mce_host"+i.toAbsPath(u,n):(n=/([^#?]*)([#?]?.*)/.exec(n),n=(r&&r.protocol||"http")+"://mce_host"+i.toAbsPath(u,n[1])+n[2])),n=n.replace(/@@/g,"(mce_at)"),n=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n),lkt(abi,function(t,r){var u=n[r];u&&(u=u.replace(/\(mce_at\)/g,"@@"));i[t]=u}),r&&(i.protocol||(i.protocol=r.protocol),i.userInfo||(i.userInfo=r.userInfo),i.port||"mce_host"!==i.host||(i.port=r.port),i.host&&"mce_host"!==i.host||(i.host=r.host),i.source=""),f&&(i.protocol=""))};si.prototype={setPath:function(n){n=/^(.*?)\/?(\w+)?$/.exec(n);this.path=n[0];this.directory=n[1];this.file=n[2];this.source="";this.getURI()},toRelative:function(n){var i,t,r;return"./"===n?n:"mce_host"!==(n=new si(n,{base_uri:this})).host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol?n.getURI():(t=this.getURI(),r=n.getURI(),t===r||"/"===t.charAt(t.length-1)&&t.substr(0,t.length-1)===r?t:(i=this.toRelPath(this.path,n.path),n.query&&(i+="?"+n.query),n.anchor&&(i+="#"+n.anchor),i))},toAbsolute:function(n,t){return(n=new si(n,{base_uri:this})).getURI(t&&this.isSameOrigin(n))},isSameOrigin:function(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;var t=vbi[this.protocol];if(t&&(this.port||t)==(n.port||t))return!0}return!1},toRelPath:function(n,t){var r,i,u,f=0,e="";if(n=(n=n.substring(0,n.lastIndexOf("/"))).split("/"),r=t.split("/"),n.length>=r.length)for(i=0,u=n.length;i<u;i++)if(i>=r.length||n[i]!==r[i]){f=i+1;break}if(n.length<r.length)for(i=0,u=r.length;i<u;i++)if(i>=n.length||n[i]!==r[i]){f=i+1;break}if(1===f)return t;for(i=0,u=n.length-(f-1);i<u;i++)e+="../";for(i=f-1,u=r.length;i<u;i++)e+=i!==f-1?"/"+r[i]:r[i];return e},toAbsPath:function(n,t){var i,e,r,f=0,u=[];for(e=/\/$/.test(t)?"/":"",n=n.split("/"),t=t.split("/"),lkt(n,function(n){n&&u.push(n)}),n=u,i=t.length-1,u=[];0<=i;i--)0!==t[i].length&&"."!==t[i]&&(".."!==t[i]?0<f?f--:u.push(t[i]):f++);return 0!==(r=(i=n.length-f)<=0?u.reverse().join("/"):n.slice(0,i).join("/")+"/"+u.reverse().join("/")).indexOf("/")&&(r="/"+r),e&&r.lastIndexOf("/")!==r.length-1&&(r+=e),r},getURI:function(n){var i,t=this;return t.source&&!n||(i="",n||(i+=t.protocol?t.protocol+"://":"//",t.userInfo&&(i+=t.userInfo+"@"),t.host&&(i+=t.host),t.port&&(i+=":"+t.port)),t.path&&(i+=t.path),t.query&&(i+="?"+t.query),t.anchor&&(i+="#"+t.anchor),t.source=i),t.source}};si.parseDataUri=function(n){var t,i;return n=decodeURIComponent(n).split(","),(i=/data:([^;]+)/.exec(n[0]))&&(t=i[1]),{type:t,data:n[1]}};si.getDocumentBaseUrl=function(n){var t;return t=0!==n.protocol.indexOf("http")&&"file:"!==n.protocol?n.href:n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t};var ybi=function(n,t,r){var u,o,s,e,h;if(t.format=t.format?t.format:"html",t.get=!0,t.getInner=!0,t.no_events||n.fire("BeforeGetContent",t),"raw"===t.format)u=i.trim(oyt.trimExternal(n.serializer,r.innerHTML));else if("text"===t.format)u=eu(r.innerText||r.textContent);else{if("tree"===t.format)return n.serializer.serialize(r,t);s=(o=n).serializer.serialize(r,t);e=ef(o);h=new RegExp("^(<"+e+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+e+">[\r\n]*|<br \\/>[\r\n]*)$");u=s.replace(h,"")}return t.content="text"===t.format||nl(f.fromDom(r))?u:i.trim(u),t.no_events||n.fire("GetContent",t),t.content},tn=function(n,t){t(n);n.firstChild&&tn(n.firstChild,t);n.next&&tn(n.next,t)},pbi=function(n,t,i){var r=function(n,t,i){var r={},f={},e=[],o,s;for(o in i.firstChild&&tn(i.firstChild,function(i){u.each(n,function(n){n.name===i.name&&(r[n.name]?r[n.name].nodes.push(i):r[n.name]={filter:n,nodes:[i]})});u.each(t,function(n){"string"==typeof i.attr(n.name)&&(f[n.name]?f[n.name].nodes.push(i):f[n.name]={filter:n,nodes:[i]})})}),r)r.hasOwnProperty(o)&&e.push(r[o]);for(s in f)f.hasOwnProperty(s)&&e.push(f[s]);return e}(n,t,i);u.each(r,function(n){u.each(n.filter.callbacks,function(t){t(n.nodes,n.filter.name,{})})})},rn=function(n){return n instanceof ai},un=function(n,t){var i;n.dom.setHTML(n.getBody(),t);ks(i=n)&&c.firstPositionIn(i.getBody()).each(function(n){var t=n.getNode(),u=r.isTable(t)?c.firstPositionIn(t).getOr(n):n;i.selection.setRng(u.toRange())})},wbi=function(r,u,e){return void 0===e&&(e={}),e.format=e.format?e.format:"html",e.set=!0,e.content=rn(u)?"":u,rn(u)||e.no_events||(r.fire("BeforeSetContent",e),u=e.content),n.from(r.getBody()).fold(t.constant(u),function(n){return rn(u)?function(n,t,r,u){pbi(n.parser.getNodeFilters(),n.parser.getAttributeFilters(),r);var e=cs({validate:n.validate},n.schema).serialize(r);return u.content=nl(f.fromDom(t))?e:i.trim(e),un(n,u.content),u.no_events||n.fire("SetContent",u),r}(r,n,u,e):(o=r,h=n,s=e,0===(t=u).length||/^\s+$/.test(t)?(c='<br data-mce-bogus="1">',"TABLE"===h.nodeName?t="<tr><td>"+c+"<\/td><\/tr>":/^(UL|OL)$/.test(h.nodeName)&&(t="<li>"+c+"<\/li>"),(l=ef(o))&&o.schema.isValidChild(h.nodeName.toLowerCase(),l.toLowerCase())?(t=c,t=o.dom.createHTML(l,o.settings.forced_root_block_attrs,t)):t||(t='<br data-mce-bogus="1">'),un(o,t),o.fire("SetContent",s)):("raw"!==s.format&&(t=cs({validate:o.validate},o.schema).serialize(o.parser.parse(t,{isRootContent:!0,insert:!0}))),s.content=nl(f.fromDom(h))?t:i.trim(t),un(o,s.content),s.no_events||o.fire("SetContent",s)),s.content);var o,h,t,s,l,c})},gv=d.DOM,ny=function(t){return n.from(t).each(function(n){return n.destroy()})},bbi=function(n){var t;if(!n.removed){var u=n._selectionOverrides,f=n.editorUpload,i=n.getBody(),r=n.getElement();i&&n.save();n.removed=!0;n.unbindAllNativeEvents();n.hasHiddenInput&&r&&gv.remove(r.nextSibling);!n.inline&&i&&(t=n,gv.setStyle(t.id,"display",t.orgDisplay));oci(n);n.editorManager.remove(n);gv.remove(n.getContainer());ny(u);ny(f);n.destroy()}},kbi=function(n,t){var u,r,i,f=n.selection,e=n.dom;n.destroyed||(t||n.removed?(t||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),ny(f),ny(e)),(r=(u=n).formElement)&&(r._mceOldSubmit&&(r.submit=r._mceOldSubmit,r._mceOldSubmit=null),gv.unbind(r,"submit reset",u.formEventDelegate)),(i=n).contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null,i.selection&&(i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null),n.destroyed=!0):n.remove())},wf=d.DOM,akt=i.extend,vkt=i.each,ykt=i.resolve,dbi=s.ie,ch=function(n,t,i){var u,f,e,h,c,l,a,r=this,y=r.documentBaseUrl=i.documentBaseURL,v=i.baseURI;u=r;f=n;e=y;h=i.defaultSettings;c=t;a={id:f,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:(l=u).convertURL,url_converter_scope:l,ie7_compat:!0};t=nei(bfi,a,h,c);r.settings=t;yt.language=t.language||"en";yt.languageLoad=t.language_load;yt.baseURL=i.baseURL;r.id=n;r.setDirty(!1);r.plugins={};r.documentBaseURI=new si(t.document_base_url,{base_uri:v});r.baseURI=v;r.contentCSS=[];r.contentStyles=[];r.shortcuts=new gat(r);r.loadedCSS={};r.editorCommands=new eat(r);r.suffix=i.suffix;r.editorManager=i;r.inline=t.inline;r.buttons={};r.menuItems={};t.cache_suffix&&(s.cacheSuffix=t.cache_suffix.replace(/^[\?\&]+/,""));!1===t.override_viewport&&(s.overrideViewPort=!1);i.fire("SetupEditor",{editor:r});r.execCallback("setup",r);r.$=o.overrideDefaults(function(){return{context:r.inline?r.getBody():r.getDoc(),element:r.getBody()}})};akt(ch.prototype={render:function(){hbi(this)},focus:function(n){bci(this,n)},hasFocus:function(){return ks(this)},execCallback:function(n){for(var t,i,u=[],r=1;r<arguments.length;r++)u[r-1]=arguments[r];return i=this.settings[n],i?(this.callbackLookup&&(t=this.callbackLookup[n])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=(t=i.replace(/\.\w+$/,""))?ykt(t):0,i=ykt(i),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[n]={func:i,scope:t}),i.apply(t||this,Array.prototype.slice.call(arguments,1))):void 0},translate:function(n){if(n&&i.is(n,"string")){var t=this.settings.language||"en",r=this.editorManager.i18n;n=r.data[t+"."+n]||n.replace(/\{\#([^\}]+)\}/g,function(n,i){return r.data[t+"."+i]||"{#"+i+"}"})}return this.editorManager.translate(n)},getLang:function(n,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+n]||(t!==undefined?t:"{#"+n+"}")},getParam:function(n,t,i){return iei(this,n,t,i)},nodeChanged:function(n){this._nodeChangeDispatcher.nodeChanged(n)},addButton:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});t.stateSelector&&"undefined"==typeof t.active&&(t.active=!1);t.text||t.icon||(t.icon=n);i.buttons=i.buttons;t.tooltip=t.tooltip||t.title;i.buttons[n]=t},addSidebar:function(n,t){return cbi(this,n,t)},addMenuItem:function(n,t){var i=this;t.cmd&&(t.onclick=function(){i.execCommand(t.cmd)});i.menuItems=i.menuItems;i.menuItems[n]=t},addContextToolbar:function(n,t){var r,i=this;i.contextToolbars=i.contextToolbars||[];"string"==typeof n&&(r=n,n=function(n){return i.dom.is(n,r)});i.contextToolbars.push({id:td.uuid("mcet"),predicate:n,items:t})},addCommand:function(n,t,i){this.editorCommands.addCommand(n,t,i)},addQueryStateHandler:function(n,t,i){this.editorCommands.addQueryStateHandler(n,t,i)},addQueryValueHandler:function(n,t,i){this.editorCommands.addQueryValueHandler(n,t,i)},addShortcut:function(n,t,i,r){this.shortcuts.add(n,t,i,r)},execCommand:function(n,t,i,r){return this.editorCommands.execCommand(n,t,i,r)},queryCommandState:function(n){return this.editorCommands.queryCommandState(n)},queryCommandValue:function(n){return this.editorCommands.queryCommandValue(n)},queryCommandSupported:function(n){return this.editorCommands.queryCommandSupported(n)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(wf.show(this.getContainer()),wf.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var n=this,t=n.getDoc();n.hidden||(dbi&&t&&!n.inline&&t.execCommand("SelectAll"),n.save(),n.inline?(n.getBody().contentEditable=!1,n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(wf.hide(n.getContainer()),wf.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(n,t){this.fire("ProgressState",{state:n,time:t})},load:function(n){var i,t=this.getElement();return this.removed?"":t?((n=n||{}).load=!0,i=this.setContent(t.value!==undefined?t.value:t.innerHTML,n),n.element=t,n.no_events||this.fire("LoadContent",n),n.element=t=null,i):void 0},save:function(n){var r,u,t=this,i=t.getElement();if(i&&t.initialized&&!t.removed)return(n=n||{}).save=!0,n.element=i,n.content=t.getContent(n),n.no_events||t.fire("SaveContent",n),"raw"===n.format&&t.fire("RawSaveContent",n),r=n.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=r:(t.inline||(i.innerHTML=r),(u=wf.getParent(t.id,"form"))&&vkt(u.elements,function(n){if(n.name===t.id)return n.value=r,!1})),n.element=i=null,!1!==n.set_dirty&&t.setDirty(!1),r},setContent:function(n,t){return wbi(this,n,t)},getContent:function(i){return u=this,void 0===(r=i)&&(r={}),n.from(u.getBody()).fold(t.constant("tree"===r.format?new ai("body",11):""),function(n){return ybi(u,r,n)});var u,r},insertContent:function(n,t){t&&(n=akt({content:n},t));this.execCommand("mceInsertContent",!1,n)},isDirty:function(){return!this.isNotDirty},setDirty:function(n){var t=!this.isNotDirty;this.isNotDirty=!n;n&&n!==t&&this.fire("dirty")},setMode:function(n){var t,i;(i=n)!==lci(t=this)&&(t.initialized?yat(t,"readonly"===i):t.on("init",function(){yat(t,"readonly"===i)}),sci(t,i))},getContainer:function(){return this.container||(this.container=wf.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=wf.get(this.id)),this.targetElm},getWin:function(){var n;return this.contentWindow||(n=this.iframeElement)&&(this.contentWindow=n.contentWindow),this.contentWindow},getDoc:function(){var n;return this.contentDocument||(n=this.getWin())&&(this.contentDocument=n.document),this.contentDocument},getBody:function(){var n=this.getDoc();return this.bodyElement||(n?n.body:null)},convertURL:function(n,t,i){var r=this.settings;return r.urlconverter_callback?this.execCallback("urlconverter_callback",n,i,!0,t):!r.convert_urls||i&&"LINK"===i.nodeName||0===n.indexOf("file:")||0===n.length?n:r.relative_urls?this.documentBaseURI.toRelative(n):n=this.documentBaseURI.toAbsolute(n,r.remove_script_host)},addVisual:function(n){var r,t=this,u=t.settings,i=t.dom;n=n||t.getBody();t.hasVisual===undefined&&(t.hasVisual=u.visual);vkt(i.select("table,a",n),function(n){var f;switch(n.nodeName){case"TABLE":return r=u.visual_table_class||"mce-item-table",void((f=i.getAttrib(n,"border"))&&"0"!==f||!t.hasVisual?i.removeClass(n,r):i.addClass(n,r));case"A":return void(i.getAttrib(n,"href")||(f=i.getAttrib(n,"name")||n.id,r=u.visual_anchor_class||"mce-item-anchor",f&&t.hasVisual?i.addClass(n,r):i.removeClass(n,r)))}});t.fire("VisualAid",{element:n,hasVisual:t.hasVisual})},remove:function(){bbi(this)},destroy:function(n){kbi(this,n)},uploadImages:function(n){return this.editorUpload.uploadImages(n)},_scanForImages:function(){return this.editorUpload.scanForImages()}},kat);var lh,ty,wu,pkt={isEditorUIElement:function(n){return-1!==n.className.toString().indexOf("mce-")}},gbi=function(n,t){var i,r;tu.detect().browser.isIE()?(r=n).on("focusout",function(){da(r)}):(i=t,n.on("mouseup touchend",function(){i.throttle()}));n.on("keyup nodechange",function(t){var i;"nodechange"===(i=t).type&&i.selectionChange||da(n)})},nki=function(n){var r,u,t,i=uyt(function(){da(n)},0);n.inline&&(r=n,u=i,t=function(){u.throttle()},d.DOM.bind(document,"mouseup",t),r.on("remove",function(){d.DOM.unbind(document,"mouseup",t)}));n.on("init",function(){gbi(n,i)});n.on("remove",function(){i.cancel()})},fn=d.DOM,tki=function(n){return pkt.isEditorUIElement(n)},wkt=function(n,t){var i=n?n.settings.custom_ui_selector:"";return null!==fn.getParent(t,function(t){return tki(t)||!!i&&n.dom.is(t,i)})},iki=function(n,t){var i=t.editor;nki(i);i.on("focusin",function(){var t=n.focusedEditor;t!==this&&(t&&t.fire("blur",{focusedEditor:this}),n.setActive(this),(n.focusedEditor=this).fire("focus",{blurredEditor:t}),this.focus(!0))});i.on("focusout",function(){var t=this;bt.setEditorTimeout(t,function(){var i=n.focusedEditor;wkt(t,function(){try{return document.activeElement}catch(n){return document.body}}())||i!==t||(t.fire("blur",{focusedEditor:null}),n.focusedEditor=null)})});lh||(lh=function(t){var i,r=n.activeEditor;i=t.target;r&&i.ownerDocument===document&&(i===document.body||wkt(r,i)||n.focusedEditor!==r||(r.fire("blur",{focusedEditor:null}),n.focusedEditor=null))},fn.bind(document,"focusin",lh))},rki=function(n,t){n.focusedEditor===t.editor&&(n.focusedEditor=null);n.activeEditor||(fn.unbind(document,"focusin",lh),lh=null)},uki=function(n){n.on("AddEditor",t.curry(iki,n));n.on("RemoveEditor",t.curry(rki,n))},iy={},en="en",ry={setCode:function(n){n&&(en=n,this.rtl=!!this.data[n]&&"rtl"===this.data[n]._dir)},getCode:function(){return en},rtl:!1,add:function(n,t){var i=iy[n],r;for(r in i||(iy[n]=i={}),t)i[r]=t[r];this.setCode(n)},translate:function(n){var u=iy[en]||{},t=function(n){return i.is(n,"function")?Object.prototype.toString.call(n):f(n)?"":""+n},f=function(n){return""===n||null===n||i.is(n,"undefined")},e=function(n){return n=t(n),i.hasOwn(u,n)?t(u[n]):n},r;return f(n)?"":i.is(n,"object")&&i.hasOwn(n,"raw")?t(n.raw):(i.is(n,"array")&&(r=n.slice(1),n=e(n[0]).replace(/\{([0-9]+)\}/g,function(n,u){return i.hasOwn(r,u)?t(r[u]):n})),e(n).replace(/{context:\w+}$/,""))},data:iy},ti=d.DOM,fki=i.explode,rr=i.each,bkt=i.extend,eki=0,kkt=!1,bu=[],vt=[],dkt=function(n){rr(wu.get(),function(t){"scroll"===n.type?t.fire("ScrollWindow",n):t.fire("ResizeWindow",n)})},gkt=function(n){n!==kkt&&(n?o(window).on("resize scroll",dkt):o(window).off("resize scroll",dkt),kkt=n)},ndt=function(n){var i=vt,t;for(delete bu[n.id],t=0;t<bu.length;t++)if(bu[t]===n){bu.splice(t,1);break}return vt=u.filter(vt,function(t){return n!==t}),wu.activeEditor===n&&(wu.activeEditor=0<vt.length?vt[0]:null),wu.focusedEditor===n&&(wu.focusedEditor=null),i.length!==vt.length};bkt(wu={defaultSettings:{},$:o,majorVersion:"4",minorVersion:"7.13",releaseDate:"2018-05-16",editors:bu,i18n:ry,activeEditor:null,settings:{},setup:function(){var i,n,r,t,u="",e,f,o;if(n=si.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),r=window.tinymce||window.tinyMCEPreInit)i=r.base||r.baseURL,u=r.suffix;else{for(e=document.getElementsByTagName("script"),f=0;f<e.length;f++)if(o=(t=e[f].src).substring(t.lastIndexOf("/")),/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(t)){-1!==o.indexOf(".min")&&(u=".min");i=t.substring(0,t.lastIndexOf("/"));break}!i&&document.currentScript&&(-1!==(t=document.currentScript.src).indexOf(".min")&&(u=".min"),i=t.substring(0,t.lastIndexOf("/")))}this.baseURL=new si(n).toAbsolute(i);this.documentBaseURL=n;this.baseURI=new si(this.baseURL);this.suffix=u;uki(this)},overrideDefaults:function(n){var r,u,t,i;(r=n.base_url)&&(this.baseURL=new si(this.documentBaseURL).toAbsolute(r.replace(/\/+$/,"")),this.baseURI=new si(this.baseURL));u=n.suffix;n.suffix&&(this.suffix=u);t=(this.defaultSettings=n).plugin_base_urls;for(i in t)yt.PluginManager.urls[i]=t[i]},init:function(n){var r,f,t=this;f=i.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var e=function(n){var t=n.id;return t||(t=(t=n.name)&&!ti.get(t)?n.name:ti.uniqueId(),n.setAttribute("id",t)),t},h=function(n,t){return t.constructor===RegExp?t.test(n.className):ti.hasClass(n,t)},u=function(n){r=n},c=function(){var r,v=0,l=[],a=function(n,i,f){var e=new ch(n,i,t);l.push(e);e.on("init",function(){++v===r.length&&u(l)});e.targetElm=e.targetElm||f;e.render()};ti.unbind(window,"ready",c),function(i){var r=n[i];r&&r.apply(t,Array.prototype.slice.call(arguments,2))}("onpageload");r=o.unique(function(n){var i,t=[];if(s.ie&&s.ie<11)return cvt("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(n.types)return rr(n.types,function(n){t=t.concat(ti.select(n.selector))}),t;if(n.selector)return ti.select(n.selector);if(n.target)return[n.target];switch(n.mode){case"exact":0<(i=n.elements||"").length&&rr(fki(i),function(n){var i;(i=ti.get(n))?t.push(i):rr(document.forms,function(i){rr(i.elements,function(i){i.name===n&&(n="mce_editor_"+eki++,ti.setAttrib(i,"id",n),t.push(i))})})});break;case"textareas":case"specific_textareas":rr(ti.select("textarea"),function(i){n.editor_deselector&&h(i,n.editor_deselector)||n.editor_selector&&!h(i,n.editor_selector)||t.push(i)})}return t}(n));n.types?rr(n.types,function(t){i.each(r,function(i){return!ti.is(i,t.selector)||(a(e(i),bkt({},n,t),i),!1)})}):(i.each(r,function(n){var i;(i=t.get(n.id))&&i.initialized&&!(i.getContainer()||i.getBody()).parentNode&&(ndt(i),i.unbindAllNativeEvents(),i.destroy(!0),i.removed=!0,i=null)}),0===(r=i.grep(r,function(n){return!t.get(n.id)})).length?u([]):rr(r,function(t){var i;i=t;n.inline&&i.tagName.toLowerCase()in f?cvt("Could not initialize inline editor on invalid inline target element",t):a(e(t),n,t)}))};return t.settings=n,ti.bind(window,"ready",c),new ri(function(n){r?n(r):u=function(t){n(t)}})},get:function(n){return 0===arguments.length?vt.slice(0):p.isString(n)?u.find(vt,function(t){return t.id===n}).getOr(null):p.isNumber(n)&&vt[n]?vt[n]:null},add:function(n){var t=this;return bu[n.id]===n||(null===t.get(n.id)&&("length"!==n.id&&(bu[n.id]=n),bu.push(n),vt.push(n)),gkt(!0),t.activeEditor=n,t.fire("AddEditor",{editor:n}),ty||(ty=function(){t.fire("BeforeUnload")},ti.bind(window,"beforeunload",ty))),n},createEditor:function(n,t){return this.add(new ch(n,t,this))},remove:function(n){var r,t,i=this;if(n)return p.isString(n)?(n=n.selector||n,void rr(ti.select(n),function(n){(t=i.get(n.id))&&i.remove(t)})):(t=n,p.isNull(i.get(t.id))?null:(ndt(t)&&i.fire("RemoveEditor",{editor:t}),0===vt.length&&ti.unbind(window,"beforeunload",ty),t.remove(),gkt(0<vt.length),t));for(r=vt.length-1;0<=r;r--)i.remove(vt[r])},execCommand:function(n,t,i){var r=this.get(i);switch(n){case"mceAddEditor":return this.get(i)||new ch(i,this.settings,this).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?r.isHidden()?r.show():r.hide():this.execCommand("mceAddEditor",0,i),!0}return!!this.activeEditor&&this.activeEditor.execCommand(n,t,i)},triggerSave:function(){rr(vt,function(n){n.save()})},addI18n:function(n,t){ry.add(n,t)},translate:function(n){return ry.translate(n)},setActive:function(n){var t=this.activeEditor;this.activeEditor!==n&&(t&&t.fire("deactivate",{relatedTarget:n}),n.fire("activate",{relatedTarget:t}));this.activeEditor=n}},nv);wu.setup();on=wu;(uy=sn||(sn={})).compareRanges=hk;uy.getCaretRangeFromPoint=lg;uy.getSelectedNode=ww;uy.getNode=ve;var tdt,hn,oki=sn,idt=Math.min,eo=Math.max,fy=Math.round,rdt=function(n,t,i){var r,u,f,e,o,s;return r=t.x,u=t.y,f=n.w,e=n.h,o=t.w,s=t.h,"b"===(i=(i||"").split(""))[0]&&(u+=s),"r"===i[1]&&(r+=o),"c"===i[0]&&(u+=fy(s/2)),"c"===i[1]&&(r+=fy(o/2)),"b"===i[3]&&(u-=e),"r"===i[4]&&(r-=f),"c"===i[3]&&(u-=fy(e/2)),"c"===i[4]&&(r-=fy(f/2)),oo(r,u,f,e)},oo=function(n,t,i,r){return{x:n,y:t,w:i,h:r}},ski={inflate:function(n,t,i){return oo(n.x-t,n.y-i,n.w+2*t,n.h+2*i)},relativePosition:rdt,findBestRelativePosition:function(n,t,i,r){for(var u,f=0;f<r.length;f++)if((u=rdt(n,t,r[f])).x>=i.x&&u.x+u.w<=i.w+i.x&&u.y>=i.y&&u.y+u.h<=i.h+i.y)return r[f];return null},intersect:function(n,t){var i,r,u,f;return i=eo(n.x,t.x),r=eo(n.y,t.y),u=idt(n.x+n.w,t.x+t.w),f=idt(n.y+n.h,t.y+t.h),u-i<0||f-r<0?null:oo(i,r,u-i,f-r)},clamp:function(n,t,i){var o,s,h,c,r,u,f,e,l,a;return r=n.x,u=n.y,f=n.x+n.w,e=n.y+n.h,l=t.x+t.w,a=t.y+t.h,o=eo(0,t.x-r),s=eo(0,t.y-u),h=eo(0,f-l),c=eo(0,e-a),r+=o,u+=s,i&&(f+=o,e+=s,r-=h,u-=c),oo(r,u,(f-=h)-r,(e-=c)-u)},create:oo,fromClientRect:function(n){return oo(n.left,n.top,n.width,n.height)}},ah={},hki={add:function(n,t){ah[n.toLowerCase()]=t},has:function(n){return!!ah[n.toLowerCase()]},get:function(n){var t=n.toLowerCase(),i=ah.hasOwnProperty(t)?ah[t]:null;if(null===i)throw new Error("Could not find module for type: "+n);return i},create:function(n,t){var i;if("string"==typeof n?(t=t||{}).type=n:n=(t=n).type,n=n.toLowerCase(),!(i=ah[n]))throw new Error("Could not find control by type: "+n);return(i=new i(t)).type=n,i}},ey=i.each,cki=i.extend,udt=function(){};udt.extend=tdt=function(n){var u,i,f,t=this.prototype,r=function(){var n,t,i;if(!hn&&(this.init&&this.init.apply(this,arguments),t=this.Mixins))for(n=t.length;n--;)(i=t[n]).init&&i.init.apply(this,arguments)},e=function(){return this},o=function(n,i){return function(){var r,u=this._super;return this._super=t[n],r=i.apply(this,arguments),this._super=u,r}};for(i in hn=!0,u=new this,hn=!1,n.Mixins&&(ey(n.Mixins,function(t){for(var i in t)"init"!==i&&(n[i]=t[i])}),t.Mixins&&(n.Mixins=t.Mixins.concat(n.Mixins))),n.Methods&&ey(n.Methods.split(","),function(t){n[t]=e}),n.Properties&&ey(n.Properties.split(","),function(t){var i="_"+t;n[t]=function(n){return n!==undefined?(this[i]=n,this):this[i]}}),n.Statics&&ey(n.Statics,function(n,t){r[t]=n}),n.Defaults&&t.Defaults&&(n.Defaults=cki({},t.Defaults,n.Defaults)),n)u[i]="function"==typeof(f=n[i])&&t[i]?o(i,f):f;return r.prototype=u,(r.constructor=r).extend=tdt,r};var oy=Math.min,sy=Math.max,bf=Math.round,cn=function(n,t){var r,i,f,u;if(t=t||'"',null===n)return"null";if("string"==(f=typeof n))return i="\bb\tt\nn\ff\rr\"\"''\\\\",t+n.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(n,u){return'"'===t&&"'"===n?n:(r=i.indexOf(u))+1?"\\"+i.charAt(r+1):(n=u.charCodeAt().toString(16),"\\u"+"0000".substring(n.length)+n)})+t;if("object"===f){if(n.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(n)){for(r=0,i="[";r<n.length;r++)i+=(0<r?",":"")+cn(n[r],t);return i+"]"}for(u in i="{",n)n.hasOwnProperty(u)&&(i+="function"!=typeof n[u]?(1<i.length?","+t:t)+u+t+":"+cn(n[u],t):"");return i+"}"}return""+n},ln={serialize:cn,parse:function(n){try{return JSON.parse(n)}catch(t){}}},lki={callbacks:{},count:0,send:function(n){var t=this,i=d.DOM,r=n.count!==undefined?n.count:t.count,u="tinymce_jsonp_"+r;t.callbacks[r]=function(f){i.remove(u);delete t.callbacks[r];n.callback(f)};i.add(i.doc.body,"script",{id:u,src:n.url,type:"text/javascript"});t.count++}},vh={send:function(n){var t,r=0,u=function(){!n.async||4===t.readyState||1e4<r++?(n.success&&r<1e4&&200===t.status?n.success.call(n.success_scope,""+t.responseText,t,n):n.error&&n.error.call(n.error_scope,1e4<r?"TIMED_OUT":"GENERAL",t,n),t=null):setTimeout(u,10)};if(n.scope=n.scope||this,n.success_scope=n.success_scope||n.scope,n.error_scope=n.error_scope||n.scope,n.async=!1!==n.async,n.data=n.data||"",vh.fire("beforeInitialize",{settings:n}),t=new nd){if(t.overrideMimeType&&t.overrideMimeType(n.content_type),t.open(n.type||(n.data?"POST":"GET"),n.url,n.async),n.crossDomain&&(t.withCredentials=!0),n.content_type&&t.setRequestHeader("Content-Type",n.content_type),n.requestheaders&&i.each(n.requestheaders,function(n){t.setRequestHeader(n.key,n.value)}),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),(t=vh.fire("beforeSend",{xhr:t,settings:n}).xhr).send(n.data),!n.async)return u();setTimeout(u,10)}}};i.extend(vh,nv);an=i.extend;yh=function(n){this.settings=an({},n);this.count=0};yh.sendRPC=function(n){return(new yh).send(n)};yh.prototype={send:function(n){var t=n.error,i=n.success;(n=an(this.settings,n)).success=function(r,u){void 0===(r=ln.parse(r))&&(r={error:"JSON Parse error."});r.error?t.call(n.error_scope||n.scope,r.error,u):i.call(n.success_scope||n.scope,r.result)};n.error=function(i,r){t&&t.call(n.error_scope||n.scope,i,r)};n.data=ln.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params});n.content_type="application/json";vh.send(n)}};var vn,aki=window.localStorage,fdt=on,vki={geom:{Rect:ski},util:{Promise:ri,Delay:bt,Tools:i,VK:a,URI:si,Class:udt,EventDispatcher:ws,Observable:nv,I18n:ry,XHR:vh,JSON:ln,JSONRequest:yh,JSONP:lki,LocalStorage:aki,Color:function(n){var u={},t=0,i=0,r=0,f=function(n){var f;return"object"==typeof n?"r"in n?(t=n.r,i=n.g,r=n.b):"v"in n&&function(n,u,f){var h,e,o,s;if(n=(parseInt(n,10)||0)%360,u=parseInt(u,10)/100,f=parseInt(f,10)/100,u=sy(0,oy(u,1)),f=sy(0,oy(f,1)),0!==u){switch(h=n/60,o=(e=f*u)*(1-Math.abs(h%2-1)),s=f-e,Math.floor(h)){case 0:t=e;i=o;r=0;break;case 1:t=o;i=e;r=0;break;case 2:t=0;i=e;r=o;break;case 3:t=0;i=o;r=e;break;case 4:t=o;i=0;r=e;break;case 5:t=e;i=0;r=o;break;default:t=i=r=0}t=bf(255*(t+s));i=bf(255*(i+s));r=bf(255*(r+s))}else t=i=r=bf(255*f)}(n.h,n.s,n.v):(f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(n))?(t=parseInt(f[1],10),i=parseInt(f[2],10),r=parseInt(f[3],10)):(f=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(n))?(t=parseInt(f[1],16),i=parseInt(f[2],16),r=parseInt(f[3],16)):(f=/#([0-F])([0-F])([0-F])/gi.exec(n))&&(t=parseInt(f[1]+f[1],16),i=parseInt(f[2]+f[2],16),r=parseInt(f[3]+f[3],16)),t=t<0?0:255<t?255:t,i=i<0?0:255<i?255:i,r=r<0?0:255<r?255:r,u};return n&&f(n),u.toRgb=function(){return{r:t,g:i,b:r}},u.toHsv=function(){return u=t,e=i,f=r,o=0,(n=oy(u/=255,oy(e/=255,f/=255)))===(s=sy(u,sy(e,f)))?{h:0,s:0,v:100*(o=n)}:(h=(s-n)/s,{h:bf(60*((u===n?3:f===n?1:5)-(u===n?e-f:f===n?u-e:f-u)/((o=s)-n))),s:bf(100*h),v:bf(100*o)});var u,e,f,h,o,n,s},u.toHex=function(){var n=function(n){return 1<(n=parseInt(n,10).toString(16)).length?n:"0"+n};return"#"+n(t)+n(i)+n(r)},u.parse=f,u}},dom:{EventUtils:ur,Sizzle:v,DomQuery:o,TreeWalker:et,DOMUtils:d,ScriptLoader:or,RangeUtils:oki,Serializer:cwt,ControlSelection:vwt,BookmarkManager:lwt,Selection:obt,Event:ur.Event},html:{Styles:ow,Entities:uf,Node:ai,Schema:fu,SaxParser:ad,DomParser:hg,Writer:tht,Serializer:cs},ui:{Factory:hki},Env:s,AddOnManager:yt,Formatter:nwt,UndoManager:lyt,EditorCommands:eat,WindowManager:ovt,NotificationManager:evt,EditorObservable:kat,Shortcuts:gat,Editor:ch,FocusManager:pkt,EditorManager:on,DOM:d.DOM,ScriptLoader:or.ScriptLoader,PluginManager:yt.PluginManager,ThemeManager:yt.ThemeManager,trim:i.trim,isArray:i.isArray,is:i.is,toArray:i.toArray,makeMap:i.makeMap,each:i.each,map:i.map,grep:i.grep,inArray:i.inArray,extend:i.extend,create:i.create,walk:i.walk,createNS:i.createNS,resolve:i.resolve,explode:i.explode,_addCacheSuffix:i._addCacheSuffix,isOpera:s.opera,isWebKit:s.webkit,isIE:s.ie,isGecko:s.gecko,isMac:s.mac},edt=fdt=i.extend(fdt,vki);vn=edt;window.tinymce=vn;window.tinyMCE=vn,function(n){if("object"==typeof module)try{module.exports=n}catch(t){}}(edt)}();!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t={characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp("[-'\\.‘’․﹒＇．]"),new RegExp("[:··״‧︓﹕：]"),new RegExp("[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]"),new RegExp("[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]"),new RegExp("\\r"),new RegExp("\\n"),new RegExp("[\x0b\f\u2028\u2029]"),new RegExp("[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]"),new RegExp("[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯﻿￹-￻]"),new RegExp("[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]"),new RegExp("[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]"),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]$"),WHITESPACE:/^\s+$/},o=function(n,t,i){var r,u;if(!n)return 0;if(i=i||n,n.length!==undefined){for(r=0,u=n.length;r<u;r++)if(!1===t.call(i,n[r],r,n))return 0}else for(r in n)if(n.hasOwnProperty(r)&&!1===t.call(i,n[r],r,n))return 0;return 1},s=function(n,t){var i=[];return o(n,function(r,u){i.push(t(r,u,n))}),i},i=t.SETS,h=t.characterIndices.OTHER,c=function(n){for(var r,u=h,f=i.length,t=0;t<f;++t)if((r=i[t])&&r.test(n)){u=t;break}return u},l=function(n){var i,t,r=(i=c,t={},function(n){if(t[n])return t[n];var r=i(n);return t[n]=r});return s(n.split(""),r)},n=t.characterIndices,a=function(t,i){var f,e,r=t[i],u=t[i+1];return!(i<0||i>t.length-1&&0!==i||r===n.ALETTER&&u===n.ALETTER||(e=t[i+2],r===n.ALETTER&&(u===n.MIDLETTER||u===n.MIDNUMLET||u===n.AT)&&e===n.ALETTER||(f=t[i-1],(r===n.MIDLETTER||r===n.MIDNUMLET||u===n.AT)&&u===n.ALETTER&&f===n.ALETTER||!(r!==n.NUMERIC&&r!==n.ALETTER||u!==n.NUMERIC&&u!==n.ALETTER)||(r===n.MIDNUM||r===n.MIDNUMLET)&&u===n.NUMERIC&&f===n.NUMERIC||r===n.NUMERIC&&(u===n.MIDNUM||u===n.MIDNUMLET)&&e===n.NUMERIC||r===n.EXTEND||r===n.FORMAT||f===n.EXTEND||f===n.FORMAT||u===n.EXTEND||u===n.FORMAT||r===n.CR&&u===n.LF||r!==n.NEWLINE&&r!==n.CR&&r!==n.LF&&u!==n.NEWLINE&&u!==n.CR&&u!==n.LF&&(r===n.KATAKANA&&u===n.KATAKANA||u===n.EXTENDNUMLET&&(r===n.ALETTER||r===n.NUMERIC||r===n.KATAKANA||r===n.EXTENDNUMLET)||r===n.EXTENDNUMLET&&(u===n.ALETTER||u===n.NUMERIC||u===n.KATAKANA)||r===n.AT))))},v=t.EMPTY_STRING,r=t.WHITESPACE,y=t.PUNCTUATION,p=function(n,t,i){var u=function(n,t){for(var u,i=t;i<n.length;++i)if(u=n.charAt(i),r.test(u))break;return i}(t,i+1),f=t.substring(i+1,u);return"://"===f.substr(0,3)?{word:n+f,index:u}:{word:n,index:i}},w=function(n,t){return function(n,t){var o,s,h,c,u=0,w=l(n),b=w.length,i=[],f=[],e;for(t||(t={}),t.ignoreCase&&(n=n.toLowerCase()),s=t.includePunctuation,h=t.includeWhitespace;u<b;++u)(o=n.charAt(u),i.push(o),a(w,u))&&((i=i.join(v))&&(h||!r.test(i))&&(s||!y.test(i))&&("http"===(c=i)||"https"===c?(e=p(i,n,u),f.push(e.word),u=e.index):f.push(i)),i=[]);return f}(n.replace(/\ufeff/g,""),t)},u=function(n){return w((t=n,t.removed?"":t.getBody().innerText)).length;var t},b=function(n){return{getCount:function(){return u(n)}}},f=tinymce.util.Tools.resolve("tinymce.util.Delay"),k=tinymce.util.Tools.resolve("tinymce.util.I18n"),d=function(n){var t=function(n){return k.translate(["{0} words",u(n)])},i=function(){n.theme.panel.find("#wordcount").text(t(n))};n.on("init",function(){var r=n.theme.panel&&n.theme.panel.find("#statusbar")[0],u=f.debounce(i,300);r&&f.setEditorTimeout(n,function(){r.insert({type:"label",name:"wordcount",text:t(n),classes:"wordcount",disabled:n.settings.readonly},0);n.on("setcontent beforeaddundo undo redo keyup",u)},0)})};e.add("wordcount",function(n){return d(n),b(n)})}();!function(){"use strict";var k,d,g,c,nt=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return nt(i())}}},ht=tinymce.util.Tools.resolve("tinymce.PluginManager"),ct=function(n){return{isEnabled:function(){return n.get()}}},lt=function(n,t){return n.fire("VisualChars",{state:t})},u={" ":"nbsp","­":"shy"},l=function(n,t){var i,r="";for(i in n)r+=i;return new RegExp("["+r+"]",t?"g":"")},tt=function(n){var i,t="";for(i in n)t&&(t+=","),t+="span.mce-"+n[i];return t},f={charMap:u,regExp:l(u),regExpGlobal:l(u,!0),selector:tt(u),charMapToRegExp:l,charMapToSelector:tt},a=function(n){return function(){return n}},at=a(!1),vt=a(!0),e={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:a,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:at,always:vt},i=e.never,v=e.always,t=function(){return y},y=(c={fold:function(n){return n()},is:i,isSome:i,isNone:v,getOr:g=function(n){return n},getOrThunk:d=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:g,orThunk:d,map:t,ap:t,each:function(){},bind:t,flatten:t,exists:i,forall:v,filter:t,equals:k=function(n){return n.isNone()},equals_:k,toArray:function(){return[]},toString:e.constant("none()")},Object.freeze&&Object.freeze(c),c),o=function(n){var r=function(){return n},e=function(){return f},u=function(t){return t(n)},f={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:v,isNone:i,getOr:r,getOrThunk:r,getOrDie:r,or:e,orThunk:e,map:function(t){return o(t(n))},ap:function(i){return i.fold(t,function(t){return o(t(n))})},each:function(t){t(n)},bind:u,flatten:r,exists:u,forall:u,filter:function(t){return t(n)?f:y},equals:function(t){return t.is(n)},equals_:function(t,r){return t.fold(i,function(t){return r(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return f},yt={some:o,none:t,from:function(n){return null===n||n===undefined?y:o(n)}},n=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},pt={isString:n("string"),isObject:n("object"),isArray:n("array"),isNull:n("null"),isBoolean:n("boolean"),isUndefined:n("undefined"),isFunction:n("function"),isNumber:n("number")},wt=(Array.prototype.indexOf,undefined,function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u}),bt=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},kt=(Array.prototype.push,Array.prototype.slice,pt.isFunction(Array.from)&&Array.from,wt),p=bt,r=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:e.constant(n)}},it={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return r(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return r(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return r(i)},fromDom:r,fromPoint:function(n,t,i){return yt.from(n.dom().elementFromPoint(t,i)).map(r)}},dt=8,rt=function(n){return n.dom().nodeName.toLowerCase()},w=function(n){return n.dom().nodeType},b=function(n){return function(t){return w(t)===n}},gt=b(1),ni=b(3),ti=b(9),s={name:rt,type:w,value:function(n){return n.dom().nodeValue},isElement:gt,isText:ni,isDocument:ti,isComment:function(n){return w(n)===dt||"#comment"===rt(n)}},ii=function(n){return'<span data-mce-bogus="1" class="mce-'+f.charMap[n]+'">'+n+"<\/span>"},ut=function(n,t){var i=[],r=n.dom(),u=kt(r.childNodes,it.fromDom);return p(u,function(n){t(n)&&(i=i.concat([n]));i=i.concat(ut(n,t))}),i},h={isMatch:function(n){return s.isText(n)&&s.value(n)!==undefined&&f.regExp.test(s.value(n))},filterDescendants:ut,findParentElm:function(n,t){for(;n.parentNode;){if(n.parentNode===t)return n;n=n.parentNode}},replaceWithSpans:function(n){return n.replace(f.regExpGlobal,ii)}},ft=function(n,t){var i,r,u=h.filterDescendants(it.fromDom(t),h.isMatch);p(u,function(t){var u=h.replaceWithSpans(s.value(t));for(r=n.dom.create("div",null,u);i=r.lastChild;)n.dom.insertAfter(i,t.dom());n.dom.remove(t.dom())})},et=function(n,t){var i=n.dom.select(f.selector,t);p(i,function(t){n.dom.remove(t,1)})},ri=ft,ui=et,ot=function(n){var i=n.getBody(),r=n.selection.getBookmark(),t=h.findParentElm(n.selection.getNode(),i);t=t!==undefined?t:i;et(n,t);ft(n,t);n.selection.moveToBookmark(r)},fi=function(n,t){var i,r=n.getBody(),u=n.selection;t.set(!t.get());lt(n,t.get());i=u.getBookmark();!0===t.get()?ri(n,r):ui(n,r);u.moveToBookmark(i)},ei=function(n,t){n.addCommand("mceVisualChars",function(){fi(n,t)})},oi=tinymce.util.Tools.resolve("tinymce.util.Delay"),si=function(n,t){var i=oi.debounce(function(){ot(n)},300);!1!==n.settings.forced_root_block&&n.on("keydown",function(r){!0===t.get()&&(13===r.keyCode?ot(n):i())})},st=function(n){return function(t){var i=t.control;n.on("VisualChars",function(n){i.active(n.state)})}};ht.add("visualchars",function(n){var t,i=nt(!1);return ei(n,i),(t=n).addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:st(t)}),t.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:st(t),selectable:!0,context:"view",prependToContext:!0}),si(n,i),ct(i)})}();!function(){"use strict";var n=function(t){var i=t,r=function(){return i};return{get:r,set:function(n){i=n},clone:function(){return n(r())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(n,t){n.fire("VisualBlocks",{state:t})},s=function(n){return n.getParam("visualblocks_default_state",!1)},h=function(n){return n.settings.visualblocks_content_css},t=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=t.DOM.uniqueId(),c=function(n,u){var e=i.toArray(n.getElementsByTagName("link")),f;0===i.grep(e,function(n){return n.id===r}).length&&(f=t.DOM.create("link",{id:r,rel:"stylesheet",href:u}),n.getElementsByTagName("head")[0].appendChild(f))},u=function(n,t,i){var r=n.dom,u=h(n);c(n.getDoc(),u||t+"/css/visualblocks.css");r.toggleClass(n.getBody(),"mce-visualblocks");i.set(!i.get());o(n,i.get())},l=function(n,t,i){n.addCommand("mceVisualBlocks",function(){u(n,t,i)})},a=function(n,t,i){n.on("PreviewFormats AfterPreviewFormats",function(t){i.get()&&n.dom.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"===t.type)});n.on("init",function(){s(n)&&u(n,t,i)});n.on("remove",function(){n.dom.removeClass(n.getBody(),"mce-visualblocks")})},f=function(n,t){return function(i){var r=i.control;r.active(t.get());n.on("VisualBlocks",function(n){r.active(n.state)})}},v=function(n,t){n.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:f(n,t)});n.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:f(n,t),selectable:!0,context:"view",prependToContext:!0})};e.add("visualblocks",function(t,i){var r=n(!1);l(t,i,r);v(t,r);a(t,i,r)})}();!function(){"use strict";var i,r,h=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=tinymce.util.Tools.resolve("tinymce.util.I18n"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(n){return n.getParam("toc_class","mce-toc")},u=function(n){var t=n.getParam("toc_header","h2");return/^h[1-6]$/.test(t)?t:"h2"},v=function(n){var t=parseInt(n.getParam("toc_depth","3"),10);return 1<=t&&t<=9?t:3},y=(i="mcetoc_",r=0,function(){var n=(new Date).getTime().toString(32);return i+n+(r++).toString(32)}),f=function(t){var r=n(t),f=u(t),e=function(n){for(var i=[],t=1;t<=n;t++)i.push("h"+t);return i.join(",")}(v(t)),i=t.$(e);return i.length&&/^h[1-9]$/i.test(f)&&(i=i.filter(function(n,i){return!t.dom.hasClass(i.parentNode,r)})),a.map(i,function(n){return{id:n.id?n.id:y(),level:parseInt(n.nodeName.replace(/^H/i,""),10),title:t.$.text(n),element:n}})},e=function(n){var r,e,t,s,h,v,y,i="",o=f(n),a=function(n){for(var i=9,t=0;t<n.length;t++)if(n[t].level<i&&(i=n[t].level),1===i)return i;return i}(o)-1;if(!o.length)return"";for(i+=(h=u(n),v=l.translate("Table of Contents"),y="<\/"+h+">","<"+h+' contenteditable="true">'+c.DOM.encode(v)+y),r=0;r<o.length;r++){if((t=o[r]).element.id=t.id,s=o[r+1]&&o[r+1].level,a===t.level)i+="<li>";else for(e=a;e<t.level;e++)i+="<ul><li>";if(i+='<a href="#'+t.id+'">'+t.title+"<\/a>",s!==t.level&&s)for(e=t.level;s<e;e--)i+="<\/li><\/ul><li>";else i+="<\/li>",s||(i+="<\/ul>");a=t.level}return i},o=function(t){var r=n(t),i=t.$("."+r);i.length&&t.undoManager.transact(function(){i.html(e(t))})},t={hasHeaders:function(n){return 0<f(n).length},insertToc:function(t){var i,r,u,f,s=n(t),h=t.$("."+s);u=t;!(f=h).length||0<u.dom.getParents(f[0],".mce-offscreen-selection").length?t.insertContent((r=e(i=t),'<div class="'+i.dom.encode(n(i))+'" contenteditable="false">'+r+"<\/div>")):o(t)},updateToc:o},p=function(n){n.addCommand("mceInsertToc",function(){t.insertToc(n)});n.addCommand("mceUpdateToc",function(){t.updateToc(n)})},w=function(t){var i=t.$,r=n(t);t.on("PreProcess",function(n){var t=i("."+r,n.node);t.length&&(t.removeAttr("contentEditable"),t.find("[contenteditable]").removeAttr("contentEditable"))});t.on("SetContent",function(){var n=i("."+r);n.length&&(n.attr("contentEditable",!1),n.children(":first-child").attr("contentEditable",!0))})},s=function(n){return function(i){var r=i.control;n.on("LoadContent SetContent change",function(){r.disabled(n.readonly||!t.hasHeaders(n))})}},b=function(t){var i;t.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:s(t)});t.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"});t.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:s(t)});t.addContextToolbar((i=t,function(t){return t&&i.dom.is(t,"."+n(i))&&i.getBody().contains(t)}),"tocupdate")};h.add("toc",function(n){p(n);b(n);w(n)})}();!function(){"use strict";var i=function(n){var t=n,r=function(){return t};return{get:r,set:function(n){t=n},clone:function(){return i(r())}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),s=function(n){return{setPatterns:function(t){n.set(t)},getPatterns:function(){return n.get()}}},h=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],c=function(n){return n.textpattern_patterns!==undefined?n.textpattern_patterns:h},l=tinymce.util.Tools.resolve("tinymce.util.Delay"),r=tinymce.util.Tools.resolve("tinymce.util.VK"),a=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=function(n,t){for(var i=0;i<n.length;i++)if(0===t.indexOf(n[i].start)&&(!n[i].end||t.lastIndexOf(n[i].end)===t.length-n[i].end.length))return n[i]},v=function(n,t,i,r){for(var u,o,e,s,h,c=n.sort(function(n,t){return n.start.length>t.start.length?-1:n.start.length<t.start.length?1:0}),f=0;f<c.length;f++)if((u=c[f]).end!==undefined&&(e=u,s=i,h=r,t.substr(s-e.end.length-h,e.end.length)===e.end)&&0<i-r-(o=u).end.length-o.start.length)return u},y=function(n,t,i){var r,e,o,h,l;if(!1!==t.collapsed){var f=t.startContainer,s=f.data,c=!0===i?1:0;if(3===f.nodeType&&(r=v(n,s,t.startOffset,c),r!==undefined&&(e=s.lastIndexOf(r.end,t.startOffset-c),o=s.lastIndexOf(r.start,e-r.end.length),(e=s.indexOf(r.end,o+r.start.length),-1!==o)&&(h=document.createRange(),h.setStart(f,o),h.setEnd(f,e+r.end.length),l=u(n,h.toString()),!(r===undefined||l!==r||f.data.length<=r.start.length+r.end.length)))))return{pattern:r,startOffset:o,endOffset:e}}},f=function(n,i,r){var u=n.selection.getRng(!0),f=y(i,u,r);if(f)return function(n,i,r){var u=t.isArray(r.pattern.format)?r.pattern.format:[r.pattern.format];if(0!==t.grep(u,function(t){var i=n.formatter.get(t);return i&&i[0].inline}).length)return n.undoManager.transact(function(){var t,f,o,e;t=i;f=r.pattern;o=r.endOffset;e=r.startOffset;(t=0<e?t.splitText(e):t).splitText(o-e+f.end.length);t.deleteData(0,f.start.length);t.deleteData(t.data.length-f.end.length,f.end.length);i=t;u.forEach(function(t){n.formatter.apply(t,{},i)})}),i}(n,u.startContainer,f)},p=function(n,t){return f(n,t,!0)},w=function(n,t){return f(n,t,!1)},b=function(n,i){var e,v,h,f,c,y,l,r,p,o,s;if(e=n.selection,v=n.dom,e.isCollapsed()&&(l=v.getParent(e.getStart(),"p"))){for(p=new a(l,l);c=p.next();)if(3===c.nodeType){f=c;break}if(f){if(!(r=u(i,f.data)))return;if(h=(o=e.getRng(!0)).startContainer,s=o.startOffset,f===h&&(s=Math.max(0,s-r.start.length)),t.trim(f.data).length===r.start.length)return;r.format&&(y=n.formatter.get(r.format))&&y[0].block&&(f.deleteData(0,r.start.length),n.formatter.apply(r.format,{},f),o.setStart(h,s),o.collapse(!0),e.setRng(o));r.cmd&&n.undoManager.transact(function(){f.deleteData(0,r.start.length);n.execCommand(r.cmd)})}}},e=function(n,t,i){for(var r=0;r<n.length;r++)if(i(n[r],t))return!0},n={handleEnter:function(n,t){var i,r;(i=w(n,t))&&((r=n.dom.createRng()).setStart(i,i.data.length),r.setEnd(i,i.data.length),n.selection.setRng(r));b(n,t)},handleInlineKey:function(n,t){var i,f,r,e,u;(i=p(n,t))&&(u=n.dom,f=i.data.slice(-1),/[\u00a0 ]/.test(f)&&(i.deleteData(i.data.length-1,1),r=u.doc.createTextNode(f),u.insertAfter(r,i.parentNode),(e=u.createRng()).setStart(r,1),e.setEnd(r,1),n.selection.setRng(e)))},checkCharCode:function(n,t){return e(n,t,function(n,t){return n.charCodeAt(0)===t.charCode})},checkKeyCode:function(n,t){return e(n,t,function(n,t){return n===t.keyCode&&!1===r.modifierPressed(t)})}},k=function(t,i){var u=[",",".",";",":","!","?"],f=[32];t.on("keydown",function(u){13!==u.keyCode||r.modifierPressed(u)||n.handleEnter(t,i.get())},!0);t.on("keyup",function(r){n.checkKeyCode(f,r)&&n.handleInlineKey(t,i.get())});t.on("keypress",function(r){n.checkCharCode(u,r)&&l.setEditorTimeout(t,function(){n.handleInlineKey(t,i.get())})})};o.add("textpattern",function(n){var t=i(c(n.settings));return k(n,t),s(t)})}();!function(){"use strict";var a=tinymce.util.Tools.resolve("tinymce.PluginManager"),v=function(n,t){var i;return n.dom.getParents(n.selection.getStart(),function(n){var r;(r=n.style["forecolor"===t?"color":"background-color"])&&(i=r)}),i},y=function(n){for(var i=[],t=0;t<n.length;t+=2)i.push({text:n[t+1],color:"#"+n[t]});return i},p=function(n,t,i){n.undoManager.transact(function(){n.focus();n.formatter.apply(t,{value:i});n.nodeChanged()})},w=function(n,t){n.undoManager.transact(function(){n.focus();n.formatter.remove(t,{value:null},null,!0);n.nodeChanged()})},b=function(n){n.addCommand("mceApplyTextcolor",function(t,i){p(n,t,i)});n.addCommand("mceRemoveTextcolor",function(t){w(n,t)})},n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),k=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],i=function(n){return n.getParam("textcolor_map",d)},r=function(n){return n.getParam("textcolor_rows",5)},u=function(n){return n.getParam("textcolor_cols",8)},f=function(n){return n.getParam("color_picker_callback",null)},g=function(n){return n.getParam("forecolor_map",i(n))},nt=function(n){return n.getParam("backcolor_map",i(n))},tt=function(n){return n.getParam("forecolor_rows",r(n))},it=function(n){return n.getParam("backcolor_rows",r(n))},e=function(n){return n.getParam("forecolor_cols",u(n))},o=function(n){return n.getParam("backcolor_cols",u(n))},rt=f,ut=function(n){return"function"==typeof f(n)},t=tinymce.util.Tools.resolve("tinymce.util.I18n"),ft=function(i,r,u,f){var h,l,e,a,o,s,v,w=0,c=n.DOM.uniqueId("mcearia"),p=function(n,i){var r="transparent"===n;return'<td class="mce-grid-cell'+(r?" mce-colorbtn-trans":"")+'"><div id="'+c+"-"+w+++'" data-mce-color="'+(n||"")+'" role="option" tabIndex="-1" style="'+(n?"background-color: "+n:"")+'" title="'+t.translate(i)+'">'+(r?"&#215;":"")+"<\/div><\/td>"};for((h=y(u)).push({text:t.translate("No color"),color:"transparent"}),e='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=h.length-1,s=0;s<r;s++){for(e+="<tr>",o=0;o<i;o++)e+=a<(v=s*i+o)?"<td><\/td>":p((l=h[v]).color,l.text);e+="<\/tr>"}if(f){for(e+='<tr><td colspan="'+i+'" class="mce-custom-color-btn"><div id="'+c+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+c+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+t.translate("Custom...")+"<\/button><\/div><\/td><\/tr>",e+="<tr>",o=0;o<i;o++)e+=p("","Custom color");e+="<\/tr>"}return e+"<\/tbody><\/table>"},s=function(n,t){n.style.background=t;n.setAttribute("data-mce-color",t)},h=function(n){return function(t){var i=t.control;i._color?n.execCommand("mceApplyTextcolor",i.settings.format,i._color):n.execCommand("mceRemoveTextcolor",i.settings.format)}},c=function(t,i){return function(r){var f,u=this.parent(),o=v(t,u.settings.format),e=function(n){t.execCommand("mceApplyTextcolor",u.settings.format,n);u.hidePanel();u.color(n)};n.DOM.getParent(r.target,".mce-custom-color-btn")&&(u.hidePanel(),rt(t).call(t,function(n){for(var f,o=u.panel.getEl().getElementsByTagName("table")[0],r=k.map(o.rows[o.rows.length-1].childNodes,function(n){return n.firstChild}),t=0;t<r.length&&(f=r[t]).getAttribute("data-mce-color");t++);if(t===i)for(t=0;t<i-1;t++)s(r[t],r[t+1].getAttribute("data-mce-color"));s(f,n);e(n)},o));(f=r.target.getAttribute("data-mce-color"))?(this.lastId&&n.DOM.get(this.lastId).setAttribute("aria-selected","false"),r.target.setAttribute("aria-selected",!0),this.lastId=r.target.id,"transparent"===f?(t.execCommand("mceRemoveTextcolor",u.settings.format),u.hidePanel(),u.resetColor()):e(f)):null!==f&&u.hidePanel()}},l=function(n,t){return function(){var i=t?e(n):o(n),r=t?tt(n):it(n),u=t?g(n):nt(n),f=ut(n);return ft(i,r,u,f)}},et=function(n){n.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:l(n,!0),onclick:c(n,e(n))},onclick:h(n)});n.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:l(n,!1),onclick:c(n,o(n))},onclick:h(n)})};a.add("textcolor",function(n){b(n);et(n)})}();!function(){"use strict";var y=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(n){return function(){return n}},p=(u(!1),u(!0),function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}}),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),f=tinymce.util.Tools.resolve("tinymce.util.XHR"),w=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),b=function(n){return n.getParam("template_cdate_classes","cdate")},k=function(n){return n.getParam("template_mdate_classes","mdate")},d=function(n){return n.getParam("template_selected_content_classes","selcontent")},g=function(n){return n.getParam("template_preview_replace_values")},e=function(n){return n.getParam("template_replace_values")},nt=function(n){return n.templates},tt=function(n){return n.getParam("template_cdate_format",n.getLang("template.cdate_format"))},o=function(n){return n.getParam("template_mdate_format",n.getLang("template.mdate_format"))},it=function(n){return n.getParam("template_popup_width",600)},rt=function(n){return Math.min(w.DOM.getViewPort().h,n.getParam("template_popup_height",500))},t=function(n,t){if((n=""+n).length<t)for(var i=0;i<t-n.length;i++)n="0"+n;return n},i=function(n,i,r){var u="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),e="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),o="January February March April May June July August September October November December".split(" ");return r=r||new Date,i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+r.getFullYear())).replace("%y",""+r.getYear())).replace("%m",t(r.getMonth()+1,2))).replace("%d",t(r.getDate(),2))).replace("%H",""+t(r.getHours(),2))).replace("%M",""+t(r.getMinutes(),2))).replace("%S",""+t(r.getSeconds(),2))).replace("%I",""+((r.getHours()+11)%12+1))).replace("%p",r.getHours()<12?"AM":"PM")).replace("%B",""+n.translate(o[r.getMonth()]))).replace("%b",""+n.translate(e[r.getMonth()]))).replace("%A",""+n.translate(f[r.getDay()]))).replace("%a",""+n.translate(u[r.getDay()]))).replace("%%","%")},s=function(t,i,r){return n.each(r,function(n,t){"function"==typeof n&&(n=n(t));i=i.replace(new RegExp("\\{\\$"+t+"\\}","g"),n)}),i},h=function(t,i){var u=t.dom,r=e(t);n.each(u.select("*",i),function(t){n.each(r,function(n,i){u.hasClass(t,i)&&"function"==typeof r[i]&&r[i](t)})})},r=function(n,t){return new RegExp("\\b"+t+"\\b","g").test(n.className)},c=function(n,t){return function(){var i=nt(n);"function"!=typeof i?"string"==typeof i?f.send({url:i,success:function(n){t(JSON.parse(n))}}):t(i):i(t)}},ut=s,ft=h,l=function(t,u,f){var c,a,l=t.dom,v=t.selection.getContent();f=s(0,f,e(t));c=l.create("div",null,f);(a=l.select(".mceTmpl",c))&&0<a.length&&(c=l.create("div",null)).appendChild(a[0].cloneNode(!0));n.each(l.select("*",c),function(n){r(n,b(t).replace(/\s+/g,"|"))&&(n.innerHTML=i(t,tt(t)));r(n,k(t).replace(/\s+/g,"|"))&&(n.innerHTML=i(t,o(t)));r(n,d(t).replace(/\s+/g,"|"))&&(n.innerHTML=v)});h(t,c);t.execCommand("mceInsertContent",!1,c.innerHTML);t.addVisual()},et=function(n){n.addCommand("mceInsertTemplate",p(l,n))},ot=function(t){t.on("PreProcess",function(r){var u=t.dom,f=o(t);n.each(u.select("div",r.node),function(r){u.hasClass(r,"mceTmpl")&&(n.each(u.select("*",r),function(n){u.hasClass(n,t.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(n.innerHTML=i(t,f))}),ft(t,r))})})},a=function(t,i,r){var e,u,f;-1===r.indexOf("<html>")&&(e="",n.each(t.contentCSS,function(n){e+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(n)+'">'}),u=t.settings.body_class||"",-1!==u.indexOf("=")&&(u=(u=t.getParam("body_class","","hash"))[t.id]||""),r="<!DOCTYPE html><html><head>"+e+'<\/head><body class="'+u+'">'+r+"<\/body><\/html>");r=ut(t,r,g(t));f=i.find("iframe")[0].getEl().contentWindow.document;f.open();f.write(r);f.close()},st=function(t,i){var r,u,e=[],o;i&&0!==i.length?(n.each(i,function(n){e.push({selected:!e.length,text:n.title,value:{url:n.url,content:n.content,description:n.description}})}),(r=t.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:e,onselect:function(n){var i=n.control.value();i.url?f.send({url:i.url,success:function(n){a(t,r,u=n)}}):(u=i.content,a(t,r,u));r.find("#description")[0].text(n.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){l(t,!1,u)},minWidth:it(t),minHeight:rt(t)})).find("listbox")[0].fire("select")):(o=t.translate("No templates defined."),t.notificationManager.open({text:o,type:"info"}))},v=function(n){return function(t){st(n,t)}},ht=function(n){n.addButton("template",{title:"Insert template",onclick:c(n.settings,v(n))});n.addMenuItem("template",{text:"Template",onclick:c(n.settings,v(n)),icon:"template",context:"insert"})};y.add("template",function(n){ht(n);et(n);ot(n)})}();!function(){"use strict";function fa(n,i,r,u,f){return n(r,u)?t.some(r):b.isFunction(f)&&f(r)?t.none():i(r,u,f)}function yo(){return{up:n.constant({selector:h.ancestor,closest:h.closest,predicate:kt.ancestor,all:e.parents}),down:n.constant({selector:nt.descendants,predicate:du.descendants}),styles:n.constant({get:c.get,getRaw:c.getRaw,set:c.set,remove:c.remove}),attrs:n.constant({get:u.get,set:u.set,remove:u.remove,copyTo:function(n,t){var i=u.clone(n);u.setAll(t,i)}}),insert:n.constant({before:v.before,after:v.after,afterAll:ci.after,append:v.append,appendAll:ci.append,prepend:v.prepend,wrap:v.wrap}),remove:n.constant({unwrap:ut.unwrap,remove:ut.remove}),create:n.constant({nu:r.fromTag,clone:function(n){return r.fromDom(n.dom().cloneNode(!1))},text:r.fromText}),query:n.constant({comparePosition:function(n,t){return n.dom().compareDocumentPosition(t.dom())},prevSibling:e.prevSibling,nextSibling:e.nextSibling}),property:n.constant({children:e.children,name:o.name,parent:e.parent,isText:o.isText,isComment:o.isComment,isElement:o.isElement,getText:li.get,setText:li.set,isBoundary:function(n){return!!o.isElement(n)&&("body"===o.name(n)||i.contains(stt,o.name(n)))},isEmptyTag:function(n){return!!o.isElement(n)&&i.contains(["br","img","hr","input"],o.name(n))}}),eq:s.eq,is:s.is}}function vv(n,t){var r=function(i){var r=t(i),u;return r<=0||null===r?(u=c.get(i,n),parseFloat(u)||0):r},u=function(n,t){return i.foldl(t,function(t,i){var r=c.get(n,i),u=r===undefined?0:parseInt(r,10);return isNaN(u)?t:t+u},0)};return{set:function(t,i){if(!b.isNumber(i)&&!i.match(/^[0-9]+$/))throw n+".set accepts only positive integer values. Value was "+i;var r=t.dom();hi(r)&&(r.style[n]=i+"px")},get:r,getOuter:r,aggregate:u,max:function(n,t,i){var r=u(n,i);return r<t?t-r:0}}}function hy(n){var t=function(t){return n(t).isRtl()?sy.rtl:sy.ltr};return{delta:function(n,i){return t(i).delta(n,i)},edge:function(n){return t(n).edge(n)},positions:function(n,i){return t(i).positions(n,i)}}}function yb(n,t,i,r){function f(n,t,i){i&&e.setAttrib(n,t,i)}var e=n.dom,u;ni(n,r);u=r.control.rootControl.toJSON();n.undoManager.transact(function(){p.each(t,function(t){var a,v,y,o,h,c,r,l,s;f(t,"scope",u.scope);f(t,"style",u.style);f(t,"class",u["class"]);a=t;v="height";(y=lt(u.height))&&e.setStyle(a,v,y);u.type!==t.parentNode.nodeName.toLowerCase()&&(o=n.dom,h=t,c=u.type,r=o.getParent(h,"table"),l=h.parentNode,(s=o.select(c,r)[0])||(s=o.create(c),r.firstChild?"CAPTION"===r.firstChild.nodeName?o.insertAfter(s,r.firstChild):r.insertBefore(s,r.firstChild):r.appendChild(s)),s.appendChild(h),l.hasChildNodes()||o.remove(l));u.align!==i.align&&(th(n,t),nh(n,t,u.align))});n.focus()})}function pb(n,t,i,r){if("TD"===t.tagName||"TH"===t.tagName)n.setStyle(t,i,r);else if(t.children)for(var u=0;u<t.children.length;u++)pb(n,t.children[u],i,r)}function at(n){var r=l.immutable.apply(null,n),t=[];return{bind:function(n){if(n===undefined)throw"Event bind error: undefined handler";t.push(n)},unbind:function(n){t=i.filter(t,function(t){return t!==n})},trigger:function(){var n=r.apply(null,arguments);i.each(t,function(t){t(n)})}}}function not(){var n=t.none(),i=sr.create({move:at(["info"])});return{onEvent:function(r,u){u.extract(r).each(function(r){var e,f,o;(e=u,f=r,o=n.map(function(n){return e.compare(n,f)}),n=t.some(f),o).each(function(n){i.trigger.move(n)})})},reset:function(){n=t.none()},events:i.registry}}function tot(){var r={onEvent:function(){},reset:n.noop},i=not(),t=r;return{on:function(){t.reset();t=i},off:function(){t.reset();t=r},isOn:function(){return t===i},onEvent:function(n,i){t.onEvent(n,i)},events:i.events}}function fot(){var i,r=sr.create({drag:at(["xDelta","yDelta","target"])}),n=t.none(),u={mutate:function(n,t){i.trigger.drag(n,t)},events:(i=sr.create({drag:at(["xDelta","yDelta"])})).registry};return u.events.drag.bind(function(t){n.each(function(n){r.trigger.drag(t.xDelta(),t.yDelta(),n)})}),{assign:function(i){n=t.some(i)},get:function(){return n},mutate:u.mutate,events:r.registry}}function sot(i,r){var l=sf.height,f=function(i,r,f){var l=fot(),e=uot.transform(l,{}),p=t.none(),a=function(n,i){return t.from(u.get(n,i))},y;l.events.drag.bind(function(n){a(n.target(),"data-row").each(function(){var t=wt.getInt(n.target(),"top");c.set(n.target(),"top",t+n.yDelta()+"px")});a(n.target(),"data-column").each(function(){var t=wt.getInt(n.target(),"left");c.set(n.target(),"left",t+n.xDelta()+"px")})});y=function(n,t){return wt.getInt(n,t)-parseInt(u.get(n,"data-initial-"+t),10)};e.events.stop.bind(function(){l.get().each(function(n){p.each(function(t){a(n,"data-row").each(function(i){var r=y(n,"top");u.remove(n,"data-initial-top");v.trigger.adjustHeight(t,r,parseInt(i,10))});a(n,"data-column").each(function(i){var r=y(n,"left");u.remove(n,"data-initial-left");v.trigger.adjustWidth(t,r,parseInt(i,10))});yt.refresh(i,t,f,r)})})});var w=function(n,t){v.trigger.startAdjust();l.assign(n);u.set(n,"data-initial-"+t,parseInt(c.get(n,t),10));et.add(n,oot);c.set(n,"opacity","0.2");e.go(i.parent())},k=hr.bind(i.parent(),"mousedown",function(n){yt.isRowBar(n.target())&&w(n.target(),"top");yt.isColBar(n.target())&&w(n.target(),"left")}),b=function(n){return s.eq(n,i.view())},d=hr.bind(i.view(),"mouseover",function(n){"table"===o.name(n.target())||eot.closest(n.target(),"table",b)?(p="table"===o.name(n.target())?t.some(n.target()):h.ancestor(n.target(),"table",b)).each(function(n){yt.refresh(i,n,f,r)}):tr.inBody(n.target())&&yt.destroy(i)}),v=sr.create({adjustHeight:at(["table","delta","row"]),adjustWidth:at(["table","delta","column"]),startAdjust:at([])});return{destroy:function(){k.unbind();d.unbind();e.destroy();yt.destroy(i)},refresh:function(n){yt.refresh(i,n,f,r)},on:e.on,off:e.off,hideBars:n.curry(yt.hide,i),showBars:n.curry(yt.show,i),events:v.registry}}(i,r,l),e=sr.create({beforeResize:at(["table"]),afterResize:at(["table"]),startDrag:at([])});return f.events.adjustHeight.bind(function(n){e.trigger.beforeResize(n.table());var t=l.delta(n.delta(),n.table());yft(n.table(),t,n.row(),l);e.trigger.afterResize(n.table())}),f.events.startAdjust.bind(function(){e.trigger.startDrag()}),f.events.adjustWidth.bind(function(n){e.trigger.beforeResize(n.table());var t=r.delta(n.delta(),n.table());vft(n.table(),t,n.column(),r);e.trigger.afterResize(n.table())}),{on:f.on,off:f.off,hideBars:f.hideBars,showBars:f.showBars,destroy:f.destroy,events:e.registry}}function nd(t){return{elementFromPoint:function(n,i){return r.fromPoint(r.fromDom(t.document),n,i)},getRect:function(n){return n.dom().getBoundingClientRect()},getRangedRect:function(i,r,u,f){var e=vt.exact(i,r,u,f);return kst(t,e).map(function(t){return st.map(t,n.apply)})},getSelection:function(){return vst(t).map(function(n){return gk(t,n)})},fromSitus:function(n){var i=vt.relative(n.start(),n.finish());return gk(t,i)},situsFromPoint:function(i,r){return dst(t,i,r).map(function(t){return{start:n.constant(g.on(t.start(),t.soffset())),finish:n.constant(g.on(t.finish(),t.foffset()))}})},clearSelection:function(){bst(t)},setSelection:function(n){ast(t,n.start(),n.soffset(),n.finish(),n.foffset())},setRelativeSelection:function(n,i){yst(t,n,i)},selectContents:function(n){wst(t,n)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){return oht(r.fromDom(t.document)).top()},scrollBy:function(n,i){sht(n,i,r.fromDom(t.document))}}}function cct(i,u){var o=l.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),e=t.none(),f=hct.byAttr(vi);return i.on("init",function(){var h=i.getWin(),c=wi(i),a=gw(i),l=bd.mouse(h,c,a,f),v=bd.keyboard(h,c,a,f),y=function(n,t){!0===n.raw().shiftKey&&(t.kill()&&n.kill(),t.selection().each(function(n){var t=vt.relative(n.start(),n.finish()),r=lu.asLtrRange(h,t);i.selection.setRng(r)}))},p=function(n){var t=s(n);if(t.raw().shiftKey&&ht.isNavigation(t.raw().which)){var u=i.selection.getRng(),f=r.fromDom(u.startContainer),e=r.fromDom(u.endContainer);v.keyup(t,f,u.startOffset,e,u.endOffset).each(function(n){y(t,n)})}},w=function(n){var f=s(n);u().each(function(n){n.hideBars()});var t=i.selection.getRng(),e=r.fromDom(i.selection.getStart()),o=r.fromDom(t.startContainer),h=r.fromDom(t.endContainer),c=ds.directionAt(e).isRtl()?ht.rtl:ht.ltr;v.keydown(f,o,t.startOffset,h,t.endOffset,c).each(function(n){y(f,n)});u().each(function(n){n.showBars()})},b=function(n){return n.hasOwnProperty("x")&&n.hasOwnProperty("y")},s=function(t){var f=r.fromDom(t.target),i=function(){t.stopPropagation()},u=function(){t.preventDefault()},e=n.compose(u,i);return{target:n.constant(f),x:n.constant(b(t)?t.x:null),y:n.constant(b(t)?t.y:null),stop:i,prevent:u,kill:e,raw:n.constant(t)}},d=function(n){return 0===n.button},g=function(n){d(n)&&dh(n)&&l.mousedown(s(n))},nt=function(n){var t;((t=n).buttons===undefined||0!=(1&t.buttons))&&dh(n)&&l.mouseover(s(n))},tt=function(n){d(n)&&dh(n)&&l.mouseup(s(n))};i.on("mousedown",g);i.on("mouseover",nt);i.on("mouseup",tt);i.on("keyup",p);i.on("keydown",w);i.on("nodechange",function(){var t=i.selection,u=r.fromDom(t.getStart()),e=r.fromDom(t.getEnd());rf.sharedOne(k.table,[u,e]).fold(function(){f.clear(c)},n.noop)});e=t.some(o({mousedown:g,mouseover:nt,mouseup:tt,keyup:p,keydown:w}))}),{clear:f.clear,destroy:function(){e.each(function(){})}}}var gh,nc,tc,ee,ic,rc,kd=tinymce.util.Tools.resolve("tinymce.PluginManager"),oe=function(n){return function(){return n}},dd=oe(!1),gd=oe(!0),n={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:oe,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:dd,always:gd},kr=n.never,se=n.always,oi=function(){return he},he=(ee={fold:function(n){return n()},is:kr,isSome:kr,isNone:se,getOr:tc=function(n){return n},getOrThunk:nc=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:tc,orThunk:nc,map:oi,ap:oi,each:function(){},bind:oi,flatten:oi,exists:kr,forall:se,filter:oi,equals:gh=function(n){return n.isNone()},equals_:gh,toArray:function(){return[]},toString:n.constant("none()")},Object.freeze&&Object.freeze(ee),ee),pu=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:se,isNone:kr,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:function(t){return pu(t(n))},ap:function(t){return t.fold(oi,function(t){return pu(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:he},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(kr,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},t={some:pu,none:oi,from:function(n){return null===n||n===undefined?he:pu(n)}},ti=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},b={isString:ti("string"),isObject:ti("object"),isArray:ti("array"),isNull:ti("null"),isBoolean:ti("boolean"),isUndefined:ti("undefined"),isFunction:ti("function"),isNumber:ti("number")},uc=(ic=Array.prototype.indexOf)===undefined?function(n,t){return ng(n,t)}:function(n,t){return ic.call(n,t)},fc=function(n,t){return-1<uc(n,t)},ec=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},oc=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},sc=function(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i,n)},hc=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},cc=function(n,i){for(var r=0,u=n.length;r<u;r++)if(i(n[r],r,n))return t.some(r);return t.none()},ng=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},tg=Array.prototype.push,lc=function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);tg.apply(i,n[t])}return i},ac=function(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i,n))return!1;return!0},ce=Array.prototype.slice,ig=b.isFunction(Array.from)?Array.from:function(n){return ce.call(n)},i={map:ec,each:oc,eachr:sc,partition:function(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i,n)?u:f).push(r);return{pass:u,fail:f}},filter:hc,groupBy:function(n,t){var f,e;if(0===n.length)return[];for(var o=t(n[0]),r=[],i=[],u=0,s=n.length;u<s;u++)f=n[u],e=t(f),e!==o&&(r.push(i),i=[]),o=e,i.push(f);return 0!==i.length&&r.push(i),r},indexOf:function(n,i){var r=uc(n,i);return-1===r?t.none():t.some(r)},foldr:function(n,t,i){return sc(n,function(n){i=t(i,n)}),i},foldl:function(n,t,i){return oc(n,function(n){i=t(i,n)}),i},find:function(n,i){for(var u,r=0,f=n.length;r<f;r++)if(u=n[r],i(u,r,n))return t.some(u);return t.none()},findIndex:cc,flatten:lc,bind:function(n,t){var i=ec(n,t);return lc(i)},forall:ac,exists:function(n,t){return cc(n,t).isSome()},contains:fc,equal:function(n,t){return n.length===t.length&&ac(n,function(n,i){return n===t[i]})},reverse:function(n){var t=ce.call(n,0);return t.reverse(),t},chunk:function(n,t){for(var u,r=[],i=0;i<n.length;i+=t)u=n.slice(i,i+t),r.push(u);return r},difference:function(n,t){return hc(n,function(n){return!fc(t,n)})},mapToObject:function(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u},pure:function(n){return[n]},sort:function(n,t){var i=ce.call(n,0);return i.sort(t),i},range:function(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r},head:function(n){return 0===n.length?t.none():t.some(n[0])},last:function(n){return 0===n.length?t.none():t.some(n[n.length-1])},from:ig},le=(rc=Object.keys)===undefined?function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}:rc,wu=function(n,t){for(var r,u=le(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},vc=function(n,t){var i={};return wu(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},yc=function(n,t){var i=[];return wu(n,function(n,r){i.push(t(n,r))}),i},pc=function(n){return yc(n,function(n){return n})},st={bifilter:function(n,t){var i={},r={};return wu(n,function(n,u){(t(n,u)?i:r)[u]=n}),{t:i,f:r}},each:wu,map:function(n,t){return vc(n,function(n,i,r){return{k:i,v:t(n,i,r)}})},mapToArray:yc,tupleMap:vc,find:function(n,i){for(var u,f,e=le(n),r=0,o=e.length;r<o;r++)if(u=e[r],f=n[u],i(f,u,n))return t.some(f);return t.none()},keys:le,values:pc,size:function(n){return pc(n).length}},dr=function(n){return n.slice(0).sort()},wc=function(n,t){throw new Error("All required keys ("+dr(n).join(", ")+") were not specified. Specified keys were: "+dr(t).join(", ")+".");},bc=function(n){throw new Error("Unsupported keys for object: "+dr(n).join(", "));},ae=function(n,t){if(!b.isArray(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");i.each(t,function(t){if(!b.isString(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.");})},rg=function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+dr(n).join(", ")+") were not.");},kc=function(n){var t=dr(n);i.find(t,function(n,i){return i<t.length-1&&n===t[i+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].");})},l={immutable:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(){for(var f,r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return f={},i.each(t,function(t,i){f[t]=n.constant(r[i])}),f}},immutableBag:function(r,u){var f=r.concat(u);if(0===f.length)throw new Error("You must specify at least one required or optional field.");return ae("required",r),ae("optional",u),kc(f),function(e){var s=st.keys(e),h,o;return i.forall(r,function(n){return i.contains(s,n)})||wc(r,s),h=i.filter(s,function(n){return!i.contains(f,n)}),0<h.length&&bc(h),o={},i.each(r,function(t){o[t]=n.constant(e[t])}),i.each(u,function(i){o[i]=n.constant(Object.prototype.hasOwnProperty.call(e,i)?t.some(e[i]):t.none())}),o}}},ug=l.immutable("width","height"),fg=l.immutable("rows","columns"),eg=l.immutable("row","column"),og=l.immutable("x","y"),sg=l.immutable("element","rowspan","colspan"),hg=l.immutable("element","rowspan","colspan","isNew"),a={dimensions:ug,grid:fg,address:eg,coords:og,extended:l.immutable("element","rowspan","colspan","row","column"),detail:sg,detailnew:hg,rowdata:l.immutable("element","cells","section"),elementnew:l.immutable("element","isNew"),rowdatanew:l.immutable("element","cells","section","isNew"),rowcells:l.immutable("cells","section"),rowdetails:l.immutable("details","section"),bounds:l.immutable("startRow","startCol","finishRow","finishCol")},gr=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:n.constant(t)}},r={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return gr(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return gr(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return gr(i)},fromDom:gr,fromPoint:function(n,i,r){return t.from(n.dom().elementFromPoint(i,r)).map(gr)}},cg=8,dc=9,gc=1,nl=gc,lg=dc,tl=function(n){return n.nodeType!==nl&&n.nodeType!==lg||0===n.childElementCount},tt={all:function(n,t){var u=t===undefined?document:t.dom();return tl(u)?[]:i.map(u.querySelectorAll(n),r.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==nl)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(n,i){var u=i===undefined?document:i.dom();return tl(u)?t.none():t.from(u.querySelector(n)).map(r.fromDom)}},il=function(n,t){for(var i=[],u=function(n){return i.push(n),t(n)},r=t(n);(r=r.bind(u)).isSome(););return i},ag="undefined"!=typeof window?window:Function("return this;")(),vg=function(n,t){for(var i=t!==undefined&&null!==t?t:ag,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i},yg=function(n,t){var i=n.split(".");return vg(i,t)},pg=function(n,t){var i=yg(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i},wg=function(){return pg("Node")},bg=function(n,t,i){return 0!=(n.compareDocumentPosition(t)&i)},kg=function(n,t){return bg(n,t,wg().DOCUMENT_POSITION_CONTAINED_BY)},di=function(n){var t,i=!1;return function(){return i||(i=!0,t=n.apply(null,arguments)),t}},dg=function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},ve(i(1),i(2))):{major:0,minor:0}},rl=function(){return ve(0,0)},ve=function(n,t){return{major:n,minor:t}},bu={nu:ve,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?rl():dg(n,i)},unknown:rl},ul="Firefox",gi=function(n,t){return function(){return t===n}},fl=function(n){var t=n.current;return{current:t,version:n.version,isEdge:gi("Edge",t),isChrome:gi("Chrome",t),isIE:gi("IE",t),isOpera:gi("Opera",t),isFirefox:gi(ul,t),isSafari:gi("Safari",t)}},el={unknown:function(){return fl({current:undefined,version:bu.unknown()})},nu:fl,edge:n.constant("Edge"),chrome:n.constant("Chrome"),ie:n.constant("IE"),opera:n.constant("Opera"),firefox:n.constant(ul),safari:n.constant("Safari")},ol="Windows",sl="Android",hl="Solaris",cl="FreeBSD",si=function(n,t){return function(){return t===n}},ll=function(n){var t=n.current;return{current:t,version:n.version,isWindows:si(ol,t),isiOS:si("iOS",t),isAndroid:si(sl,t),isOSX:si("OSX",t),isLinux:si("Linux",t),isSolaris:si(hl,t),isFreeBSD:si(cl,t)}},al={unknown:function(){return ll({current:undefined,version:bu.unknown()})},nu:ll,windows:n.constant(ol),ios:n.constant("iOS"),android:n.constant(sl),linux:n.constant("Linux"),osx:n.constant("OSX"),solaris:n.constant(hl),freebsd:n.constant(cl)},vl=function(n,t){var r=String(t).toLowerCase();return i.find(n,function(n){return n.search(r)})},gg=function(n,t){return vl(n,t).map(function(n){var i=bu.detect(n.versionRegexes,t);return{current:n.name,version:i}})},nn=function(n,t){return vl(n,t).map(function(n){var i=bu.detect(n.versionRegexes,t);return{current:n.name,version:i}})},tn=function(n,t){return t+n},rn=function(n,t){return n+t},un=function(n,t){return n.substring(t)},fn=function(n,t){return n.substring(0,n.length-t)},en=function(n){return""===n?t.none():t.some(n.substr(0,1))},on=function(n){return""===n?t.none():t.some(n.substring(1))},yl=function(n,t,i){return""===t||!(n.length<t.length)&&n.substr(i,i+t.length)===t},ye=function(n,t){return yl(n,t,0)},pe=function(n,t){return yl(n,t,n.length-t.length)},it={supplant:function(n,t){return n.replace(/\${([^{}]*)}/g,function(n,i){var r,u=t[i];return"string"==(r=typeof u)||"number"===r?u:n})},startsWith:ye,removeLeading:function(n,t){return ye(n,t)?un(n,t.length):n},removeTrailing:function(n,t){return pe(n,t)?fn(n,t.length):n},ensureLeading:function(n,t){return ye(n,t)?n:tn(n,t)},ensureTrailing:function(n,t){return pe(n,t)?n:rn(n,t)},endsWith:pe,contains:function(n,t){return-1!==n.indexOf(t)},trim:function(n){return n.replace(/^\s+|\s+$/g,"")},lTrim:function(n){return n.replace(/^\s+/g,"")},rTrim:function(n){return n.replace(/\s+$/g,"")},capitalize:function(n){return en(n).bind(function(t){return on(n).map(function(n){return t.toUpperCase()+n})}).getOr(n)}},we=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ii=function(n){return function(t){return it.contains(t,n)}},sn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return it.contains(n,"edge/")&&it.contains(n,"chrome")&&it.contains(n,"safari")&&it.contains(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,we],search:function(n){return it.contains(n,"chrome")&&!it.contains(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return it.contains(n,"msie")||it.contains(n,"trident")}},{name:"Opera",versionRegexes:[we,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ii("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ii("firefox")},{name:"Safari",versionRegexes:[we,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(it.contains(n,"safari")||it.contains(n,"mobile/"))&&it.contains(n,"applewebkit")}}],hn=[{name:"Windows",search:ii("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return it.contains(n,"iphone")||it.contains(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ii("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ii("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ii("linux"),versionRegexes:[]},{name:"Solaris",search:ii("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ii("freebsd"),versionRegexes:[]}],pl={browsers:n.constant(sn),oses:n.constant(hn)},cn=function(t){var i,o,r,u,s,h,c,f,e,l,a,p=pl.browsers(),w=pl.oses(),v=gg(p,t).fold(el.unknown,el.nu),y=nn(w,t).fold(al.unknown,al.nu);return{browser:v,os:y,deviceType:(o=v,r=t,u=(i=y).isiOS()&&!0===/ipad/i.test(r),s=i.isiOS()&&!u,h=i.isAndroid()&&3===i.version.major,c=i.isAndroid()&&4===i.version.major,f=u||h||c&&!0===/mobile/i.test(r),e=i.isiOS()||i.isAndroid(),l=e&&!f,a=o.isSafari()&&i.isiOS()&&!1===/safari/i.test(r),{isiPad:n.constant(u),isiPhone:n.constant(s),isTablet:n.constant(f),isPhone:n.constant(l),isTouch:n.constant(e),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:n.constant(a)})}},nr={detect:di(function(){var n=navigator.userAgent;return cn(n)})},wl=function(n,t){return n.dom()===t.dom()},ln=nr.detect().browser.isIE()?function(n,t){return kg(n.dom(),t.dom())}:function(n,t){var i=n.dom(),r=t.dom();return i!==r&&i.contains(r)},s={eq:wl,isEqualNode:function(n,t){return n.dom().isEqualNode(t.dom())},member:function(t,r){return i.exists(r,n.curry(wl,t))},contains:ln,is:tt.is},bl=function(n){return r.fromDom(n.dom().ownerDocument)},be=function(n){var i=n.dom();return t.from(i.parentNode).map(r.fromDom)},kl=function(n){var i=n.dom();return t.from(i.previousSibling).map(r.fromDom)},dl=function(n){var i=n.dom();return t.from(i.nextSibling).map(r.fromDom)},ku=function(n){var t=n.dom();return i.map(t.childNodes,r.fromDom)},ke=function(n,i){var u=n.dom().childNodes;return t.from(u[i]).map(r.fromDom)},gl=l.immutable("element","offset"),e={owner:bl,defaultView:function(n){var t=n.dom().ownerDocument.defaultView;return r.fromDom(t)},documentElement:function(n){var t=bl(n);return r.fromDom(t.dom().documentElement)},parent:be,findIndex:function(n){return be(n).bind(function(t){var r=ku(t);return i.findIndex(r,function(t){return s.eq(n,t)})})},parents:function(t,i){for(var f,e,s=b.isFunction(i)?i:n.constant(!1),u=t.dom(),o=[];null!==u.parentNode&&u.parentNode!==undefined;){if(f=u.parentNode,e=r.fromDom(f),o.push(e),!0===s(e))break;u=f}return o},siblings:function(n){return be(n).map(ku).map(function(t){return i.filter(t,function(t){return!s.eq(n,t)})}).getOr([])},prevSibling:kl,offsetParent:function(n){var i=n.dom();return t.from(i.offsetParent).map(r.fromDom)},prevSiblings:function(n){return i.reverse(il(n,kl))},nextSibling:dl,nextSiblings:function(n){return il(n,dl)},children:ku,child:ke,firstChild:function(n){return ke(n,0)},lastChild:function(n){return ke(n,n.dom().childNodes.length-1)},childNodesCount:function(n){return n.dom().childNodes.length},hasChildNodes:function(n){return n.dom().hasChildNodes()},leaf:function(n,t){var i=ku(n);return 0<i.length&&t<i.length?gl(i[t],0):gl(n,t)}},de=function(n,t,r){return i.bind(e.children(n),function(n){return tt.is(n,t)?r(n)?[n]:[]:de(n,t,r)})},nu={firstLayer:function(t,i){return de(t,i,n.constant(!0))},filterFirstLayer:de},na=function(n){return n.dom().nodeName.toLowerCase()},ge=function(n){return n.dom().nodeType},no=function(n){return function(t){return ge(t)===n}},an=no(gc),vn=no(3),yn=no(dc),o={name:na,type:ge,value:function(n){return n.dom().nodeValue},isElement:an,isText:vn,isDocument:yn,isComment:function(n){return ge(n)===cg||"#comment"===na(n)}},ta=function(n,t,i){if(!(b.isString(i)||b.isBoolean(i)||b.isNumber(i)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")},ia=function(n,t,i){ta(n.dom(),t,i)},ra=function(n,t){var i=n.dom().getAttribute(t);return null===i?undefined:i},to=function(n,t){var i=n.dom();return!(!i||!i.hasAttribute)&&i.hasAttribute(t)},u={clone:function(n){return i.foldl(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:ia,setAll:function(n,t){var i=n.dom();st.each(t,function(n,t){ta(i,t,n)})},get:ra,has:to,remove:function(n,t){n.dom().removeAttribute(t)},hasNone:function(n){var t=n.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(n,t,r){o.isElement(n)&&o.isElement(t)&&i.each(r,function(i){var f,u,r;u=t;to(f=n,r=i)&&!to(u,r)&&ia(u,r,ra(f,r))})}},pn=di(function(){return ua(r.fromDom(document))}),ua=function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return r.fromDom(t)},tr={body:pn,getBody:ua,inBody:function(n){var t=o.isText(n)?n.dom().parentNode:n.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)}},io=function(n,t){var r=[];return i.each(e.children(n),function(n){t(n)&&(r=r.concat([n]));r=r.concat(io(n,t))}),r},du={all:function(n){return io(tr.body(),n)},ancestors:function(n,t,r){return i.filter(e.parents(n,r),t)},siblings:function(n,t){return i.filter(e.siblings(n),t)},children:function(n,t){return i.filter(e.children(n),t)},descendants:io},nt={all:function(n){return tt.all(n)},ancestors:function(n,t,i){return du.ancestors(n,function(n){return tt.is(n,t)},i)},siblings:function(n,t){return du.siblings(n,function(n){return tt.is(n,t)})},children:function(n,t){return du.children(n,function(n){return tt.is(n,t)})},descendants:function(n,t){return tt.all(t,n)}},gu,tu,ro,uo,ea,oa=function(i,u,f){for(var o,e=i.dom(),s=b.isFunction(f)?f:n.constant(!1);e.parentNode;){if(e=e.parentNode,o=r.fromDom(e),u(o))return t.some(o);if(s(o))break}return t.none()},sa=function(t,u){return i.find(t.dom().childNodes,n.compose(u,r.fromDom)).map(r.fromDom)},ha=function(n,i){var u=function(n){for(var e,f=0;f<n.childNodes.length;f++){if(i(r.fromDom(n.childNodes[f])))return t.some(r.fromDom(n.childNodes[f]));if(e=u(n.childNodes[f]),e.isSome())return e}return t.none()};return u(n.dom())},kt={first:function(n){return ha(tr.body(),n)},ancestor:oa,closest:function(n,t,i){return fa(function(n){return t(n)},oa,n,t,i)},sibling:function(n,i){var u=n.dom();return u.parentNode?sa(r.fromDom(u.parentNode),function(t){return!s.eq(n,t)&&i(t)}):t.none()},child:sa,descendant:ha},ca=function(n,t,i){return kt.ancestor(n,function(n){return tt.is(n,t)},i)},h={first:function(n){return tt.one(n)},ancestor:ca,sibling:function(n,t){return kt.sibling(n,function(n){return tt.is(n,t)})},child:function(n,t){return kt.child(n,function(n){return tt.is(n,t)})},descendant:function(n,t){return tt.one(t,n)},closest:function(n,t,i){return fa(tt.is,ca,n,t,i)}},fo=function(r,u,f){var e=f!==undefined?f:n.constant(!1);return e(u)?t.none():i.contains(r,o.name(u))?t.some(u):h.ancestor(u,r.join(","),function(n){return tt.is(n,"table")||e(n)})},la=function(n,t){return e.parent(t).map(function(t){return nt.children(t,n)})},wn=n.curry(la,"th,td"),bn=n.curry(la,"tr"),eo=function(n,t){return parseInt(u.get(n,t),10)},k={cell:function(n,t){return fo(["td","th"],n,t)},firstCell:function(n){return h.descendant(n,"th,td")},cells:function(n){return nu.firstLayer(n,"th,td")},neighbourCells:wn,table:function(n,t){return h.closest(n,"table",t)},row:function(n,t){return fo(["tr"],n,t)},rows:function(n){return nu.firstLayer(n,"tr")},notCell:function(n,t){return fo(["caption","tr","tbody","tfoot","thead"],n,t)},neighbourRows:bn,attr:eo,grid:function(n,t,i){var r=eo(n,t),u=eo(n,i);return a.grid(r,u)}},ri=function(n){var t=k.rows(n);return i.map(t,function(n){var t=n,r=e.parent(t).bind(function(n){var t=o.name(n);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}),f=i.map(k.cells(n),function(n){var t=u.has(n,"rowspan")?parseInt(u.get(n,"rowspan"),10):1,i=u.has(n,"colspan")?parseInt(u.get(n,"colspan"),10):1;return a.detail(n,t,i)});return a.rowdata(t,f,r)})},kn=function(n,t){return i.map(n,function(n){var r=i.map(k.cells(n),function(n){var t=u.has(n,"rowspan")?parseInt(u.get(n,"rowspan"),10):1,i=u.has(n,"colspan")?parseInt(u.get(n,"colspan"),10):1;return a.detail(n,t,i)});return a.rowdata(n,r,t.section())})},oo=function(n,t){return n+","+t},aa=function(n,t){var r=i.bind(n.all(),function(n){return n.cells()});return i.filter(r,t)},y={generate:function(t){var r={},f=[],o=t.length,u=0,e;return i.each(t,function(n,t){var e=[];i.each(n.cells(),function(n){for(var s,f,o,h,c,i=0;r[oo(t,i)]!==undefined;)i++;for(s=a.extended(n.element(),n.rowspan(),n.colspan(),t,i),f=0;f<n.colspan();f++)for(o=0;o<n.rowspan();o++)h=i+f,c=oo(t+o,h),r[c]=s,u=Math.max(u,h+1);e.push(s)});f.push(a.rowdata(n.element(),e,n.section()))}),e=a.grid(o,u),{grid:n.constant(e),access:n.constant(r),all:n.constant(f)}},getAt:function(n,i,r){var u=n.access()[oo(i,r)];return u!==undefined?t.some(u):t.none()},findItem:function(n,i,r){var u=aa(n,function(n){return r(i,n.element())});return 0<u.length?t.some(u[0]):t.none()},filterItems:aa,justCells:function(n){var t=i.map(n.all(),function(n){return n.cells()});return i.flatten(t)}},hi=function(n){return n.style!==undefined},so=function(n,t,i){if(!b.isString(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);hi(n)&&n.style.setProperty(t,i)},va=function(n,t){hi(n)&&n.style.removeProperty(t)},ho=function(n,t,i){var r=n.dom();so(r,t,i)},ya=function(n,t){return hi(n)?n.style.getPropertyValue(t):""},nf=function(n,i){var r=n.dom(),u=ya(r,i);return t.from(u).filter(function(n){return 0<n.length})},c={copy:function(n,t){var i=n.dom(),r=t.dom();hi(i)&&hi(r)&&(r.style.cssText=i.style.cssText)},set:ho,preserve:function(n,t){var i=u.get(n,"style"),r=t(n);return(i===undefined?u.remove:u.set)(n,"style",i),r},setAll:function(n,t){var i=n.dom();st.each(t,function(n,t){so(i,t,n)})},setOptions:function(n,t){var i=n.dom();st.each(t,function(n,t){n.fold(function(){va(i,t)},function(n){so(i,t,n)})})},remove:function(n,t){var i=n.dom();va(i,t);u.has(n,"style")&&""===it.trim(u.get(n,"style"))&&u.remove(n,"style")},get:function(n,t){var i=n.dom(),r=window.getComputedStyle(i).getPropertyValue(t),u=""!==r||tr.inBody(n)?r:ya(i,t);return null===u?undefined:u},getRaw:nf,getAllRaw:function(n){var u={},t=n.dom(),i,r;if(hi(t))for(i=0;i<t.style.length;i++)r=t.style.item(i),u[r]=t.style[r];return u},isValidValue:function(n,t,i){var u=r.fromTag(n);return ho(u,t,i),nf(u,t).isSome()},reflow:function(n){return n.dom().offsetWidth},transfer:function(n,t,r){o.isElement(n)&&o.isElement(t)&&i.each(r,function(i){var r,u;r=t;nf(n,u=i).each(function(n){nf(r,u).isNone()&&ho(r,u,n)})})}},tf=function(n,t){e.parent(n).each(function(i){i.dom().insertBefore(t.dom(),n.dom())})},iu=function(n,t){n.dom().appendChild(t.dom())},v={before:tf,after:function(n,t){e.nextSibling(n).fold(function(){e.parent(n).each(function(n){iu(n,t)})},function(n){tf(n,t)})},prepend:function(n,t){e.firstChild(n).fold(function(){iu(n,t)},function(i){n.dom().insertBefore(t.dom(),i.dom())})},append:iu,appendAt:function(n,t,i){e.child(n,i).fold(function(){iu(n,t)},function(n){tf(n,t)})},wrap:function(n,t){tf(n,t);iu(t,n)}},ci={before:function(n,t){i.each(t,function(t){v.before(n,t)})},after:function(n,t){i.each(t,function(i,r){var u=0===r?n:t[r-1];v.after(u,i)})},prepend:function(n,t){i.each(t.slice().reverse(),function(t){v.prepend(n,t)})},append:function(n,t){i.each(t,function(t){v.append(n,t)})}},co=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},ut={empty:function(n){n.dom().textContent="";i.each(e.children(n),function(n){co(n)})},remove:co,unwrap:function(n){var t=e.children(n);0<t.length&&ci.before(n,t);co(n)}},dn=l.immutable("minRow","minCol","maxRow","maxCol"),gn=function(n,t){var a,p,w,o,s,h,l,f,e,b,k=function(n){return tt.is(n.element(),t)},d=ri(n),g=y.generate(d),nt=(p=k,w=(a=g).grid().columns(),o=a.grid().rows(),s=w,l=h=0,st.each(a.access(),function(n){if(p(n)){var t=n.row(),r=t+n.rowspan()-1,i=n.column(),u=i+n.colspan()-1;t<o?o=t:h<r&&(h=r);i<s?s=i:l<u&&(l=u)}}),dn(o,s,h,l)),it="th:not("+t+"),td:not("+t+")",rt=nu.filterFirstLayer(n,"th,td",function(n){return tt.is(n,it)});return i.each(rt,ut.remove),function(n,t,i,u){for(var s,e,h,c,o,l=t.grid().columns(),a=t.grid().rows(),f=0;f<a;f++)for(s=!1,e=0;e<l;e++)f<i.minRow()||f>i.maxRow()||e<i.minCol()||e>i.maxCol()||(y.getAt(t,f,e).filter(u).isNone()?(h=s,c=n[f].element(),o=r.fromTag("td"),v.append(o,r.fromTag("br")),(h?v.append:v.prepend)(c,o)):s=!0)}(d,g,nt,k),f=n,e=nt,b=i.filter(nu.firstLayer(f,"tr"),function(n){return 0===n.dom().childElementCount}),i.each(b,ut.remove),e.minCol()!==e.maxCol()&&e.minRow()!==e.maxRow()||i.each(nu.firstLayer(f,"th,td"),function(n){u.remove(n,"rowspan");u.remove(n,"colspan")}),u.remove(f,"width"),u.remove(f,"height"),c.remove(f,"width"),c.remove(f,"height"),n},pa=function(n,t){return r.fromDom(n.dom().cloneNode(t))},wa=function(n){return pa(n,!0)},ntt=function(n,t){var i=r.fromTag(t),f=u.clone(n);return u.setAll(i,f),i},ba=function(n){return pa(n,!1)},lo=wa,ttt=function(n,t){var i=ntt(n,t),r=e.children(wa(n));return ci.append(i,r),i},ao=(gu=o.isText,tu="text",ro=function(n){return gu(n)?t.from(n.dom().nodeValue):t.none()},uo=nr.detect().browser,{get:function(n){if(!gu(n))throw new Error("Can only get "+tu+" value of a "+tu+" node");return ea(n).getOr("")},getOption:ea=uo.isIE()&&10===uo.version.major?function(n){try{return ro(n)}catch(i){return t.none()}}:ro,set:function(n,t){if(!gu(n))throw new Error("Can only set raw "+tu+" value of a "+tu+" node");n.dom().nodeValue=t}}),li={get:function(n){return ao.get(n)},getOption:function(n){return ao.getOption(n)},set:function(n,t){ao.set(n,t)}},itt=function(n){return"img"===o.name(n)?1:li.getOption(n).fold(function(){return e.children(n).length},function(n){return n.length})},rtt=["img","br"],ui=itt,ka=function(n){return li.getOption(n).filter(function(n){return 0!==n.trim().length||-1<n.indexOf(" ")}).isSome()||i.contains(rtt,o.name(n))},utt=function(n,i){var r=function(n){for(var f,s,o=e.children(n),u=o.length-1;0<=u;u--){if(f=o[u],i(f))return t.some(f);if(s=r(f),s.isSome())return s}return t.none()};return r(n)},ai={first:function(n){return kt.descendant(n,ka)},last:function(n){return utt(n,ka)}},vo=function(){var n=r.fromTag("td");return v.append(n,r.fromTag("br")),n},ftt=function(n,t,i){var r=ttt(n,t);return st.each(i,function(n,t){null===n?u.remove(r,t):u.set(r,t,n)}),r},ett=function(n){return n},da=function(n){return function(){return r.fromTag("tr",n.dom())}},ga=function(n,t,u){return{row:da(t),cell:function(t){var h,l,a,p=e.owner(t.element()),f=r.fromTag(o.name(t.element()),p.dom()),y=u.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),w=0<y.length?(h=t.element(),l=f,a=y,ai.first(h).map(function(n){var t=a.join(","),r=nt.ancestors(n,t,function(n){return s.eq(n,h)});return i.foldr(r,function(n,t){var i=ba(t);return v.append(n,i),i},l)}).getOr(l)):f;return v.append(w,r.fromTag("br")),c.copy(t.element(),f),c.remove(f,"height"),1!==t.colspan()&&c.remove(t.element(),"width"),n(t.element(),f),f},replace:ftt,gap:vo}},nv=function(n){return{row:da(n),cell:vo,replace:ett,gap:vo}},ott=function(n,t){var i=(t||document).createElement("div");return i.innerHTML=n,e.children(r.fromDom(i))},stt=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],tv=l.immutable("left","right"),iv=function(t,r,u){var f=t.property().children(r);return i.findIndex(f,n.curry(t.eq,u)).map(function(t){return{before:n.constant(f.slice(0,t)),after:n.constant(f.slice(t+1))}})},htt=function(n,t,i){return iv(n,t,i).map(function(r){var u=n.create().clone(t);return n.insert().appendAll(u,r.before().concat([i])),n.insert().appendAll(t,r.after()),n.insert().before(t,u),tv(u,t)})},ctt=function(n,t,i){return iv(n,t,i).map(function(i){var r=n.create().clone(t);return n.insert().appendAll(r,i.after()),n.insert().after(t,r),tv(t,r)})},ltt=function(n,i,r,u){var f=l.immutable("first","second","splits"),e=function(i,o,s){var h=f(i,t.none(),s);return r(i)?f(i,o,s):n.property().parent(i).bind(function(f){return u(n,f,i).map(function(n){var i=[{first:n.left,second:n.right}],u=r(f)?f:n.left();return e(u,t.some(n.right()),s.concat(i))}).getOr(h)})};return e(i,t.none(),[])},att=function(n,t,r,u){var f=t(n,r);return i.foldr(u,function(i,r){var u=t(n,r);return vtt(n,i,u)},f)},vtt=function(t,i,r){return i.bind(function(i){return r.filter(n.curry(t.eq,i))})},ytt=function(n,i,r){return 0<r.length?att(n,i,(u=r)[0],u.slice(1)):t.none();var u},po=function(t,i){return n.curry(t.eq,i)},rv=function(t,r,u,f){var h=f!==undefined?f:n.constant(!1),c=[r].concat(t.up().all(r)),l=[u].concat(t.up().all(u)),e=function(n){return i.findIndex(n,h).fold(function(){return n},function(t){return n.slice(0,t+1)})},o=e(c),s=e(l),a=i.find(o,function(n){return i.exists(s,po(t,n))});return{firstpath:n.constant(o),secondpath:n.constant(s),shared:n.constant(a)}},ptt=function(n,r,u){var f=rv(n,r,u);return f.shared().bind(function(r){return function(n,r,u,f){var e=n.property().children(r);if(n.eq(r,u[0]))return t.some([u[0]]);if(n.eq(r,f[0]))return t.some([f[0]]);var o=function(t){var u=i.reverse(t),f=i.findIndex(u,po(n,r)).getOr(-1),o=f<u.length-1?u[f+1]:u[f];return i.findIndex(e,po(n,o))},s=o(u),h=o(f);return s.bind(function(n){return h.map(function(t){var i=Math.min(n,t),r=Math.max(n,t);return e.slice(i,r+1)})})}(n,r,f.firstpath(),f.secondpath())})},wtt=rv,btt=function(n,t,i){return ytt(n,t,i)},ktt=function(n,t,i){return ptt(n,t,i)},dtt=function(n,t,i,r){return wtt(n,t,i,r)},gtt=function(n,t,i){return htt(n,t,i)},nit=function(n,t,i){return ctt(n,t,i)},tit=function(n,t,i,r){return ltt(n,t,i,r)},ir=yo(),rf={sharedOne:function(n,t){return btt(ir,function(t,i){return n(i)},t)},subset:function(n,t){return ktt(ir,n,t)},ancestors:function(n,t,i){return dtt(ir,n,t,i)},breakToLeft:function(n,t){return gtt(ir,n,t)},breakToRight:function(n,t){return nit(ir,n,t)},breakPath:function(n,t,i){return tit(ir,n,t,function(n,t,r){return i(t,r)})}},iit=function(n,t){return t.column()>=n.startCol()&&t.column()+t.colspan()-1<=n.finishCol()&&t.row()>=n.startRow()&&t.row()+t.rowspan()-1<=n.finishRow()},rit=function(n,t){var i=t.column(),r=t.column()+t.colspan()-1,u=t.row(),f=t.row()+t.rowspan()-1;return i<=n.finishCol()&&r>=n.startCol()&&u<=n.finishRow()&&f>=n.startRow()},uit=function(i,r){for(var u,f=!0,o=n.curry(iit,r),e=r.startRow();e<=r.finishRow();e++)for(u=r.startCol();u<=r.finishCol();u++)f=f&&y.getAt(i,e,u).exists(o);return f?t.some(r):t.none()},uv=function(n,t,i){var r=y.findItem(n,t,s.eq),u=y.findItem(n,i,s.eq);return r.bind(function(n){return u.map(function(t){return i=n,r=t,a.bounds(Math.min(i.row(),r.row()),Math.min(i.column(),r.column()),Math.max(i.row()+i.rowspan()-1,r.row()+r.rowspan()-1),Math.max(i.column()+i.colspan()-1,r.column()+r.colspan()-1));var i,r})})},fit=uv,eit=function(n,t,i){return uv(n,t,i).bind(function(t){return uit(n,t)})},oit=function(n,t,i,r){return y.findItem(n,t,s.eq).bind(function(t){var u=0<i?t.row()+t.rowspan()-1:t.row(),f=0<r?t.column()+t.colspan()-1:t.column();return y.getAt(n,u+i,f+r).map(function(n){return n.element()})})},fv=function(t,r,u){return fit(t,r,u).map(function(r){var u=y.filterItems(t,n.curry(rit,r));return i.map(u,function(n){return n.element()})})},ev=function(n,t){return y.findItem(n,t,function(n,t){return s.contains(t,n)}).bind(function(n){return n.element()})},uf=function(n){var t=ri(n);return y.generate(t)},sit=function(n,t,i){return k.table(n).bind(function(r){var u=uf(r);return oit(u,n,t,i)})},hit=function(n,t,i){var r=uf(n);return fv(r,t,i)},wo=function(n,t,i,r,u){var f=uf(n),e=s.eq(n,i)?t:ev(f,t),o=s.eq(n,u)?r:ev(f,r);return fv(f,e,o)},cit=function(n,t,i){var r=uf(n);return eit(r,t,i)},bo=function(n){return h.ancestor(n,"table")},ru=l.immutableBag(["boxes","start","finish"],[]),ov=function(n,i,r){var u=function(n){return function(t){return r(t)||s.eq(t,n)}};return s.eq(n,i)?t.some(ru({boxes:t.some([n]),start:n,finish:i})):bo(n).bind(function(f){return bo(i).bind(function(e){var c,o,l;return s.eq(f,e)?t.some(ru({boxes:hit(f,n,i),start:n,finish:i})):s.contains(f,e)?(c=0<(o=nt.ancestors(i,"td,th",u(f))).length?o[o.length-1]:i,t.some(ru({boxes:wo(f,n,f,i,e),start:n,finish:c}))):s.contains(e,f)?(l=0<(o=nt.ancestors(n,"td,th",u(e))).length?o[o.length-1]:n,t.some(ru({boxes:wo(e,n,f,i,e),start:n,finish:l}))):rf.ancestors(n,i).shared().bind(function(o){return h.closest(o,"table",r).bind(function(r){var o=nt.ancestors(i,"td,th",u(r)),h=0<o.length?o[o.length-1]:i,s=nt.ancestors(n,"td,th",u(r)),c=0<s.length?s[s.length-1]:n;return t.some(ru({boxes:wo(r,n,f,i,e),start:c,finish:h}))})})})})},sv=ov,ko=function(n,i){var r=nt.descendants(n,i);return 0<r.length?t.some(r):t.none()},lit=function(t,r,u,f,e){return(o=t,s=e,i.find(o,function(n){return tt.is(n,s)})).bind(function(t){return sit(t,r,u).bind(function(t){return i=t,r=f,h.ancestor(i,"table").bind(function(t){return h.descendant(t,r).bind(function(t){return ov(t,i).bind(function(t){return t.boxes().map(function(i){return{boxes:n.constant(i),start:n.constant(t.start()),finish:n.constant(t.finish())}})})})});var i,r})});var o,s},hv=function(t,i,r){return h.descendant(t,i).bind(function(i){return h.descendant(t,r).bind(function(t){return rf.sharedOne(bo,[i,t]).map(function(r){return{first:n.constant(i),last:n.constant(t),table:n.constant(r)}})})})},ait=function(n,t){return ko(n,t)},vit=function(n,i,r){return hv(n,i,r).bind(function(i){var r=function(t){return s.eq(n,t)},u=h.ancestor(i.first(),"thead,tfoot,tbody,table",r),f=h.ancestor(i.last(),"thead,tfoot,tbody,table",r);return u.bind(function(n){return f.bind(function(r){return s.eq(n,r)?cit(i.table(),i.first(),i.last()):t.none()})})})},vi={selected:n.constant("data-mce-selected"),selectedSelector:n.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:n.constant("[data-mce-selected]"),firstSelected:n.constant("data-mce-first-selected"),firstSelectedSelector:n.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:n.constant("data-mce-last-selected"),lastSelectedSelector:n.constant("td[data-mce-last-selected],th[data-mce-last-selected]")},rr=function(n){if(!b.isArray(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],r={};return i.each(n,function(u,f){var s=st.keys(u),e,o;if(1!==s.length)throw new Error("one and only one name per case");if(e=s[0],o=u[e],r[e]!==undefined)throw new Error("duplicate key detected:"+e);if("cata"===e)throw new Error("cannot have a case named cata (sorry)");if(!b.isArray(o))throw new Error("case arguments must be an array");t.push(e);r[e]=function(){var s=arguments.length,r,u;if(s!==o.length)throw new Error("Wrong number of arguments to case "+e+". Expected "+o.length+" ("+o+"), got "+s);for(r=new Array(s),u=0;u<r.length;u++)r[u]=arguments[u];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[f].apply(null,r)},match:function(n){var u=st.keys(n);if(t.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+u.join(","));if(!i.forall(t,function(n){return i.contains(u,n)}))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+t.join(", "));return n[e].apply(null,r)},log:function(n){console.log(n,{constructors:t,constructor:e,params:r})}}}}),r},go=rr([{none:[]},{multiple:["elements"]},{single:["selection"]}]),ur={cata:function(n,t,i,r){return n.fold(t,i,r)},none:go.none,multiple:go.multiple,single:go.single},cv=function(t,i){return ur.cata(i.get(),n.constant([]),n.identity,n.constant([t]))},yit=function(i,r){return ur.cata(r.get(),t.none,function(r){return 0===r.length?t.none():vit(i,vi.firstSelectedSelector(),vi.lastSelectedSelector()).bind(function(i){return 1<r.length?t.some({bounds:n.constant(i),cells:n.constant(r)}):t.none()})},t.none)},pit=function(n,r){var f=cv(n,r);return 0<f.length&&i.forall(f,function(n){return u.has(n,"rowspan")&&1<parseInt(u.get(n,"rowspan"),10)||u.has(n,"colspan")&&1<parseInt(u.get(n,"colspan"),10)})?t.some(f):t.none()},lv=cv,av=function(i){return{element:n.constant(i),mergable:t.none,unmergable:t.none,selection:n.constant([i])}},wit=l.immutable("element","clipboard","generators"),fr={noMenu:av,forMenu:function(t,i,r){return{element:n.constant(r),mergable:n.constant(yit(i,t)),unmergable:n.constant(pit(r,t)),selection:n.constant(lv(r,t))}},notCell:function(n){return av(n)},paste:wit,pasteRows:function(i,r,u,f,e){return{element:n.constant(u),mergable:t.none,unmergable:t.none,selection:n.constant(lv(u,i)),clipboard:n.constant(f),generators:n.constant(e)}}},bit=function(u,f,e,s){u.on("BeforeGetContent",function(t){!0===t.selection&&ur.cata(f.get(),n.noop,function(n){var r;t.preventDefault();(r=n,k.table(r[0]).map(lo).map(function(n){return[gn(n,vi.attributeSelector())]})).each(function(n){t.content=i.map(n,function(n){return t=n,u.selection.serializer.serialize(t.dom(),{});var t}).join("")})},n.noop)});u.on("BeforeSetContent",function(n){!0===n.selection&&!0===n.paste&&t.from(u.dom.getParent(u.selection.getStart(),"th,td")).each(function(t){var f=r.fromDom(t);k.table(f).bind(function(t){var h=i.filter(ott(n.content),function(n){return"meta"!==o.name(n)});if(1===h.length&&"table"===o.name(h[0])){n.preventDefault();var c=r.fromDom(u.getDoc()),l=nv(c),a=fr.paste(f,h[0],l);e.pasteCells(t,a).each(function(n){u.selection.setRng(n);u.focus();s.clear(t)})}})})})},yv=vv("height",function(n){return tr.inBody(n)?n.dom().getBoundingClientRect().height:n.dom().offsetHeight}),ns=function(n){return yv.get(n)},pv=function(n){return yv.getOuter(n)},wv=vv("width",function(n){return n.dom().offsetWidth}),yi=function(n){return wv.get(n)},bv=function(n){return wv.getOuter(n)},kv=nr.detect(),uu=function(n,t,i){return u=c.get(n,t),f=i,r=parseFloat(u),isNaN(r)?f:r;var u,f,r},kit=function(n){return kv.browser.isIE()||kv.browser.isEdge()?(r=uu(t=n,"padding-top",0),u=uu(t,"padding-bottom",0),f=uu(t,"border-top-width",0),e=uu(t,"border-bottom-width",0),i=t.dom().getBoundingClientRect().height,"border-box"===c.get(t,"box-sizing")?i:i-r-u-(f+e)):uu(n,"height",ns(n));var t,r,u,f,e,i},dv=/(\d+(\.\d+)?)(\w|%)*/,fu=/(\d+(\.\d+)?)%/,ts=/(\d+(\.\d+)?)px|em/,gv=function(n,t){c.set(n,"height",t+"px")},dit=function(n,t,i,r){var u,f,s,h,e,c=parseInt(n,10);return it.endsWith(n,"%")&&"table"!==o.name(t)?(u=t,f=c,s=i,h=r,e=k.table(u).map(function(n){var t=s(n);return Math.floor(f/100*t)}).getOr(f),h(u,e),e):c},git=function(n){var t,i=(t=n,c.getRaw(t,"height").getOrThunk(function(){return kit(t)+"px"}));return i?dit(i,n,ns,gv):ns(n)},nrt=function(n,t){return u.has(n,t)?parseInt(u.get(n,t),10):1},ff=function(n){return c.getRaw(n,"width").fold(function(){return t.from(u.get(n,"width"))},function(n){return t.some(n)})},ny=function(n,t){return n/t.pixelWidth()*100},d={percentageBasedSizeRegex:n.constant(fu),pixelBasedSizeRegex:n.constant(ts),setPixelWidth:function(n,t){c.set(n,"width",t+"px")},setPercentageWidth:function(n,t){c.set(n,"width",t+"%")},setHeight:gv,getPixelWidth:function(n,t){return ff(n).fold(function(){var t=yi(n);return parseInt(t,10)},function(i){return function(n,t,i){var r,u,f,e;return ts.test(t)?(r=ts.exec(t),parseInt(r[1],10)):fu.test(t)?(u=fu.exec(t),f=parseFloat(u[1]),f/100*i.pixelWidth()):(e=yi(n),parseInt(e,10))}(n,i,t)})},getPercentageWidth:function(n,t){return ff(n).fold(function(){var i=yi(n),r=parseInt(i,10);return ny(r,t)},function(i){return function(n,t,i){var r,u,f;return fu.test(t)?(r=fu.exec(t),parseFloat(r[1])):(u=yi(n),f=parseInt(u,10),ny(f,i))}(n,i,t)})},getGenericWidth:function(i){return ff(i).bind(function(i){if(dv.test(i)){var r=dv.exec(i);return t.some({width:n.constant(r[1]),unit:n.constant(r[3])})}return t.none()})},setGenericWidth:function(n,t,i){c.set(n,"width",t+i)},getHeight:function(n){return i="rowspan",git(t=n)/nrt(t,i);var t,i},getRawWidth:ff},ty=function(n,t){d.getGenericWidth(n).each(function(i){var r=i.width()/2;d.setGenericWidth(n,r,i.unit());d.setGenericWidth(t,r,i.unit())})},trt=function(t,i){var u=i||r.fromDom(document.documentElement);return kt.ancestor(t,n.curry(s.eq,u)).isSome()},irt=function(n){var t=n.dom();return t===t.window?n:o.isDocument(n)?t.defaultView||t.parentWindow:null},dt=function(t,i){return{left:n.constant(t),top:n.constant(i),translate:function(n,r){return dt(t+n,i+r)}}},ef=function(n,t){return n!==undefined?n:t!==undefined?t:0},rrt=function(n){var t,i=n.dom(),f=i.ownerDocument,u=f.body,e=r.fromDom(f.documentElement);return u===i?dt(u.offsetLeft,u.offsetTop):trt(n,e)?(t=i.getBoundingClientRect(),dt(t.left,t.top)):dt(0,0)},of=function(n){var i=n.dom().ownerDocument,u=i.body,f=irt(r.fromDom(i)),t=i.documentElement,e=ef(f.pageYOffset,t.scrollTop),o=ef(f.pageXOffset,t.scrollLeft),s=ef(t.clientTop,u.clientTop),h=ef(t.clientLeft,u.clientLeft);return rrt(n).translate(o-h,e-s)},iy=l.immutable("row","y"),ry=l.immutable("col","x"),uy=function(n){return of(n).left()+bv(n)},fy=function(n){return of(n).left()},ey=function(n,t){return ry(n,fy(t))},oy=function(n,t){return ry(n,uy(t))},is=function(n){return of(n).top()},rs=function(n,t,r){if(0===r.length)return[];var u=i.map(r.slice(1),function(t,i){return t.map(function(t){return n(i,t)})}),f=r[r.length-1].map(function(n){return t(r.length-1,n)});return u.concat([f])},urt={delta:n.identity,positions:n.curry(rs,function(n,t){return iy(n,is(t))},function(n,t){return iy(n,is(t)+pv(t))}),edge:is},frt={delta:n.identity,edge:fy,positions:n.curry(rs,ey,oy)},sf={height:urt,rtl:{delta:function(n){return-n},edge:uy,positions:n.curry(rs,oy,ey)},ltr:frt},sy={ltr:sf.ltr,rtl:sf.rtl},cy=function(n){var t=ri(n);return y.generate(t).grid()},eu=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return eu(i())}}},ly=function(n,t){return ay(n,t,{validate:b.isFunction,label:"function"})},ay=function(n,t,r){if(0===t.length)throw new Error("You must specify at least one required field.");return ae("required",t),kc(t),function(u){var f=st.keys(u),e;return i.forall(t,function(n){return i.contains(f,n)})||wc(t,f),n(t,f),e=i.filter(t,function(n){return!r.validate(u[n],n)}),0<e.length&&rg(e,r.label),u}},vy=n.noop,hf={exactly:n.curry(ly,function(n,t){var r=i.filter(t,function(t){return!i.contains(n,t)});0<r.length&&bc(r)}),ensure:n.curry(ly,vy),ensureWith:n.curry(ay,vy)},ert=function(t){var i=u.has(t,"colspan")?parseInt(u.get(t,"colspan"),10):1,r=u.has(t,"rowspan")?parseInt(u.get(t,"rowspan"),10):1;return{element:n.constant(t),colspan:n.constant(i),rowspan:n.constant(r)}},us=hf.exactly(["cell","row","replace","gap"]),rt=function(n,i){us(n);var r=eu(t.none()),e=i!==undefined?i:ert,o=function(t){var i,r=e(t);return i=r,n.cell(i)},u=function(n){var i=o(n);return r.get().isNone()&&r.set(t.some(i)),f=t.some({item:n,replacement:i}),i},f=t.none();return{getOrInit:function(n,t){return f.fold(function(){return u(n)},function(i){return t(n,i.item)?i.replacement:u(n)})},cursor:r.get}},cf=function(n,r){return function(u){var f=eu(t.none()),e,o;return us(u),e=[],o=function(i){var o=u.replace(i,r,{scope:n});return e.push({item:i,sub:o}),f.get().isNone()&&f.set(t.some(o)),o},{replaceOrInit:function(n,t){return(r=n,u=t,i.find(e,function(n){return u(n.item,r)})).fold(function(){return o(n)},function(i){return t(n,i.item)?i.sub:o(n)});var r,u},cursor:f.get}}},yy=function(i){us(i);var r=eu(t.none());return{combine:function(u){return r.get().isNone()&&r.set(t.some(u)),function(){var t=i.cell({element:n.constant(u),colspan:n.constant(1),rowspan:n.constant(1)});return c.remove(t,"width"),c.remove(u,"width"),t}},cursor:r.get}},ort=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],srt=function(n,t){var r=n.property().name(t);return i.contains(ort,r)},hrt=function(n,t){return i.contains(["br","img","hr","input"],n.property().name(t))},crt=srt,lrt=function(n,t){var r=n.property().name(t);return i.contains(["ol","ul"],r)},art=hrt,fs=yo(),es=function(n){return crt(fs,n)},vrt=function(n){return lrt(fs,n)},yrt=function(n){return art(fs,n)},prt=function(n){var t,u=function(n){return"br"===o.name(n)},f=function(n){return ai.last(n).bind(function(t){var i,f=(i=t,e.nextSibling(i).map(function(n){return!!es(n)||(yrt(n)?"img"!==o.name(n):void 0)}).getOr(!1));return e.parent(t).map(function(i){return!0===f||(e=i,"li"===o.name(e)||kt.ancestor(e,vrt).isSome())||u(t)||es(i)&&!s.eq(n,i)?[]:[r.fromTag("br")];var e})}).getOr([])},h=0===(t=i.bind(n,function(n){var t,r=e.children(n);return t=r,i.forall(t,function(n){return u(n)||o.isText(n)&&0===li.get(n).trim().length})?[]:r.concat(f(n))})).length?[r.fromTag("br")]:t;ut.empty(n[0]);ci.append(n[0],h)},py=function(n){return function(){for(var u,f,e,r,t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(u={},f=0;f<t.length;f++){e=t[f];for(r in e)e.hasOwnProperty(r)&&(u[r]=n(u[r],e[r]))}return u}},wy=py(function(n,t){return b.isObject(n)&&b.isObject(t)?wy(n,t):t}),wrt=py(function(n,t){return t}),os={deepMerge:wy,merge:wrt},by=function(n){for(var i=[],r=function(n){i.push(n)},t=0;t<n.length;t++)n[t].each(r);return i},er=function(n,i){for(var u,r=0;r<n.length;r++)if(u=i(n[r],r),u.isSome())return u;return t.none()},ky=function(n,t){return a.rowcells(t,n.section())},dy=function(n,t){return n.cells()[t]},f={addCell:function(n,t,i){var r=n.cells(),u=r.slice(0,t),f=r.slice(t),e=u.concat([i]).concat(f);return ky(n,e)},setCells:ky,mutateCell:function(n,t,i){n.cells()[t]=i},getCell:dy,getCellElement:function(n,t){return dy(n,t).element()},mapCells:function(n,t){var r=n.cells(),u=i.map(r,t);return a.rowcells(u,n.section())},cellLength:function(n){return n.cells().length}},gy=function(n,t){if(0===n.length)return 0;var r=n[0];return i.findIndex(n,function(n){return!t(r.element(),n.element())}).fold(function(){return n.length},function(n){return n})},brt=function(t,r,u,e){var o,s,h,c,l=(o=t,s=r,o[s]).cells().slice(u),a=gy(l,e),v=(h=t,c=u,i.map(h,function(n){return f.getCell(n,c)})).slice(r),y=gy(v,e);return{colspan:n.constant(a),rowspan:n.constant(y)}},krt=function(n,t){var r=i.map(n,function(n){return i.map(n.cells(),function(){return!1})});return i.map(n,function(u,f){var e=i.bind(u.cells(),function(i,u){if(!1===r[f][u]){var e=brt(n,f,u,t);return function(n,t,i,u){for(var e,f=n;f<n+i;f++)for(e=t;e<t+u;e++)r[f][e]=!0}(f,u,e.rowspan(),e.colspan()),[a.detailnew(i.element(),e.rowspan(),e.colspan(),i.isNew())]}return[]});return a.rowdetails(e,u.section())})},lf=function(n,t,i){for(var e,u,o,s,f=[],r=0;r<n.grid().rows();r++){for(e=[],u=0;u<n.grid().columns();u++)o=y.getAt(n,r,u).map(function(n){return a.elementnew(n.element(),i)}).getOrThunk(function(){return a.elementnew(t.gap(),!0)}),e.push(o);s=a.rowcells(e,n.all()[r].section());f.push(s)}return f},af=function(n,t,i,r){i===r?u.remove(n,t):u.set(n,t,i)},drt=function(t,u){var o=[],s=[],f=function(n,u){var f;0<n.length?function(n,u){var f=h.child(t,u).getOrThunk(function(){var n=r.fromTag(u,e.owner(t).dom());return v.append(t,n),n}),c;ut.empty(f);c=i.map(n,function(n){n.isNew()&&o.push(n.element());var t=n.element();return ut.empty(t),i.each(n.cells(),function(n){n.isNew()&&s.push(n.element());af(n.element(),"colspan",n.colspan(),1);af(n.element(),"rowspan",n.rowspan(),1);v.append(t,n.element())}),t});ci.append(f,c)}(n,u):(f=u,h.child(t,f).bind(ut.remove))},c=[],l=[],a=[];return i.each(u,function(n){switch(n.section()){case"thead":c.push(n);break;case"tbody":l.push(n);break;case"tfoot":a.push(n)}}),f(c,"thead"),f(l,"tbody"),f(a,"tfoot"),{newRows:n.constant(o),newCells:n.constant(s)}},grt=function(n){return i.map(n,function(n){var t=ba(n.element());return i.each(n.cells(),function(n){var i=lo(n.element());af(i,"colspan",n.colspan(),1);af(i,"rowspan",n.rowspan(),1);v.append(t,i)}),t})},nut=function(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r},ou=function(n,t){for(var r=[],i=n;i<t;i++)r.push(i);return r},np=function(n,r){if(r<0||r>=n.length-1)return t.none();var u=n[r].fold(function(){var t=i.reverse(n.slice(0,r));return er(t,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return t.some({value:n,delta:0})}),f=n[r+1].fold(function(){var t=n.slice(r+1);return er(t,function(n,t){return n.map(function(n){return{value:n,delta:t+1}})})},function(n){return t.some({value:n,delta:1})});return u.bind(function(n){return f.map(function(t){var i=t.delta+n.delta;return Math.abs(t.value-n.value)/i})})},tp=function(n,r,u){var f=n();return i.find(f,r).orThunk(function(){return t.from(f[0]).orThunk(u)}).map(function(n){return n.element()})},ip=function(t){var r=t.grid(),u=ou(0,r.columns()),f=ou(0,r.rows());return i.map(u,function(r){return tp(function(){return i.bind(f,function(i){return y.getAt(t,i,r).filter(function(n){return n.column()===r}).fold(n.constant([]),function(n){return[n]})})},function(n){return 1===n.colspan()},function(){return y.getAt(t,0,r)})})},rp=function(t){var r=t.grid(),u=ou(0,r.rows()),f=ou(0,r.columns());return i.map(u,function(r){return tp(function(){return i.bind(f,function(i){return y.getAt(t,r,i).filter(function(n){return n.row()===r}).fold(n.constant([]),function(n){return[n]})})},function(n){return 1===n.rowspan()},function(){return y.getAt(t,r,0)})})},tut=function(n,t,i,f,e){var o=r.fromTag("div");return c.setAll(o,{position:"absolute",left:t-f/2+"px",top:i+"px",height:e+"px",width:f+"px"}),u.setAll(o,{"data-column":n,role:"presentation"}),o},iut=function(n,t,i,f,e){var o=r.fromTag("div");return c.setAll(o,{position:"absolute",left:t+"px",top:i-e/2+"px",height:e+"px",width:f+"px"}),u.setAll(o,{"data-row":n,role:"presentation"}),o},up=function(n){var t=n.replace(/\./g,"-");return{resolve:function(n){return t+"-"+n}}},vf={resolve:up("ephox-snooker").resolve},ss=function(n,t){var i=u.get(n,t);return i===undefined||""===i?[]:i.split(" ")},rut=ss,uut=function(n,t,i){var r=ss(n,t).concat([i]);u.set(n,t,r.join(" "))},fut=function(n,t,r){var f=i.filter(ss(n,t),function(n){return n!==r});0<f.length?u.set(n,t,f.join(" ")):u.remove(n,t)},fp=function(n){return rut(n,"class")},ep=function(n,t){return uut(n,"class",t)},op=function(n,t){return fut(n,"class",t)},eut=fp,sp=ep,hp=op,out=function(n,t){i.contains(fp(n),t)?op(n,t):ep(n,t)},or=function(n){return n.dom().classList!==undefined},cp=function(n,t){return or(n)&&n.dom().classList.contains(t)},et={add:function(n,t){or(n)?n.dom().classList.add(t):sp(n,t)},remove:function(n,t){var i;or(n)?n.dom().classList.remove(t):hp(n,t);0===(or(i=n)?i.dom().classList:eut(i)).length&&u.remove(i,"class")},toggle:function(n,t){return or(n)?n.dom().classList.toggle(t):out(n,t)},toggler:function(n,t){var r,u,f,i,e,o,s=or(n),h=n.dom().classList;return r=function(){s?h.remove(t):hp(n,t)},u=function(){s?h.add(t):sp(n,t)},f=cp(n,t),i=f||!1,{on:e=function(){u();i=!0},off:o=function(){r();i=!1},toggle:function(){(i?o:e)()},isOn:function(){return i}}},has:cp},hs=vf.resolve("resizer-bar"),lp=vf.resolve("resizer-rows"),ap=vf.resolve("resizer-cols"),vp=function(n){var t=nt.descendants(n.parent(),"."+hs);i.each(t,ut.remove)},yp=function(n,t,r){var u=n.origin();i.each(t,function(t){t.each(function(t){var i=r(u,t);et.add(i,hs);v.append(n.parent(),i)})})},sut=function(n,t,i,r,u,f){var e,o,s,h,c=of(t),w=0<i.length?u.positions(i,t):[],l,a,v,y,p;e=n;o=w;s=c;h=bv(t);yp(e,o,function(n,t){var i=iut(t.row(),s.left()-n.left(),t.y()-n.top(),h,7);return et.add(i,lp),i});p=0<r.length?f.positions(r,t):[];l=n;a=p;v=c;y=pv(t);yp(l,a,function(n,t){var i=tut(t.col(),t.x()-n.left(),v.top()-n.top(),7,y);return et.add(i,ap),i})},pp=function(n,t){var r=nt.descendants(n.parent(),"."+hs);i.each(r,t)},yt={refresh:function(n,t,i,r){vp(n);var f=ri(t),u=y.generate(f),e=rp(u),o=ip(u);sut(n,t,e,o,i,r)},hide:function(n){pp(n,function(n){c.set(n,"display","none")})},show:function(n){pp(n,function(n){c.set(n,"display","block")})},destroy:vp,isRowBar:function(n){return et.has(n,lp)},isColBar:function(n){return et.has(n,ap)}},hut=function(n,t){return i.map(n,function(n){var i,r=(i=n.details(),er(i,function(n){return e.parent(n.element()).map(function(n){var t=e.parent(n).isNone();return a.elementnew(n,t)})}).getOrThunk(function(){return a.elementnew(t.row(),!0)}));return a.rowdatanew(r.element(),n.details(),n.section(),r.isNew())})},wp=function(n,t){var i=krt(n,s.eq);return hut(i,t)},yf=function(n,t){var r=i.flatten(i.map(n.all(),function(n){return n.cells()}));return i.find(r,function(n){return s.eq(t,n.element())})},w=function(i,r,u,f,e){return function(o,h,c,l,a){var p=ri(h),v=y.generate(p);return r(v,c).map(function(t){var u=lf(v,l,!1),r=i(u,t,s.eq,e(l)),f=wp(r.grid(),l);return{grid:n.constant(f),cursor:r.cursor}}).fold(function(){return t.none()},function(n){var i=drt(h,n.grid());return u(h,n.grid(),a),f(h),yt.refresh(o,h,sf.height,a),t.some({cursor:n.cursor,newRows:i.newRows,newCells:i.newCells})})}},cut=wp,pt=function(n,t){return k.cell(t.element()).bind(function(t){return yf(n,t)})},pi=function(n,r){var f=i.map(r.selection(),function(t){return k.cell(t).bind(function(t){return yf(n,t)})}),u=by(f);return 0<u.length?t.some(u):t.none()},lut=function(n,t){return k.cell(t.element()).bind(function(i){return yf(n,i).map(function(n){return os.merge(n,{generators:t.generators,clipboard:t.clipboard})})})},bp=function(n,r){var f=i.map(r.selection(),function(t){return k.cell(t).bind(function(t){return yf(n,t)})}),u=by(f);return 0<u.length?t.some(os.merge({cells:u},{generators:r.generators,clipboard:r.clipboard})):t.none()},aut=function(n,t){return t.mergable()},vut=function(n,t){return t.unmergable()},pf=function(i){return{is:function(n){return i===n},isValue:n.always,isError:n.never,getOr:n.constant(i),getOrThunk:n.constant(i),getOrDie:n.constant(i),or:function(){return pf(i)},orThunk:function(){return pf(i)},fold:function(n,t){return t(i)},map:function(n){return pf(n(i))},each:function(n){n(i)},bind:function(n){return n(i)},exists:function(n){return n(i)},forall:function(n){return n(i)},toOption:function(){return t.some(i)}}},cs=function(i){return{is:n.never,isValue:n.never,isError:n.always,getOr:n.identity,getOrThunk:function(n){return n()},getOrDie:function(){return n.die(String(i))()},or:function(n){return n},orThunk:function(n){return n()},fold:function(n){return n(i)},map:function(){return cs(i)},each:n.noop,bind:function(){return cs(i)},exists:n.never,forall:n.always,toOption:t.none}},kp={value:pf,error:cs},dp=function(n,t){return i.map(n,function(){return a.elementnew(t.cell(),!0)})},yut=function(n,t,i){return n.concat(nut(t,function(){return f.setCells(n[n.length-1],dp(n[n.length-1].cells(),i))}))},put=function(n,t,r){return i.map(n,function(n){return f.setCells(n,n.cells().concat(dp(ou(0,t),r)))})},wut=function(t,i,r){if(t.row()>=i.length||t.column()>f.cellLength(i[0]))return kp.error("invalid start address out of table bounds, row: "+t.row()+", column: "+t.column());var u=i.slice(t.row()),e=u[0].cells().slice(t.column()),o=f.cellLength(r[0]),s=r.length;return kp.value({rowDelta:n.constant(u.length-s),colDelta:n.constant(e.length-o)})},gp=function(t,i){var r=f.cellLength(t[0]),u=f.cellLength(i[0]);return{rowDelta:n.constant(0),colDelta:n.constant(r-u)}},ls=function(t,i,r){var u=i.colDelta()<0?put:n.identity;return(i.rowDelta()<0?yut:n.identity)(u(t,Math.abs(i.colDelta()),r),Math.abs(i.rowDelta()),r)},but=function(n,t,i,r){var u,e;if(0===n.length)return n;for(u=t.startRow();u<=t.finishRow();u++)for(e=t.startCol();e<=t.finishCol();e++)f.mutateCell(n[u],e,a.elementnew(r(),!1));return n},nw=function(n,t,i,r){for(var e,s,o=!0,u=0;u<n.length;u++)for(e=0;e<f.cellLength(n[0]);e++)s=i(f.getCellElement(n[u],e),t),!0===s&&!1===o?f.mutateCell(n[u],e,a.elementnew(r(),!0)):!0===s&&(o=!1);return n},kut=function(n,r,u,e){var o,s,h,c;return 0<r&&r<n.length&&(o=n[r-1].cells(),s=(h=o,c=u,i.foldl(h,function(n,t){return i.exists(n,function(n){return c(n.element(),t.element())})?n:n.concat([t])},[])),i.each(s,function(i){for(var s,c,h=t.none(),o=r;o<n.length;o++)for(s=0;s<f.cellLength(n[0]);s++)c=n[o].cells()[s],u(c.element(),i.element())&&(h.isNone()&&(h=t.some(e())),h.each(function(t){f.mutateCell(n[o],s,a.elementnew(t,!0))}))})),n},dut=function(t,i,r,u,e){return wut(t,i,r).map(function(o){var s=ls(i,o,u);return function(t,i,r,u,e){for(var c,d,g,s,h,o,k,p,l,y,w=t.row(),b=t.column(),nt=w+r.length,tt=b+f.cellLength(r[0]),v=w;v<nt;v++)for(c=b;c<tt;c++)s=i,h=v,o=c,k=e,l=p=void 0,p=f.getCell(s[h],o),l=n.curry(k,p.element()),y=s[h],1<s.length&&1<f.cellLength(y)&&(0<o&&l(f.getCellElement(y,o-1))||o<y.length-1&&l(f.getCellElement(y,o+1))||0<h&&l(f.getCellElement(s[h-1],o))||h<s.length-1&&l(f.getCellElement(s[h+1],o)))&&nw(i,f.getCellElement(i[v],c),e,u.cell),d=f.getCellElement(r[v-w],c-b),g=u.replace(d),f.mutateCell(i[v],c,a.elementnew(g,!0));return i}(t,s,r,u,e)})},tw=function(n,t,i,r,u){kut(t,n,u,r.cell);var o=gp(i,t),e=ls(i,o,r),s=gp(t,e),f=ls(t,s,r);return f.slice(0,n).concat(e).concat(f.slice(n,f.length))},wf=function(n,t,i,r,u){var e=n.slice(0,t),o=n.slice(t),s=f.mapCells(n[i],function(i,e){return 0<t&&t<n.length&&r(f.getCellElement(n[t-1],e),f.getCellElement(n[t],e))?f.getCell(n[t],e):a.elementnew(u(i.element(),r),!0)});return e.concat([s]).concat(o)},bf=function(n,t,r,u,e){return i.map(n,function(n){var i=0<t&&t<f.cellLength(n)&&u(f.getCellElement(n,t-1),f.getCellElement(n,t))?f.getCell(n,t):a.elementnew(e(f.getCellElement(n,r),u),!0);return f.addCell(n,t,i)})},gut=function(n,t,r,u,e){var o=r+1;return i.map(n,function(n,i){var s=i===t?a.elementnew(e(f.getCellElement(n,r),u),!0):f.getCell(n,r);return f.addCell(n,o,s)})},nft=function(n,t,i,r,u){var e=t+1,o=n.slice(0,e),s=n.slice(e),h=f.mapCells(n[t],function(n,t){return t===i?a.elementnew(u(n.element(),r),!0):n});return o.concat([h]).concat(s)},tft=function(n,t,i){return n.slice(0,t).concat(n.slice(i+1))},ift=function(n,t,r){var u=i.map(n,function(n){var i=n.cells().slice(0,t).concat(n.cells().slice(r+1));return a.rowcells(i,n.section())});return i.filter(u,function(n){return 0<n.cells().length})},iw=function(n,t,r,u){return i.map(n,function(n){return f.mapCells(n,function(n){return f=n,i.exists(t,function(n){return r(f.element(),n.element())})?a.elementnew(u(n.element(),r),!0):n;var f})})},rw=function(n,t,i,r){return f.getCellElement(n[t],i)!==undefined&&0<t&&r(f.getCellElement(n[t-1],i),f.getCellElement(n[t],i))},uw=function(n,t,i){return 0<t&&i(f.getCellElement(n,t-1),f.getCellElement(n,t))},fw=function(n,t,r,u){var e=i.bind(n,function(i,u){return rw(n,u,t,r)||uw(i,t,r)?[]:[f.getCell(i,t)]});return iw(n,e,r,u)},ew=function(n,t,r,u){var f=n[t],e=i.bind(f.cells(),function(i,u){return rw(n,t,u,r)||uw(f,u,r)?[]:[i]});return iw(n,e,r,u)},su=function(n){return{fold:n}},ow=function(){return su(function(n){return n()})},rft=function(n){return su(function(t,i){return i(n)})},uft=function(n,t){return su(function(i,r,u){return u(n,t)})},fft=function(n,t,i){return su(function(r,u,f,e){return e(n,t,i)})},eft=function(n,t){return su(function(i,r,u,f,e){return e(n,t)})},oft=function(t,r,u,f){var h,o,e=t.slice(0),l=(o=r,0===(h=t).length?ow():1===h.length?rft(0):0===o?uft(0,1):o===h.length-1?eft(o-1,o):0<o&&o<h.length-1?fft(o-1,o,o+1):ow()),s=function(t){return i.map(t,n.constant(0))},a=n.constant(s(e)),c=function(n,t){var r,i,o;return 0<=u?(r=Math.max(f.minCellWidth(),e[t]-u),s(e.slice(0,n)).concat([u,r-e[t]]).concat(s(e.slice(t+1)))):(i=Math.max(f.minCellWidth(),e[n]+u),o=e[n]-i,s(e.slice(0,n)).concat([i-e[n],o]).concat(s(e.slice(t+1))))},v=c;return l.fold(a,function(n){return f.singleColumnWidth(e[n],u)},v,function(n,t,i){return c(t,i)},function(n,t){if(0<=u)return s(e.slice(0,t)).concat([u]);var i=Math.max(f.minCellWidth(),e[t]+u);return s(e.slice(0,t)).concat([i-e[t]])})},sw=function(n,t){return u.has(n,t)&&1<parseInt(u.get(n,t),10)},wt={hasColspan:function(n){return sw(n,"colspan")},hasRowspan:function(n){return sw(n,"rowspan")},minWidth:n.constant(10),minHeight:n.constant(10),getInt:function(n,t){return parseInt(c.get(n,t),10)}},hw=function(n,t,i){return c.getRaw(n,t).fold(function(){return i(n)+"px"},function(n){return n})},sft=function(n){return hw(n,"width",d.getPixelWidth)},hft=function(n){return hw(n,"height",d.getHeight)},as=function(t,r,u,f,e){var o=ip(t),s=i.map(o,function(n){return n.map(r.edge)});return i.map(o,function(t,i){return t.filter(n.not(wt.hasColspan)).fold(function(){var n=np(s,i);return f(n)},function(n){return u(n,e)})})},cw=function(n){return n.map(function(n){return n+"px"}).getOr("")},lw=function(t,r,u,f){var e=rp(t),o=i.map(e,function(n){return n.map(r.edge)});return i.map(e,function(t,i){return t.filter(n.not(wt.hasRowspan)).fold(function(){var n=np(o,i);return f(n)},function(n){return u(n)})})},vs={getRawWidths:function(n,t){return as(n,t,sft,cw)},getPixelWidths:function(n,t,i){return as(n,t,d.getPixelWidth,function(n){return n.getOrThunk(i.minCellWidth)},i)},getPercentageWidths:function(n,t,i){return as(n,t,d.getPercentageWidth,function(n){return n.fold(function(){return i.minCellWidth()},function(n){return n/i.pixelWidth()*100})},i)},getPixelHeights:function(n,t){return lw(n,t,d.getHeight,function(n){return n.getOrThunk(wt.minHeight)})},getRawHeights:function(n,t){return lw(n,t,hft,cw)}},aw=function(n,t,i){for(var u=0,r=n;r<t;r++)u+=i[r]!==undefined?i[r]:0;return u},vw=function(t,r){var u=y.justCells(t);return i.map(u,function(t){var i=aw(t.column(),t.column()+t.colspan(),r);return{element:t.element,width:n.constant(i),colspan:t.colspan}})},cft=function(t,r){var u=y.justCells(t);return i.map(u,function(t){var i=aw(t.row(),t.row()+t.rowspan(),r);return{element:t.element,height:n.constant(i),rowspan:t.rowspan}})},lft=function(t,r){return i.map(t.all(),function(t,i){return{element:t.element,height:n.constant(r[i])}})},ys=function(t){var r=parseInt(t,10),u=n.identity;return{width:n.constant(r),pixelWidth:n.constant(r),getWidths:vs.getPixelWidths,getCellDelta:u,singleColumnWidth:function(n,t){return[Math.max(wt.minWidth(),n+t)-n]},minCellWidth:wt.minWidth,setElementWidth:d.setPixelWidth,setTableWidth:function(n,t){var r=i.foldr(t,function(n,t){return n+t},0);d.setPixelWidth(n,r)}}},aft=function(t,i){var f,e,o,s,u,r,h;return d.percentageBasedSizeRegex().test(i)?(f=d.percentageBasedSizeRegex().exec(i),o=f[1],s=t,u=parseFloat(o),r=yi(s),{width:n.constant(u),pixelWidth:n.constant(r),getWidths:vs.getPercentageWidths,getCellDelta:function(n){return n/r*100},singleColumnWidth:function(n){return[100-n]},minCellWidth:function(){return wt.minWidth()/r*100},setElementWidth:d.setPercentageWidth,setTableWidth:function(n,t,i){var r=u+i;d.setPercentageWidth(n,r)}}):d.pixelBasedSizeRegex().test(i)?(e=d.pixelBasedSizeRegex().exec(i),ys(e[1])):(h=yi(t),ys(h))},yw=function(n){return d.getRawWidth(n).fold(function(){var t=yi(n);return ys(t)},function(t){return aft(n,t)})},pw=function(n){return y.generate(n)},ww=function(n){var t=ri(n);return pw(t)},vft=function(n,t,r,u){var f=yw(n),o=f.getCellDelta(t),e=ww(n),s=f.getWidths(e,u,f),c=oft(s,r,o,f),h=i.map(c,function(n,t){return n+s[t]}),l=vw(e,h);i.each(l,function(n){f.setElementWidth(n.element(),n.width())});r===e.grid().columns()-1&&f.setTableWidth(n,h,o)},yft=function(n,t,r,u){var f=ww(n),h=vs.getPixelHeights(f,u),e=i.map(h,function(n,i){return r===i?Math.max(t+n,wt.minHeight()):n}),c=cft(f,e),l=lft(f,e),o,s;i.each(l,function(n){d.setHeight(n.element(),n.height())});i.each(c,function(n){d.setHeight(n.element(),n.height())});s=(o=e,i.foldr(o,function(n,t){return n+t},0));d.setHeight(n,s)},pft=function(n,t,r){var u=yw(n),f=pw(t),e=u.getWidths(f,r,u),o=vw(f,e),s;i.each(o,function(n){u.setElementWidth(n.element(),n.width())});s=i.foldr(e,function(n,t){return t+n},0);0<o.length&&u.setElementWidth(n,s)},bw=function(n){0===k.cells(n).length&&ut.remove(n)},gt=l.immutable("grid","cursor"),hu=function(n,t,i){return ps(n,t,i).orThunk(function(){return ps(n,0,0)})},ps=function(n,i,r){return t.from(n[i]).bind(function(n){return t.from(n.cells()[r]).bind(function(n){return t.from(n.element())})})},ft=function(n,t,i){return gt(n,ps(n,t,i))},ws=function(n){return i.foldl(n,function(n,t){return i.exists(n,function(n){return n.row()===t.row()})?n:n.concat([t])},[]).sort(function(n,t){return n.row()-t.row()})},bs=function(n){return i.foldl(n,function(n,t){return i.exists(n,function(n){return n.column()===t.column()})?n:n.concat([t])},[]).sort(function(n,t){return n.column()-t.column()})},kw=function(n,t,i){var r=kn(n,i),u=y.generate(r);return lf(u,t,!0)},fi=pft,ct={insertRowBefore:w(function(n,t,i,r){var f=t.row(),u=t.row(),e=wf(n,u,f,i,r.getOrInit);return ft(e,u,t.column())},pt,n.noop,n.noop,rt),insertRowsBefore:w(function(n,t,r,u){var e=t[0].row(),f=t[0].row(),o=ws(t),s=i.foldl(o,function(n){return wf(n,f,e,r,u.getOrInit)},n);return ft(s,f,t[0].column())},pi,n.noop,n.noop,rt),insertRowAfter:w(function(n,t,i,r){var f=t.row(),u=t.row()+t.rowspan(),e=wf(n,u,f,i,r.getOrInit);return ft(e,u,t.column())},pt,n.noop,n.noop,rt),insertRowsAfter:w(function(n,t,r,u){var f=ws(t),o=f[f.length-1].row(),e=f[f.length-1].row()+f[f.length-1].rowspan(),s=i.foldl(f,function(n){return wf(n,e,o,r,u.getOrInit)},n);return ft(s,e,t[0].column())},pi,n.noop,n.noop,rt),insertColumnBefore:w(function(n,t,i,r){var f=t.column(),u=t.column(),e=bf(n,u,f,i,r.getOrInit);return ft(e,t.row(),u)},pt,fi,n.noop,rt),insertColumnsBefore:w(function(n,t,r,u){var f=bs(t),o=f[0].column(),e=f[0].column(),s=i.foldl(f,function(n){return bf(n,e,o,r,u.getOrInit)},n);return ft(s,t[0].row(),e)},pi,fi,n.noop,rt),insertColumnAfter:w(function(n,t,i,r){var f=t.column(),u=t.column()+t.colspan(),e=bf(n,u,f,i,r.getOrInit);return ft(e,t.row(),u)},pt,fi,n.noop,rt),insertColumnsAfter:w(function(n,t,r,u){var e=t[t.length-1].column(),f=t[t.length-1].column()+t[t.length-1].colspan(),o=bs(t),s=i.foldl(o,function(n){return bf(n,f,e,r,u.getOrInit)},n);return ft(s,t[0].row(),f)},pi,fi,n.noop,rt),splitCellIntoColumns:w(function(n,t,i,r){var u=gut(n,t.row(),t.column(),i,r.getOrInit);return ft(u,t.row(),t.column())},pt,fi,n.noop,rt),splitCellIntoRows:w(function(n,t,i,r){var u=nft(n,t.row(),t.column(),i,r.getOrInit);return ft(u,t.row(),t.column())},pt,n.noop,n.noop,rt),eraseColumns:w(function(n,t){var i=bs(t),r=ift(n,i[0].column(),i[i.length-1].column()),u=hu(r,t[0].row(),t[0].column());return gt(r,u)},pi,fi,bw,rt),eraseRows:w(function(n,t){var i=ws(t),r=tft(n,i[0].row(),i[i.length-1].row()),u=hu(r,t[0].row(),t[0].column());return gt(r,u)},pi,n.noop,bw,rt),makeColumnHeader:w(function(n,t,i,r){var u=fw(n,t.column(),i,r.replaceOrInit);return ft(u,t.row(),t.column())},pt,n.noop,n.noop,cf("row","th")),unmakeColumnHeader:w(function(n,t,i,r){var u=fw(n,t.column(),i,r.replaceOrInit);return ft(u,t.row(),t.column())},pt,n.noop,n.noop,cf(null,"td")),makeRowHeader:w(function(n,t,i,r){var u=ew(n,t.row(),i,r.replaceOrInit);return ft(u,t.row(),t.column())},pt,n.noop,n.noop,cf("col","th")),unmakeRowHeader:w(function(n,t,i,r){var u=ew(n,t.row(),i,r.replaceOrInit);return ft(u,t.row(),t.column())},pt,n.noop,n.noop,cf(null,"td")),mergeCells:w(function(i,r,u){var f=r.cells(),e;return prt(f),e=but(i,r.bounds(),u,n.constant(f[0])),gt(e,t.from(f[0]))},aut,n.noop,n.noop,yy),unmergeCells:w(function(n,r,u,f){var e=i.foldr(r,function(n,t){return nw(n,t,u,f.combine(t))},n);return gt(e,t.from(r[0]))},vut,fi,n.noop,yy),pasteCells:w(function(n,i,r){var u,f,e,o,s=(u=i.clipboard(),f=i.generators(),e=ri(u),o=y.generate(e),lf(o,f,!0)),h=a.address(i.row(),i.column());return dut(h,n,s,i.generators(),r).fold(function(){return gt(n,t.some(i.element()))},function(n){var t=hu(n,i.row(),i.column());return gt(n,t)})},lut,fi,n.noop,rt),pasteRowsBefore:w(function(n,t,i){var u=n[t.cells[0].row()],f=t.cells[0].row(),e=kw(t.clipboard(),t.generators(),u),r=tw(f,n,e,t.generators(),i),o=hu(r,t.cells[0].row(),t.cells[0].column());return gt(r,o)},bp,n.noop,n.noop,rt),pasteRowsAfter:w(function(n,t,i){var u=n[t.cells[0].row()],f=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),e=kw(t.clipboard(),t.generators(),u),r=tw(f,n,e,t.generators(),i),o=hu(r,t.cells[0].row(),t.cells[0].column());return gt(r,o)},bp,n.noop,n.noop,rt)},wi=function(n){return r.fromDom(n.getBody())},kf=function(n){return n.getBoundingClientRect().width},dw=function(n){return n.getBoundingClientRect().height},gw=function(n){return function(t){return s.eq(t,wi(n))}},lt=function(n){return/^[0-9]+$/.test(n)&&(n+="px"),n},ks=function(n){var t=nt.descendants(n,"td[data-mce-style],th[data-mce-style]");u.remove(n,"data-mce-style");i.each(t,function(n){u.remove(n,"data-mce-style")})},nb=function(n){return"rtl"===c.get(n,"direction")?"rtl":"ltr"},wft={onDirection:function(n,t){return function(i){return"rtl"===nb(i)?t:n}},getDirection:nb},bft={isRtl:n.constant(!1)},kft={isRtl:n.constant(!0)},ds={directionAt:function(n){return"rtl"===wft.getDirection(n)?kft:bft}},dft=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],gft={"border-collapse":"collapse",width:"100%"},net={border:"1"},tb=function(n){return n.getParam("table_cell_advtab",!0,"boolean")},ib=function(n){return n.getParam("table_row_advtab",!0,"boolean")},rb=function(n){return n.getParam("table_advtab",!0,"boolean")},gs=function(n){return n.getParam("table_style_by_css",!1,"boolean")},ub=function(n){return n.getParam("table_cell_class_list",[],"array")},fb=function(n){return n.getParam("table_row_class_list",[],"array")},eb=function(n){return n.getParam("table_class_list",[],"array")},ob=function(n){return!1===n.getParam("table_responsive_width")},sb=function(n,t){return n.fire("newrow",{node:t})},hb=function(n,t){return n.fire("newcell",{node:t})},cb=function(n,t,i,r){n.fire("ObjectResizeStart",{target:t,width:i,height:r})},lb=function(n,t,i,r){n.fire("ObjectResized",{target:t,width:i,height:r})},tet=function(u,f){var s,h=function(n){return"table"===o.name(wi(n))},c=(s=u.getParam("table_clone_elements"),b.isString(s)?t.some(s.split(/[ ,]/)):Array.isArray(s)?t.some(s):t.none()),e=function(n,f,e,o){return function(s,h){ks(s);var l=o(),a=r.fromDom(u.getDoc()),v=hy(ds.directionAt),y=ga(e,a,c);return f(s)?n(l,s,h,y,v).bind(function(n){return i.each(n.newRows(),function(n){sb(u,n.dom())}),i.each(n.newCells(),function(n){hb(u,n.dom())}),n.cursor().map(function(n){var t=u.dom.createRng();return t.setStart(n.dom(),0),t.setEnd(n.dom(),0),t})}):t.none()}};return{deleteRow:e(ct.eraseRows,function(n){var t=cy(n);return!1===h(u)||1<t.rows()},n.noop,f),deleteColumn:e(ct.eraseColumns,function(n){var t=cy(n);return!1===h(u)||1<t.columns()},n.noop,f),insertRowsBefore:e(ct.insertRowsBefore,n.always,n.noop,f),insertRowsAfter:e(ct.insertRowsAfter,n.always,n.noop,f),insertColumnsBefore:e(ct.insertColumnsBefore,n.always,ty,f),insertColumnsAfter:e(ct.insertColumnsAfter,n.always,ty,f),mergeCells:e(ct.mergeCells,n.always,n.noop,f),unmergeCells:e(ct.unmergeCells,n.always,n.noop,f),pasteRowsBefore:e(ct.pasteRowsBefore,n.always,n.noop,f),pasteRowsAfter:e(ct.pasteRowsAfter,n.always,n.noop,f),pasteCells:e(ct.pasteCells,n.always,n.noop,f)}},iet=function(n,t,i){var u=ri(n),r=y.generate(u);return pi(r,t).map(function(n){var t=lf(r,i,!1).slice(n[0].row(),n[n.length-1].row()+n[n.length-1].rowspan()),u=cut(t,i);return grt(u)})},p=tinymce.util.Tools.resolve("tinymce.util.Tools"),nh=function(n,t,i){i&&n.formatter.apply("align"+i,{},t)},ret=function(n,t,i){i&&n.formatter.apply("valign"+i,{},t)},th=function(n,t){p.each("left center right".split(" "),function(i){n.formatter.remove("align"+i,{},t)})},uet=function(n,t){p.each("top middle bottom".split(" "),function(i){n.formatter.remove("valign"+i,{},t)})},ab=function(n,t,i){var r;return function(t,r){for(var f,u=0;u<r.length;u++)if(f=n.getStyle(r[u],i),void 0===t&&(t=f),t!==f)return"";return t}(r,n.select("td,th",t))},ih=function(n,t){var f=n.dom,u=t.control.rootControl,r=u.toJSON(),i=f.parseStyle(r.style);"style"===t.control.name()?(u.find("#borderStyle").value(i["border-style"]||"")[0].fire("select"),u.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),u.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change"),u.find("#width").value(i.width||"").fire("change"),u.find("#height").value(i.height||"").fire("change")):(i["border-style"]=r.borderStyle,i["border-color"]=r.borderColor,i["background-color"]=r.backgroundColor,i.width=r.width?lt(r.width):"",i.height=r.height?lt(r.height):"");u.find("#style").value(f.serializeStyle(f.parseStyle(f.serializeStyle(i))))},rh=function(t){var i=function(){var n=t.getParam("color_picker_callback");if(n)return function(i){return n.call(t,function(n){i.control.value(n).fire("change")},i.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:n.curry(ih,t)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:n.curry(ih,t),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:i()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:i()}]}]}},uh=function(n,t,i){var r=function(n,i){return i=i||[],p.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t&&t(u));i.push(u)}),i};return r(n,i||[])},ni=ih,fh=function(n,t){var i=n.parseStyle(n.getAttrib(t,"style")),r={};return i["border-style"]&&(r.borderStyle=i["border-style"]),i["border-color"]&&(r.borderColor=i["border-color"]),i["background-color"]&&(r.backgroundColor=i["background-color"]),r.style=n.serializeStyle(i),r},vb=function(n,t,i){function f(n,t,i){i&&u.setAttrib(n,t,i)}function e(n,t,i){i&&u.setStyle(n,t,i)}var r,u=n.dom;ni(n,i);r=i.control.rootControl.toJSON();n.undoManager.transact(function(){p.each(t,function(i){var o,s;f(i,"scope",r.scope);1===t.length?f(i,"style",r.style):(o=i,s=r.style,delete o.dataset.mceStyle,o.style.cssText+=";"+s);f(i,"class",r["class"]);e(i,"width",lt(r.width));e(i,"height",lt(r.height));r.type&&i.nodeName.toLowerCase()!==r.type&&(i=u.rename(i,r.type));1===t.length&&(th(n,i),uet(n,i));r.align&&nh(n,i,r.align);r.valign&&ret(n,i,r.valign)});n.focus()})},fet=function(t){var u,o,c,f=[],s,i,r,e,h;(f=t.dom.select("td[data-mce-selected],th[data-mce-selected]"),u=t.dom.getParent(t.selection.getStart(),"td,th"),!f.length&&u&&f.push(u),u=u||f[0])&&(1<f.length?o={width:"",height:"",scope:"","class":"",align:"",valign:"",style:"",type:u.nodeName.toLowerCase()}:(i=u,r=(s=t).dom,e={width:r.getStyle(i,"width")||r.getAttrib(i,"width"),height:r.getStyle(i,"height")||r.getAttrib(i,"height"),scope:r.getAttrib(i,"scope"),"class":r.getAttrib(i,"class"),type:i.nodeName.toLowerCase(),style:"",align:"",valign:""},p.each("left center right".split(" "),function(n){s.formatter.matchNode(i,"align"+n)&&(e.align=n)}),p.each("top middle bottom".split(" "),function(n){s.formatter.matchNode(i,"valign"+n)&&(e.valign=n)}),tb(s)&&p.extend(e,fh(r,i)),o=e),0<ub(t).length&&(c={name:"class",type:"listbox",label:"Class",values:uh(ub(t),function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"td",classes:[n.value]})})})}),h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:n.curry(ni,t)},{label:"Height",name:"height",onchange:n.curry(ni,t)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},c]},tb(t)?t.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:o,body:[{title:"General",type:"form",items:h},rh(t)],onsubmit:n.curry(vb,t,f)}):t.windowManager.open({title:"Cell properties",data:o,body:h,onsubmit:n.curry(vb,t,f)}))},eet=function(t){var l,a,o,v,r,s,h,i,u,e,c=t.dom,f=[];l=c.getParent(t.selection.getStart(),"table");a=c.getParent(t.selection.getStart(),"td,th");p.each(l.rows,function(n){p.each(n.cells,function(t){if(c.getAttrib(t,"data-mce-selected")||t===a)return f.push(n),!1})});(o=f[0])&&(1<f.length?r={height:"",scope:"",style:"","class":"",align:"",type:o.parentNode.nodeName.toLowerCase()}:(i=o,u=(h=t).dom,e={height:u.getStyle(i,"height")||u.getAttrib(i,"height"),scope:u.getAttrib(i,"scope"),"class":u.getAttrib(i,"class"),align:"",style:"",type:i.parentNode.nodeName.toLowerCase()},p.each("left center right".split(" "),function(n){h.formatter.matchNode(i,"align"+n)&&(e.align=n)}),ib(h)&&p.extend(e,fh(u,i)),r=e),0<fb(t).length&&(v={name:"class",type:"listbox",label:"Class",values:uh(fb(t),function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"tr",classes:[n.value]})})})}),s={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},v]},ib(t)?t.windowManager.open({title:"Row properties",data:r,bodyType:"tabpanel",body:[{title:"General",type:"form",items:s},rh(t)],onsubmit:n.curry(yb,t,f,r)}):t.windowManager.open({title:"Row properties",data:r,body:s,onsubmit:n.curry(yb,t,f,r)}))},oet=tinymce.util.Tools.resolve("tinymce.Env"),set={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},het=function(n,t,i,f,e){var s,a,y,h,p,l,o;for(void 0===e&&(e=set),s=r.fromTag("table"),c.setAll(s,e.styles),u.setAll(s,e.attributes),a=r.fromTag("tbody"),v.append(s,a),y=[],h=0;h<n;h++){for(p=r.fromTag("tr"),l=0;l<t;l++)o=h<i||l<f?r.fromTag("th"):r.fromTag("td"),l<f&&u.set(o,"scope","row"),h<i&&u.set(o,"scope","col"),v.append(o,r.fromTag("br")),e.percentages&&c.set(o,"width",100/t+"%"),v.append(p,o);y.push(p)}return ci.append(a,y),s},cet=function(n){return n.dom().innerHTML},aet=function(n){var t=r.fromTag("div"),i=r.fromDom(n.dom().cloneNode(!0));return v.append(t,i),cet(t)},vet=function(n,t){n.selection.select(t.dom(),!0);n.selection.collapse(!0)},eh=function(t,r,f){var e,o,s=t.getParam("table_default_styles",gft,"object"),v={styles:s,attributes:(o=t,o.getParam("table_default_attributes",net,"object")),percentages:(e=s.width,b.isString(e)&&-1!==e.indexOf("%")&&!ob(t))},l=het(f,r,0,0,v),a;return u.set(l,"data-mce-id","__mce"),a=aet(l),t.insertContent(a),h.descendant(wi(t),'table[data-mce-id="__mce"]').map(function(r){var f,e,o,s;return ob(t)&&c.set(r,"width",c.get(r,"width")),u.remove(r,"data-mce-id"),f=t,e=r,i.each(nt.descendants(e,"tr"),function(n){sb(f,n.dom());i.each(nt.descendants(n,"th,td"),function(n){hb(f,n.dom())})}),o=t,s=r,h.descendant(s,"td,th").each(n.curry(vet,o)),r.dom()}).getOr(null)},wb=function(n,t,i){var u,r,f=n.dom;ni(n,i);!1===(r=i.control.rootControl.toJSON())["class"]&&delete r["class"];n.undoManager.transact(function(){t||(t=eh(n,r.cols||1,r.rows||1)),function(n,t,i){var o,u=n.dom,f={},r={},e;if(f["class"]=i["class"],r.height=lt(i.height),u.getAttrib(t,"width")&&!gs(n)?f.width=(o=i.width)?o.replace(/px$/,""):"":r.width=lt(i.width),gs(n)?(r["border-width"]=lt(i.border),r["border-spacing"]=lt(i.cellspacing),p.extend(f,{"data-mce-border-color":i.borderColor,"data-mce-cell-padding":i.cellpadding,"data-mce-border":i.border})):p.extend(f,{border:i.border,cellpadding:i.cellpadding,cellspacing:i.cellspacing}),gs(n)&&t.children)for(e=0;e<t.children.length;e++)pb(u,t.children[e],{"border-width":lt(i.border),"border-color":i.borderColor,padding:lt(i.cellpadding)});i.style?p.extend(r,u.parseStyle(i.style)):r=p.extend({},u.parseStyle(u.getAttrib(t,"style")),r);f.style=u.serializeStyle(r);u.setAttribs(t,f)}(n,t,r);(u=f.select("caption",t)[0])&&!r.caption&&f.remove(u);!u&&r.caption&&((u=f.create("caption")).innerHTML=oet.ie?" ":'<br data-mce-bogus="1"/>',t.insertBefore(u,t.firstChild));th(n,t);r.align&&nh(n,t,r.align);n.focus();n.addVisual()})},bb=function(t,i){var o,h,c,a,l,e,r,u,s,v,y=t.dom,f={};!0===i?(o=y.getParent(t.selection.getStart(),"table"))&&(r=o,u=(e=t).dom,s={width:u.getStyle(r,"width")||u.getAttrib(r,"width"),height:u.getStyle(r,"height")||u.getAttrib(r,"height"),cellspacing:u.getStyle(r,"border-spacing")||u.getAttrib(r,"cellspacing"),cellpadding:u.getAttrib(r,"data-mce-cell-padding")||u.getAttrib(r,"cellpadding")||ab(e.dom,r,"padding"),border:u.getAttrib(r,"data-mce-border")||u.getAttrib(r,"border")||ab(e.dom,r,"border"),borderColor:u.getAttrib(r,"data-mce-border-color"),caption:!!u.select("caption",r)[0],"class":u.getAttrib(r,"class")},p.each("left center right".split(" "),function(n){e.formatter.matchNode(r,"align"+n)&&(s.align=n)}),rb(e)&&p.extend(s,fh(u,r)),f=s):(h={label:"Cols",name:"cols"},c={label:"Rows",name:"rows"});0<eb(t).length&&(f["class"]&&(f["class"]=f["class"].replace(/\s*mce\-item\-table\s*/g,"")),a={name:"class",type:"listbox",label:"Class",values:uh(eb(t),function(n){n.value&&(n.textStyle=function(){return t.formatter.getCssText({block:"table",classes:[n.value]})})})});l={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:(v=t,v.getParam("table_appearance_options",!0,"boolean")?[h,c,{label:"Width",name:"width",onchange:n.curry(ni,t)},{label:"Height",name:"height",onchange:n.curry(ni,t)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[h,c,{label:"Width",name:"width",onchange:n.curry(ni,t)},{label:"Height",name:"height",onchange:n.curry(ni,t)}])},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},a]};rb(t)?t.windowManager.open({title:"Table properties",data:f,bodyType:"tabpanel",body:[{title:"General",type:"form",items:l},rh(t)],onsubmit:n.curry(wb,t,o)}):t.windowManager.open({title:"Table properties",data:f,body:l,onsubmit:n.curry(wb,t,o)})},kb=p.each,yet=function(u,f,e,o,s){var c=gw(u),l=function(){return r.fromDom(u.dom.getParent(u.selection.getStart(),"th,td"))},a=function(n){return k.table(n,c)},y=function(n){return{width:kf(n.dom()),height:kf(n.dom())}},h=function(n){var t=l();a(t).each(function(i){var r=fr.forMenu(o,i,t),f=y(i);n(i,r).each(function(n){var o,t,s,r;o=u;t=f;r=y(s=i);t.width===r.width&&t.height===r.height||(cb(o,s.dom(),t.width,t.height),lb(o,s.dom(),r.width,r.height));u.selection.setRng(n);u.focus();e.clear(i);ks(i)})})},p=function(){var i=l();return a(i).bind(function(f){var e=r.fromDom(u.getDoc()),s=fr.forMenu(o,f,i),h=ga(n.noop,e,t.none());return iet(f,s,h)})},w=function(n){s.get().each(function(t){var s=i.map(t,function(n){return lo(n)}),f=l();a(f).bind(function(t){var i=r.fromDom(u.getDoc()),h=nv(i),c=fr.pasteRows(o,t,f,s,h);n(t,c).each(function(n){u.selection.setRng(n);u.focus();e.clear(t)})})})};kb({mceTableSplitCells:function(){h(f.unmergeCells)},mceTableMergeCells:function(){h(f.mergeCells)},mceTableInsertRowBefore:function(){h(f.insertRowsBefore)},mceTableInsertRowAfter:function(){h(f.insertRowsAfter)},mceTableInsertColBefore:function(){h(f.insertColumnsBefore)},mceTableInsertColAfter:function(){h(f.insertColumnsAfter)},mceTableDeleteCol:function(){h(f.deleteColumn)},mceTableDeleteRow:function(){h(f.deleteRow)},mceTableCutRow:function(){s.set(p());h(f.deleteRow)},mceTableCopyRow:function(){s.set(p())},mceTablePasteRowBefore:function(){w(f.pasteRowsBefore)},mceTablePasteRowAfter:function(){w(f.pasteRowsAfter)},mceTableDelete:function(){var t=r.fromDom(u.dom.getParent(u.selection.getStart(),"th,td"));k.table(t,c).filter(n.not(c)).each(function(n){var i=r.fromText(""),t;v.after(n,i);ut.remove(n);t=u.dom.createRng();t.setStart(i.dom(),0);t.setEnd(i.dom(),0);u.selection.setRng(t)})}},function(n,t){u.addCommand(t,n)});kb({mceInsertTable:n.curry(bb,u),mceTableProps:n.curry(bb,u,!0),mceTableRowProps:n.curry(eet,u),mceTableCellProps:n.curry(fet,u)},function(n,t){u.addCommand(t,function(t,i){n(i)})})},db=function(i){var u=t.from(i.dom().documentElement).map(r.fromDom).getOr(i);return{parent:n.constant(u),view:n.constant(i),origin:n.constant(dt(0,0))}},pet=function(t,i){return{parent:n.constant(i),view:n.constant(t),origin:n.constant(dt(0,0))}},sr={create:function(n){return{registry:st.map(n,function(n){return{bind:n.bind,unbind:n.unbind}}),trigger:st.map(n,function(n){return n.trigger})}}},oh={mode:hf.exactly(["compare","extract","mutate","sink"]),sink:hf.exactly(["element","start","stop","destroy"]),api:hf.exactly(["forceDrop","drop","move","delayDrop"])},gb={resolve:up("ephox-dragster").resolve},wet=function(t,i){return function(u){if(t(u)){var f,e,o,s,h,c,l,y=r.fromDom(u.target),a=function(){u.stopPropagation()},v=function(){u.preventDefault()},p=n.compose(v,a),w=(f=y,e=u.clientX,o=u.clientY,s=a,h=v,c=p,l=u,{target:n.constant(f),x:n.constant(e),y:n.constant(o),stop:s,prevent:h,kill:c,raw:n.constant(l)});i(w)}}},nk=function(t,i,r,u,f){var e=wet(r,u);return t.dom().addEventListener(i,e,f),{unbind:n.curry(bet,t,i,e,f)}},bet=function(n,t,i,r){n.dom().removeEventListener(t,i,r)},ket=function(n,t,i,r){return nk(n,t,i,r,!1)},det=function(n,t,i,r){return nk(n,t,i,r,!0)},tk=n.constant(!0),hr={bind:function(n,t,i){return ket(n,t,tk,i)},capture:function(n,t,i){return det(n,t,tk,i)}},get=oh.mode({compare:function(n,t){return dt(t.left()-n.left(),t.top()-n.top())},extract:function(n){return t.some(dt(n.x(),n.y()))},sink:function(n,t){var e,o,f,i=(e=t,o=os.merge({layerClass:gb.resolve("blocker")},e),f=r.fromTag("div"),u.set(f,"role","presentation"),c.setAll(f,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),et.add(f,gb.resolve("blocker")),et.add(f,o.layerClass),{element:function(){return f},destroy:function(){ut.remove(f)}}),s=hr.bind(i.element(),"mousedown",n.forceDrop),h=hr.bind(i.element(),"mouseup",n.drop),l=hr.bind(i.element(),"mousemove",n.move),a=hr.bind(i.element(),"mouseout",n.delayDrop);return oh.sink({element:i.element,start:function(n){v.append(n,i.element())},stop:function(){ut.remove(i.element())},destroy:function(){i.destroy();h.unbind();l.unbind();a.unbind();s.unbind()}})},mutate:function(n,t){n.mutate(t.left(),t.top())}}),iot=function(n,t){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){var r=arguments;null!==i&&clearTimeout(i);i=setTimeout(function(){n.apply(null,r);r=i=null},t)}}},rot=function(n,t,i){var e=!1,o=sr.create({start:at([]),stop:at([])}),r=tot(),s=function(){u.stop();r.isOn()&&(r.off(),o.trigger.stop())},h=iot(s,200),f,u;return r.events.move.bind(function(i){t.mutate(n,i.info())}),f=function(n){return function(){var t=Array.prototype.slice.call(arguments,0);if(e)return n.apply(null,t)}},u=t.sink(oh.api({forceDrop:s,drop:f(s),move:f(function(n){h.cancel();r.onEvent(n,t)}),delayDrop:f(h.throttle)}),i),{element:u.element,go:function(n){u.start(n);r.on();o.trigger.start()},on:function(){e=!0},off:function(){e=!1},destroy:function(){u.destroy()},events:o.registry}},uot={transform:function(n,t){var i=t!==undefined?t:{},r=i.mode!==undefined?i.mode:get;return rot(n,r,t)}},eot={any:function(n){return h.first(n).isSome()},ancestor:function(n,t,i){return h.ancestor(n,t,i).isSome()},sibling:function(n,t){return h.sibling(n,t).isSome()},child:function(n,t){return h.child(n,t).isSome()},descendant:function(n,t){return h.descendant(n,t).isSome()},closest:function(n,t,i){return h.closest(n,t,i).isSome()}},oot=vf.resolve("resizer-bar-dragging"),hot=function(n){return n.inline?pet(wi(n),(t=r.fromTag("div"),c.setAll(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),v.append(tr.body(),t),t)):db(r.fromDom(n.getDoc()));var t},cot=function(n,t){n.inline&&ut.remove(t.parent())},lot=function(n){var e,i,o=t.none(),u=t.none(),f=t.none(),s=/(\d+(\.\d+)?)%/,h=function(n){return"TABLE"===n.nodeName};return n.on("init",function(){var r,s=hy(ds.directionAt),e=hot(n),i;(f=t.some(e),("table"===(r=n.getParam("object_resizing",!0))||r)&&n.getParam("table_resize_bars",!0,"boolean"))&&(i=sot(e,s),i.on(),i.events.startDrag.bind(function(){o=t.some(n.selection.getRng())}),i.events.beforeResize.bind(function(t){var i=t.table().dom();cb(n,i,kf(i),dw(i))}),i.events.afterResize.bind(function(t){var r=t.table(),i=r.dom();ks(r);o.each(function(t){n.selection.setRng(t);n.focus()});lb(n,i,kf(i),dw(i));n.undoManager.add()}),u=t.some(i))}),n.on("ObjectResizeStart",function(t){var r,u=t.target;h(u)&&(e=t.width,r=u,i=n.dom.getStyle(r,"width")||n.dom.getAttrib(r,"width"))}),n.on("ObjectResized",function(t){var f=t.target,r,o,c,u;h(f)&&(r=f,s.test(i)?(o=parseFloat(s.exec(i)[1]),c=t.width*o/e,n.dom.setStyle(r,"width",c+"%")):(u=[],p.each(r.rows,function(t){p.each(t.cells,function(t){var i=n.dom.getStyle(t,"width",!0);u.push({cell:t,width:i})})}),p.each(u,function(t){n.dom.setStyle(t.cell,"width",t.width);n.dom.setAttrib(t.cell,"width",null)})))}),{lazyResize:function(){return u},lazyWire:function(){return f.getOr(db(r.fromDom(n.getBody())))},destroy:function(){u.each(function(n){n.destroy()});f.each(function(t){cot(n,t)})}}},df=function(n){return{fold:n}},ik=function(n){return df(function(t){return t(n)})},aot=function(n){return df(function(t,i){return i(n)})},rk=function(n,t){return df(function(i,r,u){return u(n,t)})},vot=function(n){return df(function(t,i,r,u){return u(n)})},uk=function(t,r){return k.table(t,r).bind(function(r){var u=k.cells(r);return i.findIndex(u,function(n){return s.eq(t,n)}).map(function(t){return{index:n.constant(t),all:n.constant(u)}})})},yot=function(n,t){return uk(n,t).fold(function(){return ik(n)},function(t){return t.index()+1<t.all().length?rk(n,t.all()[t.index()+1]):vot(n)})},pot=function(n,t){return uk(n,t).fold(function(){return ik()},function(t){return 0<=t.index()-1?rk(n,t.all()[t.index()-1]):aot(n)})},sh=rr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),g={before:sh.before,on:sh.on,after:sh.after,cata:function(n,t,i,r){return n.fold(t,i,r)},getStart:function(t){return t.fold(n.identity,n.identity,n.identity)}},gf=rr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wot=l.immutable("start","soffset","finish","foffset"),vt={domRange:gf.domRange,relative:gf.relative,exact:gf.exact,exactFromRange:function(n){return gf.exact(n.start(),n.soffset(),n.finish(),n.foffset())},range:wot,getWin:function(n){var t=n.match({domRange:function(n){return r.fromDom(n.startContainer)},relative:function(n){return g.getStart(n)},exact:function(n){return n}});return e.defaultView(t)}},bot=function(n,t,i,r){var u=e.owner(n).dom().createRange();return u.setStart(n.dom(),t),u.setEnd(i.dom(),r),u},kot=function(n,t,i,r){var u=bot(n,t,i,r),f=s.eq(n,i)&&t===r;return u.collapsed&&!f},fk=function(n,t){n.selectNodeContents(t.dom())},ek=function(n){n.deleteContents()},ok=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}},ei={create:function(n){return n.document.createRange()},replaceWith:function(n,t){ek(n);n.insertNode(t.dom())},selectNodeContents:function(n,t){var i=n.document.createRange();return fk(i,t),i},selectNodeContentsUsing:fk,relativeToNative:function(n,t,i){var r,u,f=n.document.createRange();return r=f,t.fold(function(n){r.setStartBefore(n.dom())},function(n,t){r.setStart(n.dom(),t)},function(n){r.setStartAfter(n.dom())}),u=f,i.fold(function(n){u.setEndBefore(n.dom())},function(n,t){u.setEnd(n.dom(),t)},function(n){u.setEndAfter(n.dom())}),f},exactToNative:function(n,t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom(),i),f.setEnd(r.dom(),u),f},deleteContents:ek,cloneFragment:function(n){var t=n.cloneContents();return r.fromDom(t)},getFirstRect:function(n){var r=n.getClientRects(),i=0<r.length?r[0]:n.getBoundingClientRect();return 0<i.width||0<i.height?t.some(i).map(ok):t.none()},getBounds:function(n){var i=n.getBoundingClientRect();return 0<i.width||0<i.height?t.some(i).map(ok):t.none()},isWithin:function(n,t){return t.compareBoundaryPoints(n.END_TO_START,n)<1&&-1<t.compareBoundaryPoints(n.START_TO_END,n)},toString:function(n){return n.toString()}},cu=rr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),sk=function(n,t,i){return t(r.fromDom(i.startContainer),i.startOffset,r.fromDom(i.endContainer),i.endOffset)},hk=function(i,u){var f,o,e,s=(f=i,u.match({domRange:function(i){return{ltr:n.constant(i),rtl:t.none}},relative:function(n,i){return{ltr:di(function(){return ei.relativeToNative(f,n,i)}),rtl:di(function(){return t.some(ei.relativeToNative(f,i,n))})}},exact:function(n,i,r,u){return{ltr:di(function(){return ei.exactToNative(f,n,i,r,u)}),rtl:di(function(){return t.some(ei.exactToNative(f,r,u,n,i))})}}}));return(e=(o=s).ltr()).collapsed?o.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return cu.rtl(r.fromDom(n.endContainer),n.endOffset,r.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return sk(0,cu.ltr,e)}):sk(0,cu.ltr,e)},lu={ltr:cu.ltr,rtl:cu.rtl,diagnose:hk,asLtrRange:function(n,t){return hk(n,t).match({ltr:function(t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom(),i),f.setEnd(r.dom(),u),f},rtl:function(t,i,r,u){var f=n.document.createRange();return f.setStart(r.dom(),u),f.setEnd(t.dom(),i),f}})}},ck=function(n,t,i){return t>=n.left&&t<=n.right&&i>=n.top&&i<=n.bottom},dot=function(n,t,i,r,u){var o,f,e,s;if(0===u)return 0;if(t===r)return u-1;for(o=r,f=1;f<u;f++)if(e=n(f),s=Math.abs(t-e.left),!(i>e.bottom)){if(i<e.top||o<s)return f-1;o=s}return 0},got={locate:function(n,i,r,u){var f=n.dom().createRange(),e;return f.selectNode(i.dom()),e=f.getClientRects(),er(e,function(n){return ck(n,r,u)?t.some(n):t.none()}).map(function(t){return e=n,s=r,h=u,c=t,f=function(n){var t=e.dom().createRange();return t.setStart(o.dom(),n),t.collapse(!0),t},l=li.get(o=i).length,a=dot(function(n){return f(n).getBoundingClientRect()},s,h,c.right,l),f(a);var e,o,s,h,c,f,l,a})}},nst=function(n,i,r,u){var f=n.dom().createRange(),o=e.children(i);return er(o,function(i){return f.selectNode(i.dom()),ck(f.getBoundingClientRect(),r,u)?lk(n,i,r,u):t.none()})},lk=function(n,t,i,r){return(o.isText(t)?got.locate:nst)(n,t,i,r)},tst=function(n,t,i,r){var f=n.dom().createRange();f.selectNode(t.dom());var u=f.getBoundingClientRect(),e=Math.max(u.left,Math.min(u.right,i)),o=Math.max(u.top,Math.min(u.bottom,r));return lk(n,t,e,o)},ak=function(n,t){return t-n.left<n.right-t},vk=function(n,t,i){var r=n.dom().createRange();return r.selectNode(t.dom()),r.collapse(i),r},ist=function(n,t,i){var u=n.dom().createRange(),f,r;return u.selectNode(t.dom()),f=u.getBoundingClientRect(),r=ak(f,i),(!0===r?ai.first:ai.last)(t).map(function(t){return vk(n,t,r)})},rst=function(n,i,r){var u=i.dom().getBoundingClientRect(),f=ak(u,r);return t.some(vk(n,i,f))},ust=function(n,t,i){return(0===e.children(t).length?rst:ist)(n,t,i)},fst=document.caretPositionFromPoint?function(n,i,r){return t.from(n.dom().caretPositionFromPoint(i,r)).bind(function(i){if(null===i.offsetNode)return t.none();var r=n.dom().createRange();return r.setStart(i.offsetNode,i.offset),r.collapse(),t.some(r)})}:document.caretRangeFromPoint?function(n,i,r){return t.from(n.dom().caretRangeFromPoint(i,r))}:function(n,t,i){return r.fromPoint(n,t,i).bind(function(r){var u=function(){return ust(n,r,t)};return 0===e.children(r).length?u():function(n,t,i,r){var f=n.dom().createRange();f.selectNode(t.dom());var u=f.getBoundingClientRect(),e=Math.max(u.left,Math.min(u.right,i)),o=Math.max(u.top,Math.min(u.bottom,r));return tst(n,t,e,o)}(n,r,t,i).orThunk(u)})},est=function(n,t,i){var u=r.fromDom(n.document);return fst(u,t,i).map(function(n){return vt.range(r.fromDom(n.startContainer),n.startOffset,r.fromDom(n.endContainer),n.endOffset)})},ne=function(n,t){var r=o.name(n);return"input"===r?g.after(n):i.contains(["br","img"],r)?0===t?g.before(n):g.after(n):g.on(n,t)},yk=function(n,t){var i=n.fold(g.before,ne,g.after),r=t.fold(g.before,ne,g.after);return vt.relative(i,r)},hh=function(n,t,i,r){var u=ne(n,t),f=ne(i,r);return vt.relative(u,f)},ost=function(n){return n.match({domRange:function(n){var t=r.fromDom(n.startContainer),i=r.fromDom(n.endContainer);return hh(t,n.startOffset,i,n.endOffset)},relative:yk,exact:hh})},sst=yk,hst=hh,pk=function(n,i){t.from(n.getSelection()).each(function(n){n.removeAllRanges();n.addRange(i)})},wk=function(n,t,i,r,u){var f=ei.exactToNative(n,t,i,r,u);pk(n,f)},bk=function(n,t){return lu.diagnose(n,t).match({ltr:function(t,i,r,u){wk(n,t,i,r,u)},rtl:function(t,i,r,u){var f=n.getSelection();f.setBaseAndExtent?f.setBaseAndExtent(t.dom(),i,r.dom(),u):f.extend?(f.collapse(t.dom(),i),f.extend(r.dom(),u)):wk(n,r,u,t,i)}})},cst=function(n){var i=r.fromDom(n.anchorNode),u=r.fromDom(n.focusNode);return kot(i,n.anchorOffset,u,n.focusOffset)?t.some(vt.range(r.fromDom(n.anchorNode),n.anchorOffset,r.fromDom(n.focusNode),n.focusOffset)):function(n){if(0<n.rangeCount){var i=n.getRangeAt(0),u=n.getRangeAt(n.rangeCount-1);return t.some(vt.range(r.fromDom(i.startContainer),i.startOffset,r.fromDom(u.endContainer),u.endOffset))}return t.none()}(n)},lst=function(n){return t.from(n.getSelection()).filter(function(n){return 0<n.rangeCount}).bind(cst)},ast=function(n,t,i,r,u){var f=hst(t,i,r,u);bk(n,f)},vst=function(n){return lst(n).map(function(n){return vt.exact(n.start(),n.soffset(),n.finish(),n.foffset())})},yst=function(n,t,i){var r=sst(t,i);bk(n,r)},pst=function(n){var t=vt.getWin(n).dom(),i=function(n,i,r,u){return ei.exactToNative(t,n,i,r,u)},r=ost(n);return lu.diagnose(t,r).match({ltr:i,rtl:i})},wst=function(n,t){var i=ei.selectNodeContents(n,t);pk(n,i)},bst=function(n){n.getSelection().removeAllRanges()},kst=function(n,t){var i=lu.asLtrRange(n,t);return ei.getFirstRect(i)},dst=function(n,t,i){return est(n,t,i)},gst=tinymce.util.Tools.resolve("tinymce.util.VK"),nht=function(n,t,i,r){return dk(n,t,yot(i),r)},tht=function(n,t,i,r){return dk(n,t,pot(i),r)},kk=function(n,t){var i=vt.exact(t,0,t,0);return pst(i)},dk=function(n,r,u,f){return u.fold(t.none,t.none,function(n,t){return ai.first(t).map(function(n){return kk(0,n)})},function(t){return k.table(t,r).bind(function(r){var u,e=fr.noMenu(t);return n.undoManager.transact(function(){f.insertRowsAfter(r,e)}),u=nt.descendants(r,"tr"),i.last(u).bind(function(n){return h.descendant(n,"td,th").map(function(n){return kk(0,n)})})})})},iht=["table","li","dl"],rht=function(n,t,u,f){var c;if(n.keyCode===gst.TAB){var l=wi(t),e=function(n){var t=o.name(n);return s.eq(n,l)||i.contains(iht,t)},h=t.selection.getRng();h.collapsed&&(c=r.fromDom(h.startContainer),k.cell(c,e).each(function(i){n.preventDefault();(n.shiftKey?tht:nht)(t,e,i,u,f).each(function(n){t.selection.setRng(n)})}))}},cr={response:l.immutable("selection","kill")},lr=function(n){return function(t){return t===n}},uht=lr(38),fht=lr(40),ht={ltr:{isBackward:lr(37),isForward:lr(39)},rtl:{isBackward:lr(39),isForward:lr(37)},isUp:uht,isDown:fht,isNavigation:function(n){return 37<=n&&n<=40}},gk=function(t,i){var u=lu.asLtrRange(t,i);return{start:n.constant(r.fromDom(u.startContainer)),soffset:n.constant(u.startOffset),finish:n.constant(r.fromDom(u.endContainer)),foffset:n.constant(u.endOffset)}},te=function(t,i,r,u){return{start:n.constant(g.on(t,i)),finish:n.constant(g.on(r,u))}},eht=(nr.detect().browser.isSafari(),function(n){var t=n!==undefined?n.dom():document,i=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return dt(i,r)}),oht=eht,sht=function(n,t,i){(i!==undefined?i.dom():document).defaultView.scrollBy(n,t)},td=function(n,i,r,u,f){return s.eq(r,u)?t.none():sv(r,u,i).bind(function(i){var u=i.boxes().getOr([]);return 0<u.length?(f(n,u,i.start(),i.finish()),t.some(cr.response(t.some(te(r,0,r,ui(r))),!0))):t.none()})},ch={sync:function(n,i,r,u,f,e,o){return s.eq(r,f)&&u===e?t.none():h.closest(r,"td,th",i).bind(function(t){return h.closest(f,"td,th",i).bind(function(r){return td(n,i,t,r,o)})})},detect:td,update:function(n,t,i,r,u){return lit(r,n,t,u.firstSelectedSelector(),u.lastSelectedSelector()).map(function(n){return u.clear(i),u.selectRange(i,n.boxes(),n.start(),n.finish()),n.boxes()})}},ar=l.immutableBag(["left","top","right","bottom"],[]),ot={nu:ar,moveUp:function(n,t){return ar({left:n.left(),top:n.top()-t,right:n.right(),bottom:n.bottom()-t})},moveDown:function(n,t){return ar({left:n.left(),top:n.top()+t,right:n.right(),bottom:n.bottom()+t})},moveBottomTo:function(n,t){var i=n.bottom()-n.top();return ar({left:n.left(),top:t-i,right:n.right(),bottom:t})},moveTopTo:function(n,t){var i=n.bottom()-n.top();return ar({left:n.left(),top:t,right:n.right(),bottom:t+i})},getTop:function(n){return n.top()},getBottom:function(n){return n.bottom()},translate:function(n,t,i){return ar({left:n.left()+t,top:n.top()+i,right:n.right()+t,bottom:n.bottom()+i})},toString:function(n){return"("+n.left()+", "+n.top()+") -> ("+n.right()+", "+n.bottom()+")"}},ie=function(n){return ot.nu({left:n.left,top:n.top,right:n.right,bottom:n.bottom})},id=function(n,i){return t.some(n.getRect(i))},rd=function(n,i,r){return o.isElement(i)?id(n,i).map(ie):o.isText(i)?(e=n,f=i,u=r,0<=u&&u<ui(f)?e.getRangedRect(f,u,f,u+1):0<u?e.getRangedRect(f,u-1,f,u):t.none()).map(ie):t.none();var e,f,u},ud=function(n,i){return o.isElement(i)?id(n,i).map(ie):o.isText(i)?n.getRangedRect(i,0,i,ui(i)).map(ie):t.none()},lh=l.immutable("item","mode"),ah=function(n,t,i,r){var u=r!==undefined?r:au;return n.property().parent(t).map(function(n){return lh(n,u)})},au=function(n,t,i,r){var u=r!==undefined?r:vr;return i.sibling(n,t).map(function(n){return lh(n,u)})},vr=function(n,t,i,r){var u=r!==undefined?r:vr,f=n.property().children(t);return i.first(f).map(function(n){return lh(n,u)})},hht=[{current:ah,next:au,fallback:t.none()},{current:au,next:vr,fallback:t.some(ah)},{current:vr,next:vr,fallback:t.some(au)}],fd=function(n,t,r,u,f){return f=f!==undefined?f:hht,i.find(f,function(n){return n.current===r}).bind(function(i){return i.current(n,t,u,i.next).orThunk(function(){return i.fallback.bind(function(i){return fd(n,t,i,u)})})})},bi={backtrack:ah,sidestep:au,advance:vr,go:fd},re={left:function(){return{sibling:function(n,t){return n.query().prevSibling(t)},first:function(n){return 0<n.length?t.some(n[n.length-1]):t.none()}}},right:function(){return{sibling:function(n,t){return n.query().nextSibling(t)},first:function(n){return 0<n.length?t.some(n[0]):t.none()}}}},vh=function(n,i,r,u,f,e){return bi.go(n,i,u,f).bind(function(i){return e(i.item())?t.none():r(i.item())?t.some(i.item()):vh(n,i.item(),r,i.mode(),f,e)})},cht=function(n,t,i,r){return vh(n,t,i,bi.sidestep,re.left(),r)},lht=function(n,t,i,r){return vh(n,t,i,bi.sidestep,re.right(),r)},ed=function(n,t){return 0===n.property().children(t).length},od=function(n,t,i,r){return cht(n,t,i,r)},sd=function(n,t,i,r){return lht(n,t,i,r)},ki={before:function(t,i,r){return od(t,i,n.curry(ed,t),r)},after:function(t,i,r){return sd(t,i,n.curry(ed,t),r)},seekLeft:od,seekRight:sd,walkers:function(){return{left:re.left,right:re.right}},walk:function(n,t,i,r,u){return bi.go(n,t,i,r,u)},backtrack:bi.backtrack,sidestep:bi.sidestep,advance:bi.advance},yr=yo(),pr={gather:function(n,t,i){return ki.gather(yr,n,t,i)},before:function(n,t){return ki.before(yr,n,t)},after:function(n,t){return ki.after(yr,n,t)},seekLeft:function(n,t,i){return ki.seekLeft(yr,n,t,i)},seekRight:function(n,t,i){return ki.seekRight(yr,n,t,i)},walkers:function(){return ki.walkers()},walk:function(n,t,i,r){return ki.walk(yr,n,t,i,r)}},bt=rr([{none:[]},{retry:["caret"]}]),hd=function(t,i,r){return kt.closest(i,es).fold(n.constant(!1),function(n){return ud(t,n).exists(function(n){return t=n,(i=r).left()<t.left()||Math.abs(t.right()-i.left())<1||i.left()>t.right();var i,t})})},aht={point:ot.getTop,adjuster:function(n,t,i,r,u){var f=ot.moveUp(u,5);return Math.abs(i.top()-r.top())<1?bt.retry(f):i.bottom()<u.top()?bt.retry(f):i.bottom()===u.top()?bt.retry(ot.moveUp(u,1)):hd(n,t,u)?bt.retry(ot.translate(f,5,0)):bt.none()},move:ot.moveUp,gather:pr.before},vht={point:ot.getBottom,adjuster:function(n,t,i,r,u){var f=ot.moveDown(u,5);return Math.abs(i.bottom()-r.bottom())<1?bt.retry(f):i.top()>u.bottom()?bt.retry(f):i.top()===u.bottom()?bt.retry(ot.moveDown(u,1)):hd(n,t,u)?bt.retry(ot.translate(f,5,0)):bt.none()},move:ot.moveDown,gather:pr.after},yh=function(n,i,r,u,f){return 0===f?t.some(u):(c=n,l=u.left(),a=i.point(u),c.elementFromPoint(l,a).filter(function(n){return"table"===o.name(n)}).isSome()?(s=u,h=f-1,yh(n,e=i,r,e.move(s,5),h)):n.situsFromPoint(u.left(),i.point(u)).bind(function(e){return e.start().fold(t.none,function(e,o){return ud(n,e,o).bind(function(o){return i.adjuster(n,e,o,r,u).fold(t.none,function(t){return yh(n,i,r,t,f-1)})}).orThunk(function(){return t.some(u)})},t.none)}));var e,s,h,c,l,a},cd=function(n,i,r){var u,f,o,s=n.move(r,5),e=yh(i,n,r,s,100).getOr(s);return(u=n,f=e,o=i,u.point(f)>o.getInnerHeight()?t.some(u.point(f)-o.getInnerHeight()):u.point(f)<0?t.some(-u.point(f)):t.none()).fold(function(){return i.situsFromPoint(e.left(),n.point(e))},function(t){return i.scrollBy(0,t),i.situsFromPoint(e.left(),n.point(e)-t)})},vu={tryUp:n.curry(cd,aht),tryDown:n.curry(cd,vht),ieTryUp:function(n,t){return n.situsFromPoint(t.left(),t.top()-5)},ieTryDown:function(n,t){return n.situsFromPoint(t.left(),t.bottom()+5)},getJumpSize:n.constant(5)},ue=rr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),yht=function(n){return h.closest(n,"tr")},wr={verify:function(n,t,i,r,u,f,e){return h.closest(r,"td,th",e).bind(function(i){return h.closest(t,"td,th",e).map(function(t){return s.eq(i,t)?s.eq(r,i)&&ui(i)===u?f(t):ue.none("in same cell"):rf.sharedOne(yht,[i,t]).fold(function(){return e=t,o=i,r=(u=n).getRect(e),(s=u.getRect(o)).right>r.left&&s.left<r.right?ue.success():f(t);var u,e,o,r,s},function(){return f(t)})})}).getOr(ue.none("default"))},cata:function(n,t,i,r,u){return n.fold(t,i,r,u)},adt:ue},ph={point:l.immutable("element","offset"),delta:l.immutable("element","deltaOffset"),range:l.immutable("element","start","finish"),points:l.immutable("begin","end"),text:l.immutable("element","text")},pht=(l.immutable("ancestor","descendants","element","index"),l.immutable("parent","children","element","index")),wht=function(t,r){return i.findIndex(t,n.curry(s.eq,r))},bht=function(n){return e.parent(n).bind(function(t){var i=e.children(t);return wht(i,n).map(function(r){return pht(t,i,n,r)})})},wh=function(n){return"br"===o.name(n)},bh=function(n,i,r){return i(n,r).bind(function(n){return o.isText(n)&&0===li.get(n).trim().length?bh(n,i,r):t.some(n)})},kht=function(n,t,i,r){return(u=t,f=i,e.child(u,f).filter(wh).orThunk(function(){return e.child(u,f-1).filter(wh)})).bind(function(t){return r.traverse(t).fold(function(){return bh(t,r.gather,n).map(r.relative)},function(n){return bht(n).map(function(n){return g.on(n.parent(),n.index())})})});var u,f},dht=function(t,i,r,u){var o,f,e;return(wh(i)?(o=t,f=i,(e=u).traverse(f).orThunk(function(){return bh(f,e.gather,o)}).map(e.relative)):kht(t,i,r,u)).map(function(t){return{start:n.constant(t),finish:n.constant(t)}})},ght=function(n){return wr.cata(n,function(){return t.none()},function(){return t.none()},function(n){return t.some(ph.point(n,0))},function(n){return t.some(ph.point(n,ui(n)))})},yu=nr.detect(),kh=function(n,i,r,u,f,e){return 0===e?t.none():nct(n,i,r,u,f).bind(function(o){var h=n.fromSitus(o),c=wr.verify(n,r,u,h.finish(),h.foffset(),f.failure,i);return wr.cata(c,function(){return t.none()},function(){return t.some(o)},function(t){return s.eq(r,t)&&0===u?ld(n,r,u,ot.moveUp,f):kh(n,i,t,0,f,e-1)},function(t){return s.eq(r,t)&&u===ui(t)?ld(n,r,u,ot.moveDown,f):kh(n,i,t,ui(t),f,e-1)})})},ld=function(n,t,i,r,u){return rd(n,t,i).bind(function(t){return ad(n,u,r(t,vu.getJumpSize()))})},ad=function(n,i,r){return yu.browser.isChrome()||yu.browser.isSafari()||yu.browser.isFirefox()||yu.browser.isEdge()?i.otherRetry(n,r):yu.browser.isIE()?i.ieRetry(n,r):t.none()},nct=function(n,t,i,r,u){return rd(n,i,r).bind(function(t){return ad(n,u,t)})},tct=function(n,i,r){return(u=n,f=i,e=r,u.getSelection().bind(function(n){return dht(f,n.finish(),n.foffset(),e).fold(function(){return t.some(ph.point(n.finish(),n.foffset()))},function(t){var i=u.fromSitus(t),r=wr.verify(u,n.finish(),n.foffset(),i.finish(),i.foffset(),e.failure,f);return ght(r)})})).bind(function(t){return kh(n,i,t.element(),t.offset(),r,20).map(n.fromSitus)});var u,f,e},ict=function(n,t,i){return kt.ancestor(n,t,i).isSome()},rct=nr.detect(),vd=function(i,r,u,f,o){return h.closest(f,"td,th",r).bind(function(f){return h.closest(f,"table",r).bind(function(c){return l=c,ict(o,function(n){return e.parent(n).exists(function(n){return s.eq(n,l)})})?tct(i,r,u).bind(function(t){return h.closest(t.finish(),"td,th",r).map(function(i){return{start:n.constant(f),finish:n.constant(i),range:n.constant(t)}})}):t.none();var l})})},yd=function(n,i,r,u,f,e){return rct.browser.isIE()?t.none():e(u,i).orThunk(function(){return vd(n,i,r,u,f).map(function(n){var i=n.range();return cr.response(t.some(te(i.start(),i.soffset(),i.finish(),i.foffset())),!0)})})},pd=function(n,t,i,r,u,f,e){return vd(n,i,r,u,f).bind(function(n){return ch.detect(t,i,n.start(),n.finish(),e)})},uct=function(n,i){return h.closest(n,"tr",i).bind(function(n){return h.closest(n,"table",i).bind(function(r){var u=nt.descendants(r,"tr");return s.eq(n,u[0])?pr.seekLeft(r,function(n){return ai.last(n).isSome()},i).map(function(n){var i=ui(n);return cr.response(t.some(te(n,i,n,i)),!0)}):t.none()})})},fct=function(n,i){return h.closest(n,"tr",i).bind(function(n){return h.closest(n,"table",i).bind(function(r){var u=nt.descendants(r,"tr");return s.eq(n,u[u.length-1])?pr.seekRight(r,function(n){return ai.first(n).isSome()},i).map(function(n){return cr.response(t.some(te(n,0,n,0)),!0)}):t.none()})})},wd=function(n,t){return h.closest(n,"td,th",t)},fe={down:{traverse:e.nextSibling,gather:pr.after,relative:g.before,otherRetry:vu.tryDown,ieRetry:vu.ieTryDown,failure:wr.adt.failedDown},up:{traverse:e.prevSibling,gather:pr.before,relative:g.before,otherRetry:vu.tryUp,ieRetry:vu.ieTryUp,failure:wr.adt.failedUp}},br=l.immutable("rows","cols"),bd={mouse:function(n,i,r,u){var l,e,o,h,f,a,v=nd(n),c=(l=v,e=i,o=r,h=u,f=t.none(),a=function(){f=t.none()},{mousedown:function(n){h.clear(e);f=wd(n.target(),o)},mouseover:function(n){f.each(function(t){h.clear(e);wd(n.target(),o).each(function(n){sv(t,n,o).each(function(i){var r=i.boxes().getOr([]);(1<r.length||1===r.length&&!s.eq(t,n))&&(h.selectRange(e,r,i.start(),i.finish()),l.selectContents(n))})})})},mouseup:function(){f.each(a)}});return{mousedown:c.mousedown,mouseover:c.mouseover,mouseup:c.mouseup}},keyboard:function(i,r,u,f){var e=nd(i),o=function(){return f.clear(r),t.none()};return{keydown:function(i,s,h,c,l,a){var v=i.raw().which,y=!0===i.raw().shiftKey;return ko(r,f.selectedSelector()).fold(function(){return ht.isDown(v)&&y?n.curry(pd,e,r,u,fe.down,c,s,f.selectRange):ht.isUp(v)&&y?n.curry(pd,e,r,u,fe.up,c,s,f.selectRange):ht.isDown(v)?n.curry(yd,e,u,fe.down,c,s,fct):ht.isUp(v)?n.curry(yd,e,u,fe.up,c,s,uct):t.none},function(n){var i=function(i){return function(){return er(i,function(t){return ch.update(t.rows(),t.cols(),r,n,f)}).fold(function(){return hv(r,f.firstSelectedSelector(),f.lastSelectedSelector()).map(function(n){var i=ht.isDown(v)||a.isForward(v)?g.after:g.before;return e.setRelativeSelection(g.on(n.first(),0),i(n.table())),f.clear(r),cr.response(t.none(),!0)})},function(){return t.some(cr.response(t.none(),!0))})}};return ht.isDown(v)&&y?i([br(1,0)]):ht.isUp(v)&&y?i([br(-1,0)]):a.isBackward(v)&&y?i([br(0,-1),br(-1,0)]):a.isForward(v)&&y?i([br(0,1),br(1,0)]):ht.isNavigation(v)&&!1===y?o:t.none})()},keyup:function(n,i,e,o,s){return ko(r,f.selectedSelector()).fold(function(){var h=n.raw().which;return 0==(!0===n.raw().shiftKey)?t.none():ht.isNavigation(h)?ch.sync(r,u,i,e,o,s,f.selectRange):t.none()},t.none)}}}},ect=function(n,t){i.each(t,function(t){et.remove(n,t)})},oct=function(n){return function(t){et.add(t,n)}},sct=function(n){return function(t){ect(t,n)}},hct={byClass:function(n){var r=oct(n.selected()),u=sct([n.selected(),n.lastSelected(),n.firstSelected()]),t=function(t){var r=nt.descendants(t,n.selectedSelector());i.each(r,u)};return{clear:t,selectRange:function(u,f,e,o){t(u);i.each(f,r);et.add(e,n.firstSelected());et.add(o,n.lastSelected())},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},byAttr:function(n){var r=function(t){u.remove(t,n.selected());u.remove(t,n.firstSelected());u.remove(t,n.lastSelected())},f=function(t){u.set(t,n.selected(),"1")},t=function(t){var u=nt.descendants(t,n.selectedSelector());i.each(u,r)};return{clear:t,selectRange:function(r,e,o,s){t(r);i.each(e,f);u.set(o,n.firstSelected(),"1");u.set(s,n.lastSelected(),"1")},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}},dh=function(n){return!1===et.has(r.fromDom(n.target),"ephox-snooker-resizer-bar")},lct=p.each,act=function(n){function t(t){return function(){n.execCommand(t)}}var i=[];lct("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"===t?i.push({text:"-"}):i.push(n.menuItems[t])});n.addButton("table",{type:"menubutton",title:"Table",menu:i});n.addButton("tableprops",{title:"Table properties",onclick:t("mceTableProps"),icon:"table"});n.addButton("tabledelete",{title:"Delete table",onclick:t("mceTableDelete")});n.addButton("tablecellprops",{title:"Cell properties",onclick:t("mceTableCellProps")});n.addButton("tablemergecells",{title:"Merge cells",onclick:t("mceTableMergeCells")});n.addButton("tablesplitcells",{title:"Split cell",onclick:t("mceTableSplitCells")});n.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:t("mceTableInsertRowBefore")});n.addButton("tableinsertrowafter",{title:"Insert row after",onclick:t("mceTableInsertRowAfter")});n.addButton("tabledeleterow",{title:"Delete row",onclick:t("mceTableDeleteRow")});n.addButton("tablerowprops",{title:"Row properties",onclick:t("mceTableRowProps")});n.addButton("tablecutrow",{title:"Cut row",onclick:t("mceTableCutRow")});n.addButton("tablecopyrow",{title:"Copy row",onclick:t("mceTableCopyRow")});n.addButton("tablepasterowbefore",{title:"Paste row before",onclick:t("mceTablePasteRowBefore")});n.addButton("tablepasterowafter",{title:"Paste row after",onclick:t("mceTablePasteRowAfter")});n.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:t("mceTableInsertColBefore")});n.addButton("tableinsertcolafter",{title:"Insert column after",onclick:t("mceTableInsertColAfter")});n.addButton("tabledeletecol",{title:"Delete column",onclick:t("mceTableDeleteCol")})},vct=function(n){var t,i=""===(t=n.getParam("table_toolbar",dft))||!1===t?[]:b.isString(t)?t.split(/[ ,]/):b.isArray(t)?t:[];0<i.length&&n.addContextToolbar(function(t){return n.dom.is(t,"table")&&n.getBody().contains(t)},i.join(" "))},yct=function(n,u){function f(t){return function(){n.execCommand(t)}}var s=t.none(),c=[],l=[],a=[],v=[],o=function(n){n.disabled(!0)},h=function(n){n.disabled(!1)},p=function(){var n=this;c.push(n);s.fold(function(){o(n)},function(){h(n)})},e=function(){var n=this;l.push(n);s.fold(function(){o(n)},function(){h(n)})},y,w;n.on("init",function(){n.on("nodechange",function(){var f=t.from(n.dom.getParent(n.selection.getStart(),"th,td"));(s=f.bind(function(n){var t=r.fromDom(n);return k.table(t).map(function(n){return fr.forMenu(u,n,t)})})).fold(function(){i.each(c,o);i.each(l,o);i.each(a,o);i.each(v,o)},function(n){i.each(c,h);i.each(l,h);i.each(a,function(t){t.disabled(n.mergable().isNone())});i.each(v,function(t){t.disabled(n.unmergable().isNone())})})})});y=function(n,t,i,r){var u,f,s,e,o,h=r.getEl().getElementsByTagName("table")[0],c=r.isRtl()||"tl-tr"===r.parent().rel;for(h.nextSibling.innerHTML=t+1+" x "+(i+1),c&&(t=9-t),f=0;f<10;f++)for(u=0;u<10;u++)e=h.rows[f].childNodes[u].firstChild,o=(c?t<=u:u<=t)&&f<=i,n.dom.toggleClass(e,"mce-active",o),o&&(s=e);return s.parentNode};w=!1===n.getParam("table_grid",!0,"boolean")?{text:"Table",icon:"table",context:"table",onclick:f("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(t){t.aria&&(this.parent().hideAll(),t.stopImmediatePropagation(),n.execCommand("mceInsertTable"))},onshow:function(){y(n,0,0,this.menu.items()[0])},onhide:function(){var t=this.menu.items()[0].getEl().getElementsByTagName("a");n.dom.removeClass(t,"mce-active");n.dom.addClass(t[0],"mce-active")},menu:[{type:"container",html:function(){for(var n="",i,n='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">',t=0;t<10;t++){for(n+="<tr>",i=0;i<10;i++)n+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+i)+'" href="#" data-mce-x="'+i+'" data-mce-y="'+t+'"><\/a><\/td>';n+="<\/tr>"}return n+="<\/table>",n+'<div class="mce-text-center" role="presentation">1 x 1<\/div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(t){var i,r,u=t.target;"A"===u.tagName.toUpperCase()&&(i=parseInt(u.getAttribute("data-mce-x"),10),r=parseInt(u.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(i=9-i),i===this.lastX&&r===this.lastY||(y(n,i,r,t.control),this.lastX=i,this.lastY=r))},onclick:function(t){var i=this;"A"===t.target.tagName.toUpperCase()&&(t.preventDefault(),t.stopPropagation(),i.parent().cancel(),n.undoManager.transact(function(){eh(n,i.lastX+1,i.lastY+1)}),n.addVisual())}}]};var b={text:"Table properties",context:"table",onPostRender:p,onclick:f("mceTableProps")},d={text:"Delete table",context:"table",onPostRender:p,cmd:"mceTableDelete"},g={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:f("mceTableInsertRowBefore"),onPostRender:e},{text:"Insert row after",onclick:f("mceTableInsertRowAfter"),onPostRender:e},{text:"Delete row",onclick:f("mceTableDeleteRow"),onPostRender:e},{text:"Row properties",onclick:f("mceTableRowProps"),onPostRender:e},{text:"-"},{text:"Cut row",onclick:f("mceTableCutRow"),onPostRender:e},{text:"Copy row",onclick:f("mceTableCopyRow"),onPostRender:e},{text:"Paste row before",onclick:f("mceTablePasteRowBefore"),onPostRender:e},{text:"Paste row after",onclick:f("mceTablePasteRowAfter"),onPostRender:e}]},nt={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:f("mceTableInsertColBefore"),onPostRender:e},{text:"Insert column after",onclick:f("mceTableInsertColAfter"),onPostRender:e},{text:"Delete column",onclick:f("mceTableDeleteCol"),onPostRender:e}]},tt={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:f("mceTableCellProps"),onPostRender:e},{text:"Merge cells",onclick:f("mceTableMergeCells"),onPostRender:function(){var n=this;a.push(n);s.fold(function(){o(n)},function(t){n.disabled(t.mergable().isNone())})}},{text:"Split cell",onclick:f("mceTableSplitCells"),onPostRender:function(){var n=this;v.push(n);s.fold(function(){o(n)},function(t){n.disabled(t.unmergable().isNone())})}}]};n.addMenuItem("inserttable",w);n.addMenuItem("tableprops",b);n.addMenuItem("deletetable",d);n.addMenuItem("row",g);n.addMenuItem("column",nt);n.addMenuItem("cell",tt)},pct=function(n,u){return{insertTable:function(t,i){return eh(n,t,i)},setClipboardRows:function(n){return f=n,e=u,o=i.map(f,r.fromDom),void e.set(t.from(o));var f,e,o},getClipboardRows:function(){return u.get().fold(function(){},function(n){return i.map(n,function(n){return n.dom()})})}}};kd.add("table",function(n){var i,r=lot(n),u=cct(n,r.lazyResize),f=tet(n,r.lazyWire),e=(i=n,{get:function(){var n=wi(i);return ait(n,vi.selectedSelector()).fold(function(){return i.selection.getStart()===undefined?ur.none():ur.single(i.selection)},function(n){return ur.multiple(n)})}}),o=eu(t.none());return yet(n,f,u,e,o),bit(n,e,f,u),yct(n,e),act(n),vct(n),n.on("PreInit",function(){n.serializer.addTempAttr(vi.firstSelected());n.serializer.addTempAttr(vi.lastSelected())}),n.getParam("table_tab_navigation",!0,"boolean")&&n.on("keydown",function(t){rht(t,n,f,r.lazyWire)}),n.on("remove",function(){r.destroy();u.destroy()}),pct(n,o)})}();!function(){"use strict";var f=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=tinymce.util.Tools.resolve("tinymce.EditorManager"),i=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Delay"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=tinymce.util.Tools.resolve("tinymce.util.VK"),s=function(n){return n.getParam("tab_focus",n.getParam("tabfocus_elements",":prev,:next"))},n=e.DOM,h=function(n){n.keyCode!==u.TAB||n.ctrlKey||n.altKey||n.metaKey||n.preventDefault()},c=function(f){function e(e){function y(i){function u(n){return/INPUT|TEXTAREA|BUTTON/.test(n.tagName)&&t.get(e.id)&&-1!==n.tabIndex&&function i(n){return"BODY"===n.nodeName||"hidden"!==n.type&&"none"!==n.style.display&&"hidden"!==n.style.visibility&&i(n.parentNode)}(n)}if(h=n.select(":input:enabled,*[tabindex]:not(iframe)"),r.each(h,function(n,t){if(n.id===f.id)return a=t,!1}),0<i){for(c=a+1;c<h.length;c++)if(u(h[c]))return h[c]}else for(c=a-1;0<=c;c--)if(u(h[c]))return h[c];return null}var a,h,l,c,v;e.keyCode!==u.TAB||e.ctrlKey||e.altKey||e.metaKey||e.isDefaultPrevented()||!(1===(l=r.explode(s(f))).length&&(l[1]=l[0],l[0]=":prev"),h=e.shiftKey?":prev"===l[0]?y(-1):n.get(l[0]):":next"===l[1]?y(1):n.get(l[1]))||(v=t.get(h.id||h.name),h.id&&v?v.focus():o.setTimeout(function(){i.webkit||window.focus();h.focus()},10),e.preventDefault())}f.on("init",function(){f.inline&&n.setAttrib(f.getBody(),"tabIndex",null);f.on("keyup",h);i.gecko?f.on("keypress keydown",e):f.on("keydown",e)})};f.add("tabfocus",function(n){c(n)})}();!function(){"use strict";function u(n){return n&&1===n.nodeType&&"false"===n.contentEditable}var i=function(n){var t=n,r=function(){return t};return{get:r,set:function(n){t=n},clone:function(){return i(r())}}},s=tinymce.util.Tools.resolve("tinymce.PluginManager"),y=function(n){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(n.settings.plugins)||!s.get("tinymcespellchecker")||("undefined"!=typeof window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))},p=function(n){return n.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},w=function(n){var t=n.getParam("language","en");return n.getParam("spellchecker_language",t)},h=function(n){return n.getParam("spellchecker_rpc_url")},b=function(n){return n.getParam("spellchecker_callback")},c=function(n){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g");return n.getParam("spellchecker_wordchar_pattern",t)},t=tinymce.util.Tools.resolve("tinymce.util.Tools"),k=tinymce.util.Tools.resolve("tinymce.util.URI"),d=tinymce.util.Tools.resolve("tinymce.util.XHR"),g=function(n){return n.fire("SpellcheckStart")},nt=function(n){return n.fire("SpellcheckEnd")},r,tt=function(n,t){function p(n,t){if(!n[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:n.index,end:n.index+n[0].length,text:n[0],data:t}}function h(t){var f=n.getElementsByTagName("*"),e=[],i,r,u;for(t="number"==typeof t?""+t:null,i=0;i<f.length;i++)r=f[i],u=r.getAttribute("data-mce-index"),null!==u&&u.length&&-1!==r.className.indexOf("mce-spellchecker-word")&&(u!==t&&null!==t||e.push(r));return e}function e(n){for(var t=i.length;t--;)if(i[t]===n)return t;return-1}function a(n){for(var t=0,r=i.length;t<r&&!1!==n(i[t],t);t++);return this}function v(n){for(var t,r=h(n?e(n):null),i=r.length;i--;)(t=r[i]).parentNode.insertBefore(t.firstChild,t),t.parentNode.removeChild(t);return this}function y(n){var i=h(e(n)),r=t.dom.createRng();return r.setStartBefore(i[0]),r.setEndAfter(i[i.length-1]),r}var c,f,r,o,s,i=[],l=t.dom;return r=t.schema.getBlockElements(),o=t.schema.getWhiteSpaceElements(),s=t.schema.getShortEndedElements(),{text:f=function w(n){var t;if(3===n.nodeType)return n.data;if(o[n.nodeName]&&!r[n.nodeName])return"";if(u(n))return"\n";if(t="",(r[n.nodeName]||s[n.nodeName])&&(t+="\n"),n=n.firstChild)for(;t+=w(n),n=n.nextSibling;);return t}(n),matches:i,each:a,filter:function(n){var t=[];return a(function(i,r){n(i,r)&&t.push(i)}),i=t,this},reset:function(){return i.splice(0,i.length),v(),this},matchFromElement:function(n){return i[n.getAttribute("data-mce-index")]},elementFromMatch:function(n){return h(e(n))[0]},find:function(n,t){if(f&&n.global)for(;c=n.exec(f);)i.push(p(c,t));return this},add:function(n,t,r){return i.push({start:n,end:n+t,text:f.substr(n,t),data:r}),this},wrap:function(t){return i.length&&function(n,t,i){var c,l,y,a,e,v=[],h=0,f=n,p=0;(t=t.slice(0)).sort(function(n,t){return n.start-t.start});e=t.shift();n:for(;;){if((r[f.nodeName]||s[f.nodeName]||u(f))&&h++,3===f.nodeType&&(!l&&f.length+h>=e.end?(l=f,a=e.end-h):c&&v.push(f),!c&&f.length+h>e.start&&(c=f,y=e.start-h),h+=f.length),c&&l){if(f=i({startNode:c,startNodeIndex:y,endNode:l,endNodeIndex:a,innerNodes:v,match:e.text,matchIndex:p}),h-=l.length-a,l=c=null,v=[],p++,!(e=t.shift()))break}else if((!o[f.nodeName]||r[f.nodeName])&&f.firstChild){if(!u(f)){f=f.firstChild;continue}}else if(f.nextSibling){f=f.nextSibling;continue}for(;;){if(f.nextSibling){f=f.nextSibling;break}if(f.parentNode===n)break n;f=f.parentNode}}}(n,i,function(n){function t(t,r){var u=i[r],f;return u.stencil||(u.stencil=n(u)),f=u.stencil.cloneNode(!1),f.setAttribute("data-mce-index",r),t&&f.appendChild(l.doc.createTextNode(t)),f}return function(n){var e,o,i,u=n.startNode,f=n.endNode,s=n.matchIndex,h=l.doc,r,a,c,y,p;if(u===f)return r=u,i=r.parentNode,0<n.startNodeIndex&&(e=h.createTextNode(r.data.substring(0,n.startNodeIndex)),i.insertBefore(e,r)),a=t(n.match,s),i.insertBefore(a,r),n.endNodeIndex<r.length&&(o=h.createTextNode(r.data.substring(n.endNodeIndex)),i.insertBefore(o,r)),r.parentNode.removeChild(r),a;e=h.createTextNode(u.data.substring(0,n.startNodeIndex));o=h.createTextNode(f.data.substring(n.endNodeIndex));for(var w=t(u.data.substring(n.startNodeIndex),s),b=[],v=0,k=n.innerNodes.length;v<k;++v)c=n.innerNodes[v],y=t(c.data,s),c.parentNode.replaceChild(y,c),b.push(y);return p=t(f.data.substring(0,n.endNodeIndex),s),(i=u.parentNode).insertBefore(e,u),i.insertBefore(w,u),i.removeChild(u),(i=f.parentNode).insertBefore(p,f),i.insertBefore(o,f),i.removeChild(f),p}}(t)),this},unwrap:v,replace:function(n,i){var r=y(n);return r.deleteContents(),0<i.length&&r.insertNode(t.dom.doc.createTextNode(i)),r},rangeFromMatch:y,indexOf:e}},f=function(n,t){if(!t.get()){var i=tt(n.getBody(),n);t.set(i)}return t.get()},l=function(n,i,r,u,f,e,o){var s,c,l,a=b(n);(a||(s=n,c=i,l=r,function(n,i,r,u){var e={method:n,lang:l.get()},f="";e["addToDictionary"===n?"word":"text"]=i;t.each(e,function(n,t){f&&(f+="&");f+=t+"="+encodeURIComponent(n)});d.send({url:new k(c).toAbsolute(h(s)),type:"post",content_type:"application/x-www-form-urlencoded",data:f,success:function(n){if(n=JSON.parse(n))n.error?u(n.error):r(n);else{var t=s.translate("Server response wasn't proper JSON.");u(t)}},error:function(){var n=s.translate("The spelling service was not found: (")+h(s)+s.translate(")");u(n)}})})).call(n.plugins.spellchecker,u,f,e,o)},e=function(n,t,i){n.dom.select("span.mce-spellchecker-word").length||o(n,t,i)},o=function(n,t,i){if(f(n,i).reset(),i.set(null),t.get())return t.set(!1),nt(n),!0},a=function(n){var t=n.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},v=function(n,t,i,r,u){var e,o,s;if("string"!=typeof u&&u.words?(o=!!u.dictionary,e=u.words):e=u,n.setProgressState(!1),function(n){for(var t in n)return!1;return!0}(e))return s=n.translate("No misspellings found."),n.notificationManager.open({text:s,type:"info"}),void t.set(!1);r.set({suggestions:e,hasDictionarySupport:o});f(n,i).find(c(n)).filter(function(n){return!!e[n.text]}).wrap(function(t){return n.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":t.text})});t.set(!0);g(n)},n={spellcheck:function(n,t,i,r,u,e){o(n,i,r)||(n.setProgressState(!0),l(n,t,e,"spellcheck",f(n,r).text,function(t){v(n,i,r,u,t)},function(t){n.notificationManager.open({text:t,type:"error"});n.setProgressState(!1);o(n,i,r)}),n.focus())},checkIfFinished:e,addToDictionary:function(n,t,i,r,u,f,o){n.setProgressState(!0);l(n,t,u,"addToDictionary",f,function(){n.setProgressState(!1);n.dom.remove(o,!0);e(n,i,r)},function(t){n.notificationManager.open({text:t,type:"error"});n.setProgressState(!1)})},ignoreWord:function(n,i,r,u,f,o){n.selection.collapse();o?t.each(n.dom.select("span.mce-spellchecker-word"),function(t){t.getAttribute("data-mce-word")===u&&n.dom.remove(t,!0)}):n.dom.remove(f,!0);e(n,i,r)},findSpansByIndex:function(n,i){var u,e=[],r,f;if((u=t.toArray(n.getBody().getElementsByTagName("span"))).length)for(r=0;r<u.length;r++)f=a(u[r]),null!==f&&f.length&&f===i.toString()&&e.push(u[r]);return e},getElmIndex:a,markErrors:v},it=function(t,i,r,u,f){return{getTextMatcher:function(){return u.get()},getWordCharPattern:function(){return c(t)},markErrors:function(f){n.markErrors(t,i,u,r,f)},getLanguage:function(){return f.get()}}},rt=function(t,i,r,u,f,e){t.addCommand("mceSpellCheck",function(){n.spellcheck(t,i,r,u,f,e)})},ut=function(i,r,u,f,e,o){var c,h,l,a,v=(l=i,c=t.map(p(l).split(","),function(n){return{name:(n=n.split("="))[0],value:n[1]}}),h=[],t.each(c,function(n){h.push({selectable:!0,text:n.name,data:n.value})}),h),y=function(){n.spellcheck(i,r,u,f,o,e)},s={tooltip:"Spellcheck",onclick:y,onPostRender:function(n){var t=n.control;i.on("SpellcheckStart SpellcheckEnd",function(){t.active(u.get())})}};1<v.length&&(s.type="splitbutton",s.menu=v,s.onshow=(a=e,function(n){var t=a.get();n.control.items().each(function(n){n.active(n.settings.data===t)})}),s.onselect=function(n){e.set(n.control.settings.data)});i.addButton("spellchecker",s);i.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:y,selectable:!0,onPostRender:function(){var n=this;n.active(u.get());i.on("SpellcheckStart SpellcheckEnd",function(){n.active(u.get())})}})},ft=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),et=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ot=function(i,u,f,e,o,s){i.on("click",function(h){var a=h.target,c,l;"mce-spellchecker-word"===a.className&&(h.preventDefault(),c=n.findSpansByIndex(i,n.getElmIndex(a)),0<c.length&&(l=i.dom.createRng(),l.setStartBefore(c[0]),l.setEndAfter(c[c.length-1]),i.selection.setRng(l),function(i,u,f,e,o,s,h,c){var a=[],p=f.get().suggestions[h];t.each(p,function(t){a.push({text:t,onclick:function(){i.insertContent(i.dom.encode(t));i.dom.remove(c);n.checkIfFinished(i,e,o)}})});a.push({text:"-"});f.get().hasDictionarySupport&&a.push({text:"Add to Dictionary",onclick:function(){n.addToDictionary(i,u,e,o,s,h,c)}});a.push.apply(a,[{text:"Ignore",onclick:function(){n.ignoreWord(i,e,o,h,c)}},{text:"Ignore all",onclick:function(){n.ignoreWord(i,e,o,h,c,!0)}}]);(r=et.create("menu",{items:a,context:"contextmenu",onautohide:function(n){-1!==n.target.className.indexOf("spellchecker")&&n.preventDefault()},onhide:function(){r.remove();r=null}})).renderTo(document.body);var y=ft.DOM.getPos(i.getContentAreaContainer()),v=i.dom.getPos(c[0]),l=i.dom.getRoot();"BODY"===l.nodeName?(v.x-=l.ownerDocument.documentElement.scrollLeft||l.scrollLeft,v.y-=l.ownerDocument.documentElement.scrollTop||l.scrollTop):(v.x-=l.scrollLeft,v.y-=l.scrollTop);y.x+=v.x;y.y+=v.y;r.moveTo(y.x,y.y+c[0].offsetHeight)}(i,u,f,e,o,s,a.getAttribute("data-mce-word"),c)))})};s.add("spellchecker",function(n,t){if(!1===y(n)){var r=i(!1),u=i(w(n)),f=i(null),e=i(null);return ut(n,t,r,f,u,e),ot(n,t,e,r,f,u),rt(n,t,r,f,e,u),it(n,r,e,f,u,t)}})}();!function(){"use strict";function u(n){return n&&1===n.nodeType&&"false"===n.contentEditable}var o=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return o(i())}}},w=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),b={findAndReplaceDOMText:function(n,t,i,r,f){function y(n,t){var i,r;if(t=t||0,!n[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");if(i=n.index,0<t){if(r=n[t],!r)throw new Error("Invalid capture group");i+=n[0].indexOf(r);n[0]=r}return[i,i+n[0].length,[n[0]]]}var h,c,e,o,l,a,s=[],v=0;if(e=t.ownerDocument,o=f.getBlockElements(),l=f.getWhiteSpaceElements(),a=f.getShortEndedElements(),c=function p(n){var t;if(3===n.nodeType)return n.data;if(l[n.nodeName]&&!o[n.nodeName])return"";if(t="",u(n))return"\n";if((o[n.nodeName]||a[n.nodeName])&&(t+="\n"),n=n.firstChild)for(;t+=p(n),n=n.nextSibling;);return t}(t)){if(n.global)for(;h=n.exec(c);)s.push(y(h,r));else h=c.match(n),s.push(y(h,r));return s.length&&(v=s.length,function(n,t,i){var e,s,y,c,v=[],f=0,r=n,h=t.shift(),p=0;n:for(;;){if((o[r.nodeName]||a[r.nodeName]||u(r))&&f++,3===r.nodeType&&(!s&&r.length+f>=h[1]?(s=r,c=h[1]-f):e&&v.push(r),!e&&r.length+f>h[0]&&(e=r,y=h[0]-f),f+=r.length),e&&s){if(r=i({startNode:e,startNodeIndex:y,endNode:s,endNodeIndex:c,innerNodes:v,match:h[2],matchIndex:p}),f-=s.length-c,s=e=null,v=[],p++,!(h=t.shift()))break}else if((!l[r.nodeName]||o[r.nodeName])&&r.firstChild){if(!u(r)){r=r.firstChild;continue}}else if(r.nextSibling){r=r.nextSibling;continue}for(;;){if(r.nextSibling){r=r.nextSibling;break}if(r.parentNode===n)break n;r=r.parentNode}}}(t,s,function(n){var t,i;return"function"!=typeof n?(i=n.nodeType?n:e.createElement(n),t=function(n,t){var r=i.cloneNode(!1);return r.setAttribute("data-mce-index",t),n&&r.appendChild(e.createTextNode(n)),r}):t=n,function(n){var o,s,i,u=n.startNode,f=n.endNode,h=n.matchIndex,r,l,c,v,y;if(u===f)return r=u,i=r.parentNode,0<n.startNodeIndex&&(o=e.createTextNode(r.data.substring(0,n.startNodeIndex)),i.insertBefore(o,r)),l=t(n.match[0],h),i.insertBefore(l,r),n.endNodeIndex<r.length&&(s=e.createTextNode(r.data.substring(n.endNodeIndex)),i.insertBefore(s,r)),r.parentNode.removeChild(r),l;o=e.createTextNode(u.data.substring(0,n.startNodeIndex));s=e.createTextNode(f.data.substring(n.endNodeIndex));for(var p=t(u.data.substring(n.startNodeIndex),h),w=[],a=0,b=n.innerNodes.length;a<b;++a)c=n.innerNodes[a],v=t(c.data,h),c.parentNode.replaceChild(v,c),w.push(v);return y=t(f.data.substring(0,n.endNodeIndex),h),(i=u.parentNode).insertBefore(o,u),i.insertBefore(p,u),i.removeChild(u),(i=f.parentNode).insertBefore(y,f),i.insertBefore(s,f),i.removeChild(f),y}}(i))),v}}},i=function(n){var t=n.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},s=function(n){var t=n.parentNode;n.firstChild&&t.insertBefore(n.firstChild,n);n.parentNode.removeChild(n)},r=function(n,r){var f,o=[],u,e;if((f=t.toArray(n.getBody().getElementsByTagName("span"))).length)for(u=0;u<f.length;u++)e=i(f[u]),null!==e&&e.length&&e===r.toString()&&o.push(f[u]);return o},f=function(n,t,i){var u=t.get(),e=n.dom,f;return(i=!1!==i)?u++:u--,e.removeClass(r(n,t.get()),"mce-match-marker-selected"),f=r(n,u),f.length?(e.addClass(r(n,u),"mce-match-marker-selected"),n.selection.scrollIntoView(f[0]),u):-1},h=function(n,t){var i=t.parentNode;n.remove(t);n.isEmpty(i)&&n.remove(i)},c=function(n,t){var i=f(n,t,!0);-1!==i&&t.set(i)},l=function(n,t){var i=f(n,t,!1);-1!==i&&t.set(i)},k=function(n){var t=i(n);return null!==t&&0<t.length},a=function(n,r,u){for(var h,c,l,o,e=t.toArray(n.getBody().getElementsByTagName("span")),f=0;f<e.length;f++)l=i(e[f]),null!==l&&l.length&&(l===r.get().toString()&&(h||(h=e[f].firstChild),c=e[f].firstChild),s(e[f]));if(h&&c)return o=n.dom.createRng(),o.setStart(h,0),o.setEnd(c,c.data.length),!1!==u&&n.selection.setRng(o),o},v=function(n,t){return 0<r(n,t.get()+1).length},y=function(n,t){return 0<r(n,t.get()-1).length},n={done:a,find:function(n,t,i,r,u){i=(i=i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"\\s");i=u?"\\b"+i+"\\b":i;var e,o,s,h,c,l=(e=n,o=t,s=new RegExp(i,r?"g":"gi"),(c=e.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",h=e.getBody(),a(e,o,!1),b.findAndReplaceDOMText(s,h,c,!1,e.schema));return l&&(t.set(-1),t.set(f(n,t,!0))),l},next:c,prev:l,replace:function(n,r,u,f,e){var o,a,d,w,p,b,g=r.get(),nt;for(f=!1!==f,d=n.getBody(),a=t.grep(t.toArray(d.getElementsByTagName("span")),k),o=0;o<a.length;o++)if(nt=i(a[o]),w=p=parseInt(nt,10),e||w===r.get()){for(u.length?(a[o].firstChild.nodeValue=u,s(a[o])):h(n.dom,a[o]);a[++o];){if((w=parseInt(i(a[o]),10))!==p){o--;break}h(n.dom,a[o])}f&&g--}else p>r.get()&&a[o].setAttribute("data-mce-index",p-1);return r.set(g),f?(b=v(n,r),c(n,r)):(b=y(n,r),l(n,r)),!e&&b},hasNext:v,hasPrev:y},d=function(t,i){return{done:function(r){return n.done(t,i,r)},find:function(r,u,f){return n.find(t,i,r,u,f)},next:function(){return n.next(t,i)},prev:function(){return n.prev(t,i)},replace:function(r,u,f){return n.replace(t,i,r,u,f)}}},p=function(i,r){function e(){u.statusbar.find("#next").disabled(!1===n.hasNext(i,r));u.statusbar.find("#prev").disabled(!1===n.hasPrev(i,r))}function s(){i.windowManager.alert("Could not find the specified string.",function(){u.find("#find")[0].focus()})}var o,f={},u;i.undoManager.add();o=t.trim(i.selection.getContent({format:"text"}));u=i.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){i.focus();n.done(i,r);i.undoManager.add()},onSubmit:function(t){var l,o,h,c;return t.preventDefault(),o=u.find("#case").checked(),c=u.find("#words").checked(),(h=u.find("#find").value()).length?f.text===h&&f.caseState===o&&f.wholeWord===c?n.hasNext(i,r)?(n.next(i,r),void e()):void s():((l=n.find(i,r,h,o,c))||s(),u.statusbar.items().slice(1).disabled(0===l),e(),void(f={text:h,caseState:o,wholeWord:c})):(n.done(i,r,!1),void u.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){u.submit()}},{text:"Replace",disabled:!0,onclick:function(){n.replace(i,r,u.find("#replace").value())||(u.statusbar.items().slice(1).disabled(!0),r.set(-1),f={})}},{text:"Replace all",disabled:!0,onclick:function(){n.replace(i,r,u.find("#replace").value(),!0,!0);u.statusbar.items().slice(1).disabled(!0);f={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){n.prev(i,r);e()}},{text:"Next",name:"next",disabled:!0,onclick:function(){n.next(i,r);e()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:o},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},g=function(n,t){n.addCommand("SearchReplace",function(){p(n,t)})},e=function(n,t){return function(){p(n,t)}},nt=function(n,t){n.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:e(n,t),separator:"before",context:"edit"});n.addButton("searchreplace",{tooltip:"Find and replace",onclick:e(n,t)});n.shortcuts.add("Meta+F","",e(n,t))};w.add("searchreplace",function(n){var t=o(-1);return g(n,t),nt(n,t),d(n,t)})}();!function(){"use strict";var r=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),f=tinymce.util.Tools.resolve("tinymce.util.Tools"),n=function(n){return n.getParam("save_enablewhendirty",!0)},e=function(n){return!!n.getParam("save_onsavecallback")},o=function(n){return!!n.getParam("save_oncancelcallback")},t=function(n,t){n.notificationManager.open({text:n.translate(t),type:"error"})},s=function(i){var r;if(r=u.DOM.getParent(i.id,"form"),!n(i)||i.isDirty()){if(i.save(),e(i))return i.execCallback("save_onsavecallback",i),void i.nodeChanged();r?(i.setDirty(!1),r.onsubmit&&!r.onsubmit()||("function"==typeof r.submit?r.submit():t(i,"Error: Form submit field collision.")),i.nodeChanged()):t(i,"Error: No form element found.")}},h=function(n){var t=f.trim(n.startContent);o(n)?n.execCallback("save_oncancelcallback",n):(n.setContent(t),n.undoManager.clear(),n.nodeChanged())},c=function(n){n.addCommand("mceSave",function(){s(n)});n.addCommand("mceCancel",function(){h(n)})},i=function(t){return function(i){var r=i.control;t.on("nodeChange dirty",function(){r.disabled(n(t)&&!t.isDirty())})}},l=function(n){n.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:i(n)});n.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:i(n)});n.addShortcut("Meta+S","","mceSave")};r.add("save",function(n){l(n);c(n)})}();!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){n.addCommand("mcePrint",function(){n.getWin().print()})},i=function(n){n.addButton("print",{title:"Print",cmd:"mcePrint"});n.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})};n.add("print",function(n){t(n);i(n);n.addShortcut("Meta+P","","mcePrint")})}();!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),i=function(n){return parseInt(n.getParam("plugin_preview_width","650"),10)},r=function(n){return parseInt(n.getParam("plugin_preview_height","500"),10)},u=function(n){return n.getParam("content_style","")},f=tinymce.util.Tools.resolve("tinymce.util.Tools"),e=function(n){var e="",i=n.dom.encode,o=u(n),t,r,s;return e+='<base href="'+i(n.documentBaseURI.getURI())+'">',o&&(e+='<style type="text/css">'+o+"<\/style>"),f.each(n.contentCSS,function(t){e+='<link type="text/css" rel="stylesheet" href="'+i(n.documentBaseURI.toAbsolute(t))+'">'}),t=n.settings.body_id||"tinymce",-1!==t.indexOf("=")&&(t=(t=n.getParam("body_id","","hash"))[n.id]||t),r=n.settings.body_class||"",-1!==r.indexOf("=")&&(r=(r=n.getParam("body_class","","hash"))[n.id]||""),s=n.settings.directionality?' dir="'+n.settings.directionality+'"':"","<!DOCTYPE html><html><head>"+e+'<\/head><body id="'+i(t)+'" class="mce-content-body '+i(r)+'"'+i(s)+">"+n.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> <\/body><\/html>'},o=function(n,t,i){var u=e(n),r;i?t.src="data:text/html;charset=utf-8,"+encodeURIComponent(u):(r=t.contentWindow.document,r.open(),r.write(u),r.close())},s=function(n){var u=!t.ie,f='<iframe src="" frameborder="0"'+(u?' sandbox="allow-scripts"':"")+"><\/iframe>",e=i(n),s=r(n);n.windowManager.open({title:"Preview",width:e,height:s,html:f,buttons:{text:"Close",onclick:function(n){n.control.parent().parent().close()}},onPostRender:function(t){var i=t.control.getEl("body").firstChild;o(n,i,u)}})},h=function(n){n.addCommand("mcePreview",function(){s(n)})},c=function(n){n.addButton("preview",{title:"Preview",cmd:"mcePreview"});n.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};n.add("preview",function(n){h(n);c(n)})}();!function(){"use strict";function l(n,i){return t.each(i,function(t){n=t.constructor===RegExp?n.replace(t,""):n.replace(t[0],t[1])}),n}function li(n){var i,r;return r=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],n=n.replace(/^[\u00a0 ]+/,""),t.each(r,function(t){if(t.test(n))return!(i=!0)}),i}function ai(n){function v(n){var t="";if(3===n.type)return n.value;if(n=n.firstChild)for(;t+=v(n),n=n.next;);return t}function f(n,t){if(3===n.type&&t.test(n.value))return n.value=n.value.replace(t,""),!1;if(n=n.firstChild)do if(!f(n,t))return!1;while(n=n.next);return!0}function h(n,i,e){var o=n._listLevel||u;o!==u&&(o<u?t&&(t=t.parent.parent):(r=t,t=null));t&&t.name===i?t.append(n):(r=r||t,t=new c(i,1),1<e&&t.attr("start",""+e),n.wrap(t));n.name="li";u<o&&r&&r.lastChild.append(t);u=o,function s(n){if(n._listIgnore)n.remove();else if(n=n.firstChild)for(;s(n),n=n.next;);}(n);f(n,/^\u00a0+/);f(n,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/);f(n,/^\u00a0+/)}for(var t,r,u=1,o,s,l,a,e=[],i=n.firstChild;null!=i;)if(e.push(i),null!==(i=i.walk()))for(;void 0!==i&&i.parent!==n;)i=i.walk();for(o=0;o<e.length;o++)if("p"===(n=e[o]).name&&n.firstChild){if(s=v(n),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(s)){h(n,"ul");continue}if(li(s)){l=/([0-9]+)\./.exec(s);a=1;l&&(a=parseInt(l[1],10));h(n,"ol",a);continue}if(n._listLevel){h(n,"ul",1);continue}t=null}else r=t,t=null}function vi(i,r,u,f){var o,e={},s=i.dom.parseStyle(f);return t.each(s,function(t,s){switch(s){case"mso-list":(o=/\w+ \w+([0-9]+)/i.exec(f))&&(u._listLevel=parseInt(o[1],10));/Ignore/i.test(t)&&u.firstChild&&(u._listIgnore=!0,u.firstChild._listIgnore=!0);break;case"horiz-align":s="text-align";break;case"vert-align":s="vertical-align";break;case"font-color":case"mso-foreground":s="color";break;case"mso-background":case"mso-highlight":s="background";break;case"font-weight":case"font-style":return void("normal"!==t&&(e[s]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void u.remove()}0!==s.indexOf("mso-comment")?0!==s.indexOf("mso-")&&("all"===n.getRetainStyleProps(i)||r&&r[s])&&(e[s]=t):u.remove()}),/(bold)/i.test(e["font-weight"])&&(delete e["font-weight"],u.wrap(new c("b",1))),/(italic)/i.test(e["font-style"])&&(delete e["font-style"],u.wrap(new c("i",1))),(e=i.dom.serializeStyle(e,u.name))||null}function yt(n,t){n.on("PastePreProcess",function(i){i.content=t(n,i.content,i.internal,i.wordContent)})}function lr(n,i){var u,f;return a.isWordContent(i)?(u=[],t.each(n.schema.getBlockElements(),function(n,t){u.push(t)}),f=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+u.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),i=r.filter(i,[[f,"$1"]]),i=r.filter(i,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])):i}function ar(t,i,r,u){var f,o,e,s;return u||r?i:(o=n.getWebkitStyles(t),!1===n.shouldRemoveWebKitStyles(t)||"all"===o)?i:((o&&(f=o.split(/[, ]/)),f)?(e=t.dom,s=t.selection.getNode(),i=i.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(n,t,i,r){var l=e.parseStyle(e.decode(i)),h={},u,o,c;if("none"===f)return t+r;for(u=0;u<f.length;u++)o=l[f[u]],c=e.getStyle(s,f[u],!0),/color/.test(f[u])&&(o=e.toHex(o),c=e.toHex(c)),c!==o&&(h[f[u]]=o);return(h=e.serializeStyle(h,"span"))?t+' style="'+h+'"'+r:t+r})):i=i.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3"),i.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(n,t,i,r){return t+' style="'+i+'"'+r}))}function vr(n,t){n.$("a",t).find("font,u").each(function(t,i){n.dom.remove(i,!0)})}var f=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return f(i())}}},w=tinymce.util.Tools.resolve("tinymce.PluginManager"),wt=function(n){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(n.settings.plugins)||!w.get("powerpaste")||("undefined"!=typeof window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},bt=function(n,t){return{clipboard:n,quirks:t}},kt=function(n,t,i,r){return n.fire("PastePreProcess",{content:t,internal:i,wordContent:r})},dt=function(n,t,i,r){return n.fire("PastePostProcess",{node:t,internal:i,wordContent:r})},b=function(n,t){return n.fire("PastePlainTextToggle",{state:t})},gt=function(n,t){return n.fire("paste",{ieFake:t})},n={shouldPlainTextInform:function(n){return n.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(n){return n.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(n){return n.getParam("paste_data_images",!1)},shouldFilterDrop:function(n){return n.getParam("paste_filter_drop",!0)},getPreProcess:function(n){return n.getParam("paste_preprocess")},getPostProcess:function(n){return n.getParam("paste_postprocess")},getWebkitStyles:function(n){return n.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(n){return n.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(n){return n.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(n){return n.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(n){return n.getParam("paste_as_text",!1)},getRetainStyleProps:function(n){return n.getParam("paste_retain_style_properties")},getWordValidElements:function(n){return n.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(n){return n.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(n){return n.getParam("paste_enable_default_filters",!0)}},ni=function(t,i,r){var u,f,e;"text"===i.pasteFormat.get()?(i.pasteFormat.set("html"),b(t,!1)):(i.pasteFormat.set("text"),b(t,!0),e=t,!1===r.get()&&n.shouldPlainTextInform(e)&&(f="Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.",(u=t).notificationManager.open({text:u.translate(f),type:"info"}),r.set(!0)));t.focus()},ti=function(n,t,i){n.addCommand("mceTogglePlainTextPaste",function(){ni(n,t,i)});n.addCommand("mceInsertClipboardContent",function(n,i){i.content&&t.pasteHtml(i.content,i.internal);i.text&&t.pasteText(i.text)})},i=tinymce.util.Tools.resolve("tinymce.Env"),k=tinymce.util.Tools.resolve("tinymce.util.Delay"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),ii=tinymce.util.Tools.resolve("tinymce.util.VK"),d="x-tinymce/html",o="<!-- "+d+" -->",ri=function(n){return o+n},ui=function(n){return n.replace(o,"")},s=function(n){return-1!==n.indexOf(o)},h=function(){return d},fi=tinymce.util.Tools.resolve("tinymce.html.Entities"),ei=function(n){return n.replace(/\r?\n/g,"<br>")},oi=function(n,i,r){var f=n.split(/\n\n/),e=function(n,t){var i,r=[],u="<"+n;if("object"==typeof t){for(i in t)t.hasOwnProperty(i)&&r.push(i+'="'+fi.encodeAllRaw(t[i])+'"');r.length&&(u+=" "+r.join(" "))}return u+">"}(i,r),o="<\/"+i+">",u=t.map(f,function(n){return n.split(/\n/).join("<br />")});return 1===u.length?u[0]:t.map(u,function(n){return e+n+o}).join("")},si=function(n){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(n)},hi=function(n,t,i){return t?oi(n,t,i):ei(n)},g=tinymce.util.Tools.resolve("tinymce.html.DomParser"),c=tinymce.util.Tools.resolve("tinymce.html.Node"),nt=tinymce.util.Tools.resolve("tinymce.html.Schema"),ci=tinymce.util.Tools.resolve("tinymce.html.Serializer"),r={filter:l,innerText:function(n){var r=nt(),u=g({},r),i="",f=r.getShortEndedElements(),e=t.makeMap("script noscript style textarea video audio iframe object"," "),o=r.getBlockElements();return n=l(n,[/<!\[[^\]]+\]>/g]),function s(n){var t=n.name,r=n;if("br"!==t)if(f[t]&&(i+=" "),e[t])i+=" ";else{if(3===n.type&&(i+=n.value),!n.shortEnded&&(n=n.firstChild))for(;s(n),n=n.next;);o[t]&&r.next&&(i+="\n","p"===t&&(i+="\n"))}else i+="\n"}(u.parse(n)),i},trimHtml:function(n){return l(n,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(n,t,i){return t||i?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(n){var t=0;return function(){return n+t++}},isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}},a={preProcess:function(i,u){return n.shouldUseDefaultFilters(i)?function(i,u){var s,h,c,e,f,o;return(s=n.getRetainStyleProps(i))&&(h=t.makeMap(s.split(/[, ]/))),u=r.filter(u,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(n,t){return 0<t.length?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]),c=n.getWordValidElements(i),e=nt({valid_elements:c,valid_children:"-li[p]"}),t.each(e.elements,function(n){n.attributes["class"]||(n.attributes["class"]={},n.attributesOrder.push("class"));n.attributes.style||(n.attributes.style={},n.attributesOrder.push("style"))}),f=g({},e),f.addAttributeFilter("style",function(n){for(var t,r=n.length;r--;)(t=n[r]).attr("style",vi(i,h,t,t.attr("style"))),"span"===t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),f.addAttributeFilter("class",function(n){for(var t,i,r=n.length;r--;)i=(t=n[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(i)&&t.remove(),t.attr("class",null)}),f.addNodeFilter("del",function(n){for(var t=n.length;t--;)n[t].remove()}),f.addNodeFilter("a",function(n){for(var i,t,r,u=n.length;u--;)if(t=(i=n[u]).attr("href"),r=i.attr("name"),t&&-1!==t.indexOf("#_msocom_"))i.remove();else if(t&&0===t.indexOf("file://")&&(t=t.split("#")[1])&&(t="#"+t),t||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){i.unwrap();continue}i.attr({href:t,name:r})}else i.unwrap()}),o=f.parse(u),n.shouldConvertWordFakeLists(i)&&ai(o),u=ci({validate:i.settings.validate},e).serialize(o)}(i,u):u},isWordContent:function(n){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(n)||/class="OutlineElement/.test(n)||/id="?docs\-internal\-guid\-/.test(n)}},tt=function(n,t){return{content:n,cancelled:t}},yi=function(n,t,i,r){var f,o,s,h,c,e,u=kt(n,t,i,r);return n.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?(f=n,o=u.content,s=i,h=r,c=f.dom.create("div",{style:"display:none"},o),e=dt(f,c,s,h),tt(e.node.innerHTML,e.isDefaultPrevented())):tt(u.content,u.isDefaultPrevented())},pi=function(n,t,i){var r=a.isWordContent(t),u=r?a.preProcess(n,t):t;return yi(n,u,i,r)},v=function(t,i){return t.insertContent(i,{merge:n.shouldMergeFormats(t),paste:!0}),!0},it=function(n){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(n)},wi=function(n){return it(n)&&/.(gif|jpe?g|png)$/.test(n)},bi=function(n,t,i){return!(!1!==n.selection.isCollapsed()||!it(t)||(u=t,f=i,(r=n).undoManager.extra(function(){f(r,u)},function(){r.execCommand("mceInsertLink",!1,u)}),0));var r,u,f},ki=function(n,t,i){return!!wi(t)&&(u=t,f=i,(r=n).undoManager.extra(function(){f(r,u)},function(){r.insertContent('<img src="'+u+'">')}),!0);var r,u,f},di=function(i,r){var u,f;!1===n.isSmartPasteEnabled(i)?v(i,r):(u=i,f=r,t.each([bi,ki,v],function(n){return!0!==n(u,f,v)}))},e=function(n,t,i){var u=i||s(t),r=pi(n,ui(t),u);!1===r.cancelled&&di(n,r.content)},rt=function(n,t){t=n.dom.encode(t).replace(/\r\n/g,"\n");t=hi(t,n.settings.forced_root_block,n.settings.forced_root_block_attrs);e(n,t,!1)},ut=function(n){var i={},t,r,u;if(n&&(n.getData&&(t=n.getData("Text"),t&&0<t.length&&-1===t.indexOf("data:text/mce-internal,")&&(i["text/plain"]=t)),n.types))for(r=0;r<n.types.length;r++){u=n.types[r];try{i[u]=n.getData(u)}catch(f){i[u]=""}}return i},u=function(n,t){return t in n&&0<n[t].length},ft=function(n){return u(n,"text/html")||u(n,"text/plain")},gi=r.createIdGenerator("mceclip"),nr=function(n,t,i,r){var k,f,u;t&&(n.selection.setRng(t),t=null);var h,c,l,a,v,o,y,s=i.result,p=-1!==(c=(h=s).indexOf(","))?h.substr(c+1):null,w=gi(),d=n.settings.images_reuse_filename&&r.name?(l=n,a=r.name,(v=a.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i))?l.dom.encode(v[1]):null):w,b=new Image;(b.src=s,o=n.settings,y=b,!o.images_dataimg_filter||o.images_dataimg_filter(y))?(f=n.editorUpload.blobCache,u=void 0,(k=f.findFirst(function(n){return n.base64()===p}))?u=k:(u=f.create(w,r,p,d),f.add(u)),e(n,'<img src="'+u.blobUri()+'">',!1)):e(n,'<img src="'+s+'">',!1)},et=function(n,t,i){function u(r){var f,u,e,s=!1,o;if(r)for(f=0;f<r.length;f++)(u=r[f],/^image\/(jpeg|png|gif|bmp)$/.test(u.type))&&(o=u.getAsFile?u.getAsFile():u,(e=new window.FileReader).onload=nr.bind(null,n,i,e,o),e.readAsDataURL(o),t.preventDefault(),s=!0);return s}var r="paste"===t.type?t.clipboardData:t.dataTransfer;if(n.settings.paste_data_images&&r)return u(r.items)||u(r.files)},ot=function(n){return ii.metaKeyPressed(n)&&86===n.keyCode||n.shiftKey&&45===n.keyCode},tr=function(n,f,o){function a(t,i,o,h){var c,l;u(t,"text/html")?c=t["text/html"]:(c=f.getHtml(),h=h||s(c),f.isDefaultContent(c)&&(o=!0));c=r.trimHtml(c);f.remove();l=!1===h&&si(c);c.length&&!l||(o=!0);o&&(c=u(t,"text/plain")&&l?t["text/plain"]:r.innerText(c));f.isDefaultContent(c)?i||n.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?rt(n,c):e(n,c,h)}var c,l=0;n.on("keydown",function(t){function r(n){ot(n)&&!n.isDefaultPrevented()&&f.remove()}if(ot(t)&&!t.isDefaultPrevented()){if((c=t.shiftKey&&86===t.keyCode)&&i.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),l=(new Date).getTime(),i.ie&&c)return t.preventDefault(),void gt(n,!0);f.remove();f.create();n.once("keyup",r);n.once("paste",function(){n.off("keyup",r)})}});n.on("paste",function(e){var d,b,y,nt=(new Date).getTime(),v=(d=n,b=ut(e.clipboardData||d.getDoc().dataTransfer),r.isMsEdge()?t.extend(b,{"text/html":""}):b),tt=(new Date).getTime()-nt,p=(new Date).getTime()-l-tt<1e3,g="text"===o.get()||c,w=u(v,h());c=!1;e.isDefaultPrevented()||(y=e.clipboardData,-1!==navigator.userAgent.indexOf("Android")&&y&&y.items&&0===y.items.length)?f.remove():ft(v)||!et(n,e,f.getLastRng()||n.selection.getRng())?(p||e.preventDefault(),!i.ie||p&&!e.ieFake||u(v,"text/html")||(f.create(),n.dom.bind(f.getEl(),"paste",function(n){n.stopPropagation()}),n.getDoc().execCommand("Paste",!1,null),v["text/html"]=f.getHtml()),u(v,"text/html")?(e.preventDefault(),w||(w=s(v["text/html"])),a(v,p,g,w)):k.setEditorTimeout(n,function(){a(v,p,g,w)},0)):f.remove()})},y=function(n){return i.ie&&n.inline?document.body:n.getBody()},ir=function(n,t){var i;y(i=n)!==i.getBody()&&n.dom.bind(t,"paste keyup",function(){setTimeout(function(){n.fire("paste")},0)})},p=function(n){return n.dom.get("mcepastebin")},st=function(n,t){return t===n},rr=function(n){var r=f(null),u="%MCEPASTEBIN%";return{create:function(){return o=r,s=u,e=(t=n).dom,h=t.getBody(),o.set(t.selection.getRng()),f=t.dom.add(y(t),"div",{id:"mcepastebin","class":"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},s),(i.ie||i.gecko)&&e.setStyle(f,"left","rtl"===e.getStyle(h,"direction",!0)?65535:-65535),e.bind(f,"beforedeactivate focusin focusout",function(n){n.stopPropagation()}),ir(t,f),f.focus(),void t.selection.select(f,!0);var t,o,s,f,e,h},remove:function(){return function(n,t){if(p(n)){for(var i=void 0,r=t.get();i=n.dom.get("mcepastebin");)n.dom.remove(i),n.dom.unbind(i);r&&n.selection.setRng(r)}t.set(null)}(n,r)},getEl:function(){return p(n)},getHtml:function(){return function(n){var i,u,r,f,e,o=function(t,i){t.appendChild(i);n.dom.remove(i,!0)};for(u=t.grep(y(n).childNodes,function(n){return"mcepastebin"===n.id}),i=u.shift(),t.each(u,function(n){o(i,n)}),r=(f=n.dom.select("div[id=mcepastebin]",i)).length-1;0<=r;r--)e=n.dom.create("div"),i.insertBefore(e,f[r]),o(e,f[r]);return i?i.innerHTML:""}(n)},getLastRng:function(){return r.get()},isDefault:function(){return i=u,t=p(n),(r=t)&&"mcepastebin"===r.id&&st(i,t.innerHTML);var i,r,t},isDefaultContent:function(n){return st(u,n)}}},ur=function(n,t){var r=rr(n);return n.on("preInit",function(){return tr(u=n,r,t),void u.parser.addNodeFilter("img",function(n,t,r){var o,s=function(n){n.attr("data-mce-object")||f===i.transparentSrc||n.remove()},e;if(!u.settings.paste_data_images&&(o=r).data&&!0===o.data.paste)for(e=n.length;e--;)(f=n[e].attributes.map.src)&&(0===f.indexOf("webkit-fake-url")?s(n[e]):u.settings.allow_html_data_urls||0!==f.indexOf("data:")||s(n[e]))});var u,f}),{pasteFormat:t,pasteHtml:function(t,i){return e(n,t,i)},pasteText:function(t){return rt(n,t)},pasteImageData:function(t,i){return et(n,t,i)},getDataTransferItems:ut,hasHtmlOrText:ft,hasContentType:u}},fr=function(){},er=function(n,t,u){if(f=n,!1!==i.iOS||f===undefined||"function"!=typeof f.setData||!0===r.isMsEdge())return!1;try{return n.clearData(),n.setData("text/html",t),n.setData("text/plain",u),n.setData(h(),t),!0}catch(e){return!1}var f},ht=function(n,t,i,r){er(n.clipboardData,t.html,t.text)?(n.preventDefault(),r()):i(t.html,r)},ct=function(n){return function(t,i){var o=ri(t),r=n.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),u=n.dom.create("div",{contenteditable:"true"},o),e,f;n.dom.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"});r.appendChild(u);n.dom.add(n.getBody(),r);e=n.selection.getRng();u.focus();f=n.dom.createRng();f.selectNodeContents(u);n.selection.setRng(f);setTimeout(function(){n.selection.setRng(e);r.parentNode.removeChild(r);i()},0)}},lt=function(n){return{html:n.selection.getContent({contextual:!0}),text:n.selection.getContent({format:"text"})}},or=function(n){var t,i;n.on("cut",(t=n,function(n){!1===t.selection.isCollapsed()&&ht(n,lt(t),ct(t),function(){setTimeout(function(){t.execCommand("Delete")},0)})}));n.on("copy",(i=n,function(n){!1===i.selection.isCollapsed()&&ht(n,lt(i),ct(i),fr)}))},sr=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),at=function(n,t){return sr.getCaretRangeFromPoint(t.clientX,t.clientY,n.getDoc())},vt=function(n,t){n.focus();n.selection.setRng(t)},hr=function(t,i,u){n.shouldBlockDrop(t)&&t.on("dragend dragover draggesture dragdrop drop drag",function(n){n.preventDefault();n.stopPropagation()});n.shouldPasteDataImages(t)||t.on("drop",function(n){var t=n.dataTransfer;t&&t.files&&0<t.files.length&&n.preventDefault()});t.on("drop",function(f){var e,s,c,l,o;(s=at(t,f),f.isDefaultPrevented()||u.get())||(e=i.getDataTransferItems(f.dataTransfer),l=i.hasContentType(e,h()),(!i.hasHtmlOrText(e)||(c=e["text/plain"])&&0===c.indexOf("file://"))&&i.pasteImageData(f,s)||!s||!n.shouldFilterDrop(t)||(o=e["mce-internal"]||e["text/html"]||e["text/plain"],o&&(f.preventDefault(),k.setEditorTimeout(t,function(){t.undoManager.transact(function(){e["mce-internal"]&&t.execCommand("Delete");vt(t,s);o=r.trimHtml(o);e["text/html"]?i.pasteHtml(o,l):i.pasteText(o)})}))))});t.on("dragstart",function(){u.set(!0)});t.on("dragover dragend",function(i){n.shouldPasteDataImages(t)&&!1===u.get()&&(i.preventDefault(),vt(t,at(t,i)));"dragend"===i.type&&u.set(!1)})},cr=function(t){var i=t.plugins.paste,u=n.getPreProcess(t),r;u&&t.on("PastePreProcess",function(n){u.call(i,i,n)});r=n.getPostProcess(t);r&&t.on("PastePostProcess",function(n){r.call(i,i,n)})},yr=function(n){var t,r;i.webkit&&yt(n,ar);i.ie&&(yt(n,lr),r=vr,(t=n).on("PastePostProcess",function(n){r(t,n.node)}))},pt=function(n){return function(){return n}},pr=(pt(!1),pt(!0),function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}}),wr=function(n,t,i){var r=i.control;r.active("text"===t.pasteFormat.get());n.on("PastePlainTextToggle",function(n){r.active(n.state)})},br=function(n,t){var i=pr(wr,n,t);n.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:i});n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:t.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:i})};w.add("paste",function(t){if(!1===wt(t)){var r=f(!1),u=f(!1),e=f(n.isPasteAsTextEnabled(t)?"text":"html"),i=ur(t,e),o=yr(t);return br(t,i),ti(t,i,r),cr(t),or(t),hr(t,i,u),bt(i,o)}})}();!function(){"use strict";var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.Env"),u=function(n){return n.getParam("pagebreak_separator","<!-- pagebreak -->")},f=function(n){return n.getParam("pagebreak_split_block",!1)},e=function(){return"mce-pagebreak"},n=function(){return'<img src="'+r.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},o=function(t){var i=u(t),r=new RegExp(i.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(n){return"\\"+n}),"gi");t.on("BeforeSetContent",function(t){t.content=t.content.replace(r,n())});t.on("PreInit",function(){t.serializer.addNodeFilter("img",function(n){for(var r,o,u,e=n.length;e--;)if((o=(r=n[e]).attr("class"))&&-1!==o.indexOf("mce-pagebreak")){if(u=r.parent,t.schema.getBlockElements()[u.name]&&f(t)){u.type=3;u.value=i;u.raw=!0;r.remove();continue}r.type=3;r.value=i;r.raw=!0}})})},t=n,s=e,h=function(n){n.addCommand("mcePageBreak",function(){n.settings.pagebreak_split_block?n.insertContent("<p>"+t()+"<\/p>"):n.insertContent(t())})},c=function(n){n.on("ResolveName",function(t){"IMG"===t.target.nodeName&&n.dom.hasClass(t.target,s())&&(t.name="pagebreak")})},l=function(n){n.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"});n.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})};i.add("pagebreak",function(n){h(n);l(n);o(n);c(n)})}();!function(){"use strict";var r=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(n){return n.getParam("noneditable_noneditable_class","mceNonEditable")},u=function(n){return n.getParam("noneditable_editable_class","mceEditable")},f=function(n){var t=n.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t},i=function(n){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(n)}},e=function(n,t,i){return function(r){var u=arguments,f=u[u.length-2],o=0<f?t.charAt(f-1):"",e;return'"'===o?r:">"===o&&(e=t.lastIndexOf("<",f),-1!==e&&-1!==t.substring(e,f).indexOf('contenteditable="false"'))?r:'<span class="'+i+'" data-mce-content="'+n.dom.encode(u[0])+'">'+n.dom.encode("string"==typeof u[1]?u[1]:u[0])+"<\/span>"}},o=function(r){var h,c,o="contenteditable";h=" "+n.trim(u(r))+" ";c=" "+n.trim(t(r))+" ";var l=i(h),a=i(c),s=f(r);r.on("PreInit",function(){0<s.length&&r.on("BeforeSetContent",function(n){!function(n,i,r){var f=i.length,u=r.content;if("raw"!==r.format){for(;f--;)u=u.replace(i[f],e(n,u,t(n)));r.content=u}}(r,s,n)});r.parser.addAttributeFilter("class",function(n){for(var t,i=n.length;i--;)t=n[i],l(t)?t.attr(o,"true"):a(t)&&t.attr(o,"false")});r.serializer.addAttributeFilter(o,function(n){for(var t,i=n.length;i--;)t=n[i],(l(t)||a(t))&&(0<s.length&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(o,null))})})};r.add("noneditable",function(n){o(n)})}();!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(n,t){var i,r=(i=n).plugins.visualchars&&i.plugins.visualchars.isEnabled()?'<span class="mce-nbsp">&nbsp;<\/span>':"&nbsp;";n.insertContent(function(n,t){for(var i="",r=0;r<t;r++)i+=n;return i}(r,t));n.dom.setAttrib(n.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},i=function(t){t.addCommand("mceNonBreaking",function(){n(t,1)})},r=tinymce.util.Tools.resolve("tinymce.util.VK"),u=function(n){var t=n.getParam("nonbreaking_force_tab",0);return"boolean"==typeof t?!0===t?3:0:t},f=function(t){var i=u(t);0<i&&t.on("keydown",function(u){if(u.keyCode===r.TAB&&!u.isDefaultPrevented()){if(u.shiftKey)return;u.preventDefault();u.stopImmediatePropagation();n(t,i)}})},e=function(n){n.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"});n.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})};t.add("nonbreaking",function(n){i(n);e(n);f(n)})}();!function(){"use strict";var vt=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(n){return n.getParam("media_scripts")},yt=function(n){return n.getParam("audio_template_callback")},pt=function(n){return n.getParam("video_template_callback")},wt=function(n){return n.getParam("media_live_embeds",!0)},bt=function(n){return n.getParam("media_filter_html",!0)},kt=function(n){return n.getParam("media_url_resolver")},dt=function(n){return n.getParam("media_alt_source",!0)},gt=function(n){return n.getParam("media_poster",!0)},ni=function(n){return n.getParam("media_dimensions",!0)},e=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),w=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=function(n,t){if(n)for(var i=0;i<n.length;i++)if(-1!==t.indexOf(n[i].filter))return n[i]},b=function(n){return function(t){return t?t.style[n].replace(/px$/,""):""}},k=function(n){return function(t,i){var r;t&&(t.style[n]=/^[0-9.]+$/.test(r=i)?r+"px":r)}},r={getMaxWidth:b("maxWidth"),getMaxHeight:b("maxHeight"),setMaxWidth:k("maxWidth"),setMaxHeight:k("maxHeight")},l=w.DOM,d=function(n){return l.getAttrib(n,"data-ephox-embed-iri")},o=function(t,i){return a=i,v=l.createFragment(a),""!==d(v.firstChild)?(h=i,f=l.createFragment(h).firstChild,{type:"ephox-embed-iri",source1:d(f),source2:"",poster:"",width:r.getMaxWidth(f),height:r.getMaxHeight(f)}):(o=t,s=i,e({validate:(u={},!1),allow_conditional_comments:!0,special:"script,noscript",start:function(t,i){if(u.source1||"param"!==t||(u.source1=i.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(u.type||(u.type=t),u=n.extend(i.map,u)),"script"===t){var r=c(o,i.map.src);if(!r)return;u={type:"script",source1:i.map.src,width:r.width,height:r.height}}"source"===t&&(u.source1?u.source2||(u.source2=i.map.src):u.source1=i.map.src);"img"!==t||u.poster||(u.poster=i.map.src)}}).parse(s),u.source1=u.source1||u.src||u.data,u.source2=u.source2||"",u.poster=u.poster||"",u);var o,s,u,h,f,a,v},g=tinymce.util.Tools.resolve("tinymce.util.Promise"),nt=function(n){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[n.toLowerCase().split(".").pop()];return t||""},a=tinymce.util.Tools.resolve("tinymce.html.Writer"),tt=tinymce.util.Tools.resolve("tinymce.html.Schema"),v=w.DOM,t=function(n,t){var i,u,r,f;for(i in t)if(r=""+t[i],n.map[i])for(u=n.length;u--;)(f=n[u]).name===i&&(r?(n.map[i]=r,f.value=r):(delete n.map[i],n.splice(u,1)));else r&&(n.push({name:i,value:r}),n.map[i]=r)},ti=function(n,t){var f,i,u=v.createFragment(n).firstChild;return r.setMaxWidth(u,t.width),r.setMaxHeight(u,t.height),f=u.outerHTML,i=a(),e(i).parse(f),i.getContent()},s=function(n,i,r){return l=n,y=v.createFragment(l),""!==v.getAttrib(y.firstChild,"data-ephox-embed-iri")?ti(n,i):(h=n,u=i,s=r,f=a(),e({validate:!1,allow_conditional_comments:!(o=0),special:"script,noscript",comment:function(n){f.comment(n)},cdata:function(n){f.cdata(n)},text:function(n,t){f.text(n,t)},start:function(n,i,r){switch(n){case"video":case"object":case"embed":case"img":case"iframe":u.height!==undefined&&u.width!==undefined&&t(i,{width:u.width,height:u.height})}if(s)switch(n){case"video":t(i,{poster:u.poster,src:""});u.source2&&t(i,{src:""});break;case"iframe":t(i,{src:u.source1});break;case"source":if(++o<=2&&(t(i,{src:u["source"+o],type:u["source"+o+"mime"]}),!u["source"+o]))return;break;case"img":if(!u.poster)return;c=!0}f.start(n,i,r)},end:function(n){var i,r,e;if("video"===n&&s)for(i=1;i<=2;i++)u["source"+i]&&(r=[],r.map={},o<i&&(t(r,{src:u["source"+i],type:u["source"+i+"mime"]}),f.start("source",r,!0)));u.poster&&"object"===n&&s&&!c&&(e=[],e.map={},t(e,{src:u.poster,width:u.width,height:u.height}),f.start("img",e,!0));f.end(n)}},tt({})).parse(h),f.getContent());var h,u,s,c,f,o,l,y},ii=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],ri=function(t,r){var u=n.extend({},r),y,p,e,a,f,b,h,k,l,w,v,d,g,tt;return!u.source1&&(n.extend(u,o(i(t),u.embed)),!u.source1)?"":(u.source2||(u.source2=""),u.poster||(u.poster=""),u.source1=t.convertURL(u.source1,"source"),u.source2=t.convertURL(u.source2,"source"),u.source1mime=nt(u.source1),u.source2mime=nt(u.source2),u.poster=t.convertURL(u.poster,"poster"),e=(y=u.source1,0<(p=ii.filter(function(n){return n.regex.test(y)})).length?n.extend({},p[0],{url:function(n,t){for(var i=n.regex.exec(t),r=n.url,f=function(n){r=r.replace("$"+n,function(){return i[n]?i[n]:""})},u=0;u<i.length;u++)f(u);return r.replace(/\?$/,"")}(p[0],y)}):null),e&&(u.source1=e.url,u.type=e.type,u.allowFullscreen=e.allowFullscreen,u.width=u.width||e.w,u.height=u.height||e.h),u.embed)?s(u.embed,u,!0):(a=c(i(t),u.source1),a&&(u.type="script",u.width=a.width,u.height=a.height),g=yt(t),tt=pt(t),u.width=u.width||300,u.height=u.height||150,n.each(u,function(n,i){u[i]=t.dom.encode(n)}),"iframe"===u.type?(d=(v=u).allowFullscreen?' allowFullscreen="1"':"",'<iframe src="'+v.source1+'" width="'+v.width+'" height="'+v.height+'"'+d+"><\/iframe>"):"application/x-shockwave-flash"===u.source1mime?(w='<object data="'+(l=u).source1+'" width="'+l.width+'" height="'+l.height+'" type="application/x-shockwave-flash">',l.poster&&(w+='<img src="'+l.poster+'" width="'+l.width+'" height="'+l.height+'" />'),w+="<\/object>"):-1!==u.source1mime.indexOf("audio")?(h=u,(k=g)?k(h):'<audio controls="controls" src="'+h.source1+'">'+(h.source2?'\n<source src="'+h.source2+'"'+(h.source2mime?' type="'+h.source2mime+'"':"")+" />\n":"")+"<\/audio>"):"script"===u.type?'<script src="'+u.source1+'"><\/script>':(f=u,(b=tt)?b(f):'<video width="'+f.width+'" height="'+f.height+'"'+(f.poster?' poster="'+f.poster+'"':"")+' controls="controls">\n<source src="'+f.source1+'"'+(f.source1mime?' type="'+f.source1mime+'"':"")+" />\n"+(f.source2?'<source src="'+f.source2+'"'+(f.source2mime?' type="'+f.source2mime+'"':"")+" />\n":"")+"<\/video>"))},h={},it=function(n){return function(t){return ri(n,t)}},y=function(n,t){var r,u,i,f,e,o=kt(n);return o?(i=t,f=it(n),e=o,new g(function(n,t){var r=function(t){return t.html&&(h[i.source1]=t),n({url:i.source1,html:t.html?t.html:f(i)})};h[i.source1]?r(h[i.source1]):e({url:i.source1},r,t)})):(r=t,u=it(n),new g(function(n){n({html:u(r),url:r.source1})}))},ui=function(n){return h.hasOwnProperty(n)},rt=function(n,t){n.state.set("oldVal",n.value());t.state.set("oldVal",t.value())},ut=function(n,t){var i=n.find("#width")[0],r=n.find("#height")[0],u=n.find("#constrain")[0];i&&r&&u&&t(i,r,u.checked())},fi=function(n,t,i){var f=n.state.get("oldVal"),e=t.state.get("oldVal"),r=n.value(),u=t.value();i&&f&&e&&r&&u&&(r!==f?(u=Math.round(r/f*u),isNaN(u)||t.value(u)):(r=Math.round(u/e*r),isNaN(r)||n.value(r)));rt(n,t)},ft=function(n){ut(n,fi)},ei=function(n){var t=function(){n(function(n){ft(n)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},oi=function(n){ut(n,rt)},et=ft,si=f.ie&&f.ie<=8?"onChange":"onInput",p=function(n){return function(t){var i=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";n.notificationManager.open({type:"error",text:i})}},ot=function(t,r){return function(u){var f=u.html,e=t.find("#embed")[0],s=n.extend(o(i(r),f),{source1:u.url});t.fromJSON(s);e&&(e.value(f),et(t))}},st=function(n,t){var i=n.dom.select("img[data-mce-object]");n.insertContent(t),function(n,t){for(var i,u=n.dom.select("img[data-mce-object]"),r=0;r<t.length;r++)for(i=u.length-1;0<=i;i--)t[r]===u[i]&&u.splice(i,1);n.selection.select(u[0])}(n,i);n.nodeChanged()},ht=function(t){var u,f,l,e,h,w=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){y(t,u.toJSON()).then(ot(u,t))["catch"](p(t))},1)},onchange:function(i){var r,f;y(t,u.toJSON()).then(ot(u,t))["catch"](p(t));r=u;f=i.meta;n.each(f,function(n,t){r.find("#"+t).value(n)})},onbeforecall:function(n){n.meta=u.toJSON()}}],c=[],b,a,v;(dt(t)&&c.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),gt(t)&&c.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),ni(t))&&(b=ei(function(n){n(u);f=u.toJSON();u.find("#embed").value(s(f.embed,f))}),w.push(b));e=(l=t).selection.getNode();h=e.getAttribute("data-ephox-embed-iri");f=h?{source1:h,"data-ephox-embed-iri":h,width:r.getMaxWidth(e),height:r.getMaxHeight(e)}:e.getAttribute("data-mce-object")?o(i(l),l.serializer.serialize(e,{selection:!0})):{};a={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:function(n){var t=n.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return n.selection.getContent()}(t),multiline:!0,rows:5,label:"Source"};a[si]=function(){f=n.extend({},o(i(t),this.value()));this.parent().parent().fromJSON(f)};v=[{title:"General",type:"form",items:w},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},a]}];0<c.length&&v.push({title:"Advanced",type:"form",items:c});u=t.windowManager.open({title:"Insert/edit media",data:f,bodyType:"tabpanel",body:v,onSubmit:function(){var i,n;et(u);i=t;(n=u.toJSON()).embed=s(n.embed,n);n.embed&&ui(n.source1)?st(i,n.embed):y(i,n).then(function(n){st(i,n.html)})["catch"](p(i))}});oi(u)},hi=function(n){return{showDialog:function(){ht(n)}}},ci=function(n){n.addCommand("mceMedia",function(){ht(n)})},u=tinymce.util.Tools.resolve("tinymce.html.Node"),ct=function(n,t){if(!1===bt(n))return t;var r,i=a();return e({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(n){i.comment(n)},cdata:function(n){i.cdata(n)},text:function(n,t){i.text(n,t)},start:function(t,u,f){if(r=!0,"script"!==t&&"noscript"!==t){for(var e=0;e<u.length;e++){if(0===u[e].name.indexOf("on"))return;"style"===u[e].name&&(u[e].value=n.dom.serializeStyle(n.dom.parseStyle(u[e].value),t))}i.start(t,u,f);r=!1}},end:function(n){r||i.end(n)}},tt({})).parse(t),i.getContent()},li=function(n,t){var i,r=t.name;return(i=new u("img",1)).shortEnded=!0,lt(n,t,i),i.attr({width:t.attr("width")||"300",height:t.attr("height")||("audio"===r?"30":"150"),style:t.attr("style"),src:f.transparentSrc,"data-mce-object":r,"class":"mce-object mce-object-"+r}),i},ai=function(n,t){var i,f,e,r=t.name;return(i=new u("span",1)).attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":r,"class":"mce-preview-object mce-object-"+r}),lt(n,t,i),(f=new u(r,1)).attr({src:t.attr("src"),allowfullscreen:t.attr("allowfullscreen"),style:t.attr("style"),"class":t.attr("class"),width:t.attr("width"),height:t.attr("height"),frameborder:"0"}),(e=new u("span",1)).attr("class","mce-shim"),i.append(f),i.append(e),i},lt=function(n,t,i){for(var r,u,e,o,f=(e=t.attributes).length;f--;)r=e[f].name,u=e[f].value,"width"!==r&&"height"!==r&&"style"!==r&&("data"!==r&&"src"!==r||(u=n.convertURL(u,r)),i.attr("data-mce-p-"+r,u));(o=t.firstChild&&t.firstChild.value)&&(i.attr("data-mce-html",escape(ct(n,o))),i.firstChild=null)},at=function(n){for(;n=n.parent;)if(n.attr("data-ephox-embed-iri"))return!0;return!1},vi=function(n){return function(t){for(var r,u,e=t.length;e--;)(r=t[e]).parent&&(r.parent.attr("data-mce-object")||("script"!==r.name||(u=c(i(n),r.attr("src"))))&&(u&&(u.width&&r.attr("width",u.width.toString()),u.height&&r.attr("height",u.height.toString())),"iframe"===r.name&&wt(n)&&f.ceFalse?at(r)||r.replace(ai(n,r)):at(r)||r.replace(li(n,r))))}},yi=function(t){t.on("preInit",function(){var r=t.schema.getSpecialElements(),i;n.each("video audio iframe object".split(" "),function(n){r[n]=new RegExp("<\/"+n+"[^>]*>","gi")});i=t.schema.getBoolAttrs();n.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(n){i[n]={}});t.parser.addNodeFilter("iframe,video,audio,object,embed,script",vi(t));t.serializer.addAttributeFilter("data-mce-object",function(n,i){for(var r,f,o,s,a,h,e,v,l,c=n.length;c--;)if((r=n[c]).parent){for(e=r.attr(i),f=new u(e,1),"audio"!==e&&"script"!==e&&((v=r.attr("class"))&&-1!==v.indexOf("mce-preview-object")?f.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):f.attr({width:r.attr("width"),height:r.attr("height")})),f.attr({style:r.attr("style")}),o=(s=r.attributes).length;o--;)l=s[o].name,0===l.indexOf("data-mce-p-")&&f.attr(l.substr(11),s[o].value);"script"===e&&f.attr("type","text/javascript");(a=r.attr("data-mce-html"))&&((h=new u("#text",3)).raw=!0,h.value=ct(t,unescape(a)),f.append(h));r.replace(f)}})});t.on("setContent",function(){t.$("span.mce-preview-object").each(function(n,i){var r=t.$(i);0===r.find("span.mce-shim",i).length&&r.append('<span class="mce-shim"><\/span>')})})},pi=function(n){n.on("ResolveName",function(n){var t;1===n.target.nodeType&&(t=n.target.getAttribute("data-mce-object"))&&(n.name=t)})},wi=function(n){n.on("click keyup",function(){var t=n.selection.getNode();t&&n.dom.hasClass(t,"mce-preview-object")&&n.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")});n.on("ObjectSelected",function(n){var t=n.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||n.preventDefault()});n.on("objectResized",function(n){var t,i=n.target;i.getAttribute("data-mce-object")&&(t=i.getAttribute("data-mce-html"))&&(t=unescape(t),i.setAttribute("data-mce-html",escape(s(t,{width:n.width,height:n.height}))))})},bi=function(n){n.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]});n.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})};vt.add("media",function(n){return ci(n),bi(n),pi(n),yi(n),wi(n),hi(n)})}();!function(){"use strict";var si=tinymce.util.Tools.resolve("tinymce.PluginManager"),st=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),hi=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),p=tinymce.util.Tools.resolve("tinymce.util.VK"),ci=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),b=function(n){return n&&"BR"===n.nodeName},li=function(n){return n&&3===n.nodeType},t=function(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)},ht=function(n){return n&&/^(LI|DT|DD)$/.test(n.nodeName)},ai=function(n){return n&&/^(TH|TD)$/.test(n.nodeName)},a=b,k=function(n){return n.parentNode.firstChild===n},ct=function(n){return n.parentNode.lastChild===n},d=function(n,t){return t&&!!n.schema.getTextBlockElements()[t.nodeName]},lt=function(n,t){return n&&n.nodeName in t},vi=function(n,t){return!!b(t)&&!(!n.isBlock(t.nextSibling)||b(t.previousSibling))},u=function(n,t,i){var r=n.isEmpty(t);return!(i&&0<n.select("span[data-mce-type=bookmark]",t).length)&&r},at=function(n,t){return n.isChildOf(t,n.getRoot())},vt=function(n,t){var i=st.getNode(n,t);return ht(n)&&li(i)?{container:i,offset:t>=n.childNodes.length?i.data.length:0}:{container:n,offset:t}},g=function(n){var t=n.cloneRange(),r=vt(n.startContainer,n.startOffset),i;return t.setStart(r.container,r.offset),i=vt(n.endContainer,n.endOffset),t.setEnd(i.container,i.offset),t},c=h.DOM,f=function(n){var t={},i=function(i){var f,r,u;r=n[i?"startContainer":"endContainer"];u=n[i?"startOffset":"endOffset"];1===r.nodeType&&(f=c.create("span",{"data-mce-type":"bookmark"}),r.hasChildNodes()?(u=Math.min(u,r.childNodes.length-1),i?r.insertBefore(f,r.childNodes[u]):c.insertAfter(f,r.childNodes[u])):r.appendChild(f),r=f,u=0);t[i?"startContainer":"endContainer"]=r;t[i?"startOffset":"endOffset"]=u};return i(!0),n.collapsed||i(),t},e=function(n){function i(t){var i,r,u;i=u=n[t?"startContainer":"endContainer"];r=n[t?"startOffset":"endOffset"];i&&(1===i.nodeType&&(r=function(n){for(var t=n.parentNode.firstChild,i=0;t;){if(t===n)return i;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||i++;t=t.nextSibling}return-1}(i),i=i.parentNode,c.remove(u),!i.hasChildNodes()&&c.isBlock(i)&&i.appendChild(c.create("br"))),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=r)}i(!0);i();var t=c.createRng();return t.setStart(n.startContainer,n.startOffset),n.endContainer&&t.setEnd(n.endContainer,n.endOffset),g(t)},yt=h.DOM,yi=function(n,i){var f,r=i.parentNode;"LI"===r.nodeName&&r.firstChild===i&&((f=r.previousSibling)&&"LI"===f.nodeName?(f.appendChild(i),u(n,r)&&yt.remove(r)):yt.setStyle(r,"listStyleType","none"));t(r)&&(f=r.previousSibling)&&"LI"===f.nodeName&&f.appendChild(i)},nt=function(t,i){n.each(n.grep(t.select("ol,ul",i)),function(n){yi(t,n)})},pi=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),pt=function(n){var t=n.selection.getStart(!0);return n.dom.getParent(t,"OL,UL,DL",tt(n,t))},tt=function(n,t){var i=n.dom.getParents(t,"TD,TH");return 0<i.length?i[0]:n.getBody()},i={getParentList:pt,getSelectedSubLists:function(i){var f,e,r,u=pt(i),o=i.selection.getSelectedBlocks();return r=o,(e=u)&&1===r.length&&r[0]===e?(f=u,n.grep(f.querySelectorAll("ol,ul,dl"),function(n){return t(n)})):n.grep(o,function(n){return t(n)&&u!==n})},getSelectedListItems:function(t){var i,r,u,f=t.selection.getSelectedBlocks();return n.grep((i=t,r=f,u=n.map(r,function(n){var t=i.dom.getParent(n,"li,dd,dt",tt(i,n));return t||n}),pi.unique(u)),function(n){return ht(n)})},getClosestListRootElm:tt},wt=tinymce.util.Tools.resolve("tinymce.Env"),l=h.DOM,s=function(n,t,i){var u,r,e,f=l.createFragment(),o=n.schema.getBlockElements(),s;if(n.settings.forced_root_block&&(i=i||n.settings.forced_root_block),i&&((r=l.create(i)).tagName===n.settings.forced_root_block&&l.setAttribs(r,n.settings.forced_root_block_attrs),lt(t.firstChild,o)||f.appendChild(r)),t)for(;u=t.firstChild;)s=u.nodeName,e||"SPAN"===s&&"bookmark"===u.getAttribute("data-mce-type")||(e=!0),lt(u,o)?(f.appendChild(u),r=null):i?(r||(r=l.create(i),f.appendChild(r)),r.appendChild(u)):f.appendChild(u);return n.settings.forced_root_block?e||wt.ie&&!(10<wt.ie)||r.appendChild(l.create("br",{"data-mce-bogus":"1"})):f.appendChild(l.create("br")),f},o=h.DOM,bt=function(t,i,r,f){var h,c,a,e,l;for(a=o.select('span[data-mce-type="bookmark"]',i),f=f||s(t,r),(h=o.createRng()).setStartAfter(r),h.setEndAfter(i),e=(c=h.extractContents()).firstChild;e;e=e.firstChild)if("LI"===e.nodeName&&t.dom.isEmpty(e)){o.remove(e);break}t.dom.isEmpty(c)||o.insertAfter(c,i);o.insertAfter(f,i);u(t.dom,r.parentNode)&&(l=r.parentNode,n.each(a,function(n){l.parentNode.insertBefore(n,r.parentNode)}),o.remove(l));o.remove(r);u(t.dom,i)&&o.remove(i)},r=h.DOM,it=function(n,t){u(n,t)&&r.remove(t)},kt=function(n,i){var u,e,f=i.parentNode;return f?(u=f.parentNode,f===n.getBody()||("DD"===i.nodeName?r.rename(i,"DT"):k(i)&&ct(i)?"LI"===u.nodeName?(r.insertAfter(i,u),it(n.dom,u),r.remove(f)):t(u)?r.remove(f,!0):(u.insertBefore(s(n,i),f),r.remove(f)):k(i)?"LI"===u.nodeName?(r.insertAfter(i,u),i.appendChild(f),it(n.dom,u)):t(u)?u.insertBefore(i,f):(u.insertBefore(s(n,i),f),r.remove(i)):ct(i)?"LI"===u.nodeName?r.insertAfter(i,u):t(u)?r.insertAfter(i,f):(r.insertAfter(s(n,i),f),r.remove(i)):("LI"===u.nodeName?(f=u,e=s(n,i,"LI")):e=t(u)?s(n,i,"LI"):s(n,i),bt(n,f,i,e),nt(n.dom,f.parentNode)))):it(n.dom,i),!0},wi=kt,dt=function(n){var r=i.getSelectedListItems(n),u;if(r.length){for(var s=f(n.selection.getRng()),t=void 0,o=void 0,h=i.getClosestListRootElm(n,n.selection.getStart(!0)),t=r.length;t--;)for(u=r[t].parentNode;u&&u!==h;){for(o=r.length;o--;)if(r[o]===u){r.splice(t,1);break}u=u.parentNode}for(t=0;t<r.length&&(kt(n,r[t])||0!==t);t++);return n.selection.setRng(e(s)),n.nodeChanged(),!0}},gt=function(t,i){n.each(i,function(n,i){t.setAttribute(i,n)})},w=function(t,i,r){var u,f,e,o,s,h,c;u=t;f=i;o=(e=r)["list-style-type"]?e["list-style-type"]:null;u.setStyle(f,"list-style-type",o);s=t;gt(h=i,(c=r)["list-attributes"]);n.each(s.select("li",h),function(n){gt(n,c["list-item-attributes"])})},ni=function(n,t,i,r){var u,f;for(u=t[i?"startContainer":"endContainer"],f=t[i?"startOffset":"endOffset"],1===u.nodeType&&(u=u.childNodes[Math.min(f,u.childNodes.length-1)]||u),!i&&a(u.nextSibling)&&(u=u.nextSibling);u.parentNode!==r;){if(d(n,u)||/^(TD|TH)$/.test(u.parentNode.nodeName))return u;u=u.parentNode}return u},bi=function(r,u,o){void 0===o&&(o={});var c,l=r.selection.getRng(!0),h="LI",v=i.getClosestListRootElm(r,r.selection.getStart(!0)),s=r.dom;"false"!==s.getContentEditable(r.selection.getNode())&&("DL"===(u=u.toUpperCase())&&(h="DT"),c=f(l),n.each(function(t,i,r){for(var u,e=[],o=t.dom,h=ni(t,i,!0,r),c=ni(t,i,!1,r),s=[],f=h;f&&(s.push(f),f!==c);f=f.nextSibling);return n.each(s,function(n){if(d(t,n))return e.push(n),void(u=null);if(o.isBlock(n)||a(n))return a(n)&&o.remove(n),void(u=null);var i=n.nextSibling;ci.isBookmarkNode(n)&&(d(t,i)||!i&&n.parentNode===r)?u=null:(u||(u=o.create("p"),n.parentNode.insertBefore(u,n),e.push(u)),u.appendChild(n))}),e}(r,l,v),function(i){var f,e,a,l,v,c,y,p,b;(e=i.previousSibling)&&t(e)&&e.nodeName===u&&(a=e,l=o,v=s.getStyle(a,"list-style-type"),c=l?l["list-style-type"]:"",v===(c=null===c?"":c))?(f=e,i=s.rename(i,h),e.appendChild(i)):(f=s.create(u),i.parentNode.insertBefore(f,i),f.appendChild(i),i=s.rename(i,h));y=s;p=i;b=["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"];n.each(b,function(n){return y.setStyle(p,((t={})[n]="",t));var t});w(s,f,o);ut(r.dom,f)}),r.selection.setRng(e(c)))},rt=function(r){var s=f(r.selection.getRng(!0)),h=i.getClosestListRootElm(r,r.selection.getStart(!0)),o=i.getSelectedListItems(r),c=n.grep(o,function(n){return r.dom.isEmpty(n)});o=n.grep(o,function(n){return!r.dom.isEmpty(n)});n.each(c,function(n){u(r.dom,n)&&wi(r,n)});n.each(o,function(n){var i,u;if(n.parentNode!==r.getBody()){for(i=n;i&&i!==h;i=i.parentNode)t(i)&&(u=i);bt(r,u,n);nt(r.dom,u.parentNode)}});r.selection.setRng(e(s))},ti=function(n,i,r){return f=r,(u=i)&&f&&t(u)&&u.nodeName===f.nodeName&&(s=i,h=r,(o=n).getStyle(s,"list-style-type",!0)===o.getStyle(h,"list-style-type",!0))&&(e=r,i.className===e.className);var e,o,s,h,u,f},ut=function(n,t){var i,r;if(i=t.nextSibling,ti(n,t,i)){for(;r=i.firstChild;)t.appendChild(r);n.remove(i)}if(i=t.previousSibling,ti(n,t,i)){for(;r=i.lastChild;)t.insertBefore(r,t.firstChild);n.remove(i)}},ki=function(t,i,r,u,o){if(i.nodeName!==u||ii(o)){var s=f(t.selection.getRng(!0));n.each([i].concat(r),function(n){!function(n,t,i,r){if(t.nodeName!==i){var u=n.rename(t,i);w(n,u,r)}else w(n,t,r)}(t.dom,n,u,o)});t.selection.setRng(e(s))}else rt(t)},ii=function(n){return"list-style-type"in n},v={toggleList:function(n,t,r){var u=i.getParentList(n),o=i.getSelectedSubLists(n);r=r||{};u&&0<o.length?ki(n,u,o,t,r):function(n,t,i,r){if(t!==n.getBody())if(t)if(t.nodeName!==i||ii(r)){var u=f(n.selection.getRng(!0));w(n.dom,t,r);ut(n.dom,n.dom.rename(t,i));n.selection.setRng(e(u))}else rt(n);else bi(n,i,r)}(n,u,t,r)},removeList:rt,mergeWithAdjacentLists:ut},ri=function(n,t,i,r){var o,f,u=t.startContainer,e=t.startOffset;if(3===u.nodeType&&(i?e<u.data.length:0<e))return u;for(o=n.schema.getNonEmptyElements(),1===u.nodeType&&(u=st.getNode(u,e)),f=new hi(u,r),i&&vi(n.dom,u)&&f.next();u=f[i?"next":"prev2"]();)if("LI"===u.nodeName&&!u.hasChildNodes()||o[u.nodeName]||3===u.nodeType&&0<u.data.length)return u},ui=function(n,i){var r=i.childNodes;return 1===r.length&&!t(r[0])&&n.isBlock(r[0])},di=function(n,t,i){var r,f,e,o;if(f=ui(n,i)?i.firstChild:i,ui(e=n,o=t)&&e.remove(o.firstChild,!0),!u(n,t,!0))for(;r=t.firstChild;)f.appendChild(r)},ft=function(n,i,r){var e,o,f=i.parentNode;at(n,i)&&at(n,r)&&(t(r.lastChild)&&(o=r.lastChild),f===r.lastChild&&a(f.previousSibling)&&n.remove(f.previousSibling),(e=r.lastChild)&&a(e)&&i.hasChildNodes()&&n.remove(e),u(n,r,!0)&&n.$(r).empty(),di(n,i,r),o&&r.appendChild(o),n.remove(i),u(n,f)&&f!==n.getRoot()&&n.remove(f))},gi=function(n,t,i,r){var o,s,u,h=n.dom,c;h.isEmpty(r)?(s=i,u=r,(o=n).dom.$(u).empty(),ft(o.dom,s,u),o.selection.setCursorLocation(u)):(c=f(t),ft(h,i,r),n.selection.setRng(e(c)))},nr=function(n,t){var a,s,r,h=n.dom,c=n.selection,y=c.getStart(),l=i.getClosestListRootElm(n,y),o=h.getParent(c.getStart(),"LI",l);if(o){if((a=o.parentNode)===n.getBody()&&u(h,a))return!0;if(s=g(c.getRng(!0)),(r=h.getParent(ri(n,s,t,l),"LI",l))&&r!==o)return t?gi(n,s,r,o):function(n,t,i,r){var o=f(t),u;ft(n.dom,i,r);u=e(o);n.selection.setRng(u)}(n,s,o,r),!0;if(!r&&!t&&v.removeList(n))return!0}return!1},tr=function(n,t){return nr(n,t)||function(n,t){var r=n.dom,o=n.selection.getStart(),u=i.getClosestListRootElm(n,o),e=r.getParent(o,r.isBlock,u),s,f;return e&&r.isEmpty(e)&&(s=g(n.selection.getRng(!0)),f=r.getParent(ri(n,s,t,u),"LI",u),f)?(n.undoManager.transact(function(){var i,s,h,o;s=e;h=u;o=(i=r).getParent(s.parentNode,i.isBlock,h);i.remove(s);o&&i.isEmpty(o)&&i.remove(o);v.mergeWithAdjacentLists(r,f.parentNode);n.selection.select(f,!0);n.selection.collapse(t)}),!0):!1}(n,t)},et=function(n,t){return n.selection.isCollapsed()?tr(n,t):(u=(r=n).selection.getStart(),f=i.getClosestListRootElm(r,u),!!(r.dom.getParent(u,"LI,DT,DD",f)||0<i.getSelectedListItems(r).length)&&(r.undoManager.transact(function(){r.execCommand("Delete");nt(r.dom,r.getBody())}),!0));var r,u,f},ir=function(n){n.on("keydown",function(t){t.keyCode===p.BACKSPACE?et(n,!1)&&t.preventDefault():t.keyCode===p.DELETE&&et(n,!0)&&t.preventDefault()})},rr=et,ur=function(n){return{backspaceDelete:function(t){rr(n,t)}}},y=h.DOM,fi=function(n,i){var r;if(t(n)){for(;r=n.firstChild;)i.appendChild(r);y.remove(n)}},ei=function(n){var u,r,o,h,c=i.getSelectedListItems(n),l,s;if(c.length){for(l=f(n.selection.getRng(!0)),s=0;s<c.length&&(u=c[s],h=o=r=void 0,("DT"===u.nodeName?(y.rename(u,"DD"),1):(r=u.previousSibling)&&t(r)?(r.appendChild(u),1):r&&"LI"===r.nodeName&&t(r.lastChild)?(r.lastChild.appendChild(u),fi(u.lastChild,r.lastChild),1):(r=u.nextSibling)&&t(r)?(r.insertBefore(u,r.firstChild),1):(r=u.previousSibling)&&"LI"===r.nodeName&&(o=y.create(u.parentNode.nodeName),(h=y.getStyle(u.parentNode,"listStyleType"))&&y.setStyle(o,"listStyleType",h),r.appendChild(o),o.appendChild(u),fi(u.lastChild,o),1))||0!==s);s++);return n.selection.setRng(e(l)),n.nodeChanged(),!0}},ot=function(n,t){return function(){var i=n.dom.getParent(n.selection.getStart(),"UL,OL,DL");return i&&i.nodeName===t}},fr=function(n){n.on("BeforeExecCommand",function(t){var i,r=t.command.toLowerCase();if("indent"===r?ei(n)&&(i=!0):"outdent"===r&&dt(n)&&(i=!0),i)return n.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0});n.addCommand("InsertUnorderedList",function(t,i){v.toggleList(n,"UL",i)});n.addCommand("InsertOrderedList",function(t,i){v.toggleList(n,"OL",i)});n.addCommand("InsertDefinitionList",function(t,i){v.toggleList(n,"DL",i)});n.addQueryStateHandler("InsertUnorderedList",ot(n,"UL"));n.addQueryStateHandler("InsertOrderedList",ot(n,"OL"));n.addQueryStateHandler("InsertDefinitionList",ot(n,"DL"))},er=function(n){return n.getParam("lists_indent_on_tab",!0)},or=function(n){var t;er(n)&&(t=n).on("keydown",function(n){n.keyCode!==p.TAB||p.metaKeyPressed(n)||t.dom.getParent(t.selection.getStart(),"LI,DT,DD")&&(n.preventDefault(),n.shiftKey?dt(t):ei(t))});ir(n)},oi=function(i,r){return function(u){var f=u.control;i.on("NodeChange",function(i){var u=function(n,t){for(var i=0;i<n.length;i++)if(t(n[i]))return i;return-1}(i.parents,ai),o=-1!==u?i.parents.slice(0,u):i.parents,e=n.grep(o,t);f.active(0<e.length&&e[0].nodeName===r)})}},sr=function(t){var u,f,e,r;f="advlist";e=(u=t).settings.plugins?u.settings.plugins:"";-1===n.inArray(e.split(/[ ,]/),f)&&(t.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:oi(t,"OL")}),t.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:oi(t,"UL")}));t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:(r=t,function(n){var t=n.control;r.on("nodechange",function(){var n=i.getSelectedListItems(r),u=0<n.length&&k(n[0]);t.disabled(u)})})})};si.add("lists",function(n){return or(n),sr(n),fr(n),ur(n)})}();!function(){"use strict";var rt=tinymce.util.Tools.resolve("tinymce.PluginManager"),ut=tinymce.util.Tools.resolve("tinymce.util.VK"),e=function(n){return n.target_list},o=function(n){return n.rel_list},s=function(n){return n.link_class_list},ft=function(n){return"boolean"==typeof n.link_assume_external_targets&&n.link_assume_external_targets},et=function(n){return"boolean"==typeof n.link_context_toolbar&&n.link_context_toolbar},ot=function(n){return n.link_list},st=function(n){return"string"==typeof n.default_link_target},ht=function(n){return n.default_link_target},h=e,ct=function(n,t){n.settings.target_list=t},lt=function(n){return!1!==e(n)},at=o,c=function(n){return o(n)!==undefined},vt=s,yt=function(n){return s(n)!==undefined},pt=function(n){return!1!==n.link_title},l=function(n){return"boolean"==typeof n.allow_unsafe_link_target&&n.allow_unsafe_link_target},wt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),a=tinymce.util.Tools.resolve("tinymce.Env"),bt=function(n){var t,f,i,r,u,e;!a.ie||10<a.ie?(t=document.createElement("a"),t.target="_blank",t.href=n,t.rel="noreferrer noopener",f=document.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),u=t,e=f,document.body.appendChild(u),u.dispatchEvent(e),document.body.removeChild(u)):(i=window.open("","_blank"),i&&(i.opener=null,r=i.document,r.open(),r.write('<meta http-equiv="refresh" content="0; url='+wt.DOM.encode(n)+'">'),r.close()))},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=function(t,i){var u,e,f=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return t.filter(function(t){return-1===n.inArray(f,t)})};return(r=i?(u=o(u=r)).length?u.concat(f):f:o(r)).length?(e=r,n.trim(e.sort().join(" "))):null},y=function(n,t){return t=t||n.selection.getNode(),r(t)?n.dom.select("a[href]",t)[0]:n.dom.getParent(t,"a[href]")},p=function(n){return n&&"A"===n.nodeName&&n.href},r=function(n){return n&&"FIGURE"===n.nodeName&&/\bimage\b/i.test(n.className)},kt=function(n,t){var i,r;(r=n.dom.select("img",t)[0])&&(i=n.dom.getParents(r,"a[href]",t)[0])&&(i.parentNode.insertBefore(r,i),n.dom.remove(i))},dt=function(n,t,i){var u,r;(r=n.dom.select("img",t)[0])&&(u=n.dom.create("a",i),r.parentNode.insertBefore(u,r),u.appendChild(r))},gt=function(n,t){return function(i){n.undoManager.transact(function(){var e=n.selection.getNode(),f=y(n,e),u={href:i.href,target:i.target?i.target:null,rel:i.rel?i.rel:null,"class":i["class"]?i["class"]:null,title:i.title?i.title:null};c(n.settings)||!1!==l(n.settings)||(u.rel=v(u.rel,"_blank"===u.target));i.href===t.href&&(t.attach(),t={});f?(n.focus(),i.hasOwnProperty("text")&&("innerText"in f?f.innerText=i.text:f.textContent=i.text),n.dom.setAttribs(f,u),n.selection.select(f),n.undoManager.add()):r(e)?dt(n,e,u):i.hasOwnProperty("text")?n.insertContent(n.dom.createHTML("a",u,n.dom.encode(i.text))):n.execCommand("mceInsertLink",!1,u)})}},u=function(n){return function(){n.undoManager.transact(function(){var t=n.selection.getNode();r(t)?kt(n,t):n.execCommand("unlink")})}},ni=p,w=function(t){return 0<n.grep(t,p).length},ti=function(n){return!(/</.test(n)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(n)||-1===n.indexOf("href=")))},b=y,ii=function(n,t){var i=t?t.innerText||t.textContent:n.getContent({format:"text"});return i.replace(/\uFEFF/g,"")},ri=v,ui=tinymce.util.Tools.resolve("tinymce.util.Delay"),fi=tinymce.util.Tools.resolve("tinymce.util.XHR"),k={},t=function(t,i,r){var u=function(t,r){return r=r||[],n.each(t,function(n){var t={text:n.text||n.title};n.menu?t.menu=u(n.menu):(t.value=n.value,i&&i(t));r.push(t)}),r};return u(t,r||[])},d=function(n,t,i){var r=n.selection.getRng();ui.setEditorTimeout(n,function(){n.windowManager.confirm(t,function(t){n.selection.setRng(r);i(t)})})},ei=function(i,r){var e,y,s,p,g,a,nt,tt,it,rt,o,f={},et=i.selection,v=i.dom,ut=function(n){var t=s.find("#text");(!t.value()||n.lastControl&&t.value()===n.lastControl.text())&&t.value(n.control.text());s.find("#href").value(n.control.value())},w=function(){y||!p||f.text||this.parent().parent().find("#text")[0].value(this.value())};p=ti(et.getContent());e=b(i);f.text=y=ii(i.selection,e);f.href=e?v.getAttrib(e,"href"):"";e?f.target=v.getAttrib(e,"target"):st(i.settings)&&(f.target=ht(i.settings));(o=v.getAttrib(e,"rel"))&&(f.rel=o);(o=v.getAttrib(e,"class"))&&(f["class"]=o);(o=v.getAttrib(e,"title"))&&(f.title=o);p&&(g={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){f.text=this.value()}});r&&(a={type:"listbox",label:"Link list",values:t(r,function(n){n.value=i.convertURL(n.value||n.url,"href")},[{text:"None",value:""}]),onselect:ut,value:i.convertURL(f.href,"href"),onPostRender:function(){a=this}});lt(i.settings)&&(h(i.settings)===undefined&&ct(i,[{text:"None",value:""},{text:"New window",value:"_blank"}]),tt={name:"target",type:"listbox",label:"Target",values:t(h(i.settings))});c(i.settings)&&(nt={name:"rel",type:"listbox",label:"Rel",values:t(at(i.settings),function(n){!1===l(i.settings)&&(n.value=ri(n.value,"_blank"===f.target))})});yt(i.settings)&&(it={name:"class",type:"listbox",label:"Class",values:t(vt(i.settings),function(n){n.value&&(n.textStyle=function(){return i.formatter.getCssText({inline:"a",classes:[n.value]})})})});pt(i.settings)&&(rt={name:"title",type:"textbox",label:"Title",value:f.title});s=i.windowManager.open({title:"Insert link",data:f,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(t){var r=t.meta||{};a&&a.value(i.convertURL(this.value(),"href"));n.each(t.meta,function(n,t){var i=s.find("#"+t);"text"===t?0===y.length&&(i.value(n),f.text=n):i.value(n)});r.attach&&(k={href:this.value(),attach:r.attach});r.text||w.call(this)},onkeyup:w,onpaste:w,onbeforecall:function(n){n.meta=s.toJSON()}},g,rt,function(t){var r=[];if(n.each(i.dom.select("a:not([href])"),function(n){var i=n.name||n.id;i&&r.push({text:i,value:"#"+i,selected:-1!==t.indexOf("#"+i)})}),r.length)return r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:ut}}(f.href),a,nt,tt,it],onSubmit:function(t){var s=ft(i.settings),o=gt(i,k),h=u(i),r=n.extend({},f,t.data),e=r.href;e?(p&&r.text!==y||delete r.text,0<e.indexOf("@")&&-1===e.indexOf("//")&&-1===e.indexOf("mailto:")?d(i,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(n){n&&(r.href="mailto:"+e);o(r)}):!0===s&&!/^\w+:/i.test(e)||!1===s&&/^\s*www[\.|\d\.]/i.test(e)?d(i,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(n){n&&(r.href="http://"+e);o(r)}):o(r)):h()}})},oi=function(n){var i,r,t;r=ei;"string"==typeof(t=ot((i=n).settings))?fi.send({url:t,success:function(n){r(i,JSON.parse(n))}}):"function"==typeof t?t(function(n){r(i,n)}):r(i,t)},g=function(n,t){return n.dom.getParent(t,"a[href]")},nt=function(n){return g(n,n.selection.getStart())},f=function(n,t){var i,r,u;t&&(i=(u=t).getAttribute("data-mce-href")||u.getAttribute("href"),/^#/.test(i)?(r=n.$(i),r.length&&n.selection.scrollIntoView(r[0],!0)):bt(t.href))},i=function(n){return function(){oi(n)}},tt=function(n){return function(){f(n,nt(n))}},si=function(n){return function(t){var r,i,u,f;return!!(et(n.settings)&&(!(f=n.plugins.contextmenu)||!f.isContextMenuVisible())&&ni(t)&&3===(u=(i=(r=n.selection).getRng()).startContainer).nodeType&&r.isCollapsed()&&0<i.startOffset&&i.startOffset<u.data.length)}},hi=function(n){n.on("click",function(t){var i=g(n,t.target);i&&ut.metaKeyPressed(t)&&(t.preventDefault(),f(n,i))});n.on("keydown",function(t){var i,r=nt(n);r&&13===t.keyCode&&!0===(i=t).altKey&&!1===i.shiftKey&&!1===i.ctrlKey&&!1===i.metaKey&&(t.preventDefault(),f(n,r))})},it=function(n){return function(){var t=this;n.on("nodechange",function(i){t.active(!n.readonly&&!!b(n,i.element))})}},ci=function(n){return function(){var t=this,i=function(n){w(n.parents)?t.show():t.hide()};w(n.dom.getParents(n.selection.getStart()))||t.hide();n.on("nodechange",i);t.on("remove",function(){n.off("nodechange",i)})}},li=function(n){n.addCommand("mceLink",i(n))},ai=function(n){n.addShortcut("Meta+K","",i(n))},vi=function(n){n.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:i(n),onpostrender:it(n)});n.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:u(n),onpostrender:it(n)});n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:tt(n)})},yi=function(n){n.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:tt(n),onPostRender:ci(n),prependToContext:!0});n.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:i(n),stateSelector:"a[href]",context:"insert",prependToContext:!0});n.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:u(n),stateSelector:"a[href]"})},pi=function(n){n.addContextToolbar&&n.addContextToolbar(si(n),"openlink | link unlink")};rt.add("link",function(n){vi(n);yi(n);pi(n);hi(n);li(n);ai(n)})}();!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function(t){t.settings.inline_styles=!1;t.on("init",function(){var u,i,f,r;u=t;i="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img";f=n.explode(u.settings.font_size_style_values);r=u.schema;u.formatter.register({alignleft:{selector:i,attributes:{align:"left"}},aligncenter:{selector:i,attributes:{align:"center"}},alignright:{selector:i,attributes:{align:"right"}},alignjustify:{selector:i,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return n.inArray(f,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}});n.each("b,i,u,strike".split(","),function(n){r.addValidElements(n+"[*]")});r.getElementRule("font")||r.addValidElements("font[face|size|color|style]");n.each(i.split(","),function(n){var t=r.getElementRule(n);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})})},r=function(n){n.addButton("fontsizeselect",function(){var t=[],i=n.settings.fontsizeFormats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return n.$.each(i.split(" "),function(n,i){var u=i,f=i,r=i.split("=");1<r.length&&(u=r[0],f=r[1]);t.push({text:u,value:f})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:function(){var t=this;n.on("NodeChange",function(){var i;(i=n.dom.getParent(n.selection.getNode(),"font"))?t.value(i.size):t.value("")})},onclick:function(t){t.control.settings.value&&n.execCommand("FontSize",!1,t.control.settings.value)}}});n.addButton("fontselect",function(){var t=[],i=function(n){for(var t=(n=n.replace(/;$/,"").split(";")).length;t--;)n[t]=n[t].split("=");return n}(n.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return n.$.each(i,function(n,i){t.push({text:{raw:i[0]},value:i[1],textStyle:-1===i[1].indexOf("dings")?"font-family:"+i[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:t,fixedWidth:!0,onPostRender:function(){var t=this;n.on("NodeChange",function(){var i;(i=n.dom.getParent(n.selection.getNode(),"font"))?t.value(i.face):t.value("")})},onselect:function(t){t.control.settings.value&&n.execCommand("FontName",!1,t.control.settings.value)}}})};t.add("legacyoutput",function(n){i(n);r(n)})}();!function(){"use strict";var r=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return r(i())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=function(n){return n.getParam("insertdatetime_timeformat",n.translate("%H:%M:%S"))},f=function(n){return n.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},o=function(n){return n.getParam("insertdatetime_dateformat",n.translate("%Y-%m-%d"))},s=u,h=f,c=function(n){var t=f(n);return 0<t.length?t[0]:u(n)},l=function(n){return n.getParam("insertdatetime_element",!1)},a="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),v="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),y="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),p="January February March April May June July August September October November December".split(" "),n=function(n,t){if((n=""+n).length<t)for(var i=0;i<t-n.length;i++)n="0"+n;return n},t=function(t,i,r){return r=r||new Date,i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+r.getFullYear())).replace("%y",""+r.getYear())).replace("%m",n(r.getMonth()+1,2))).replace("%d",n(r.getDate(),2))).replace("%H",""+n(r.getHours(),2))).replace("%M",""+n(r.getMinutes(),2))).replace("%S",""+n(r.getSeconds(),2))).replace("%I",""+((r.getHours()+11)%12+1))).replace("%p",r.getHours()<12?"AM":"PM")).replace("%B",""+t.translate(p[r.getMonth()]))).replace("%b",""+t.translate(y[r.getMonth()]))).replace("%A",""+t.translate(v[r.getDay()]))).replace("%a",""+t.translate(a[r.getDay()]))).replace("%%","%")},i=function(n,i){var e,r,o,u,f,h,c,s;l(n)?(e=t(n,i),r=void 0,r=/%[HMSIp]/.test(i)?t(n,"%Y-%m-%dT%H:%M"):t(n,"%Y-%m-%d"),o=n.dom.getParent(n.selection.getStart(),"time"),o?(f=o,h=r,c=e,s=(u=n).dom.create("time",{datetime:h},c),f.parentNode.insertBefore(s,f),u.dom.remove(f),u.selection.select(s,!0),u.selection.collapse(!1)):n.insertContent('<time datetime="'+r+'">'+e+"<\/time>")):n.insertContent(t(n,i))},w=t,b=function(n){n.addCommand("mceInsertDate",function(){i(n,o(n))});n.addCommand("mceInsertTime",function(){i(n,s(n))})},k=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(n,t){var r,u,f,e=(u=t,f=h(r=n),k.map(f,function(n){return{text:w(r,n),onclick:function(){u.set(n);i(r,n)}}}));n.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:e,onclick:function(){var r=t.get();i(n,r||c(n))}});n.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:e,context:"insert"})};e.add("insertdatetime",function(n){var t=r(null);b(n);d(n,t)})}();!function(){"use strict";var f=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.EditorManager"),s=tinymce.util.Tools.resolve("tinymce.Env"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),h=function(n){return n.getParam("importcss_merge_classes")},c=function(n){return n.getParam("importcss_exclusive")},i=function(n){return n.getParam("importcss_selector_converter")},l=function(n){return n.getParam("importcss_selector_filter")},a=function(n){return n.getParam("importcss_groups")},v=function(n){return n.getParam("importcss_append")},y=function(n){return n.getParam("importcss_file_filter")},t=function(n){return"string"==typeof n?function(t){return-1!==t.indexOf(n)}:n instanceof RegExp?function(t){return n.test(t)}:n},p=function(t,i,r){function u(i,e){var y,h,a,l=i.href,v,p,c,w;if(h=l,a=s.cacheSuffix,"string"==typeof h&&(h=h.replace("?"+a,"").replace("&"+a,"")),(l=h)&&r(l,e)&&(p=l,c=(v=t).settings,!(w=!1!==c.skin&&(c.skin||"lightgray"))||p!==(c.skin_url?v.documentBaseURI.toAbsolute(c.skin_url):o.baseURL+"/skins/"+w)+"/content"+(v.inline?".inline":"")+".min.css")){n.each(i.imports,function(n){u(n,!0)});try{y=i.cssRules||i.rules}catch(b){}n.each(y,function(t){t.styleSheet?u(t.styleSheet,!0):t.selectorText&&n.each(t.selectorText.split(","),function(t){f.push(n.trim(t))})})}}var f=[],e={};n.each(t.contentCSS,function(n){e[n]=!0});r||(r=function(n,t){return t||e[n]});try{n.each(i.styleSheets,function(n){u(n)})}catch(h){}return f},r=function(t,i){var r,f=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(i);if(f){var u=f[1],e=f[2].substr(1).split(".").join(" "),o=n.makeMap("a,img");return f[1]?(r={title:i},t.schema.getTextBlockElements()[u]?r.block=u:t.schema.getBlockElements()[u]||o[u.toLowerCase()]?r.selector=u:r.inline=u):f[2]&&(r={inline:"span",title:i.substr(1),classes:e}),!1!==h(t)?r.classes=e:r.attributes={"class":e},r}},u=function(n,t){return null===t||!1!==c(n)},w=r,b=function(f){f.on("renderFormatsMenu",function(o){var h,c={},w=t(l(f)),s=o.control,b=(h=a(f),n.map(h,function(i){return n.extend({},i,{original:i,selectors:{},filter:t(i.filter),item:{text:i.title,menu:[]}})})),k=function(t,o){var h,v,l,b,y,a,p,k,d,w,g,nt;return(w=t,nt=c,!(u(f,g=o)?w in nt:w in g.selectors))&&(p=t,d=c,u(f,k=o)?d[p]=!0:k.selectors[p]=!0,h=(b=(l=f).plugins.importcss,y=t,((a=o)&&a.selector_converter?a.selector_converter:i(l)?i(l):function(){return r(l,y)}).call(b,y,a)),h)?(v=h.name||e.DOM.uniqueId(),f.formatter.register(v,h),n.extend({},s.settings.itemDefaults,{text:h.title,format:v})):null};v(f)||s.items().remove();n.each(p(f,o.doc||f.getDoc(),t(y(f))),function(t){var i,r,u,f;-1===t.indexOf(".mce-")&&(!w||w(t))&&(i=(u=b,f=t,n.grep(u,function(n){return!n.filter||n.filter(f)})),0<i.length?n.each(i,function(n){var i=k(t,n);i&&n.item.menu.push(i)}):(r=k(t,null),r&&s.add(r)))});n.each(b,function(n){0<n.item.menu.length&&s.add(n.item)});o.control.renderNew()})},k=function(n){return{convertSelectorToFormat:function(t){return w(n,t)}}};f.add("importcss",function(n){return b(n),k(n)})}();!function(){"use strict";function ni(n,t){return ii(document.createElement("canvas"),n,t)}function ti(n){return n.getContext("2d")}function ii(n,t,i){return n.width=t,n.height=i,n}function yt(){return new(w.getOrDie("FileReader"))}function ei(n){return new s(function(t,i){function u(){e();t(r)}function o(){e();i("Unable to load data of type "+n.type+": "+f)}var f=URL.createObjectURL(n),r=new Image,e=function(){r.removeEventListener("load",u);r.removeEventListener("error",o)};r.addEventListener("load",u);r.addEventListener("error",o);r.src=f;r.complete&&u()})}function oi(n){return new s(function(t,i){var r=new XMLHttpRequest;r.open("GET",n,!0);r.responseType="blob";r.onload=function(){200==this.status&&t(this.response)};r.onerror=function(){var n,t=this;i(0===this.status?((n=new Error("No access to download image")).code=18,n.name="SecurityError",n):new Error("Error "+t.status+" downloading image"))};r.send()})}function si(n){var u=n.split(","),f=/data:([^;]+)/.exec(u[0]);if(!f)return et.none();for(var e,o,s,b=f[1],k=u[1],h=gr.atob(k),c=h.length,l=Math.ceil(c/1024),a=new Array(l),t=0;t<l;++t){for(var i=1024*t,v=Math.min(i+1024,c),y=new Array(v-i),r=i,p=0;r<v;++p,++r)y[p]=h[r].charCodeAt(0);a[t]=(e=y,new(w.getOrDie("Uint8Array"))(e))}return et.some((o=a,s={type:b},new(w.getOrDie("Blob"))(o,s)))}function pt(n){return new s(function(t,i){si(n).fold(function(){i("uri is not base64: "+n)},t)})}function hi(n){return new s(function(t){var i=new yt;i.onloadend=function(){t(i.result)};i.readAsDataURL(n)})}function wt(n,t,r){function u(t,i){return n.then(function(n){return c.canvasToDataURL(n,t,i)})}var f=t.type;return{getType:h.constant(f),toBlob:function(){return s.resolve(t)},toDataURL:function(){return r},toBase64:function(){return r.split(",")[1]},toAdjustedBlob:function(t,i){return n.then(function(n){return c.canvasToBlob(n,t,i)})},toAdjustedDataURL:u,toAdjustedBase64:function(n,t){return u(n,t).then(function(n){return n.split(",")[1]})},toCanvas:function(){return n.then(i.clone)}}}function ci(n){return c.blobToDataUri(n).then(function(t){return wt(c.blobToCanvas(n),n,t)})}function u(n,t,i){return i<(n=parseFloat(n))?n=i:n<t&&(n=t),n}function v(n,t){for(var i,u,f,e=[],o=new Array(10),r=0;r<5;r++){for(i=0;i<5;i++)e[i]=t[i+5*r];for(i=0;i<5;i++){for(u=f=0;u<5;u++)f+=n[i+5*u]*e[u];o[i+5*r]=f}}return o}function kt(n,t){return t=u(t,0,1),n.map(function(n,i){return i%6==0?n=1-(1-n)*t:n*=t,u(n,0,1)})}function ot(n,t){return n.toCanvas().then(function(r){return u=r,o=n.getType(),s=t,e=i.get2dContext(u),h=function(n,t){for(var u,f,e,o,r=n.data,s=t[0],h=t[1],c=t[2],l=t[3],a=t[4],v=t[5],y=t[6],p=t[7],w=t[8],b=t[9],k=t[10],d=t[11],g=t[12],nt=t[13],tt=t[14],it=t[15],rt=t[16],ut=t[17],ft=t[18],et=t[19],i=0;i<r.length;i+=4)u=r[i],f=r[i+1],e=r[i+2],o=r[i+3],r[i]=u*s+f*h+e*c+o*l+a,r[i+1]=u*v+f*y+e*p+o*w+b,r[i+2]=u*k+f*d+e*g+o*nt+tt,r[i+3]=u*it+f*rt+e*ut+o*ft+et;return n}(e.getImageData(0,0,u.width,u.height),s),e.putImageData(h,0,0),f.fromCanvas(u,o);var u,o,s,h,e})}function li(n,t){return n.toCanvas().then(function(r){return u=r,s=n.getType(),h=t,o=i.get2dContext(u),c=o.getImageData(0,0,u.width,u.height),e=o.getImageData(0,0,u.width,u.height),e=function(n,t,i){function c(n,t,i){return i<n?n=i:n<t&&(n=t),n}var l,a,u,y,f,e,p,w,b,o,s,d,g,r,v,h,k;for(u=Math.round(Math.sqrt(i.length)),y=Math.floor(u/2),l=n.data,a=t.data,h=n.width,k=n.height,e=0;e<k;e++)for(f=0;f<h;f++){for(p=w=b=0,s=0;s<u;s++)for(o=0;o<u;o++)d=c(f+o-y,0,h-1),g=c(e+s-y,0,k-1),r=4*(g*h+d),v=i[s*u+o],p+=l[r]*v,w+=l[r+1]*v,b+=l[r+2]*v;a[r=4*(e*h+f)]=c(p,0,255);a[r+1]=c(w,0,255);a[r+2]=c(b,0,255)}return t}(c,e,h),o.putImageData(e,0,0),f.fromCanvas(u,s);var u,s,h,c,e,o})}function ai(n){return function(t,r){return t.toCanvas().then(function(u){return function(t,r,u){for(var s,h=i.get2dContext(t),o=new Array(256),e=0;e<o.length;e++)o[e]=n(e,u);return s=function(n,t){for(var r=n.data,i=0;i<r.length;i+=4)r[i]=t[r[i]],r[i+1]=t[r[i+1]],r[i+2]=t[r[i+2]];return n}(h.getImageData(0,0,t.width,t.height),o),h.putImageData(s,0,0),f.fromCanvas(t,r)}(u,t.getType(),r)})}}function k(n){return function(t,i){return ot(t,n(l.identity(),i))}}function vi(n){return function(t){return li(t,n)}}function g(n){return{blob:n,url:dt.createObjectURL(n)}}function it(n){n&&dt.revokeObjectURL(n.url)}function di(n){t.each(n,it)}function hu(i,r,u,f){function ci(n){var r,u,t,i;r=e.find("#w")[0];u=e.find("#h")[0];t=parseInt(r.value(),10);i=parseInt(u.value(),10);e.find("#constrain")[0].checked()&&y&&p&&t&&i&&("w"===n.control.settings.name?(i=Math.round(t*ii),u.value(i)):(t=Math.round(i*ri),r.value(t)));y=t;p=i}function ft(n){return Math.round(100*n)+"%"}function rt(){e.find("#undo").disabled(!v.canUndo());e.find("#redo").disabled(!v.canRedo());e.statusbar.find("#save").disabled(!v.canUndo())}function d(){e.find("#undo").disabled(!0);e.find("#redo").disabled(!0)}function w(n){n&&h.imageSrc(n.url)}function o(n){return function(){var i=t.grep(ti,function(t){return t.settings.name!==n});t.each(i,function(n){n.hide()});n.show();n.focus()}}function ai(n){w(s=g(n))}function ui(n){w(r=g(n));di(v.add(r).removed);rt()}function li(){var t=h.selection();a.blobToImageResult(r.blob).then(function(i){n.crop(i,t.x,t.y,t.w,t.h).then(nt).then(function(n){ui(n);l()})})}function l(){w(r);it(s);o(ot)();rt()}function ut(){s?(ui(s.blob),l()):function n(t,r){s?r():setTimeout(function(){0<t--?n(t,r):i.windowManager.alert("Error: failed to apply image operation.")},10)}(100,ut)}function b(n){return tt.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:n})}function fi(n,t){return b(c([{text:"Back",onclick:l},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ut}])).hide().on("show",function(){d();a.blobToImageResult(r.blob).then(function(n){return t(n)}).then(nt).then(function(n){var t=g(n);w(t);it(s);s=t})})}function k(n,t,u,f,e){return b(c([{text:"Back",onclick:l},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(n){var i;i=n.value;a.blobToImageResult(r.blob).then(function(n){return t(n,i)}).then(nt).then(function(n){var t=g(n);w(t);it(s);s=t})},minValue:i.rtl?e:f,maxValue:i.rtl?f:e,value:u,previewFilter:ft},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ut}])).hide().on("show",function(){this.find("slider").value(u);d()})}var e,ot,ei,s,st,ht,ct,h,oi,si,lt,at,vt,yt,pt,hi,wt,bt,kt,dt,gt,ni,ti,y,p,ii,ri,v=function(){function i(){return 0<t}function r(){return-1!==t&&t<n.length-1}var n=[],t=-1;return{data:n,add:function(i){var r;return r=n.splice(++t),n.push(i),{state:i,removed:r}},undo:function(){if(i())return n[--t]},redo:function(){if(r())return n[++t]},canUndo:i,canRedo:r}}(),c=function(n){return i.rtl?n.reverse():n},et=function(n){var t=[].slice.call(arguments,1);return function(){var i=s||r;a.blobToImageResult(i.blob).then(function(i){n.apply(this,[i].concat(t)).then(nt).then(ai)})}},nt=function(n){return n.toBlob()};st=b(c([{text:"Back",onclick:l},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:li}])).hide().on("show hide",function(n){h.toggleCropRect("show"===n.type)}).on("show",d);ht=b(c([{text:"Back",onclick:l},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:ci},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:ci},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:function(n){!0===n.control.value()&&(ii=p/y,ri=y/p)}},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}])).hide().on("submit",function(t){var i=parseInt(e.find("#w").value(),10),u=parseInt(e.find("#h").value(),10);t.preventDefault(),function(n){for(var u,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return u=[].slice.call(arguments,1),function(){a.blobToImageResult(r.blob).then(function(t){n.apply(this,[t].concat(u)).then(nt).then(ui)})}}(n.resize,i,u)();l()}).on("show",d);ct=b(c([{text:"Back",onclick:l},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:et(n.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:et(n.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:et(n.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:et(n.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ut}])).hide().on("show",d);lt=fi(0,n.invert);kt=fi(0,n.sharpen);dt=fi(0,n.emboss);at=k(0,n.brightness,0,-1,1);vt=k(0,n.hue,180,0,360);yt=k(0,n.saturate,0,-1,1);pt=k(0,n.contrast,0,-1,1);hi=k(0,n.grayscale,0,0,1);wt=k(0,n.sepia,0,0,1);bt=function(n,t){function u(){var n,i,u;n=e.find("#r")[0].value();i=e.find("#g")[0].value();u=e.find("#b")[0].value();a.blobToImageResult(r.blob).then(function(r){return t(r,n,i,u)}).then(nt).then(function(n){var t=g(n);w(t);it(s);s=t})}var f=i.rtl?2:0,o=i.rtl?0:2;return b(c([{text:"Back",onclick:l},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:f,value:1,maxValue:o,ondragend:u,previewFilter:ft},{type:"slider",label:"G",name:"g",minValue:f,value:1,maxValue:o,ondragend:u,previewFilter:ft},{type:"slider",label:"B",name:"b",minValue:f,value:1,maxValue:o,ondragend:u,previewFilter:ft},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:ut}])).hide().on("show",function(){e.find("#r,#g,#b").value(1);d()})}(0,n.colorize);gt=k(0,n.gamma,0,-1,1);ni=k(0,n.exposure,1,0,2);ei=b(c([{text:"Back",onclick:l},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:o(vt)},{text:"saturate",icon:"saturate",onclick:o(yt)},{text:"sepia",icon:"sepia",onclick:o(wt)},{text:"emboss",icon:"emboss",onclick:o(dt)},{text:"exposure",icon:"exposure",onclick:o(ni)},{type:"spacer",flex:1}])).hide();ot=b(c([{tooltip:"Crop",icon:"crop",onclick:o(st)},{tooltip:"Resize",icon:"resize2",onclick:o(ht)},{tooltip:"Orientation",icon:"orientation",onclick:o(ct)},{tooltip:"Brightness",icon:"sun",onclick:o(at)},{tooltip:"Sharpen",icon:"sharpen",onclick:o(kt)},{tooltip:"Contrast",icon:"contrast",onclick:o(pt)},{tooltip:"Color levels",icon:"drop",onclick:o(bt)},{tooltip:"Gamma",icon:"gamma",onclick:o(gt)},{tooltip:"Invert",icon:"invert",onclick:o(lt)}]));h=su.create({flex:1,imageSrc:r.url});oi=tt.create("Container",{layout:"flex",direction:"column",pack:"start",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:function(){w(r=v.undo());rt()}},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:function(){w(r=v.redo());rt()}},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:function(){var n=h.zoom();n<2&&(n+=.1);h.zoom(n)}},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:function(){var n=h.zoom();.1<n&&(n-=.1);h.zoom(n)}}]});si=tt.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:c([oi,h])});ti=[ot,st,ht,ct,ei,lt,at,vt,yt,pt,hi,wt,bt,kt,dt,gt,ni];(e=i.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:Math.min(bi.DOM.getViewPort().w,800),minHeight:Math.min(bi.DOM.getViewPort().h,650),title:"Edit image",items:ti.concat([si]),buttons:c([{text:"Save",name:"save",subtype:"primary",onclick:function(){u(r.blob);e.close()}},{text:"Cancel",onclick:"close"}])})).on("close",function(){f();di(v.data);s=v=null});v.add(r);rt();h.on("load",function(){y=h.imageSize().w;p=h.imageSize().h;ii=p/y;ri=y/p;e.find("#w").value(y);e.find("#h").value(p)});h.on("crop",li)}function au(){return new(w.getOrDie("XMLHttpRequest"))}var ht=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return ht(i())}}},yr=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.Tools"),ri,ui,fi,ct,i={create:ni,clone:function(n){var t;return ti(t=ni(n.width,n.height)).drawImage(n,0,0),t},resize:ii,get2dContext:ti,get3dContext:function(n){var t=null;try{t=n.getContext("webgl")||n.getContext("experimental-webgl")}catch(i){}return t||(t=null),t}},b={getWidth:function(n){return n.naturalWidth||n.width},getHeight:function(n){return n.naturalHeight||n.height}},s=window.Promise?window.Promise:function(){function t(n,t){return function(){n.apply(t,arguments)}}function r(n){var t=this;null!==this._state?o(function(){var i=t._state?n.onFulfilled:n.onRejected,r;if(null!==i){try{r=i(t._value)}catch(u){return void n.reject(u)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)}):this._deferreds.push(n)}function u(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if("function"==typeof r)return void e(t(r,n),t(u,this),t(i,this))}this._state=!0;this._value=n;f.call(this)}catch(o){i.call(this,o)}}function i(n){this._state=!1;this._value=n;f.call(this)}function f(){for(var n=0,t=this._deferreds.length;n<t;n++)r.call(this,this._deferreds[n]);this._deferreds=null}function h(n,t,i,r){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.resolve=i;this.reject=r}function e(n,t,i){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,i(n))})}catch(u){if(r)return;r=!0;i(u)}}var n=function(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null;this._value=null;this._deferreds=[];e(n,t(u,this),t(i,this))},o=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,1)},s=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};return n.prototype["catch"]=function(n){return this.then(null,n)},n.prototype.then=function(t,i){var u=this;return new n(function(n,f){r.call(u,new h(t,i,n,f))})},n.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new n(function(n,i){function f(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){f(r,n)},i)}t[r]=e;0==--u&&n(t)}catch(s){i(s)}}var u,r;if(0===t.length)return n([]);for(u=t.length,r=0;r<t.length;r++)f(r,t[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n}(),lt=function(n){return function(){return n}},pr=lt(!1),wr=lt(!0),h={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:lt,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:pr,always:wr},nt=h.never,at=h.always,p=function(){return vt},vt=(ct={fold:function(n){return n()},is:nt,isSome:nt,isNone:at,getOr:fi=function(n){return n},getOrThunk:ui=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:fi,orThunk:ui,map:p,ap:p,each:function(){},bind:p,flatten:p,exists:nt,forall:at,filter:p,equals:ri=function(n){return n.isNone()},equals_:ri,toArray:function(){return[]},toString:h.constant("none()")},Object.freeze&&Object.freeze(ct),ct),ft=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:at,isNone:nt,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:function(t){return ft(t(n))},ap:function(t){return t.fold(p,function(t){return ft(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:vt},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(nt,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},et={some:ft,none:p,from:function(n){return null===n||n===undefined?vt:ft(n)}},br="undefined"!=typeof window?window:Function("return this;")(),kr=function(n,t){for(var i=t!==undefined&&null!==t?t:br,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i},dr=function(n,t){var i=n.split(".");return kr(i,t)},w={getOrDie:function(n,t){var i=dr(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i}},gr={atob:function(n){return w.getOrDie("atob")(n)},requestAnimationFrame:function(n){w.getOrDie("requestAnimationFrame")(n)}},c={blobToImage:ei,imageToBlob:function(n){var t=n.src;return 0===t.indexOf("data:")?pt(t):oi(t)},blobToArrayBuffer:function(n){return new s(function(t){var i=new yt;i.onloadend=function(){t(i.result)};i.readAsArrayBuffer(n)})},blobToDataUri:hi,blobToBase64:function(n){return hi(n).then(function(n){return n.split(",")[1]})},dataUriToBlobSync:si,canvasToBlob:function(n,t,i){return t=t||"image/png",HTMLCanvasElement.prototype.toBlob?new s(function(r){n.toBlob(function(n){r(n)},t,i)}):pt(n.toDataURL(t,i))},canvasToDataURL:function(n,t,i){return t=t||"image/png",n.then(function(n){return n.toDataURL(t,i)})},blobToCanvas:function(n){return ei(n).then(function(n){var r,t;return r=n,URL.revokeObjectURL(r.src),t=i.create(b.getWidth(n),b.getHeight(n)),i.get2dContext(t).drawImage(n,0,0),t})},uriToBlob:function(n){return 0===n.indexOf("blob:")?oi(n):0===n.indexOf("data:")?pt(n):null}},nu=function(n){return c.blobToImage(n)},tu=function(n){return c.imageToBlob(n)},f={fromBlob:ci,fromCanvas:function(n,t){return c.canvasToBlob(n,t).then(function(t){return wt(s.resolve(n),t,n.toDataURL())})},fromImage:function(n){return c.imageToBlob(n).then(function(n){return ci(n)})},fromBlobAndUrlSync:function(n,t){return wt(c.blobToCanvas(n),n,t)}},bt=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],l={identity:function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:kt,multiply:v,adjustContrast:function(n,t){var i;return t=u(t,-1,1),v(n,[(i=(t*=100)<0?127+t/100*127:127*(i=0==(i=t%1)?bt[t]:bt[Math.floor(t)]*(1-i)+bt[Math.floor(t)+1]*i)+127)/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function(n,t){return v(n,[1,0,0,0,t=u(255*t,-255,255),0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function(n,t){var i;return v(n,[.3086*(1-(i=1+(0<(t=u(t,-1,1))?3*t:t)))+i,.6094*(1-i),.082*(1-i),0,0,.3086*(1-i),.6094*(1-i)+i,.082*(1-i),0,0,.3086*(1-i),.6094*(1-i),.082*(1-i)+i,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function(n,t){var i,r,e,f,o;return t=u(t,-180,180)/180*Math.PI,v(n,[(e=.213)+.787*(i=Math.cos(t))+(r=Math.sin(t))*-e,(f=.715)+i*-f+r*-f,(o=.072)+i*-o+.928*r,0,0,e+i*-e+.143*r,f+i*(1-f)+.14*r,o+i*-o+-.283*r,0,0,e+i*-e+-.787*r,f+i*-f+r*f,o+.928*i+r*o,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function(n,t,i,r){return v(n,[t=u(t,0,2),0,0,0,0,0,i=u(i,0,2),0,0,0,0,0,r=u(r,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function(n,t){return v(n,kt([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],t=u(t,0,1)))},adjustGrayscale:function(n,t){return v(n,kt([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],t=u(t,0,1)))}},yi,r={invert:(yi=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0],function(n){return ot(n,yi)}),brightness:k(l.adjustBrightness),hue:k(l.adjustHue),saturate:k(l.adjustSaturation),contrast:k(l.adjustContrast),grayscale:k(l.adjustGrayscale),sepia:k(l.adjustSepia),colorize:function(n,t,i,r){return ot(n,l.adjustColors(l.identity(),t,i,r))},sharpen:vi([0,-1,0,-1,5,-1,0,-1,0]),emboss:vi([-2,-1,0,-1,1,1,0,1,2]),gamma:ai(function(n,t){return 255*Math.pow(n/255,1-t)}),exposure:ai(function(n,t){return 255*(1-Math.exp(-n/255*t))}),colorFilter:ot,convoluteFilter:li},iu={scale:function ru(n,t,r){var a=b.getWidth(n),v=b.getHeight(n),u=t/a,f=r/v,o=!1,e,c,l,h;return(u<.5||2<u)&&(u=u<.5?.5:2,o=!0),(f<.5||2<f)&&(f=f<.5?.5:2,o=!0),h=(e=n,c=u,l=f,new s(function(n){var t=b.getWidth(e),r=b.getHeight(e),u=Math.floor(t*c),f=Math.floor(r*l),o=i.create(u,f),s=i.get2dContext(o);s.drawImage(e,0,0,t,r,0,0,u,f);n(o)})),o?h.then(function(n){return ru(n,t,r)}):h}},st={rotate:function(n,t){return n.toCanvas().then(function(r){return o=r,l=n.getType(),u=t,e=i.create(o.width,o.height),s=i.get2dContext(e),90!=(u=u<(c=h=0)?360+u:u)&&270!=u||i.resize(e,e.height,e.width),90!=u&&180!=u||(h=e.width),270!=u&&180!=u||(c=e.height),s.translate(h,c),s.rotate(u*Math.PI/180),s.drawImage(o,0,0),f.fromCanvas(e,l);var o,l,u,e,s,h,c})},flip:function(n,t){return n.toCanvas().then(function(r){return u=r,s=n.getType(),h=t,e=i.create(u.width,u.height),o=i.get2dContext(e),"v"==h?(o.scale(1,-1),o.drawImage(u,0,-e.height)):(o.scale(-1,1),o.drawImage(u,-e.width,0)),f.fromCanvas(e,s);var u,s,h,e,o})},crop:function(n,t,r,u,e){return n.toCanvas().then(function(o){return h=o,c=n.getType(),l=t,a=r,v=u,y=e,s=i.create(v,y),i.get2dContext(s).drawImage(h,-l,-a),f.fromCanvas(s,c);var h,c,l,a,v,y,s})},resize:function(n,t,i){return n.toCanvas().then(function(r){return iu.scale(r,t,i).then(function(t){return f.fromCanvas(t,n.getType())})})}},n={invert:function(n){return r.invert(n)},sharpen:function(n){return r.sharpen(n)},emboss:function(n){return r.emboss(n)},brightness:function(n,t){return r.brightness(n,t)},hue:function(n,t){return r.hue(n,t)},saturate:function(n,t){return r.saturate(n,t)},contrast:function(n,t){return r.contrast(n,t)},grayscale:function(n,t){return r.grayscale(n,t)},sepia:function(n,t){return r.sepia(n,t)},colorize:function(n,t,i,u){return r.colorize(n,t,i,u)},gamma:function(n,t){return r.gamma(n,t)},exposure:function(n,t){return r.exposure(n,t)},flip:function(n,t){return st.flip(n,t)},crop:function(n,t,i,r,u){return st.crop(n,t,i,r,u)},resize:function(n,t,i){return st.resize(n,t,i)},rotate:function(n,t){return st.rotate(n,t)}},pi=function(n){return n.toBlob()},a={blobToImageResult:function(n){return f.fromBlob(n)},fromBlobAndUrlSync:function(n,t){return f.fromBlobAndUrlSync(n,t)},imageToImageResult:function(n){return f.fromImage(n)},imageResultToBlob:function(n,t,i){return t===undefined&&i===undefined?pi(n):n.toAdjustedBlob(t,i)},imageResultToOriginalBlob:pi,imageResultToDataURL:function(n){return n.toDataURL()}},wi=function(){return w.getOrDie("URL")},dt={createObjectURL:function(n){return wi().createObjectURL(n)},revokeObjectURL:function(n){wi().revokeObjectURL(n)}},uu=tinymce.util.Tools.resolve("tinymce.util.Delay"),e=tinymce.util.Tools.resolve("tinymce.util.Promise"),gt=tinymce.util.Tools.resolve("tinymce.util.URI"),bi=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),tt=tinymce.util.Tools.resolve("tinymce.ui.Factory"),ki=tinymce.util.Tools.resolve("tinymce.geom.Rect"),fu=function(n){return new e(function(t){var i=function(){n.removeEventListener("load",i);t(n)};n.complete?t(n):n.addEventListener("load",i)})},o=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),eu=tinymce.util.Tools.resolve("tinymce.util.Observable"),d=tinymce.util.Tools.resolve("tinymce.util.VK"),ou=0,su={create:function(n){return new(tt.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(n){return arguments.length?(this.state.set("rect",n),this):this.state.get("rect")},imageSize:function(){var n=this.state.get("viewRect");return{w:n.w,h:n.h}},toggleCropRect:function(n){this.state.set("cropEnabled",n)},imageSrc:function(n){var t=this,i=new Image;i.src=n;fu(i).then(function(){var n,f,r=t.state.get("viewRect"),u;(f=t.$el.find("img"))[0]?f.replaceWith(i):(u=document.createElement("div"),u.className="mce-imagepanel-bg",t.getEl().appendChild(u),t.getEl().appendChild(i));n={x:0,y:0,w:i.naturalWidth,h:i.naturalHeight};t.state.set("viewRect",n);t.state.set("rect",ki.inflate(n,-20,-20));r&&r.w===n.w&&r.h===n.h||t.zoomFit();t.repaintImage();t.fire("load")})},zoom:function(n){return arguments.length?(this.state.set("zoom",n),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var n,i,r,u,f,t;n=this.$el.find("img");i=this.getEl().clientWidth;r=this.getEl().clientHeight;u=n[0].naturalWidth;f=n[0].naturalHeight;1<=(t=Math.min((i-10)/u,(r-10)/f))&&(t=1);this.zoom(t)},repaintImage:function(){var t,i,r,u,o,s,e,c,n,f,h;h=this.getEl();n=this.zoom();f=this.state.get("rect");e=this.$el.find("img");c=this.$el.find(".mce-imagepanel-bg");o=h.offsetWidth;s=h.offsetHeight;r=e[0].naturalWidth*n;u=e[0].naturalHeight*n;t=Math.max(0,o/2-r/2);i=Math.max(0,s/2-u/2);e.css({left:t,top:i,width:r,height:u});c.css({left:t,top:i,width:r,height:u});this.cropRect&&(this.cropRect.setRect({x:f.x*n+t,y:f.y*n+i,w:f.w*n,h:f.h*n}),this.cropRect.setClampRect({x:t,y:i,w:r,h:u}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:s}))},bindStates:function(){function i(i){n.cropRect=function(n,i,r,u,f){function y(n,t){return{x:t.x-n.x,y:t.y-n.y,w:t.w,h:t.h}}function p(t,i,u,f){var h,c,o,s,e;h=i.x;c=i.y;o=i.w;s=i.h;h+=u*t.deltaX;c+=f*t.deltaY;(o+=u*t.deltaW)<20&&(o=20);(s+=f*t.deltaH)<20&&(s=20);e=n=ki.clamp({x:h,y:c,w:o,h:s},r,"move"===t.name);e=y(r,e);v.fire("updateRect",{rect:e});b(e)}function c(n){function r(n,t){t.h<0&&(t.h=0);t.w<0&&(t.w=0);o("#"+e+"-"+n,u).css({left:t.x,top:t.y,width:t.w,height:t.h})}t.each(s,function(t){o("#"+e+"-"+t.name,u).css({left:n.w*t.xMul+n.x,top:n.h*t.yMul+n.y})});r("top",{x:i.x,y:i.y,w:i.w,h:n.y-i.y});r("right",{x:n.x+n.w,y:n.y,w:i.w-n.x-n.w+i.x,h:n.h});r("bottom",{x:i.x,y:n.y+n.h,w:i.w,h:i.h-n.y-n.h+i.y});r("left",{x:i.x,y:n.y,w:n.x-i.x,h:n.h});r("move",n)}function w(t){c(n=t)}function b(n){var i,t;w((i=r,{x:(t=n).x+i.x,y:t.y+i.y,w:t.w,h:t.h}))}var v,s,l,a,h="mce-",e=h+"crid-"+ou++;return s=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],a=["top","right","bottom","left"],o('<div id="'+e+'" class="'+h+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(u),t.each(a,function(n){o("#"+e,u).append('<div id="'+e+"-"+n+'"class="'+h+'croprect-block" style="display: none" data-mce-bogus="all">')}),t.each(s,function(n){o("#"+e,u).append('<div id="'+e+"-"+n.name+'" class="'+h+"croprect-handle "+h+"croprect-handle-"+n.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+n.label+'" aria-grabbed="false">')}),l=t.map(s,function(t){var i;return new(tt.get("DragHelper"))(e,{document:u.ownerDocument,handle:e+"-"+t.name,start:function(){i=n},drag:function(n){p(t,i,n.deltaX,n.deltaY)}})}),c(n),o(u).on("focusin focusout",function(n){o(n.target).attr("aria-grabbed","focus"===n.type)}),o(u).on("keydown",function(i){function r(n,t,i,r,f){n.stopPropagation();n.preventDefault();p(u,i,r,f)}var u;switch(t.each(s,function(n){if(i.target.id===e+"-"+n.name)return u=n,!1}),i.keyCode){case d.LEFT:r(i,0,n,-10,0);break;case d.RIGHT:r(i,0,n,10,0);break;case d.UP:r(i,0,n,0,-10);break;case d.DOWN:r(i,0,n,0,10);break;case d.ENTER:case d.SPACEBAR:i.preventDefault();f()}}),v=t.extend({toggleVisibility:function(n){var i;i=t.map(s,function(n){return"#"+e+"-"+n.name}).concat(t.map(a,function(n){return"#"+e+"-"+n})).join(",");n?o(i,u).show():o(i,u).hide()},setClampRect:function(t){r=t;c(n)},setRect:w,getInnerRect:function(){return y(r,n)},setInnerRect:b,setViewPortRect:function(t){i=t;c(n)},destroy:function(){t.each(l,function(n){n.destroy()});l=[]}},eu)}(i,n.state.get("viewRect"),n.state.get("viewRect"),n.getEl(),function(){n.fire("crop")});n.cropRect.on("updateRect",function(t){var i=t.rect,r=n.zoom();i={x:Math.round(i.x/r),y:Math.round(i.y/r),w:Math.round(i.w/r),h:Math.round(i.h/r)};n.state.set("rect",i)});n.on("remove",n.cropRect.destroy)}var n=this;n.state.on("change:cropEnabled",function(t){n.cropRect.toggleVisibility(t.value);n.repaintImage()});n.state.on("change:zoom",function(){n.repaintImage()});n.state.on("change:rect",function(t){var r=t.value;n.cropRect||i(r);n.cropRect.setRect(r)})}}))(n)}},cu={edit:function(n,t){return new e(function(i,r){return t.toBlob().then(function(t){hu(n,g(t),i,r)})})}},rt={getImageSize:function(n){function r(n){return/^[0-9\.]+px$/.test(n)}var t,i;return t=n.style.width,i=n.style.height,t||i?r(t)&&r(i)?{w:parseInt(t,10),h:parseInt(i,10)}:null:(t=n.width,i=n.height,t&&i?{w:parseInt(t,10),h:parseInt(i,10)}:null)},setImageSize:function(n,t){var i,r;t&&(i=n.style.width,r=n.style.height,(i||r)&&(n.style.width=t.w+"px",n.style.height=t.h+"px",n.removeAttribute("data-mce-style")),i=n.width,r=n.height,(i||r)&&(n.setAttribute("width",t.w),n.setAttribute("height",t.h)))},getNaturalImageSize:function(n){return{w:n.naturalWidth,h:n.naturalHeight}}},y=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},lu={isString:y("string"),isObject:y("object"),isArray:y("array"),isNull:y("null"),isBoolean:y("boolean"),isUndefined:y("undefined"),isFunction:y("function"),isNumber:y("number")},gi=(Array.prototype.indexOf,undefined,Array.prototype.push,Array.prototype.slice,lu.isFunction(Array.from)&&Array.from,function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r,i,n))return et.some(r);return et.none()}),nr=function(n){return null!==n&&n!==undefined},vu=function(n,t){var i;return i=t.reduce(function(n,t){return nr(n)?n[t]:undefined},n),nr(i)?i:null},yu=function(n){return new e(function(t){var i=new yt;i.onload=function(n){var i=n.target;t(i.result)};i.readAsText(n)})},tr=function(n,i,r){return new e(function(u){var f;(f=new au).onreadystatechange=function(){4===f.readyState&&u({status:f.status,blob:this.response})};f.open("GET",n,!0);f.withCredentials=r;t.each(i,function(n,t){f.setRequestHeader(t,n)});f.responseType="blob";f.send()})},pu=function(n){var t;try{t=JSON.parse(n)}catch(i){}return t},wu=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],bu=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],ku=function(n){return"ImageProxy HTTP error: "+gi(wu,function(t){return n===t.code}).fold(h.constant("Unknown ImageProxy error"),function(n){return n.message})},ir=function(n){var t=ku(n);return e.reject(t)},du=function(n){return gi(bu,function(t){return t.type===n}).fold(h.constant("Unknown service error"),function(n){return n.message})},gu=function(n,t){return yu(t).then(function(n){var t,i,r=(t=pu(n),"ImageProxy Service error: "+((i=vu(t,["error","type"]))?du(i):"Invalid JSON in service error message"));return e.reject(r)})},nf=function(n,t){return 400===(i=n)||403===i||500===i?gu(0,t):ir(n);var i},tf=ir,rf=function(n,t){var i,r,u,f={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":t};return tr((i=n,r=t,u=-1===i.indexOf("?")?"?":"&",/[?&]apiKey=/.test(i)||!r?i:i+u+"apiKey="+encodeURIComponent(r)),f,!1).then(function(n){return n.status<200||300<=n.status?nf(n.status,n.blob):e.resolve(n.blob)})},rr=function(n,t,i){return t?rf(n,t):tr(n,{},i).then(function(n){return n.status<200||300<=n.status?tf(n.status):e.resolve(n.blob)})},uf=0,ur=function(n,t){n.notificationManager.open({text:t,type:"error"})},ut=function(n){return n.selection.getNode()},fr=function(n,t){var i=t.src;return 0===i.indexOf("data:")||0===i.indexOf("blob:")||new gt(i).host===n.documentBaseURI.host},er=function(n,i){return-1!==t.inArray(n.getParam("imagetools_cors_hosts",[],"string[]"),new gt(i.src).host)},ff=function(n,i){var u,f,e,o,r=i.src;return er(n,i)?rr(i.src,null,(f=n,e=i,-1!==t.inArray(f.getParam("imagetools_credentials_hosts",[],"string[]"),new gt(e.src).host))):fr(n,i)?tu(i):(r=n.getParam("imagetools_proxy"),r+=(-1===r.indexOf("?")?"?":"&")+"url="+encodeURIComponent(i.src),u=(o=n).getParam("api_key",o.getParam("imagetools_api_key","","string"),"string"),rr(r,u,!1))},or=function(n){var t;return(t=n.editorUpload.blobCache.getByUri(ut(n).src))?e.resolve(t.blob()):ff(n,ut(n))},sr=function(n){clearTimeout(n.get())},hr=function(n,t,i,r,u){return t.toBlob().then(function(f){var o,c,h,e,s,l,a;return h=n.editorUpload.blobCache,o=(s=ut(n)).src,n.getParam("images_reuse_filename",!1,"boolean")&&((e=h.getByUri(o))?(o=e.uri(),c=e.name()):(l=n,c=(a=o.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i))?l.dom.encode(a[1]):null)),e=h.create({id:"imagetools"+uf++,blob:f,base64:t.toBase64(),uri:o,name:c}),h.add(e),n.undoManager.transact(function(){n.$(s).on("load",function t(){var u,f,e;n.$(s).off("load",t);n.nodeChanged();i?n.editorUpload.uploadImagesAuto():(sr(r),u=n,f=r,e=uu.setEditorTimeout(u,function(){u.editorUpload.uploadImagesAuto()},u.getParam("images_upload_timeout",3e4,"number")),f.set(e))});u&&n.$(s).attr({width:u.w,height:u.h});n.$(s).attr({src:e.blobUri()}).removeAttr("data-mce-src")}),e})},cr=function(n,t,i,r){return function(){return n._scanForImages().then(h.curry(or,n)).then(a.blobToImageResult).then(i).then(function(i){return hr(n,i,!1,t,r)},function(t){ur(n,t)})}},lr=function(t,i,r){return function(){var u=rt.getImageSize(ut(t)),f=u?{w:u.h,h:u.w}:null;return cr(t,i,function(t){return n.rotate(t,r)},f)()}},ar=function(t,i,r){return function(){return cr(t,i,function(t){return n.flip(t,r)})()}},ef=function(n,t){return function(){var i=ut(n),r=rt.getNaturalImageSize(i),u=function(n){return new e(function(t){nu(n).then(function(u){var f=rt.getNaturalImageSize(u);r.w===f.w&&r.h===f.h||rt.getImageSize(i)&&rt.setImageSize(i,f);dt.revokeObjectURL(u.src);t(n)})})};or(n).then(a.blobToImageResult).then(h.curry(function(n,i){return cu.edit(n,i).then(u).then(a.blobToImageResult).then(function(i){return hr(n,i,!0,t)},function(){})},n),function(t){ur(n,t)})}},vr=function(n,t){return n.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(fr(n,t)||er(n,t)||n.settings.imagetools_proxy)},of=sr,sf=function(n,i){t.each({mceImageRotateLeft:lr(n,i,-90),mceImageRotateRight:lr(n,i,90),mceImageFlipVertical:ar(n,i,"v"),mceImageFlipHorizontal:ar(n,i,"h"),mceEditImage:ef(n,i)},function(t,i){n.addCommand(i,t)})},hf=function(n,t,i){n.on("NodeChange",function(r){var u=i.get();u&&u.src!==r.element.src&&(of(t),n.editorUpload.uploadImagesAuto(),i.set(null));vr(n,r.element)&&i.set(r.element)})},cf=function(n){n.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"});n.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"});n.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"});n.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"});n.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"});n.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})},lf=function(n){n.addContextToolbar(h.curry(vr,n),n.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions"))};yr.add("imagetools",function(n){var t=ht(0),i=ht(null);sf(n,t);cf(n);lf(n);hf(n,t,i)})}();!function(){"use strict";function g(){return new(a.getOrDie("FileReader"))}function ou(){return new(a.getOrDie("XMLHttpRequest"))}function hu(n){var t=function(t,i,r,u){var f,e;(f=new ou).open("POST",n.url);f.withCredentials=n.credentials;f.upload.onprogress=function(n){u(n.loaded/n.total*100)};f.onerror=function(){r("Image upload failed due to a XHR Transport error. Code: "+f.status)};f.onload=function(){var t,u,e;f.status<200||300<=f.status?r("HTTP Error: "+f.status):(t=JSON.parse(f.responseText))&&"string"==typeof t.location?i((u=n.basePath,e=t.location,u?u.replace(/\/$/,"")+"/"+e.replace(/^\//,""):e)):r("Invalid JSON: "+f.responseText)};(e=new FormData).append("file",t.blob(),t.filename());f.send(e)};return n=o.extend({credentials:!1,handler:t},n),{upload:function(i){return n.url||n.handler!==t?(r=i,u=n.handler,new v(function(n,t){try{u(r,n,t,su)}catch(i){t(i.message)}})):v.reject("Upload url missing from the settings.");var r,u}}}function w(n){function t(t){var i,r,u=ti(n),f;(t&&(r={type:"listbox",label:"Image list",name:"image-list",values:tt(t,function(t){t.value=n.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:u.src&&n.convertURL(u.src,"src"),onselect:function(n){var t=i.find("#alt");(!t.value()||n.lastControl&&t.value()===n.lastControl.text())&&t.value(n.control.text());i.find("#src").value(n.control.value()).fire("change")},onPostRender:function(){r=this}}),l(n)||k(n)||d(n))?(f=[iu(n,r)],l(n)&&f.push(kr(n)),(k(n)||d(n))&&f.push(cu(n)),i=n.windowManager.open({title:"Insert/edit image",data:u,bodyType:"tabpanel",body:f,onSubmit:ai(vi,n)})):i=n.windowManager.open({title:"Insert/edit image",data:u,body:ru(n,r),onSubmit:ai(vi,n)});ei(i)}return{open:function(){hr(n,t)}}}var pi=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(n){return!1!==n.settings.image_dimensions},l=function(n){return!0===n.settings.image_advtab},wi=function(n){return n.getParam("image_prepend_url","")},b=function(n){return n.getParam("image_class_list")},bi=function(n){return!1!==n.settings.image_description},ki=function(n){return!0===n.settings.image_title},di=function(n){return!0===n.settings.image_caption},gi=function(n){return n.getParam("image_list",!1)},k=function(n){return n.getParam("images_upload_url",!1)},d=function(n){return n.getParam("images_upload_handler",!1)},nr=function(n){return n.getParam("images_upload_url")},tr=function(n){return n.getParam("images_upload_handler")},ir=function(n){return n.getParam("images_upload_base_path")},rr=function(n){return n.getParam("images_upload_credentials")},ur="undefined"!=typeof window?window:Function("return this;")(),fr=function(n,t){for(var i=t!==undefined&&null!==t?t:ur,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i},er=function(n,t){var i=n.split(".");return fr(i,t)},a={getOrDie:function(n,t){var i=er(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i}},v=tinymce.util.Tools.resolve("tinymce.util.Promise"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),or=tinymce.util.Tools.resolve("tinymce.util.XHR"),nt=function(n,t){return Math.max(parseInt(n,10),parseInt(t,10))},sr=function(n,t){function u(n,r){i.parentNode&&i.parentNode.removeChild(i);t({width:n,height:r})}var i=document.createElement("img"),r;i.onload=function(){u(nt(i.width,i.clientWidth),nt(i.height,i.clientHeight))};i.onerror=function(){u(0,0)};r=i.style;r.visibility="hidden";r.position="fixed";r.bottom=r.left="0px";r.width=r.height="auto";document.body.appendChild(i);i.src=n},tt=function(n,t,i){return function r(n,i){return i=i||[],o.each(n,function(n){var u={text:n.text||n.title};n.menu?u.menu=r(n.menu):(u.value=n.value,t(u));i.push(u)}),i}(n,i||[])},r=function(n){return n&&(n=n.replace(/px$/,"")),n},s=function(n){return 0<n.length&&/^[0-9]+$/.test(n)&&(n+="px"),n},it=function(n){if(n.margin){var t=n.margin.split(" ");switch(t.length){case 1:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[0];n["margin-bottom"]=n["margin-bottom"]||t[0];n["margin-left"]=n["margin-left"]||t[0];break;case 2:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[0];n["margin-left"]=n["margin-left"]||t[1];break;case 3:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[2];n["margin-left"]=n["margin-left"]||t[1];break;case 4:n["margin-top"]=n["margin-top"]||t[0];n["margin-right"]=n["margin-right"]||t[1];n["margin-bottom"]=n["margin-bottom"]||t[2];n["margin-left"]=n["margin-left"]||t[3]}delete n.margin}return n},hr=function(n,t){var i=gi(n);"string"==typeof i?or.send({url:i,success:function(n){t(JSON.parse(n))}}):"function"==typeof i?i(t):t(i)},cr=function(n,t,i){function r(){i.onload=i.onerror=null;n.selection&&(n.selection.select(i),n.nodeChanged())}i.onload=function(){t.width||t.height||!c(n)||n.dom.setAttribs(i,{width:i.clientWidth,height:i.clientHeight});r()};i.onerror=r},lr=function(n){return new v(function(t,i){var r=new g;r.onload=function(){t(r.result)};r.onerror=function(){i(g.error.message)};r.readAsDataURL(n)})},ar=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},rt={isString:t("string"),isObject:t("object"),isArray:t("array"),isNull:t("null"),isBoolean:t("boolean"),isUndefined:t("undefined"),isFunction:t("function"),isNumber:t("number")},ut=function(n){return function(){for(var u,f,e,r,t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(u={},f=0;f<t.length;f++){e=t[f];for(r in e)e.hasOwnProperty(r)&&(u[r]=n(u[r],e[r]))}return u}},ft=ut(function(n,t){return rt.isObject(n)&&rt.isObject(t)?ft(n,t):t}),vr=ut(function(n,t){return t}),y={deepMerge:ft,merge:vr},u=ar.DOM,et=function(n){return n.style.marginLeft&&n.style.marginRight&&n.style.marginLeft===n.style.marginRight?r(n.style.marginLeft):""},ot=function(n){return n.style.marginTop&&n.style.marginBottom&&n.style.marginTop===n.style.marginBottom?r(n.style.marginTop):""},st=function(n){return n.style.borderWidth?r(n.style.borderWidth):""},f=function(n,t){return n.hasAttribute(t)?n.getAttribute(t):""},ht=function(n,t){return n.style[t]?n.style[t]:""},ct=function(n){return null!==n.parentNode&&"FIGURE"===n.parentNode.nodeName},i=function(n,t,i){n.setAttribute(t,i)},yr=function(n){var i,t,f,r;ct(n)?(r=(f=n).parentNode,u.insertAfter(f,r),u.remove(r)):(i=n,t=u.create("figure",{"class":"image"}),u.insertAfter(t,i),t.appendChild(i),t.appendChild(u.create("figcaption",{contentEditable:!0},"Caption")),t.contentEditable="false")},lt=function(n,t){var r=n.getAttribute("style"),i=t(null!==r?r:"");0<i.length?(n.setAttribute("style",i),n.setAttribute("data-mce-style",i)):n.removeAttribute("style")},at=function(n,t){return function(n,r,u){n.style[r]?(n.style[r]=s(u),lt(n,t)):i(n,r,u)}},vt=function(n,t){return n.style[t]?r(n.style[t]):f(n,t)},yt=function(n,t){var i=s(t);n.style.marginLeft=i;n.style.marginRight=i},pt=function(n,t){var i=s(t);n.style.marginTop=i;n.style.marginBottom=i},wt=function(n,t){var i=s(t);n.style.borderWidth=i},bt=function(n,t){n.style.borderStyle=t},kt=function(n){return"FIGURE"===n.nodeName},pr=function(n,t){var r=document.createElement("img");return i(r,"style",t.style),(et(r)||""!==t.hspace)&&yt(r,t.hspace),(ot(r)||""!==t.vspace)&&pt(r,t.vspace),(st(r)||""!==t.border)&&wt(r,t.border),(ht(r,"borderStyle")||""!==t.borderStyle)&&bt(r,t.borderStyle),n(r.getAttribute("style"))},dt=function(n,t){return{src:f(t,"src"),alt:f(t,"alt"),title:f(t,"title"),width:vt(t,"width"),height:vt(t,"height"),"class":f(t,"class"),style:n(f(t,"style")),caption:ct(t),hspace:et(t),vspace:ot(t),border:st(t),borderStyle:ht(t,"borderStyle")}},n=function(n,t,i,r,u){i[r]!==t[r]&&u(n,r,i[r])},e=function(n,t){return function(i,r,u){n(i,u);lt(i,t)}},gt=function(t,r,u){var f=dt(t,u);n(u,f,r,"caption",function(n){return yr(n)});n(u,f,r,"src",i);n(u,f,r,"alt",i);n(u,f,r,"title",i);n(u,f,r,"width",at(0,t));n(u,f,r,"height",at(0,t));n(u,f,r,"class",i);n(u,f,r,"style",e(function(n,t){return i(n,"style",t)},t));n(u,f,r,"hspace",e(yt,t));n(u,f,r,"vspace",e(pt,t));n(u,f,r,"border",e(wt,t));n(u,f,r,"borderStyle",e(bt,t))},h=function(n,t){var i=n.dom.styles.parse(t),r=it(i),u=n.dom.styles.parse(n.dom.styles.serialize(r));return n.dom.styles.serialize(u)},p=function(n){var t=n.selection.getNode(),i=n.dom.getParent(t,"figure.image");return i?n.dom.select("img",i)[0]:t&&("IMG"!==t.nodeName||t.getAttribute("data-mce-object")||t.getAttribute("data-mce-placeholder"))?null:t},ni=function(n,t){var i=n.dom,r=i.getParent(t.parentNode,function(t){return n.schema.getTextBlockElements()[t.nodeName]});return r?i.split(r,t):t},ti=function(n){var t=p(n);return t?dt(function(t){return h(n,t)},t):{src:"",alt:"",title:"",width:"",height:"","class":"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},wr=function(n,t){var f=function(n,t){var f=document.createElement("img"),r;return(gt(n,y.merge(t,{caption:!1}),f),i(f,"alt",t.alt),t.caption)?(r=u.create("figure",{"class":"image"}),r.appendChild(f),r.appendChild(u.create("figcaption",{contentEditable:!0},"Caption")),r.contentEditable="false",r):f}(function(t){return h(n,t)},t),r,e;n.dom.setAttrib(f,"data-mce-id","__mcenew");n.focus();n.selection.setContent(f.outerHTML);r=n.dom.select('*[data-mce-id="__mcenew"]')[0];(n.dom.setAttrib(r,"data-mce-id",null),kt(r))?(e=ni(n,r),n.selection.select(e)):n.selection.select(r)},br=function(n,t){var i=p(n);i?t.src?function(n,t){var r,i=p(n),u;(gt(function(t){return h(n,t)},t,i),r=i,n.dom.setAttrib(r,"src",r.getAttribute("src")),kt(i.parentNode))?(u=i.parentNode,ni(n,u),n.selection.select(i.parentNode)):(n.selection.select(i),cr(n,t,i))}(n,t):function(n,t){if(t){var i=n.dom.is(t.parentNode,"figure.image")?t.parentNode:t;n.dom.remove(i);n.focus();n.nodeChanged();n.dom.isEmpty(n.getBody())&&(n.setContent(""),n.selection.setCursorLocation())}}(n,i):t.src&&wr(n,t)},ii=function(n,t){t.find("#style").each(function(i){var r=pr(function(t){return h(n,t)},y.merge({src:"",alt:"",title:"",width:"",height:"","class":"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},t.toJSON()));i.value(r)})},kr=function(n){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:(t=n,function(n){var f=t.dom,u=n.control.rootControl,e,i;l(t)&&(e=u.toJSON(),i=f.parseStyle(e.style),u.find("#vspace").value(""),u.find("#hspace").value(""),((i=it(i))["margin-top"]&&i["margin-bottom"]||i["margin-right"]&&i["margin-left"])&&(i["margin-top"]===i["margin-bottom"]?u.find("#vspace").value(r(i["margin-top"])):u.find("#vspace").value(""),i["margin-right"]===i["margin-left"]?u.find("#hspace").value(r(i["margin-right"])):u.find("#hspace").value("")),i["border-width"]?u.find("#border").value(r(i["border-width"])):u.find("#border").value(""),i["border-style"]?u.find("#borderStyle").value(i["border-style"]):u.find("#borderStyle").value(""),u.find("#style").value(f.serializeStyle(f.parseStyle(f.serializeStyle(i)))))})},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(t){ii(n,t.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(t){ii(n,t.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]};var t},ri=function(n,t){n.state.set("oldVal",n.value());t.state.set("oldVal",t.value())},ui=function(n,t){var i=n.find("#width")[0],r=n.find("#height")[0],u=n.find("#constrain")[0];i&&r&&u&&t(i,r,u.checked())},dr=function(n,t,i){var f=n.state.get("oldVal"),e=t.state.get("oldVal"),r=n.value(),u=t.value();i&&f&&e&&r&&u&&(r!==f?(u=Math.round(r/f*u),isNaN(u)||t.value(u)):(r=Math.round(u/e*r),isNaN(r)||n.value(r)));ri(n,t)},fi=function(n){ui(n,dr)},gr=function(){var n=function(n){fi(n.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:n,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:n,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},ei=function(n){ui(n,ri)},nu=fi,tu=function(n){n.meta=n.control.rootControl.toJSON()},oi=function(n,t){var i=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(t){var h,i,r,e,l,s,u,f,a;i=n;s=(h=t).meta||{};u=h.control;f=u.rootControl;(a=f.find("#image-list")[0])&&a.value(i.convertURL(u.value(),"src"));o.each(s,function(n,t){f.find("#"+t).value(n)});s.width||s.height||(r=i.convertURL(u.value(),"src"),e=wi(i),l=new RegExp("^(?:[a-z]+:)?//","i"),e&&!l.test(r)&&r.substring(0,e.length)!==e&&(r=e+r),u.value(r),sr(i.documentBaseURI.toAbsolute(u.value()),function(n){n.width&&n.height&&c(i)&&(f.find("#width").value(n.width),f.find("#height").value(n.height),ei(f))}))},onbeforecall:tu},t];return bi(n)&&i.push({name:"alt",type:"textbox",label:"Image description"}),ki(n)&&i.push({name:"title",type:"textbox",label:"Image Title"}),c(n)&&i.push(gr()),b(n)&&i.push({name:"class",type:"listbox",label:"Class",values:tt(b(n),function(t){t.value&&(t.textStyle=function(){return n.formatter.getCssText({inline:"img",classes:[t.value]})})})}),di(n)&&i.push({name:"caption",type:"checkbox",label:"Caption"}),i},iu=function(n,t){return{title:"General",type:"form",items:oi(n,t)}},ru=oi,si=function(){return a.getOrDie("URL")},uu=function(n){return si().createObjectURL(n)},fu=function(n){si().revokeObjectURL(n)},eu=tinymce.util.Tools.resolve("tinymce.ui.Factory"),su=function(){},hi=function(n){return function(t){var o=eu.get("Throbber"),r=t.control.rootControl,u=new o(r.getEl()),i=t.control.value(),f=uu(i),s=hu({url:nr(n),basePath:ir(n),credentials:rr(n),handler:tr(n)}),e=function(){u.hide();fu(f)};return u.show(),lr(i).then(function(t){var u=n.editorUpload.blobCache.create({blob:i,blobUri:f,name:i.name?i.name.replace(/\.[^\.]+$/,""):null,base64:t.split(",")[1]});return s.upload(u).then(function(n){var t=r.find("#src");return t.value(n),r.find("tabpanel")[0].activateTab(0),t.fire("change"),e(),n})})["catch"](function(t){n.windowManager.alert(t);e()})}},ci=".jpg,.jpeg,.png,.gif",cu=function(n){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:ci,onchange:hi(n)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:ci,height:100,onchange:hi(n)}]}},li=function(n){return function(){return n}},ai=(li(!1),li(!0),function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}}),vi=function(n,t){var i=t.control.getRoot();nu(i);n.undoManager.transact(function(){var t=y.merge(ti(n),i.toJSON());br(n,t)});n.editorUpload.uploadImagesAuto()},lu=function(n){n.addCommand("mceImage",w(n).open)},yi=function(n){return function(t){for(var i,r,u=t.length,f=function(t){t.attr("contenteditable",n?"true":null)};u--;)i=t[u],(r=i.attr("class"))&&/\bimage\b/.test(r)&&(i.attr("contenteditable",n?"false":null),o.each(i.getAll("figcaption"),f))}},au=function(n){n.on("preInit",function(){n.parser.addNodeFilter("figure",yi(!0));n.serializer.addNodeFilter("figure",yi(!1))})},vu=function(n){n.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:w(n).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"});n.addMenuItem("image",{icon:"image",text:"Image",onclick:w(n).open,context:"insert",prependToContext:!0})};pi.add("image",function(n){au(n);vu(n);lu(n)})}();!function(){"use strict";var n=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){n.addCommand("InsertHorizontalRule",function(){n.execCommand("mceInsertContent",!1,"<hr />")})},i=function(n){n.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"});n.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};n.add("hr",function(n){t(n);i(n)})}();!function(){"use strict";var w,b,k,c,d,g,ot=tinymce.util.Tools.resolve("tinymce.PluginManager"),l=function(n){return function(){return n}},st=l(!1),ht=l(!0),f={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:l,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:st,always:ht},e=f.never,a=f.always,r=function(){return v},v=(c={fold:function(n){return n()},is:e,isSome:e,isNone:a,getOr:k=function(n){return n},getOrThunk:b=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:k,orThunk:b,map:r,ap:r,each:function(){},bind:r,flatten:r,exists:e,forall:a,filter:r,equals:w=function(n){return n.isNone()},equals_:w,toArray:function(){return[]},toString:f.constant("none()")},Object.freeze&&Object.freeze(c),c),o=function(n){var t=function(){return n},f=function(){return u},i=function(t){return t(n)},u={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:a,isNone:e,getOr:t,getOrThunk:t,getOrDie:t,or:f,orThunk:f,map:function(t){return o(t(n))},ap:function(t){return t.fold(r,function(t){return o(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?u:v},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(e,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return u},s={some:o,none:r,from:function(n){return null===n||n===undefined?v:o(n)}},i=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},ct={isString:i("string"),isObject:i("object"),isArray:i("array"),isNull:i("null"),isBoolean:i("boolean"),isUndefined:i("undefined"),isFunction:i("function"),isNumber:i("number")},lt=(d=Array.prototype.indexOf)===undefined?function(n,t){return pt(n,t)}:function(n,t){return d.call(n,t)},at=function(n,t){return-1<lt(n,t)},vt=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},yt=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},pt=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},nt=(Array.prototype.push,Array.prototype.slice,ct.isFunction(Array.from)&&Array.from,vt),wt=yt,bt=function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r,i,n))return s.some(r);return s.none()},kt=at,u=tinymce.util.Tools.resolve("tinymce.util.I18n"),tt=tinymce.util.Tools.resolve("tinymce.Env"),n=tt.mac?"⌘":"Ctrl",t=tt.mac?"Ctrl + Alt":"Shift + Alt",dt={shortcuts:[{shortcut:n+" + B",action:"Bold"},{shortcut:n+" + I",action:"Italic"},{shortcut:n+" + U",action:"Underline"},{shortcut:n+" + A",action:"Select all"},{shortcut:n+" + Y or "+n+" + Shift + Z",action:"Redo"},{shortcut:n+" + Z",action:"Undo"},{shortcut:t+" + 1",action:"Header 1"},{shortcut:t+" + 2",action:"Header 2"},{shortcut:t+" + 3",action:"Header 3"},{shortcut:t+" + 4",action:"Header 4"},{shortcut:t+" + 5",action:"Header 5"},{shortcut:t+" + 6",action:"Header 6"},{shortcut:t+" + 7",action:"Paragraph"},{shortcut:t+" + 8",action:"Div"},{shortcut:t+" + 9",action:"Address"},{shortcut:"Alt + F9",action:"Focus to menubar"},{shortcut:"Alt + F10",action:"Focus to toolbar"},{shortcut:"Alt + F11",action:"Focus to element path"},{shortcut:"Ctrl + Shift + P > Ctrl + Shift + P",action:"Focus to contextual toolbar"},{shortcut:n+" + K",action:"Insert link (if link plugin activated)"},{shortcut:n+" + S",action:"Save (if save plugin activated)"},{shortcut:n+" + F",action:"Find (if searchreplace plugin activated)"}]},gt=function(){var n=nt(dt.shortcuts,function(n){return'<tr data-mce-tabstop="1" tabindex="-1" aria-label="Action: '+(t=n).action+", Shortcut: "+t.shortcut.replace(/Ctrl/g,"Control")+'"><td>'+u.translate(n.action)+"<\/td><td>"+n.shortcut+"<\/td><\/tr>";var t}).join("");return{title:"Handy Shortcuts",type:"container",style:"overflow-y: auto; overflow-x: hidden; max-height: 250px",items:[{type:"container",html:'<div><table class="mce-table-striped"><thead><th>'+u.translate("Action")+"<\/th><th>"+u.translate("Shortcut")+"<\/th><\/thead>"+n+"<\/table><\/div>"}]}},y=(g=Object.keys)===undefined?function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}:g,h=function(n,t){for(var r,u=y(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},it=function(n,t){var i={};return h(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},rt=function(n,t){var i=[];return h(n,function(n,r){i.push(t(n,r))}),i},ut=function(n){return rt(n,function(n){return n})},ni={bifilter:function(n,t){var i={},r={};return h(n,function(n,u){(t(n,u)?i:r)[u]=n}),{t:i,f:r}},each:h,map:function(n,t){return it(n,function(n,i,r){return{k:i,v:t(n,i,r)}})},mapToArray:rt,tupleMap:it,find:function(n,t){for(var r,u,f=y(n),i=0,e=f.length;i<e;i++)if(r=f[i],u=n[r],t(u,r,n))return s.some(u);return s.none()},keys:y,values:ut,size:function(n){return ut(n).length}},ti=[{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"bbcode",name:"BBCode"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"compat3x",name:"3.x Compatibility"},{key:"contextmenu",name:"Context Menu"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullpage",name:"Full Page"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"hr",name:"Horizontal Rule"},{key:"image",name:"Image"},{key:"imagetools",name:"Image Tools"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"legacyoutput",name:"Legacy Output"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"noneditable",name:"Noneditable"},{key:"pagebreak",name:"Page Break"},{key:"paste",name:"Paste"},{key:"preview",name:"Preview"},{key:"print",name:"Print"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"spellchecker",name:"Spell Checker"},{key:"tabfocus",name:"Tab Focus"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"textpattern",name:"Text Pattern"},{key:"toc",name:"Table of Contents"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"}],ft=f.curry(function(n,t){return n.replace(/\${([^{}]*)}/g,function(n,i){var r,u=t[i];return"string"==(r=typeof u)||"number"===r?u:n})},'<a href="${url}" target="_blank" rel="noopener">${name}<\/a>'),ii=function(n){var t,i,e=(t=n,i=ni.keys(t.plugins),t.settings.forced_plugins===undefined?i:wt(i,f.not(f.curry(kt,t.settings.forced_plugins)))),r=nt(e,function(t){return"<li>"+(r=n,i=t,bt(ti,function(n){return n.key===i}).fold(function(){var n=r.plugins[i].getMetadata;return"function"==typeof n?ft(n()):i},function(n){return ft({name:n.name,url:"https://www.tinymce.com/docs/plugins/"+n.key})}))+"<\/li>";var r,i}),o=r.length,s=r.join("");return"<p><b>"+u.translate(["Plugins installed ({0}):",o])+"<\/b><\/p><ul>"+s+"<\/ul>"},ri=function(n){return{title:"Plugins",type:"container",style:"overflow-y: auto; overflow-x: hidden;",layout:"flex",padding:10,spacing:10,items:[(t=n,{type:"container",html:'<div style="overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;" data-mce-tabstop="1" tabindex="-1">'+ii(t)+"<\/div>",flex:1}),{type:"container",html:'<div style="padding: 10px; background: #e3e7f4; height: 100%;" data-mce-tabstop="1" tabindex="-1"><p><b>'+u.translate("Premium plugins:")+'<\/b><\/p><ul><li>PowerPaste<\/li><li>Spell Checker Pro<\/li><li>Accessibility Checker<\/li><li>Advanced Code Editor<\/li><li>Enhanced Media Embed<\/li><li>Link Checker<\/li><\/ul><br /><p style="float: right;"><a href="https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">'+u.translate("Learn more...")+"<\/a><\/p><\/div>",flex:1}]};var t},et=tinymce.util.Tools.resolve("tinymce.EditorManager"),ui=function(){var n,t,i='<a href="https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">TinyMCE '+(n=et.majorVersion,t=et.minorVersion,0===n.indexOf("@")?"X.X.X":n+"."+t)+"<\/a>";return[{type:"label",html:u.translate(["You are using {0}",i])},{type:"spacer",flex:1},{text:"Close",onclick:function(){this.parent().parent().close()}}]},p=function(n,t){return function(){n.windowManager.open({title:"Help",bodyType:"tabpanel",layout:"flex",body:[gt(),ri(n)],buttons:ui(),onPostRender:function(){this.getEl("title").innerHTML='<img src="'+t+'/img/logo.png" alt="TinyMCE Logo" style="display: inline-block; width: 200px; height: 50px">'}})}},fi=function(n,t){n.addCommand("mceHelp",p(n,t))},ei=function(n,t){n.addButton("help",{icon:"help",onclick:p(n,t)});n.addMenuItem("help",{text:"Help",icon:"help",context:"help",onclick:p(n,t)})};ot.add("help",function(n,t){ei(n,t);fi(n,t);n.shortcuts.add("Alt+0","Open help dialog","mceHelp")})}();!function(){"use strict";var t=function(n){var i=n,r=function(){return i};return{get:r,set:function(n){i=n},clone:function(){return t(r())}}},u=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=function(n){return{isFullscreen:function(){return null!==n.get()}}},e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=function(n,t){n.fire("FullscreenStateChanged",{state:t})},n=e.DOM,o=function(t,r){var f,o,h,e,c,l,a=document.body,v=document.documentElement,u=r.get(),s=function(){var r,u,t,i;n.setStyle(h,"height",(t=window,i=document.body,i.offsetWidth&&(r=i.offsetWidth,u=i.offsetHeight),t.innerWidth&&t.innerHeight&&(r=t.innerWidth,u=t.innerHeight),{w:r,h:u}).h-(o.clientHeight-h.clientHeight))},y=function(){n.unbind(window,"resize",s)},p;(f=(o=t.getContainer()).style,e=(h=t.getContentAreaContainer().firstChild).style,u)?(e.width=u.iframeWidth,e.height=u.iframeHeight,u.containerWidth&&(f.width=u.containerWidth),u.containerHeight&&(f.height=u.containerHeight),n.removeClass(a,"mce-fullscreen"),n.removeClass(v,"mce-fullscreen"),n.removeClass(o,"mce-fullscreen"),c=u.scrollPos,window.scrollTo(c.x,c.y),n.unbind(window,"resize",u.resizeHandler),t.off("remove",u.removeHandler),r.set(null),i(t,!1)):(p={scrollPos:(l=n.getViewPort(),{x:l.x,y:l.y}),containerWidth:f.width,containerHeight:f.height,iframeWidth:e.width,iframeHeight:e.height,resizeHandler:s,removeHandler:y},e.width=e.height="100%",f.width=f.height="",n.addClass(a,"mce-fullscreen"),n.addClass(v,"mce-fullscreen"),n.addClass(o,"mce-fullscreen"),n.bind(window,"resize",s),t.on("remove",y),s(),r.set(p),i(t,!0))},s=function(n,t){n.addCommand("mceFullScreen",function(){o(n,t)})},r=function(n){return function(t){var i=t.control;n.on("FullscreenStateChanged",function(n){i.active(n.state)})}},h=function(n){n.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:r(n),context:"view"});n.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:r(n)})};u.add("fullscreen",function(n){var i=t(null);return n.settings.inline||(s(n,i),h(n),n.addShortcut("Ctrl+Shift+F","","mceFullScreen")),f(i)})}();!function(){"use strict";var i=function(n){var t=n,r=function(){return t};return{get:r,set:function(n){t=n},clone:function(){return i(r())}}},h=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),c=tinymce.util.Tools.resolve("tinymce.html.DomParser"),t=tinymce.util.Tools.resolve("tinymce.html.Node"),l=tinymce.util.Tools.resolve("tinymce.html.Serializer"),u=function(n){return n.getParam("fullpage_hide_in_source_view")},a=function(n){return n.getParam("fullpage_default_xml_pi")},f=function(n){return n.getParam("fullpage_default_encoding")},e=function(n){return n.getParam("fullpage_default_font_family")},o=function(n){return n.getParam("fullpage_default_font_size")},v=function(n){return n.getParam("fullpage_default_text_color")},y=function(n){return n.getParam("fullpage_default_title")},p=function(n){return n.getParam("fullpage_default_doctype","<!DOCTYPE html>")},r=function(n){return c({validate:!1,root_name:"#document"}).parse(n)},w=r,b=function(t,i){function h(n,t){return n.attr(t)||""}var f,c,s=r(i),u={};return u.fontface=e(t),u.fontsize=o(t),7===(f=s.firstChild).type&&(u.xml_pi=!0,(c=/encoding="([^"]+)"/.exec(f.value))&&(u.docencoding=c[1])),(f=s.getAll("#doctype")[0])&&(u.doctype="<!DOCTYPE"+f.value+">"),(f=s.getAll("title")[0])&&f.firstChild&&(u.title=f.firstChild.value),n.each(s.getAll("meta"),function(n){var t,i=n.attr("name"),r=n.attr("http-equiv");i?u[i.toLowerCase()]=n.attr("content"):"Content-Type"===r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(n.attr("content")))&&(u.docencoding=t[1])}),(f=s.getAll("html")[0])&&(u.langcode=h(f,"lang")||h(f,"xml:lang")),u.stylesheets=[],n.each(s.getAll("link"),function(n){"stylesheet"===n.attr("rel")&&u.stylesheets.push(n.attr("href"))}),(f=s.getAll("body")[0])&&(u.langdir=h(f,"dir"),u.style=h(f,"style"),u.visited_color=h(f,"vlink"),u.link_color=h(f,"link"),u.active_color=h(f,"alink")),u},k=function(i,u,f){function h(n,t,i){n.attr(t,i||undefined)}function c(n){s.firstChild?s.insert(n,s.firstChild):s.append(n)}var o,s,y,e,v,p=i.dom,a;return o=r(f),(s=o.getAll("head")[0])||(e=o.getAll("html")[0],s=new t("head",1),e.firstChild?e.insert(s,e.firstChild,!0):e.append(s)),e=o.firstChild,u.xml_pi?(v='version="1.0"',u.docencoding&&(v+=' encoding="'+u.docencoding+'"'),7!==e.type&&(e=new t("xml",7),o.insert(e,o.firstChild,!0)),e.value=v):e&&7===e.type&&e.remove(),e=o.getAll("#doctype")[0],u.doctype?(e||(e=new t("#doctype",10),u.xml_pi?o.insert(e,o.firstChild):c(e)),e.value=u.doctype.substring(9,u.doctype.length-1)):e&&e.remove(),e=null,n.each(o.getAll("meta"),function(n){"Content-Type"===n.attr("http-equiv")&&(e=n)}),u.docencoding?(e||((e=new t("meta",1)).attr("http-equiv","Content-Type"),e.shortEnded=!0,c(e)),e.attr("content","text/html; charset="+u.docencoding)):e&&e.remove(),e=o.getAll("title")[0],u.title?(e?e.empty():c(e=new t("title",1)),e.append(new t("#text",3)).value=u.title):e&&e.remove(),n.each("keywords,description,author,copyright,robots".split(","),function(n){for(var f,s=o.getAll("meta"),r=u[n],i=0;i<s.length;i++)if((f=s[i]).attr("name")===n)return void(r?f.attr("content",r):f.remove());r&&((e=new t("meta",1)).attr("name",n),e.attr("content",r),e.shortEnded=!0,c(e))}),a={},n.each(o.getAll("link"),function(n){"stylesheet"===n.attr("rel")&&(a[n.attr("href")]=n)}),n.each(u.stylesheets,function(n){a[n]||((e=new t("link",1)).attr({rel:"stylesheet",text:"text/css",href:n}),e.shortEnded=!0,c(e));delete a[n]}),n.each(a,function(n){n.remove()}),(e=o.getAll("body")[0])&&(h(e,"dir",u.langdir),h(e,"style",u.style),h(e,"vlink",u.visited_color),h(e,"link",u.link_color),h(e,"alink",u.active_color),p.setAttribs(i.getBody(),{style:u.style,dir:u.dir,vLink:u.visited_color,link:u.link_color,aLink:u.active_color})),(e=o.getAll("html")[0])&&(h(e,"lang",u.langcode),h(e,"xml:lang",u.langcode)),s.firstChild||s.remove(),(y=l({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(o)).substring(0,y.indexOf("<\/body>"))},d=function(t,i){var r=b(t,i.get());t.windowManager.open({title:"Document properties",data:r,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(u){var f=k(t,n.extend(r,u.data),i.get());i.set(f)}})},g=function(n,t){n.addCommand("mceFullPageProperties",function(){d(n,t)})},nt=function(t,i){return n.each(t,function(n){i=i.replace(n,function(n){return"<!--mce:protected "+escape(n)+"-->"})}),i},tt=function(n){return n.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(n,t){return unescape(t)})},it=n.each,s=function(n){return n.replace(/<\/?[A-Z]+/g,function(n){return n.toLowerCase()})},rt=function(n){var t,i="",r="",u;return a(n)&&(u=f(n),i+='<?xml version="1.0" encoding="'+(u||"ISO-8859-1")+'" ?>\n'),i+=p(n),i+="\n<html>\n<head>\n",(t=y(n))&&(i+="<title>"+t+"<\/title>\n"),(t=f(n))&&(i+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=e(n))&&(r+="font-family: "+t+";"),(t=o(n))&&(r+="font-size: "+t+";"),(t=v(n))&&(r+="color: "+t+";"),i+("<\/head>\n<body"+(r?' style="'+r+'"':"")+">\n")},ut=function(t,i,r){t.on("BeforeSetContent",function(f){!function(t,i,r,f){var h,a,e,v,o,y="",c=t.dom,p,l;f.selection||(e=nt(t.settings.protect,f.content),"raw"===f.format&&i.get()||f.source_view&&u(t))||(0!==e.length||f.source_view||(e=n.trim(i.get())+"\n"+n.trim(e)+"\n"+n.trim(r.get())),-1!==(h=(e=e.replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(h=e.indexOf(">",h),i.set(s(e.substring(0,h+1))),-1===(a=e.indexOf("<\/body",h))&&(a=e.length),f.content=n.trim(e.substring(h+1,a)),r.set(s(e.substring(a)))):(i.set(rt(t)),r.set("\n<\/body>\n<\/html>")),v=w(i.get()),it(v.getAll("style"),function(n){n.firstChild&&(y+=n.firstChild.value)}),(o=v.getAll("body")[0])&&c.setAttribs(t.getBody(),{style:o.attr("style")||"",dir:o.attr("dir")||"",vLink:o.attr("vlink")||"",link:o.attr("link")||"",aLink:o.attr("alink")||""}),c.remove("fullpage_styles"),p=t.getDoc().getElementsByTagName("head")[0],y&&(c.add(p,"style",{id:"fullpage_styles"},y),(o=c.get("fullpage_styles")).styleSheet&&(o.styleSheet.cssText=y)),l={},n.each(p.getElementsByTagName("link"),function(n){"stylesheet"===n.rel&&n.getAttribute("data-mce-fullpage")&&(l[n.href]=n)}),n.each(v.getAll("link"),function(n){var t=n.attr("href");if(!t)return!0;l[t]||"stylesheet"!==n.attr("rel")||c.add(p,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"});delete l[t]}),n.each(l,function(n){n.parentNode.removeChild(n)}))}(t,i,r,f)});t.on("GetContent",function(f){var o,s,h,e;o=t;s=i.get();h=r.get();(e=f).selection||e.source_view&&u(o)||(e.content=tt(n.trim(s)+"\n"+n.trim(e.content)+"\n"+n.trim(h)))})},ft=function(n){n.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"});n.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})};h.add("fullpage",function(n){var t=i(""),r=i("");g(n,t);ft(n);ut(n,t,r)})}();!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],r=function(t){var r;return r='<table role="list" class="mce-grid">',n.each(i,function(i){r+="<tr>";n.each(i,function(n){var i=t+"/img/smiley-"+n+".gif";r+='<td><a href="#" data-mce-url="'+i+'" data-mce-alt="'+n+'" tabindex="-1" role="option" aria-label="'+n+'"><img src="'+i+'" style="width: 18px; height: 18px" role="presentation" /><\/a><\/td>'});r+="<\/tr>"}),r+="<\/table>"},u=function(n,t){var i=r(t);n.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:i,onclick:function(t){var i,u,f,r=n.dom.getParent(t.target,"a");r&&(i=n,u=r.getAttribute("data-mce-url"),f=r.getAttribute("data-mce-alt"),i.insertContent(i.dom.createHTML("img",{src:u,alt:f})),this.hide())}},tooltip:"Emoticons"})};t.add("emoticons",function(n,t){u(n,t)})}();!function(){"use strict";var r=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(t,i){var f,r=t.dom,u=t.selection.getSelectedBlocks();u.length&&(f=r.getAttrib(u[0],"dir"),n.each(u,function(n){r.getParent(n.parentNode,'*[dir="'+i+'"]',r.getRoot())||r.setAttrib(n,"dir",f!==i?i:null)}),t.nodeChanged())},u=function(n){n.addCommand("mceDirectionLTR",function(){t(n,"ltr")});n.addCommand("mceDirectionRTL",function(){t(n,"rtl")})},i=function(t){var i=[];return n.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(n){i.push(n+"[dir="+t+"]")}),i.join(",")},f=function(n){n.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:i("ltr")});n.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:i("rtl")})};r.add("directionality",function(n){u(n);f(n)})}();!function(){"use strict";var i=function(n){var t=n,r=function(){return t};return{get:r,set:function(n){t=n},clone:function(){return i(r())}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(n){return{isContextMenuVisible:function(){return n.get()}}},s=function(n){return n.settings.contextmenu_never_use_native},h=function(n){return n.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),t=function(t){return n.DOM.select(t.settings.ui_container)[0]},r=function(n,t){return{x:n,y:t}},u=function(n,t,i){return r(n.x+t,n.y+i)},f=function(t,i){if(t&&"static"!==n.DOM.getStyle(t,"position",!0)){var r=n.DOM.getPos(t),f=r.x-t.scrollLeft,e=r.y-t.scrollTop;return u(i,-f,-e)}return u(i,0,0)},c=function(i,e){if(i.inline)return f(t(i),r((l=e).pageX,l.pageY));var s,h,o,c,l,a=(s=i.getContentAreaContainer(),h=r((c=e).clientX,c.clientY),o=n.DOM.getPos(s),u(h,o.x,o.y));return f(t(i),a)},l=tinymce.util.Tools.resolve("tinymce.ui.Factory"),a=tinymce.util.Tools.resolve("tinymce.util.Tools"),v=function(n,i,r,u){null===u.get()?u.set(function(n,i){var u,e,f=[],r;for(e=h(n),a.each(e.split(/[ ,]/),function(t){var i=n.menuItems[t];"|"===t&&(i={text:t});i&&(i.shortcut="",f.push(i))}),r=0;r<f.length;r++)"|"===f[r].text&&(0!==r&&r!==f.length-1||f.splice(r,1));return(u=l.create("menu",{items:f,context:"contextmenu",classes:"contextmenu"})).uiContainer=t(n),u.renderTo(t(n)),u.on("hide",function(n){n.control===this&&i.set(!1)}),n.on("remove",function(){u.remove();u=null}),u}(n,r)):u.get().show();u.get().moveTo(i.x,i.y);r.set(!0)},y=function(n,t,i){n.on("contextmenu",function(r){var u;u=n;(!r.ctrlKey||s(u))&&(r.preventDefault(),v(n,c(n,r),t,i))})};e.add("contextmenu",function(n){var r=i(null),t=i(!1);return y(n,t,r),o(t)})}();!function(){"use strict";var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Color"),t=function(n,t){n.find("#preview")[0].getEl().style.background=t},n=function(n,i){var u=r(i),f=u.toRgb();n.fromJSON({r:f.r,g:f.g,b:f.b,hex:u.toHex().substr(1)});t(n,u.toHex())},u=function(i,r,u){var f=i.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:u,onchange:function(){var n=this.rgb();f&&(f.find("#r").value(n.r),f.find("#g").value(n.g),f.find("#b").value(n.b),f.find("#hex").value(this.value().substr(1)),t(f,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var i,t,r=f.find("colorpicker")[0];if(i=this.name(),t=this.value(),"hex"===i)return n(f,t="#"+t),void r.value(t);t={r:f.find("#r").value(),g:f.find("#g").value(),b:f.find("#b").value()};r.value(t);n(f,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){r("#"+f.toJSON().hex)}});n(f,u)};i.add("colorpicker",function(n){n.settings.color_picker_callback||(n.settings.color_picker_callback=function(t,i){u(n,t,i)})})}();!function(){"use strict";var r=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return r(i())}}},h=tinymce.util.Tools.resolve("tinymce.PluginManager"),u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=function(n){return n.settings.codesample_content_css},l=function(n){return n.settings.codesample_languages},a=function(n){return Math.min(u.DOM.getViewPort().w,n.getParam("codesample_dialog_width",800))},v=function(n){return Math.min(u.DOM.getViewPort().w,n.getParam("codesample_dialog_height",650))},f={},o=f,t=void 0!==f?f:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},n=function(){var r=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=t.Prism={util:{encode:function(t){return t instanceof i?new i(t.type,n.util.encode(t.content),t.alias):"Array"===n.util.type(t)?t.map(n.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(n){return Object.prototype.toString.call(n).match(/\[object (\w+)\]/)[1]},clone:function(t){var r,i;switch(n.util.type(t)){case"Object":r={};for(i in t)t.hasOwnProperty(i)&&(r[i]=n.util.clone(t[i]));return r;case"Array":return t.map&&t.map(function(t){return n.util.clone(t)})}return t}},languages:{extend:function(t,i){var u=n.util.clone(n.languages[t]),r;for(r in i)u[r]=i[r];return u},insertBefore:function(t,i,r,u){var e=(u=u||n.languages)[t],o,s,f;if(2===arguments.length){for(f in r=i)r.hasOwnProperty(f)&&(e[f]=r[f]);return e}o={};for(s in e)if(e.hasOwnProperty(s)){if(s===i)for(f in r)r.hasOwnProperty(f)&&(o[f]=r[f]);o[s]=e[s]}return n.languages.DFS(n.languages,function(n,i){i===u[t]&&n!==t&&(this[n]=o)}),u[t]=o},DFS:function(t,i,r){for(var u in t)t.hasOwnProperty(u)&&(i.call(t,u,t[u],r||u),"Object"===n.util.type(t[u])?n.languages.DFS(t[u],i):"Array"===n.util.type(t[u])&&n.languages.DFS(t[u],i,u))}},plugins:{},highlightAll:function(t,i){for(var u=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),f=0,r=void 0;r=u[f++];)n.highlightElement(r,!0===t,i)},highlightElement:function(i,u,f){for(var s,h,c,e,l,o=i;o&&!r.test(o.className);)o=o.parentNode;o&&(s=(o.className.match(r)||[,""])[1],h=n.languages[s]);i.className=i.className.replace(r,"").replace(/\s+/g," ")+" language-"+s;o=i.parentNode;/pre/i.test(o.nodeName)&&(o.className=o.className.replace(r,"").replace(/\s+/g," ")+" language-"+s);c=i.textContent;e={element:i,language:s,grammar:h,code:c};c&&h?(n.hooks.run("before-highlight",e),u&&t.Worker)?(l=new Worker(n.filename),l.onmessage=function(t){e.highlightedCode=t.data;n.hooks.run("before-insert",e);e.element.innerHTML=e.highlightedCode;f&&f.call(e.element);n.hooks.run("after-highlight",e);n.hooks.run("complete",e)},l.postMessage(JSON.stringify({language:e.language,code:e.code,immediateClose:!0}))):(e.highlightedCode=n.highlight(e.code,e.grammar,e.language),n.hooks.run("before-insert",e),e.element.innerHTML=e.highlightedCode,f&&f.call(i),n.hooks.run("after-highlight",e),n.hooks.run("complete",e)):n.hooks.run("complete",e)},highlight:function(t,r,u){var f=n.tokenize(t,r);return i.stringify(n.util.encode(f),u)},tokenize:function(t,i){var y=n.Token,o=[t],a=i.rest,r,e,c,s,h,f,d;if(a){for(r in a)i[r]=a[r];delete i.rest}n:for(r in i)if(i.hasOwnProperty(r)&&i[r])for(e=i[r],e="Array"===n.util.type(e)?e:[e],c=0;c<e.length;++c){var u=e[c],p=u.inside,g=!!u.lookbehind,v=0,nt=u.alias;for(u=u.pattern||u,s=0;s<o.length;s++){if(h=o[s],o.length>t.length)break n;if(!(h instanceof y)&&(u.lastIndex=0,f=u.exec(h),f)){g&&(v=f[1].length);var w=f.index-1+v,tt=w+(f=f[0].slice(v)).length,b=h.slice(0,w+1),k=h.slice(tt+1),l=[s,1];b&&l.push(b);d=new y(r,p?n.tokenize(f,p):f,nt);l.push(d);k&&l.push(k);Array.prototype.splice.apply(o,l)}}}return o},hooks:{all:{},add:function(t,i){var r=n.hooks.all;r[t]=r[t]||[];r[t].push(i)},run:function(t,i){var r=n.hooks.all[t],f,u;if(r&&r.length)for(f=0,u=void 0;u=r[f++];)u(i)}}},i=n.Token=function(n,t,i){this.type=n;this.content=t;this.alias=i};if(i.stringify=function(t,r,u){var f,s,e,o;if("string"==typeof t)return t;if("Array"===n.util.type(t))return t.map(function(n){return i.stringify(n,r,t)}).join("");f={type:t.type,content:i.stringify(t.content,r,u),tag:"span",classes:["token",t.type],attributes:{},language:r,parent:u};("comment"===f.type&&(f.attributes.spellcheck="true"),t.alias)&&(s="Array"===n.util.type(t.alias)?t.alias:[t.alias],Array.prototype.push.apply(f.classes,s));n.hooks.run("wrap",f);e="";for(o in f.attributes)e+=(e?" ":"")+o+'="'+(f.attributes[o]||"")+'"';return"<"+f.tag+' class="'+f.classes.join(" ")+'" '+e+">"+f.content+"<\/"+f.tag+">"},!t.document)return t.addEventListener&&t.addEventListener("message",function(i){var r=JSON.parse(i.data),u=r.language,f=r.code,e=r.immediateClose;t.postMessage(n.highlight(f,n.languages[u],u));e&&t.close()},!1),t.Prism}();void 0!==o&&(o.Prism=n);n.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i};n.hooks.add("wrap",function(n){"entity"===n.type&&(n.attributes.title=n.content.replace(/&amp;/,"&"))});n.languages.xml=n.languages.markup;n.languages.html=n.languages.markup;n.languages.mathml=n.languages.markup;n.languages.svg=n.languages.markup;n.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/};n.languages.css.atrule.inside.rest=n.util.clone(n.languages.css);n.languages.markup&&(n.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:n.languages.markup.tag.inside},rest:n.languages.css},alias:"language-css"}}),n.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:n.languages.css}},alias:"language-css"}},n.languages.markup.tag));n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};n.languages.javascript=n.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i});n.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}});n.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}}});n.languages.markup&&n.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:n.languages.markup.tag.inside},rest:n.languages.javascript},alias:"language-javascript"}});n.languages.js=n.languages.javascript;n.languages.c=n.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i});n.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}});delete n.languages.c["class-name"];delete n.languages.c.boolean;n.languages.csharp=n.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i});n.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}});n.languages.cpp=n.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/});n.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}});n.languages.java=n.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}});n.languages.php=n.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}});n.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}});n.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}});n.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}});n.languages.markup&&(n.hooks.add("before-highlight",function(n){"php"===n.language&&(n.tokenStack=[],n.backupCode=n.code,n.code=n.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(t){return n.tokenStack.push(t),"{{{PHP"+n.tokenStack.length+"}}}"}))}),n.hooks.add("before-insert",function(n){"php"===n.language&&(n.code=n.backupCode,delete n.backupCode)}),n.hooks.add("after-highlight",function(t){if("php"===t.language){for(var i=0,r=void 0;r=t.tokenStack[i];i++)t.highlightedCode=t.highlightedCode.replace("{{{PHP"+(i+1)+"}}}",n.highlight(r,t.grammar,"php").replace(/\$/g,"$$$$"));t.element.innerHTML=t.highlightedCode}}),n.hooks.add("wrap",function(n){"php"===n.language&&"markup"===n.type&&(n.content=n.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1<\/span>'))}),n.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:n.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/}));n.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,"function":{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(n){n.languages.ruby=n.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:n.util.clone(n.languages.ruby)}};n.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/});n.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/});n.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(n);var i={isCodeSample:function(n){return n&&"PRE"===n.nodeName&&-1!==n.className.indexOf("language-")},trimArg:function(n){return function(t,i){return n(i)}}},e=function(n){var t=n.selection.getNode();return i.isCodeSample(t)?t:null},y=e,p=function(t,i,r){t.undoManager.transact(function(){var f=e(t);r=u.DOM.encode(r);f?(t.dom.setAttrib(f,"class","language-"+i),f.innerHTML=r,n.highlightElement(f),t.selection.select(f)):(t.insertContent('<pre id="__new" class="language-'+i+'">'+r+"<\/pre>"),t.selection.select(t.$("#__new").removeAttr("id")[0]))})},w=function(n){var t=e(n);return t?t.textContent:""},b=function(n){var t=l(n);return t||[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]},k=function(n){var t,i=y(n);return i&&(t=i.className.match(/language-(\w+)/))?t[1]:""},s=function(n){var t=a(n),i=v(n),r=k(n),u=b(n),f=w(n);n.windowManager.open({title:"Insert/Edit code sample",minWidth:t,minHeight:i,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:r,values:u},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:f,autofocus:!0}],onSubmit:function(t){p(n,t.data.language,t.data.code)}})},d=function(n){n.addCommand("codesample",function(){var t=n.selection.getNode();n.selection.isCollapsed()||i.isCodeSample(t)?s(n):n.formatter.toggle("code")})},g=function(t){var r=t.$;t.on("PreProcess",function(n){r("pre[contenteditable=false]",n.node).filter(i.trimArg(i.isCodeSample)).each(function(n,t){var i=r(t),u=t.textContent;i.attr("class",r.trim(i.attr("class")));i.removeAttr("contentEditable");i.empty().append(r("<code><\/code>").each(function(){this.textContent=u}))})});t.on("SetContent",function(){var u=r("pre").filter(i.trimArg(i.isCodeSample)).filter(function(n,t){return"false"!==t.contentEditable});u.length&&t.undoManager.transact(function(){u.each(function(i,u){r(u).find("br").each(function(n,i){i.parentNode.replaceChild(t.getDoc().createTextNode("\n"),i)});u.contentEditable=!1;u.innerHTML=t.dom.encode(u.textContent);n.highlightElement(u);u.className=r.trim(u.className)})})})},nt=function(n,t,i,r){var u,f=c(n);n.inline&&i.get()||!n.inline&&r.get()||(n.inline?i.set(!0):r.set(!0),!1!==f&&(u=n.dom.create("link",{rel:"stylesheet",href:f||t+"/css/prism.css"}),n.getDoc().getElementsByTagName("head")[0].appendChild(u)))},tt=function(n){n.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"});n.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})},it=r(!1);h.add("codesample",function(n,t){var u=r(!1);g(n);tt(n);d(n);n.on("init",function(){nt(n,t,it,u)});n.on("dblclick",function(t){i.isCodeSample(t.target)&&s(n)})})}();!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),r=function(n){return n.getParam("code_dialog_width",600)},u=function(n){return n.getParam("code_dialog_height",Math.min(i.DOM.getViewPort().h-200,500))},f=function(n,t){n.focus();n.undoManager.transact(function(){n.setContent(t)});n.selection.setCursorLocation();n.nodeChanged()},e=function(n){return n.getContent({source_view:!0})},n=function(n){var t=r(n),i=u(n);n.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:t,minHeight:i,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){f(n,t.data.code)}}).find("#code").value(e(n))},o=function(t){t.addCommand("mceCodeEditor",function(){n(t)})},s=function(t){t.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){n(t)}});t.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){n(t)}})};t.add("code",function(n){return o(n),s(n),{}})}();!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=function(n,t){return n.fire("insertCustomChar",{chr:t})},n=function(n,t){var i=o(n,t).chr;n.execCommand("mceInsertContent",!1,i)},t=tinymce.util.Tools.resolve("tinymce.util.Tools"),s=function(n){return n.settings.charmap},h=function(n){return n.settings.charmap_append},i=t.isArray,r=function(n){return i(n)?[].concat((r=n,t.grep(r,function(n){return i(n)&&2===n.length}))):"function"==typeof n?n():[];var r},u=function(n){return function(n,t){var u=s(n),i;return u&&(t=r(u)),i=h(n),i?[].concat(t).concat(r(i)):t}(n,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},c=function(t){return{getCharMap:function(){return u(t)},insertChar:function(i){n(t,i)}}},l=function(n){for(var i,f=Math.min(n.length,25),s=Math.ceil(n.length/f),e,t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<s;r++){for(t+="<tr>",i=0;i<f;i++)if(e=r*f+i,e<n.length){var u=n[e],o=parseInt(u[0],10),h=u?String.fromCharCode(o):"&nbsp;";t+='<td title="'+u[1]+'"><div tabindex="-1" title="'+u[1]+'" role="button" data-chr="'+o+'">'+h+"<\/div><\/td>"}else t+="<td />";t+="<\/tr>"}return t+"<\/tbody><\/table>"},f=function(n){for(;n;){if("TD"===n.nodeName)return n;n=n.parentNode}},a=function(t){var i,r={type:"container",html:l(u(t)),onclick:function(r){var o=r.target,u,s,e;/^(TD|DIV)$/.test(o.nodeName)&&(u=f(o).firstChild,u&&u.hasAttribute("data-chr")&&(s=u.getAttribute("data-chr"),e=parseInt(s,10),isNaN(e)||n(t,String.fromCharCode(e)),r.ctrlKey||i.close()))},onmouseover:function(n){var t=f(n.target);t&&t.firstChild?(i.find("#preview").text(t.firstChild.firstChild.data),i.find("#previewTitle").text(t.title)):(i.find("#preview").text(" "),i.find("#previewTitle").text(" "))}};i=t.windowManager.open({title:"Special character",spacing:10,padding:10,items:[r,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){i.close()}}]})},v=function(n){n.addCommand("mceShowCharmap",function(){a(n)})},y=function(n){n.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"});n.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};e.add("charmap",function(n){return v(n),y(n),c(n)})}();!function(){"use strict";var i=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(t){t=n.trim(t);var i=function(n,i){t=t.replace(n,i)};return i(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),i(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),i(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),i(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),i(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),i(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),i(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),i(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),i(/<font>(.*?)<\/font>/gi,"$1"),i(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),i(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),i(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),i(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),i(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),i(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),i(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),i(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),i(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),i(/<\/(strong|b)>/gi,"[/b]"),i(/<(strong|b)>/gi,"[b]"),i(/<\/(em|i)>/gi,"[/i]"),i(/<(em|i)>/gi,"[i]"),i(/<\/u>/gi,"[/u]"),i(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),i(/<u>/gi,"[u]"),i(/<blockquote[^>]*>/gi,"[quote]"),i(/<\/blockquote>/gi,"[/quote]"),i(/<br \/>/gi,"\n"),i(/<br\/>/gi,"\n"),i(/<br>/gi,"\n"),i(/<p>/gi,""),i(/<\/p>/gi,"\n"),i(/&nbsp;|\u00a0/gi," "),i(/&quot;/gi,'"'),i(/&lt;/gi,"<"),i(/&gt;/gi,">"),i(/&amp;/gi,"&"),t},t=function(t){t=n.trim(t);var i=function(n,i){t=t.replace(n,i)};return i(/\n/gi,"<br />"),i(/\[b\]/gi,"<strong>"),i(/\[\/b\]/gi,"<\/strong>"),i(/\[i\]/gi,"<em>"),i(/\[\/i\]/gi,"<\/em>"),i(/\[u\]/gi,"<u>"),i(/\[\/u\]/gi,"<\/u>"),i(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2<\/a>'),i(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1<\/a>'),i(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),i(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2<\/font>'),i(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1<\/span>&nbsp;'),i(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1<\/span>&nbsp;'),t};i.add("bbcode",function(){return{init:function(n){n.on("beforeSetContent",function(n){n.content=t(n.content)});n.on("postProcess",function(n){n.set&&(n.content=t(n.content));n.get&&(n.content=r(n.content))})}}})}();!function(){"use strict";var e=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return e(i())}}},y=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),p=function(n){return n.fire("RestoreDraft")},w=function(n){return n.fire("StoreDraft")},b=function(n){return n.fire("RemoveDraft")},s=function(n,t){return((n=/^(\d+)([ms]?)$/.exec(""+(n||t)))[2]?{s:1e3,m:6e4}[n[2]]:1)*parseInt(n,10)},k=function(n){return n.getParam("autosave_ask_before_unload",!0)},r=function(n){var t=n.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return(t=(t=(t=t.replace(/\{path\}/g,document.location.pathname)).replace(/\{query\}/g,document.location.search)).replace(/\{hash\}/g,document.location.hash)).replace(/\{id\}/g,n.id)},d=function(n){return s(n.settings.autosave_interval,"30s")},g=function(n){return s(n.settings.autosave_retention,"20m")},h=function(n,t){var i=n.settings.forced_root_block;return""===(t=o.trim(void 0===t?n.getBody().innerHTML:t))||new RegExp("^<"+i+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)<\/"+i+">|<br>$","i").test(t)},c=function(n){var i=parseInt(t.getItem(r(n)+"time"),10)||0;return!((new Date).getTime()-i>g(n)&&(u(n,!1),1))},u=function(n,i){var u=r(n);t.removeItem(u+"draft");t.removeItem(u+"time");!1!==i&&b(n)},l=function(n){var i=r(n);!h(n)&&n.isDirty()&&(t.setItem(i+"draft",n.getContent({format:"raw",no_events:!0})),t.setItem(i+"time",(new Date).getTime().toString()),w(n))},a=function(n){var i=r(n);c(n)&&(n.setContent(t.getItem(i+"draft"),{format:"raw"}),p(n))},n={isEmpty:h,hasDraft:c,removeDraft:u,storeDraft:l,restoreDraft:a,startStoreDraft:function(n,t){var i=d(n);t.get()||(setInterval(function(){n.removed||l(n)},i),t.set(!0))},restoreLastDraft:function(n){n.undoManager.transact(function(){a(n);u(n)});n.focus()}},i=function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return n.apply(null,[t].concat(i))}},nt=function(t){return{hasDraft:i(n.hasDraft,t),storeDraft:i(n.storeDraft,t),restoreDraft:i(n.restoreDraft,t),removeDraft:i(n.removeDraft,t),isEmpty:i(n.isEmpty,t)}},f=tinymce.util.Tools.resolve("tinymce.EditorManager");f._beforeUnloadHandler=function(){var n;return o.each(f.get(),function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft();!n&&t.isDirty()&&k(t)&&(n=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),n};var tt=function(){window.onbeforeunload=f._beforeUnloadHandler},v=function(t,i){return function(r){var u=r.control;u.disabled(!n.hasDraft(t));t.on("StoreDraft RestoreDraft RemoveDraft",function(){u.disabled(!n.hasDraft(t))});n.startStoreDraft(t,i)}},it=function(t,i){t.addButton("restoredraft",{title:"Restore last draft",onclick:function(){n.restoreLastDraft(t)},onPostRender:v(t,i)});t.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){n.restoreLastDraft(t)},onPostRender:v(t,i),context:"file"})};y.add("autosave",function(n){var t=e(!1);return tt(n),it(n,t),nt(n)})}();!function(){"use strict";var u=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return u(i())}}},o=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),s=tinymce.util.Tools.resolve("tinymce.util.Delay"),f=function(n){return parseInt(n.getParam("autoresize_min_height",n.getElement().offsetHeight),10)},h=function(n){return parseInt(n.getParam("autoresize_max_height",0),10)},c=function(n){return n.getParam("autoresize_overflow_padding",1)},l=function(n){return n.getParam("autoresize_bottom_margin",50)},a=function(n){return n.getParam("autoresize_on_init",!0)},i=function(t,r,u,f,e){s.setEditorTimeout(t,function(){n(t,r);u--?i(t,r,u,f,e):e&&e()},f)},r=function(n,t){var i=n.getBody();i&&(i.style.overflowY=t?"":"hidden",t||(i.scrollTop=0))},n=function(i,u){var a,v,e,o,s,y,p,w,b,k,d,c=i.dom,g,l;(v=i.getDoc())&&((g=i).plugins.fullscreen&&g.plugins.fullscreen.isFullscreen()?r(i,!0):(e=v.body,o=f(i),y=c.getStyle(e,"margin-top",!0),p=c.getStyle(e,"margin-bottom",!0),w=c.getStyle(e,"padding-top",!0),b=c.getStyle(e,"padding-bottom",!0),k=c.getStyle(e,"border-top-width",!0),d=c.getStyle(e,"border-bottom-width",!0),s=e.offsetHeight+parseInt(y,10)+parseInt(p,10)+parseInt(w,10)+parseInt(b,10)+parseInt(k,10)+parseInt(d,10),(isNaN(s)||s<=0)&&(s=t.ie?e.scrollHeight:t.webkit&&0===e.clientHeight?0:e.offsetHeight),s>f(i)&&(o=s),l=h(i),l&&l<s?(o=l,r(i,!0)):r(i,!1),o!==u.get()&&(a=o-u.get(),c.setStyle(i.iframeElement,"height",o+"px"),u.set(o),t.webkit&&a<0&&n(i,u))))},e={setup:function(t,r){t.on("init",function(){var n,i,r=t.dom;n=c(t);i=l(t);!1!==n&&r.setStyles(t.getBody(),{paddingLeft:n,paddingRight:n});!1!==i&&r.setStyles(t.getBody(),{paddingBottom:i})});t.on("nodechange setcontent keyup FullscreenStateChanged",function(){n(t,r)});a(t)&&t.on("init",function(){i(t,r,20,100,function(){i(t,r,5,1e3)})})},resize:n},v=function(n,t){n.addCommand("mceAutoResize",function(){e.resize(n,t)})};o.add("autoresize",function(n){if(!n.inline){var t=u(0);v(n,t);e.setup(n,t)}})}();!function(){"use strict";var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),f=tinymce.util.Tools.resolve("tinymce.Env"),e=function(n){return n.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},o=function(n){return n.getParam("default_link_target","")},r=function(n,t){if(t<0&&(t=0),3===n.nodeType){var i=n.data.length;i<t&&(t=i)}return t},n=function(n,t,i){1!==t.nodeType||t.hasChildNodes()?n.setStart(t,r(t,i)):n.setStartBefore(t)},t=function(n,t,i){1!==t.nodeType||t.hasChildNodes()?n.setEnd(t,r(t,i)):n.setEndAfter(t)},i=function(i,r,u){var f,h,a,s,b,y,c,l,p,v,d=e(i),k=o(i),w;if("A"!==i.selection.getNode().tagName){if((f=i.selection.getRng(!0).cloneRange()).startOffset<5){if(!(l=f.endContainer.previousSibling)){if(!f.endContainer.firstChild||!f.endContainer.firstChild.nextSibling)return;l=f.endContainer.firstChild.nextSibling}if(p=l.length,n(f,l,p),t(f,l,p),f.endOffset<5)return;h=f.endOffset;s=l}else{if(3!==(s=f.endContainer).nodeType&&s.firstChild){for(;3!==s.nodeType&&s.firstChild;)s=s.firstChild;3===s.nodeType&&(n(f,s,0),t(f,s,s.nodeValue.length))}h=1===f.endOffset?2:f.endOffset-1-r}for(a=h;n(f,s,2<=h?h-2:0),t(f,s,1<=h?h-1:0),h-=1," "!==(v=f.toString())&&""!==v&&160!==v.charCodeAt(0)&&0<=h-2&&v!==u;);(w=f.toString())===u||" "===w||160===w.charCodeAt(0)?(n(f,s,h),t(f,s,a),h+=1):(0===f.startOffset?n(f,s,0):n(f,s,h),t(f,s,a));"."===(y=f.toString()).charAt(y.length-1)&&t(f,s,a-1);(c=(y=f.toString().trim()).match(d))&&("www."===c[1]?c[1]="http://www.":/@$/.test(c[1])&&!/^mailto:/.test(c[1])&&(c[1]="mailto:"+c[1]),b=i.selection.getBookmark(),i.selection.setRng(f),i.execCommand("createlink",!1,c[1]+c[2]),k&&i.dom.setAttrib(i.selection.getNode(),"target",k),i.selection.moveToBookmark(b),i.nodeChanged())}},s=function(n){var t;n.on("keydown",function(t){13!==t.keyCode||i(n,-1,"")});f.ie?n.on("focus",function(){if(!t){t=!0;try{n.execCommand("AutoUrlDetect",!1,!0)}catch(i){}}}):(n.on("keypress",function(t){41!==t.keyCode||i(n,-1,"(")}),n.on("keyup",function(t){32!==t.keyCode||i(n,0,"")}))};u.add("autolink",function(n){s(n)})}();!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(n){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(n)},r=function(n){var t=n.selection.getNode();return"A"===t.tagName&&""===n.dom.getAttrib(t,"href")?t.id||t.name:""},u=function(n,t){var i=n.selection.getNode();"A"===i.tagName&&""===n.dom.getAttrib(i,"href")?(i.removeAttribute("name"),i.id=t,n.undoManager.add()):(n.focus(),n.selection.collapse(!0),n.execCommand("mceInsertContent",!1,n.dom.createHTML("a",{id:t})))},f=function(n){var t=r(n);n.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:t},onsubmit:function(t){var r,f,e=t.data.id;r=n;(i(f=e)?(u(r,f),0):(r.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),1))&&t.preventDefault()}})},e=function(n){n.addCommand("mceAnchor",function(){f(n)})},n=function(n){return function(t){for(var r,i=0;i<t.length;i++)(r=t[i]).attr("href")||!r.attr("id")&&!r.attr("name")||r.firstChild||t[i].attr("contenteditable",n)}},o=function(t){t.on("PreInit",function(){t.parser.addNodeFilter("a",n("false"));t.serializer.addNodeFilter("a",n(null))})},s=function(n){n.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"});n.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})};t.add("anchor",function(n){o(n);e(n);s(n)})}();!function(){"use strict";var u=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(n,t,i){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";n.execCommand(r,!1,!1===i?null:{"list-style-type":i})},f=function(n){n.addCommand("ApplyUnorderedListStyle",function(i,r){t(n,"UL",r["list-style-type"])});n.addCommand("ApplyOrderedListStyle",function(i,r){t(n,"OL",r["list-style-type"])})},e=function(n){var t=n.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},o=function(n){var t=n.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]},s=function(n){return n&&/^(TH|TD)$/.test(n.nodeName)},h=function(n){return function(t){return t&&/^(OL|UL|DL)$/.test(t.nodeName)&&(r=t,(i=n).$.contains(i.getBody(),r));var i,r}},c=function(n){var t=n.dom.getParent(n.selection.getNode(),"ol,ul");return n.dom.getStyle(t,"listStyleType")||""},l=function(t){return n.map(t,function(n){return{text:n.replace(/\-/g," ").replace(/\b\w/g,function(n){return n.toUpperCase()}),data:"default"===n?"":n}})},i=function(t,i){return function(r){var u=r.control;t.on("NodeChange",function(r){var f=function(n,t){for(var i=0;i<n.length;i++)if(t(n[i]))return i;return-1}(r.parents,s),o=-1!==f?r.parents.slice(0,f):r.parents,e=n.grep(o,h(t));u.active(0<e.length&&e[0].nodeName===i)})}},a=function(n,r,u,f,e,o){var s;n.addButton(r,{active:!1,type:"splitbutton",tooltip:u,menu:l(o),onPostRender:i(n,e),onshow:(s=n,function(n){var t=c(s);n.control.items().each(function(n){n.active(n.settings.data===t)})}),onselect:function(i){t(n,e,i.control.settings.data)},onclick:function(){n.execCommand(f)}})},r=function(n,t,r,u,f,e){var o,s,h,c,l;0<e.length?a(n,t,r,u,f,e):(s=t,h=r,c=u,l=f,(o=n).addButton(s,{active:!1,type:"button",tooltip:h,onPostRender:i(o,l),onclick:function(){o.execCommand(c)}}))},v=function(n){r(n,"numlist","Numbered list","InsertOrderedList","OL",e(n));r(n,"bullist","Bullet list","InsertUnorderedList","UL",o(n))};u.add("advlist",function(t){var i,r,u;r="lists";u=(i=t).settings.plugins?i.settings.plugins:"";-1!==n.inArray(u.split(/[ ,]/),r)&&(v(t),f(t))})}();!function(){"use strict";function uct(n,t,i){var r=i||!1,u=function(){t();r=!0},f=function(){n();r=!1};return{on:u,off:f,toggle:function(){(r?f:u)()},isOn:function(){return r}}}function hk(n,i,r,u,f){return n(r,u)?t.some(r):rt.isFunction(f)&&f(r)?t.none():i(r,u,f)}function ad(n,t){var r=function(i){var r=t(i),u;return r<=0||null===r?(u=h.get(i,n),parseFloat(u)||0):r},u=function(n,t){return i.foldl(t,function(t,i){var r=h.get(n,i),u=r===undefined?0:parseInt(r,10);return isNaN(u)?t:t+u},0)};return{set:function(t,i){if(!rt.isNumber(i)&&!i.match(/^[0-9]+$/))throw n+".set accepts only positive integer values. Value was "+i;var r=t.dom();uu(r)&&(r.style[n]=i+"px")},get:r,getOuter:r,aggregate:u,max:function(n,t,i){var r=u(n,i);return r<t?t-r:0}}}function gtt(n,t){return tit(document.createElement("canvas"),n,t)}function nit(n){return n.getContext("2d")}function tit(n,t,i){return n.width=t,n.height=i,n}function uit(){return new(vu.getOrDie("FileReader"))}function fit(n){return new uf(function(t,i){function u(){e();t(r)}function o(){e();i("Unable to load data of type "+n.type+": "+f)}var f=URL.createObjectURL(n),r=new Image,e=function(){r.removeEventListener("load",u);r.removeEventListener("error",o)};r.addEventListener("load",u);r.addEventListener("error",o);r.src=f;r.complete&&u()})}function eit(n){return new uf(function(t,i){var r=new XMLHttpRequest;r.open("GET",n,!0);r.responseType="blob";r.onload=function(){200==this.status&&t(this.response)};r.onerror=function(){var n,t=this;i(0===this.status?((n=new Error("No access to download image")).code=18,n.name="SecurityError",n):new Error("Error "+t.status+" downloading image"))};r.send()})}function oit(n){var f=n.split(","),e=/data:([^;]+)/.exec(f[0]);if(!e)return t.none();for(var o,s,h,b=e[1],k=f[1],c=fwt.atob(k),l=c.length,a=Math.ceil(l/1024),v=new Array(a),i=0;i<a;++i){for(var r=1024*i,y=Math.min(r+1024,l),p=new Array(y-r),u=r,w=0;u<y;++w,++u)p[w]=c[u].charCodeAt(0);v[i]=(o=p,new(vu.getOrDie("Uint8Array"))(o))}return t.some((s=v,h={type:b},new(vu.getOrDie("Blob"))(s,h)))}function ya(n){return new uf(function(t,i){oit(n).fold(function(){i("uri is not base64: "+n)},t)})}function sit(n){return new uf(function(t){var i=new uit;i.onloadend=function(){t(i.result)};i.readAsDataURL(n)})}function pft(){var f=function(n){var t=!0===n.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:et('<div aria-label="'+n.label+'" class="${prefix}-toolbar-group '+t+'"><\/div>'),tgroupBehaviours:w([ae("adhoc-scrollable-toolbar",!0===n.scrollable?[yb(function(n){h.set(n.element(),"overflow-x","auto");yft.markAsHorizontal(n.element());hu.register(n.element())})]:[])]),components:[yi.sketch({components:[aft.parts().items({})]})],markers:{itemClass:o.resolve("toolbar-group-item")},items:n.items}},t=ki(hh.sketch({dom:et('<div class="${prefix}-toolbar"><\/div>'),components:[hh.parts().groups({})],toolbarBehaviours:w([d.config({toggleClass:o.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),ct.config({mode:"cyclic"})]),shell:!0})),e=ki(yi.sketch({dom:{classes:[o.resolve("toolstrip")]},components:[ve(t)],containerBehaviours:w([d.config({toggleClass:o.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),r=function(){hh.setGroups(t,u.get());d.off(t)},u=tt([]);return{wrapper:n.constant(e),toolbar:n.constant(t),createGroups:function(t){return i.map(t,n.compose(aft.sketch,f))},setGroups:function(n){u.set(n);r()},setContextToolbar:function(n){d.on(t);hh.setGroups(t,n)},restoreToolbar:function(){d.isOn(t)&&r()},refresh:function(){},focus:function(){ct.focusIn(t)}}}function vti(){var n={};return{registerId:function(t,i,r){l.each(r,function(r,u){var f=n[u]!==undefined?n[u]:{};f[i]=ekt(r,t);n[u]=f})},unregisterId:function(t){l.each(n,function(n){n.hasOwnProperty(t)&&delete n[t]})},filterByType:function(t){return it(n,t).map(function(n){return l.mapToArray(n,function(n,t){return ati(t,n)})}).getOr([])},find:function(i,r,u){var f=co(r)(n);return cti(u,function(n){return i=f,ee(r=n).fold(function(){return t.none()},function(n){var t=co(n);return i.bind(t).map(function(n){return lti(r,n)})});var i,r},i)}}}function yti(){var t=vti(),n={},r=function(n){var t=n.element();return ee(t).fold(function(){return i="uid-",r=n.element(),t=lr(byt+i),f.set(r,vs,t),t;var i,r,t},function(n){return n})},i=function(i){ee(i.element()).each(function(i){n[i]=undefined;t.unregisterId(i)})};return{find:function(n,i,r){return t.find(n,i,r)},filter:function(n){return t.filterByType(n)},register:function(u){var f=r(u),e;vt(n,f)&&function(t,r){var u=n[r];if(u!==t)throw new Error('The tagId "'+r+'" is already used by: '+ru(u.element())+"\nCannot use it for: "+ru(t.element())+"\nThe conflicting element is"+(gi.inBody(u.element())?" ":" not ")+"already in the DOM");i(t)}(u,f);e=[u];t.registerId(e,f,u.events());n[f]=u},unregister:i,getById:function(t){return co(t)(n)}}}function het(n){var t=ki(yi.sketch({dom:{classes:[o.resolve("outer-container")].concat(n.classes)},containerBehaviours:w([yo.config({alpha:wti(),omega:bti()})])}));return pti(t)}var ny,ty,iy,lh,ry,uy,fy,ey,oy,ah=function(n){return function(){return n}},oot=ah(!1),sot=ah(!0),n={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:ah,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:oot,always:sot},nr=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},rt={isString:nr("string"),isObject:nr("object"),isArray:nr("array"),isNull:nr("null"),isBoolean:nr("boolean"),isUndefined:nr("undefined"),isFunction:nr("function"),isNumber:nr("number")},sy=function(n){return function(){for(var u,f,e,r,t=new Array(arguments.length),i=0;i<t.length;i++)t[i]=arguments[i];if(0===t.length)throw new Error("Can't merge zero objects");for(u={},f=0;f<t.length;f++){e=t[f];for(r in e)e.hasOwnProperty(r)&&(u[r]=n(u[r],e[r]))}return u}},hy=sy(function(n,t){return rt.isObject(n)&&rt.isObject(t)?hy(n,t):t}),hot=sy(function(n,t){return t}),s={deepMerge:hy,merge:hot},sf=n.never,vh=n.always,pr=function(){return yh},yh=(lh={fold:function(n){return n()},is:sf,isSome:sf,isNone:vh,getOr:iy=function(n){return n},getOrThunk:ty=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:iy,orThunk:ty,map:pr,ap:pr,each:function(){},bind:pr,flatten:pr,exists:sf,forall:vh,filter:pr,equals:ny=function(n){return n.isNone()},equals_:ny,toArray:function(){return[]},toString:n.constant("none()")},Object.freeze&&Object.freeze(lh),lh),to=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:vh,isNone:sf,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:function(t){return to(t(n))},ap:function(t){return t.fold(pr,function(t){return to(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:yh},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(sf,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},t={some:to,none:pr,from:function(n){return null===n||n===undefined?yh:to(n)}},ph=(ry=Object.keys)===undefined?function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}:ry,io=function(n,t){for(var r,u=ph(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},cy=function(n,t){var i={};return io(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},ly=function(n,t){var i=[];return io(n,function(n,r){i.push(t(n,r))}),i},ay=function(n){return ly(n,function(n){return n})},l={bifilter:function(n,t){var i={},r={};return io(n,function(n,u){(t(n,u)?i:r)[u]=n}),{t:i,f:r}},each:io,map:function(n,t){return cy(n,function(n,i,r){return{k:i,v:t(n,i,r)}})},mapToArray:ly,tupleMap:cy,find:function(n,i){for(var u,f,e=ph(n),r=0,o=e.length;r<o;r++)if(u=e[r],f=n[u],i(f,u,n))return t.some(f);return t.none()},keys:ph,values:ay,size:function(n){return ay(n).length}},lu=(n.constant("contextmenu"),n.constant("touchstart")),ro=n.constant("touchmove"),uo=n.constant("touchend"),hf=(n.constant("gesturestart"),n.constant("mousedown")),vy=n.constant("mousemove"),cot=(n.constant("mouseout"),n.constant("mouseup")),yy=n.constant("mouseover"),lot=(n.constant("focusin"),n.constant("keydown")),py=n.constant("input"),aot=n.constant("change"),wh=(n.constant("focus"),n.constant("click")),bh=n.constant("transitionend"),vot=n.constant("selectstart"),tr=function(n){var t,i=!1;return function(){return i||(i=!0,t=n.apply(null,arguments)),t}},yot=function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},kh(i(1),i(2))):{major:0,minor:0}},wy=function(){return kh(0,0)},kh=function(n,t){return{major:n,minor:t}},fo={nu:kh,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?wy():yot(n,i)},unknown:wy},by="Firefox",au=function(n,t){return function(){return t===n}},ky=function(n){var t=n.current;return{current:t,version:n.version,isEdge:au("Edge",t),isChrome:au("Chrome",t),isIE:au("IE",t),isOpera:au("Opera",t),isFirefox:au(by,t),isSafari:au("Safari",t)}},dy={unknown:function(){return ky({current:undefined,version:fo.unknown()})},nu:ky,edge:n.constant("Edge"),chrome:n.constant("Chrome"),ie:n.constant("IE"),opera:n.constant("Opera"),firefox:n.constant(by),safari:n.constant("Safari")},gy="Windows",np="Android",tp="Solaris",ip="FreeBSD",wr=function(n,t){return function(){return t===n}},rp=function(n){var t=n.current;return{current:t,version:n.version,isWindows:wr(gy,t),isiOS:wr("iOS",t),isAndroid:wr(np,t),isOSX:wr("OSX",t),isLinux:wr("Linux",t),isSolaris:wr(tp,t),isFreeBSD:wr(ip,t)}},up={unknown:function(){return rp({current:undefined,version:fo.unknown()})},nu:rp,windows:n.constant(gy),ios:n.constant("iOS"),android:n.constant(np),linux:n.constant("Linux"),osx:n.constant("OSX"),solaris:n.constant(tp),freebsd:n.constant(ip)},fp=(uy=Array.prototype.indexOf)===undefined?function(n,t){return pot(n,t)}:function(n,t){return uy.call(n,t)},ep=function(n,t){return-1<fp(n,t)},op=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},sp=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},hp=function(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i,n)},cp=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},lp=function(n,i){for(var r=0,u=n.length;r<u;r++)if(i(n[r],r,n))return t.some(r);return t.none()},pot=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},wot=Array.prototype.push,ap=function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);wot.apply(i,n[t])}return i},vp=function(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i,n))return!1;return!0},dh=Array.prototype.slice,bot=rt.isFunction(Array.from)?Array.from:function(n){return dh.call(n)},i={map:op,each:sp,eachr:hp,partition:function(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i,n)?u:f).push(r);return{pass:u,fail:f}},filter:cp,groupBy:function(n,t){var f,e;if(0===n.length)return[];for(var o=t(n[0]),r=[],i=[],u=0,s=n.length;u<s;u++)f=n[u],e=t(f),e!==o&&(r.push(i),i=[]),o=e,i.push(f);return 0!==i.length&&r.push(i),r},indexOf:function(n,i){var r=fp(n,i);return-1===r?t.none():t.some(r)},foldr:function(n,t,i){return hp(n,function(n){i=t(i,n)}),i},foldl:function(n,t,i){return sp(n,function(n){i=t(i,n)}),i},find:function(n,i){for(var u,r=0,f=n.length;r<f;r++)if(u=n[r],i(u,r,n))return t.some(u);return t.none()},findIndex:lp,flatten:ap,bind:function(n,t){var i=op(n,t);return ap(i)},forall:vp,exists:function(n,t){return lp(n,t).isSome()},contains:ep,equal:function(n,t){return n.length===t.length&&vp(n,function(n,i){return n===t[i]})},reverse:function(n){var t=dh.call(n,0);return t.reverse(),t},chunk:function(n,t){for(var u,r=[],i=0;i<n.length;i+=t)u=n.slice(i,i+t),r.push(u);return r},difference:function(n,t){return cp(n,function(n){return!ep(t,n)})},mapToObject:function(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u},pure:function(n){return[n]},sort:function(n,t){var i=dh.call(n,0);return i.sort(t),i},range:function(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r},head:function(n){return 0===n.length?t.none():t.some(n[0])},last:function(n){return 0===n.length?t.none():t.some(n[n.length-1])},from:bot},yp=function(n,t){var r=String(t).toLowerCase();return i.find(n,function(n){return n.search(r)})},kot=function(n,t){return yp(n,t).map(function(n){var i=fo.detect(n.versionRegexes,t);return{current:n.name,version:i}})},dot=function(n,t){return yp(n,t).map(function(n){var i=fo.detect(n.versionRegexes,t);return{current:n.name,version:i}})},got=function(n,t){return t+n},nst=function(n,t){return n+t},tst=function(n,t){return n.substring(t)},ist=function(n,t){return n.substring(0,n.length-t)},rst=function(n){return""===n?t.none():t.some(n.substr(0,1))},ust=function(n){return""===n?t.none():t.some(n.substring(1))},pp=function(n,t,i){return""===t||!(n.length<t.length)&&n.substr(i,i+t.length)===t},gh=function(n,t){return pp(n,t,0)},nc=function(n,t){return pp(n,t,n.length-t.length)},pt={supplant:function(n,t){return n.replace(/\${([^{}]*)}/g,function(n,i){var r,u=t[i];return"string"==(r=typeof u)||"number"===r?u:n})},startsWith:gh,removeLeading:function(n,t){return gh(n,t)?tst(n,t.length):n},removeTrailing:function(n,t){return nc(n,t)?ist(n,t.length):n},ensureLeading:function(n,t){return gh(n,t)?n:got(n,t)},ensureTrailing:function(n,t){return nc(n,t)?n:nst(n,t)},endsWith:nc,contains:function(n,t){return-1!==n.indexOf(t)},trim:function(n){return n.replace(/^\s+|\s+$/g,"")},lTrim:function(n){return n.replace(/^\s+/g,"")},rTrim:function(n){return n.replace(/\s+$/g,"")},capitalize:function(n){return rst(n).bind(function(t){return ust(n).map(function(n){return t.toUpperCase()+n})}).getOr(n)}},tc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ir=function(n){return function(t){return pt.contains(t,n)}},fst=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return pt.contains(n,"edge/")&&pt.contains(n,"chrome")&&pt.contains(n,"safari")&&pt.contains(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tc],search:function(n){return pt.contains(n,"chrome")&&!pt.contains(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return pt.contains(n,"msie")||pt.contains(n,"trident")}},{name:"Opera",versionRegexes:[tc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ir("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ir("firefox")},{name:"Safari",versionRegexes:[tc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(pt.contains(n,"safari")||pt.contains(n,"mobile/"))&&pt.contains(n,"applewebkit")}}],est=[{name:"Windows",search:ir("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return pt.contains(n,"iphone")||pt.contains(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ir("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ir("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ir("linux"),versionRegexes:[]},{name:"Solaris",search:ir("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ir("freebsd"),versionRegexes:[]}],wp={browsers:n.constant(fst),oses:n.constant(est)},ost=function(t){var i,o,r,u,s,h,c,f,e,l,a,p=wp.browsers(),w=wp.oses(),v=kot(p,t).fold(dy.unknown,dy.nu),y=dot(w,t).fold(up.unknown,up.nu);return{browser:v,os:y,deviceType:(o=v,r=t,u=(i=y).isiOS()&&!0===/ipad/i.test(r),s=i.isiOS()&&!u,h=i.isAndroid()&&3===i.version.major,c=i.isAndroid()&&4===i.version.major,f=u||h||c&&!0===/mobile/i.test(r),e=i.isiOS()||i.isAndroid(),l=e&&!f,a=o.isSafari()&&i.isiOS()&&!1===/safari/i.test(r),{isiPad:n.constant(u),isiPhone:n.constant(s),isTablet:n.constant(f),isPhone:n.constant(l),isTouch:n.constant(e),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:n.constant(a)})}},dt={detect:tr(function(){var n=navigator.userAgent;return ost(n)})},bp={tap:n.constant("alloy.tap")},br=n.constant("alloy.focus"),sst=n.constant("alloy.blur.post"),kp=n.constant("alloy.receive"),cf=n.constant("alloy.execute"),lf=n.constant("alloy.focus.item"),dp=bp.tap,hst=dt.detect().deviceType.isTouch()?bp.tap:wh,cst=n.constant("alloy.longpress"),ic=(n.constant("alloy.sandbox.close"),n.constant("alloy.system.init")),lst=n.constant("alloy.system.scroll"),gp=n.constant("alloy.system.attached"),nw=n.constant("alloy.system.detached"),eo=(n.constant("alloy.change.tab"),n.constant("alloy.dismiss.tab"),function(n,t){fc(n,n.element(),t,{})}),af=function(n,t,i){fc(n,n.element(),t,i)},rc=function(n){eo(n,cf())},uc=function(n,t,i){fc(n,t,i,{})},fc=function(t,i,r,u){var f=s.deepMerge({target:i},u);t.getSystem().triggerEvent(r,i,l.map(f,n.constant))},vf=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:n.constant(t)}},e={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return vf(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return vf(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return vf(i)},fromDom:vf,fromPoint:function(n,i,r){return t.from(n.dom().elementFromPoint(i,r)).map(vf)}},ast=8,tw=9,iw=1,rw=function(n){return n.dom().nodeName.toLowerCase()},ec=function(n){return n.dom().nodeType},oc=function(n){return function(t){return ec(t)===n}},vst=oc(iw),yst=oc(3),pst=oc(tw),st={name:rw,type:ec,value:function(n){return n.dom().nodeValue},isElement:vst,isText:yst,isDocument:pst,isComment:function(n){return ec(n)===ast||"#comment"===rw(n)}},wst=tr(function(){return uw(e.fromDom(document))}),uw=function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return e.fromDom(t)},gi={body:wst,getBody:uw,inBody:function(n){var t=st.isText(n)?n.dom().parentNode:n.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)}},yf=function(n){return n.slice(0).sort()},fw=function(n,t){throw new Error("All required keys ("+yf(n).join(", ")+") were not specified. Specified keys were: "+yf(t).join(", ")+".");},ew=function(n){throw new Error("Unsupported keys for object: "+yf(n).join(", "));},sc=function(n,t){if(!rt.isArray(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");i.each(t,function(t){if(!rt.isString(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.");})},bst=function(n,t){throw new Error("All values need to be of type: "+t+". Keys ("+yf(n).join(", ")+") were not.");},ow=function(n){var t=yf(n);i.find(t,function(n,i){return i<t.length-1&&n===t[i+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].");})},rr={immutable:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(){for(var f,r=[],u=0;u<arguments.length;u++)r[u]=arguments[u];if(t.length!==r.length)throw new Error('Wrong number of arguments to struct. Expected "['+t.length+']", got '+r.length+" arguments");return f={},i.each(t,function(t,i){f[t]=n.constant(r[i])}),f}},immutableBag:function(r,u){var f=r.concat(u);if(0===f.length)throw new Error("You must specify at least one required or optional field.");return sc("required",r),sc("optional",u),ow(f),function(e){var s=l.keys(e),h,o;return i.forall(r,function(n){return i.contains(s,n)})||fw(r,s),h=i.filter(s,function(n){return!i.contains(f,n)}),0<h.length&&ew(h),o={},i.each(r,function(t){o[t]=n.constant(e[t])}),i.each(u,function(i){o[i]=n.constant(Object.prototype.hasOwnProperty.call(e,i)?t.some(e[i]):t.none())}),o}}},sw=function(n,t){for(var i=[],u=function(n){return i.push(n),t(n)},r=t(n);(r=r.bind(u)).isSome(););return i},kst="undefined"!=typeof window?window:Function("return this;")(),dst=function(n,t){for(var i=t!==undefined&&null!==t?t:kst,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i},gst=function(n,t){var i=n.split(".");return dst(i,t)},vu={getOrDie:function(n,t){var i=gst(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i}},hw=iw,nht=tw,cw=function(n){return n.nodeType!==hw&&n.nodeType!==nht||0===n.childElementCount},ur={all:function(n,t){var r=t===undefined?document:t.dom();return cw(r)?[]:i.map(r.querySelectorAll(n),e.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==hw)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(n,i){var r=i===undefined?document:i.dom();return cw(r)?t.none():t.from(r.querySelector(n)).map(e.fromDom)}},tht=function(n,t){return n.dom()===t.dom()},ht=(dt.detect().browser.isIE(),tht),lw=function(n){return e.fromDom(n.dom().ownerDocument)},hc=function(n){var i=n.dom();return t.from(i.parentNode).map(e.fromDom)},aw=function(n){var i=n.dom();return t.from(i.previousSibling).map(e.fromDom)},vw=function(n){var i=n.dom();return t.from(i.nextSibling).map(e.fromDom)},oo=function(n){var t=n.dom();return i.map(t.childNodes,e.fromDom)},cc=function(n,i){var r=n.dom().childNodes;return t.from(r[i]).map(e.fromDom)},yw=rr.immutable("element","offset"),k={owner:lw,defaultView:function(n){var t=n.dom().ownerDocument.defaultView;return e.fromDom(t)},documentElement:function(n){var t=lw(n);return e.fromDom(t.dom().documentElement)},parent:hc,findIndex:function(n){return hc(n).bind(function(t){var r=oo(t);return i.findIndex(r,function(t){return ht(n,t)})})},parents:function(t,i){for(var u,f,s=rt.isFunction(i)?i:n.constant(!1),r=t.dom(),o=[];null!==r.parentNode&&r.parentNode!==undefined;){if(u=r.parentNode,f=e.fromDom(u),o.push(f),!0===s(f))break;r=u}return o},siblings:function(n){return hc(n).map(oo).map(function(t){return i.filter(t,function(t){return!ht(n,t)})}).getOr([])},prevSibling:aw,offsetParent:function(n){var i=n.dom();return t.from(i.offsetParent).map(e.fromDom)},prevSiblings:function(n){return i.reverse(sw(n,aw))},nextSibling:vw,nextSiblings:function(n){return sw(n,vw)},children:oo,child:cc,firstChild:function(n){return cc(n,0)},lastChild:function(n){return cc(n,n.dom().childNodes.length-1)},childNodesCount:function(n){return n.dom().childNodes.length},hasChildNodes:function(n){return n.dom().hasChildNodes()},leaf:function(n,t){var i=oo(n);return 0<i.length&&t<i.length?yw(i[t],0):yw(n,t)}},so=function(n,t){k.parent(n).each(function(i){i.dom().insertBefore(t.dom(),n.dom())})},pf=function(n,t){n.dom().appendChild(t.dom())},ri={before:so,after:function(n,t){k.nextSibling(n).fold(function(){k.parent(n).each(function(n){pf(n,t)})},function(n){so(n,t)})},prepend:function(n,t){k.firstChild(n).fold(function(){pf(n,t)},function(i){n.dom().insertBefore(t.dom(),i.dom())})},append:pf,appendAt:function(n,t,i){k.child(n,i).fold(function(){pf(n,t)},function(n){so(n,t)})},wrap:function(n,t){so(n,t);pf(t,n)}},iht=function(n,t){i.each(t,function(t){ri.before(n,t)})},lc=function(n,t){i.each(t,function(t){ri.append(n,t)})},ac=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)},kr={empty:function(n){n.dom().textContent="";i.each(k.children(n),function(n){ac(n)})},remove:ac,unwrap:function(n){var t=k.children(n);0<t.length&&iht(n,t);ac(n)}},pw=function(n){eo(n,nw());var t=n.components();i.each(t,pw)},vc=function(n){var t=n.components();i.each(t,vc);eo(n,gp())},ww=function(n,t){bw(n,t,ri.append)},bw=function(n,t,i){n.getSystem().addToWorld(t);i(n.element(),t.element());gi.inBody(n.element())&&vc(t);n.syncComponents()},kw=function(n){pw(n);kr.remove(n.element());n.getSystem().removeFromWorld(n)},dw=function(n){var i=k.parent(n.element()).bind(function(i){return n.getSystem().getByDom(i).fold(t.none,t.some)});kw(n);i.each(function(n){n.syncComponents()})},ho=function(i){return{is:function(n){return i===n},isValue:n.always,isError:n.never,getOr:n.constant(i),getOrThunk:n.constant(i),getOrDie:n.constant(i),or:function(){return ho(i)},orThunk:function(){return ho(i)},fold:function(n,t){return t(i)},map:function(n){return ho(n(i))},each:function(n){n(i)},bind:function(n){return n(i)},exists:function(n){return n(i)},forall:function(n){return n(i)},toOption:function(){return t.some(i)}}},yc=function(i){return{is:n.never,isValue:n.never,isError:n.always,getOr:n.identity,getOrThunk:function(n){return n()},getOrDie:function(){return n.die(String(i))()},or:function(n){return n},orThunk:function(n){return n()},fold:function(n){return n(i)},map:function(){return yc(i)},each:n.noop,bind:function(){return yc(i)},exists:n.never,forall:n.always,toOption:t.none}},b={value:ho,error:yc},ui=function(n){if(!rt.isArray(n))throw new Error("cases must be an array");if(0===n.length)throw new Error("there must be at least one case");var t=[],r={};return i.each(n,function(u,f){var s=l.keys(u),e,o;if(1!==s.length)throw new Error("one and only one name per case");if(e=s[0],o=u[e],r[e]!==undefined)throw new Error("duplicate key detected:"+e);if("cata"===e)throw new Error("cannot have a case named cata (sorry)");if(!rt.isArray(o))throw new Error("case arguments must be an array");t.push(e);r[e]=function(){var s=arguments.length,r,u;if(s!==o.length)throw new Error("Wrong number of arguments to case "+e+". Expected "+o.length+" ("+o+"), got "+s);for(r=new Array(s),u=0;u<r.length;u++)r[u]=arguments[u];return{fold:function(){if(arguments.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+arguments.length);return arguments[f].apply(null,r)},match:function(n){var u=l.keys(n);if(t.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+u.join(","));if(!i.forall(t,function(n){return i.contains(u,n)}))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+t.join(", "));return n[e].apply(null,r)},log:function(n){console.log(n,{constructors:t,constructor:e,params:r})}}}}),r},dr=ui([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),wf=function(t){return dr.defaultedThunk(n.constant(t))},gr=dr.strict,yu=dr.asOption,rht=dr.defaultedThunk,uht=(dr.asDefaultedOptionThunk,dr.mergeWithThunk),gw=(ui([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(n){var t=[],r=[];return i.each(n,function(n){n.fold(function(n){t.push(n)},function(n){r.push(n)})}),{errors:t,values:r}}),nb=function(t){return n.compose(b.error,i.flatten)(t)},tb=function(n,t){var r,u,i=gw(n);return 0<i.errors.length?nb(i.errors):(r=i.values,u=t,b.value(s.deepMerge.apply(undefined,[u].concat(r))))},fht=function(n){var t=gw(n);return 0<t.errors.length?nb(t.errors):b.value(t.values)},pc=function(n){return function(i){return i.hasOwnProperty(n)?t.from(i[n]):t.none()}},bf=function(n,t){return pc(t)(n)},kf=function(n,t){var i={};return i[n]=t,i},eht=function(n,t){return r=n,f=t,u={},i.each(f,function(n){r[n]!==undefined&&r.hasOwnProperty(n)&&(u[n]=r[n])}),u;var r,f,u},oht=function(n,t){return u=n,f=t,r={},l.each(u,function(n,t){i.contains(f,t)||(r[t]=n)}),r;var u,f,r},co=function(n){return pc(n)},ib=function(n,t){return i=n,r=t,function(n){return pc(i)(n).getOr(r)};var i,r},it=function(n,t){return bf(n,t)},g=function(n,t){return kf(n,t)},fi=function(n){return r=n,t={},i.each(r,function(n){t[n.key]=n.value}),t;var r,t},wc=function(n,t){return tb(n,t)},vt=function(n,t){return i=t,(r=n).hasOwnProperty(i)&&r[i]!==undefined&&null!==r[i];var r,i},df=ui([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),rb=ui([{field:["name","presence","type"]},{state:["name"]}]),sht=function(){return vu.getOrDie("JSON")},ei=function(n,t,i){return sht().stringify(n,t,i)},bc=function(n){return rt.isObject(n)&&100<l.keys(n).length?" removed due to size":ei(n,null,2)},gf=function(n,t){return b.error([{path:n,getErrorInfo:t}])},kc=ui([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),hht=function(n,t,i){return bf(t,i).fold(function(){return r=i,u=t,gf(n,function(){return'Could not find valid *strict* value for "'+r+'" in '+bc(u)});var r,u},b.value)},ub=function(t,i,r){var u=bf(t,i).fold(function(){return r(t)},n.identity);return b.value(u)},cht=function(i,r,u,f){return u.fold(function(u,e,o,h){var c=function(n){return h.extract(i.concat([u]),f,n).map(function(n){return kf(e,f(n))})},l=function(n){return n.fold(function(){var n=kf(e,f(t.none()));return b.value(n)},function(n){return h.extract(i.concat([u]),f,n).map(function(n){return kf(e,f(t.some(n)))})})};return o.fold(function(){return hht(i,r,u).bind(c)},function(n){return ub(r,u,n).bind(c)},function(){return(n=r,t=u,b.value(bf(n,t))).bind(l);var n,t},function(n){return(t=r,i=u,f=n,e=bf(t,i).map(function(n){return!0===n?f(t):n}),b.value(e)).bind(l);var t,i,f,e},function(t){var i=t(r);return ub(r,u,n.constant({})).map(function(n){return s.deepMerge(i,n)}).bind(c)})},function(n,t){var i=t(r);return b.value(kf(n,f(i)))})},pu=function(n){return{extract:function(t,i,r){return n(r,i).fold(function(n){return i=n,gf(t,function(){return i});var i},b.value)},toString:function(){return"val"},toDsl:function(){return df.itemOf(n)}}},wt=function(t){var r=kt(t),u=i.foldr(t,function(t,i){return i.fold(function(n){return s.deepMerge(t,g(n,!0))},n.constant(t))},{});return{extract:function(n,t,f){var e,o,s,c=rt.isBoolean(f)?[]:(e=f,o=l.keys(e),i.filter(o,function(n){return vt(e,n)})),h=i.filter(c,function(n){return!vt(u,n)});return 0===h.length?r.extract(n,t,f):(s=h,gf(n,function(){return"There are unsupported fields: ["+s.join(", ")+"] specified"}))},toString:r.toString,toDsl:r.toDsl}},kt=function(n){return{extract:function(t,r,u){return f=t,e=u,o=n,s=r,h=i.map(o,function(n){return cht(f,e,n,s)}),tb(h,{});var f,e,o,s,h},toString:function(){return"obj{\n"+i.map(n,function(n){return n.fold(function(n,t,i,r){return n+" -> "+r.toString()},function(n){return"state("+n+")"})}).join("\n")+"}"},toDsl:function(){return df.objOf(i.map(n,function(n){return n.fold(function(n,t,i,r){return rb.field(n,i,r)},function(n){return rb.state(n)})}))}}},fb=function(n){return{extract:function(t,r,u){var f=i.map(u,function(i,u){return n.extract(t.concat(["["+u+"]"]),r,i)});return fht(f)},toString:function(){return"array("+n.toString()+")"},toDsl:function(){return df.arrOf(n)}}},dc=function(t,r){return{extract:function(u,f,e){var o,s,h=l.keys(e);return(o=u,s=h,fb(pu(t)).extract(o,n.identity,s)).bind(function(n){var t=i.map(n,function(n){return kc.field(n,n,gr(),r)});return kt(t).extract(u,f,e)})},toString:function(){return"setOf("+r.toString()+")"},toDsl:function(){return df.setOf(t,r)}}},gc=n.constant(pu(b.value)),lht=(n.compose(fb,kt),kc.state),bt=kc.field,aht=function(n,t,i,r,u){return it(r,u).fold(function(){return t=r,i=u,gf(n,function(){return'The chosen schema: "'+i+'" did not exist in branches: '+bc(t)});var t,i},function(r){return kt(r).extract(n.concat(["branch: "+u]),t,i)})},vht=function(n,t){return{extract:function(i,r,u){return it(u,n).fold(function(){return t=n,gf(i,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(n){return aht(i,r,u,t,n)})},toString:function(){return"chooseOn("+n+"). Possible values: "+l.keys(t)},toDsl:function(){return df.choiceOf(n,t)}}},yht=pu(b.value),eb=function(n,t,i,r){return t.extract([n],i,r).fold(function(n){return b.error({input:r,errors:n})},b.value)},nl=function(t,i,r){return eb(t,i,n.constant,r)},tl=function(t){return t.fold(function(n){throw new Error(ob(n));},n.identity)},oi=function(t,i,r){return tl((u=r,eb(t,i,n.identity,u)));var u},wu=function(n,t,i){return tl(nl(n,t,i))},ob=function(n){return"Errors: \n"+(t=n.errors,r=10<t.length?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t,i.map(r,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}))+"\n\nInput object: "+bc(n.input);var t,r},bu=function(n,t){return vht(n,t)},lo=n.constant(yht),pht=(fy=rt.isFunction,ey="function",pu(function(n){var t=typeof n;return fy(n)?b.value(n):b.error("Expected type: "+ey+" but got: "+t)})),u=function(n){return bt(n,n,gr(),gc())},ne=function(n,t){return bt(n,n,gr(),t)},sb=function(n){return ne(n,pht)},fr=function(n,t){return bt(n,n,gr(),kt(t))},nt=function(n){return bt(n,n,yu(),gc())},hb=function(n,t){return bt(n,n,yu(),kt(t))},cb=function(n,t){return bt(n,n,yu(),wt(t))},r=function(n,t){return bt(n,n,wf(t),gc())},il=function(n,t,i){return bt(n,n,wf(t),i)},si=function(n,t){return lht(n,t)},ku=function(t){if(!vt(t,"can")&&!vt(t,"abort")&&!vt(t,"run"))throw new Error("EventHandler defined by: "+ei(t,null,2)+" does not have can, abort, or run!");return oi("Extracting event.handler",wt([r("can",n.constant(!0)),r("abort",n.constant(!1)),r("run",n.noop)]),t)},wht=function(n){var t,r,u,f,e=(t=n,r=function(n){return n.can},function(){var n=Array.prototype.slice.call(arguments,0);return i.foldl(t,function(t,i){return t&&r(i).apply(undefined,n)},!0)}),o=(u=n,f=function(n){return n.abort},function(){var n=Array.prototype.slice.call(arguments,0);return i.foldl(u,function(t,i){return t||f(i).apply(undefined,n)},!1)});return ku({can:e,abort:o,run:function(){var t=Array.prototype.slice.call(arguments,0);i.each(n,function(n){n.run.apply(undefined,t)})}})},ut=fi,lb=function(n,t){return{key:n,value:ku({abort:t})}},p=function(n,t){return{key:n,value:ku({run:t})}},rl=function(n,t,i){return{key:n,value:ku({run:function(n){t.apply(undefined,[n].concat(i))}})}},ul=function(n){return function(t){return{key:n,value:ku({run:function(n,i){var r;r=i;ht(n.element(),r.event().target())&&t(n,i)}})}}},fl=function(n,t,i){var r,u,f=t.partUids()[i];return u=f,p(r=n,function(n,t){n.getSystem().getByUid(u).each(function(n){var i,u,f,e;u=(i=n).element();f=r;e=t;i.getSystem().triggerEvent(f,u,e.event())})})},ab=function(n){return p(n,function(n,t){t.cut()})},nu=ul(gp()),vb=ul(nw()),yb=ul(ic()),ao=(oy=cf(),function(n){return p(oy,n)}),el=function(n){return i.map(n,function(n){return pt.endsWith(n,"/*")?n.substring(0,n.length-2):n})},ol=function(n,t){var i=n.toString(),r=i.indexOf(")")+1,u=i.indexOf("("),f=i.substring(u+1,r-1).split(/,\s*/);return n.toFunctionAnnotation=function(){return{name:t,parameters:el(f)}},n},sl=rr.immutableBag(["tag"],["classes","attributes","styles","value","innerHtml","domChildren","defChildren"]),bht=function(n){return{tag:n.tag(),classes:n.classes().getOr([]),attributes:n.attributes().getOr({}),styles:n.styles().getOr({}),value:n.value().getOr("<none>"),innerHtml:n.innerHtml().getOr("<none>"),defChildren:n.defChildren().getOr("<none>"),domChildren:n.domChildren().fold(function(){return"<none>"},function(n){return 0===n.length?"0 children, but still specified":String(n.length)})}},hi=rr.immutableBag([],["classes","attributes","styles","value","innerHtml","defChildren","domChildren"]),pb=function(n,t,i){return t.fold(function(){return i.fold(function(){return{}},function(t){return g(n,t)})},function(t){return i.fold(function(){return g(n,t)},function(t){return g(n,t)})})},hl=function(n,t,i){return yb(function(r){i(r,n,t)})},kht=function(n,t,i,r,u,f){var e,o,s=n,h=hb(t,[(e="config",o=n,bt(e,e,yu(),o))]);return wb(s,h,t,i,r,u,f)},dht=function(t,i,r){var f,o,u,s,h,e;return f=function(u){var f=arguments;return u.config({name:n.constant(t)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+r);},function(n){var t=Array.prototype.slice.call(f,1);return i.apply(undefined,[u,n.config,n.state].concat(t))})},o=r,u=i.toString(),s=u.indexOf(")")+1,h=u.indexOf("("),e=u.substring(h+1,s-1).split(/,\s*/),f.toFunctionAnnotation=function(){return{name:o,parameters:el(e.slice(0,1).concat(e.slice(3)))}},f},ght=function(n){return{key:n,value:undefined}},wb=function(i,r,u,f,e,o,h){var c=function(n){return vt(n,u)?n[u]():t.none()},v=l.map(e,function(n,t){return dht(u,n,t)}),y=l.map(o,function(n,t){return ol(n,t)}),a=s.deepMerge(y,v,{revoke:n.curry(ght,u),config:function(n){var t=wu(u+"-config",i,n);return{key:u,value:{config:t,me:a,configAsRaw:tr(function(){return oi(u+"-config",i,n)}),initialConfig:n,state:h}}},schema:function(){return r},exhibit:function(n,t){return c(n).bind(function(n){return it(f,"exhibit").map(function(i){return i(t,n.config,n.state)})}).getOr(hi({}))},name:function(){return u},handlers:function(n){return c(n).bind(function(n){return it(f,"events").map(function(t){return t(n.config,n.state)})}).getOr({})}});return a},bb=function(n,t){return kb(n,t,{validate:rt.isFunction,label:"function"})},kb=function(n,t,r){if(0===t.length)throw new Error("You must specify at least one required field.");return sc("required",t),ow(t),function(u){var f=l.keys(u),e;return i.forall(t,function(n){return i.contains(f,n)})||fw(t,f),n(t,f),e=i.filter(t,function(n){return!r.validate(u[n],n)}),0<e.length&&bst(e,r.label),u}},db=n.noop,cl={exactly:n.curry(bb,function(n,t){var r=i.filter(t,function(t){return!i.contains(n,t)});0<r.length&&ew(r)}),ensure:n.curry(bb,db),ensureWith:n.curry(kb,db)},du=cl.ensure(["readState"]),er=function(){return du({readState:function(){return"No State required"}})},vo=Object.freeze({init:er}),w=function(n){return fi(n)},nct=wt([u("fields"),u("name"),r("active",{}),r("apis",{}),r("extra",{}),r("state",vo)]),ni=function(n){var i,r,u,f,e,o,s,h,t=oi("Creating behaviour: "+n.name,nct,n);return i=t.fields,r=t.name,u=t.active,f=t.apis,e=t.extra,o=t.state,s=wt(i),h=hb(r,[cb("config",i)]),wb(s,h,r,u,f,e,o)},tct=wt([u("branchKey"),u("branches"),u("name"),r("active",{}),r("apis",{}),r("extra",{}),r("state",vo)]),ict=n.constant(undefined),rct=(n.constant({}),n.constant({}),n.constant({}),n.constant(vo)),gb=function(n,t,i){if(!(rt.isString(i)||rt.isBoolean(i)||rt.isNumber(i)))throw console.error("Invalid call to Attr.set. Key ",t,":: Value ",i,":: Element ",n),new Error("Attribute value was not simple");n.setAttribute(t,i+"")},nk=function(n,t,i){gb(n.dom(),t,i)},tk=function(n,t){var i=n.dom().getAttribute(t);return null===i?undefined:i},ll=function(n,t){var i=n.dom();return!(!i||!i.hasAttribute)&&i.hasAttribute(t)},f={clone:function(n){return i.foldl(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:nk,setAll:function(n,t){var i=n.dom();l.each(t,function(n,t){gb(i,t,n)})},get:tk,has:ll,remove:function(n,t){n.dom().removeAttribute(t)},hasNone:function(n){var t=n.dom().attributes;return t===undefined||null===t||0===t.length},transfer:function(n,t,r){st.isElement(n)&&st.isElement(t)&&i.each(r,function(i){var f,u,r;u=t;ll(f=n,r=i)&&!ll(u,r)&&nk(u,r,tk(f,r))})}},al=function(n,t){var i=f.get(n,t);return i===undefined||""===i?[]:i.split(" ")},fct=al,ect=function(n,t,i){var r=al(n,t).concat([i]);f.set(n,t,r.join(" "))},oct=function(n,t,r){var u=i.filter(al(n,t),function(n){return n!==r});0<u.length?f.set(n,t,u.join(" ")):f.remove(n,t)},ik=function(n){return fct(n,"class")},rk=function(n,t){return ect(n,"class",t)},uk=function(n,t){return oct(n,"class",t)},sct=ik,fk=rk,ek=uk,hct=function(n,t){i.contains(ik(n),t)?uk(n,t):rk(n,t)},gu=function(n){return n.dom().classList!==undefined},ok=function(n,t){return gu(n)&&n.dom().classList.contains(t)},a={add:function(n,t){gu(n)?n.dom().classList.add(t):fk(n,t)},remove:function(n,t){var i;gu(n)?n.dom().classList.remove(t):ek(n,t);0===(gu(i=n)?i.dom().classList:sct(i)).length&&f.remove(i,"class")},toggle:function(n,t){return gu(n)?n.dom().classList.toggle(t):hct(n,t)},toggler:function(n,t){var i=gu(n),r=n.dom().classList;return uct(function(){i?r.remove(t):ek(n,t)},function(){i?r.add(t):fk(n,t)},ok(n,t))},has:ok},sk=function(n,t,i){a.remove(n,i);a.add(n,t)},cct=Object.freeze({toAlpha:function(n,t){sk(n.element(),t.alpha(),t.omega())},toOmega:function(n,t){sk(n.element(),t.omega(),t.alpha())},isAlpha:function(n,t){return a.has(n.element(),t.alpha())},isOmega:function(n,t){return a.has(n.element(),t.omega())},clear:function(n,t){a.remove(n.element(),t.alpha());a.remove(n.element(),t.omega())}}),lct=[u("alpha"),u("omega")],yo=ni({fields:lct,name:"swapping",apis:cct}),tt=function(n){var t=n,i=function(){return t};return{get:i,set:function(n){t=n},clone:function(){return tt(i())}}},ck=function(i,r,u){for(var o,f=i.dom(),s=rt.isFunction(u)?u:n.constant(!1);f.parentNode;){if(f=f.parentNode,o=e.fromDom(f),r(o))return t.some(o);if(s(o))break}return t.none()},lk=function(t,r){return i.find(t.dom().childNodes,n.compose(r,e.fromDom)).map(e.fromDom)},ak=function(n,i){var r=function(n){for(var f,u=0;u<n.childNodes.length;u++){if(i(e.fromDom(n.childNodes[u])))return t.some(e.fromDom(n.childNodes[u]));if(f=r(n.childNodes[u]),f.isSome())return f}return t.none()};return r(n.dom())},vl={first:function(n){return ak(gi.body(),n)},ancestor:ck,closest:function(n,t,i){return hk(function(n){return t(n)},ck,n,t,i)},sibling:function(n,i){var r=n.dom();return r.parentNode?lk(e.fromDom(r.parentNode),function(t){return!ht(n,t)&&i(t)}):t.none()},child:lk,descendant:ak},act=function(n){n.dom().focus()},vk=function(n){var i=n!==undefined?n.dom():document;return t.from(i.activeElement).map(e.fromDom)},vct=function(n){var t=k.owner(n).dom();return n.dom()===t.activeElement},tu=act,or=function(n){n.dom().blur()},nf=vk,po=function(n){return vk(k.owner(n)).filter(function(t){return n.dom().contains(t.dom())})},yct=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),pct=tinymce.util.Tools.resolve("tinymce.ThemeManager"),wct=function(n){var t=document.createElement("a"),i;t.target="_blank";t.href=n.href;t.rel="noreferrer noopener";i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);document.body.appendChild(t);t.dispatchEvent(i);document.body.removeChild(t)},iu={formatChanged:n.constant("formatChanged"),orientationChanged:n.constant("orientationChanged"),dropupDismissed:n.constant("dropupDismissed")},bct=function(n,t){var i=(t||document).createElement("div");return i.innerHTML=n,k.children(e.fromDom(i))},yk=function(n){return n.dom().innerHTML},kct=yk,dct=function(n,t){var i=k.owner(n).dom(),r=e.fromDom(i.createDocumentFragment()),u=bct(t,i);lc(r,u);kr.empty(n);ri.append(n,r)},gct=function(n){var t=e.fromTag("div"),i=e.fromDom(n.dom().cloneNode(!0));return ri.append(t,i),yk(t)},nlt=function(n,t){return e.fromDom(n.dom().cloneNode(t))},tlt=function(n){return nlt(n,!1)},ru=function(n){return t=tlt(n),gct(t);var t},ilt=Object.freeze({events:function(n){return ut([p(kp(),function(t,r){var u,f,e=n.channels(),o=l.keys(e),s=(u=o,(f=r).universal()?u:i.filter(u,function(n){return i.contains(f.channels(),n)}));i.each(s,function(n){var i=e[n](),u=i.schema(),f=wu("channel["+n+"] data\nReceiver: "+ru(t.element()),u,r.data());i.onReceive()(t,f)})})])}}),pk=function(n){for(var i=[],r=function(n){i.push(n)},t=0;t<n.length;t++)n[t].each(r);return i},rlt=function(n,i){for(var u,r=0;r<n.length;r++)if(u=i(n[r],r),u.isSome())return u;return t.none()},ult="unknown",wk=[],flt=["alloy/data/Fields","alloy/debugging/Debugging"],bk={logEventCut:n.noop,logEventStopped:n.noop,logNoParent:n.noop,logEventNoHandlers:n.noop,logEventResponse:n.noop,write:n.noop},yl=function(n,t,r){var u,f="*"===wk||i.contains(wk,n)?(u=[],{logEventCut:function(n,t,i){u.push({outcome:"cut",target:t,purpose:i})},logEventStopped:function(n,t,i){u.push({outcome:"stopped",target:t,purpose:i})},logNoParent:function(n,t,i){u.push({outcome:"no-parent",target:t,purpose:i})},logEventNoHandlers:function(n,t){u.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,i){u.push({outcome:"response",purpose:i,target:t})},write:function(){i.contains(["mousemove","mouseover","mouseout",ic()],n)||console.log(n,{event:n,target:t.dom(),sequence:i.map(u,function(n){return i.contains(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+ru(n.target)+")":n.outcome})})}}):bk,e=r(f);return f.write(),e},kk=(n.constant(bk),n.constant(!0),n.constant([u("menu"),u("selectedMenu")])),pl=n.constant([u("item"),u("selectedItem")]),elt=(n.constant(wt(pl().concat(kk()))),n.constant(wt(pl()))),olt=fr("initSize",[u("numColumns"),u("numRows")]),wo=function(n,t,r){var u;return function(){var n=new Error,t;n.stack!==undefined&&(t=n.stack.split("\n"),i.find(t,function(n){return 0<n.indexOf("alloy")&&!i.exists(flt,function(t){return-1<n.indexOf(t)})}).getOr(ult))}(),bt(t,t,r,(u=function(n){return b.value(function(){return n.apply(undefined,arguments)})},pu(function(n){return u(n)})))},gt=function(t){return wo(0,t,wf(n.noop))},ci=function(n){return wo(0,n,wf(t.none))},wl=function(n){return wo(0,n,gr())},dk=function(n){return wo(0,n,gr())},lt=function(t,i){return si(t,n.constant(i))},bl=function(t){return si(t,n.identity)},gk=n.constant(olt),slt=[ne("channels",dc(b.value,wt([wl("onReceive"),r("schema",lo())])))],kl=ni({fields:slt,name:"receiving",active:ilt}),dl=function(n,t){var r=rd(n,t),i=t.aria();i.update()(n,i,r)},nd=function(n,t){a.toggle(n.element(),t.toggleClass());dl(n,t)},td=function(n,t){a.add(n.element(),t.toggleClass());dl(n,t)},id=function(n,t){a.remove(n.element(),t.toggleClass());dl(n,t)},rd=function(n,t){return a.has(n.element(),t.toggleClass())},ud=function(n,t,i){(t.selected()?td:id)(n,t,i)},hlt=Object.freeze({onLoad:ud,toggle:nd,isOn:rd,on:td,off:id}),clt=Object.freeze({exhibit:function(){return hi({})},events:function(n,t){var r,u,f,e=(r=n,u=t,f=nd,ao(function(n){f(n,r,u)})),o=hl(n,t,ud);return ut(i.flatten([n.toggleOnExecute()?[e]:[],[o]]))}}),fd=function(n,t,i){f.set(n.element(),"aria-expanded",i)},llt=[r("selected",!1),u("toggleClass"),r("toggleOnExecute",!0),il("aria",{mode:"none"},bu("mode",{pressed:[r("syncWithExpanded",!1),lt("update",function(n,t,i){f.set(n.element(),"aria-pressed",i);t.syncWithExpanded()&&fd(n,t,i)})],checked:[lt("update",function(n,t,i){f.set(n.element(),"aria-checked",i)})],expanded:[lt("update",fd)],selected:[lt("update",function(n,t,i){f.set(n.element(),"aria-selected",i)})],none:[lt("update",n.noop)]}))],d=ni({fields:llt,name:"toggling",active:clt,apis:hlt}),ed=function(n,t){return kl.config({channels:g(iu.formatChanged(),{onReceive:function(i,r){r.command===n&&t(i,r.state)}})})},bo=function(n){return kl.config({channels:g(iu.orientationChanged(),{onReceive:n})})},od=function(n,t){return{key:n,value:{onReceive:t}}},sd="tinymce-mobile",o={resolve:function(n){return sd+"-"+n},prefix:n.constant(sd)},hd=function(n,t){t.ignore()||(tu(n.element()),t.onFocus()(n))},alt=Object.freeze({focus:hd,blur:function(n,t){t.ignore()||or(n.element())},isFocused:function(n){return vct(n.element())}}),vlt=Object.freeze({exhibit:function(n,t){return t.ignore()?hi({}):hi({attributes:{tabindex:"-1"}})},events:function(n){return ut([p(br(),function(t,i){hd(t,n);i.stop()})])}}),ylt=[gt("onFocus"),r("ignore",!1)],ti=ni({fields:ylt,name:"focusing",active:vlt,apis:alt}),uu=function(n){return n.style!==undefined},gl=function(n,t,i){if(!rt.isString(i))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",i,":: Element ",n),new Error("CSS value must be a string: "+i);uu(n)&&n.style.setProperty(t,i)},cd=function(n,t){uu(n)&&n.style.removeProperty(t)},na=function(n,t,i){var r=n.dom();gl(r,t,i)},ld=function(n,t){return uu(n)?n.style.getPropertyValue(t):""},ko=function(n,i){var r=n.dom(),u=ld(r,i);return t.from(u).filter(function(n){return 0<n.length})},h={copy:function(n,t){var i=n.dom(),r=t.dom();uu(i)&&uu(r)&&(r.style.cssText=i.style.cssText)},set:na,preserve:function(n,t){var i=f.get(n,"style"),r=t(n);return(i===undefined?f.remove:f.set)(n,"style",i),r},setAll:function(n,t){var i=n.dom();l.each(t,function(n,t){gl(i,t,n)})},setOptions:function(n,t){var i=n.dom();l.each(t,function(n,t){n.fold(function(){cd(i,t)},function(n){gl(i,t,n)})})},remove:function(n,t){var i=n.dom();cd(i,t);f.has(n,"style")&&""===pt.trim(f.get(n,"style"))&&f.remove(n,"style")},get:function(n,t){var i=n.dom(),r=window.getComputedStyle(i).getPropertyValue(t),u=""!==r||gi.inBody(n)?r:ld(i,t);return null===u?undefined:u},getRaw:ko,getAllRaw:function(n){var u={},t=n.dom(),i,r;if(uu(t))for(i=0;i<t.style.length;i++)r=t.style.item(i),u[r]=t.style[r];return u},isValidValue:function(n,t,i){var r=e.fromTag(n);return na(r,t,i),ko(r,t).isSome()},reflow:function(n){return n.dom().offsetWidth},transfer:function(n,t,r){st.isElement(n)&&st.isElement(t)&&i.each(r,function(i){var r,u;r=t;ko(n,u=i).each(function(n){ko(r,u).isNone()&&na(r,u,n)})})}},vd,sr,plt=ad("height",function(n){return gi.inBody(n)?n.dom().getBoundingClientRect().height:n.dom().offsetHeight}),li=function(n){return plt.get(n)},wlt=function(n,t,r){return i.filter(k.parents(n,r),t)},blt=function(n,t){return i.filter(k.siblings(n),t)},klt=function(n){return ur.all(n)},dlt=function(n,t,i){return wlt(n,function(n){return ur.is(n,t)},i)},glt=function(n,t){return blt(n,function(n){return ur.is(n,t)})},ii=function(n,t){return ur.all(t,n)},yd=function(n,t,i){return vl.ancestor(n,function(n){return ur.is(n,t)},i)},pd=function(n){return ur.one(n)},wd=yd,hr=function(n,t){return ur.one(t,n)},cr=function(n,t,i){return hk(ur.is,yd,n,t,i)},c={BACKSPACE:n.constant([8]),TAB:n.constant([9]),ENTER:n.constant([13]),SHIFT:n.constant([16]),CTRL:n.constant([17]),ALT:n.constant([18]),CAPSLOCK:n.constant([20]),ESCAPE:n.constant([27]),SPACE:n.constant([32]),PAGEUP:n.constant([33]),PAGEDOWN:n.constant([34]),END:n.constant([35]),HOME:n.constant([36]),LEFT:n.constant([37]),UP:n.constant([38]),RIGHT:n.constant([39]),DOWN:n.constant([40]),INSERT:n.constant([45]),DEL:n.constant([46]),META:n.constant([91,93,224]),F10:n.constant([121])},nat=function(n,t,r){var u=i.reverse(n.slice(0,t)),f=i.reverse(n.slice(t+1));return i.find(u.concat(f),r)},tat=function(n,t,r){var u=i.reverse(n.slice(0,t));return i.find(u,r)},iat=function(n,t,r){var u=n.slice(0,t),f=n.slice(t+1);return i.find(f.concat(u),r)},rat=function(n,t,r){var u=n.slice(t+1);return i.find(u,r)},v=function(n){return function(t){return i.contains(n,t.raw().which)}},ai=function(n){return function(t){return i.forall(n,function(n){return n(t)})}},tf=function(n){return!0===n.raw().shiftKey},bd=function(n){return!0===n.raw().ctrlKey},te=(n.not(bd),n.not(tf)),y=function(n,t){return{matches:n,classification:t}},rf=function(n,t,i,r){var u=n+t;return r<u?i:u<i?r:u},ie=function(n,t,i){return n<=t?t:i<=n?i:n},kd=function(n,t){var r=ii(n.element(),"."+t.highlightClass());i.each(r,function(i){a.remove(i,t.highlightClass());n.getSystem().getByDom(i).each(function(i){t.onDehighlight()(n,i)})})},re=function(n,t,i,r){var u=ta(n,t,i,r);kd(n,t);a.add(r.element(),t.highlightClass());u||t.onHighlight()(n,r)},ta=function(n,t,i,r){return a.has(r.element(),t.highlightClass())},uat=function(n,i,r,u){var f=ii(n.element(),"."+i.itemClass());return t.from(f[u]).fold(function(){return b.error("No element found with index "+u)},n.getSystem().getByDom)},dd=function(n,t){return hr(n.element(),"."+t.itemClass()).bind(n.getSystem().getByDom)},gd=function(n,i){var r=ii(n.element(),"."+i.itemClass());return(0<r.length?t.some(r[r.length-1]):t.none()).bind(n.getSystem().getByDom)},ng=function(n,t,r,u){var f=ii(n.element(),"."+t.itemClass());return i.findIndex(f,function(n){return a.has(n,t.highlightClass())}).bind(function(t){var i=rf(t,u,0,f.length-1);return n.getSystem().getByDom(f[i])})},fat=Object.freeze({dehighlightAll:kd,dehighlight:function(n,t,i,r){var u=ta(n,t,i,r);a.remove(r.element(),t.highlightClass());u&&t.onDehighlight()(n,r)},highlight:re,highlightFirst:function(n,t,i){dd(n,t,i).each(function(r){re(n,t,i,r)})},highlightLast:function(n,t,i){gd(n,t,i).each(function(r){re(n,t,i,r)})},highlightAt:function(n,t,i,r){uat(n,t,i,r).fold(function(n){throw new Error(n);},function(r){re(n,t,i,r)})},highlightBy:function(n,t,r,u){var f=ii(n.element(),"."+t.itemClass()),e=pk(i.map(f,function(t){return n.getSystem().getByDom(t).toOption()}));i.find(e,u).each(function(i){re(n,t,r,i)})},isHighlighted:ta,getHighlighted:function(n,t){return hr(n.element(),"."+t.highlightClass()).bind(n.getSystem().getByDom)},getFirst:dd,getLast:gd,getPrevious:function(n,t){return ng(n,t,0,-1)},getNext:function(n,t){return ng(n,t,0,1)}}),eat=[u("highlightClass"),u("itemClass"),gt("onHighlight"),gt("onDehighlight")],at=ni({fields:eat,name:"highlighting",apis:fat}),ia=function(){return{get:function(n){return po(n.element())},set:function(n,t){n.getSystem().triggerFocus(t,n.element())}}},fu=function(n,t,u,f,e,o){var h=function(n,t,r,f){var e,o,s=u(n,t,r,f);return(e=s,o=t.event(),i.find(e,function(n){return n.matches(o)}).map(function(n){return n.classification})).bind(function(i){return i(n,t,r,f)})},c={schema:function(){return n.concat([r("focusManager",ia()),lt("handler",c),lt("state",t)])},processKey:h,toEvents:function(n,t){var i=f(n,t),r=ut(o.map(function(i){return p(br(),function(r,u){i(r,n,t,u);u.stop()})}).toArray().concat([p(lot(),function(i,r){h(i,r,n,t).each(function(){r.stop()})})]));return s.deepMerge(i,r)},toApis:e};return c},tg=function(u){var o=[nt("onEscape"),nt("onEnter"),r("selector",'[data-alloy-tabstop="true"]'),r("firstTabstop",0),r("useTabstopAt",n.constant(!0)),nt("visibilitySelector")].concat([u]),f=function(n,t){var i=n.visibilitySelector().bind(function(n){return cr(t,n)}).getOr(t);return 0<li(i)},s=function(n,i,r,u,e){return e(i,r,function(n){return f(t=u,i=n)&&t.useTabstopAt()(i);var t,i}).fold(function(){return u.cyclic()?t.some(!0):t.none()},function(i){return u.focusManager().set(n,i),t.some(!0)})},e=function(t,r,u,f){var o,e,h=ii(t.element(),u.selector());return(o=t,e=u,e.focusManager().get(o).bind(function(n){return cr(n,e.selector())})).bind(function(r){return i.findIndex(h,n.curry(ht,r)).bind(function(n){return s(t,h,n,u,f)})})},h=n.constant([y(ai([tf,v(c.TAB())]),function(n,t,i){var r=i.cyclic()?nat:tat;return e(n,0,i,r)}),y(v(c.TAB()),function(n,t,i){var r=i.cyclic()?iat:rat;return e(n,0,i,r)}),y(v(c.ESCAPE()),function(n,t,i){return i.onEscape().bind(function(i){return i(n,t)})}),y(ai([te,v(c.ENTER())]),function(n,t,i){return i.onEnter().bind(function(i){return i(n,t)})})]),l=n.constant({}),a=n.constant({});return fu(o,er,h,l,a,t.some(function(n,r){var e,u,o,s;(e=n,u=r,o=ii(e.element(),u.selector()),s=i.filter(o,function(n){return f(u,n)}),t.from(s[u.firstTabstop()])).each(function(t){r.focusManager().set(n,t)})}))},oat=tg(si("cyclic",n.constant(!1))),sat=tg(si("cyclic",n.constant(!0))),ue=function(n){return"input"===st.name(n)&&"radio"!==f.get(n,"type")||"textarea"===st.name(n)},fe=function(n,i,r){return ue(r)&&v(c.SPACE())(i.event())?t.none():(uc(n,r,cf()),t.some(!0))},hat=[r("execute",fe),r("useSpace",!1),r("useEnter",!0),r("useControlEnter",!1),r("useDown",!1)],ig=function(n,t,i){return i.execute()(n,t,n.element())},cat=n.constant({}),lat=n.constant({}),aat=fu(hat,er,function(n,t,i){var r=i.useSpace()&&!ue(n.element())?c.SPACE():[],u=i.useEnter()?c.ENTER():[],f=i.useDown()?c.DOWN():[],e=r.concat(u).concat(f);return[y(v(e),ig)].concat(i.useControlEnter()?[y(ai([bd,v(c.ENTER())]),ig)]:[])},cat,lat,t.none()),rg=function(){var i=tt(t.none());return du({readState:n.constant({}),setGridSize:function(r,u){i.set(t.some({numRows:n.constant(r),numColumns:n.constant(u)}))},getNumRows:function(){return i.get().map(function(n){return n.numRows()})},getNumColumns:function(){return i.get().map(function(n){return n.numColumns()})}})},vat=Object.freeze({flatgrid:rg,init:function(n){return n.state()(n)}}),yat=function(n){return"rtl"===h.get(n,"direction")?"rtl":"ltr"},ug=function(n,t){return function(i){return"rtl"===yat(i)?t:n}},fg=function(n){return function(t,i,r,u){var f=n(t.element());return eg(f,t,i,r,u)}},ra=function(n,t){var i=ug(n,t);return fg(i)},ua=function(n,t){var i=ug(t,n);return fg(i)},fa=function(n){return function(t,i,r,u){return eg(n,t,i,r,u)}},eg=function(n,t,i,r,u){return r.focusManager().get(t).bind(function(i){return n(t.element(),i,r,u)}).map(function(n){return r.focusManager().set(t,n),!0})},og=fa,sg=fa,go=fa,hg=function(n){var t,i=n.dom();return!((t=i).offsetWidth<=0&&t.offsetHeight<=0)},pat=rr.immutableBag(["index","candidates"],[]),cg=function(n,t,i){return wat(n,t,i,hg)},wat=function(t,r,u){var f,e,o=n.curry(ht,r),s=ii(t,u),h=i.filter(s,hg);return f=h,e=o,i.findIndex(f,e).map(function(n){return pat({index:n,candidates:f})})},lg=function(n,t){return i.findIndex(n,function(n){return ht(t,n)})},ag=function(n,i,r,u){return u(Math.floor(i/r),i%r).bind(function(i){var u=i.row()*r+i.column();return 0<=u&&u<n.length?t.some(n[u]):t.none()})},vg=function(i,r,u,f,e){return ag(i,r,f,function(r,o){var s=r===u-1?i.length-r*f:f,h=rf(o,e,0,s-1);return t.some({row:n.constant(r),column:n.constant(h)})})},yg=function(i,r,u,f,e){return ag(i,r,f,function(r,o){var s=rf(r,e,0,u-1),h=s===u-1?i.length-s*f:f,c=ie(o,0,h-1);return t.some({row:n.constant(s),column:n.constant(c)})})},bat=[u("selector"),r("execute",fe),ci("onEscape"),r("captureTab",!1),gk()],ns=function(n){return function(t,i,r,u){return cg(t,i,r.selector()).bind(function(t){return n(t.candidates(),t.index(),u.getNumRows().getOr(r.initSize().numRows()),u.getNumColumns().getOr(r.initSize().numColumns()))})}},pg=function(n,i,r){return r.captureTab()?t.some(!0):t.none()},wg=ns(function(n,t,i,r){return vg(n,t,i,r,-1)}),bg=ns(function(n,t,i,r){return vg(n,t,i,r,1)}),kat=ns(function(n,t,i,r){return yg(n,t,i,r,-1)}),dat=ns(function(n,t,i,r){return yg(n,t,i,r,1)}),gat=n.constant([y(v(c.LEFT()),ra(wg,bg)),y(v(c.RIGHT()),ua(wg,bg)),y(v(c.UP()),og(kat)),y(v(c.DOWN()),sg(dat)),y(ai([tf,v(c.TAB())]),pg),y(ai([te,v(c.TAB())]),pg),y(v(c.ESCAPE()),function(n,t,i){return i.onEscape()(n,t)}),y(v(c.SPACE().concat(c.ENTER())),function(n,t,i){return(u=n,r=i,r.focusManager().get(u).bind(function(n){return cr(n,r.selector())})).bind(function(r){return i.execute()(n,t,r)});var u,r})]),nvt=n.constant({}),tvt=fu(bat,rg,gat,nvt,{},t.some(function(n,t){hr(n.element(),t.selector()).each(function(i){t.focusManager().set(n,i)})})),ts=function(n,i,r,u){return cg(n,r,i).bind(function(n){var r=n.index(),i=n.candidates(),f=rf(r,u,0,i.length-1);return t.from(i[f])})},ivt=[u("selector"),r("getInitial",t.none),r("execute",fe),r("executeOnMove",!1)],ea=function(n,t,i){return(u=n,r=i,r.focusManager().get(u).bind(function(n){return cr(n,r.selector())})).bind(function(r){return i.execute()(n,t,r)});var u,r},kg=function(n,t,i){return ts(n,i.selector(),t,-1)},dg=function(n,t,i){return ts(n,i.selector(),t,1)},gg=function(n){return function(i,r,u){return n(i,r,u).bind(function(){return u.executeOnMove()?ea(i,r,u):t.some(!0)})}},rvt=n.constant({}),uvt=n.constant({}),fvt=fu(ivt,er,function(){return[y(v(c.LEFT().concat(c.UP())),gg(ra(kg,dg))),y(v(c.RIGHT().concat(c.DOWN())),gg(ua(kg,dg))),y(v(c.ENTER()),ea),y(v(c.SPACE()),ea)]},rvt,uvt,t.some(function(n,t){t.getInitial()(n).or(hr(n.element(),t.selector())).each(function(i){t.focusManager().set(n,i)})})),evt=rr.immutableBag(["rowIndex","columnIndex","cell"],[]),is=function(n,i,r){return t.from(n[i]).bind(function(n){return t.from(n[r]).map(function(n){return evt({rowIndex:i,columnIndex:r,cell:n})})})},nn=function(n,t,i,r){var u=n[t].length,f=rf(i,r,0,u-1);return is(n,t,f)},tn=function(n,t,i,r){var u=rf(i,r,0,n.length-1),f=n[u].length,e=ie(t,0,f-1);return is(n,u,e)},rn=function(n,t,i,r){var u=n[t].length,f=ie(i+r,0,u-1);return is(n,t,f)},un=function(n,t,i,r){var u=ie(i+r,0,n.length-1),f=n[u].length,e=ie(t,0,f-1);return is(n,u,e)},ovt=[fr("selectors",[u("row"),u("cell")]),r("cycles",!0),r("previousSelector",t.none),r("execute",fe)],rs=function(n,t){return function(r,u,f){var e=f.cycles()?n:t;return cr(u,f.selectors().row()).bind(function(n){var t=ii(n,f.selectors().cell());return lg(t,u).bind(function(t){var u=ii(r,f.selectors().row());return lg(u,n).bind(function(n){var r,o,s=(r=u,o=f,i.map(r,function(n){return ii(n,o.selectors().cell())}));return e(s,n,t).map(function(n){return n.cell()})})})})}},fn=rs(function(n,t,i){return nn(n,t,i,-1)},function(n,t,i){return rn(n,t,i,-1)}),en=rs(function(n,t,i){return nn(n,t,i,1)},function(n,t,i){return rn(n,t,i,1)}),svt=rs(function(n,t,i){return tn(n,i,t,-1)},function(n,t,i){return un(n,i,t,-1)}),hvt=rs(function(n,t,i){return tn(n,i,t,1)},function(n,t,i){return un(n,i,t,1)}),cvt=n.constant([y(v(c.LEFT()),ra(fn,en)),y(v(c.RIGHT()),ua(fn,en)),y(v(c.UP()),og(svt)),y(v(c.DOWN()),sg(hvt)),y(v(c.SPACE().concat(c.ENTER())),function(n,t,i){return po(n.element()).bind(function(r){return i.execute()(n,t,r)})})]),lvt=n.constant({}),avt=n.constant({}),vvt=fu(ovt,er,cvt,lvt,avt,t.some(function(n,t){t.previousSelector()(n).orThunk(function(){var i=t.selectors();return hr(n.element(),i.cell())}).each(function(i){t.focusManager().set(n,i)})})),yvt=[u("selector"),r("execute",fe),r("moveOnTab",!1)],on=function(n,t,i){return i.focusManager().get(n).bind(function(r){return i.execute()(n,t,r)})},sn=function(n,t,i){return ts(n,i.selector(),t,-1)},hn=function(n,t,i){return ts(n,i.selector(),t,1)},pvt=n.constant([y(v(c.UP()),go(sn)),y(v(c.DOWN()),go(hn)),y(ai([tf,v(c.TAB())]),function(n,i,r){return r.moveOnTab()?go(sn)(n,i,r):t.none()}),y(ai([te,v(c.TAB())]),function(n,i,r){return r.moveOnTab()?go(hn)(n,i,r):t.none()}),y(v(c.ENTER()),on),y(v(c.SPACE()),on)]),wvt=n.constant({}),bvt=n.constant({}),kvt=fu(yvt,er,pvt,wvt,bvt,t.some(function(n,t){hr(n.element(),t.selector()).each(function(i){t.focusManager().set(n,i)})})),dvt=[ci("onSpace"),ci("onEnter"),ci("onShiftEnter"),ci("onLeft"),ci("onRight"),ci("onTab"),ci("onShiftTab"),ci("onUp"),ci("onDown"),ci("onEscape"),nt("focusIn")],gvt=n.constant({}),nyt=n.constant({}),tyt=fu(dvt,er,function(n,t,i){return[y(v(c.SPACE()),i.onSpace()),y(ai([te,v(c.ENTER())]),i.onEnter()),y(ai([tf,v(c.ENTER())]),i.onShiftEnter()),y(ai([tf,v(c.TAB())]),i.onShiftTab()),y(ai([te,v(c.TAB())]),i.onTab()),y(v(c.UP()),i.onUp()),y(v(c.DOWN()),i.onDown()),y(v(c.LEFT()),i.onLeft()),y(v(c.RIGHT()),i.onRight()),y(v(c.SPACE()),i.onSpace()),y(v(c.ESCAPE()),i.onEscape())]},gvt,nyt,t.some(function(n,t){return t.focusIn().bind(function(i){return i(n,t)})})),iyt={acyclic:oat.schema(),cyclic:sat.schema(),flow:fvt.schema(),flatgrid:tvt.schema(),matrix:vvt.schema(),execution:aat.schema(),menu:kvt.schema(),special:tyt.schema()},ct=(sr=oi("Creating behaviour: "+(vd={branchKey:"mode",branches:iyt,name:"keying",active:{events:function(n,t){return n.handler().toEvents(n,t)}},apis:{focusIn:function(n){n.getSystem().triggerFocus(n.element(),n.element())},setGridSize:function(n,t,i,r,u){vt(i,"setGridSize")?i.setGridSize(r,u):console.error("Layout does not support setGridSize")}},state:vat}).name,tct,vd),kht(bu(sr.branchKey,sr.branches),sr.name,sr.active,sr.apis,sr.extra,sr.state)),pi=function(t,r){return u=t,f={},e=i.map(r,function(n){return i=n.name(),r="Cannot configure "+n.name()+" for "+t,bt(i,i,yu(),pu(function(){return b.error("The field: "+i+" is forbidden. "+r)}));var i,r}).concat([si("dump",n.identity)]),bt(u,u,wf(f),kt(e));var u,f,e},wi=function(n){return n.dump()},cn="placeholder",us=ui([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),ryt=function(t,i,r,u){return r.uiType===cn?(f=r,e=u,(o=t).exists(function(n){return n!==f.owner})?us.single(!0,n.constant(f)):it(e,f.name).fold(function(){throw new Error("Unknown placeholder component: "+f.name+"\nKnown: ["+l.keys(e)+"]\nNamespace: "+o.getOr("none")+"\nSpec: "+ei(f,null,2));},function(n){return n.replace()})):us.single(!1,n.constant(r));var o,f,e},ln=function(n,t,r,u){return ryt(n,0,r,u).fold(function(f,e){var o=e(t,r.config,r.validated),h=it(o,"components").getOr([]),c=i.bind(h,function(i){return ln(n,t,i,u)});return[s.deepMerge(o,{components:c})]},function(n,i){return i(t,r.config,r.validated)})},uyt=function(t,r,u,f){var e,o,s,h,c=l.map(f,function(t,i){return u=i,f=t,r=!1,{name:n.constant(u),required:function(){return f.fold(function(n){return n},function(n){return n})},used:function(){return r},replace:function(){if(!0===r)throw new Error("Trying to use the same placeholder more than once: "+u);return r=!0,f}};var u,f,r}),a=(e=t,o=r,s=u,h=c,i.bind(s,function(n){return ln(e,o,n,h)}));return l.each(c,function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+ei(r.components(),null,2));}),a},an=us.single,fyt=us.multiple,vn=n.constant(cn),eyt=0,lr=function(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++eyt+String(t)},fs=ui([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),es=r("factory",{sketch:n.identity}),os=r("schema",[]),ss=u("name"),oa=bt("pname","pname",rht(function(n){return"<alloy."+lr(n.name)+">"}),lo()),hs=r("defaults",n.constant({})),cs=r("overrides",n.constant({})),oyt=kt([es,os,ss,oa,hs,cs]),syt=kt([es,os,ss,hs,cs]),hyt=kt([es,os,ss,oa,hs,cs]),cyt=kt([es,os,ss,u("unit"),oa,hs,cs]),lyt=function(n){var t=function(n){return n.name()};return n.fold(t,t,t,t)},ls=function(n,t){return function(i){var r=wu("Converting part type",t,i);return n(r)}},as=ls(fs.required,oyt),yn=(ls(fs.external,syt),ls(fs.optional,hyt)),pn=ls(fs.group,cyt),wn=n.constant("entirety"),sa=function(n,t,i,r){var u=i;return s.deepMerge(t.defaults()(n,i,r),i,{uid:n.partUids()[t.name()]},t.overrides()(n,i,r),{"debug.sketcher":g("part-"+t.name(),u)})},ayt=function(n,r){var u={};return i.each(r,function(i){var r;(r=i,r.fold(t.some,t.none,t.some,t.some)).each(function(t){var i=vyt(n,t.pname());u[t.name()]=function(r){var u=oi("Part: "+t.name()+" in "+n,kt(t.schema()),r);return s.deepMerge(i,{config:r,validated:u})}})}),u},vyt=function(n,t){return{uiType:vn(),owner:n,name:t}},bn=function(t,r,u){return e=r,h=u,f={},o={},i.each(h,function(t){t.fold(function(n){f[n.pname()]=an(!0,function(t,i,r){return n.factory().sketch(sa(t,n,i,r))})},function(t){var i=e.parts()[t.name()]();o[t.name()]=n.constant(sa(e,t,i[wn()]()))},function(n){f[n.pname()]=an(!1,function(t,i,r){return n.factory().sketch(sa(t,n,i,r))})},function(n){f[n.pname()]=fyt(!0,function(t){var r=t[n.name()]();return i.map(r,function(i){return n.factory().sketch(s.deepMerge(n.defaults()(t,i),i,n.overrides()(t,i)))})})})}),{internals:n.constant(f),externals:n.constant(o)};var e,h,f,o},kn=function(n,i,r){return uyt(t.some(n),i,i.components(),r)},ar=function(n,t,i){var r=t.partUids()[i];return n.getSystem().getByUid(r).toOption()},dn=function(n,t,i){return ar(n,t,i).getOrDie("Could not find part: "+i)},yyt=function(n,t){var r,u=(r=t,i.map(r,lyt));return fi(i.map(u,function(t){return{key:t,value:n+"-"+t}}))},gn=function(n){return bt("partUids","partUids",uht(function(t){return yyt(t.uid,n)}),lo())},ntt=lr("alloy-premade"),ttt=lr("api"),itt=function(n){return g(ntt,n)},ha=function(n){return i=function(t){var i=Array.prototype.slice.call(arguments,0),r=t.config(ttt);return n.apply(undefined,[r].concat(i))},t=n.toString(),r=t.indexOf(")")+1,u=t.indexOf("("),f=t.substring(u+1,r-1).split(/,\s*/),i.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:el(f.slice(1))}},i;var i,t,r,u,f},pyt=n.constant(ttt),wyt=n.constant("alloy-id-"),rtt=n.constant("data-alloy-id"),byt=wyt(),vs=rtt(),ee=function(n){var i=st.isElement(n)?f.get(n,vs):null;return t.from(i)},ys=function(n){return lr(n)},utt=(n.constant(vs),function(n,t,i,f,e){var o,s,h=(s=e,(0<(o=f).length?[fr("parts",o)]:[]).concat([u("uid"),r("dom",{}),r("components",[]),bl("originalSpec"),r("debug.sketcher",{})]).concat(s));return wu(n+" [SpecSchema]",wt(h.concat(t)),i)}),ftt=function(n,r,u,f,e){var h,c=ett(e),a=(h=u,i.bind(h,function(n){return n.fold(t.none,t.some,t.none,t.none).map(function(n){return fr(n.name(),n.schema().concat([bl(wn())]))}).toArray()})),v=gn(u),o=utt(n,r,c,a,[v]),l=bn(0,o,u),y=kn(n,o,l.internals());return s.deepMerge(f(o,y,c,l.externals()),{"debug.sketcher":g(n,e)})},ett=function(n){return s.deepMerge({uid:ys("uid")},n)},kyt=wt([u("name"),u("factory"),u("configFields"),r("apis",{}),r("extraApis",{})]),dyt=wt([u("name"),u("factory"),u("configFields"),u("partFields"),r("apis",{}),r("extraApis",{})]),oe=function(t){var i=oi("Sketcher for "+t.name,kyt,t),r=l.map(i.apis,ha),u=l.map(i.extraApis,function(n,t){return ol(n,t)});return s.deepMerge({name:n.constant(i.name),partFields:n.constant([]),configFields:n.constant(i.configFields),sketch:function(n){return t=i.name,u=i.configFields,f=i.factory,r=ett(e=n),o=utt(t,u,r,[],[]),s.deepMerge(f(o,r),{"debug.sketcher":g(t,e)});var t,u,f,e,r,o}},r,u)},ps=function(t){var i=oi("Sketcher for "+t.name,dyt,t),r=ayt(i.name,i.partFields),u=l.map(i.apis,ha),f=l.map(i.extraApis,function(n,t){return ol(n,t)});return s.deepMerge({name:n.constant(i.name),partFields:n.constant(i.partFields),configFields:n.constant(i.configFields),sketch:function(n){return ftt(i.name,i.configFields,i.partFields,i.factory,n)},parts:n.constant(r)},u,f)},eu=oe({name:"Button",factory:function(n){var r,t,u,f=(r=n.action(),t=function(n,t){t.stop();rc(n)},u=dt.detect().deviceType.isTouch()?[p(dp(),t)]:[p(wh(),t),p(hf(),function(n,t){t.cut()})],ut(i.flatten([r.map(function(n){return p(cf(),function(t,i){n(t);i.stop()})}).toArray(),u]))),e=it(n.dom(),"attributes").bind(co("type")),o=it(n.dom(),"tag");return{uid:n.uid(),dom:n.dom(),components:n.components(),events:f,behaviours:s.deepMerge(w([ti.config({}),ct.config({mode:"execution",useSpace:!0,useEnter:!0})]),wi(n.buttonBehaviours())),domModification:{attributes:s.deepMerge(e.fold(function(){return o.is("button")?{type:"button"}:{}},function(){return{}}),{role:n.role().getOr("button")})},eventOrder:n.eventOrder()}},configFields:[r("uid",undefined),u("dom"),r("components",[]),pi("buttonBehaviours",[ti,ct]),nt("action"),nt("role"),r("eventOrder",{})]}),gyt=Object.freeze({events:function(){return ut([lb(vot(),n.constant(!0))])},exhibit:function(){return hi({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),npt=ni({fields:[],name:"unselecting",active:gyt}),tpt=function(n){var r,u,f,t=e.fromHtml(n),o=k.children(t),h=(u=(r=t).dom().attributes!==undefined?r.dom().attributes:[],i.foldl(u,function(n,t){return"class"===t.name?n:s.deepMerge(n,g(t.name,t.value))},{})),c=(f=t,Array.prototype.slice.call(f.dom().classList,0)),l=0===o.length?{}:{innerHtml:kct(t)};return s.deepMerge({tag:st.name(t),classes:c,attributes:h},l)},et=function(n){var t=pt.supplant(n,{prefix:o.prefix()});return tpt(t)},ou=function(n){return{dom:et(n)}},ott=function(n){return w([d.config({toggleClass:o.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),ed(n,function(n,t){(t?d.on:d.off)(n)})])},ws=function(n,t,i){return eu.sketch({dom:et('<span class="${prefix}-toolbar-button ${prefix}-icon-'+n+' ${prefix}-icon"><\/span>'),action:t,buttonBehaviours:s.deepMerge(w([npt.config({})]),i)})},vr={forToolbar:ws,forToolbarCommand:function(n,t){return ws(t,function(){n.execCommand(t)},{})},forToolbarStateAction:function(n,t,i,r){var u=ott(i);return ws(t,r,u)},forToolbarStateCommand:function(n,t){var i=ott(t);return ws(t,function(){n.execCommand(t)},i)}},stt=function(n,t,i){return Math.max(t,Math.min(i,n))},ipt=function(n,t,i,r,u,f,e){var a=i-t;if(r<n.left)return t-1;if(r>n.right)return i+1;var s,h,l,o,v=Math.min(n.right,Math.max(r,n.left))-n.left,c=stt(v/n.width*a+t,t-1,i+1),y=Math.round(c);return f&&t<=c&&c<=i?(s=c,h=t,l=i,o=u,e.fold(function(){var n=s-h,t=Math.round(n/o)*o;return stt(h+t,h-1,l+1)},function(n){var t=(s-n)%o,i=Math.round(t/o),r=Math.floor((s-n)/o),u=Math.floor((l-n)/o),f=n+Math.min(u,r+i)*o;return Math.max(n,f)})):y},htt="slider.change.value",ca=dt.detect().deviceType.isTouch(),rpt=function(n){var i;return(i=n.event().raw(),ca&&i.touches!==undefined&&1===i.touches.length?t.some(i.touches[0]):ca&&i.touches!==undefined?t.none():ca||i.clientX===undefined?t.none():t.some(i)).map(function(n){return n.clientX})},se=function(n,t){af(n,htt,{value:t})},upt=function(n,t,i,r){return rpt(r).map(function(r){var f,u,e,o;return f=n,e=r,o=ipt(i,(u=t).min(),u.max(),e,u.stepSize(),u.snapToGrid(),u.snapStart()),se(f,o),r})},fpt=function(n,t){var i,r,u,f,e=(i=t.value().get(),r=t.min(),u=t.max(),f=t.stepSize(),i<r?i:u<i?u:i===r?r-1:Math.max(r,i-f));se(n,e)},ept=function(n,t){var i,u,r,f,e=(i=t.value().get(),u=t.min(),r=t.max(),f=t.stepSize(),r<i?i:i<u?u:i===r?r+1:Math.min(r,i+f));se(n,e)},opt=n.constant(htt),la=dt.detect().deviceType.isTouch(),ctt=function(n,t){return yn({name:n+"-edge",overrides:function(n){var i=ut([rl(lu(),t,[n])]),r=ut([rl(hf(),t,[n]),rl(vy(),function(n,i){i.mouseIsDown().get()&&t(n,i)},[n])]);return{events:la?i:r}}})},spt=[ctt("left",function(n,t){se(n,t.min()-1)}),ctt("right",function(n,t){se(n,t.max()+1)}),as({name:"thumb",defaults:n.constant({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:ut([fl(lu(),n,"spectrum"),fl(ro(),n,"spectrum"),fl(uo(),n,"spectrum")])}}}),as({schema:[si("mouseIsDown",function(){return tt(!1)})],name:"spectrum",overrides:function(n){var i=function(t,i){var r=t.element().dom().getBoundingClientRect();upt(t,n,r,i)},r=ut([p(lu(),i),p(ro(),i)]),u=ut([p(hf(),i),p(vy(),function(t,r){n.mouseIsDown().get()&&i(t,r)})]);return{behaviours:w(la?[]:[ct.config({mode:"special",onLeft:function(i){return fpt(i,n),t.some(!0)},onRight:function(i){return ept(i,n),t.some(!0)}}),ti.config({})]),events:la?r:u}}})],aa=function(n,t,i){t.store().manager().onLoad(n,t,i)},ltt=function(n,t,i){t.store().manager().onUnload(n,t,i)},hpt=Object.freeze({onLoad:aa,onUnload:ltt,setValue:function(n,t,i,r){t.store().manager().setValue(n,t,i,r)},getValue:function(n,t,i){return t.store().manager().getValue(n,t,i)}}),cpt=Object.freeze({events:function(n,t){var i=n.resetOnDom()?[nu(function(i){aa(i,n,t)}),vb(function(i){ltt(i,n,t)})]:[hl(n,t,aa)];return ut(i)}}),att=function(){var n=tt(null);return du({set:n.set,get:n.get,isNotSet:function(){return null===n.get()},clear:function(){n.set(null)},readState:function(){return{mode:"memory",value:n.get()}}})},vtt=function(){var n=tt({});return du({readState:function(){return{mode:"dataset",dataset:n.get()}},set:n.set,get:n.get})},lpt=Object.freeze({memory:att,dataset:vtt,manual:function(){return du({readState:function(){}})},init:function(n){return n.store().manager().state(n)}}),ytt=function(n,t,i,r){t.store().getDataKey();i.set({});t.store().setData()(n,r);t.onSetValue()(n,r)},apt=[nt("initialValue"),u("getFallbackEntry"),u("getDataKey"),u("setData"),lt("manager",{setValue:ytt,getValue:function(n,t,i){var r=t.store().getDataKey()(n),u=i.get();return it(u,r).fold(function(){return t.store().getFallbackEntry()(r)},function(n){return n})},onLoad:function(n,t,i){t.store().initialValue().each(function(r){ytt(n,t,i,r)})},onUnload:function(n,t,i){i.set({})},state:vtt})],vpt=[u("getValue"),r("setValue",n.noop),nt("initialValue"),lt("manager",{setValue:function(n,t,i,r){t.store().setValue()(n,r);t.onSetValue()(n,r)},getValue:function(n,t){return t.store().getValue()(n)},onLoad:function(n,t){t.store().initialValue().each(function(i){t.store().setValue()(n,i)})},onUnload:n.noop,state:er})],ypt=[nt("initialValue"),lt("manager",{setValue:function(n,t,i,r){i.set(r);t.onSetValue()(n,r)},getValue:function(n,t,i){return i.get()},onLoad:function(n,t,i){t.store().initialValue().each(function(n){i.isNotSet()&&i.set(n)})},onUnload:function(n,t,i){i.clear()},state:att})],ppt=[il("store",{mode:"memory"},bu("mode",{memory:ypt,manual:vpt,dataset:apt})),gt("onSetValue"),r("resetOnDom",!1)],ot=ni({fields:ppt,name:"representing",active:cpt,apis:hpt,extra:{setValueFrom:function(n,t){var i=ot.getValue(t);ot.setValue(n,i)}},state:lpt}),wpt=dt.detect().deviceType.isTouch(),bpt=[u("min"),u("max"),r("stepSize",1),r("onChange",n.noop),r("onInit",n.noop),r("onDragStart",n.noop),r("onDragEnd",n.noop),r("snapToGrid",!1),nt("snapStart"),u("getInitialValue"),pi("sliderBehaviours",[ct,ot]),si("value",function(n){return tt(n.min)})].concat(wpt?[]:[si("mouseIsDown",function(){return tt(!1)})]),ptt=ad("width",function(n){return n.dom().offsetWidth}),wtt=function(n,t){ptt.set(n,t)},he=function(n){return ptt.get(n)},btt=dt.detect().deviceType.isTouch(),bi=ps({name:"Slider",configFields:bpt,partFields:spt,factory:function(r,u){var l=r.max()-r.min(),c=function(n){var t=n.element().dom().getBoundingClientRect();return(t.left+t.right)/2},f=function(n){return dn(n,r,"thumb")},a=function(n){var u,i,t,f,e=dn(n,r,"spectrum").element().dom().getBoundingClientRect(),o=n.element().dom().getBoundingClientRect(),s=(u=n,i=e,(f=(t=r).value().get())<t.min()?ar(u,t,"left-edge").fold(function(){return 0},function(n){return c(n)-i.left}):f>t.max()?ar(u,t,"right-edge").fold(function(){return i.width},function(n){return c(n)-i.left}):(t.value().get()-t.min())/l*i.width);return e.left-o.left+s},e=function(n){var i=a(n),t=f(n),r=he(t.element())/2;h.set(t.element(),"left",i-r+"px")},o=function(n,i){var o=r.value().get(),u=f(n);return o!==i||h.getRaw(u.element(),"left").isNone()?(r.value().set(i),e(n),r.onChange()(n,u,i),t.some(!0)):t.none()},v=btt?[p(lu(),function(n){r.onDragStart()(n,f(n))}),p(uo(),function(n){r.onDragEnd()(n,f(n))})]:[p(hf(),function(n,t){t.stop();r.onDragStart()(n,f(n));r.mouseIsDown().set(!0)}),p(cot(),function(n){r.onDragEnd()(n,f(n));r.mouseIsDown().set(!1)})];return{uid:r.uid(),dom:r.dom(),components:u,behaviours:s.deepMerge(w(i.flatten([btt?[]:[ct.config({mode:"special",focusIn:function(t){return ar(t,r,"spectrum").map(ct.focusIn).map(n.constant(!0))}})],[ot.config({store:{mode:"manual",getValue:function(){return r.value().get()}}})]])),wi(r.sliderBehaviours())),events:ut([p(opt(),function(n,t){o(n,t.event().value())}),nu(function(n){r.value().set(r.getInitialValue()());var t=f(n);e(n);r.onInit()(n,t,r.value().get())})].concat(v)),apis:{resetToMin:function(n){o(n,r.min())},resetToMax:function(n){o(n,r.max())},refresh:e},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}}),ktt=function(n,t,i){return vr.forToolbar(t,function(){var r=i();n.setContextToolbar([{label:t+" group",items:r}])},{})},kpt=function(n){return[(t=n,i=function(n){return n<0?"black":360<n?"white":"hsl("+n+", 100%, 50%)"},bi.sketch({dom:et('<div class="${prefix}-slider ${prefix}-hue-slider-container"><\/div>'),components:[bi.parts()["left-edge"](ou('<div class="${prefix}-hue-slider-black"><\/div>')),bi.parts().spectrum({dom:et('<div class="${prefix}-slider-gradient-container"><\/div>'),components:[ou('<div class="${prefix}-slider-gradient"><\/div>')],behaviours:w([d.config({toggleClass:o.resolve("thumb-active")})])}),bi.parts()["right-edge"](ou('<div class="${prefix}-hue-slider-white"><\/div>')),bi.parts().thumb({dom:et('<div class="${prefix}-slider-thumb"><\/div>'),behaviours:w([d.config({toggleClass:o.resolve("thumb-active")})])})],onChange:function(n,r,u){var f=i(u);h.set(r.element(),"background-color",f);t.onChange(n,r,f)},onDragStart:function(n,t){d.on(t)},onDragEnd:function(n,t){d.off(t)},onInit:function(n,t,r){var u=i(r);h.set(t.element(),"background-color",u)},stepSize:10,min:0,max:360,getInitialValue:t.getInitialValue,sliderBehaviours:w([bo(bi.refresh)])}))];var t,i},dpt=function(n,t){var i={onChange:function(n,i,r){t.undoManager.transact(function(){t.formatter.apply("forecolor",{value:r});t.nodeChanged()})},getInitialValue:function(){return-1}};return ktt(n,"color",function(){return kpt(i)})},gpt=wt([u("getInitialValue"),u("onChange"),u("category"),u("sizes")]),nwt=function(n){var t=oi("SizeSlider",gpt,n);return bi.sketch({dom:{tag:"div",classes:[o.resolve("slider-"+t.category+"-size-container"),o.resolve("slider"),o.resolve("slider-size-container")]},onChange:function(n,i,r){var u;0<=(u=r)&&u<t.sizes.length&&t.onChange(r)},onDragStart:function(n,t){d.on(t)},onDragEnd:function(n,t){d.off(t)},min:0,max:t.sizes.length-1,stepSize:1,getInitialValue:t.getInitialValue,snapToGrid:!0,sliderBehaviours:w([bo(bi.refresh)]),components:[bi.parts().spectrum({dom:et('<div class="${prefix}-slider-size-container"><\/div>'),components:[ou('<div class="${prefix}-slider-size-line"><\/div>')]}),bi.parts().thumb({dom:et('<div class="${prefix}-slider-thumb"><\/div>'),behaviours:w([d.config({toggleClass:o.resolve("thumb-active")})])})]})},twt=function(i,r,u){for(var o,s,f=i.dom(),h=rt.isFunction(u)?u:n.constant(!1);f.parentNode;){if(f=f.parentNode,o=e.fromDom(f),s=r(o),s.isSome())return s;if(h(o))break}return t.none()},iwt=function(n,i,r){return i(n).orThunk(function(){return r(n)?t.none():twt(n,i,r)})},bs=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],dtt=function(n){var u,r,f=n.selection.getStart(),o=e.fromDom(f),s=e.fromDom(n.getBody()),c=(u=function(n){return ht(s,n)},r=o,(st.isElement(r)?t.some(r):k.parent(r)).map(function(n){return iwt(n,function(n){return h.getRaw(n,"font-size")},u).getOrThunk(function(){return h.get(n,"font-size")})}).getOr(""));return i.find(bs,function(n){return c===n}).getOr("medium")},va={candidates:n.constant(bs),get:function(n){var t,r=dtt(n);return(t=r,i.findIndex(bs,function(n){return n===t})).getOr(2)},apply:function(n,i){var r;(r=i,t.from(bs[r])).each(function(t){var r,i;i=t;dtt(r=n)!==i&&r.execCommand("fontSize",!1,i)})}},rwt=va.candidates(),uwt=function(n){return[ou('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"><\/span>'),(t=n,nwt({onChange:t.onChange,sizes:rwt,category:"font",getInitialValue:t.getInitialValue})),ou('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"><\/span>')];var t},su=function(n){var i=n.uid!==undefined&&vt(n,"uid")?n.uid:ys("memento");return{get:function(n){return n.getSystem().getByUid(i).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(i).fold(t.none,t.some)},asSpec:function(){return s.deepMerge(n,{uid:i})}}},iit={create:gtt,clone:function(n){var t;return nit(t=gtt(n.width,n.height)).drawImage(n,0,0),t},resize:tit,get2dContext:nit,get3dContext:function(n){var t=null;try{t=n.getContext("webgl")||n.getContext("experimental-webgl")}catch(i){}return t||(t=null),t}},rit={getWidth:function(n){return n.naturalWidth||n.width},getHeight:function(n){return n.naturalHeight||n.height}},uf=window.Promise?window.Promise:function(){function t(n,t){return function(){n.apply(t,arguments)}}function r(n){var t=this;null!==this._state?o(function(){var i=t._state?n.onFulfilled:n.onRejected,r;if(null!==i){try{r=i(t._value)}catch(u){return void n.reject(u)}n.resolve(r)}else(t._state?n.resolve:n.reject)(t._value)}):this._deferreds.push(n)}function u(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if("function"==typeof r)return void e(t(r,n),t(u,this),t(i,this))}this._state=!0;this._value=n;f.call(this)}catch(o){i.call(this,o)}}function i(n){this._state=!1;this._value=n;f.call(this)}function f(){for(var n=0,t=this._deferreds.length;n<t;n++)r.call(this,this._deferreds[n]);this._deferreds=null}function h(n,t,i,r){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.resolve=i;this.reject=r}function e(n,t,i){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,i(n))})}catch(u){if(r)return;r=!0;i(u)}}var n=function(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=null;this._value=null;this._deferreds=[];e(n,t(u,this),t(i,this))},o=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,1)},s=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};return n.prototype["catch"]=function(n){return this.then(null,n)},n.prototype.then=function(t,i){var u=this;return new n(function(n,f){r.call(u,new h(t,i,n,f))})},n.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new n(function(n,i){function f(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){f(r,n)},i)}t[r]=e;0==--u&&n(t)}catch(s){i(s)}}var u,r;if(0===t.length)return n([]);for(u=t.length,r=0;r<t.length;r++)f(r,t[r])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(n){n(t)})},n.reject=function(t){return new n(function(n,i){i(t)})},n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})},n}(),fwt={atob:function(n){return vu.getOrDie("atob")(n)},requestAnimationFrame:function(n){vu.getOrDie("requestAnimationFrame")(n)}},hit,cit,ks,ce,pa,wa,lit,ait,ewt={blobToImage:fit,imageToBlob:function(n){var t=n.src;return 0===t.indexOf("data:")?ya(t):eit(t)},blobToArrayBuffer:function(n){return new uf(function(t){var i=new uit;i.onloadend=function(){t(i.result)};i.readAsArrayBuffer(n)})},blobToDataUri:sit,blobToBase64:function(n){return sit(n).then(function(n){return n.split(",")[1]})},dataUriToBlobSync:oit,canvasToBlob:function(n,t,i){return t=t||"image/png",HTMLCanvasElement.prototype.toBlob?new uf(function(r){n.toBlob(function(n){r(n)},t,i)}):ya(n.toDataURL(t,i))},canvasToDataURL:function(n,t,i){return t=t||"image/png",n.then(function(n){return n.toDataURL(t,i)})},blobToCanvas:function(n){return fit(n).then(function(n){var i,t;return i=n,URL.revokeObjectURL(i.src),t=iit.create(rit.getWidth(n),rit.getHeight(n)),iit.get2dContext(t).drawImage(n,0,0),t})},uriToBlob:function(n){return 0===n.indexOf("blob:")?eit(n):0===n.indexOf("data:")?ya(n):null}},owt=function(n){return ewt.blobToBase64(n)},swt=function(n){var i=su({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:ut([ab(wh()),p(aot(),function(i,r){var f,u,e;(f=r,u=f.event(),e=u.raw().target.files||u.raw().dataTransfer.files,t.from(e[0])).each(function(t){var i,r;i=n;owt(r=t).then(function(n){i.undoManager.transact(function(){var t=i.editorUpload.blobCache,u=t.create(lr("mceu"),r,n),f;t.add(u);f=i.dom.createHTML("img",{src:u.blobUri()});i.insertContent(f)})})})})])});return eu.sketch({dom:et('<span class="${prefix}-toolbar-button ${prefix}-icon-image ${prefix}-icon"><\/span>'),components:[i.asSpec()],action:function(n){i.get(n).element().dom().click()}})},vit=function(n){return n.dom().textContent},hwt=function(n,t){n.dom().textContent=t},le=function(n){return 0<n.length},ds=function(n){return n===undefined||null===n?"":n},cwt=function(n,i,r){return r.text.filter(le).fold(function(){return f.get(r=n,"href")===vit(r)?t.some(i):t.none();var r},t.some)},yit=function(n){var t=e.fromDom(n.selection.getStart());return cr(t,"a")},ba={getInfo:function(n){return yit(n).fold(function(){return{url:"",text:n.selection.getContent({format:"text"}),title:"",target:"",link:t.none()}},function(n){return r=vit(i=n),u=f.get(i,"href"),e=f.get(i,"title"),o=f.get(i,"target"),{url:ds(u),text:r!==u?ds(r):"",title:ds(e),target:ds(o),link:t.some(i)};var i,r,u,e,o})},applyInfo:function(t,i){i.url.filter(le).fold(function(){var r;r=t;i.link.bind(n.identity).each(function(){r.execCommand("unlink")})},function(r){var e,u,o=(e=i,(u={}).href=r,e.title.filter(le).each(function(n){u.title=n}),e.target.filter(le).each(function(n){u.target=n}),u);i.link.bind(n.identity).fold(function(){var n=i.text.filter(le).getOr(r);t.insertContent(t.dom.createHTML("a",o,t.dom.encode(n)))},function(n){var t=cwt(n,r,i);f.setAll(n,o);t.each(function(t){hwt(n,t)})})})},query:yit},lwt=dt.detect(),awt=function(n,t){var i=t.selection.getRng();n();t.selection.setRng(i)},vwt=function(t,i){(lwt.os.isAndroid()?awt:n.apply)(i,t)},ae=function(t,i){var r,f;return{key:t,value:{config:{},me:(r=t,f=ut(i),ni({fields:[u("enabled")],name:r,active:{events:n.constant(f)}})),configAsRaw:n.constant({}),initialConfig:{},state:rct()}}},ywt=Object.freeze({getCurrent:function(n,t){return t.find()(n)}}),pwt=[u("find")],vi=ni({fields:pwt,name:"composing",apis:ywt}),yi=oe({name:"Container",factory:function(n){return{uid:n.uid(),dom:s.deepMerge({tag:"div",attributes:{role:"presentation"}},n.dom()),components:n.components(),behaviours:wi(n.containerBehaviours()),events:n.events(),domModification:n.domModification(),eventOrder:n.eventOrder()}},configFields:[r("components",[]),pi("containerBehaviours",[]),r("events",{}),r("domModification",{}),r("eventOrder",{})]}),wwt=oe({name:"DataField",factory:function(n){return{uid:n.uid(),dom:n.dom(),behaviours:s.deepMerge(w([ot.config({store:{mode:"memory",initialValue:n.getInitialValue()()}}),vi.config({find:t.some})]),wi(n.dataBehaviours())),events:ut([nu(function(t){ot.setValue(t,n.getInitialValue()())})])}},configFields:[u("uid"),u("dom"),u("getInitialValue"),pi("dataBehaviours",[ot,vi])]}),pit=function(n,t){if(t===undefined)throw new Error("Value.set was undefined");n.dom().value=t},ka=function(n){return n.dom().value},bwt=n.constant([nt("data"),r("inputAttributes",{}),r("inputStyles",{}),r("type","input"),r("tag","input"),r("inputClasses",[]),gt("onSetValue"),r("styles",{}),nt("placeholder"),r("eventOrder",{}),pi("inputBehaviours",[ot,ti]),r("selectOnFocus",!0)]),kwt=oe({name:"Input",configFields:bwt(),factory:function(t){return{uid:t.uid(),dom:(i=t,{tag:i.tag(),attributes:s.deepMerge(fi([{key:"type",value:i.type()}].concat(i.placeholder().map(function(n){return{key:"placeholder",value:n}}).toArray())),i.inputAttributes()),styles:i.inputStyles(),classes:i.inputClasses()}),components:[],behaviours:(r=t,s.deepMerge(w([ot.config({store:{mode:"manual",initialValue:r.data().getOr(undefined),getValue:function(n){return ka(n.element())},setValue:function(n,t){ka(n.element())!==t&&pit(n.element(),t)}},onSetValue:r.onSetValue()}),ti.config({onFocus:!1===r.selectOnFocus()?n.noop:function(n){var t=n.element(),i=ka(t);t.dom().setSelectionRange(0,i.length)}})]),wi(r.inputBehaviours()))),eventOrder:t.eventOrder()};var r,i}}),dwt=Object.freeze({exhibit:function(n,t){return hi({attributes:fi([{key:t.tabAttr(),value:"true"}])})}}),gwt=[r("tabAttr","data-alloy-tabstop")],nbt=ni({fields:gwt,name:"tabstopping",active:dwt}),gs=function(n,i){var r=su(kwt.sketch({placeholder:i,onSetValue:function(n){eo(n,py())},inputBehaviours:w([vi.config({find:t.some}),nbt.config({}),ct.config({mode:"execution"})]),selectOnFocus:!1})),u=su(eu.sketch({dom:et('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"><\/button>'),action:function(n){var t=r.get(n);ot.setValue(t,"")}}));return{name:n,spec:yi.sketch({dom:et('<div class="${prefix}-input-container"><\/div>'),components:[r.asSpec(),u.asSpec()],containerBehaviours:w([d.config({toggleClass:o.resolve("input-container-empty")}),vi.config({find:function(n){return t.some(r.get(n))}}),ae("input-clearing",[p(py(),function(n){var t=r.get(n);(0<ot.getValue(t).length?d.off:d.on)(n)})])])})}},tbt=["input","button","textarea"],wit=function(n,t,i){t.disabled()&&bit(n,t,i)},da=function(n){return i.contains(tbt,st.name(n.element()))},ibt=function(n){f.set(n.element(),"disabled","disabled")},rbt=function(n){f.remove(n.element(),"disabled")},ubt=function(n){f.set(n.element(),"aria-disabled","true")},fbt=function(n){f.set(n.element(),"aria-disabled","false")},bit=function(n,t){t.disableClass().each(function(t){a.add(n.element(),t)});(da(n)?ibt:ubt)(n)},kit=function(n){return da(n)?f.has(n.element(),"disabled"):"true"===f.get(n.element(),"aria-disabled")},ebt=Object.freeze({enable:function(n,t){t.disableClass().each(function(t){a.remove(n.element(),t)});(da(n)?rbt:fbt)(n)},disable:bit,isDisabled:kit,onLoad:wit}),obt=Object.freeze({exhibit:function(n,t){return hi({classes:t.disabled()?t.disableClass().map(i.pure).getOr([]):[]})},events:function(n,t){return ut([lb(cf(),function(n){return kit(n)}),hl(n,t,wit)])}}),sbt=[r("disabled",!1),nt("disableClass")],hbt=ni({fields:sbt,name:"disabling",active:obt,apis:ebt}),cbt=[pi("formBehaviours",[ot])],dit=function(n){return"<alloy.field."+n+">"},lbt=function(t,i,r){return s.deepMerge({"debug.sketcher":{Form:r},uid:t.uid(),dom:t.dom(),components:i,behaviours:s.deepMerge(w([ot.config({store:{mode:"manual",getValue:function(i){var r,u,f=(r=t,u=i.getSystem(),l.map(r.partUids(),function(t){return n.constant(u.getByUid(t))}));return l.map(f,function(n){return n().bind(vi.getCurrent).map(ot.getValue)})},setValue:function(n,i){l.each(i,function(i,r){ar(n,t,r).each(function(n){vi.getCurrent(n).each(function(n){ot.setValue(n,i)})})})}}})]),wi(t.formBehaviours())),apis:{getField:function(n,i){return ar(n,t,i).bind(vi.getCurrent)}}})},abt=(ha(function(n,t,i){return n.getField(t,i)}),function(n){var t,r=(t=[],{field:function(n,i){return t.push(n),r="form",u=dit(n),f=i,{uiType:vn(),owner:r,name:u,config:f,validated:{}};var r,u,f},record:function(){return t}}),u=n(r),f=r.record(),e=i.map(f,function(n){return as({name:n,pname:dit(n)})});return ftt("form",cbt,e,lbt,u)}),ff=function(){var n=tt(t.none()),i=function(){n.get().each(function(n){n.destroy()})};return{clear:function(){i();n.set(t.none())},isSet:function(){return n.get().isSome()},set:function(r){i();n.set(t.some(r))},run:function(t){n.get().each(t)}}},ga=function(){var n=tt(t.none());return{clear:function(){n.set(t.none())},set:function(i){n.set(t.some(i))},isSet:function(){return n.get().isSome()},on:function(t){n.get().each(t)}}},vbt=function(n){return{xValue:n,points:[]}},ybt=function(n,t){if(t===n.xValue)return n;var i=0<t-n.xValue?1:-1,r={direction:i,xValue:t};return{xValue:t,points:(0===n.points.length?[]:n.points[n.points.length-1].direction===i?n.points.slice(0,n.points.length-1):n.points).concat([r])}},pbt=function(n){if(0===n.points.length)return 0;var t=n.points[0].direction,i=n.points[n.points.length-1].direction;return-1===t&&-1===i?-1:1===t&&1===i?1:0},wbt=function(n){var l="navigateEvent",y=kt([u("fields"),r("maxFieldIndex",n.fields.length-1),u("onExecute"),u("getInitialValue"),si("state",function(){return{dialogSwipeState:ga(),currentScreen:tt(0)}})]),f=oi("SerialisedDialog",y,n),a=function(n,t,i){return eu.sketch({dom:et('<span class="${prefix}-icon-'+t+' ${prefix}-icon"><\/span>'),action:function(t){af(t,l,{direction:n})},buttonBehaviours:w([hbt.config({disableClass:o.resolve("toolbar-navigation-disabled"),disabled:!i})])})},e=function(n,t){var i=ii(n.element(),"."+o.resolve("serialised-dialog-screen"));hr(n.element(),"."+o.resolve("serialised-dialog-chain")).each(function(n){0<=f.state.currentScreen.get()+t&&f.state.currentScreen.get()+t<i.length&&(h.getRaw(n,"left").each(function(r){var u=parseInt(r,10),f=he(i[0]);h.set(n,"left",u-t*f+"px")}),f.state.currentScreen.set(f.state.currentScreen.get()+t))})},v=function(n){var r=ii(n.element(),"input"),i;t.from(r[f.state.currentScreen.get()]).each(function(t){n.getSystem().getByDom(t).each(function(t){var i,r;i=n;r=t.element();i.getSystem().triggerFocus(r,i.element())})});i=c.get(n);at.highlightAt(i,f.state.currentScreen.get())},s=su(abt(function(n){return{dom:et('<div class="${prefix}-serialised-dialog"><\/div>'),components:[yi.sketch({dom:et('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"><\/div>'),components:i.map(f.fields,function(t,r){return r<=f.maxFieldIndex?yi.sketch({dom:et('<div class="${prefix}-serialised-dialog-screen"><\/div>'),components:i.flatten([[a(-1,"previous",0<r)],[n.field(t.name,t.spec)],[a(1,"next",r<f.maxFieldIndex)]])}):n.field(t.name,t.spec)})})],formBehaviours:w([bo(function(n,t){var i;i=t;hr(n.element(),"."+o.resolve("serialised-dialog-chain")).each(function(n){h.set(n,"left",-f.state.currentScreen.get()*i.width+"px")})}),ct.config({mode:"special",focusIn:function(n){v(n)},onTab:function(n){return e(n,1),t.some(!0)},onShiftTab:function(n){return e(n,-1),t.some(!0)}}),ae("form-events",[nu(function(n){f.state.currentScreen.set(0);f.state.dialogSwipeState.clear();var t=c.get(n);at.highlightFirst(t);f.getInitialValue(n).each(function(t){ot.setValue(n,t)})}),ao(f.onExecute),p(bh(),function(n,t){"left"===t.event().raw().propertyName&&v(n)}),p(l,function(n,t){var i=t.event().direction();e(n,i)})])])}})),c=su({dom:et('<div class="${prefix}-dot-container"><\/div>'),behaviours:w([at.config({highlightClass:o.resolve("dot-active"),itemClass:o.resolve("dot-item")})]),components:i.bind(f.fields,function(n,t){return t<=f.maxFieldIndex?[ou('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"><\/div>')]:[]})});return{dom:et('<div class="${prefix}-serializer-wrapper"><\/div>'),components:[s.asSpec(),c.asSpec()],behaviours:w([ct.config({mode:"special",focusIn:function(n){var t=s.get(n);ct.focusIn(t)}}),ae("serializer-wrapper-events",[p(lu(),function(n,t){f.state.dialogSwipeState.set(vbt(t.event().raw().touches[0].clientX))}),p(ro(),function(n,t){f.state.dialogSwipeState.on(function(n){t.event().prevent();f.state.dialogSwipeState.set(ybt(n,t.event().raw().touches[0].clientX))})}),p(uo(),function(n){f.state.dialogSwipeState.on(function(t){var i=s.get(n),r=-1*pbt(t);e(i,r)})})])])}},bbt=tr(function(n,i){return[{label:"the link group",items:[wbt({fields:[gs("url","Type or paste URL"),gs("text","Link text"),gs("title","Link title"),gs("target","Link target"),(r="link",{name:r,spec:wwt.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return t.none()}})})],maxFieldIndex:3,getInitialValue:function(){return t.some(ba.getInfo(i))},onExecute:function(t){var r=ot.getValue(t);ba.applyInfo(i,r);n.restoreToolbar();i.focus()}})]}];var r}),kbt=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],dbt={events:ut([(hit=br(),cit=function(n,t){var i,r,u=t.event().originator(),f=t.event().target();return r=f,!(ht(i=u,n.element())&&!ht(i,r)&&(console.warn(br()+" did not get interpreted by the desired target. \nOriginator: "+ru(u)+"\nTarget: "+ru(f)+"\nCheck the "+br()+" event handlers"),1))},{key:hit,value:ku({can:cit})})])},gbt=n.identity,git=cl.exactly(["debugInfo","triggerFocus","triggerEvent","triggerEscape","addToWorld","removeFromWorld","addToGui","removeFromGui","build","getByUid","getByDom","broadcast","broadcastOn","isConnected"]),nh=function(t){var i=function(n){return function(){throw new Error("The component must be in a context to send: "+n+"\n"+ru(t().element())+" is not in context.");}};return git({debugInfo:n.constant("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),build:i("build"),addToWorld:i("addToWorld"),removeFromWorld:i("removeFromWorld"),addToGui:i("addToGui"),removeFromGui:i("removeFromGui"),getByUid:i("getByUid"),getByDom:i("getByDom"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),isConnected:n.constant(!1)})},nkt=function(t,f){var e=i.map(f,function(n){return bt(n.name(),n.name(),yu(),kt([u("config"),r("state",vo)]))}),o=nl("component.behaviours",kt(e),t.behaviours).fold(function(n){throw new Error(ob(n)+"\nComplete spec:\n"+ei(t,null,2));},n.identity);return{list:f,data:l.map(o,function(t){var i=t();return n.constant(i.map(function(n){return{config:n.config(),state:n.state().init(n.config())}}))})}},tkt=function(n){return n.list},ikt=function(n){return n.data},nrt=function(n,t){var i={};return l.each(n,function(n,r){l.each(n,function(n,u){var f=ib(u,[])(i);i[u]=f.concat([t(r,n)])})}),i},rkt=function(t,i){return{name:n.constant(t),modification:i}},th=function(n,t){return 1<n.length?b.error('Multiple behaviours have tried to change DOM "'+t+'". The guilty behaviours are: '+ei(i.map(n,function(n){return n.name()}))+". At this stage, this is not supported. Future releases might provide strategies for resolving this."):0===n.length?b.value({}):b.value(n[0].modification().fold(function(){return{}},function(n){return g(t,n)}))},trt=function(n,t){return i.foldl(n,function(r,u){var f=u.modification().getOr({});return r.bind(function(r){var u=l.mapToArray(f,function(u,f){return r[f]!==undefined?(o=t,e=f,s=n,b.error("Mulitple behaviours have tried to change the _"+e+'_ "'+o+'". The guilty behaviours are: '+ei(i.bind(s,function(n){return n.modification().getOr({})[e]!==undefined?[n.name()]:[]}),null,2)+". This is not currently supported.")):b.value(g(f,u));var o,e,s});return wc(u,r)})},b.value({})).map(function(n){return g(t,n)})},ukt={classes:function(n,t){var r=i.bind(n,function(n){return n.modification().getOr([])});return b.value(g(t,r))},attributes:trt,styles:trt,domChildren:th,defChildren:th,innerHtml:th,value:th},fkt=function(n,t,i,r){var f=i.slice(0),u;try{return u=f.sort(function(i,u){var o=i[t](),s=u[t](),f=r.indexOf(o),e=r.indexOf(s);if(-1===f)throw new Error("The ordering for "+n+" does not have an entry for "+o+".\nOrder specified: "+ei(r,null,2));if(-1===e)throw new Error("The ordering for "+n+" does not have an entry for "+s+".\nOrder specified: "+ei(r,null,2));return f<e?-1:e<f?1:0}),b.value(u)}catch(e){return b.error([e])}},ekt=function(t,i){return{handler:n.curry.apply(undefined,[t.handler].concat(i)),purpose:t.purpose}},nv=function(n){return n.handler},okt=function(t,i){return{name:n.constant(t),handler:n.constant(i)}},skt=function(n,t,r){var f,e,u,o=s.deepMerge(r,(f=t,e=n,u={},i.each(f,function(n){u[n.name()]=n.handlers(e)}),u));return nrt(o,okt)},hkt=function(t){var i,r=(i=t,rt.isFunction(i)?{can:n.constant(!0),abort:n.constant(!1),run:i}:i);return function(n,t){var i=Array.prototype.slice.call(arguments,0);r.abort.apply(undefined,i)?t.stop():r.can.apply(undefined,i)&&r.run.apply(undefined,i)}},ckt=function(n,t,r){var u,f,e=t[r];return e?fkt("Event: "+r,"name",n,e).map(function(n){var t=i.map(n,function(n){return n.handler()});return wht(t)}):(u=r,f=n,b.error(["The event ("+u+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+ei(i.map(f,function(n){return n.name()}),null,2)]))},lkt=function(t,r){var u=l.mapToArray(t,function(t,u){return(1===t.length?b.value(t[0].handler()):ckt(t,r,u)).map(function(f){var e,o=hkt(f),s=1<t.length?i.filter(r,function(n){return i.contains(t,function(t){return t.name()===n})}).join(" > "):t[0].name();return g(u,(e=s,{handler:o,purpose:n.constant(e)}))})});return wc(u,{})},akt=function(t){return nl("custom.definition",wt([bt("dom","dom",gr(),wt([u("tag"),r("styles",{}),r("classes",[]),r("attributes",{}),nt("value"),nt("innerHtml")])),u("components"),u("uid"),r("events",{}),r("apis",n.constant({})),bt("eventOrder","eventOrder",(i={"alloy.execute":["disabling","alloy.base.behaviour","toggling"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"]},dr.mergeWithThunk(n.constant(i))),lo()),nt("domModification"),bl("originalSpec"),r("debug.sketcher","unknown")]),t);var i},vkt=function(n){var t,r={tag:n.dom().tag(),classes:n.dom().classes(),attributes:s.deepMerge((t=n,g(rtt(),t.uid())),n.dom().attributes()),styles:n.dom().styles(),domChildren:i.map(n.components(),function(n){return n.element()})};return sl(s.deepMerge(r,n.dom().innerHtml().map(function(n){return g("innerHtml",n)}).getOr({}),n.dom().value().map(function(n){return g("value",n)}).getOr({})))},irt=function(n,t){i.each(t,function(t){a.add(n,t)})},tv=function(n,t){i.each(t,function(t){a.remove(n,t)})},ykt=function(n){if(n.domChildren().isSome()&&n.defChildren().isSome())throw new Error("Cannot specify children and child specs! Must be one or the other.\nDef: "+(t=bht(n),ei(t,null,2)));return n.domChildren().fold(function(){var t=n.defChildren().getOr([]);return i.map(t,pkt)},function(n){return n});var t},rrt=function(n){var t=e.fromTag(n.tag()),i;return f.setAll(t,n.attributes().getOr({})),irt(t,n.classes().getOr([])),h.setAll(t,n.styles().getOr({})),dct(t,n.innerHtml().getOr("")),i=ykt(n),lc(t,i),n.value().each(function(n){pit(t,n)}),t},pkt=function(n){var t=sl(n);return rrt(t)},wkt=function(n){var r,t,u,f=(t=it(r=n,"behaviours").getOr({}),u=i.filter(l.keys(t),function(n){return t[n]!==undefined}),i.map(u,function(n){return r.behaviours[n].me}));return nkt(n,f)},urt=cl.exactly(["getSystem","config","hasConfigured","spec","connect","disconnect","element","syncComponents","readState","components","events"]),bkt=function(t){var h,r,u,c,a,v,y,p,w,d,nt=function(){return ht},o=tt(nh(nt)),f=tl(akt(s.deepMerge(t,{behaviours:undefined}))),ut=wkt(t),ft=tkt(ut),e=ikt(ut),et=vkt(f),ct={"alloy.base.modification":(h=f,h.domModification().fold(function(){return hi({})},hi))},lt=function(n,t,r,u){var f=s.deepMerge({},t);i.each(r,function(t){f[t.name()]=t.exhibit(n,u)});var e=nrt(f,rkt),o=l.map(e,function(n){return i.bind(n,function(n){return n.modification().fold(function(){return[]},function(){return[n]})})}),h=l.mapToArray(o,function(n,t){return it(ukt,t).fold(function(){return b.error("Unknown field type: "+t)},function(i){return i(n,t)})});return wc(h,{}).map(hi)}(e,ct,ft,et).getOrDie(),at=(r=et,u=lt,c=s.deepMerge({tag:r.tag(),classes:u.classes().getOr([]).concat(r.classes().getOr([])),attributes:s.merge(r.attributes().getOr({}),u.attributes().getOr({})),styles:s.merge(r.styles().getOr({}),u.styles().getOr({}))},u.innerHtml().or(r.innerHtml()).map(function(n){return g("innerHtml",n)}).getOr({}),pb("domChildren",u.domChildren(),r.domChildren()),pb("defChildren",u.defChildren(),r.defChildren()),u.value().or(r.value()).map(function(n){return g("value",n)}).getOr({})),sl(c)),ot=rrt(at),vt={"alloy.base.behaviour":(a=f,a.events())},yt=(v=e,y=f.eventOrder(),p=ft,w=vt,d=skt(v,p,w),lkt(d,y)).getOrDie(),st=tt(f.components()),ht=urt({getSystem:o.get,config:function(n){if(n===pyt())return f.apis();var i=e;return(rt.isFunction(i[n.name()])?i[n.name()]:function(){throw new Error("Could not find "+n.name()+" in "+ei(t,null,2));})()},hasConfigured:function(n){return rt.isFunction(e[n.name()])},spec:n.constant(t),readState:function(n){return e[n]().map(function(n){return n.state.readState()}).getOr("not enabled")},connect:function(n){o.set(n)},disconnect:function(){o.set(nh(nt))},element:n.constant(ot),syncComponents:function(){var n=k.children(ot),t=i.bind(n,function(n){return o.get().getByDom(n).fold(function(){return[]},function(n){return[n]})});st.set(t)},components:st.get,events:n.constant(yt)});return ht},kkt=function(n){var t,r,u=gbt(n),f=(t=u,r=ib("components",[])(t),i.map(r,ki)),e=s.deepMerge(dbt,u,g("components",f));return b.value(bkt(e))},frt=function(n){var t=e.fromText(n);return dkt({element:t})},dkt=function(i){var r=wu("external.component",wt([u("element"),nt("uid")]),i),e=tt(nh()),o;return r.uid().each(function(n){var t;t=r.element();f.set(t,vs,n)}),o=urt({getSystem:e.get,config:t.none,hasConfigured:n.constant(!1),connect:function(n){e.set(n)},disconnect:function(){e.set(nh(function(){return o}))},element:n.constant(r.element()),spec:n.constant(i),readState:n.constant("No state"),syncComponents:n.noop,components:n.constant([]),events:n.constant({})}),itt(o)},ki=function(n){return(t=n,it(t,ntt)).fold(function(){var t=s.deepMerge({uid:ys("")},n);return kkt(t).getOrDie()},function(n){return n});var t},ve=itt,ert="alloy.item-hover",ort="alloy.item-focus",srt=function(n){(po(n.element()).isNone()||ti.isFocused(n))&&(ti.isFocused(n)||ti.focus(n),af(n,ert,{item:n}))},hrt=function(n){af(n,ort,{item:n})},crt=n.constant(ert),gkt=n.constant(ort),ndt=[u("data"),u("components"),u("dom"),nt("toggling"),r("itemBehaviours",{}),r("ignoreFocus",!1),r("domModification",{}),lt("builder",function(n){return{dom:s.deepMerge(n.dom(),{attributes:{role:n.toggling().isSome()?"menuitemcheckbox":"menuitem"}}),behaviours:s.deepMerge(w([n.toggling().fold(d.revoke,function(n){return d.config(s.deepMerge({aria:{mode:"checked"}},n))}),ti.config({ignore:n.ignoreFocus(),onFocus:function(n){hrt(n)}}),ct.config({mode:"execution"}),ot.config({store:{mode:"memory",initialValue:n.data()}})]),n.itemBehaviours()),events:ut([(t=hst(),i=rc,p(t,function(n,t){n.getSystem().getByDom(t.event().target()).each(function(r){i(n,r,t)})})),ab(hf()),p(yy(),srt),p(lf(),ti.focus)]),components:n.components(),domModification:n.domModification(),eventOrder:n.eventOrder()};var t,i}),r("eventOrder",{})],tdt=[u("dom"),u("components"),lt("builder",function(n){return{dom:n.dom(),components:n.components(),events:ut([(t=lf(),p(t,function(n,t){t.stop()}))])};var t})],lrt=n.constant("item-widget"),art=n.constant([as({name:"widget",overrides:function(n){return{behaviours:w([ot.config({store:{mode:"manual",getValue:function(){return n.data()},setValue:function(){}}})])}}})]),idt=[u("uid"),u("data"),u("components"),u("dom"),r("autofocus",!1),r("domModification",{}),gn(art()),lt("builder",function(n){var u=bn(lrt(),n,art()),f=kn(lrt(),n,u.internals()),i=function(t){return ar(t,n,"widget").map(function(n){return ct.focusIn(n),n})},r=function(i,r){return ue(r.event().target())||n.autofocus()&&r.setSource(i.element()),t.none()};return s.deepMerge({dom:n.dom(),components:f,domModification:n.domModification(),events:ut([ao(function(n,t){i(n).each(function(){t.stop()})}),p(yy(),srt),p(lf(),function(t){n.autofocus()?i(t):ti.focus(t)})]),behaviours:w([ot.config({store:{mode:"memory",initialValue:n.data()}}),ti.config({onFocus:function(n){hrt(n)}}),ct.config({mode:"special",focusIn:n.autofocus()?function(n){i(n)}:ict(),onLeft:r,onRight:r,onEscape:function(i,r){return ti.isFocused(i)||n.autofocus()?(n.autofocus()&&r.setSource(i.element()),t.none()):(ti.focus(i),t.some(!0))}})])})})],rdt=bu("type",{widget:idt,item:ndt,separator:tdt}),udt=n.constant([pn({factory:{sketch:function(n){var t=wu("menu.spec item",rdt,n);return t.builder()(t)}},name:"items",unit:"item",defaults:function(n,t){var i=ys("");return s.deepMerge({uid:i},t)},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus(),domModification:{classes:[n.markers().item()]}}}})]),fdt=n.constant([u("value"),u("items"),u("dom"),u("components"),r("eventOrder",{}),pi("menuBehaviours",[at,ot,vi,ct]),il("movement",{mode:"menu",moveOnTab:!0},bu("mode",{grid:[gk(),lt("config",function(n,t){return{mode:"flatgrid",selector:"."+n.markers().item(),initSize:{numColumns:t.initSize().numColumns(),numRows:t.initSize().numRows()},focusManager:n.focusManager()}})],menu:[r("moveOnTab",!0),lt("config",function(n,t){return{mode:"menu",selector:"."+n.markers().item(),moveOnTab:t.moveOnTab(),focusManager:n.focusManager()}})]})),ne("markers",elt()),r("fakeFocus",!1),r("focusManager",ia()),gt("onHighlight")]),vrt=(n.constant("menu"),n.constant("alloy.menu-focus")),yrt=ps({name:"Menu",configFields:fdt(),partFields:udt(),factory:function(t,i){return s.deepMerge({dom:s.deepMerge(t.dom(),{attributes:{role:"menu"}}),uid:t.uid(),behaviours:s.deepMerge(w([at.config({highlightClass:t.markers().selectedItem(),itemClass:t.markers().item(),onHighlight:t.onHighlight()}),ot.config({store:{mode:"memory",initialValue:t.value()}}),vi.config({find:n.identity}),ct.config(t.movement().config()(t,t.movement()))]),wi(t.menuBehaviours())),events:ut([p(gkt(),function(n,t){var i=t.event();n.getSystem().getByDom(i.target()).each(function(i){at.highlight(n,i);t.stop();af(n,vrt(),{menu:n,item:i})})}),p(crt(),function(n,t){var i=t.event().item();at.highlight(n,i)})]),components:i,eventOrder:t.eventOrder()})}}),prt=function(n,t,i,r){var u=n.getSystem().build(r);bw(n,u,i)},wrt=function(n){return n.components()},edt=Object.freeze({append:function(n,t,i,r){prt(n,0,ri.append,r)},prepend:function(n,t,i,r){prt(n,0,ri.prepend,r)},remove:function(n,t,r,u){var f=wrt(n,t);i.find(f,function(n){return ht(u.element(),n.element())}).each(dw)},set:function(n,r,u,f){var o,h,c,e,s,l;h=(o=n).components();i.each(h,kw);kr.empty(o.element());o.syncComponents();c=function(){var t=i.map(f,n.getSystem().build);i.each(t,function(t){ww(n,t)})};e=n.element();s=k.owner(e);l=nf(s).bind(function(n){var i=function(t){return ht(n,t)};return i(e)?t.some(e):vl.descendant(e,i)});c(e);l.each(function(n){nf(s).filter(function(t){return ht(t,n)}).orThunk(function(){tu(n)})})},contents:wrt}),yt=ni({fields:[],name:"replacing",apis:edt}),brt=function(n,i,r,u){return it(r,u).bind(function(u){return it(n,u).bind(function(u){var f=brt(n,i,r,u);return t.some([u].concat(f))})}).getOr([])},odt=function(n,t){var r={};l.each(n,function(n,t){i.each(n,function(n){r[n]=t})});var u,e=t,f=(u=t,l.tupleMap(u,function(n,t){return{k:n,v:t}})),o=l.map(f,function(n,t){return[t].concat(brt(r,e,f,t))});return l.map(r,function(n){return it(o,n).getOr([n])})},sdt=n.constant("collapse-item"),iv=oe({name:"TieredMenu",configFields:[dk("onExecute"),dk("onEscape"),wl("onOpenMenu"),wl("onOpenSubmenu"),gt("onCollapseMenu"),r("openImmediately",!0),fr("data",[u("primary"),u("menus"),u("expansions")]),r("fakeFocus",!1),gt("onHighlight"),gt("onHover"),fr("markers",[u("backgroundMenu")].concat(kk()).concat(pl())),u("dom"),r("navigateOnHover",!0),r("stayInDom",!1),pi("tmenuBehaviours",[ct,at,vi,yt]),r("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)}},factory:function(r,u){var c,e,o,h,b,nt,et=function(t,i){return l.map(i,function(i,f){var e=yrt.sketch(s.deepMerge(i,{value:f,items:i.items,markers:eht(u.markers,["item","selectedItem"]),fakeFocus:r.fakeFocus(),onHighlight:r.onHighlight(),focusManager:r.fakeFocus()?{get:function(n){return at.getHighlighted(n).map(function(n){return n.element()})},set:function(t,i){t.getSystem().getByDom(i).fold(n.noop,function(n){at.highlight(t,n)})}}:ia()}));return t.getSystem().build(e)})},f=(c=tt({}),e=tt({}),o=tt({}),h=tt(t.none()),b=tt(n.constant([])),{setContents:function(n,i,r,u){h.set(t.some(n));c.set(r);e.set(i);b.set(u);var f=u(i),s=odt(f,r);o.set(s)},expand:function(n){return it(c.get(),n).map(function(t){var i=it(o.get(),n).getOr([]);return[t].concat(i)})},refresh:function(n){return it(o.get(),n)},collapse:function(n){return it(o.get(),n).bind(function(n){return 1<n.length?t.some(n.slice(1)):t.none()})},lookupMenu:nt=function(n){return it(e.get(),n)},otherMenus:function(n){var t=b.get()(e.get());return i.difference(l.keys(t),n)},getPrimary:function(){return h.get().bind(nt)},getMenus:function(){return e.get()},clear:function(){c.set({});e.set({});o.set({});h.set(t.none())},isClear:function(){return h.get().isNone()}}),v=function(n){return ot.getValue(n).value},st=function(){return l.map(r.data().menus(),function(n){return i.bind(n.items,function(n){return"separator"===n.type?[]:[n.data.value]})})},rt=function(n,t){at.highlight(n,t);at.getHighlighted(t).orThunk(function(){return at.getFirst(t)}).each(function(t){uc(n,t.element(),lf())})},ft=function(n,t){return pk(i.map(t,n.lookupMenu))},k=function(n,u,f){return t.from(f[0]).bind(u.lookupMenu).map(function(t){var o=ft(u,f.slice(1)),e;return i.each(o,function(n){a.add(n.element(),r.markers().backgroundMenu())}),gi.inBody(t.element())||yt.append(n,ve(t)),tv(t.element(),[r.markers().backgroundMenu()]),rt(n,t),e=ft(u,u.otherMenus(f)),i.each(e,function(t){tv(t.element(),[r.markers().backgroundMenu()]);r.stayInDom()||yt.remove(n,t)}),t})},d=function(n,i){var u=v(i);return f.expand(u).bind(function(u){return t.from(u[0]).bind(f.lookupMenu).each(function(t){gi.inBody(t.element())||yt.append(n,ve(t));r.onOpenSubmenu()(n,i,t);at.highlightFirst(t)}),k(n,f,u)})},y=function(n,t){var i=v(t);return f.collapse(i).bind(function(i){return k(n,f,i).map(function(i){return r.onCollapseMenu()(n,t,i),i})})},g=function(n){return function(t,i){return cr(i.getSource(),"."+r.markers().item()).bind(function(i){return t.getSystem().getByDom(i).bind(function(i){return n(t,i)})})}},ht=ut([p(vrt(),function(n,t){var i=t.event().menu();at.highlight(n,i)}),ao(function(n,t){var i=t.event().target();return n.getSystem().getByDom(i).bind(function(t){return 0===v(t).indexOf("collapse-item")?y(n,t):d(n,t).orThunk(function(){return r.onExecute()(n,t)})})}),nu(function(n){var t,i;(t=n,i=et(t,r.data().menus()),f.setContents(r.data().primary(),i,r.data().expansions(),function(n){return st(t,n)}),f.getPrimary()).each(function(t){yt.append(n,ve(t));r.openImmediately()&&(rt(n,t),r.onOpenMenu()(n,t))})})].concat(r.navigateOnHover()?[p(crt(),function(n,t){var u,e,i=t.event().item();u=n;e=v(i);f.refresh(e).bind(function(n){return k(u,f,n)});d(n,i);r.onHover()(n,i)})]:[]));return{uid:r.uid(),dom:r.dom(),behaviours:s.deepMerge(w([ct.config({mode:"special",onRight:g(function(n,i){return ue(i.element())?t.none():d(n,i)}),onLeft:g(function(n,i){return ue(i.element())?t.none():y(n,i)}),onEscape:g(function(n,t){return y(n,t).orThunk(function(){return r.onEscape()(n,t)})}),focusIn:function(n){f.getPrimary().each(function(t){uc(n,t.element(),lf())})}}),at.config({highlightClass:r.markers().selectedMenu(),itemClass:r.markers().menu()}),vi.config({find:function(n){return at.getHighlighted(n)}}),yt.config({})]),wi(r.tmenuBehaviours())),eventOrder:r.eventOrder(),apis:{collapseMenu:function(n){at.getHighlighted(n).each(function(t){at.getHighlighted(t).each(function(t){y(n,t)})})}},events:ht}},extraApis:{tieredData:function(n,t,i){return{primary:n,menus:t,expansions:i}},singleData:function(n,t){return{primary:n,menus:g(n,t),expansions:{}}},collapseItem:function(n){return{value:lr(sdt()),text:n}}}}),rv=function(t,i,r,u){return it(i.routes(),u.start()).map(n.apply).bind(function(t){return it(t,u.destination()).map(n.apply)})},krt=function(t,i,r,u){return rv(0,i,0,u).bind(function(t){return t.transition().map(function(i){return{transition:n.constant(i),route:n.constant(t)}})})},uv=function(n,t,i){var r,u,e;(r=n,u=t,e=i,fv(r,u,e).bind(function(n){return krt(r,u,e,n)})).each(function(i){var r=i.transition();a.remove(n.element(),r.transitionClass());f.remove(n.element(),t.destinationAttr())})},fv=function(i,r){var u=i.element();return f.has(u,r.destinationAttr())?t.some({start:n.constant(f.get(i.element(),r.stateAttr())),destination:n.constant(f.get(i.element(),r.destinationAttr()))}):t.none()},ih=function(n,t,i,r){uv(n,t,i);f.has(n.element(),t.stateAttr())&&f.get(n.element(),t.stateAttr())!==r&&t.onFinish()(n,r);f.set(n.element(),t.stateAttr(),r)},hdt=Object.freeze({findRoute:rv,disableTransition:uv,getCurrentRoute:fv,jumpTo:ih,progressTo:function(t,i,r,u){var o,e,s,h,c,l;e=i;f.has((o=t).element(),e.destinationAttr())&&(f.set(o.element(),e.stateAttr(),f.get(o.element(),e.destinationAttr())),f.remove(o.element(),e.destinationAttr()));l=(s=t,h=i,c=u,{start:n.constant(f.get(s.element(),h.stateAttr())),destination:n.constant(c)});krt(t,i,r,l).fold(function(){ih(t,i,r,u)},function(n){uv(t,i,r);var e=n.transition();a.add(t.element(),e.transitionClass());f.set(t.element(),i.destinationAttr(),u)})},getState:function(n,i){var r=n.element();return f.has(r,i.stateAttr())?t.some(f.get(r,i.stateAttr())):t.none()}}),cdt=Object.freeze({events:function(n,t){return ut([p(bh(),function(i,r){var u=r.event().raw();fv(i,n,t).each(function(r){rv(0,n,0,r).each(function(f){f.transition().each(function(f){u.propertyName===f.property()&&(ih(i,n,t,r.destination()),n.onTransition()(i,r))})})})}),nu(function(i){ih(i,n,t,n.initialState())})])}}),ldt=[r("destinationAttr","data-transitioning-destination"),r("stateAttr","data-transitioning-state"),u("initialState"),gt("onTransition"),gt("onFinish"),ne("routes",dc(b.value,dc(b.value,wt([cb("transition",[u("property"),u("transitionClass")])]))))],yr=ni({fields:ldt,name:"transitioning",active:cdt,apis:hdt,extra:{createRoutes:function(n){var t={};return l.each(n,function(n,i){var r=i.split("<->");t[r[0]]=g(r[1],n);t[r[1]]=g(r[0],n)}),t},createBistate:function(n,t,i){return fi([{key:n,value:g(t,i)},{key:t,value:g(n,i)}])},createTristate:function(n,t,i,r){return fi([{key:n,value:fi([{key:t,value:r},{key:i,value:r}])},{key:t,value:fi([{key:n,value:r},{key:i,value:r}])},{key:i,value:fi([{key:n,value:r},{key:t,value:r}])}])}}}),ev=o.resolve("scrollable"),hu={register:function(n){a.add(n,ev)},deregister:function(n){a.remove(n,ev)},scrollable:n.constant(ev)},rh=function(n){return it(n,"format").getOr(n.title)},drt=function(n,t,i,r,u){return{data:{value:n,text:t},type:"item",dom:{tag:"div",classes:u?[o.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:o.resolve("format-matches"),selected:i},itemBehaviours:w(u?[]:[ed(n,function(n,t){(t?d.on:d.off)(n)})]),components:[{dom:{tag:"div",attributes:{style:r},innerHtml:t}}]}},grt=function(n,t,i,r){return{value:n,dom:{tag:"div"},components:[eu.sketch({dom:{tag:"div",classes:[o.resolve("styles-collapser")]},components:r?[{dom:{tag:"span",classes:[o.resolve("styles-collapse-icon")]}},frt(n)]:[frt(n)],action:function(n){if(r){var t=i().get(n);iv.collapseMenu(t)}}}),{dom:{tag:"div",classes:[o.resolve("styles-menu-items-container")]},components:[yrt.parts().items({})],behaviours:w([ae("adhoc-scrollable-menu",[nu(function(n){h.set(n.element(),"overflow-y","auto");h.set(n.element(),"-webkit-overflow-scrolling","touch");hu.register(n.element())}),vb(function(n){h.remove(n.element(),"overflow-y");h.remove(n.element(),"-webkit-overflow-scrolling");hu.deregister(n.element())})])])}],items:t,menuBehaviours:w([yr.config({initialState:"after",routes:yr.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},adt=function(n){var t,r,u,f,e,c=(t=n.formats,r=function(){return h},u=grt("Styles",[].concat(i.map(t.items,function(n){return drt(rh(n),n.title,n.isSelected(),n.getPreview(),vt(t.expansions,rh(n)))})),r,!1),f=l.map(t.menus,function(n,u){var f=i.map(n,function(n){return drt(rh(n),n.title,n.isSelected!==undefined&&n.isSelected(),n.getPreview!==undefined?n.getPreview():"",vt(t.expansions,rh(n)))});return grt(u,f,r,!0)}),e=s.deepMerge(f,g("styles",u)),{tmenu:iv.tieredData("styles",e,t.expansions)}),h=su(iv.sketch({dom:{tag:"div",classes:[o.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,i){var r=ot.getValue(i);n.handle(i,r.value)},onEscape:function(){},onOpenMenu:function(n,t){var i=he(n.element());wtt(t.element(),i);yr.jumpTo(t,"current")},onOpenSubmenu:function(n,t,i){var r=he(n.element()),u=wd(t.element(),'[role="menu"]').getOrDie("hacky"),f=n.getSystem().getByDom(u).getOrDie();wtt(i.element(),r);yr.progressTo(f,"before");yr.jumpTo(i,"after");yr.progressTo(i,"current")},onCollapseMenu:function(n,t,i){var r=wd(t.element(),'[role="menu"]').getOrDie("hacky"),u=n.getSystem().getByDom(r).getOrDie();yr.progressTo(u,"after");yr.progressTo(i,"current")},navigateOnHover:!1,openImmediately:!0,data:c.tmenu,markers:{backgroundMenu:o.resolve("styles-background-menu"),menu:o.resolve("styles-menu"),selectedMenu:o.resolve("styles-selected-menu"),item:o.resolve("styles-item"),selectedItem:o.resolve("styles-selected-item")}}));return h.asSpec()},vdt=function(n){return vt(n,"items")?(t=n,r=s.deepMerge(oht(t,["items"]),{menu:!0}),i=nut(t.items),{item:r,menus:s.deepMerge(i.menus,g(t.title,i.items)),expansions:s.deepMerge(i.expansions,g(t.title,t.title))}):{item:n,menus:{},expansions:{}};var t,r,i},nut=function(n){return i.foldr(n,function(n,t){var i=vdt(t);return{menus:s.deepMerge(n.menus,i.menus),items:[i.item].concat(n.items),expansions:s.deepMerge(n.expansions,i.expansions)}},{menus:{},expansions:{},items:[]})},ydt={expand:nut},pdt=function(t,r){var u=function(n){return function(){return t.formatter.match(n)}},f=function(n){return function(){return t.formatter.getCssText(n)}},o=it(r,"style_formats").getOr(kbt),e=function(r){return i.map(r,function(i){var c,l,r,h,o,a;return vt(i,"items")?(c=e(i.items),s.deepMerge((a=i,s.deepMerge(a,{isSelected:n.constant(!1),getPreview:n.constant("")})),{items:c})):vt(i,"format")?(o=i,s.deepMerge(o,{isSelected:u(o.format),getPreview:f(o.format)})):(r=lr((l=i).title),h=s.deepMerge(l,{format:r,isSelected:u(r),getPreview:f(r)}),t.formatter.register(r,h),h)})};return e(o)},wdt=function(n,t,r){var u,f,e,o=(u=n,e=(f=function(n){return i.bind(n,function(n){return n.items!==undefined?0<f(n.items).length?[n]:[]:!vt(n,"format")||u.formatter.canApply(n.format)?[n]:[]})})(t),ydt.expand(e));return adt({formats:o,handle:function(t,i){n.undoManager.transact(function(){d.isOn(t)?n.formatter.remove(i):n.formatter.apply(i)});r()}})},bdt=["undo","bold","italic","link","image","bullist","styleselect"],tut=function(n){var t=n.replace(/\|/g," ").trim();return 0<t.length?t.split(/\s+/):[]},iut=function(n){return i.bind(n,function(n){return rt.isArray(n)?iut(n):tut(n)})},kdt=function(n){var t=n.toolbar!==undefined?n.toolbar:bdt;return rt.isArray(t)?iut(t):tut(t)},ddt=function(n,i){var u=function(n){return function(){return vr.forToolbarCommand(i,n)}},f=function(n){return function(){return vr.forToolbarStateCommand(i,n)}},e=function(n,t,r){return function(){return vr.forToolbarStateAction(i,n,t,r)}},s=u("undo"),h=u("redo"),c=f("bold"),l=f("italic"),a=f("underline"),v=u("removeformat"),y=e("unlink","link",function(){i.execCommand("unlink",null,!1)}),p=e("unordered-list","ul",function(){i.execCommand("InsertUnorderedList",null,!1)}),b=e("ordered-list","ol",function(){i.execCommand("InsertOrderedList",null,!1)}),k=pdt(i,i.settings),g=function(){return wdt(i,k,function(){i.fire("scrollIntoView")})},r=function(n,t){return{isSupported:function(){return n.forall(function(n){return vt(i.buttons,n)})},sketch:t}};return{undo:r(t.none(),s),redo:r(t.none(),h),bold:r(t.none(),c),italic:r(t.none(),l),underline:r(t.none(),a),removeformat:r(t.none(),v),link:r(t.none(),function(){return r=n,t=i,vr.forToolbarStateAction(t,"link","link",function(){var n=bbt(r,t);r.setContextToolbar(n);vwt(t,function(){r.focusToolbar()});ba.query(t).each(function(n){t.selection.select(n.dom())})});var r,t}),unlink:r(t.none(),y),image:r(t.none(),function(){return swt(i)}),bullist:r(t.some("bullist"),p),numlist:r(t.some("numlist"),b),fontsizeselect:r(t.none(),function(){return t=i,r={onChange:function(n){va.apply(t,n)},getInitialValue:function(){return va.get(t)}},ktt(n,"font-size",function(){return uwt(r)});var t,r}),forecolor:r(t.none(),function(){return dpt(n,i)}),styleselect:r(t.none(),function(){return vr.forToolbar("style-formats",function(t){i.fire("toReading");n.dropup().appear(g,d.on,t)},w([d.config({toggleClass:o.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),kl.config({channels:fi([od(iu.orientationChanged(),d.off),od(iu.dropupDismissed(),d.off)])})]))})}},gdt=function(n,t){var u=kdt(n),r={};return i.bind(u,function(n){var i=!vt(r,n)&&vt(t,n)&&t[n].isSupported()?[t[n].sketch()]:[];return r[n]=!0,i})},ngt=function(t,i){return function(r){if(t(r)){var u,f,o,s,h,c,l,y=e.fromDom(r.target),a=function(){r.stopPropagation()},v=function(){r.preventDefault()},p=n.compose(v,a),w=(u=y,f=r.clientX,o=r.clientY,s=a,h=v,c=p,l=r,{target:n.constant(u),x:n.constant(f),y:n.constant(o),stop:s,prevent:h,kill:c,raw:n.constant(l)});i(w)}}},rut=function(t,i,r,u,f){var e=ngt(r,u);return t.dom().addEventListener(i,e,f),{unbind:n.curry(tgt,t,i,e,f)}},tgt=function(n,t,i,r){n.dom().removeEventListener(t,i,r)},igt=function(n,t,i,r){return rut(n,t,i,r,!1)},rgt=function(n,t,i,r){return rut(n,t,i,r,!0)},uut=n.constant(!0),ft=function(n,t,i){return igt(n,t,uut,i)},ov=function(n,t,i){return rgt(n,t,uut,i)},sv=function(t){var i=t.matchMedia("(orientation: portrait)").matches;return{isPortrait:n.constant(i)}},ugt=sv,fut=function(n,i){var f=e.fromDom(n),r=null,o=ft(f,"orientationchange",function(){clearInterval(r);var t=sv(n);i.onChange(t);u(function(){i.onReady(t)})}),u=function(i){clearInterval(r);var f=n.innerHeight,u=0;r=setInterval(function(){f!==n.innerHeight?(clearInterval(r),i(t.some(n.innerHeight))):20<u&&(clearInterval(r),i(t.none()));u++},50)};return{onAdjustment:u,destroy:function(){o.unbind()}}},fgt=function(n){var t=dt.detect().os.isiOS(),i=sv(n).isPortrait();return t&&!i?n.screen.height:n.screen.width},eut=function(n){return n.raw().touches===undefined||1!==n.raw().touches.length?t.none():t.some(n.raw().touches[0])},out=function(i){var e,o,r,u=tt(t.none()),f=(e=function(n){u.set(t.none());i.triggerEvent(cst(),n)},o=400,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var i,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i=arguments;r=setTimeout(function(){e.apply(null,i);r=null},o)}}),s=fi([{key:lu(),value:function(i){return eut(i).each(function(r){f.cancel();var e={x:n.constant(r.clientX),y:n.constant(r.clientY),target:i.target};f.schedule(i);u.set(t.some(e))}),t.none()}},{key:ro(),value:function(n){return f.cancel(),eut(n).each(function(n){u.get().each(function(i){var r,f,e,o;r=n;f=i;e=Math.abs(r.clientX-f.x());o=Math.abs(r.clientY-f.y());(5<e||5<o)&&u.set(t.none())})}),t.none()}},{key:uo(),value:function(n){return f.cancel(),u.get().filter(function(t){return ht(t.target(),n.target())}).map(function(){return i.triggerEvent(dp(),n)})}}]);return{fireIfReady:function(n,t){return it(s,t).bind(function(t){return t(n)})}}},sut=function(n){var t=out({triggerEvent:function(t,i){n.onTapContent(i)}});return{fireTouchstart:function(n){t.fireIfReady(n,"touchstart")},onTouchend:function(){return ft(n.body(),"touchend",function(n){t.fireIfReady(n,"touchend")})},onTouchmove:function(){return ft(n.body(),"touchmove",function(n){t.fireIfReady(n,"touchmove")})}}},egt=6<=dt.detect().os.version.major,ogt=function(t,r,u){var f=sut(t),o=k.owner(r),h=function(n){return!ht(n.start(),n.finish())||n.soffset()!==n.foffset()},s=function(){var n=t.doc().dom().hasFocus()&&t.getSelection().exists(h);u.getByDom(r).each(!0===(n||nf(o).filter(function(n){return"input"===st.name(n)}).exists(function(n){return n.dom().selectionStart!==n.dom().selectionEnd}))?d.on:d.off)},c=[ft(t.body(),"touchstart",function(n){t.onTouchContent();f.fireTouchstart(n)}),f.onTouchmove(),f.onTouchend(),ft(r,"touchstart",function(){t.onTouchToolstrip()}),t.onToReading(function(){or(t.body())}),t.onToEditing(n.noop),t.onScrollToCursor(function(n){n.preventDefault();t.getCursorBox().each(function(n){var i=t.win(),r=n.top()>i.innerHeight||n.bottom()>i.innerHeight?n.bottom()-i.innerHeight+50:0;0!==r&&i.scrollTo(i.pageXOffset,i.pageYOffset+r)})})].concat(!0===egt?[]:[ft(e.fromDom(t.win()),"blur",function(){u.getByDom(r).each(d.off)}),ft(o,"select",s),ft(t.doc(),"selectionchange",s)]);return{destroy:function(){i.each(c,function(n){n.unbind()})}}},uh=function(n,t){var i=parseInt(f.get(n,t),10);return isNaN(i)?0:i},sgt=(ks=st.isText,ce="text",pa=function(n){return ks(n)?t.from(n.dom().nodeValue):t.none()},wa=dt.detect().browser,{get:function(n){if(!ks(n))throw new Error("Can only get "+ce+" value of a "+ce+" node");return lit(n).getOr("")},getOption:lit=wa.isIE()&&10===wa.version.major?function(n){try{return pa(n)}catch(i){return t.none()}}:pa,set:function(n,t){if(!ks(n))throw new Error("Can only set raw "+ce+" value of a "+ce+" node");n.dom().nodeValue=t}}),hgt=function(n){return sgt.getOption(n)},cgt=function(n){return"img"===st.name(n)?1:hgt(n).fold(function(){return k.children(n).length},function(n){return n.length})},lgt=cgt,hv=ui([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ye={before:hv.before,on:hv.on,after:hv.after,cata:function(n,t,i,r){return n.fold(t,i,r)},getStart:function(t){return t.fold(n.identity,n.identity,n.identity)}},fh=ui([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),agt=rr.immutable("start","soffset","finish","foffset"),pe={domRange:fh.domRange,relative:fh.relative,exact:fh.exact,exactFromRange:function(n){return fh.exact(n.start(),n.soffset(),n.finish(),n.foffset())},range:agt,getWin:function(n){var t=n.match({domRange:function(n){return e.fromDom(n.startContainer)},relative:function(n){return ye.getStart(n)},exact:function(n){return n}});return k.defaultView(t)}},vgt=function(n,t,i,r){var u=k.owner(n).dom().createRange();return u.setStart(n.dom(),t),u.setEnd(i.dom(),r),u},ygt=function(n,t,i,r){var u=vgt(n,t,i,r),f=ht(n,i)&&t===r;return u.collapsed&&!f},hut=function(n,t){n.selectNodeContents(t.dom())},cut=function(n){n.deleteContents()},lut=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}},ef={create:function(n){return n.document.createRange()},replaceWith:function(n,t){cut(n);n.insertNode(t.dom())},selectNodeContents:function(n,t){var i=n.document.createRange();return hut(i,t),i},selectNodeContentsUsing:hut,relativeToNative:function(n,t,i){var r,u,f=n.document.createRange();return r=f,t.fold(function(n){r.setStartBefore(n.dom())},function(n,t){r.setStart(n.dom(),t)},function(n){r.setStartAfter(n.dom())}),u=f,i.fold(function(n){u.setEndBefore(n.dom())},function(n,t){u.setEnd(n.dom(),t)},function(n){u.setEndAfter(n.dom())}),f},exactToNative:function(n,t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom(),i),f.setEnd(r.dom(),u),f},deleteContents:cut,cloneFragment:function(n){var t=n.cloneContents();return e.fromDom(t)},getFirstRect:function(n){var r=n.getClientRects(),i=0<r.length?r[0]:n.getBoundingClientRect();return 0<i.width||0<i.height?t.some(i).map(lut):t.none()},getBounds:function(n){var i=n.getBoundingClientRect();return 0<i.width||0<i.height?t.some(i).map(lut):t.none()},isWithin:function(n,t){return t.compareBoundaryPoints(n.END_TO_START,n)<1&&-1<t.compareBoundaryPoints(n.START_TO_END,n)},toString:function(n){return n.toString()}},we=ui([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),aut=function(n,t,i){return t(e.fromDom(i.startContainer),i.startOffset,e.fromDom(i.endContainer),i.endOffset)},vut=function(i,r){var u,o,f,s=(u=i,r.match({domRange:function(i){return{ltr:n.constant(i),rtl:t.none}},relative:function(n,i){return{ltr:tr(function(){return ef.relativeToNative(u,n,i)}),rtl:tr(function(){return t.some(ef.relativeToNative(u,i,n))})}},exact:function(n,i,r,f){return{ltr:tr(function(){return ef.exactToNative(u,n,i,r,f)}),rtl:tr(function(){return t.some(ef.exactToNative(u,r,f,n,i))})}}}));return(f=(o=s).ltr()).collapsed?o.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return we.rtl(e.fromDom(n.endContainer),n.endOffset,e.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return aut(0,we.ltr,f)}):aut(0,we.ltr,f)},pgt=(we.ltr,we.rtl,vut),wgt=function(n,t){return vut(n,t).match({ltr:function(t,i,r,u){var f=n.document.createRange();return f.setStart(t.dom(),i),f.setEnd(r.dom(),u),f},rtl:function(t,i,r,u){var f=n.document.createRange();return f.setStart(r.dom(),u),f.setEnd(t.dom(),i),f}})},yut=(document.caretPositionFromPoint||document.caretRangeFromPoint,function(n,t){var r=st.name(n);return"input"===r?ye.after(n):i.contains(["br","img"],r)?0===t?ye.before(n):ye.after(n):ye.on(n,t)}),bgt=function(n,t,i,r){var u=yut(n,t),f=yut(i,r);return pe.relative(u,f)},kgt=bgt,dgt=function(n,i){t.from(n.getSelection()).each(function(n){n.removeAllRanges();n.addRange(i)})},put=function(n,t,i,r,u){var f=ef.exactToNative(n,t,i,r,u);dgt(n,f)},ggt=function(n,t){return pgt(n,t).match({ltr:function(t,i,r,u){put(n,t,i,r,u)},rtl:function(t,i,r,u){var f=n.getSelection();f.setBaseAndExtent?f.setBaseAndExtent(t.dom(),i,r.dom(),u):f.extend?(f.collapse(t.dom(),i),f.extend(r.dom(),u)):put(n,r,u,t,i)}})},nnt=function(n){var i=e.fromDom(n.anchorNode),r=e.fromDom(n.focusNode);return ygt(i,n.anchorOffset,r,n.focusOffset)?t.some(pe.range(e.fromDom(n.anchorNode),n.anchorOffset,e.fromDom(n.focusNode),n.focusOffset)):function(n){if(0<n.rangeCount){var i=n.getRangeAt(0),r=n.getRangeAt(n.rangeCount-1);return t.some(pe.range(e.fromDom(i.startContainer),i.startOffset,e.fromDom(r.endContainer),r.endOffset))}return t.none()}(n)},wut=function(n){return t.from(n.getSelection()).filter(function(n){return 0<n.rangeCount}).bind(nnt)},tnt=function(n,t,i,r,u){var f=kgt(t,i,r,u);ggt(n,f)},but=wut,int=function(n){return wut(n).map(function(n){return pe.exact(n.start(),n.soffset(),n.finish(),n.foffset())})},rnt=function(n){n.getSelection().removeAllRanges()},kut=function(n,t){var i=wgt(n,t);return ef.getFirstRect(i)},unt=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:n.constant(2),height:t.height}},fnt=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}},cv=function(n){var t=n.getSelection();return t!==undefined&&0<t.rangeCount?function(n){if(n.collapsed){var t=e.fromDom(n.startContainer);return k.parent(t).bind(function(r){var u=pe.exact(t,n.startOffset,r,lgt(r));return kut(n.startContainer.ownerDocument.defaultView,u).map(unt).map(i.pure)}).getOr([])}return i.map(n.getClientRects(),fnt)}(t.getRangeAt(0)):[]},ent=function(t){t.focus();var r=e.fromDom(t.document.body);(nf().exists(function(n){return i.contains(["input","textarea"],st.name(n))})?function(n){setTimeout(function(){n()},0)}:n.apply)(function(){nf().each(or);tu(r)})},dut="data-"+o.resolve("last-outer-height"),gut=function(n,t){f.set(n,dut,t)},ont=function(t){return{top:n.constant(t.top()),bottom:n.constant(t.top()+t.height())}},snt=function(n,i){var r=uh(i,dut),u=n.innerHeight;return u<r?t.some(r-u):t.none()},hnt=function(n,i){var r=e.fromDom(i.document.body),u=ft(e.fromDom(n),"resize",function(){snt(n,r).each(function(n){var u,r;(u=i,r=cv(u),0<r.length?t.some(r[0]).map(ont):t.none()).each(function(t){var r,u,f,e=(r=i,f=n,(u=t).top()>r.innerHeight||u.bottom()>r.innerHeight?Math.min(f,u.bottom()-r.innerHeight+50):0);0!==e&&i.scrollTo(i.pageXOffset,i.pageYOffset+e)})});gut(r,n.innerHeight)});return gut(r,n.innerHeight),{toEditing:function(){ent(i)},destroy:function(){u.unbind()}}},nft=function(n){return t.some(e.fromDom(n.dom().contentWindow.document.body))},tft=function(n){return t.some(e.fromDom(n.dom().contentWindow.document))},lv=function(n){return t.from(n.dom().contentWindow)},ift=function(n){return lv(n).bind(but)},av=function(n){return n.getFrame()},eh=function(n,t){return function(i){return i[n].getOrThunk(function(){var n=av(i);return function(){return t(n)}})()}},rft=function(n,t,i,r){return n[i].getOrThunk(function(){return function(n){return ft(t,r,n)}})},cnt=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}},oh={getBody:eh("getBody",nft),getDoc:eh("getDoc",tft),getWin:eh("getWin",lv),getSelection:eh("getSelection",ift),getFrame:av,getActiveApi:function(i){var r=av(i);return nft(r).bind(function(u){return tft(r).bind(function(f){return lv(r).map(function(o){var s=e.fromDom(f.dom().documentElement),h=i.getCursorBox.getOrThunk(function(){return function(){return int(o).bind(function(n){return kut(o,n).orThunk(function(){return but(o).filter(function(n){return ht(n.start(),n.finish())&&n.soffset()===n.foffset()}).bind(function(n){var i=n.start().dom().getBoundingClientRect();return 0<i.width||0<i.height?t.some(i).map(cnt):t.none()})})})}}),c=i.setSelection.getOrThunk(function(){return function(n,t,i,r){tnt(o,n,t,i,r)}}),l=i.clearSelection.getOrThunk(function(){return function(){rnt(o)}});return{body:n.constant(u),doc:n.constant(f),win:n.constant(o),html:n.constant(s),getSelection:n.curry(ift,r),setSelection:c,clearSelection:l,frame:n.constant(r),onKeyup:rft(i,f,"onKeyup","keyup"),onNodeChanged:rft(i,f,"onNodeChanged","selectionchange"),onDomChanged:i.onDomChanged,onScrollToCursor:i.onScrollToCursor,onScrollToElement:i.onScrollToElement,onToReading:i.onToReading,onToEditing:i.onToEditing,onToolbarScrollStart:i.onToolbarScrollStart,onTouchContent:i.onTouchContent,onTapContent:i.onTapContent,onTouchToolstrip:i.onTouchToolstrip,getCursorBox:h}})})})}},sh="data-ephox-mobile-fullscreen-style",uft="position:absolute!important;",fft="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;",lnt=dt.detect().os.isAndroid(),eft=function(n,t){var e,r,u=function(n){return function(t){var i=f.get(t,"style"),r=i===undefined?"no-styles":i.trim();r!==n&&(f.set(t,sh,r),f.set(t,"style",n))}},o=dlt(n,"*"),c=i.bind(o,function(n){return glt(n,"*")}),s=(e=t,(r=h.get(e,"background-color"))!==undefined&&""!==r?"background-color:"+r+"!important":"background-color:rgb(255,255,255)!important;");i.each(c,u("display:none!important;"));i.each(o,u(uft+fft+s));u((!0===lnt?"":uft)+fft+s)(n)},oft=function(){var n=klt("["+sh+"]");i.each(n,function(n){var t=f.get(n,sh);"no-styles"!==t?f.set(n,"style",t):f.remove(n,"style");f.remove(n,sh)})},sft=function(){var i=pd("head").getOrDie(),n=pd('meta[name="viewport"]').getOrThunk(function(){var n=e.fromTag("meta");return f.set(n,"name","viewport"),ri.append(i,n),n}),t=f.get(n,"content");return{maximize:function(){f.set(n,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){t!==undefined&&null!==t&&0<t.length?f.set(n,"content",t):f.set(n,"content","user-scalable=yes")}}},ant=function(n,t){var i=sft(),r=ff(),u=ff();return{enter:function(){t.hide();a.add(n.container,o.resolve("fullscreen-maximized"));a.add(n.container,o.resolve("android-maximized"));i.maximize();a.add(n.body,o.resolve("android-scroll-reload"));r.set(hnt(n.win,oh.getWin(n.editor).getOrDie("no")));oh.getActiveApi(n.editor).each(function(t){eft(n.container,t.body());u.set(ogt(t,n.toolstrip,n.alloy))})},exit:function(){i.restore();t.show();a.remove(n.container,o.resolve("fullscreen-maximized"));a.remove(n.container,o.resolve("android-maximized"));oft();a.remove(n.body,o.resolve("android-scroll-reload"));u.clear();r.clear()}}},vnt=function(n,t){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){var r=arguments;null===i&&(i=setTimeout(function(){n.apply(null,r);r=i=null},t))}}},hft=function(n,t){var i=null;return{cancel:function(){null!==i&&(clearTimeout(i),i=null)},throttle:function(){var r=arguments;null!==i&&clearTimeout(i);i=setTimeout(function(){n.apply(null,r);r=i=null},t)}}},cft=function(n){var t=su(yi.sketch({dom:et('<div aria-hidden="true" class="${prefix}-mask-tap-icon"><\/div>'),containerBehaviours:w([d.config({toggleClass:o.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),i=vnt(n,200);return yi.sketch({dom:et('<div class="${prefix}-disabled-mask"><\/div>'),components:[yi.sketch({dom:et('<div class="${prefix}-content-container"><\/div>'),components:[eu.sketch({dom:et('<div class="${prefix}-content-tap-section"><\/div>'),components:[t.asSpec()],action:function(){i.throttle()},buttonBehaviours:w([d.config({toggleClass:o.resolve("mask-tap-icon-selected")})])})]})]})},lft=kt([fr("editor",[u("getFrame"),nt("getBody"),nt("getDoc"),nt("getWin"),nt("getSelection"),nt("setSelection"),nt("clearSelection"),nt("cursorSaver"),nt("onKeyup"),nt("onNodeChanged"),nt("getCursorBox"),u("onDomChanged"),r("onTouchContent",n.noop),r("onTapContent",n.noop),r("onTouchToolstrip",n.noop),r("onScrollToCursor",n.constant({unbind:n.noop})),r("onScrollToElement",n.constant({unbind:n.noop})),r("onToEditing",n.constant({unbind:n.noop})),r("onToReading",n.constant({unbind:n.noop})),r("onToolbarScrollStart",n.identity)]),u("socket"),u("toolstrip"),u("dropup"),u("toolbar"),u("container"),u("alloy"),si("win",function(n){return k.owner(n.socket).dom().defaultView}),si("body",function(n){return e.fromDom(n.socket.dom().ownerDocument.body)}),r("translate",n.identity),r("setReadOnly",n.noop),r("readOnlyOnInit",n.constant(!0))]),ynt=function(t){var i=oi("Getting AndroidWebapp schema",lft,t),r,f,u;return h.set(i.toolstrip,"width","100%"),r=ki(cft(function(){i.setReadOnly(i.readOnlyOnInit());u.enter()},i.translate)),i.alloy.add(r),f={show:function(){i.alloy.add(r)},hide:function(){i.alloy.remove(r)}},ri.append(i.container,r.element()),u=ant(i,f),{setReadOnly:i.setReadOnly,refreshStructure:n.noop,enter:u.enter,exit:u.exit,destroy:n.noop}},pnt=n.constant([r("shell",!0),pi("toolbarBehaviours",[yt])]),wnt=n.constant([yn({name:"groups",overrides:function(){return{behaviours:w([yt.config({})])}}})]),hh=(n.constant("Toolbar"),ps({name:"Toolbar",configFields:pnt(),partFields:wnt(),factory:function(n,i){var u=function(i){return n.shell()?t.some(i):ar(i,n,"groups")},r=n.shell()?{behaviours:[yt.config({})],components:[]}:{behaviours:[],components:i};return{uid:n.uid(),dom:n.dom(),components:r.components,behaviours:s.deepMerge(w(r.behaviours),wi(n.toolbarBehaviours())),apis:{setGroups:function(n,t){u(n).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components");},function(n){yt.set(n,t)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(n,t,i){n.setGroups(t,i)}}})),bnt=n.constant([u("items"),(ait=["itemClass"],fr("markers",i.map(ait,u))),pi("tgroupBehaviours",[ct])]),knt=n.constant([pn({name:"items",unit:"item",overrides:function(n){return{domModification:{classes:[n.markers().itemClass()]}}}})]),aft=(n.constant("ToolbarGroup"),ps({name:"ToolbarGroup",configFields:bnt(),partFields:knt(),factory:function(n,t,i){return s.deepMerge({dom:{attributes:{role:"toolbar"}}},{uid:n.uid(),dom:n.dom(),components:t,behaviours:s.deepMerge(w([ct.config({mode:"flow",selector:"."+n.markers().itemClass()})]),wi(n.tgroupBehaviours())),"debug.sketcher":i["debug.sketcher"]})}})),vft="data-"+o.resolve("horizontal-scroll"),dnt=function(n){return 0<n.dom().scrollTop||function(n){n.dom().scrollTop=1;var t=0!==n.dom().scrollTop;return n.dom().scrollTop=0,t}(n)},gnt=function(n){return 0<n.dom().scrollLeft||function(n){n.dom().scrollLeft=1;var t=0!==n.dom().scrollLeft;return n.dom().scrollLeft=0,t}(n)},nti=function(n){return"true"===f.get(n,vft)?gnt:dnt},yft={exclusive:function(t,i){return ft(t,"touchmove",function(t){cr(t.target(),i).filter(nti).fold(function(){t.raw().preventDefault()},n.noop)})},markAsHorizontal:function(n){f.set(n,vft,"true")}},tti=function(n,t){yt.append(n,ve(t))},iti=function(n,t){yt.remove(n,t)},wft=function(n){return ki(eu.sketch({dom:et('<div class="${prefix}-mask-edit-icon ${prefix}-icon"><\/div>'),action:function(){n.run(function(n){n.setReadOnly(!1)})}}))},bft=function(){return ki(yi.sketch({dom:et('<div class="${prefix}-editor-socket"><\/div>'),components:[],containerBehaviours:w([yt.config({})])}))},kft=function(n,t,i,r){(!0===i?yo.toAlpha:yo.toOmega)(r);(i?tti:iti)(n,t)},be=function(n,t){return t.getAnimationRoot().fold(function(){return n.element()},function(t){return t(n)})},ke=function(n){return n.dimension().property()},vv=function(n,t){return n.dimension().getDimension()(t)},yv=function(n,t){var i=be(n,t);tv(i,[t.shrinkingClass(),t.growingClass()])},pv=function(n,t){a.remove(n.element(),t.openClass());a.add(n.element(),t.closedClass());h.set(n.element(),ke(t),"0px");h.reflow(n.element())},dft=function(n,t){a.remove(n.element(),t.closedClass());a.add(n.element(),t.openClass());h.remove(n.element(),ke(t))},gft=function(n,t,i){i.setCollapsed();h.set(n.element(),ke(t),vv(t,n.element()));h.reflow(n.element());var r=be(n,t);a.add(r,t.shrinkingClass());pv(n,t);t.onStartShrink()(n)},net=function(n,t,i){var r=function(n,t){dft(n,t);var i=vv(t,n.element());return pv(n,t),i}(n,t),u=be(n,t);a.add(u,t.growingClass());dft(n,t);h.set(n.element(),ke(t),r);i.setExpanded();t.onStartGrow()(n)},tet=function(n,t){var i=be(n,t);return!0===a.has(i,t.growingClass())},iet=function(n,t){var i=be(n,t);return!0===a.has(i,t.shrinkingClass())},rti=Object.freeze({grow:function(n,t,i){i.isExpanded()||net(n,t,i)},shrink:function(n,t,i){i.isExpanded()&&gft(n,t,i)},immediateShrink:function(n,t,i){var r,u;i.isExpanded()&&(r=n,u=t,i.setCollapsed(),h.set(r.element(),ke(u),vv(u,r.element())),h.reflow(r.element()),yv(r,u),pv(r,u),u.onStartShrink()(r),u.onShrunk()(r))},hasGrown:function(n,t,i){return i.isExpanded()},hasShrunk:function(n,t,i){return i.isCollapsed()},isGrowing:tet,isShrinking:iet,isTransitioning:function(n,t){return!0===tet(n,t)||!0===iet(n,t)},toggleGrow:function(n,t,i){(i.isExpanded()?gft:net)(n,t,i)},disableTransitions:yv}),uti=Object.freeze({exhibit:function(n,t){var i=t.expanded();return hi(i?{classes:[t.openClass()],styles:{}}:{classes:[t.closedClass()],styles:g(t.dimension().property(),"0px")})},events:function(n,t){return ut([p(bh(),function(i,r){r.event().raw().propertyName===n.dimension().property()&&(yv(i,n),t.isExpanded()&&h.remove(i.element(),n.dimension().property()),(t.isExpanded()?n.onGrown():n.onShrunk())(i,r))})])}}),fti=[u("closedClass"),u("openClass"),u("shrinkingClass"),u("growingClass"),nt("getAnimationRoot"),gt("onShrunk"),gt("onStartShrink"),gt("onGrown"),gt("onStartGrow"),r("expanded",!1),ne("dimension",bu("property",{width:[lt("property","width"),lt("getDimension",function(n){return he(n)+"px"})],height:[lt("property","height"),lt("getDimension",function(n){return li(n)+"px"})]}))],eti=Object.freeze({init:function(t){var i=tt(t.expanded());return du({isExpanded:function(){return!0===i.get()},isCollapsed:function(){return!1===i.get()},setCollapsed:n.curry(i.set,!1),setExpanded:n.curry(i.set,!0),readState:function(){return"expanded: "+i.get()}})}}),de=ni({fields:fti,name:"sliding",active:uti,apis:rti,state:eti}),ret=function(t,i){var r=ki(yi.sketch({dom:{tag:"div",classes:o.resolve("dropup")},components:[],containerBehaviours:w([yt.config({}),de.config({closedClass:o.resolve("dropup-closed"),openClass:o.resolve("dropup-open"),shrinkingClass:o.resolve("dropup-shrinking"),growingClass:o.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(n){t();i();yt.set(n,[])},onGrown:function(){t();i()}}),bo(function(){u(n.noop)})])})),u=function(n){window.requestAnimationFrame(function(){n();de.shrink(r)})};return{appear:function(n,t,i){!0===de.hasShrunk(r)&&!1===de.isTransitioning(r)&&window.requestAnimationFrame(function(){t(i);yt.set(r,[n()]);de.grow(r)})},disappear:u,component:n.constant(r),element:r.element}},uet=dt.detect().browser.isFirefox(),oti=wt([sb("triggerEvent"),sb("broadcastEvent"),r("stopBackspace",!0)]),sti=function(n,t){var u,f,e,o,r=oi("Getting GUI events settings",oti,t),s=dt.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],h=out(r),l=i.map(s.concat(["selectstart","input","contextmenu","change","transitionend","dragstart","dragover","drop"]),function(t){return ft(n,t,function(n){h.fireIfReady(n,t).each(function(t){t&&n.kill()});r.triggerEvent(t,n)&&n.kill()})}),a=ft(n,"keydown",function(n){var t;r.triggerEvent("keydown",n)?n.kill():!0!==r.stopBackspace||(t=n).raw().which!==c.BACKSPACE()[0]||i.contains(["input","textarea"],st.name(t.target()))||n.prevent()}),v=(u=n,f=function(n){r.triggerEvent("focusin",n)&&n.kill()},uet?ov(u,"focus",f):ft(u,"focusin",f)),y=(e=n,o=function(n){r.triggerEvent("focusout",n)&&n.kill();setTimeout(function(){r.triggerEvent(sst(),n)},0)},uet?ov(e,"blur",o):ft(e,"focusout",o)),p=k.defaultView(n),w=ft(p,"scroll",function(n){r.broadcastEvent(lst(),n)&&n.kill()});return{unbind:function(){i.each(l,function(n){n.unbind()});a.unbind();v.unbind();y.unbind();w.unbind()}}},fet=function(n,t){var i=it(n,"target").map(function(n){return n()}).getOr(t);return tt(i)},ge=ui([{stopped:[]},{resume:["element"]},{complete:[]}]),eet=function(t,i,r,u,f,e){var l,o,s,h,a=t(i,u),c=(l=r,o=f,s=tt(!1),h=tt(!1),{stop:function(){s.set(!0)},cut:function(){h.set(!0)},isStopped:s.get,isCut:h.get,event:n.constant(l),setSource:o.set,getSource:o.get});return a.fold(function(){return e.logEventNoHandlers(i,u),ge.complete()},function(n){var t=n.descHandler();return nv(t)(c),c.isStopped()?(e.logEventStopped(i,n.element(),t.purpose()),ge.stopped()):c.isCut()?(e.logEventCut(i,n.element(),t.purpose()),ge.complete()):k.parent(n.element()).fold(function(){return e.logNoParent(i,n.element(),t.purpose()),ge.complete()},function(r){return e.logEventResponse(i,n.element(),t.purpose()),ge.resume(r)})})},oet=function(n,t,i,r,u,f){return eet(n,t,i,r,u,f).fold(function(){return!0},function(r){return oet(n,t,i,r,u,f)},function(){return!1})},hti=function(t,r){var f,u,e=(f=r,u=tt(!1),{stop:function(){u.set(!0)},cut:n.noop,isStopped:u.get,isCut:n.constant(!1),event:n.constant(f),setTarget:n.die("Cannot set target of a broadcasted event"),getTarget:n.die("Cannot get target of a broadcasted event")});return i.each(t,function(n){var t=n.descHandler();nv(t)(e)}),e.isStopped()},set=function(n,t,i,r,u){var f=fet(i,r);return oet(n,t,i,r,f,u)},cti=function(n,t,i){return vl.closest(n,function(n){return t(n).isSome()},i).bind(t)},lti=rr.immutable("element","descHandler"),ati=function(t,i){return{id:n.constant(t),descHandler:n.constant(i)}},pti=function(t){var p=function(n){return k.parent(t.element()).fold(function(){return!0},function(t){return ht(n,t)})},r=yti(),f=function(n,t){return r.find(p,n,t)},w=sti(t.element(),{triggerEvent:function(n,t){return yl(n,t.target(),function(i){return r=f,u=n,o=i,s=(e=t).target(),set(r,u,e,s,o);var r,u,e,o,s})},broadcastEvent:function(n,t){var i=r.filter(n);return hti(i,t)}}),e=git({debugInfo:n.constant("real"),triggerEvent:function(n,t,i){yl(n,t,function(r){set(f,n,i,t,r)})},triggerFocus:function(t,i){ee(t).fold(function(){tu(t)},function(){yl(br(),t,function(r){var e,o,u,s,h,c;e=f;o=br();u={originator:n.constant(i),target:n.constant(t)};h=r;c=fet(u,s=t);eet(e,o,u,s,c,h)})})},triggerEscape:function(n,t){e.triggerEvent("keydown",n.element(),t.event())},getByUid:function(n){return s(n)},getByDom:function(n){return y(n)},build:ki,addToGui:function(n){h(n)},removeFromGui:function(n){c(n)},addToWorld:function(n){u(n)},removeFromWorld:function(n){o(n)},broadcast:function(n){a(n)},broadcastOn:function(n,t){v(n,t)},isConnected:n.constant(!0)}),u=function(t){t.connect(e);st.isText(t.element())||(r.register(t),i.each(t.components(),u),e.triggerEvent(ic(),t.element(),{target:n.constant(t.element())}))},o=function(n){st.isText(n.element())||(i.each(n.components(),o),r.unregister(n));n.disconnect()},h=function(n){ww(t,n)},c=function(n){dw(n)},l=function(n){var t=r.filter(kp());i.each(t,function(t){var i=t.descHandler();nv(i)(n)})},a=function(t){l({universal:n.constant(!0),data:n.constant(t)})},v=function(t,i){l({universal:n.constant(!1),channels:n.constant(t),data:n.constant(i)})},s=function(n){return r.getById(n).fold(function(){return b.error(new Error('Could not find component with uid: "'+n+'" in system.'))},b.value)},y=function(n){var t=ee(n).getOr("not found");return s(t)};return u(t),{root:n.constant(t),element:t.element,destroy:function(){w.unbind();kr.remove(t.element())},add:h,remove:c,getByUid:s,getByDom:y,addToWorld:u,removeFromWorld:o,broadcast:a,broadcastOn:v}},wti=n.constant(o.resolve("readonly-mode")),bti=n.constant(o.resolve("edit-mode")),cet=function(n,t){var i=e.fromTag("input");h.setAll(i,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"});ri.append(n,i);tu(i);t(i);kr.remove(i)},aet=function(n){var i=n.getSelection(),t,r;0<i.rangeCount&&(t=i.getRangeAt(0),r=n.document.createRange(),r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset),i.removeAllRanges(),i.addRange(r))},wv=function(n,t){nf().each(function(n){ht(n,t)||or(n)});n.focus();tu(e.fromDom(n.document.body));aet(n)},kti={stubborn:function(n,t,r,u){var f=function(){wv(t,u)},e=ft(r,"keydown",function(n){i.contains(["input","textarea"],st.name(n.target()))||f()});return{toReading:function(){cet(n,or)},toEditing:f,onToolbarTouch:function(){},destroy:function(){e.unbind()}}},timid:function(t,i,r,u){var f=function(){or(u)};return{toReading:function(){f()},toEditing:function(){wv(i,u)},onToolbarTouch:function(){f()},destroy:n.noop}}},dti=function(n,t,r,u){var f=function(){t.run(function(n){n.refreshSelection()})},s=function(n,i){var r=n-u.dom().scrollTop;t.run(function(n){n.scrollIntoView(r,r+i)})},h=function(){t.run(function(n){n.clearSelection()})},c=function(){n.getCursorBox().each(function(n){s(n.top(),n.height())});t.run(function(n){n.syncHeight()})},e=sut(n),o=hft(c,300),l=[n.onKeyup(function(){h();o.throttle()}),n.onNodeChanged(f),n.onDomChanged(o.throttle),n.onDomChanged(f),n.onScrollToCursor(function(n){n.preventDefault();o.throttle()}),n.onScrollToElement(function(n){n.element();s(t,u)}),n.onToEditing(function(){t.run(function(n){n.toEditing()})}),n.onToReading(function(){t.run(function(n){n.toReading()})}),ft(n.doc(),"touchend",function(t){ht(n.html(),t.target())||ht(n.body(),t.target())}),ft(r,"transitionend",function(n){var i;"height"===n.raw().propertyName&&(i=li(r),t.run(function(n){n.setViewportOffset(i)}),f(),c())}),ov(r,"touchstart",function(i){var r;t.run(function(n){n.highlightSelection()});r=i;t.run(function(n){n.onToolbarTouch(r)});n.onTouchToolstrip()}),ft(n.body(),"touchstart",function(t){h();n.onTouchContent();e.fireTouchstart(t)}),e.onTouchmove(),e.onTouchend(),ft(n.body(),"click",function(n){n.kill()}),ft(r,"touchmove",function(){n.onToolbarScrollStart()})];return{destroy:function(){i.each(l,function(n){n.unbind()})}}},bv=function(n){var r=t.none(),u=[],f=function(n){e()?o(n):u.push(n)},e=function(){return r.isSome()},s=function(n){i.each(n,o)},o=function(n){r.each(function(t){setTimeout(function(){n(t)},0)})};return n(function(n){r=t.some(n);s(u);u=[]}),{get:f,map:function(n){return bv(function(t){f(function(i){t(n(i))})})},isReady:e}},kv={nu:bv,pure:function(n){return bv(function(t){t(n)})}},gti=function(n){return function(){var t=Array.prototype.slice.call(arguments),i=this;setTimeout(function(){n.apply(i,t)},0)}},no=function(n){var t=function(t){n(gti(t))};return{map:function(n){return no(function(i){t(function(t){var r=n(t);i(r)})})},bind:function(n){return no(function(i){t(function(t){n(t).get(i)})})},anonBind:function(n){return no(function(i){t(function(){n.get(i)})})},toLazy:function(){return kv.nu(t)},get:t}},of={nu:no,pure:function(n){return no(function(t){t(n)})}},nii=function(n,i,r){return Math.abs(n-i)<=r?t.none():n<i?t.some(n+r):t.some(n-r)},tii=function(){var n=null;return{animate:function(t,i,r,u,f,e){var s=!1,o=function(n){s=!0;f(n)},h;clearInterval(n);h=function(t){clearInterval(n);o(t)};n=setInterval(function(){var f=t();nii(f,i,r).fold(function(){clearInterval(n);o(i)},function(r){if(u(r,h),!s){var e=t();(e!==r||Math.abs(e-i)>Math.abs(f-i))&&(clearInterval(n),o(i))}})},e)}}},iii=function(n,i){return rlt([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(r){return n<=r.width&&i<=r.height?t.some(r.keyboard):t.none()}).getOr({portrait:i/5,landscape:n/4})},rii=function(n){var t,i=ugt(n).isPortrait(),r=iii((t=n).screen.width,t.screen.height),u=i?r.portrait:r.landscape;return(i?n.screen.height:n.screen.width)-n.innerHeight>u?0:u},vet=function(n,t){var i=k.owner(n).dom().defaultView;return li(n)+li(t)-rii(i)},uii=vet,yet=function(n,t,i){var r=vet(t,i),u=li(t)+li(i)-r;h.set(n,"padding-bottom",u+"px")},pet=ui([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),di="data-"+o.resolve("position-y-fixed"),cu="data-"+o.resolve("y-property"),dv="data-"+o.resolve("scrolling"),wet="data-"+o.resolve("last-window-height"),bet=function(n){return uh(n,di)},fii=function(n,t){var i=f.get(n,cu);return pet.fixed(n,i,t)},eii=function(n,t){return pet.scroller(n,t)},oii=function(n){var t=bet(n);return("true"===f.get(n,dv)?eii:fii)(n,t)},ket=function(n,t,i){var r=k.owner(n).dom().defaultView.innerHeight;return f.set(n,wet,r+"px"),r-t-i},sii=function(n){var t=ii(n,"["+di+"]");return i.map(t,oii)},hii=function(t,i,r,u){var o,l,c,a,e,v,s,y,g=k.owner(t).dom().defaultView,nt=(y=f.get(s=r,"style"),h.setAll(s,{position:"absolute",top:"0px"}),f.set(s,di,"0px"),f.set(s,cu,"top"),{restore:function(){f.set(s,"style",y||"");f.remove(s,di);f.remove(s,cu)}}),p=li(r),tt=li(u),it=ket(t,p,tt),rt=(c=p,a=it,v=f.get(e=t,"style"),hu.register(e),h.setAll(e,{position:"absolute",height:a+"px",width:"100%",top:c+"px"}),f.set(e,di,c+"px"),f.set(e,dv,"true"),f.set(e,cu,"top"),{restore:function(){hu.deregister(e);f.set(e,"style",v||"");f.remove(e,di);f.remove(e,dv);f.remove(e,cu)}}),ut=(l=f.get(o=u,"style"),h.setAll(o,{position:"absolute",bottom:"0px"}),f.set(o,di,"0px"),f.set(o,cu,"bottom"),{restore:function(){f.set(o,"style",l||"");f.remove(o,di);f.remove(o,cu)}}),w=!0,b=function(){var n=g.innerHeight;return uh(t,wet)<n},d=function(){if(w){var n=li(r),e=li(u),o=ket(t,n,e);f.set(t,di,n+"px");h.set(t,"height",o+"px");h.set(u,"bottom",-(n+o+e)+"px");yet(i,t,u)}};return yet(i,t,u),{setViewportOffset:function(n){f.set(t,di,n+"px");d()},isExpanding:b,isShrinking:n.not(b),refresh:d,restore:function(){w=!1;nt.restore();rt.restore();ut.restore()}}},cii=bet,gv=tii(),ch="data-"+o.resolve("last-scroll-top"),det=function(n){var t=h.getRaw(n,"top").getOr(0);return parseInt(t,10)},get=function(n){return parseInt(n.dom().scrollTop,10)},not=function(n,t){var i=t+cii(n)+"px";h.set(n,"top",i)},lii=function(t,i,r){return of.nu(function(u){var f=n.curry(get,t);gv.animate(f,i,15,function(n){t.dom().scrollTop=n;h.set(t,"top",det(t)+15+"px")},function(){t.dom().scrollTop=i;h.set(t,"top",r+"px");u(i)},10)})},tot=function(t,i){return of.nu(function(r){var u=n.curry(get,t),e,o;f.set(t,ch,u());e=Math.abs(i-u());o=Math.ceil(e/10);gv.animate(u,i,o,function(n,i){uh(t,ch)!==t.dom().scrollTop?i(t.dom().scrollTop):(t.dom().scrollTop=n,f.set(t,ch,n))},function(){t.dom().scrollTop=i;f.set(t,ch,i);r(i)},10)})},aii=function(t,i){return of.nu(function(r){var u=n.curry(det,t),f=function(n){h.set(t,"top",n+"px")},e=Math.abs(i-u()),o=Math.ceil(e/10);gv.animate(u,i,o,f,function(){f(i);r(i)},10)})},vii=function(n,t,i){var r=k.owner(n).dom().defaultView;return of.nu(function(u){not(n,i);not(t,i);r.scrollTo(0,i);u(i)})},yii=function(t,i,r,u,f){var e=uii(i,r),o=n.curry(aet,t);e<u||e<f?tot(i,i.dom().scrollTop-e+f).get(o):u<0&&tot(i,i.dom().scrollTop+u).get(o)},pii=function(n,t){return t(function(t){var r=[],u=0;0===n.length?t([]):i.each(n,function(i,f){var e;i.get((e=f,function(i){r[e]=i;++u>=n.length&&t(r)}))})})},wii=function(n){return pii(n,of.nu)},bii=wii,kii=function(n,t){return n.fold(function(n,i,r){return u=n,f=i,o=t+(e=r),h.set(u,f,o+"px"),of.pure(e);var u,f,e,o},function(n,i){return r=n,u=t+(f=i),e=h.getRaw(r,"top").getOr(f),o=u-parseInt(e,10),s=r.dom().scrollTop+o,lii(r,s,u);var r,f,u,e,o,s})},iot=function(n,t){var r=sii(n),u=i.map(r,function(n){return kii(n,t)});return bii(u)},dii=function(i,r,u,f,o,s){var c,h,l=(c=function(n){return vii(i,r,n)},h=tt(kv.pure({})),{start:function(n){var t=kv.nu(function(t){return c(n).get(t)});h.set(t)},idle:function(n){h.get().get(function(){n()})}}),a=hft(function(){l.idle(function(){iot(u,f.pageYOffset).get(function(){var i;(i=cv(s),t.from(i[0]).bind(function(i){var u=i.top()-r.dom().scrollTop;return u>f.innerHeight+5||u<-5?t.some({top:n.constant(u),bottom:n.constant(u+i.height())}):t.none()})).each(function(n){r.dom().scrollTop=r.dom().scrollTop+n.top()});l.start(0);o.refresh()})})},1e3),v=ft(e.fromDom(f),"scroll",function(){f.pageYOffset<0||a.throttle()});return iot(u,f.pageYOffset).get(n.identity),{unbind:v.unbind}},gii=function(t){var f=t.cWin(),d=t.ceBody(),s=t.socket(),v=t.toolstrip(),g=t.toolbar(),c=t.contentElement(),nt=t.keyboardType(),y=t.outerWindow(),p=t.dropup(),r=hii(s,d,v,p),l=nt(t.outerBody(),f,gi.body(),c,v,g),w=fut(y,{onChange:n.noop,onReady:r.refresh});w.onAdjustment(function(){r.refresh()});var tt=ft(e.fromDom(y),"resize",function(){r.isExpanding()&&r.refresh()}),it=dii(v,s,t.outerBody(),y,r,f),u=function(n,t){var f=n.document,r=e.fromTag("div");a.add(r,o.resolve("unfocused-selections"));ri.append(e.fromDom(f.documentElement),r);var s=ft(r,"touchstart",function(i){i.prevent();wv(n,t);u()}),c=function(n){var t=e.fromTag("span");return irt(t,[o.resolve("layer-editor"),o.resolve("unfocused-selection")]),h.setAll(t,{left:n.left()+"px",top:n.top()+"px",width:n.width()+"px",height:n.height()+"px"}),t},u=function(){kr.empty(r)};return{update:function(){u();var t=cv(n),f=i.map(t,c);lc(r,f)},isActive:function(){return 0<k.children(r).length},destroy:function(){s.unbind();kr.remove(r)},clear:u}}(f,c),b=function(){u.clear()};return{toEditing:function(){l.toEditing();b()},toReading:function(){l.toReading()},onToolbarTouch:function(n){l.onToolbarTouch(n)},refreshSelection:function(){u.isActive()&&u.update()},clearSelection:b,highlightSelection:function(){u.update()},scrollIntoView:function(n,t){yii(f,s,p,n,t)},updateToolbarPadding:n.noop,setViewportOffset:function(t){r.setViewportOffset(t);aii(s,t).get(n.identity)},syncHeight:function(){h.set(c,"height",c.dom().contentWindow.document.body.scrollHeight+"px")},refreshStructure:r.refresh,destroy:function(){r.restore();w.destroy();it.unbind();tt.unbind();l.destroy();u.destroy();cet(gi.body(),or)}}},nri=function(t,i){var s=sft(),f=ga(),u=ga(),r=ff(),c=ff();return{enter:function(){i.hide();var l=e.fromDom(document);oh.getActiveApi(t.editor).each(function(i){f.set({socketHeight:h.getRaw(t.socket,"height"),iframeHeight:h.getRaw(i.frame(),"height"),outerScroll:document.body.scrollTop});u.set({exclusives:yft.exclusive(l,"."+hu.scrollable())});a.add(t.container,o.resolve("fullscreen-maximized"));eft(t.container,i.body());s.maximize();h.set(t.socket,"overflow","scroll");h.set(t.socket,"-webkit-overflow-scrolling","touch");tu(i.body());var e=rr.immutableBag(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);r.set(gii(e({cWin:i.win(),ceBody:i.body(),socket:t.socket,toolstrip:t.toolstrip,toolbar:t.toolbar,dropup:t.dropup.element(),contentElement:i.frame(),cursor:n.noop,outerBody:t.body,outerWindow:t.win,keyboardType:kti.stubborn,isScrolling:function(){return u.get().exists(function(n){return n.socket.isScrolling()})}})));r.run(function(n){n.syncHeight()});c.set(dti(i,r,t.toolstrip,t.socket,t.dropup))})},refreshStructure:function(){r.run(function(n){n.refreshStructure()})},exit:function(){s.restore();c.clear();r.clear();i.show();f.on(function(n){n.socketHeight.each(function(n){h.set(t.socket,"height",n)});n.iframeHeight.each(function(n){h.set(t.editor.getFrame(),"height",n)});document.body.scrollTop=n.scrollTop});f.clear();u.on(function(n){n.exclusives.unbind()});u.clear();a.remove(t.container,o.resolve("fullscreen-maximized"));oft();hu.deregister(t.toolbar);h.remove(t.socket,"overflow");h.remove(t.socket,"-webkit-overflow-scrolling");or(t.editor.getFrame());oh.getActiveApi(t.editor).each(function(n){n.clearSelection()})}}},tri=function(t){var i=oi("Getting IosWebapp schema",lft,t),u,r;return h.set(i.toolstrip,"width","100%"),h.set(i.container,"position","relative"),u=ki(cft(function(){i.setReadOnly(i.readOnlyOnInit());r.enter()},i.translate)),i.alloy.add(u),r=nri(i,{show:function(){i.alloy.add(u)},hide:function(){i.alloy.remove(u)}}),{setReadOnly:i.setReadOnly,refreshStructure:r.refreshStructure,enter:r.enter,exit:r.exit,destroy:n.noop}},iri=tinymce.util.Tools.resolve("tinymce.EditorManager"),rri=function(n){var t=it(n.settings,"skin_url").fold(function(){return iri.baseURL+"/skins/lightgray"},function(n){return n});return{content:t+"/content.mobile.min.css",ui:t+"/skin.mobile.min.css"}},rot=function(n,t,i){n.system().broadcastOn([iu.formatChanged()],{command:t,state:i})},uri=function(n,t){var r=l.keys(t.formatter.get());i.each(r,function(i){t.formatter.formatChanged(i,function(t){rot(n,i,t)})});i.each(["ul","ol"],function(i){t.selection.selectorChanged(i,function(t){rot(n,i,t)})})},uot=(n.constant(["x-small","small","medium","large","x-large"]),function(n){var t=function(){n._skinLoaded=!0;n.fire("SkinLoaded")};return function(){n.initialized?t():n.on("init",t)}}),fot=n.constant("toReading"),eot=n.constant("toEditing");pct.add("mobile",function(t){return{getNotificationManagerImpl:function(){return{open:n.identity,close:n.noop,reposition:n.noop,getArgs:n.identity}},renderUI:function(r){var g=rri(t);0==(!1===t.settings.skin)?(t.contentCSS.push(g.content),yct.DOM.styleSheetLoader.load(g.ui,uot(t))):uot(t)();var nt,h,f,l,p,a,w,it,c,s,y,b,v,d,rt=function(){t.fire("scrollIntoView")},ut=e.fromTag("div"),u=dt.detect().os.isAndroid()?(it=rt,c=het({classes:[o.resolve("android-container")]}),s=pft(),y=ff(),b=wft(y),v=bft(),d=ret(n.noop,it),c.add(s.wrapper()),c.add(v),c.add(d.component()),{system:n.constant(c),element:c.element,init:function(n){y.set(ynt(n))},exit:function(){y.run(function(n){n.exit();yt.remove(v,b)})},setToolbarGroups:function(n){var t=s.createGroups(n);s.setGroups(t)},setContextToolbar:function(n){var t=s.createGroups(n);s.setContextToolbar(t)},focusToolbar:function(){s.focus()},restoreToolbar:function(){s.restoreToolbar()},updateMode:function(n){kft(v,b,n,c.root())},socket:n.constant(v),dropup:n.constant(d)}):(nt=rt,h=het({classes:[o.resolve("ios-container")]}),f=pft(),l=ff(),p=wft(l),a=bft(),w=ret(function(){l.run(function(n){n.refreshStructure()})},nt),h.add(f.wrapper()),h.add(a),h.add(w.component()),{system:n.constant(h),element:h.element,init:function(n){l.set(tri(n))},exit:function(){l.run(function(n){yt.remove(a,p);n.exit()})},setToolbarGroups:function(n){var t=f.createGroups(n);f.setGroups(t)},setContextToolbar:function(n){var t=f.createGroups(n);f.setContextToolbar(t)},focusToolbar:function(){f.focus()},restoreToolbar:function(){f.restoreToolbar()},updateMode:function(n){kft(a,p,n,h.root())},socket:n.constant(a),dropup:n.constant(w)}),ht=e.fromDom(r.targetNode);ri.after(ht,ut),function(n,t){ri.append(n,t.element());var r=k.children(t.element());i.each(r,function(n){t.getByDom(n).each(vc)})}(ut,u.system());var ft=r.targetNode.ownerDocument.defaultView,ct=fut(ft,{onChange:function(){u.system().broadcastOn([iu.orientationChanged()],{width:fgt(ft)})},onReady:n.noop}),et=function(n,i,r,f){!1===f&&t.selection.collapse();var e=lt(n,i,r);u.setToolbarGroups(!0===f?e.readOnly:e.main);t.setMode(!0===f?"readonly":"design");t.fire(!0===f?fot():eot());u.updateMode(f)},lt=function(n,t,i){var r=n.get();return{readOnly:r.backToMask.concat(t.get()),main:r.backToMask.concat(i.get())}},ot=function(n,i){return t.on(n,i),{unbind:function(){t.off(n)}}};return t.on("init",function(){u.init({editor:{getFrame:function(){return e.fromDom(t.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:n.noop}},onToReading:function(n){return ot(fot(),n)},onToEditing:function(n){return ot(eot(),n)},onScrollToCursor:function(n){return t.on("scrollIntoView",function(t){n(t)}),{unbind:function(){t.off("scrollIntoView");ct.destroy()}}},onTouchToolstrip:function(){i()},onTouchContent:function(){var n,r=e.fromDom(t.editorContainer.querySelector("."+o.resolve("toolbar")));(n=r,po(n).bind(function(n){return u.system().getByDom(n).toOption()})).each(rc);u.restoreToolbar();i()},onTapContent:function(n){var i=n.target();"img"===st.name(i)?(t.selection.select(i.dom()),n.kill()):"a"===st.name(i)&&u.system().getByDom(e.fromDom(t.editorContainer)).each(function(n){yo.isAlpha(n)&&wct(i.dom())})}},container:e.fromDom(t.editorContainer),socket:e.fromDom(t.contentAreaContainer),toolstrip:e.fromDom(t.editorContainer.querySelector("."+o.resolve("toolstrip"))),toolbar:e.fromDom(t.editorContainer.querySelector("."+o.resolve("toolbar"))),dropup:u.dropup(),alloy:u.system(),translate:n.noop,setReadOnly:function(n){et(h,s,f,n)},readOnlyOnInit:function(){return!1}});var i=function(){u.dropup().disappear(function(){u.system().broadcastOn([iu.dropupDismissed()],{})})},c={label:"The first group",scrollable:!1,items:[vr.forToolbar("back",function(){t.selection.collapse();u.exit()},{})]},l={label:"Back to read only",scrollable:!1,items:[vr.forToolbar("readonly-back",function(){et(h,s,f,!0)},{})]},a=ddt(u,t),v=gdt(t.settings,a),r={label:"The extra group",scrollable:!1,items:[]},f=tt([{label:"the action group",scrollable:!0,items:v},r]),s=tt([{label:"The read only mode group",scrollable:!0,items:[]},r]),h=tt({backToMask:[c],backToReadOnly:[l]});uri(u,t)}),{iframeContainer:u.socket().element().dom(),editorContainer:u.element().dom()}}}})}();!function(){"use strict";function ol(){}function fi(n){this.cls=[];this.cls._map={};this.onchange=n||ol;this.prefix=""}function ae(n){return 0<n.nodeType}function oi(n){return n._eventDispatcher||(n._eventDispatcher=new se({scope:n,toggleEvent:function(t,i){i&&se.isNative(t)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[t]=!0,n.state.get("rendered")&&pe(n))}})),n._eventDispatcher}function pe(n){function c(t){var i=n.getParentCtrl(t.target);i&&i.fire(t.type,t)}function l(){var n=i._lastHoverCtrl;n&&(n.fire("mouseleave",{target:n.getEl()}),n.parents().each(function(n){n.fire("mouseleave",{target:n.getEl()})}),i._lastHoverCtrl=null)}function a(t){var r,s,e,o=n.getParentCtrl(t.target),f=i._lastHoverCtrl,u=0;if(o!==f){if((s=(i._lastHoverCtrl=o).parents().toArray().reverse()).push(o),f){for((e=f.parents().toArray().reverse()).push(f),u=0;u<e.length&&s[u]===e[u];u++);for(r=e.length-1;u<=r;r--)(f=e[r]).fire("mouseleave",{target:f.getEl()})}for(r=u;r<s.length;r++)(o=s[r]).fire("mouseenter",{target:o.getEl()})}}function h(t){t.preventDefault();"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail);t=n.fire("wheel",t)}var r,o,f,i,s,u,e;if(s=n._nativeEvents){for((f=n.parents().toArray()).unshift(n),r=0,o=f.length;!i&&r<o;r++)i=f[r]._eventsRoot;for(i||(i=f[f.length-1]||n),n._eventsRoot=i,o=r,r=0;r<o;r++)f[r]._eventsRoot=i;e=i._delegates;for(u in e||(e=i._delegates={}),s){if(!s)return!1;"wheel"!==u||al?("mouseenter"===u||"mouseleave"===u?i._hasMouseEnter||(t(i.getEl()).on("mouseleave",l).on("mouseover",a),i._hasMouseEnter=1):e[u]||(t(i.getEl()).on(u,c),e[u]=!0),s[u]=!1):ll?t(n.getEl()).on("mousewheel",h):t(n.getEl()).on("DOMMouseScroll",h)}}}function be(n,t,r){var a,v,u,f,e,o,h,c,l,s;return l=ke(),u=(v=i.getPos(t,gt.getUiContainer(n))).x,f=v.y,si(n)&&we(document.body)&&(u-=l.x,f-=l.y),a=n.getEl(),e=(s=i.getSize(a)).width,o=s.height,h=(s=i.getSize(t)).width,c=s.height,"b"===(r=(r||"").split(""))[0]&&(f+=c),"r"===r[1]&&(u+=h),"c"===r[0]&&(f+=Math.round(c/2)),"c"===r[1]&&(u+=Math.round(h/2)),"b"===r[3]&&(f-=o),"r"===r[4]&&(u-=e),"c"===r[3]&&(f-=Math.round(o/2)),"c"===r[4]&&(u-=Math.round(e/2)),{x:u,y:f,w:e,h:o}}function yl(t){var r=function(n){return n.inline?n.getElement():n.getContentAreaContainer()};return{open:function(u,f){var s,o=n.extend(u,{maxWidth:(s=r(t),i.getSize(s).width)}),e=new to(o);return 0<(e.args=o).timeout&&(e.timer=setTimeout(function(){e.close();f()},o.timeout)),e.on("close",function(){f()}),e.renderTo(),e},close:function(n){n.close()},reposition:function(n){var i;i=n;f.each(i,function(n){n.moveTo(0,0)}),function(n){if(0<n.length){var i=n.slice(0,1)[0],u=r(t);i.moveRel(u,"tc-tc");f.each(n,function(t,i){0<i&&t.moveRel(n[i-1].getEl(),"bc-tc")})}}(n)},getArgs:function(n){return n.args}}}function kr(n){var i,t;if(n.changedTouches)for(i="screenX screenY pageX pageY clientX clientY".split(" "),t=0;t<i.length;t++)n[i[t]]=n.changedTouches[0][i[t]]}function it(n,i){var o,s,h,u,e,c,l,r=i.document||document,f;i=i||{};f=r.getElementById(i.handle||n);h=function(n){var y,h,a,p,k,d,w,g,v,b,nt,tt=(y=r,v=Math.max,h=y.documentElement,a=y.body,p=v(h.scrollWidth,a.scrollWidth),k=v(h.clientWidth,a.clientWidth),d=v(h.offsetWidth,a.offsetWidth),w=v(h.scrollHeight,a.scrollHeight),g=v(h.clientHeight,a.clientHeight),{width:p<d?k:p,height:w<v(h.offsetHeight,a.offsetHeight)?g:w});kr(n);n.preventDefault();s=n.button;b=f;c=n.screenX;l=n.screenY;nt=window.getComputedStyle?window.getComputedStyle(b,null).getPropertyValue("cursor"):b.runtimeStyle.cursor;o=t("<div><\/div>").css({position:"absolute",top:0,left:0,width:tt.width,height:tt.height,zIndex:2147483647,opacity:.0001,cursor:nt}).appendTo(r.body);t(r).on("mousemove touchmove",e).on("mouseup touchend",u);i.start(n)};e=function(n){if(kr(n),n.button!==s)return u(n);n.deltaX=n.screenX-c;n.deltaY=n.screenY-l;n.preventDefault();i.drag(n)};u=function(n){kr(n);t(r).off("mousemove touchmove",e).off("mouseup touchend",u);o.remove();i.stop&&i.stop(n)};this.destroy=function(){t(f).off()};t(f).on("mousedown touchstart",h)}function io(n){function c(n){return n&&1===n.nodeType}function u(n){return c(n=n||t)?n.getAttribute("role"):null}function o(n){for(var r,i=n||t;i=i.parentNode;)if(r=u(i))return r}function l(n){var i=t;if(c(i))return i.getAttribute("aria-"+n)}function a(n){var t=n.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function f(n){var t=[];return function i(n){var r,f;if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled)for((a(r=n)&&!r.hidden||dr(r)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(u(r)))&&t.push(n),f=0;f<n.childNodes.length;f++)i(n.childNodes[f])}(n||e.getEl()),t}function v(n){var u,r,t;for((r=(n=n||i).parents().toArray()).unshift(n),t=0;t<r.length&&!(u=r[t]).settings.ariaRoot;t++);return u}function h(n,t){return n<0?n=t.length-1:n>=t.length&&(n=0),t[n]&&t[n].focus(),n}function r(n,i){var u=-1,e=v(),r;for(i=i||f(e.getEl()),r=0;r<i.length;r++)i[r]===t&&(u=r);u+=n;e.lastAriaIndex=h(u,i)}function p(){"tablist"===o()?r(-1,f(t.parentNode)):i.parent().submenu?y():r(-1)}function w(){var i=u(),n=o();"tablist"===n?r(1,f(t.parentNode)):"menuitem"===i&&"menu"===n&&l("haspopup")?s():r(1)}function b(){r(-1)}function k(){var n=u(),t=o();"menuitem"===n&&"menubar"===t?s():"button"===n&&l("haspopup")?s({key:"down"}):r(1)}function y(){i.fire("cancel")}function s(n){n=n||{};i.fire("click",{target:t,aria:n})}var t,i,e=n.root;try{t=document.activeElement}catch(d){t=document.body}return i=e.getParentCtrl(t),e.on("keydown",function(n){function e(n,i){a(t)||dr(t)||"slider"!==u(t)&&!1!==i(n)&&n.preventDefault()}if(!n.isDefaultPrevented())switch(n.keyCode){case 37:e(n,p);break;case 39:e(n,w);break;case 38:e(n,b);break;case 40:e(n,k);break;case 27:y();break;case 14:case 13:case 32:e(n,s);break;case 9:!function(n){if("tablist"===o()){var t=f(i.getEl("body"))[0];t&&t.focus()}else r(n.shiftKey?-1:1)}(n);n.preventDefault()}}),e.on("focusin",function(n){t=n.target;i=n.control}),{focusFirst:function(n){var t=v(n),i=f(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?h(t.lastAriaIndex,i):h(0,i)}}}function pl(n,t){for(;n;){if(n===t)return!0;n=n.parent()}}function wl(){gr||(gr=function(n){2!==n.button&&function(n){for(var t,i,r=s.length;r--;)if(t=s[r],i=t.getParentCtrl(n.target),t.settings.autohide){if(i&&(pl(i,t)||t.parent()===i))continue;(n=t.fire("autohide",{target:n.target})).isDefaultPrevented()||t.hide()}}(n)},t(document).on("click touchstart",gr))}function eo(n){function r(t,i){for(var r,u=0;u<s.length;u++)if(s[u]!==n)for(r=s[u].parent();r&&(r=r.parent());)r===n&&s[u].fixed(t).moveBy(0,i).repaint()}var t=i.getViewPort().y;n.settings.autofix&&(n.state.get("fixed")?n._autoFixY>t&&(n.fixed(!1).layoutRect({y:n._autoFixY}).repaint(),r(!1,n._autoFixY-t)):(n._autoFixY=n.layoutRect().y,n._autoFixY<t&&(n.fixed(!0).layoutRect({y:0}).repaint(),r(!0,t-n._autoFixY))))}function ru(n,i){var r,e,u=p.zIndex||65535,f;if(n)a.push(i);else for(r=a.length;r--;)a[r]===i&&a.splice(r,1);if(a.length)for(r=0;r<a.length;r++)a[r].modal&&(u++,e=a[r]),a[r].getEl().style.zIndex=u,a[r].zIndex=u,u++;f=t("#"+i.classPrefix+"modal-block",i.getContainerElm())[0];e?t(f).css("z-index",e.zIndex-1):f&&(f.parentNode.removeChild(f),iu=!1);p.currentZIndex=u}function oo(n){for(var t=s.length;t--;)s[t]===n&&s.splice(t,1);for(t=a.length;t--;)a[t]===n&&a.splice(t,1)}function so(n){var r,i=t("meta[name=viewport]")[0];!1!==w.overrideViewPort&&(i||((i=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(i)),(r=i.getAttribute("content"))&&void 0!==li&&(li=r),i.setAttribute("content",n?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":li))}function bl(n,i){(function(){for(var n=0;n<v.length;n++)if(v[n]._fullscreen)return!0;return!1})()&&!1===i&&t([document.documentElement,document.body]).removeClass(n+"fullscreen")}function ia(){return new(ta("FileReader"))}function wh(n,i){var u,f,r=this,e=h.classPrefix;r.show=function(o,s){function h(){u&&(t(n).append('<div class="'+e+"throbber"+(i?" "+e+"throbber-inline":"")+'"><\/div>'),s&&s())}return r.hide(),u=!0,o?f=y.setTimeout(h,o):h(),r};r.hide=function(){var t=n.lastChild;return y.clearTimeout(f),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),u=!1,r}}function kh(n){var i="",t;if(n)for(t=0;t<n.length;t++)i+='<option value="'+n[t]+'">'+n[t]+"<\/option>";return i}function gh(n,t,i){return n<t&&(n=t),i<n&&(n=i),n}function nr(n,t,i){n.setAttribute("aria-"+t,i)}function nc(n,t){var u,f,e,o,r;"v"===n.settings.orientation?(e="top",f="height",u="h"):(e="left",f="width",u="w");r=n.getEl("handle");o=((n.layoutRect()[u]||100)-i.getSize(r)[f])*((t-n._minValue)/(n._maxValue-n._minValue))+"px";r.style[e]=o;r.style.height=n.layoutRect().h+"px";nr(r,"valuenow",t);nr(r,"valuetext",""+n.settings.previewFilter(t));nr(r,"valuemin",n._minValue);nr(r,"valuemax",n._maxValue)}var wu,bu,ku,du,tr,gu,tc=tinymce.util.Tools.resolve("tinymce.ThemeManager"),w=tinymce.util.Tools.resolve("tinymce.Env"),u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),y=tinymce.util.Tools.resolve("tinymce.util.Delay"),nf=function(n){return n.reduce(function(n,t){return Array.isArray(t)?n.concat(nf(t)):n.concat(t)},[])},ic={flatten:nf},tf=function(n,t){for(var r,i=0;i<t.length;i++)if(r=t[i](n),r)return r;return null},ii=function(n,t){return{id:n,rect:t}},rf=function(n){return{x:n.left,y:n.top,w:n.width,h:n.height}},ir=function(n){return{left:n.x,top:n.y,width:n.w,height:n.h,right:n.x+n.w,bottom:n.y+n.h}},uf=function(n){var t=u.DOM.getViewPort();return{x:n.x+t.x,y:n.y+t.y,w:n.w,h:n.h}},ff=function(n){var t=n.getBoundingClientRect();return uf({x:t.left,y:t.top,w:Math.max(n.clientWidth,n.offsetWidth),h:Math.max(n.clientHeight,n.offsetHeight)})},ef=function(n,t){return ff(t)},of=function(n){return ff(n.getContentAreaContainer()||n.getBody())},sf=function(n){var t=n.selection.getBoundingClientRect();return t?uf(rf(t)):null},rc=function(n,t){return function(i){for(var r=0;r<t.length;r++)if(t[r].predicate(n))return ii(t[r].id,ef(i,n));return null}},uc=function(n,t){return function(i){for(var u,r=0;r<n.length;r++)for(u=0;u<t.length;u++)if(t[u].predicate(n[r]))return ii(t[u].id,ef(i,n[r]));return null}},n=tinymce.util.Tools.resolve("tinymce.util.Tools"),fc=function(n,t){return{id:n,predicate:t}},ec=function(t){return n.map(t,function(n){return fc(n.id,n.predicate)})},hf=function(n){return function(t){return t.selection.isCollapsed()?null:ii(n,sf(t))}},oc=function(n,t){return function(i){for(var u=i.schema.getTextBlockElements(),r=0;r<n.length;r++)if("TABLE"===n[r].nodeName)return null;for(r=0;r<n.length;r++)if(n[r].nodeName in u)return i.dom.isEmpty(n[r])?ii(t,sf(i)):null;return null}},sc=function(n){n.fire("SkinLoaded")},hc=function(n){return n.fire("BeforeRenderUI")},rr=tinymce.util.Tools.resolve("tinymce.EditorManager"),lt=function(n){return function(t){return typeof t===n}},cc=function(n){return Array.isArray(n)},ur=function(n){return lt("string")(n)},lc=function(n){return lt("number")(n)},cf=function(n){return lt("boolean")(n)},lf=function(n){return lt("function")(n)},fr=(lt("object"),cc),af=function(n,t){if(t(n))return!0;throw new Error("Default value doesn't match requested type.");},ri=function(n){return function(t,i,r){var u=t.settings;return af(r,n),i in u&&n(u[i])?u[i]:r}},er={getStringOr:ri(ur),getBoolOr:ri(cf),getNumberOr:ri(lc),getHandlerOr:ri(lf),getToolbarItemsOr:(wu=fr,function(n,t,i){var r,u,e,f,o,s=t in n.settings?n.settings[t]:i;return af(i,wu),u=i,fr(r=s)?r:ur(r)?"string"==typeof(f=r)?(o=/[ ,]/,f.split(o).filter(function(n){return 0<n.length})):f:cf(r)?(e=u,!1===r?[]:e):u})},ut=tinymce.util.Tools.resolve("tinymce.geom.Rect"),vf=function(n,t){return{rect:n,position:t}},or=function(n,t){return{x:t.x,y:t.y,w:n.w,h:n.h}},yf=function(n,t,i,r,u){var f,o,e,s={x:r.x,y:r.y,w:r.w+(r.w<u.w+i.w?u.w:0),h:r.h+(r.h<u.h+i.h?u.h:0)};return f=ut.findBestRelativePosition(u,i,s,n),i=ut.clamp(i,s),f?(o=ut.relativePosition(u,i,f),e=or(u,o),vf(e,f)):(i=ut.intersect(s,i))?((f=ut.findBestRelativePosition(u,i,s,t))?(o=ut.relativePosition(u,i,f),e=or(u,o)):e=or(u,i),vf(e,f)):null},ac=function(n,t,i){return yf(["cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr"],n,t,i)},pf=function(n,t,i){return yf(["tc-bc","bc-tc","tl-bl","bl-tl","tr-br","br-tr","cr-cl","cl-cr"],["bc-tc","bl-tl","br-tr","cr-cl"],n,t,i)},wf=function(n,t,i,r){var u;return"function"==typeof n?(u=n({elementRect:ir(t),contentAreaRect:ir(i),panelRect:ir(r)}),rf(u)):r},vc=function(n){return n.panelRect},yc=function(n){return er.getToolbarItemsOr(n,"selection_toolbar",["bold","italic","|","quicklink","h2","h3","blockquote"])},pc=function(n){return er.getToolbarItemsOr(n,"insert_toolbar",["quickimage","quicktable"])},bf=function(n){return er.getHandlerOr(n,"inline_toolbar_position_handler",vc)},wc=function(n){var t,i,u,f,r=n.settings;return r.skin_url?(u=n,f=r.skin_url,u.documentBaseURI.toAbsolute(f)):(t=r.skin,i=rr.baseURL+"/skins/",t?i+t:i+"lightgray")},bc=function(n){return!1===n.settings.skin},kc=function(n,t){var i=wc(n),r=function(){var i,u,r;u=t;r=function(){i._skinLoaded=!0;sc(i);u()};(i=n).initialized?r():i.on("init",r)};bc(n)?r():(u.DOM.styleSheetLoader.load(i+"/skin.min.css",r),n.contentCSS.push(i+"/content.inline.min.css"))},sr=function(n){var t,i,r,u,f=n.contextToolbars;return ic.flatten([f||[],(t=n,i="img",r="image",u="alignleft aligncenter alignright",{predicate:function(n){return t.dom.is(n,i)},id:r,items:u})])},kf=function(n,t){var r,i,u,f,e;return e=(f=n).selection.getNode(),i=f.dom.getParents(e,"*"),u=ec(t),(r=tf(n,[rc(i[0],u),hf("text"),oc(i,"insert"),uc(i,u)]))&&r.rect?r:null},df=function(n,t){return function(){var i,r,u;n.removed||(u=n,document.activeElement!==u.getBody())||(i=sr(n),(r=kf(n,i))?t.show(n,r.id,r.rect,i):t.hide())}},dc=function(n,t){var f,e,o,i,s,h=y.throttle(df(n,t),0),c=y.throttle((o=df(f=n,e=t),function(){f.removed||e.inForm()||o()}),0),r=(i=n,s=t,function(){var t=sr(i),n=kf(i,t);n&&s.reposition(i,n.id,n.rect)});n.on("blur hide ObjectResizeStart",t.hide);n.on("click",h);n.on("nodeChange mouseup",c);n.on("ResizeEditor keyup",h);n.on("ResizeWindow",r);u.DOM.bind(w.container,"scroll",r);n.on("remove",function(){u.DOM.unbind(w.container,"scroll",r);t.remove()});n.shortcuts.add("Alt+F10,F10","",t.focus)},gc=function(n,t){return kc(n,function(){var i,r;dc(n,t);r=t;(i=n).shortcuts.remove("meta+k");i.shortcuts.add("meta+k","",function(){var t=sr(i),n=tf(i,[hf("quicklink")]);n&&r.show(i,n.id,n.rect,t)})}),{}},nl=function(n,t){return n.inline?gc(n,t):function(n){throw new Error(n);}("inlite theme only supports inline mode.")},hr=function(n){return function(){return n}},tl=hr(!1),il=hr(!0),r={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:hr,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:tl,always:il},at=r.never,cr=r.always,nt=function(){return lr},lr=(tr={fold:function(n){return n()},is:at,isSome:at,isNone:cr,getOr:du=function(n){return n},getOrThunk:ku=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:du,orThunk:ku,map:nt,ap:nt,each:function(){},bind:nt,flatten:nt,exists:at,forall:cr,filter:nt,equals:bu=function(n){return n.isNone()},equals_:bu,toArray:function(){return[]},toString:r.constant("none()")},Object.freeze&&Object.freeze(tr),tr),ui=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:cr,isNone:at,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:function(t){return ui(t(n))},ap:function(t){return t.fold(nt,function(t){return ui(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:lr},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(at,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},e={some:ui,none:nt,from:function(n){return null===n||n===undefined?lr:ui(n)}},d=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},vt={isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")},gf=(gu=Array.prototype.indexOf)===undefined?function(n,t){return rl(n,t)}:function(n,t){return gu.call(n,t)},ne=function(n,t){return-1<gf(n,t)},te=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},ie=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},re=function(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i,n)},ue=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},fe=function(n,t){for(var i=0,r=n.length;i<r;i++)if(t(n[i],i,n))return e.some(i);return e.none()},rl=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},ul=Array.prototype.push,ee=function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);ul.apply(i,n[t])}return i},oe=function(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i,n))return!1;return!0},ar=Array.prototype.slice,fl=vt.isFunction(Array.from)?Array.from:function(n){return ar.call(n)},f={map:te,each:ie,eachr:re,partition:function(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i,n)?u:f).push(r);return{pass:u,fail:f}},filter:ue,groupBy:function(n,t){var f,e;if(0===n.length)return[];for(var o=t(n[0]),r=[],i=[],u=0,s=n.length;u<s;u++)f=n[u],e=t(f),e!==o&&(r.push(i),i=[]),o=e,i.push(f);return 0!==i.length&&r.push(i),r},indexOf:function(n,t){var i=gf(n,t);return-1===i?e.none():e.some(i)},foldr:function(n,t,i){return re(n,function(n){i=t(i,n)}),i},foldl:function(n,t,i){return ie(n,function(n){i=t(i,n)}),i},find:function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r,i,n))return e.some(r);return e.none()},findIndex:fe,flatten:ee,bind:function(n,t){var i=te(n,t);return ee(i)},forall:oe,exists:function(n,t){return fe(n,t).isSome()},contains:ne,equal:function(n,t){return n.length===t.length&&oe(n,function(n,i){return n===t[i]})},reverse:function(n){var t=ar.call(n,0);return t.reverse(),t},chunk:function(n,t){for(var u,r=[],i=0;i<n.length;i+=t)u=n.slice(i,i+t),r.push(u);return r},difference:function(n,t){return ue(n,function(n){return!ne(t,n)})},mapToObject:function(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u},pure:function(n){return[n]},sort:function(n,t){var i=ar.call(n,0);return i.sort(t),i},range:function(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r},head:function(n){return 0===n.length?e.none():e.some(n[0])},last:function(n){return 0===n.length?e.none():e.some(n[n.length-1])},from:fl},el=0,i={id:function(){return"mceu_"+el++},create:function(t,i,r){var f=document.createElement(t);return u.DOM.setAttribs(f,i),"string"==typeof r?f.innerHTML=r:n.each(r,function(n){n.nodeType&&f.appendChild(n)}),f},createFragment:function(n){return u.DOM.createFragment(n)},getWindowSize:function(){return u.DOM.getViewPort()},getSize:function(n){var i,r,t;return n.getBoundingClientRect?(t=n.getBoundingClientRect(),i=Math.max(t.width||t.right-t.left,n.offsetWidth),r=Math.max(t.height||t.bottom-t.bottom,n.offsetHeight)):(i=n.offsetWidth,r=n.offsetHeight),{width:i,height:r}},getPos:function(n,t){return u.DOM.getPos(n,t||i.getContainer())},getContainer:function(){return w.container?w.container:document.body},getViewPort:function(n){return u.DOM.getViewPort(n)},get:function(n){return document.getElementById(n)},addClass:function(n,t){return u.DOM.addClass(n,t)},removeClass:function(n,t){return u.DOM.removeClass(n,t)},hasClass:function(n,t){return u.DOM.hasClass(n,t)},toggleClass:function(n,t,i){return u.DOM.toggleClass(n,t,i)},css:function(n,t,i){return u.DOM.setStyle(n,t,i)},getRuntimeStyle:function(n,t){return u.DOM.getStyle(n,t,!0)},on:function(n,t,i,r){return u.DOM.bind(n,t,i,r)},off:function(n,t,i){return u.DOM.unbind(n,t,i)},fire:function(n,t,i){return u.DOM.fire(n,t,i)},innerHtml:function(n,t){u.DOM.setHTML(n,t)}},t=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),yt=tinymce.util.Tools.resolve("tinymce.util.Class"),se=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),pt=function(n){var t;if(n)return"number"==typeof n?{top:n=n||0,left:n,bottom:n,right:n}:(1===(t=(n=n.split(" ")).length)?n[1]=n[2]=n[3]=n[0]:2===t?(n[2]=n[0],n[3]=n[1]):3===t&&(n[3]=n[1]),{top:parseInt(n[0],10)||0,right:parseInt(n[1],10)||0,bottom:parseInt(n[2],10)||0,left:parseInt(n[3],10)||0})},vr=function(n,t){function i(t){var i=parseFloat(function(t){var r=n.ownerDocument.defaultView,i;return r?(i=r.getComputedStyle(n,null),i?(t=t.replace(/[A-Z]/g,function(n){return"-"+n}),i.getPropertyValue(t)):null):n.currentStyle[t]}(t));return isNaN(i)?0:i}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},bt,et,le,l,dr,p,v,li,ni,dh;n.extend(fi.prototype,{add:function(n){return n&&!this.contains(n)&&(this.cls._map[n]=!0,this.cls.push(n),this._change()),this},remove:function(n){if(this.contains(n)){for(var t=void 0,t=0;t<this.cls.length&&this.cls[t]!==n;t++);this.cls.splice(t,1);delete this.cls._map[n];this._change()}return this},toggle:function(n,t){var i=this.contains(n);return i!==t&&(i?this.remove(n):this.add(n),this._change()),this},contains:function(n){return!!this.cls._map[n]},_change:function(){delete this.clsValue;this.onchange.call(this)}});fi.prototype.toString=function(){var t,n;if(this.clsValue)return this.clsValue;for(t="",n=0;n<this.cls.length;n++)0<n&&(t+=" "),t+=this.prefix+this.cls[n];return t};var yr,ft,ei,sl=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,he=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,hl=/^\s*|\s*$/g,wt=yt.extend({init:function(n){function r(n,r,u){function e(n){n&&r.push(n)}var f;return e(function(n){if(n)return n=n.toLowerCase(),function(t){return"*"===n||t.type===n}}((f=sl.exec(n.replace(hl,"")))[1])),e(function(n){if(n)return function(t){return t._name===n}}(f[2])),e(function(n){if(n)return n=n.split("."),function(t){for(var i=n.length;i--;)if(!t.classes.contains(n[i]))return!1;return!0}}(f[3])),e(function(n,t,i){if(n)return function(r){var u=r[n]?r[n]():"";return t?"="===t?u===i:"*="===t?0<=u.indexOf(i):"~="===t?0<=(" "+u+" ").indexOf(" "+i+" "):"!="===t?u!==i:"^="===t?0===u.indexOf(i):"$="===t&&u.substr(u.length-i.length)===i:!!i}}(f[4],f[5],f[6])),e(function(n){var r;if(n)return(n=/(?:not\((.+)\))|(.+)/i.exec(n))[1]?(r=t(n[1],[]),function(n){return!i(n,r)}):(n=n[2],function(t,i,r){return"first"===n?0===i:"last"===n?i===r-1:"even"===n?i%2==0:"odd"===n?i%2==1:!!t[n]&&t[n]()})}(f[7])),r.pseudo=!!f[7],r.direct=u,r}function t(n,i){var o,u,f,e=[];do if(he.exec(""),(u=he.exec(n))&&(n=u[3],e.push(u[1]),u[2])){o=u[3];break}while(u);for(o&&t(o,i),n=[],f=0;f<e.length;f++)">"!==e[f]&&n.push(r(e[f],[],">"===e[f-1]));return i.push(n),i}var i=this.match;this._selectors=t(n,[])},match:function(n,t){for(var u,h,a,r,e,o,s,v,y,c,i,f=0,l=(t=t||this._selectors).length;f<l;f++){for(i=n,c=0,u=(h=(a=t[f]).length)-1;0<=u;u--)for(o=a[u];i;){if(o.pseudo)for(s=v=(y=i.parent().items()).length;s--&&y[s]!==i;);for(r=0,e=o.length;r<e;r++)if(!o[r](i,s,v)){r=e+1;break}if(r===e){c++;break}if(u===h-1)break;i=i.parent()}if(c===h)return!0}return!1},find:function(n){function u(n,t,r){for(var e,s,f,c=t[r],o=0,h=n.length;o<h;o++){for(f=n[o],e=0,s=c.length;e<s;e++)if(!c[e](f,o,h)){e=s+1;break}if(e===s)r===t.length-1?i.push(f):f.items&&u(f.items(),t,r+1);else if(c.direct)return;f.items&&u(f.items(),t,r)}}var t,r,i=[],f=this._selectors;if(n.items){for(t=0,r=f.length;t<r;t++)u(n.items(),f[t],0);1<r&&(i=function(n){for(var r,i=[],t=n.length;t--;)(r=n[t]).__checked||(i.push(r),r.__checked=1);for(t=i.length;t--;)delete i[t].__checked;return i}(i))}return yr||(yr=wt.Collection),new yr(i)}}),ce=Array.prototype.push,cl=Array.prototype.slice;ei={length:0,init:function(n){n&&this.add(n)},add:function(t){return n.isArray(t)?ce.apply(this,t):t instanceof ft?this.add(t.toArray()):ce.call(this,t),this},set:function(n){var i,t=this,r=t.length;for(t.length=0,t.add(n),i=t.length;i<r;i++)delete t[i];return t},filter:function(n){var t,r,u,i,f=[];for("string"==typeof n?(n=new wt(n),i=function(t){return n.match(t)}):i=n,t=0,r=this.length;t<r;t++)i(u=this[t])&&f.push(u);return new ft(f)},slice:function(){return new ft(cl.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},each:function(t){return n.each(this,t),this},toArray:function(){return n.toArray(this)},indexOf:function(n){for(var t=this.length;t--&&this[t]!==n;);return t},reverse:function(){return new ft(n.toArray(this).reverse())},hasClass:function(n){return!!this[0]&&this[0].classes.contains(n)},prop:function(n,t){var i;return t!==undefined?(this.each(function(i){i[n]&&i[n](t)}),this):(i=this[0])&&i[n]?i[n]():void 0},exec:function(t){var i=n.toArray(arguments).slice(1);return this.each(function(n){n[t]&&n[t].apply(n,i)}),this},remove:function(){for(var n=this.length;n--;)this[n].remove();return this},addClass:function(n){return this.each(function(t){t.classes.add(n)})},removeClass:function(n){return this.each(function(t){t.classes.remove(n)})}};n.each("fire on off show hide append prepend before after reflow".split(" "),function(t){ei[t]=function(){var i=n.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,i)}),this}});n.each("text name disabled active selected checked visible parent value data".split(" "),function(n){ei[n]=function(t){return this.prop(n,t)}});ft=yt.extend(ei);bt=wt.Collection=ft;et=function(n){this.create=n.create};et.create=function(n,t){return new et({create:function(i,r){var u,f=function(n){i.set(r,n.value)};return i.on("change:"+r,function(i){n.set(t,i.value)}),n.on("change:"+t,f),(u=i._bindings)||(u=i._bindings=[],i.on("destroy",function(){for(var n=u.length;n--;)u[n]()})),u.push(function(){n.off("change:"+t,f)}),n.get(t)}})};le=tinymce.util.Tools.resolve("tinymce.util.Observable");var pr,kt,ve=yt.extend({Mixins:[le],init:function(n){var t,i;for(t in n=n||{})(i=n[t])instanceof et&&(n[t]=i.create(this,t));this.data=n},set:function(t,i){var r,u,e=this.data[t];if(i instanceof et&&(i=i.create(this,t)),"object"==typeof t){for(r in t)this.set(r,t[r]);return this}return function f(t,i){var r,u;if(t===i)return!0;if(null===t||null===i||"object"!=typeof t||"object"!=typeof i)return t===i;if(n.isArray(i)){if(t.length!==i.length)return!1;for(r=t.length;r--;)if(!f(t[r],i[r]))return!1}if(ae(t)||ae(i))return t===i;for(r in u={},i){if(!f(t[r],i[r]))return!1;u[r]=!0}for(r in t)if(!u[r]&&!f(t[r],i[r]))return!1;return!0}(e,i)||(this.data[t]=i,u={target:this,name:t,value:i,oldValue:e},this.fire("change:"+t,u),this.fire("change",u)),this},get:function(n){return this.data[n]},has:function(n){return n in this.data},bind:function(n){return et.create(this,n)},destroy:function(){this.fire("destroy")}}),tt={},dt={add:function(n){var t=n.parent();if(t){if(!t._layout||t._layout.isNative())return;tt[t._id]||(tt[t._id]=t);pr||(pr=!0,y.requestAnimationFrame(function(){var n,t;for(n in pr=!1,tt)(t=tt[n]).state.get("rendered")&&t.reflow();tt={}},document.body))}},remove:function(n){tt[n._id]&&delete tt[n._id]}},wr=function(n){return n?n.getRoot().uiContainer:null},gt={getUiContainerDelta:function(n){var t=wr(n);if(t&&"static"!==u.DOM.getStyle(t,"position",!0)){var i=u.DOM.getPos(t),r=t.scrollLeft-i.x,f=t.scrollTop-i.y;return e.some({x:r,y:f})}return e.none()},setUiContainer:function(n,t){var i=u.DOM.select(n.settings.ui_container)[0];t.getRoot().uiContainer=i},getUiContainer:wr,inheritUiContainer:function(n,t){return t.uiContainer=wr(n)}},ll="onmousewheel"in document,al=!1,vl=0,ye={Statics:{classPrefix:"mce-"},isRtl:function(){return kt.rtl},classPrefix:"mce-",init:function(i){function e(n){var t;for(n=n.split(" "),t=0;t<n.length;t++)r.classes.add(n[t])}var u,f,r=this;r.settings=i=n.extend({},r.Defaults,i);r._id=i.id||"mceu_"+vl++;r._aria={role:i.role};r._elmCache={};r.$=t;r.state=new ve({visible:!0,active:!1,disabled:!1,value:""});r.data=new ve(i.data);r.classes=new fi(function(){r.state.get("rendered")&&(r.getEl().className=this.toString())});r.classes.prefix=r.classPrefix;(u=i.classes)&&(r.Defaults&&(f=r.Defaults.classes)&&u!==f&&e(f),e(u));n.each("title text name visible disabled active value".split(" "),function(n){n in i&&r[n](i[n])});r.on("click",function(){if(r.disabled())return!1});r.settings=i;r.borderBox=pt(i.border);r.paddingBox=pt(i.padding);r.marginBox=pt(i.margin);i.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var n=gt.getUiContainer(this);return n||i.getContainer()},getParentCtrl:function(n){for(var t,i=this.getRoot().controlIdLookup;n&&i&&!(t=i[n.id]);)n=n.parentNode;return t},initLayoutRect:function(){var f,p,r,u,s,h,e,c,l,a,n=this,t=n.settings,o=n.getEl();f=n.borderBox=n.borderBox||vr(o,"border");n.paddingBox=n.paddingBox||vr(o,"padding");n.marginBox=n.marginBox||vr(o,"margin");a=i.getSize(o);c=t.minWidth;l=t.minHeight;s=c||a.width;h=l||a.height;r=t.width;u=t.height;e=void 0!==(e=t.autoResize)?e:!r&&!u;r=r||s;u=u||h;var v=f.left+f.right,y=f.top+f.bottom,w=t.maxWidth||65535,b=t.maxHeight||65535;return n._layoutRect=p={x:t.x||0,y:t.y||0,w:r,h:u,deltaW:v,deltaH:y,contentW:r-v,contentH:u-y,innerW:r-v,innerH:u-y,startMinWidth:c||0,startMinHeight:l||0,minW:Math.min(s,w),minH:Math.min(h,b),maxW:w,maxH:b,autoResize:e,scrollW:0},n._lastLayoutRect={},p},layoutRect:function(n){var r,i,u,f,o,e=this,t=e._layoutRect;return t||(t=e.initLayoutRect()),n?(u=t.deltaW,f=t.deltaH,n.x!==undefined&&(t.x=n.x),n.y!==undefined&&(t.y=n.y),n.minW!==undefined&&(t.minW=n.minW),n.minH!==undefined&&(t.minH=n.minH),(i=n.w)!==undefined&&(i=(i=i<t.minW?t.minW:i)>t.maxW?t.maxW:i,t.w=i,t.innerW=i-u),(i=n.h)!==undefined&&(i=(i=i<t.minH?t.minH:i)>t.maxH?t.maxH:i,t.h=i,t.innerH=i-f),(i=n.innerW)!==undefined&&(i=(i=i<t.minW-u?t.minW-u:i)>t.maxW-u?t.maxW-u:i,t.innerW=i,t.w=i+u),(i=n.innerH)!==undefined&&(i=(i=i<t.minH-f?t.minH-f:i)>t.maxH-f?t.maxH-f:i,t.innerH=i,t.h=i+f),n.contentW!==undefined&&(t.contentW=n.contentW),n.contentH!==undefined&&(t.contentH=n.contentH),(r=e._lastLayoutRect).x===t.x&&r.y===t.y&&r.w===t.w&&r.h===t.h||((o=kt.repaintControls)&&o.map&&!o.map[e._id]&&(o.push(e),o.map[e._id]=!0),r.x=t.x,r.y=t.y,r.w=t.w,r.h=t.h),e):t},repaint:function(){var f,s,e,n,o,h,c,t,u,i,r=this;u=document.createRange?function(n){return n}:Math.round;f=r.getEl().style;n=r._layoutRect;t=r._lastRepaintRect||{};h=(o=r.borderBox).left+o.right;c=o.top+o.bottom;n.x!==t.x&&(f.left=u(n.x)+"px",t.x=n.x);n.y!==t.y&&(f.top=u(n.y)+"px",t.y=n.y);n.w!==t.w&&(i=u(n.w-h),f.width=(0<=i?i:0)+"px",t.w=n.w);n.h!==t.h&&(i=u(n.h-c),f.height=(0<=i?i:0)+"px",t.h=n.h);r._hasBody&&n.innerW!==t.innerW&&(i=u(n.innerW),(e=r.getEl("body"))&&((s=e.style).width=(0<=i?i:0)+"px"),t.innerW=n.innerW);r._hasBody&&n.innerH!==t.innerH&&(i=u(n.innerH),(e=e||r.getEl("body"))&&((s=s||e.style).height=(0<=i?i:0)+"px"),t.innerH=n.innerH);r._lastRepaintRect=t;r.fire("repaint",{},!1)},updateLayoutRect:function(){var n=this;n.parent()._lastRect=null;i.css(n.getEl(),{width:"",height:""});n._layoutRect=n._lastRepaintRect=n._lastLayoutRect=null;n.initLayoutRect()},on:function(n,t){var i,r,f,u=this;return oi(u).on(n,"string"!=typeof(i=t)?i:function(n){return r||u.parentsAndSelf().each(function(n){var t=n.settings.callbacks;if(t&&(r=t[i]))return f=n,!1}),r?r.call(f,n):(n.action=i,void this.fire("execute",n))}),u},off:function(n,t){return oi(this).off(n,t),this},fire:function(n,t,i){if((t=t||{}).control||(t.control=this),t=oi(this).fire(n,t),!1!==i&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(n,t,!1),r=r.parent();return t},hasEventListeners:function(n){return oi(this).has(n)},parents:function(n){for(var i=new bt,t=this.parent();t;t=t.parent())i.add(t);return n&&(i=i.filter(n)),i},parentsAndSelf:function(n){return new bt(this).add(this.parents(n))},next:function(){var n=this.parent().items();return n[n.indexOf(this)+1]},prev:function(){var n=this.parent().items();return n[n.indexOf(this)-1]},innerHtml:function(n){return this.$el.html(n),this},getEl:function(n){var i=n?this._id+"-"+n:this._id;return this._elmCache[i]||(this._elmCache[i]=t("#"+i)[0]),this._elmCache[i]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(n){}return this},blur:function(){return this.getEl().blur(),this},aria:function(n,t){var i=this,r=i.getEl(i.ariaTarget);return void 0===t?i._aria[n]:(i._aria[n]=t,i.state.get("rendered")&&r.setAttribute("role"===n?n:"aria-"+n,t),i)},encode:function(n,t){return!1!==t&&(n=this.translate(n)),(n||"").replace(/[&<>"]/g,function(n){return"&#"+n.charCodeAt(0)+";"})},translate:function(n){return kt.translate?kt.translate(n):n},before:function(n){var t=this.parent();return t&&t.insert(n,t.items().indexOf(this),!0),this},after:function(n){var t=this.parent();return t&&t.insert(n,t.items().indexOf(this)),this},remove:function(){var u,f,n=this,i=n.getEl(),r=n.parent(),e,o;if(n.items)for(e=n.items().toArray(),f=e.length;f--;)e[f].remove();return r&&r.items&&(u=[],r.items().each(function(t){t!==n&&u.push(t)}),r.items().set(u),r._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&t(i).off(),o=n.getRoot().controlIdLookup,o&&delete o[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(n){return t(n).before(this.renderHtml()),this.postRender(),this},renderTo:function(n){return t(n||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"><\/div>'},postRender:function(){var s,r,u,i,e,n=this,f=n.settings,o,h;for(i in n.$el=t(n.getEl()),n.state.set("rendered",!0),f)0===i.indexOf("on")&&n.on(i.substr(2),f[i]);if(n._eventsRoot){for(u=n.parent();!e&&u;u=u.parent())e=u._eventsRoot;if(e)for(i in e._nativeEvents)n._nativeEvents[i]=!0}pe(n);f.style&&(s=n.getEl())&&(s.setAttribute("style",f.style),s.style.cssText=f.style);n.settings.border&&(r=n.borderBox,n.$el.css({"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));o=n.getRoot();for(h in o.controlIdLookup||(o.controlIdLookup={}),(o.controlIdLookup[n._id]=n)._aria)n.aria(h,n._aria[h]);!1===n.state.get("visible")&&(n.getEl().style.display="none");n.bindStates();n.state.on("change:visible",function(t){var i,r=t.value;n.state.get("rendered")&&(n.getEl().style.display=!1===r?"none":"",n.getEl().getBoundingClientRect());(i=n.parent())&&(i._lastRect=null);n.fire(r?"show":"hide");dt.add(n)});n.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(n){var i,r,f,e,o,s,u=this.getEl(),t=u.parentNode,h=function(n,t){for(var u,i=n,r=u=0;i&&i!==t&&i.nodeType;)r+=i.offsetLeft||0,u+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:u}}(u,t);return i=h.x,r=h.y,f=u.offsetWidth,e=u.offsetHeight,o=t.clientWidth,s=t.clientHeight,"end"===n?(i-=o-f,r-=s-e):"center"===n&&(i-=o/2-f/2,r-=s/2-e/2),t.scrollLeft=i,t.scrollTop=r,this},getRoot:function(){for(var t,r,n=this,i=[];n;){if(n.rootControl){t=n.rootControl;break}i.push(n);n=(t=n).parent()}for(t||(t=this),r=i.length;r--;)i[r].rootControl=t;return t},reflow:function(){dt.remove(this);var n=this.parent();return n&&n._layout&&!n._layout.isNative()&&n.reflow(),this}};n.each("text title visible disabled active value".split(" "),function(n){ye[n]=function(t){return 0===arguments.length?this.state.get(n):(void 0!==t&&this.state.set(n,t),this)}});var h=kt=yt.extend(ye),we=function(n){return"static"===i.getRuntimeStyle(n,"position")},si=function(n){return n.state.get("fixed")};var ke=function(){var n=window,t=Math.max(n.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),i=Math.max(n.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:i,w:t+(n.innerWidth||document.documentElement.clientWidth),h:i+(n.innerHeight||document.documentElement.clientHeight)}},de=function(n){var t,i=gt.getUiContainer(n);return i&&!si(n)?{x:0,y:0,w:(t=i).scrollWidth-1,h:t.scrollHeight-1}:ke()},hi={testMoveRel:function(n,t){for(var i,r=de(this),u=0;u<t.length;u++)if(i=be(this,n,t[u]),si(this)){if(0<i.x&&i.x+i.w<r.w&&0<i.y&&i.y+i.h<r.h)return t[u]}else if(i.x>r.x&&i.x+i.w<r.w&&i.y>r.y&&i.y+i.h<r.h)return t[u];return t[0]},moveRel:function(n,t){"string"!=typeof t&&(t=this.testMoveRel(n,t));var i=be(this,n,t);return this.moveTo(i.x,i.y)},moveBy:function(n,t){var i=this.layoutRect();return this.moveTo(i.x+n,i.y+t),this},moveTo:function(n,t){function e(n,t,i){return n<0?0:t<n+i&&(n=t-i)<0?0:n}var i=this,u,f,r;return i.settings.constrainToViewport&&(u=de(this),f=i.layoutRect(),n=e(n,u.w,f.w),t=e(t,u.h,f.h)),r=gt.getUiContainer(i),r&&we(r)&&!si(i)&&(n-=r.scrollLeft,t-=r.scrollTop),r&&(n+=1,t+=1),i.state.get("rendered")?i.layoutRect({x:n,y:t}).repaint():(i.settings.x=n,i.settings.y=t),i.fire("move",{x:n,y:t}),i}},ge=h.extend({Mixins:[hi],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"><\/div><div class="'+t+'tooltip-inner">'+n.encode(n.state.get("text"))+"<\/div><\/div>"},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl().lastChild.innerHTML=n.encode(t.value)}),n._super()},repaint:function(){var n,t;n=this.getEl().style;t=this._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=131070}}),o=h.extend({init:function(n){var t=this;t._super(n);n=t.settings;t.canFocus=!0;n.tooltip&&!1!==o.tooltips&&(t.on("mouseenter",function(i){var r=t.tooltip().moveTo(-65535),u;i.control===t?(u=r.text(n.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]),r.classes.toggle("tooltip-n","bc-tc"===u),r.classes.toggle("tooltip-nw","bc-tl"===u),r.classes.toggle("tooltip-ne","bc-tr"===u),r.moveRel(t.getEl(),u)):r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove();t._tooltip=null}));t.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new ge({type:"tooltip"}),gt.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var n=this,t=n.settings;n._super();n.parent()||!t.width&&!t.height||(n.initLayoutRect(),n.repaint());t.autofocus&&n.focus()},bindStates:function(){function t(t){n.aria("disabled",t);n.classes.toggle("disabled",t)}function i(t){n.aria("pressed",t);n.classes.toggle("active",t)}var n=this;return n.state.on("change:disabled",function(n){t(n.value)}),n.state.on("change:active",function(n){i(n.value)}),n.state.get("disabled")&&t(!0),n.state.get("active")&&i(!0),n._super()},remove:function(){this._super();this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),no=o.extend({Defaults:{value:0},init:function(n){this._super(n);this.classes.add("progress");this.settings.filter||(this.settings.filter=function(n){return Math.round(n)})},renderHtml:function(){var t=this._id,n=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"><\/div><\/div><div class="'+n+'text">0%<\/div><\/div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){function t(t){t=n.settings.filter(t);n.getEl().lastChild.innerHTML=t+"%";n.getEl().firstChild.firstChild.style.width=t+"%"}var n=this;return n.state.on("change:value",function(n){t(n.value)}),t(n.state.get("value")),n._super()}}),br=function(n,t){n.getEl().lastChild.textContent=t+(n.progressBar?" "+n.progressBar.value()+"%":"")},to=h.extend({Mixins:[hi],Defaults:{classes:"widget notification"},init:function(n){var t=this;t._super(n);t.maxWidth=n.maxWidth;n.text&&t.text(n.text);n.icon&&(t.icon=n.icon);n.color&&(t.color=n.color);n.type&&t.classes.add("notification-"+n.type);n.timeout&&(n.timeout<0||0<n.timeout)&&!n.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0);n.progressBar&&(t.progressBar=new no);t.on("click",function(n){-1!==n.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var i,n=this,t=n.classPrefix,r="",u="",f="";return n.icon&&(r='<i class="'+t+"ico "+t+"i-"+n.icon+'"><\/i>'),i=' style="max-width: '+n.maxWidth+"px;"+(n.color?"background-color: "+n.color+';"':'"'),n.closeButton&&(u='<button type="button" class="'+t+'close" aria-hidden="true">×<\/button>'),n.progressBar&&(f=n.progressBar.renderHtml()),'<div id="'+n._id+'" class="'+n.classes+'"'+i+' role="presentation">'+r+'<div class="'+t+'notification-inner">'+n.state.get("text")+"<\/div>"+f+u+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"><\/div><\/div>'},postRender:function(){var n=this;return y.setTimeout(function(){n.$el.addClass(n.classPrefix+"in");br(n,n.state.get("text"))},100),n._super()},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl().firstChild.innerHTML=t.value;br(n,t.value)}),n.progressBar&&(n.progressBar.bindStates(),n.progressBar.state.on("change:value",function(){br(n,n.state.get("text"))})),n._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var n,t;n=this.getEl().style;t=this._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=65534}});l=tinymce.util.Tools.resolve("tinymce.ui.Factory");dr=function(n){return!!n.getAttribute("data-mce-tabstop")};var gr,nu,tu,iu,ro={},ot=h.extend({init:function(n){var t=this;t._super(n);(n=t.settings).fixed&&t.state.set("fixed",!0);t._items=new bt;t.isRtl()&&t.classes.add("rtl");t.bodyClasses=new fi(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())});t.bodyClasses.prefix=t.classPrefix;t.classes.add("container");t.bodyClasses.add("container-body");n.containerCls&&t.classes.add(n.containerCls);t._layout=l.create((n.layout||"")+"layout");t.settings.items?t.add(t.settings.items):t.add(t.render());t._hasBody=!0},items:function(){return this._items},find:function(n){return(n=ro[n]=ro[n]||new wt(n)).find(this)},add:function(n){return this.items().add(this.create(n)).parent(this),this},focus:function(n){var i,u,r,t=this;if(!n||!(u=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav))return r=t.find("*"),t.statusbar&&r.add(t.statusbar.items()),r.each(function(n){if(n.settings.autofocus)return i=null,!1;n.canFocus&&(i=i||n)}),i&&i.focus(),t;u.focusFirst(t)},replace:function(n,t){for(var i,u=this.items(),r=u.length;r--;)if(u[r]===n){u[r]=t;break}0<=r&&((i=t.getEl())&&i.parentNode.removeChild(i),(i=n.getEl())&&i.parentNode.removeChild(i));t.parent(this)},create:function(t){var i,r=this,u=[];return n.isArray(t)||(t=[t]),n.each(t,function(t){t&&(t instanceof h||("string"==typeof t&&(t={type:t}),i=n.extend({},r.settings.defaults,t),t.type=i.type=i.type||t.type||r.settings.defaultType||(i.defaults?i.defaults.type:null),t=l.create(i)),u.push(t))}),u},renderNew:function(){var n=this;return n.items().each(function(i,r){var u;i.parent(n);i.state.get("rendered")||((u=n.getEl("body")).hasChildNodes()&&r<=u.childNodes.length-1?t(u.childNodes[r]).before(i.renderHtml()):t(u).append(i.renderHtml()),i.postRender(),dt.add(i))}),n._layout.applyClasses(n.items().filter(":visible")),n._lastRect=null,n},append:function(n){return this.add(n).renderNew()},prepend:function(n){return this.items().set(this.create(n).concat(this.items().toArray())),this.renderNew()},insert:function(n,t,i){var r,u,f;return n=this.create(n),r=this.items(),!i&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(u=r.slice(0,t).toArray(),f=r.slice(t).toArray(),r.set(u.concat(n,f))),this.renderNew()},fromJSON:function(n){for(var t in n)this.find("#"+t).value(n[t]);return this},toJSON:function(){var n={};return this.find("*").each(function(t){var i=t.name(),r=t.value();i&&void 0!==r&&(n[i]=r)}),n},renderHtml:function(){var n=this,t=n._layout,i=this.settings.role;return n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'"'+(i?' role="'+this.settings.role+'"':"")+'><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var t,n=this;return n.items().exec("postRender"),n._super(),n._layout.postRender(n),n.state.set("rendered",!0),n.settings.style&&n.$el.css(n.settings.style),n.settings.border&&(t=n.borderBox,n.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),n.parent()||(n.keyboardNav=io({root:n})),n},initLayoutRect:function(){var n=this._super();return this._layout.recalc(this),n},recalc:function(){var t=this,n=t._layoutRect,i=t._lastRect;if(!i||i.w!==n.w||i.h!==n.h)return t._layout.recalc(t),n=t.layoutRect(),t._lastRect={x:n.x,y:n.y,w:n.w,h:n.h},!0},reflow:function(){var n;if(dt.remove(this),this.visible()){for(h.repaintControls=[],h.repaintControls.map={},this.recalc(),n=h.repaintControls.length;n--;)h.repaintControls[n].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint();h.repaintControls=[]}return this}}),uo={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){function i(){function f(i,f,e,o,s,h){var l,a,b,v,p,c,y,w;if(a=n.getEl("scroll"+i)){if(y=f.toLowerCase(),w=e.toLowerCase(),t(n.getEl("absend")).css(y,n.layoutRect()[o]-1),!s)return void t(a).css("display","none");t(a).css("display","block");l=n.getEl("body");b=n.getEl("scroll"+i+"t");v=l["client"+e]-4;p=(v-=r&&u?a["client"+h]:0)/l["scroll"+e];(c={})[y]=l["offset"+f]+2;c[w]=v;t(a).css(c);(c={})[y]=l["scroll"+f]*p;c[w]=v*p;t(b).css(c)}}var r,u,i;i=n.getEl("body");r=i.scrollWidth>i.clientWidth;u=i.scrollHeight>i.clientHeight;f("h","Left","Width","contentW",r,"Height");f("v","Top","Height","contentH",u,"Width")}var n=this;n.settings.autoScroll&&(n._hasScroll||(n._hasScroll=!0,function(){function i(i,r,u,f,e){var h,o=n._id+"-scroll"+i,s=n.classPrefix;t(n.getEl()).append('<div id="'+o+'" class="'+s+"scrollbar "+s+"scrollbar-"+i+'"><div id="'+o+'t" class="'+s+'scrollbar-thumb"><\/div><\/div>');n.draghelper=new it(o+"t",{start:function(){h=n.getEl("body")["scroll"+r];t("#"+o).addClass(s+"active")},drag:function(t){var s,c,l,a,o=n.layoutRect();c=o.contentW>o.innerW;l=o.contentH>o.innerH;a=n.getEl("body")["client"+u]-4;s=(a-=c&&l?n.getEl("scroll"+i)["client"+e]:0)/n.getEl("body")["scroll"+u];n.getEl("body")["scroll"+r]=h+t["delta"+f]/s},stop:function(){t("#"+o).removeClass(s+"active")}})}n.classes.add("scroll");i("v","Top","Height","Y","Width");i("h","Left","Width","X","Height")}(),n.on("wheel",function(t){var r=n.getEl("body");r.scrollLeft+=10*(t.deltaX||0);r.scrollTop+=10*t.deltaY;i()}),t(n.getEl("body")).on("scroll",i)),i())}},ci=ot.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[uo],renderHtml:function(){var n=this,i=n._layout,t=n.settings.html;return n.preRender(),i.preRender(n),void 0===t?t='<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+i.renderHtml(n)+"<\/div>":("function"==typeof t&&(t=t.call(n)),n._hasBody=!1),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1" role="group">'+(n._preBodyHtml||"")+t+"<\/div>"}}),fo={resizeToContent:function(){this._layoutRect.autoResize=!0;this._lastRect=null;this.reflow()},resizeTo:function(n,t){if(n<=1||t<=1){var r=i.getWindowSize();n=n<=1?n*r.w:n;t=t<=1?t*r.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:n,minH:t,w:n,h:t}).reflow()},resizeBy:function(n,t){var i=this.layoutRect();return this.resizeTo(i.w+n,i.h+t)}},s=[],a=[];p=ci.extend({Mixins:[hi,fo],init:function(n){var i=this;i._super(n);(i._eventsRoot=i).classes.add("floatpanel");n.autohide&&(wl(),function(){if(!tu){var n=document.documentElement,i=n.clientWidth,r=n.clientHeight;tu=function(){document.all&&i===n.clientWidth&&r===n.clientHeight||(i=n.clientWidth,r=n.clientHeight,p.hideAll())};t(window).on("resize",tu)}}(),s.push(i));n.autofix&&(nu||(nu=function(){for(var n=s.length;n--;)eo(s[n])},t(window).on("scroll",nu)),i.on("move",function(){eo(this)}));i.on("postrender show",function(n){if(n.control===i){var u,r=i.classPrefix;i.modal&&!iu&&((u=t("#"+r+"modal-block",i.getContainerElm()))[0]||(u=t('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"><\/div>').appendTo(i.getContainerElm())),y.setTimeout(function(){u.addClass(r+"in");t(i.getEl()).addClass(r+"in")}),iu=!0);ru(!0,i)}});i.on("show",function(){i.parents().each(function(n){if(n.state.get("fixed"))return i.fixed(!0),!1})});n.popover&&(i._preBodyHtml='<div class="'+i.classPrefix+'arrow"><\/div>',i.classes.add("popover").add("bottom").add(i.isRtl()?"end":"start"));i.aria("label",n.ariaLabel);i.aria("labelledby",i._id);i.aria("describedby",i.describedBy||i._id+"-none")},fixed:function(n){var t=this,r;return t.state.get("fixed")!==n&&(t.state.get("rendered")&&(r=i.getViewPort(),n?t.layoutRect().y-=r.y:t.layoutRect().y+=r.y),t.classes.toggle("fixed",n),t.state.set("fixed",n)),t},show:function(){for(var t=this._super(),n=s.length;n--&&s[n]!==this;);return-1===n&&s.push(this),t},hide:function(){return oo(this),ru(!1,this),this._super()},hideAll:function(){p.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),ru(!1,this)),this},remove:function(){oo(this);this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});p.hideAll=function(){for(var t,n=s.length;n--;)t=s[n],t&&t.settings.autohide&&(t.hide(),s.splice(n,1))};v=[];li="";ni=p.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(n){var t=this;t._super(n);t.isRtl()&&t.classes.add("rtl");t.classes.add("window");t.bodyClasses.add("window-body");t.state.set("fixed",!0);n.buttons&&(t.statusbar=new ci({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:n.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t));t.on("click",function(n){var r=t.classPrefix+"close";(i.hasClass(n.target,r)||i.hasClass(n.target.parentNode,r))&&t.close()});t.on("cancel",function(){t.close()});t.on("move",function(n){n.control===t&&p.hideAll()});t.aria("describedby",t.describedBy||t._id+"-none");t.aria("label",n.title);t._fullscreen=!1},recalc:function(){var t,r,u,f,n=this,e=n.statusbar;n._fullscreen&&(n.layoutRect(i.getWindowSize()),n.layoutRect().contentH=n.layoutRect().innerH);n._super();t=n.layoutRect();n.settings.title&&!n._fullscreen&&(r=t.headerW)>t.w&&(u=t.x-Math.max(0,r/2),n.layoutRect({w:r,x:u}),f=!0);e&&(e.layoutRect({w:n.layoutRect().innerW}).recalc(),(r=e.layoutRect().minW+t.deltaW)>t.w&&(u=t.x-Math.max(0,r-t.w),n.layoutRect({w:r,x:u}),f=!0));f&&n.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0,u,f;return t.settings.title&&!t._fullscreen&&(e=t.getEl("head"),u=i.getSize(e),n.headerW=u.width,n.headerH=u.height,r+=n.headerH),t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r,f=i.getWindowSize(),n.x=t.settings.x||Math.max(0,f.w/2-n.w/2),n.y=t.settings.y||Math.max(0,f.h/2-n.h/2),n},renderHtml:function(){var n=this,f=n._layout,t=n._id,r=n.classPrefix,i=n.settings,e="",o="",u=i.html;return n.preRender(),f.preRender(n),i.title&&(e='<div id="'+t+'-head" class="'+r+'window-head"><div id="'+t+'-title" class="'+r+'title">'+n.encode(i.title)+'<\/div><div id="'+t+'-dragh" class="'+r+'dragh"><\/div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"><\/i><\/button><\/div>'),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"><\/iframe>'),void 0===u&&(u=f.renderHtml(n)),n.statusbar&&(o=n.statusbar.renderHtml()),'<div id="'+t+'" class="'+n.classes+'" hidefocus="1"><div class="'+n.classPrefix+'reset" role="application">'+e+'<div id="'+t+'-body" class="'+n.bodyClasses+'">'+u+"<\/div>"+o+"<\/div><\/div>"},fullscreen:function(n){var e,u,r=this,o=document.documentElement,s=r.classPrefix,f;return n!==r._fullscreen&&((t(window).on("resize",function(){var t,n;r._fullscreen&&(e?r._timer||(r._timer=y.setTimeout(function(){var n=i.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h);r._timer=0},50)):(t=(new Date).getTime(),n=i.getWindowSize(),r.moveTo(0,0).resizeTo(n.w,n.h),50<(new Date).getTime()-t&&(e=!0)))}),u=r.layoutRect(),r._fullscreen=n)?(r._initial={x:u.x,y:u.y,w:u.w,h:u.h},r.borderBox=pt("0"),r.getEl("head").style.display="none",u.deltaH-=u.headerH+2,t([o,document.body]).addClass(s+"fullscreen"),r.classes.add("fullscreen"),f=i.getWindowSize(),r.moveTo(0,0).resizeTo(f.w,f.h)):(r.borderBox=pt(r.settings.border),r.getEl("head").style.display="",u.deltaH+=u.headerH,t([o,document.body]).removeClass(s+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h))),r.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in");n.fire("open")},0);n._super();n.statusbar&&n.statusbar.postRender();n.focus();this.dragHelper=new it(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(i){n.moveTo(t.x+i.deltaX,t.y+i.deltaY)}});n.on("submit",function(t){t.isDefaultPrevented()||n.close()});v.push(n);so(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n=this;for(n.dragHelper.destroy(),n._super(),n.statusbar&&this.statusbar.remove(),bl(n.classPrefix,!1),t=v.length;t--;)v[t]===n&&v.splice(t,1);so(0<v.length)},getContentWindow:function(){var n=this.getEl().getElementsByTagName("iframe")[0];return n?n.contentWindow:null}});!function(){if(!w.desktop){var n={w:window.innerWidth,h:window.innerHeight};y.setInterval(function(){var i=window.innerWidth,r=window.innerHeight;n.w===i&&n.h===r||(n={w:i,h:r},t(window).trigger("resize"))},100)}t(window).on("resize",function(){for(var t,r=i.getWindowSize(),n=0;n<v.length;n++)t=v[n].layoutRect(),v[n].moveTo(v[n].settings.x||Math.max(0,r.w/2-t.w/2),v[n].settings.y||Math.max(0,r.h/2-t.h/2))})}();var b=ni.extend({init:function(n){n={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}};this._super(n)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function t(n,t,i){return{type:"button",text:n,subtype:i?"primary":"",onClick:function(n){n.control.parents()[1].close();r(t)}}}var i,r=n.callback||function(){};switch(n.buttons){case b.OK_CANCEL:i=[t("Ok",!0,!0),t("Cancel",!1)];break;case b.YES_NO:case b.YES_NO_CANCEL:i=[t("Yes",1,!0),t("No",0)];n.buttons===b.YES_NO_CANCEL&&i.push(t("Cancel",-1));break;default:i=[t("Ok",!0,!0)]}return new ni({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:i,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(n,t){return"string"==typeof n&&(n={text:n}),n.callback=t,b.msgBox(n)},confirm:function(n,t){return"string"==typeof n&&(n={text:n}),n.callback=t,n.buttons=b.OK_CANCEL,b.msgBox(n)}}}),kl=function(n,t){return{renderUI:function(){return nl(n,t)},getNotificationManagerImpl:function(){return yl(n)},getWindowManagerImpl:function(){return{open:function(n,t,i){var r;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new ni(n)).on("close",function(){i(r)}),n.data&&r.on("postRender",function(){this.find("*").each(function(t){var i=t.name();i in n.data&&t.value(n.data[i])})}),r.features=n||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(n,t,i){var r;return(r=b.alert(n,function(){t()})).on("close",function(){i(r)}),r},confirm:function(n,t,i){var r;return(r=b.confirm(n,function(n){t(n)})).on("close",function(){i(r)}),r},close:function(n){n.close()},getParams:function(n){return n.params},setParams:function(n,t){n.params=t}}}}},dl="undefined"!=typeof window?window:Function("return this;")(),gl=function(n,t){for(var i=t!==undefined&&null!==t?t:dl,r=0;r<n.length&&i!==undefined&&null!==i;++r)i=i[n[r]];return i},na=function(n,t){var i=n.split(".");return gl(i,t)},ta=function(n,t){var i=na(n,t);if(i===undefined||null===i)throw n+" not available on this browser";return i};var ho,ai=tinymce.util.Tools.resolve("tinymce.util.Promise"),ra=function(n){return new ai(function(t){var i=new ia;i.onloadend=function(){t(i.result.split(",")[1])};i.readAsDataURL(n)})},ua=function(){return new ai(function(n){var t;(t=document.createElement("input")).type="file";t.style.position="fixed";t.style.left=0;t.style.top=0;t.style.opacity=.001;document.body.appendChild(t);t.onchange=function(t){n(Array.prototype.slice.call(t.target.files))};t.click();t.parentNode.removeChild(t)})},fa=0,ea=function(n){return n+fa+++(t=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+Date.now().toString(36)+t()+t()+t());var t},oa=function(n,t){function r(r){var e,u,f;u=t[r?"startContainer":"endContainer"];f=t[r?"startOffset":"endOffset"];1===u.nodeType&&(e=n.create("span",{"data-mce-type":"bookmark"}),u.hasChildNodes()?(f=Math.min(f,u.childNodes.length-1),r?u.insertBefore(e,u.childNodes[f]):n.insertAfter(e,u.childNodes[f])):u.appendChild(e),u=e,f=0);i[r?"startContainer":"endContainer"]=u;i[r?"startOffset":"endOffset"]=f}var i={};return r(!0),t.collapsed||r(),i},sa=function(n,t){function r(i){var r,u,f;r=f=t[i?"startContainer":"endContainer"];u=t[i?"startOffset":"endOffset"];r&&(1===r.nodeType&&(u=function(n){for(var t=n.parentNode.firstChild,i=0;t;){if(t===n)return i;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||i++;t=t.nextSibling}return-1}(r),r=r.parentNode,n.remove(f)),t[i?"startContainer":"endContainer"]=r,t[i?"startOffset":"endOffset"]=u)}r(!0);r();var i=n.createRng();return i.setStart(t.startContainer,t.startOffset),t.endContainer&&i.setEnd(t.endContainer,t.endOffset),i},ha=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),co=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),lo=function(n){return"A"===n.nodeName&&n.hasAttribute("href")},ca=function(t){var u,f,e,o,s,i,h,r;return o=t.selection,s=t.dom,i=o.getRng(),h=s,r=co.getNode(i.startContainer,i.startOffset),u=h.getParent(r,lo)||r,f=co.getNode(i.endContainer,i.endOffset),e=t.getBody(),n.grep(function(n,t,i){for(var f=[],u=new ha(t,n),r=t;r&&(1===r.nodeType&&f.push(r),r!==i);r=u.next());return f}(e,u,f),lo)},la=function(t){var i,f,e,r,u;f=ca(i=t);r=i.dom;u=i.selection;e=oa(r,u.getRng());n.each(f,function(n){i.dom.remove(n,!0)});u.setRng(sa(r,e))},uu=function(n){n.selection.collapse(!1)},ao=function(n){n.focus();la(n);uu(n)},aa=function(n,t){var r,u,i,f,e,o=n.dom.getParent(n.selection.getStart(),"a[href]");o?(f=o,e=t,(i=n).focus(),i.dom.setAttrib(f,"href",e),uu(i)):(u=t,(r=n).execCommand("mceInsertLink",!1,{href:u}),uu(r))},va=function(n,t,i){var r,u,f;n.plugins.table?n.plugins.table.insertTable(t,i):(u=t,f=i,(r=n).undoManager.transact(function(){var n,t;r.insertContent(function(n,t){var r,u,i;for(i='<table data-mce-id="mce" style="width: 100%">',i+="<tbody>",u=0;u<t;u++){for(i+="<tr>",r=0;r<n;r++)i+="<td><br><\/td>";i+="<\/tr>"}return i+="<\/tbody>",i+"<\/table>"}(u,f));(n=r.dom.select("*[data-mce-id]")[0]).removeAttribute("data-mce-id");t=r.dom.select("td,th",n);r.selection.setCursorLocation(t[0],0)}))},ya=function(n,t){n.execCommand("FormatBlock",!1,t)},pa=function(n,t,i){var u,r;r=(u=n.editorUpload.blobCache).create(ea("mceu"),i,t);u.add(r);n.insertContent(n.dom.createHTML("img",{src:r.blobUri()}))},wa=function(n,t){0===t.trim().length?ao(n):aa(n,t)},ba=ao,ka=function(n,t){n.addButton("quicklink",{icon:"link",tooltip:"Insert/Edit link",stateSelector:"a[href]",onclick:function(){t.showForm(n,"quicklink")}});n.addButton("quickimage",{icon:"image",tooltip:"Insert image",onclick:function(){ua().then(function(t){var i=t[0];ra(i).then(function(t){pa(n,t,i)})})}});n.addButton("quicktable",{icon:"table",tooltip:"Insert table",onclick:function(){t.hide();va(n,2,2)}}),function(n){for(var i,r=function(t){return function(){ya(n,t)}},t=1;t<6;t++)i="h"+t,n.addButton(i,{text:i.toUpperCase(),tooltip:"Heading "+t,stateSelector:i,onclick:r(i),onPostRender:function(){this.getEl().firstChild.firstChild.style.fontWeight="bold"}})}(n)},da=function(){var n=w.container;if(n&&"static"!==u.DOM.getStyle(n,"position",!0)){var t=u.DOM.getPos(n),i=t.x-n.scrollLeft,r=t.y-n.scrollTop;return e.some({x:i,y:r})}return e.none()},ga=function(n){return/^www\.|\.(com|org|edu|gov|uk|net|ca|de|jp|fr|au|us|ru|ch|it|nl|se|no|es|mil)$/i.test(n.trim())},nv=function(n){return/^https?:\/\//.test(n.trim())},tv=function(n,t){return!nv(t)&&ga(t)?(r=n,i=t,new ai(function(n){r.windowManager.confirm("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(t){n(!0===t?"http://"+i:i)})})):ai.resolve(t);var r,i},iv=function(t,i){var f,e,u,r={};return f="quicklink",e={items:[{type:"button",name:"unlink",icon:"unlink",onclick:function(){t.focus();ba(t);i()},tooltip:"Remove link"},{type:"filepicker",name:"linkurl",placeholder:"Paste or type a link",filetype:"file",onchange:function(n){var t=n.meta;t&&t.attach&&(r={href:this.value(),attach:t.attach})}},{type:"button",icon:"checkmark",subtype:"primary",tooltip:"Ok",onclick:"submit"}],onshow:function(n){var i,r,u;n.control===this&&(r="",(i=t.dom.getParent(t.selection.getStart(),"a[href]"))&&(r=t.dom.getAttrib(i,"href")),this.fromJSON({linkurl:r}),u=this.find("#unlink"),i?u.show():u.hide(),this.find("#linkurl")[0].focus())},onsubmit:function(n){tv(t,n.data.linkurl).then(function(n){t.undoManager.transact(function(){n===r.href&&(r.attach(),r={});wa(t,n)});i()})}},(u=l.create(n.extend({type:"form",layout:"flex",direction:"row",padding:5,name:f,spacing:3},e))).on("show",function(){u.find("textbox").eq(0).each(function(n){n.focus()})}),u},fu=function(t,i,r){var u,f,e=[];if(r)return n.each(fr(f=r)?f:ur(f)?f.split(/[ ,]/):[],function(n){var i,r,f;"|"===n?u=null:t.buttons[n]&&(u||(u={type:"buttongroup",items:[]},e.push(u)),i=t.buttons[n],lf(i)&&(i=i()),i.type=i.type||"button",(i=l.create(i)).on("postRender",(r=t,f=i,function(){var n,t,i=(t=function(n,t){return{selector:n,handler:t}},(n=f).settings.stateSelector?t(n.settings.stateSelector,function(t){n.active(t)}):n.settings.disabledStateSelector?t(n.settings.disabledStateSelector,function(t){n.disabled(t)}):null);null!==i&&r.selection.selectorChanged(i.selector,i.handler)})),u.items.push(i))}),l.create({type:"toolbar",layout:"flow",name:i,items:e})},rv=function(){var t,r,c=function(n){return 0<n.items().length},a=function(t,r){var u,f,e=(u=t,f=r,n.map(f,function(n){return fu(u,n.id,n.items)})).concat([fu(t,"text",yc(t)),fu(t,"insert",pc(t)),iv(t,i)]);return l.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:n.grep(e,c),oncancel:function(){t.focus()}})},e=function(n){n&&n.show()},o=function(n,t){n.moveTo(t.x,t.y)},s=function(t,i){i=i?i.substr(0,2):"";n.each({t:"down",b:"up",c:"center"},function(n,r){t.classes.toggle("arrow-"+n,r===i.substr(0,1))});"cr"===i?(t.classes.toggle("arrow-left",!0),t.classes.toggle("arrow-right",!1)):"cl"===i?(t.classes.toggle("arrow-left",!0),t.classes.toggle("arrow-right",!0)):n.each({l:"left",r:"right"},function(n,r){t.classes.toggle("arrow-"+n,r===i.substr(1,1))})},f=function(n,t){var i=n.items().filter("#"+t);return 0<i.length&&(i[0].show(),n.reflow(),!0)},h=function(n,t,i,f){var h,c,e,a,l,v;return(a=bf(i),h=of(i),c=u.DOM.getRect(n.getEl()),e="insert"===t?ac(f,h,c):pf(f,h,c))?(l=da().getOr({x:0,y:0}),v={x:e.rect.x-l.x,y:e.rect.y-l.y,w:e.rect.w,h:e.rect.h},o(n,wf(a,r=f,h,v)),s(n,e.position),!0):!1},i=function(){t&&t.hide()};return{show:function(n,r,u,o){var s,c,l,v;t||(hc(n),(t=a(n,o)).renderTo().reflow().moveTo(u.x,u.y),n.nodeChanged());c=r;l=n;v=u;e(s=t);s.items().hide();f(s,c)?!1===h(s,c,l,v)&&i():i()},showForm:function(n,h){if(t){if(t.items().hide(),!f(t,h))return void i();var l,a,v,c=void 0;e(t);t.items().hide();f(t,h);v=bf(n);l=of(n);c=u.DOM.getRect(t.getEl());(a=pf(r,l,c))&&(c=a.rect,o(t,wf(v,r,l,c)),s(t,a.position))}},reposition:function(n,i,r){t&&h(t,i,n,r)},inForm:function(){return t&&t.visible()&&0<t.items().filter("form:visible").length},hide:i,focus:function(){t&&t.find("toolbar:visible").eq(0).each(function(n){n.focus(!0)})},remove:function(){t&&(t.remove(),t=null)}}},eu=yt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=n.extend({},this.Defaults,t)},preRender:function(n){n.bodyClasses.add(this.settings.containerClass)},applyClasses:function(n){var i,r,t,u,f=this.settings;i=f.firstControlClass;r=f.lastControlClass;n.each(function(n){n.classes.remove(i).remove(r).add(f.controlClass);n.visible()&&(t||(t=n),u=n)});t&&t.classes.add(i);u&&u.classes.add(r)},renderHtml:function(n){var t="";return this.applyClasses(n.items()),n.items().each(function(n){t+=n.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),vi=eu.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(n){n.items().filter(":visible").each(function(n){var t=n.settings;n.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h});n.recalc&&n.recalc()})},renderHtml:function(n){return'<div id="'+n._id+'-absend" class="'+n.classPrefix+'abs-end"><\/div>'+this._super(n)}}),yi=o.extend({Defaults:{classes:"widget btn",role:"button"},init:function(n){var i,t=this;t._super(n);n=t.settings;i=t.settings.size;t.on("click mousedown",function(n){n.preventDefault()});t.on("touchstart",function(n){t.fire("click",n);n.preventDefault()});n.subtype&&t.classes.add(n.subtype);i&&t.classes.add("btn-"+i);n.icon&&t.icon(n.icon)},icon:function(n){return arguments.length?(this.state.set("icon",n),this):this.state.get("icon")},repaint:function(){var n,t=this.getEl().firstChild;t&&((n=t.style).width=n.height="100%");this._super()},renderHtml:function(){var n,f,t=this,e=t._id,r=t.classPrefix,i=t.state.get("icon"),o=t.state.get("text"),s="",u=t.settings;return(n=u.image)?(i="none","string"!=typeof n&&(n=window.getSelection?n[0]:n[1]),n=" style=\"background-image: url('"+n+"')\""):n="",o&&(t.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+t.encode(o)+"<\/span>"),i=i?r+"ico "+r+"i-"+i:"",f="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+e+'" class="'+t.classes+'" tabindex="-1"'+f+'><button id="'+e+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+n+"><\/i>":"")+s+"<\/button><\/div>"},bindStates:function(){function r(r){var u=t("span."+i,n.getEl());r?(u[0]||(t("button:first",n.getEl()).append('<span class="'+i+'"><\/span>'),u=t("span."+i,n.getEl())),u.html(n.encode(r))):u.remove();n.classes.toggle("btn-has-text",!!r)}var n=this,t=n.$,i=n.classPrefix+"txt";return n.state.on("change:text",function(n){r(n.value)}),n.state.on("change:icon",function(t){var f=t.value,e=n.classPrefix,u,i;f=(n.settings.icon=f)?e+"ico "+e+"i-"+n.settings.icon:"";u=n.getEl().firstChild;i=u.getElementsByTagName("i")[0];f?(i&&i===u.firstChild||(i=document.createElement("i"),u.insertBefore(i,u.firstChild)),i.className=f):i&&u.removeChild(i);r(n.state.get("text"))}),n._super()}}),uv=yi.extend({init:function(t){t=n.extend({text:"Browse...",multiple:!1,accept:null},t);this._super(t);this.classes.add("browsebutton");t.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,r=i.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super();t(r).on("change",function(t){var i=t.target.files;n.value=function(){return i.length?n.settings.multiple?i:i[0]:null};t.preventDefault();i.length&&n.fire("change",t)});t(r).on("click",function(n){n.stopPropagation()});t(n.getEl("button")).on("click",function(n){n.stopPropagation();r.click()});n.getEl().appendChild(r)},remove:function(){t(this.getEl("button")).off();t(this.getEl("input")).off();this._super()}}),fv=ot.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var n=this,t=n._layout;return n.classes.add("btn-group"),n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'"><div id="'+n._id+'-body">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}}),vo=o.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(n){var t=this;t._super(n);t.on("click mousedown",function(n){n.preventDefault()});t.on("click",function(n){n.preventDefault();t.disabled()||t.checked(!t.checked())});t.checked(t.settings.checked)},checked:function(n){return arguments.length?(this.state.set("checked",n),this):this.state.get("checked")},value:function(n){return arguments.length?this.checked(n):this.checked()},renderHtml:function(){var n=this,t=n._id,i=n.classPrefix;return'<div id="'+t+'" class="'+n.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+i+"ico "+i+'i-checkbox"><\/i><span id="'+t+'-al" class="'+i+'label">'+n.encode(n.state.get("text"))+"<\/span><\/div>"},bindStates:function(){function t(t){n.classes.toggle("checked",t);n.aria("checked",t)}var n=this;return n.state.on("change:text",function(t){n.getEl("al").firstChild.data=n.translate(t.value)}),n.state.on("change:checked change:value",function(i){n.fire("change");t(i.value)}),n.state.on("change:icon",function(t){var u=t.value,f=n.classPrefix,r,i;if(void 0===u)return n.settings.icon;u=(n.settings.icon=u)?f+"ico "+f+"i-"+n.settings.icon:"";r=n.getEl().firstChild;i=r.getElementsByTagName("i")[0];u?(i&&i===r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=u):i&&r.removeChild(i)}),n.state.get("checked")&&t(!0),n._super()}}),yo=tinymce.util.Tools.resolve("tinymce.util.VK"),ou=o.extend({init:function(n){var i=this;i._super(n);n=i.settings;i.classes.add("combobox");i.subinput=!0;i.ariaTarget="inp";n.menu=n.menu||n.values;n.menu&&(n.icon="caret");i.on("click",function(r){var u=r.target,f=i.getEl();if(t.contains(f,u)||u===f)for(;u&&u!==f;)u.id&&-1!==u.id.indexOf("-open")&&(i.fire("action"),n.menu&&(i.showMenu(),r.aria&&i.menu.items()[0].focus())),u=u.parentNode});i.on("keydown",function(n){var t;13===n.keyCode&&"INPUT"===n.target.nodeName&&(n.preventDefault(),i.parents().reverse().each(function(n){if(n.toJSON)return t=n,!1}),i.fire("submit",{data:t.toJSON()}))});i.on("keyup",function(n){if("INPUT"===n.target.nodeName){var r=i.state.get("value"),t=n.target.value;t!==r&&(i.state.set("value",t),i.fire("autocomplete",n))}});i.on("mouseover",function(n){var t=i.tooltip().moveTo(-65535),u,r;i.statusLevel()&&-1!==n.target.className.indexOf(i.classPrefix+"status")&&(u=i.statusMessage()||"Ok",r=t.text(u).show().testMoveRel(n.target,["bc-tc","bc-tl","bc-tr"]),t.classes.toggle("tooltip-n","bc-tc"===r),t.classes.toggle("tooltip-nw","bc-tl"===r),t.classes.toggle("tooltip-ne","bc-tr"===r),t.moveRel(n.target,r))})},statusLevel:function(n){return 0<arguments.length&&this.state.set("statusLevel",n),this.state.get("statusLevel")},statusMessage:function(n){return 0<arguments.length&&this.state.set("statusMessage",n),this.state.get("statusMessage")},showMenu:function(){var t,n=this,i=n.settings;n.menu||((t=i.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",n.menu=l.create(t).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control===n.menu&&n.focus()}),n.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===n.value())})}).fire("show"),n.menu.on("select",function(t){n.value(t.control.value())}),n.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0));n.menu.show();n.menu.layoutRect({w:n.layoutRect().w});n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var f,e,n=this,c=n.getEl(),o=n.getEl("open"),s=n.layoutRect(),h=0,u=c.firstChild,r;return n.statusLevel()&&"none"!==n.statusLevel()&&(h=parseInt(i.getRuntimeStyle(u,"padding-right"),10)-parseInt(i.getRuntimeStyle(u,"padding-left"),10)),f=o?s.w-i.getSize(o).width-10:s.w-10,r=document,r.all&&(!r.documentMode||r.documentMode<=8)&&(e=n.layoutRect().h-2+"px"),t(u).css({width:f-h,lineHeight:e}),n._super(),n},postRender:function(){var n=this;return t(this.getEl("inp")).on("change",function(t){n.state.set("value",t.target.value);n.fire("change",t)}),n._super()},renderHtml:function(){var i,e,o,t=this,f=t._id,n=t.settings,r=t.classPrefix,h=t.state.get("value")||"",s="",u="";return"spellcheck"in n&&(u+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(u+=' maxlength="'+n.maxLength+'"'),n.size&&(u+=' size="'+n.size+'"'),n.subtype&&(u+=' type="'+n.subtype+'"'),o='<i id="'+f+'-status" class="mce-status mce-ico" style="display: none"><\/i>',t.disabled()&&(u+=' disabled="disabled"'),(i=n.icon)&&"caret"!==i&&(i=r+"ico "+r+"i-"+n.icon),e=t.state.get("text"),(i||e)&&(s='<div id="'+f+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+f+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==i?'<i class="'+i+'"><\/i>':'<i class="'+r+'caret"><\/i>')+(e?(i?" ":"")+e:"")+"<\/button><\/div>",t.classes.add("has-open")),'<div id="'+f+'" class="'+t.classes+'"><input id="'+f+'-inp" class="'+r+'textbox" value="'+t.encode(h,!1)+'" hidefocus="1"'+u+' placeholder="'+t.encode(n.placeholder)+'" />'+o+s+"<\/div>"},value:function(n){return arguments.length?(this.state.set("value",n),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,i){var r=this,u;0!==t.length?(r.menu?r.menu.items().remove():r.menu=l.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),n.each(t,function(n){var t,u;r.menu.add({text:n.title,url:n.previewUrl,match:i,classes:"menu-item-ellipsis",onclick:(t=n.value,u=n.title,function(){r.fire("selectitem",{title:u,value:t})})})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(n){n.control.parent()===r.menu&&(n.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()}),u=r.layoutRect().w,r.menu.layoutRect({w:u,minW:0,maxW:u}),r.menu.repaint(),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])):r.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var n=this,t;return n.state.on("change:value",function(t){n.getEl("inp").value!==t.value&&(n.getEl("inp").value=t.value)}),n.state.on("change:disabled",function(t){n.getEl("inp").disabled=t.value}),n.state.on("change:statusLevel",function(t){var u=n.getEl("status"),f=n.classPrefix,r=t.value;i.css(u,"display","none"===r?"none":"");i.toggleClass(u,f+"i-checkmark","ok"===r);i.toggleClass(u,f+"i-warning","warn"===r);i.toggleClass(u,f+"i-error","error"===r);n.classes.toggle("has-status","none"!==r);n.repaint()}),i.on(n.getEl("status"),"mouseleave",function(){n.tooltip().hide()}),n.on("cancel",function(t){n.menu&&n.menu.visible()&&(t.stopPropagation(),n.hideMenu())}),t=function(n,t){t&&0<t.items().length&&t.items().eq(n)[0].focus()},n.on("keydown",function(i){var r=i.keyCode;"INPUT"===i.target.nodeName&&(r===yo.DOWN?(i.preventDefault(),n.fire("autocomplete"),t(0,n.menu)):r===yo.UP&&(i.preventDefault(),t(-1,n.menu)))}),n._super()},remove:function(){t(this.getEl("inp")).off();this.menu&&this.menu.remove();this._super()}}),ev=ou.extend({init:function(n){var t=this;n.spellcheck=!1;n.onaction&&(n.icon="none");t._super(n);t.classes.add("colorbox");t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(n){var t=this.getEl("open"),i=t?t.getElementsByTagName("i")[0]:null;if(i)try{i.style.background=n}catch(r){}},bindStates:function(){var n=this;return n.state.on("change:value",function(t){n.state.get("rendered")&&n.repaintColor(t.value)}),n._super()}}),po=yi.extend({showPanel:function(){var n=this,u=n.settings,t,i,r;(n.classes.add("opened"),n.panel)?n.panel.show():(t=u.panel,t.type&&(t={layout:"grid",items:t}),t.role=t.role||"dialog",t.popover=!0,t.autohide=!0,t.ariaRoot=!0,n.panel=new p(t).on("hide",function(){n.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation();n.focus();n.hidePanel()}).parent(n).renderTo(n.getContainerElm()),n.panel.fire("show"),n.panel.reflow());i=n.panel.testMoveRel(n.getEl(),u.popoverAlign||(n.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));n.panel.classes.toggle("start","l"===i.substr(-1));n.panel.classes.toggle("end","r"===i.substr(-1));r="t"===i.substr(0,1);n.panel.classes.toggle("bottom",!r);n.panel.classes.toggle("top",r);n.panel.moveRel(n.getEl(),i)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var n=this;return n.aria("haspopup",!0),n.on("click",function(t){t.control===n&&(n.panel&&n.panel.visible()?n.hidePanel():(n.showPanel(),n.panel.focus(!!t.aria)))}),n._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),ov=u.DOM,sv=po.extend({init:function(n){this._super(n);this.classes.add("splitbtn");this.classes.add("colorbutton")},color:function(n){return n?(this._color=n,this.getEl("preview").style.backgroundColor=n,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var n=this,i=n._id,t=n.classPrefix,r=n.state.get("text"),u=n.settings.icon?t+"ico "+t+"i-"+n.settings.icon:"",e=n.settings.image?" style=\"background-image: url('"+n.settings.image+"')\"":"",f="";return r&&(n.classes.add("btn-has-text"),f='<span class="'+t+'txt">'+n.encode(r)+"<\/span>"),'<div id="'+i+'" class="'+n.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(u?'<i class="'+u+'"'+e+"><\/i>":"")+'<span id="'+i+'-preview" class="'+t+'preview"><\/span>'+f+'<\/button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this,t=n.settings.onclick;return n.on("click",function(i){i.aria&&"down"===i.aria.key||i.control!==n||ov.getParent(i.target,"."+n.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(n,i))}),delete n.settings.onclick,n._super()}}),wo=tinymce.util.Tools.resolve("tinymce.util.Color"),hv=o.extend({Defaults:{classes:"widget colorpicker"},init:function(n){this._super(n)},postRender:function(){function h(n,t){var r,u,f=i.getPos(n);return r=t.pageX-f.x,u=t.pageY-f.y,{x:r=Math.max(0,Math.min(r/n.clientWidth,1)),y:u=Math.max(0,Math.min(u/n.clientHeight,1))}}function u(t,u){var f=(360-t.h)/360;i.css(e,{top:100*f+"%"});u||i.css(o,{left:t.s+"%",top:100-t.v+"%"});r.style.background=wo({s:100,v:100,h:t.h}).toHex();n.color().parse({s:t.s,v:t.v,h:t.h})}function c(i){var f;f=h(r,i);t.s=100*f.x;t.v=100*(1-f.y);u(t);n.fire("change")}function l(i){var r;r=h(f,i);(t=s.toHsv()).h=360*(1-r.y);u(t,!0);n.fire("change")}var t,f,e,r,o,n=this,s=n.color();f=n.getEl("h");e=n.getEl("hp");r=n.getEl("sv");o=n.getEl("svp");n._repaint=function(){u(t=s.toHsv())};n._super();n._svdraghelper=new it(n._id+"-sv",{start:c,drag:c});n._hdraghelper=new it(n._id+"-h",{start:l,drag:l});n._repaint()},rgb:function(){return this.color().toRgb()},value:function(n){if(!arguments.length)return this.color().toHex();this.color().parse(n);this._rendered&&this._repaint()},color:function(){return this._color||(this._color=wo()),this._color},renderHtml:function(){var i,t=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return i='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);background: linear-gradient(to bottom,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);">'+function(){var t,u,f,i,e="";for(f="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,u=(i=r.split(",")).length-1;t<u;t++)e+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/u+"%;"+f+i[t]+",endColorstr="+i[t+1]+");-ms-"+f+i[t]+",endColorstr="+i[t+1]+')"><\/div>';return e}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"><\/div><\/div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"><\/div><\/div><\/div><\/div><\/div>'+i+"<\/div>"}}),cv=o.extend({init:function(t){t=n.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t);this._super(t);this.classes.add("dropzone");t.multiple&&this.classes.add("multiple")},renderHtml:function(){var r,n,t=this.settings;return r={id:this._id,hidefocus:"1"},n=i.create("div",r,"<span>"+this.translate(t.text)+"<\/span>"),t.height&&i.css(n,"height",t.height+"px"),t.width&&i.css(n,"width",t.width+"px"),n.className=this.classes,n.outerHTML},postRender:function(){var t=this,i=function(n){n.preventDefault();t.classes.toggle("dragenter");t.getEl().className=t.classes};t._super();t.$el.on("dragover",function(n){n.preventDefault()});t.$el.on("dragenter",i);t.$el.on("dragleave",i);t.$el.on("drop",function(i){if(i.preventDefault(),!t.state.get("disabled")){var r=function(i){var r=t.settings.accept,u;return"string"!=typeof r?i:(u=new RegExp("("+r.split(/\s*,\s*/).join("|")+")$","i"),n.grep(i,function(n){return u.test(n.name)}))}(i.dataTransfer.files);t.value=function(){return r.length?t.settings.multiple?r:r[0]:null};r.length&&t.fire("change",i)}})},remove:function(){this.$el.off();this._super()}}),bo=o.extend({init:function(n){var t=this;n.delimiter||(n.delimiter="»");t._super(n);t.classes.add("path");t.canFocus=!0;t.on("click",function(n){var i;(i=n.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[i],index:i})});t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(n){return arguments.length?(this.state.set("row",n),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"<\/div>"},bindStates:function(){var n=this;return n.state.on("change:row",function(t){n.innerHtml(n._getDataPathHtml(t.value))}),n._super()},_getDataPathHtml:function(n){for(var f=n||[],i="",r=this.classPrefix,t=0,u=f.length;t<u;t++)i+=(0<t?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" <\/div>":"")+'<div role="button" class="'+r+"path-item"+(t===u-1?" "+r+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+f[t].name+"<\/div>";return i||(i='<div class="'+r+'path-item"> <\/div>'),i}}),lv=bo.extend({postRender:function(){function i(n){return 1===n.nodeType&&("BR"===n.nodeName||n.getAttribute("data-mce-bogus")||"bookmark"===n.getAttribute("data-mce-type"))?!0:!1}var t=this,n=t.settings.editor;return!1!==n.settings.elementpath&&(t.on("select",function(t){n.focus();n.selection.select(this.row()[t.index].element);n.nodeChanged()}),n.on("nodeChange",function(r){for(var e,o=[],u=r.parents,f=u.length;f--;)if(1===u[f].nodeType&&!i(u[f])&&(e=n.fire("ResolveName",{name:u[f].nodeName.toLowerCase(),target:u[f]}),e.isDefaultPrevented()||o.push({name:e.name,element:u[f]}),e.isPropagationStopped()))break;t.row(o)})),t._super()}}),ko=ot.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.classes.add("formitem"),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<div id="'+n._id+'-title" class="'+i+'title">'+n.settings.title+"<\/div>":"")+'<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}}),go=ot.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,i=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}});i.each(function(i){var r,u=i.settings.label;u&&((r=new ko(n.extend({items:{type:"label",id:i._id+"-l",text:u,flex:0,forId:i._id,disabled:i.disabled()}},t.settings.formItemDefaults))).type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex&&(i.settings.flex=1),t.replace(i,r),r.add(i))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super();this.fromJSON(this.settings.data)},bindStates:function(){function t(){var i,u,t=0,r=[];if(!1!==n.settings.labelGapCalc)for(("children"===n.settings.labelGapCalc?n.find("formitem"):n.items()).filter("formitem").each(function(n){var i=n.items()[0],u=i.getEl().clientWidth;t=t<u?u:t;r.push(i)}),u=n.settings.labelGap||0,i=r.length;i--;)r[i].settings.minWidth=t+u}var n=this;n._super();n.on("show",t);t()}}),av=go.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.preRender(),t.preRender(n),'<fieldset id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<legend id="'+n._id+'-title" class="'+i+'fieldset-title">'+n.settings.title+"<\/legend>":"")+'<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/fieldset>"}}),vv=0,yv=function(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++vv+String(t)},ti=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:r.constant(n)}},st={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return ti(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return ti(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return ti(i)},fromDom:ti,fromPoint:function(n,t,i){return e.from(n.dom().elementFromPoint(t,i)).map(ti)}},ns=function(n){var t,i=!1;return function(){return i||(i=!0,t=n.apply(null,arguments)),t}},ts=9,is=1,pv=function(n){return n.dom().nodeType},su=function(n){return function(t){return pv(t)===n}},wv=(su(is),su(3),su(ts),ns(function(){return wv(st.fromDom(document))}),function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return st.fromDom(t)}),hu=(ho=Object.keys)===undefined?function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}:ho,pi=function(n,t){for(var r,u=hu(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},rs=function(n,t){var i={};return pi(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},us=function(n,t){var i=[];return pi(n,function(n,r){i.push(t(n,r))}),i},fs=function(n){return us(n,function(n){return n})},bv={bifilter:function(n,t){var i={},r={};return pi(n,function(n,u){(t(n,u)?i:r)[u]=n}),{t:i,f:r}},each:pi,map:function(n,t){return rs(n,function(n,i,r){return{k:i,v:t(n,i,r)}})},mapToArray:us,tupleMap:rs,find:function(n,t){for(var r,u,f=hu(n),i=0,o=f.length;i<o;i++)if(r=f[i],u=n[r],t(u,r,n))return e.some(u);return e.none()},keys:hu,values:fs,size:function(n){return fs(n).length}},wi=function(n){return n.slice(0).sort()},kv=function(n,t){throw new Error("All required keys ("+wi(n).join(", ")+") were not specified. Specified keys were: "+wi(t).join(", ")+".");},dv=function(n){throw new Error("Unsupported keys for object: "+wi(n).join(", "));},es=function(n,t){if(!vt.isArray(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");f.each(t,function(t){if(!vt.isString(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.");})},gv=function(n){var t=wi(n);f.find(t,function(n,i){return i<t.length-1&&n===t[i+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].");})},ny={immutable:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){for(var u,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(n.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+t.length+" arguments");return u={},f.each(n,function(n,i){u[n]=r.constant(t[i])}),u}},immutableBag:function(n,t){var i=n.concat(t);if(0===i.length)throw new Error("You must specify at least one required or optional field.");return es("required",n),es("optional",t),gv(i),function(u){var s=bv.keys(u),h,o;return f.forall(n,function(n){return f.contains(s,n)})||kv(n,s),h=f.filter(s,function(n){return!f.contains(i,n)}),0<h.length&&dv(h),o={},f.each(n,function(n){o[n]=r.constant(u[n])}),f.each(t,function(n){o[n]=r.constant(Object.prototype.hasOwnProperty.call(u,n)?e.some(u[n]):e.none())}),o}}},ty=function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},cu(i(1),i(2))):{major:0,minor:0}},os=function(){return cu(0,0)},cu=function(n,t){return{major:n,minor:t}},bi={nu:cu,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?os():ty(n,i)},unknown:os},ss="Firefox",ht=function(n,t){return function(){return t===n}},hs=function(n){var t=n.current;return{current:t,version:n.version,isEdge:ht("Edge",t),isChrome:ht("Chrome",t),isIE:ht("IE",t),isOpera:ht("Opera",t),isFirefox:ht(ss,t),isSafari:ht("Safari",t)}},cs={unknown:function(){return hs({current:undefined,version:bi.unknown()})},nu:hs,edge:r.constant("Edge"),chrome:r.constant("Chrome"),ie:r.constant("IE"),opera:r.constant("Opera"),firefox:r.constant(ss),safari:r.constant("Safari")},ls="Windows",as="Android",vs="Solaris",ys="FreeBSD",rt=function(n,t){return function(){return t===n}},ps=function(n){var t=n.current;return{current:t,version:n.version,isWindows:rt(ls,t),isiOS:rt("iOS",t),isAndroid:rt(as,t),isOSX:rt("OSX",t),isLinux:rt("Linux",t),isSolaris:rt(vs,t),isFreeBSD:rt(ys,t)}},ws={unknown:function(){return ps({current:undefined,version:bi.unknown()})},nu:ps,windows:r.constant(ls),ios:r.constant("iOS"),android:r.constant(as),linux:r.constant("Linux"),osx:r.constant("OSX"),solaris:r.constant(vs),freebsd:r.constant(ys)},bs=function(n,t){var i=String(t).toLowerCase();return f.find(n,function(n){return n.search(i)})},iy=function(n,t){return bs(n,t).map(function(n){var i=bi.detect(n.versionRegexes,t);return{current:n.name,version:i}})},ry=function(n,t){return bs(n,t).map(function(n){var i=bi.detect(n.versionRegexes,t);return{current:n.name,version:i}})},c=function(n,t){return-1!==n.indexOf(t)},lu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,g=function(n){return function(t){return c(t,n)}},uy=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return c(n,"edge/")&&c(n,"chrome")&&c(n,"safari")&&c(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,lu],search:function(n){return c(n,"chrome")&&!c(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return c(n,"msie")||c(n,"trident")}},{name:"Opera",versionRegexes:[lu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:g("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:g("firefox")},{name:"Safari",versionRegexes:[lu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(c(n,"safari")||c(n,"mobile/"))&&c(n,"applewebkit")}}],fy=[{name:"Windows",search:g("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return c(n,"iphone")||c(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:g("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:g("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:g("linux"),versionRegexes:[]},{name:"Solaris",search:g("sunos"),versionRegexes:[]},{name:"FreeBSD",search:g("freebsd"),versionRegexes:[]}],ks={browsers:r.constant(uy),oses:r.constant(fy)},ey=function(n){var t,o,i,u,s,h,c,f,e,l,a,p=ks.browsers(),w=ks.oses(),v=iy(p,n).fold(cs.unknown,cs.nu),y=ry(w,n).fold(ws.unknown,ws.nu);return{browser:v,os:y,deviceType:(o=v,i=n,u=(t=y).isiOS()&&!0===/ipad/i.test(i),s=t.isiOS()&&!u,h=t.isAndroid()&&3===t.version.major,c=t.isAndroid()&&4===t.version.major,f=u||h||c&&!0===/mobile/i.test(i),e=t.isiOS()||t.isAndroid(),l=e&&!f,a=o.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:r.constant(u),isiPhone:r.constant(s),isTablet:r.constant(f),isPhone:r.constant(l),isTouch:r.constant(e),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:r.constant(a)})}},oy=ns(function(){var n=navigator.userAgent;return ey(n)}),ds=is,sy=ts,gs=function(n){return n.nodeType!==ds&&n.nodeType!==sy||0===n.childElementCount},nh={all:function(n,t){var i=t===undefined?document:t.dom();return gs(i)?[]:f.map(i.querySelectorAll(n),st.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==ds)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(n,t){var i=t===undefined?document:t.dom();return gs(i)?e.none():e.from(i.querySelector(n)).map(st.fromDom)}},hy=(oy().browser.isIE(),ny.immutable("element","offset"),function(n,t){return nh.all(t,n)}),cy=n.trim,th=function(n){return function(t){return t&&1===t.nodeType&&(t.contentEditable===n||t.getAttribute("data-mce-contenteditable")===n)?!0:!1}},ly=th("true"),ay=th("false"),ih=function(n,t,i,r,u){return{type:n,title:t,url:i,level:r,attach:u}},rh=function(n){return n.innerText||n.textContent},vy=function(n){return(t=n)&&"A"===t.nodeName&&(t.id||t.name)&&fh(n);var t},uh=function(n){return n&&/^(H[1-6])$/.test(n.nodeName)},fh=function(n){return function(n){for(;n=n.parentNode;){var t=n.contentEditable;if(t&&"inherit"!==t)return ly(n)}return!1}(n)&&!ay(n)},yy=function(n){return uh(n)&&fh(n)},py=function(n){var t,i,r=(t=n).id?t.id:yv("h");return ih("header",rh(n),"#"+r,uh(i=n)?parseInt(i.nodeName.substr(1),10):0,function(){n.id=r})},wy=function(n){var t=n.id||n.name,i=rh(n);return ih("anchor",i||"#"+t,"#"+t,0,r.noop)},by=function(n){var t,i;return t="h1,h2,h3,h4,h5,h6,a:not([href])",i=n,f.map(hy(st.fromDom(i),t),function(n){return n.dom()})},ky=function(n){return 0<cy(n.title).length},dy=function(n){var t,i,r=by(n);return f.filter((i=r,f.map(f.filter(i,yy),py)).concat((t=r,f.map(f.filter(t,vy),wy))),ky)},ct={},gy=function(n){return{title:n.title,value:{title:{raw:n.title},url:n.url,attach:n.attach}}},eh=function(n,t){return{title:n,value:{title:n,url:t,attach:r.noop}}},oh=function(n,t,i){var r=t in n?n[t]:i;return!1===r?null:r},np=function(t,i,u,e){var c,o,s,h,v={title:"-"},l=function(t){var e=t.hasOwnProperty(u)?t[u]:[],o=f.filter(e,function(n){return t=n,r=i,!f.exists(r,function(n){return n.url===t});var t,r});return n.map(o,function(n){return{title:n,value:{title:n,url:n,attach:r.noop}}})},a=function(t){var r,u=f.filter(i,function(n){return n.type===t});return r=u,n.map(r,gy)};return!1===e.typeahead_urls?[]:"file"===u?(c=[ki(t,l(ct)),ki(t,a("header")),ki(t,(o=a("anchor"),s=oh(e,"anchor_top","#top"),h=oh(e,"anchor_bottom","#bottom"),null!==s&&o.unshift(eh("<top>",s)),null!==h&&o.push(eh("<bottom>",h)),o))],f.foldl(c,function(n,t){return 0===n.length||0===t.length?n.concat(t):n.concat(v,t)},[])):ki(t,l(ct))},ki=function(t,i){var u=t.toLowerCase(),r=n.grep(i,function(n){return-1!==n.title.toLowerCase().indexOf(u)});return 1===r.length&&r[0].title===t?[]:r},tp=function(n,t,i,r){var u=function(u){var f=dy(i),e=np(u,f,r,t);n.showAutoComplete(e,u)};n.on("autocomplete",function(){u(n.value())});n.on("selectitem",function(t){var i=t.value,u,f;n.value(i.url);f=(u=i.title).raw?u.raw:u;"image"===r?n.fire("change",{meta:{alt:f,attach:i.attach}}):n.fire("change",{meta:{text:f,attach:i.attach}});n.focus()});n.on("click",function(t){0===n.value().length&&"INPUT"===t.target.nodeName&&u("")});n.on("PostRender",function(){n.getRoot().on("submit",function(t){var i,e,u;t.isDefaultPrevented()||(i=n.value(),u=ct[e=r],/^https?/.test(i)&&(u?f.indexOf(u,i).isNone()&&(ct[e]=u.slice(0,5).concat(i)):ct[e]=[i]))})})},ip=function(n,t,i){var r=t.filepicker_validator_handler;r&&n.state.on("change:value",function(t){var u;0!==(u=t.value).length?r({url:u,type:i},function(t){var u,i,r,f=(i=(u=t).status,r=u.message,"valid"===i?{status:"ok",message:r}:"unknown"===i?{status:"warn",message:r}:"invalid"===i?{status:"warn",message:r}:{status:"none",message:""});n.statusMessage(f.message);n.statusLevel(f.status)}):n.statusLevel("none")})},rp=ou.extend({Statics:{clearHistory:function(){ct={}}},init:function(t){var e,o,i,r=this,s=window.tinymce?window.tinymce.activeEditor:rr.activeEditor,f=s.settings,u=t.filetype;t.spellcheck=!1;(i=f.file_picker_types||f.file_browser_callback_types)&&(i=n.makeMap(i,/[, ]/));i&&!i[u]||(!(o=f.file_picker_callback)||i&&!i[u]?!(o=f.file_browser_callback)||i&&!i[u]||(e=function(){o(r.getEl("inp").id,r.value(),u,window)}):e=function(){var t=r.fire("beforecall").meta;t=n.extend({filetype:u},t);o.call(s,function(n,t){r.value(n).fire("change",{meta:t})},r.value(),t)});e&&(t.icon="browse",t.onaction=e);r._super(t);r.classes.add("filepicker");tp(r,f,s.getBody(),u);ip(r,f,u)}}),up=vi.extend({recalc:function(n){var i=n.layoutRect(),t=n.paddingBox;n.items().filter(":visible").each(function(n){n.layoutRect({x:t.left,y:t.top,w:i.innerW-t.right-t.left,h:i.innerH-t.top-t.bottom});n.recalc&&n.recalc()})}}),fp=vi.extend({recalc:function(n){var f,l,o,r,u,a,ut,ft,et,w,e,b,h,i,lt,v,dt,ot,t,y,g,at,c,vt,nt,s,p,st,yt,k,tt,it,rt,d,ht,pt,wt,bt=[],kt=Math.max,gt=Math.min,ct;for(o=n.items().filter(":visible"),r=n.layoutRect(),u=n.paddingBox,a=n.settings,b=n.isRtl()?a.direction||"row-reversed":a.direction,ut=a.align,ft=n.isRtl()?a.pack||"end":a.pack,et=a.spacing||0,"row-reversed"!==b&&"column-reverse"!==b||(o=o.set(o.toArray().reverse()),b=b.split("-")[0]),"column"===b?(vt="y",at="h",c="minH",nt="maxH",p="innerH",s="top",st="deltaH",yt="contentH",d="left",it="w",k="x",tt="innerW",rt="minW",ht="right",pt="deltaW",wt="contentW"):(vt="x",at="w",c="minW",nt="maxW",p="innerW",s="left",st="deltaW",yt="contentW",d="top",it="h",k="y",tt="innerH",rt="minH",ht="bottom",pt="deltaH",wt="contentH"),e=r[p]-u[s]-u[s],g=w=0,f=0,l=o.length;f<l;f++)i=(h=o[f]).layoutRect(),e-=f<l-1?et:0,0<(lt=h.settings.flex)&&(w+=lt,i[nt]&&bt.push(h),i.flex=lt),e-=i[c],g<(v=u[d]+i[rt]+u[ht])&&(g=v);if((t={})[c]=e<0?r[c]-e+r[st]:r[p]-e+r[st],t[rt]=g+r[pt],t[yt]=r[p]-e,t[wt]=g,t.minW=gt(t.minW,r.maxW),t.minH=gt(t.minH,r.maxH),t.minW=kt(t.minW,r.startMinWidth),t.minH=kt(t.minH,r.startMinHeight),r.autoResize&&(t.minW!==r.minW||t.minH!==r.minH))(t.w=t.minW,t.h=t.minH,n.layoutRect(t),this.recalc(n),null===n._lastRect)&&(ct=n.parent(),ct&&(ct._lastRect=null,ct.recalc()));else{for(ot=e/w,f=0,l=bt.length;f<l;f++)(dt=(i=(h=bt[f]).layoutRect())[nt])<(v=i[c]+i.flex*ot)?(e-=i[nt]-i[c],w-=i.flex,i.flex=0,i.maxFlexSize=dt):i.maxFlexSize=0;for(ot=e/w,y=u[s],t={},0===w&&("end"===ft?y=e+u[s]:"center"===ft?(y=Math.round(r[p]/2-(r[p]-e)/2)+u[s])<0&&(y=u[s]):"justify"===ft&&(y=u[s],et=Math.floor(e/(o.length-1)))),t[k]=u[d],f=0,l=o.length;f<l;f++)v=(i=(h=o[f]).layoutRect()).maxFlexSize||i[c],"center"===ut?t[k]=Math.round(r[tt]/2-i[it]/2):"stretch"===ut?(t[it]=kt(i[rt]||0,r[tt]-u[d]-u[ht]),t[k]=u[d]):"end"===ut&&(t[k]=r[tt]-i[it]-u.top),0<i.flex&&(v+=i.flex*ot),t[at]=v,t[vt]=y,h.layoutRect(t),h.recalc&&h.recalc(),y+=v+et}}}),sh=eu.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(n){n.items().filter(":visible").each(function(n){n.recalc&&n.recalc()})},isNative:function(){return!0}}),ep=function(n,t){return nh.one(t,n)},k=function(n,t){return function(){n.execCommand("mceToggleFormat",!1,t)}},hh=function(n,t,i){var r=function(n){i(n,t)};n.formatter?n.formatter.formatChanged(t,r):n.on("init",function(){n.formatter.formatChanged(t,r)})},au=function(n,t){return function(i){hh(n,t,function(n){i.control.active(n)})}},op=function(t){var i=["alignleft","aligncenter","alignright","alignjustify"],r="alignleft",u=[{text:"Left",icon:"alignleft",onclick:k(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:k(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:k(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:k(t,"alignjustify")}];t.addMenuItem("align",{text:"Align",menu:u});t.addButton("align",{type:"menubutton",icon:r,menu:u,onShowMenu:function(r){var u=r.control.menu;n.each(i,function(n,i){u.items().eq(i).each(function(i){return i.active(t.formatter.match(n))})})},onPostRender:function(u){var f=u.control;n.each(i,function(n){hh(t,n,function(t){f.icon(r);t&&f.icon(n)})})}});n.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(n,i){t.addButton(i,{active:!1,tooltip:n[0],cmd:n[1],onPostRender:au(t,i)})})},vu=function(n){return n?n.split(",")[0]:""},sp=function(t,i){return function(){var r=this;t.on("init nodeChange",function(){var f,s,u,e,o=t.queryCommandValue("FontName"),h=(f=i,e=(s=o)?s.toLowerCase():"",n.each(f,function(n){n.value.toLowerCase()===e&&(u=n.value)}),n.each(f,function(n){u||vu(n.value).toLowerCase()!==vu(e).toLowerCase()||(u=n.value)}),u);r.value(h||null);!h&&o&&r.text(vu(o))})}},hp=function(t){t.addButton("fontselect",function(){var i,r=(i=function(n){for(var t=(n=n.replace(/;$/,"").split(";")).length;t--;)n[t]=n[t].split("=");return n}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),n.map(i,function(n){return{text:{raw:n[0]},value:n[1],textStyle:-1===n[1].indexOf("dings")?"font-family:"+n[1]:""}}));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:sp(t,r),onselect:function(n){n.control.settings.value&&t.execCommand("FontName",!1,n.control.settings.value)}}})},cp=function(n){hp(n)},lp=function(n,t){return/[0-9.]+px$/.test(n)?(r=72*parseInt(n,10)/96,u=t||0,i=Math.pow(10,u),Math.round(r*i)/i+"pt"):n;var r,u,i},ap=function(t,i,r){var u;return n.each(t,function(n){n.value===r?u=r:n.value===i&&(u=i)}),u},vp=function(t){t.addButton("fontsizeselect",function(){var r,i,u,f=(r=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt",n.map(r.split(" "),function(n){var i=n,r=n,t=n.split("=");return 1<t.length&&(i=t[0],r=t[1]),{text:i,value:r}}));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:f,fixedWidth:!0,onPostRender:(i=t,u=f,function(){var n=this;i.on("init nodeChange",function(){var f,e,t,r;if(f=i.queryCommandValue("FontSize"))for(t=3;!r&&0<=t;t--)e=lp(f,t),r=ap(u,e,f);n.value(r||null);r||n.text(e)})}),onclick:function(n){n.control.settings.value&&t.execCommand("FontSize",!1,n.control.settings.value)}}})},yp=function(n){vp(n)},ch=function(t,i){var r=i.length;return n.each(i,function(n){n.menu&&(n.hidden=0===ch(t,n.menu));var i=n.format;i&&(n.hidden=!t.formatter.canApply(i));n.hidden&&r--}),r},lh=function(n,t){var i=t.items().length;return t.items().each(function(t){t.menu&&t.visible(0<lh(n,t.menu));!t.menu&&t.settings.menu&&t.visible(0<ch(n,t.settings.menu));var r=t.settings.format;r&&t.visible(n.formatter.canApply(r));t.visible()||i--}),i},pp=function(t){var i,o,f,u,r,s,e,h,c=(o=0,f=[],u=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],r=function(t){var i=[];if(t)return n.each(t,function(n){var t={text:n.title,icon:n.icon},u;n.items?t.menu=r(n.items):(u=n.format||"custom"+o++,n.format||(n.name=u,f.push(n)),t.format=u,t.cmd=n.cmd);i.push(t)}),i},(i=t).on("init",function(){n.each(f,function(n){i.formatter.register(n.name,n)})}),{type:"menu",items:i.settings.style_formats_merge?i.settings.style_formats?r(u.concat(i.settings.style_formats)):r(u):r(i.settings.style_formats||u),onPostRender:function(n){i.fire("renderFormatsMenu",{control:n.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return i.formatter.getCssText(this.settings.format)},onPostRender:function(){var n=this;n.parent().on("show",function(){var t,r;(t=n.settings.format)&&(n.disabled(!i.formatter.canApply(t)),n.active(i.formatter.match(t)));(r=n.settings.cmd)&&n.active(i.queryCommandState(r))})},onclick:function(){this.settings.format&&k(i,this.settings.format)();this.settings.cmd&&i.execCommand(this.settings.cmd)}}});s=c;t.addMenuItem("formats",{text:"Formats",menu:s});h=c;(e=t).addButton("styleselect",{type:"menubutton",text:"Formats",menu:h,onShowMenu:function(){e.settings.style_formats_autohide&&lh(e,this.menu)}})},wp=function(t,i){return function(){var r,f,e,u=[];return n.each(i,function(n){u.push({text:n[0],value:n[1],textStyle:function(){return t.formatter.getCssText(n[1])}})}),{type:"listbox",text:i[0][0],values:u,fixedWidth:!0,onselect:function(n){if(n.control){var i=n.control.value();k(t,i)()}},onPostRender:(r=t,f=u,function(){var t=this;r.on("nodeChange",function(i){var o=r.formatter,u=null;n.each(i.parents,function(t){if(n.each(f,function(n){if(e?o.matchNode(t,e,{value:n.value})&&(u=n.value):o.matchNode(t,n.value)&&(u=n.value),u)return!1}),u)return!1});t.value(u)})})}}},bp=function(t){var i,r,u=function(n){for(var t=(n=n.replace(/;$/,"").split(";")).length;t--;)n[t]=n[t].split("=");return n}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:(i=t,r=u,n.map(r,function(n){return{text:n[0],onclick:k(i,n[1]),textStyle:function(){return i.formatter.getCssText(n[1])}}}))});t.addButton("formatselect",wp(t,u))},ah=function(t,i){var r,u;if("string"==typeof i)u=i.split(" ");else if(n.isArray(i))return f.flatten(n.map(i,function(n){return ah(t,n)}));return r=n.grep(u,function(n){return"|"===n||n in t.menuItems}),n.map(r,function(n){return"|"===n?{text:"-"}:t.menuItems[n]})},yu=function(n){return n&&"-"===n.text},kp=function(n){var t=f.filter(n,function(n,t,i){return!yu(n)||!yu(i[t-1])});return f.filter(t,function(n,t,i){return!yu(n)||0<t&&t<i.length-1})},dp=function(t){var r,u,i,f,e=t.settings.insert_button_items;return kp(e?ah(t,e):(r=t,u="insert",i=[{text:"-"}],f=n.grep(r.menuItems,function(n){return n.context===u}),n.each(f,function(n){"before"===n.separator&&i.push({text:"|"});n.prependToContext?i.unshift(n):i.push(n);"after"===n.separator&&i.push({text:"|"})}),i))},gp=function(n){var t;(t=n).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(dp(t));this.menu.renderNew()}})},nw=function(t){var i,u,r;i=t;n.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(n,t){i.addButton(t,{active:!1,tooltip:n,onPostRender:au(i,t),onclick:k(i,t)})});u=t;n.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(n,t){u.addButton(t,{tooltip:n[0],cmd:n[1]})});r=t;n.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(n,t){r.addButton(t,{active:!1,tooltip:n[0],cmd:n[1],onPostRender:au(r,t)})})},tw=function(t){var i;nw(t);i=t;n.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(n,t){i.addMenuItem(t,{text:n[0],icon:t,shortcut:n[2],cmd:n[1]})});i.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:k(i,"code")})},di=function(n,t){return function(){var i=this,r=function(){var i="redo"===t?"hasRedo":"hasUndo";return!!n.undoManager&&n.undoManager[i]()};i.disabled(!r());n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){i.disabled(n.readonly||!r())})}},iw=function(n){var t,i;(t=n).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:di(t,"undo"),cmd:"undo"});t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:di(t,"redo"),cmd:"redo"});(i=n).addButton("undo",{tooltip:"Undo",onPostRender:di(i,"undo"),cmd:"undo"});i.addButton("redo",{tooltip:"Redo",onPostRender:di(i,"redo"),cmd:"redo"})},rw=function(n){var i,t;(i=n).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(t=i,function(){var n=this;t.on("VisualAid",function(t){n.active(t.hasVisual)});n.active(t.hasVisual)}),cmd:"mceToggleVisualAid"})},vh={setup:function(n){var t;n.rtl&&(h.rtl=!0);n.on("mousedown",function(){p.hideAll()});(t=n).settings.ui_container&&(w.container=ep(st.fromDom(document.body),t.settings.ui_container).fold(r.constant(null),function(n){return n.dom()}));o.tooltips=!w.iOS;h.translate=function(n){return rr.translate(n)};bp(n);op(n);tw(n);iw(n);yp(n);cp(n);pp(n);rw(n);gp(n)}},uw=vi.extend({recalc:function(n){var e,y,o,b,u,k,d,i,f,h,t,r,g,nt,st,s,p,tt,it,c,l,rt,ut,ht,ct,lt,ft,vt,a=[],v=[],yt,et,w,at,ot;for(e=n.settings,b=n.items().filter(":visible"),u=n.layoutRect(),o=e.columns||Math.ceil(Math.sqrt(b.length)),y=Math.ceil(b.length/o),tt=e.spacingH||e.spacing||0,it=e.spacingV||e.spacing||0,c=e.alignH||e.align,l=e.alignV||e.align,s=n.paddingBox,vt=("reverseRows"in e)?e.reverseRows:n.isRtl(),c&&"string"==typeof c&&(c=[c]),l&&"string"==typeof l&&(l=[l]),t=0;t<o;t++)a.push(0);for(r=0;r<y;r++)v.push(0);for(r=0;r<y;r++)for(t=0;t<o&&(h=b[r*o+t]);t++)ht=(f=h.layoutRect()).minW,ct=f.minH,a[t]=ht>a[t]?ht:a[t],v[r]=ct>v[r]?ct:v[r];for(lt=u.innerW-s.left-s.right,t=rt=0;t<o;t++)rt+=a[t]+(0<t?tt:0),lt-=(0<t?tt:0)+a[t];for(ft=u.innerH-s.top-s.bottom,r=ut=0;r<y;r++)ut+=v[r]+(0<r?it:0),ft-=(0<r?it:0)+v[r];if(rt+=s.left+s.right,ut+=s.top+s.bottom,(i={}).minW=rt+(u.w-u.innerW),i.minH=ut+(u.h-u.innerH),i.contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH,i.minW=Math.min(i.minW,u.maxW),i.minH=Math.min(i.minH,u.maxH),i.minW=Math.max(i.minW,u.startMinWidth),i.minH=Math.max(i.minH,u.startMinHeight),u.autoResize&&(i.minW!==u.minW||i.minH!==u.minH))(i.w=i.minW,i.h=i.minH,n.layoutRect(i),this.recalc(n),null===n._lastRect)&&(ot=n.parent(),ot&&(ot._lastRect=null,ot.recalc()));else{if(u.autoResize&&((i=n.layoutRect(i)).contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH),yt="start"===e.packV?0:0<ft?Math.floor(ft/y):0,et=0,w=e.flexWidths,w)for(t=0;t<w.length;t++)et+=w[t];else et=o;for(at=lt/et,t=0;t<o;t++)a[t]+=w?w[t]*at:at;for(nt=s.top,r=0;r<y;r++){for(g=s.left,d=v[r]+yt,t=0;t<o&&(h=b[vt?r*o+o-1-t:r*o+t]);t++)st=h.settings,f=h.layoutRect(),k=Math.max(a[t],f.startMinWidth),f.x=g,f.y=nt,"center"===(p=st.alignH||(c?c[t]||c[0]:null))?f.x=g+k/2-f.w/2:"right"===p?f.x=g+k-f.w:"stretch"===p&&(f.w=k),"center"===(p=st.alignV||(l?l[t]||l[0]:null))?f.y=nt+d/2-f.h/2:"bottom"===p?f.y=nt+d-f.h:"stretch"===p&&(f.h=d),h.layoutRect(f),g+=k+tt,h.recalc&&h.recalc();nt+=d+it}}}}),fw=o.extend({renderHtml:function(){var n=this;return n.classes.add("iframe"),n.canFocus=!1,'<iframe id="'+n._id+'" class="'+n.classes+'" tabindex="-1" src="'+(n.settings.url||"javascript:''")+'" frameborder="0"><\/iframe>'},src:function(n){this.getEl().src=n},html:function(n,t){var r=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=n,t&&t()):y.setTimeout(function(){r.html(n)}),this}}),ew=o.extend({init:function(n){this._super(n);this.classes.add("widget").add("infobox");this.canFocus=!1},severity:function(n){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(n)},help:function(n){this.state.set("help",n)},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes+'"><div id="'+n._id+'-body">'+n.encode(n.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"><\/i><\/button><\/div><\/div>'},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl("body").firstChild.data=n.encode(t.value);n.state.get("rendered")&&n.updateLayoutRect()}),n.state.on("change:help",function(t){n.classes.toggle("has-help",t.value);n.state.get("rendered")&&n.updateLayoutRect()}),n._super()}}),ow=o.extend({init:function(n){var t=this;t._super(n);t.classes.add("widget").add("label");t.canFocus=!1;n.multiline&&t.classes.add("autoscroll");n.strong&&t.classes.add("strong")},initLayoutRect:function(){var t=this,n=t._super();return t.settings.multiline&&(i.getSize(t.getEl()).width>n.maxW&&(n.minW=n.maxW,t.classes.add("multiline")),t.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,i.getSize(t.getEl()).height)),n},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(n){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(n)},renderHtml:function(){var i,r,n=this,t=n.settings.forId,u=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!t&&(r=n.settings.forName)&&(i=n.getRoot().find("#"+r)[0])&&(t=i._id),t?'<label id="'+n._id+'" class="'+n.classes+'"'+(t?' for="'+t+'"':"")+">"+u+"<\/label>":'<span id="'+n._id+'" class="'+n.classes+'">'+u+"<\/span>"},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.innerHtml(n.encode(t.value));n.state.get("rendered")&&n.updateLayoutRect()}),n._super()}}),yh=ot.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(n){this._super(n);this.classes.add("toolbar")},postRender:function(){return this.items().each(function(n){n.classes.add("toolbar-item")}),this._super()}}),ph=yh.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),gi=yi.extend({init:function(n){var t=this;t._renderOpen=!0;t._super(n);n=t.settings;t.classes.add("menubtn");n.fixedWidth&&t.classes.add("fixed-width");t.aria("haspopup",!0);t.state.set("menu",n.menu||t.render())},showMenu:function(n){var i,t=this;if(t.menu&&t.menu.visible()&&!1!==n)return t.hideMenu();t.menu||(i=t.state.get("menu")||[],t.classes.add("opened"),i.length?i={type:"menu",animate:!0,items:i}:(i.type=i.type||"menu",i.animate=!0),t.menu=i.renderTo?i.parent(t).show().renderTo():l.create(i).parent(t).renderTo(),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(n){n.control.parent()===t.menu&&(n.stopPropagation(),t.focus(),t.hideMenu())}),t.menu.on("select",function(){t.focus()}),t.menu.on("show hide",function(n){n.control===t.menu&&(t.activeMenu("show"===n.type),t.classes.toggle("opened","show"===n.type));t.aria("expanded","show"===n.type)}).fire("show"));t.menu.show();t.menu.layoutRect({w:t.layoutRect().w});t.menu.repaint();t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);t.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),this.menu.hide())},activeMenu:function(n){this.classes.toggle("active",n)},renderHtml:function(){var t,n=this,u=n._id,r=n.classPrefix,i=n.settings.icon,f=n.state.get("text"),e="";return(t=n.settings.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",f&&(n.classes.add("btn-has-text"),e='<span class="'+r+'txt">'+n.encode(f)+"<\/span>"),i=n.settings.icon?r+"ico "+r+"i-"+i:"",n.aria("role",n.parent()instanceof ph?"menuitem":"button"),'<div id="'+u+'" class="'+n.classes+'" tabindex="-1" aria-labelledby="'+u+'"><button id="'+u+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"><\/i>":"")+e+' <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this;return n.on("click",function(t){t.control===n&&function(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1}(t.target,n.getEl())&&(n.focus(),n.showMenu(!t.aria),t.aria&&n.menu.items().filter(":visible")[0].focus())}),n.on("mouseenter",function(t){var u,i=t.control,r=n.parent();i&&r&&i instanceof gi&&i.parent()===r&&(r.items().filter("MenuButton").each(function(n){n.hideMenu&&n!==i&&(n.menu&&n.menu.visible()&&(u=!0),n.hideMenu())}),u&&(i.focus(),i.showMenu()))}),n._super()},bindStates:function(){var n=this;return n.state.on("change:menu",function(){n.menu&&n.menu.remove();n.menu=null}),n._super()},remove:function(){this._super();this.menu&&this.menu.remove()}});var bh=p.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var i=t.items,r=i.length;r--;)i[r]=n.extend({},t.itemDefaults,i[r]);this._super(t);this.classes.add("menu");t.animate&&11!==w.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll();this.fire("select")},load:function(){function i(){n.throbber&&(n.throbber.hide(),n.throbber=null)}var t,n=this;n.settings.itemsFactory&&(n.throbber||(n.throbber=new wh(n.getEl("body"),!0),0===n.items().length?(n.throbber.show(),n.fire("loading")):n.throbber.show(100,function(){n.items().remove();n.fire("loading")}),n.on("hide close",i)),n.requestTime=t=(new Date).getTime(),n.settings.itemsFactory(function(r){0!==r.length?n.requestTime===t&&(n.getEl().style.width="",n.getEl("body").style.width="",i(),n.items().remove(),n.getEl("body").innerHTML="",n.add(r),n.renderNew(),n.fire("loaded")):n.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var n=this;return n.items().each(function(t){var i=t.settings;if(i.icon||i.image||i.selectable)return!(n._hasIcons=!0)}),n.settings.itemsFactory&&n.on("postrender",function(){n.settings.itemsFactory&&n.load()}),n.on("show hide",function(t){t.control===n&&("show"===t.type?y.setTimeout(function(){n.classes.add("in")},0):n.classes.remove("in"))}),n._super()}}),sw=gi.extend({init:function(n){var i,f,r,u,t=this;t._super(n);n=t.settings;t._values=i=n.values;i&&("undefined"!=typeof n.value&&function e(i){for(var u=0;u<i.length;u++){if(f=i[u].selected||n.value===i[u].value)return r=r||i[u].text,t.state.set("value",i[u].value),!0;if(i[u].menu&&e(i[u].menu))return!0}}(i),!f&&0<i.length&&(r=i[0].text,t.state.set("value",i[0].value)),t.state.set("menu",i));t.state.set("text",n.text||r);t.classes.add("listbox");t.on("select",function(i){var r=i.control;u&&(i.lastControl=u);n.multiple?r.active(!r.active()):t.value(i.control.value());u=r})},value:function(t){return 0===arguments.length?this.state.get("value"):(void 0===t||(this.settings.values?0<n.grep(this.settings.values,function(n){return n.value===t}).length?this.state.set("value",t):null===t&&this.state.set("value",null):this.state.set("value",t)),this)},bindStates:function(){var n=this;return n.on("show",function(t){var i,r;i=t.control;r=n.value();i instanceof bh&&i.items().each(function(n){n.hasMenus()||n.active(n.value()===r)})}),n.state.on("change:value",function(t){var i=function r(n,t){var u,i;if(n)for(i=0;i<n.length;i++){if(n[i].value===t)return n[i];if(n[i].menu&&(u=r(n[i].menu,t)))return u}}(n.state.get("menu"),t.value);i?n.text(i.text):n.text(n.settings.text)}),n._super()}}),hw=o.extend({Defaults:{border:0,role:"menuitem"},init:function(n){var i,t=this;t._super(n);n=t.settings;t.classes.add("menu-item");n.menu&&t.classes.add("menu-item-expand");n.preview&&t.classes.add("menu-item-preview");"-"!==(i=t.state.get("text"))&&"|"!==i||(t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-"));n.selectable&&(t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),n.icon="selected");n.preview||n.selectable||t.classes.add("menu-item-normal");t.on("mousedown",function(n){n.preventDefault()});n.menu&&!n.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var n,t=this,u=t.settings,r=t.parent(),i;(r.items().each(function(n){n!==t&&n.hideMenu()}),u.menu)&&((n=t.menu)?n.show():((n=u.menu).length?n={type:"menu",items:n}:n.type=n.type||"menu",r.settings.itemDefaults&&(n.itemDefaults=r.settings.itemDefaults),(n=t.menu=l.create(n).parent(t).renderTo()).reflow(),n.on("cancel",function(i){i.stopPropagation();t.focus();n.hide()}),n.on("show hide",function(n){n.control.items&&n.control.items().each(function(n){n.active(n.settings.selected)})}).fire("show"),n.on("hide",function(i){i.control===n&&t.classes.remove("selected")}),n.submenu=!0),n._parentMenu=r,n.classes.add("menu-sub"),i=n.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),n.moveRel(t.getEl(),i),i="menu-sub-"+(n.rel=i),n.classes.remove(n._lastRel).add(i),n._lastRel=i,t.classes.add("selected"),t.aria("expanded",!0))},hideMenu:function(){var n=this;return n.menu&&(n.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),n.menu.hide(),n.aria("expanded",!1)),n},renderHtml:function(){function s(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(n){var i=t.match||"";return i?n.replace(new RegExp(s(i),"gi"),function(n){return"!mce~match["+n+"]mce~match!"}):n}function a(n){return n.replace(new RegExp(s("!mce~match["),"g"),"<b>").replace(new RegExp(s("]mce~match!"),"g"),"<\/b>")}var h,n=this,e=n._id,t=n.settings,i=n.classPrefix,r=n.state.get("text"),o=n.settings.icon,c="",u=t.shortcut,f=n.encode(t.url);return o&&n.parent().classes.add("menu-has-icons"),t.image&&(c=" style=\"background-image: url('"+t.image+"')\""),u&&(u=function(n){var t,i,r={};for(r=w.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},n=n.split("+"),t=0;t<n.length;t++)(i=r[n[t].toLowerCase()])&&(n[t]=i);return n.join("+")}(u)),o=i+"ico "+i+"i-"+(n.settings.icon||"none"),h="-"!==r?'<i class="'+o+'"'+c+"><\/i> ":"",r=a(n.encode(l(r))),f=a(n.encode(l(f))),'<div id="'+e+'" class="'+n.classes+'" tabindex="-1">'+h+("-"!==r?'<span id="'+e+'-text" class="'+i+'text">'+r+"<\/span>":"")+(u?'<div id="'+e+'-shortcut" class="'+i+'menu-shortcut">'+u+"<\/div>":"")+(t.menu?'<div class="'+i+'caret"><\/div>':"")+(f?'<div class="'+i+'menu-item-link">'+f+"<\/div>":"")+"<\/div>"},postRender:function(){var n=this,r=n.settings,t=r.textStyle,i;return("function"==typeof t&&(t=t.call(this)),t)&&(i=n.getEl("text"),i&&(i.setAttribute("style",t),n._textStyle=t)),n.on("mouseenter click",function(t){t.control===n&&(r.menu||"click"!==t.type?(n.showMenu(),t.aria&&n.menu.focus(!0)):(n.fire("select"),y.requestAnimationFrame(function(){n.parent().hideAll()})))}),n._super(),n},hover:function(){return this.parent().items().each(function(n){n.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(n){return function(n,t){var r=n._textStyle,i;r&&(i=n.getEl("text"),i.setAttribute("style",r),t&&(i.style.color="",i.style.backgroundColor=""))}(this,n),void 0!==n&&this.aria("checked",n),this._super(n)},remove:function(){this._super();this.menu&&this.menu.remove()}}),cw=vo.extend({Defaults:{classes:"radio",role:"radio"}}),lw=o.extend({renderHtml:function(){var n=this,t=n.classPrefix;return n.classes.add("resizehandle"),"both"===n.settings.direction&&n.classes.add("resizehandle-both"),n.canFocus=!1,'<div id="'+n._id+'" class="'+n.classes+'"><i class="'+t+"ico "+t+'i-resize"><\/i><\/div>'},postRender:function(){var n=this;n._super();n.resizeDragHelper=new it(this._id,{start:function(){n.fire("ResizeStart")},drag:function(t){"both"!==n.settings.direction&&(t.deltaX=0);n.fire("Resize",t)},stop:function(){n.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});dh=o.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(n){var t=this;t._super(n);t.settings.size&&(t.size=t.settings.size);t.settings.options&&(t._options=t.settings.options);t.on("keydown",function(n){var i;13===n.keyCode&&(n.preventDefault(),t.parents().reverse().each(function(n){if(n.toJSON)return i=n,!1}),t.fire("submit",{data:i.toJSON()}))})},options:function(n){return arguments.length?(this.state.set("options",n),this):this.state.get("options")},renderHtml:function(){var t,n=this,i="";return t=kh(n._options),n.size&&(i=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+i+">"+t+"<\/select>"},bindStates:function(){var n=this;return n.state.on("change:options",function(t){n.getEl().innerHTML=kh(t.value)}),n._super()}});var aw=o.extend({init:function(n){var t=this;n.previewFilter||(n.previewFilter=function(n){return Math.round(100*n)/100});t._super(n);t.classes.add("slider");"v"===n.orientation&&t.classes.add("vertical");t._minValue=vt.isNumber(n.minValue)?n.minValue:0;t._maxValue=vt.isNumber(n.maxValue)?n.maxValue:100;t._initValue=t.state.get("value")},renderHtml:function(){var n=this._id,t=this.classPrefix;return'<div id="'+n+'" class="'+this.classes+'"><div id="'+n+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"><\/div><\/div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,o,r,u,s,h,c,v,f,y,p,l,a,t,n=this;e=n._minValue;o=n._maxValue;"v"===n.settings.orientation?(r="screenY",u="top",s="height",h="h"):(r="screenX",u="left",s="width",h="w");n._super(),function(t,i){function r(r){var u,f,e,o;u=gh(u=(((u=n.value())+(o=f=t))/((e=i)-o)+.05*r)*(e-f)-f,t,i);n.value(u);n.fire("dragstart",{value:u});n.fire("drag",{value:u});n.fire("dragend",{value:u})}n.on("keydown",function(n){switch(n.keyCode){case 37:case 38:r(-1);break;case 39:case 40:r(1)}})}(e,o);c=e;v=o;f=n.getEl("handle");n._dragHelper=new it(n._id,{handle:n._id+"-handle",start:function(e){y=e[r];p=parseInt(n.getEl("handle").style[u],10);l=(n.layoutRect()[h]||100)-i.getSize(f)[s];n.fire("dragstart",{value:t})},drag:function(i){var e=i[r]-y;a=gh(p+e,0,l);f.style[u]=a+"px";t=c+a/l*(v-c);n.value(t);n.tooltip().text(""+n.settings.previewFilter(t)).show().moveRel(f,"bc tc");n.fire("drag",{value:t})},stop:function(){n.tooltip().hide();n.fire("dragend",{value:t})}})},repaint:function(){this._super();nc(this,this.value())},bindStates:function(){var n=this;return n.state.on("change:value",function(t){nc(n,t.value)}),n._super()}}),vw=o.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><\/div>'}}),yw=gi.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var u,n,f=this.getEl(),r=this.layoutRect();return this._super(),u=f.firstChild,n=f.lastChild,t(u).css({width:r.w-i.getSize(n).width,height:r.h-2}),t(n).css({height:r.h-2}),this},activeMenu:function(n){t(this.getEl().lastChild).toggleClass(this.classPrefix+"active",n)},renderHtml:function(){var t,f,n=this,s=n._id,r=n.classPrefix,i=n.state.get("icon"),e=n.state.get("text"),u=n.settings,o="";return(t=u.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i=u.icon?r+"ico "+r+"i-"+i:"",e&&(n.classes.add("btn-has-text"),o='<span class="'+r+'txt">'+n.encode(e)+"<\/span>"),f="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+s+'" class="'+n.classes+'" role="button"'+f+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"><\/i>":"")+o+'<\/button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?" ":"")+n._menuBtnText:"")+' <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(t){var i=t.target;if(t.control===this)for(;i;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===i.nodeName&&-1===i.className.indexOf("open"))return t.stopImmediatePropagation(),void(n&&n.call(this,t));i=i.parentNode}}),delete this.settings.onclick,this._super()}}),pw=sh.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),ww=ci.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var i;this.activeTabId&&(i=this.getEl(this.activeTabId),t(i).removeClass(this.classPrefix+"active"),i.setAttribute("aria-selected","false"));this.activeTabId="t"+n;(i=this.getEl("t"+n)).setAttribute("aria-selected","true");t(i).addClass(this.classPrefix+"active");this.items()[n].show().fire("showtab");this.reflow();this.items().each(function(t,i){n!==i&&t.hide()})},renderHtml:function(){var n=this,t=n._layout,i="",r=n.classPrefix;return n.preRender(),t.preRender(n),n.items().each(function(t,u){var f=n._id+"-t"+u;t.aria("role","tabpanel");t.aria("labelledby",f);i+='<div id="'+f+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+n.encode(t.settings.title)+"<\/div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+r+'tabs" role="tablist">'+i+'<\/div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var n=this;n._super();n.settings.activeTab=n.settings.activeTab||0;n.activateTab(n.settings.activeTab);this.on("click",function(t){var i=t.target.parentNode,r;if(i&&i.id===n._id+"-head")for(r=i.childNodes.length;r--;)i.childNodes[r]===t.target&&n.activateTab(r)})},initLayoutRect:function(){var u,n,r,t=this,f;return n=(n=i.getSize(t.getEl("head")).width)<0?0:n,r=0,t.items().each(function(t){n=Math.max(n,t.layoutRect().minW);r=Math.max(r,t.layoutRect().minH)}),t.items().each(function(t){t.settings.x=0;t.settings.y=0;t.settings.w=n;t.settings.h=r;t.layoutRect({x:0,y:0,w:n,h:r})}),f=i.getSize(t.getEl("head")).height,t.settings.minWidth=n,t.settings.minHeight=r+f,(u=t._super()).deltaH+=f,u.innerH=u.h-u.deltaH,u}}),bw=o.extend({init:function(n){var t=this;t._super(n);t.classes.add("textbox");n.multiline?t.classes.add("multiline"):(t.on("keydown",function(n){var i;13===n.keyCode&&(n.preventDefault(),t.parents().reverse().each(function(n){if(n.toJSON)return i=n,!1}),t.fire("submit",{data:i.toJSON()}))}),t.on("keyup",function(n){t.state.set("value",n.target.value)}))},repaint:function(){var r,n,u,o,t,i=this,e=0,f;return r=i.getEl().style,n=i._layoutRect,t=i._lastRepaintRect||{},f=document,!i.settings.multiline&&f.all&&(!f.documentMode||f.documentMode<=8)&&(r.lineHeight=n.h-e+"px"),o=(u=i.borderBox).left+u.right+8,e=u.top+u.bottom+(i.settings.multiline?8:0),n.x!==t.x&&(r.left=n.x+"px",t.x=n.x),n.y!==t.y&&(r.top=n.y+"px",t.y=n.y),n.w!==t.w&&(r.width=n.w-o+"px",t.w=n.w),n.h!==t.h&&(r.height=n.h-e+"px",t.h=n.h),i._lastRepaintRect=t,i.fire("repaint",{},!1),i},renderHtml:function(){var t,f,r=this,u=r.settings;return t={id:r._id,hidefocus:"1"},n.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(n){t[n]=u[n]}),r.disabled()&&(t.disabled="disabled"),u.subtype&&(t.type=u.subtype),(f=i.create(u.multiline?"textarea":"input",t)).value=r.state.get("value"),f.className=r.classes.toString(),f.outerHTML},value:function(n){return arguments.length?(this.state.set("value",n),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var n=this;n.getEl().value=n.state.get("value");n._super();n.$el.on("change",function(t){n.state.set("value",t.target.value);n.fire("change",t)})},bindStates:function(){var n=this;return n.state.on("change:value",function(t){n.getEl().value!==t.value&&(n.getEl().value=t.value)}),n.state.on("change:disabled",function(t){n.getEl().disabled=t.value}),n._super()},remove:function(){this.$el.off();this._super()}}),pu=function(){return{Selector:wt,Collection:bt,ReflowQueue:dt,Control:h,Factory:l,KeyboardNavigation:io,Container:ot,DragHelper:it,Scrollable:uo,Panel:ci,Movable:hi,Resizable:fo,FloatPanel:p,Window:ni,MessageBox:b,Tooltip:ge,Widget:o,Progress:no,Notification:to,Layout:eu,AbsoluteLayout:vi,Button:yi,ButtonGroup:fv,Checkbox:vo,ComboBox:ou,ColorBox:ev,PanelButton:po,ColorButton:sv,ColorPicker:hv,Path:bo,ElementPath:lv,FormItem:ko,Form:go,FieldSet:av,FilePicker:rp,FitLayout:up,FlexLayout:fp,FlowLayout:sh,FormatControls:vh,GridLayout:uw,Iframe:fw,InfoBox:ew,Label:ow,Toolbar:yh,MenuBar:ph,MenuButton:gi,MenuItem:hw,Throbber:wh,Menu:bh,ListBox:sw,Radio:cw,ResizeHandle:lw,SelectBox:dh,Slider:aw,Spacer:vw,SplitButton:yw,StackLayout:pw,TabPanel:ww,TextBox:bw,DropZone:cv,BrowseButton:uv}},kw=function(t){t.ui?n.each(pu(),function(n,i){t.ui[i]=n}):t.ui=pu()};n.each(pu(),function(n,t){l.add(t,n)});kw(window.tinymce?window.tinymce:{});tc.add("inlite",function(n){var t=rv();return vh.setup(n),ka(n,t),kl(n,t)})}();!function(){"use strict";function he(n,t,r){var a,v,u,f,e,o,h,c,l,s;return l=ce(),u=(v=i.getPos(t,w.getUiContainer(n))).x,f=v.y,fi(n)&&se(document.body)&&(u-=l.x,f-=l.y),a=n.getEl(),e=(s=i.getSize(a)).width,o=s.height,h=(s=i.getSize(t)).width,c=s.height,"b"===(r=(r||"").split(""))[0]&&(f+=c),"r"===r[1]&&(u+=h),"c"===r[0]&&(f+=Math.round(c/2)),"c"===r[1]&&(u+=Math.round(h/2)),"b"===r[3]&&(f-=o),"r"===r[4]&&(u-=e),"c"===r[3]&&(f-=Math.round(o/2)),"c"===r[4]&&(u-=Math.round(e/2)),{x:u,y:f,w:e,h:o}}function vc(){}function oi(n){this.cls=[];this.cls._map={};this.onchange=n||vc;this.prefix=""}function we(n){return 0<n.nodeType}function hi(n){return n._eventDispatcher||(n._eventDispatcher=new ae({scope:n,toggleEvent:function(t,i){i&&ae.isNative(t)&&(n._nativeEvents||(n._nativeEvents={}),n._nativeEvents[t]=!0,n.state.get("rendered")&&de(n))}})),n._eventDispatcher}function de(n){function c(t){var i=n.getParentCtrl(t.target);i&&i.fire(t.type,t)}function l(){var n=i._lastHoverCtrl;n&&(n.fire("mouseleave",{target:n.getEl()}),n.parents().each(function(n){n.fire("mouseleave",{target:n.getEl()})}),i._lastHoverCtrl=null)}function a(t){var r,s,e,o=n.getParentCtrl(t.target),f=i._lastHoverCtrl,u=0;if(o!==f){if((s=(i._lastHoverCtrl=o).parents().toArray().reverse()).push(o),f){for((e=f.parents().toArray().reverse()).push(f),u=0;u<e.length&&s[u]===e[u];u++);for(r=e.length-1;u<=r;r--)(f=e[r]).fire("mouseleave",{target:f.getEl()})}for(r=u;r<s.length;r++)(o=s[r]).fire("mouseenter",{target:o.getEl()})}}function h(t){t.preventDefault();"mousewheel"===t.type?(t.deltaY=-.025*t.wheelDelta,t.wheelDeltaX&&(t.deltaX=-.025*t.wheelDeltaX)):(t.deltaX=0,t.deltaY=t.detail);t=n.fire("wheel",t)}var r,o,f,i,s,u,e;if(s=n._nativeEvents){for((f=n.parents().toArray()).unshift(n),r=0,o=f.length;!i&&r<o;r++)i=f[r]._eventsRoot;for(i||(i=f[f.length-1]||n),n._eventsRoot=i,o=r,r=0;r<o;r++)f[r]._eventsRoot=i;e=i._delegates;for(u in e||(e=i._delegates={}),s){if(!s)return!1;"wheel"!==u||kc?("mouseenter"===u||"mouseleave"===u?i._hasMouseEnter||(t(i.getEl()).on("mouseleave",l).on("mouseover",a),i._hasMouseEnter=1):e[u]||(t(i.getEl()).on(u,c),e[u]=!0),s[u]=!1):bc?t(n.getEl()).on("mousewheel",h):t(n.getEl()).on("DOMMouseScroll",h)}}}function ge(n){function c(n){return n&&1===n.nodeType}function u(n){return c(n=n||t)?n.getAttribute("role"):null}function o(n){for(var r,i=n||t;i=i.parentNode;)if(r=u(i))return r}function l(n){var i=t;if(c(i))return i.getAttribute("aria-"+n)}function a(n){var t=n.tagName.toUpperCase();return"INPUT"===t||"TEXTAREA"===t||"SELECT"===t}function f(n){var t=[];return function i(n){var r,f;if(1===n.nodeType&&"none"!==n.style.display&&!n.disabled)for((a(r=n)&&!r.hidden||gr(r)||/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(u(r)))&&t.push(n),f=0;f<n.childNodes.length;f++)i(n.childNodes[f])}(n||e.getEl()),t}function v(n){var u,r,t;for((r=(n=n||i).parents().toArray()).unshift(n),t=0;t<r.length&&!(u=r[t]).settings.ariaRoot;t++);return u}function h(n,t){return n<0?n=t.length-1:n>=t.length&&(n=0),t[n]&&t[n].focus(),n}function r(n,i){var u=-1,e=v(),r;for(i=i||f(e.getEl()),r=0;r<i.length;r++)i[r]===t&&(u=r);u+=n;e.lastAriaIndex=h(u,i)}function p(){"tablist"===o()?r(-1,f(t.parentNode)):i.parent().submenu?y():r(-1)}function w(){var i=u(),n=o();"tablist"===n?r(1,f(t.parentNode)):"menuitem"===i&&"menu"===n&&l("haspopup")?s():r(1)}function b(){r(-1)}function k(){var n=u(),t=o();"menuitem"===n&&"menubar"===t?s():"button"===n&&l("haspopup")?s({key:"down"}):r(1)}function y(){i.fire("cancel")}function s(n){n=n||{};i.fire("click",{target:t,aria:n})}var t,i,e=n.root;try{t=document.activeElement}catch(d){t=document.body}return i=e.getParentCtrl(t),e.on("keydown",function(n){function e(n,i){a(t)||gr(t)||"slider"!==u(t)&&!1!==i(n)&&n.preventDefault()}if(!n.isDefaultPrevented())switch(n.keyCode){case 37:e(n,p);break;case 39:e(n,w);break;case 38:e(n,b);break;case 40:e(n,k);break;case 27:y();break;case 14:case 13:case 32:e(n,s);break;case 9:!function(n){if("tablist"===o()){var t=f(i.getEl("body"))[0];t&&t.focus()}else r(n.shiftKey?-1:1)}(n);n.preventDefault()}}),e.on("focusin",function(n){t=n.target;i=n.control}),{focusFirst:function(n){var t=v(n),i=f(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?h(t.lastAriaIndex,i):h(0,i)}}}function tu(n){var i,t;if(n.changedTouches)for(i="screenX screenY pageX pageY clientX clientY".split(" "),t=0;t<i.length;t++)n[i[t]]=n.changedTouches[0][i[t]]}function et(n,i){var o,s,h,u,e,c,l,r=i.document||document,f;i=i||{};f=r.getElementById(i.handle||n);h=function(n){var y,h,a,p,k,d,w,g,v,b,nt,tt=(y=r,v=Math.max,h=y.documentElement,a=y.body,p=v(h.scrollWidth,a.scrollWidth),k=v(h.clientWidth,a.clientWidth),d=v(h.offsetWidth,a.offsetWidth),w=v(h.scrollHeight,a.scrollHeight),g=v(h.clientHeight,a.clientHeight),{width:p<d?k:p,height:w<v(h.offsetHeight,a.offsetHeight)?g:w});tu(n);n.preventDefault();s=n.button;b=f;c=n.screenX;l=n.screenY;nt=window.getComputedStyle?window.getComputedStyle(b,null).getPropertyValue("cursor"):b.runtimeStyle.cursor;o=t("<div><\/div>").css({position:"absolute",top:0,left:0,width:tt.width,height:tt.height,zIndex:2147483647,opacity:.0001,cursor:nt}).appendTo(r.body);t(r).on("mousemove touchmove",e).on("mouseup touchend",u);i.start(n)};e=function(n){if(tu(n),n.button!==s)return u(n);n.deltaX=n.screenX-c;n.deltaY=n.screenY-l;n.preventDefault();i.drag(n)};u=function(n){tu(n);t(r).off("mousemove touchmove",e).off("mouseup touchend",u);o.remove();i.stop&&i.stop(n)};this.destroy=function(){t(f).off()};t(f).on("mousedown touchstart",h)}function gc(n,t){for(;n;){if(n===t)return!0;n=n.parent()}}function nl(){iu||(iu=function(n){2!==n.button&&function(n){for(var t,i,r=s.length;r--;)if(t=s[r],i=t.getParentCtrl(n.target),t.settings.autohide){if(i&&(gc(i,t)||t.parent()===i))continue;(n=t.fire("autohide",{target:n.target})).isDefaultPrevented()||t.hide()}}(n)},t(document).on("click touchstart",iu))}function io(n){function r(t,i){for(var r,u=0;u<s.length;u++)if(s[u]!==n)for(r=s[u].parent();r&&(r=r.parent());)r===n&&s[u].fixed(t).moveBy(0,i).repaint()}var t=i.getViewPort().y;n.settings.autofix&&(n.state.get("fixed")?n._autoFixY>t&&(n.fixed(!1).layoutRect({y:n._autoFixY}).repaint(),r(!1,n._autoFixY-t)):(n._autoFixY=n.layoutRect().y,n._autoFixY<t&&(n.fixed(!0).layoutRect({y:0}).repaint(),r(!0,t-n._autoFixY))))}function eu(n,i){var r,e,u=v.zIndex||65535,f;if(n)a.push(i);else for(r=a.length;r--;)a[r]===i&&a.splice(r,1);if(a.length)for(r=0;r<a.length;r++)a[r].modal&&(u++,e=a[r]),a[r].getEl().style.zIndex=u,a[r].zIndex=u,u++;f=t("#"+i.classPrefix+"modal-block",i.getContainerElm())[0];e?t(f).css("z-index",e.zIndex-1):f&&(f.parentNode.removeChild(f),fu=!1);v.currentZIndex=u}function ro(n){for(var t=s.length;t--;)s[t]===n&&s.splice(t,1);for(t=a.length;t--;)a[t]===n&&a.splice(t,1)}function su(n,i){var u,f,r=this,e=h.classPrefix;r.show=function(o,s){function h(){u&&(t(n).append('<div class="'+e+"throbber"+(i?" "+e+"throbber-inline":"")+'"><\/div>'),s&&s())}return r.hide(),u=!0,o?f=p.setTimeout(h,o):h(),r};r.hide=function(){var t=n.lastChild;return p.clearTimeout(f),t&&-1!==t.className.indexOf("throbber")&&t.parentNode.removeChild(t),u=!1,r}}function rl(t){var r=function(n){return n.inline?n.getElement():n.getContentAreaContainer()};return{open:function(u,f){var s,o=n.extend(u,{maxWidth:(s=r(t),i.getSize(s).width)}),e=new oo(o);return 0<(e.args=o).timeout&&(e.timer=setTimeout(function(){e.close();f()},o.timeout)),e.on("close",function(){f()}),e.renderTo(),e},close:function(n){n.close()},reposition:function(n){var i;i=n;u.each(i,function(n){n.moveTo(0,0)}),function(n){if(0<n.length){var i=n.slice(0,1)[0],f=r(t);i.moveRel(f,"tc-tc");u.each(n,function(t,i){0<i&&t.moveRel(n[i-1].getEl(),"bc-tc")})}}(n)},getArgs:function(n){return n.args}}}function so(n){var r,i=t("meta[name=viewport]")[0];!1!==b.overrideViewPort&&(i||((i=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(i)),(r=i.getAttribute("content"))&&void 0!==li&&(li=r),i.setAttribute("content",n?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":li))}function ul(n,i){(function(){for(var n=0;n<y.length;n++)if(y[n]._fullscreen)return!0;return!1})()&&!1===i&&t([document.documentElement,document.body]).removeClass(n+"fullscreen")}function yh(n){var i="",t;if(n)for(t=0;t<n.length;t++)i+='<option value="'+n[t]+'">'+n[t]+"<\/option>";return i}function wh(n,t,i){return n<t&&(n=t),i<n&&(n=i),n}function gi(n,t,i){n.setAttribute("aria-"+t,i)}function bh(n,t){var u,f,e,o,r;"v"===n.settings.orientation?(e="top",f="height",u="h"):(e="left",f="width",u="w");r=n.getEl("handle");o=((n.layoutRect()[u]||100)-i.getSize(r)[f])*((t-n._minValue)/(n._maxValue-n._minValue))+"px";r.style[e]=o;r.style.height=n.layoutRect().h+"px";gi(r,"valuenow",t);gi(r,"valuetext",""+n.settings.previewFilter(t));gi(r,"valuemin",n._minValue);gi(r,"valuemax",n._maxValue)}var gu,nf,tf,nr,rf,kh=tinymce.util.Tools.resolve("tinymce.ThemeManager"),tr=tinymce.util.Tools.resolve("tinymce.EditorManager"),n=tinymce.util.Tools.resolve("tinymce.util.Tools"),uf=function(n){return!1!==ff(n)},ff=function(n){return n.getParam("menubar")},ef=function(n){return n.getParam("toolbar_items_size")},of=function(n){return n.getParam("menu")},ir=function(n){return!1===n.settings.skin},rr=function(n){var t=n.getParam("resize","vertical");return!1===t?"none":"both"===t?"both":"vertical"},f=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=tinymce.util.Tools.resolve("tinymce.ui.Factory"),dh=tinymce.util.Tools.resolve("tinymce.util.I18n"),gh=function(n){return n.fire("SkinLoaded")},sf=function(n){return n.fire("ResizeEditor")},hf=function(n){return n.fire("BeforeRenderUI")},ur=function(n,t){return function(){var i=n.find(t)[0];i&&i.focus(!0)}},cf=function(n,t){n.shortcuts.add("Alt+F9","",ur(t,"menubar"));n.shortcuts.add("Alt+F10,F10","",ur(t,"toolbar"));n.shortcuts.add("Alt+F11","",ur(t,"elementpath"));t.on("cancel",function(){n.focus()})},it=tinymce.util.Tools.resolve("tinymce.geom.Rect"),p=tinymce.util.Tools.resolve("tinymce.util.Delay"),fr=function(n){return function(){return n}},nc=fr(!1),tc=fr(!0),r={noop:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},noarg:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return n()}},compose:function(n,t){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n(t.apply(null,arguments))}},constant:fr,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(n){for(var r,i,u=[],t=1;t<arguments.length;t++)u[t-1]=arguments[t];for(r=new Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return function(){for(var u,i,e,f=[],t=0;t<arguments.length;t++)f[t]=arguments[t];for(u=new Array(arguments.length),i=0;i<u.length;i++)u[i]=arguments[i];return e=r.concat(u),n.apply(null,e)}},not:function(n){return function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return!n.apply(null,arguments)}},die:function(n){return function(){throw new Error(n);}},apply:function(n){return n()},call:function(n){n()},never:nc,always:tc},vt=r.never,er=r.always,rt=function(){return or},or=(nr={fold:function(n){return n()},is:vt,isSome:vt,isNone:er,getOr:tf=function(n){return n},getOrThunk:nf=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.");},or:tf,orThunk:nf,map:rt,ap:rt,each:function(){},bind:rt,flatten:rt,exists:vt,forall:er,filter:rt,equals:gu=function(n){return n.isNone()},equals_:gu,toArray:function(){return[]},toString:r.constant("none()")},Object.freeze&&Object.freeze(nr),nr),ii=function(n){var t=function(){return n},u=function(){return r},i=function(t){return t(n)},r={fold:function(t,i){return i(n)},is:function(t){return n===t},isSome:er,isNone:vt,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:function(t){return ii(t(n))},ap:function(t){return t.fold(rt,function(t){return ii(t(n))})},each:function(t){t(n)},bind:i,flatten:t,exists:i,forall:i,filter:function(t){return t(n)?r:or},equals:function(t){return t.is(n)},equals_:function(t,i){return t.fold(vt,function(t){return i(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},e={some:ii,none:rt,from:function(n){return null===n||n===undefined?or:ii(n)}},sr=function(n){return n?n.getRoot().uiContainer:null},w={getUiContainerDelta:function(n){var t=sr(n);if(t&&"static"!==f.DOM.getStyle(t,"position",!0)){var i=f.DOM.getPos(t),r=t.scrollLeft-i.x,u=t.scrollTop-i.y;return e.some({x:r,y:u})}return e.none()},setUiContainer:function(n,t){var i=f.DOM.select(n.settings.ui_container)[0];t.getRoot().uiContainer=i},getUiContainer:sr,inheritUiContainer:function(n,t){return t.uiContainer=sr(n)}},lf=function(t,i,r){var u,f=[];if(i)return n.each(i.split(/[ ,]/),function(n){var i,e=function(){var i=t.selection;n.settings.stateSelector&&i.selectorChanged(n.settings.stateSelector,function(t){n.active(t)},!0);n.settings.disabledStateSelector&&i.selectorChanged(n.settings.disabledStateSelector,function(t){n.disabled(t)})};"|"===n?u=null:(u||(u={type:"buttongroup",items:[]},f.push(u)),t.buttons[n]&&(i=n,"function"==typeof(n=t.buttons[i])&&(n=n()),n.type=n.type||"button",n.size=r,n=l.create(n),u.items.push(n),t.initialized?e():t.on("init",e)))}),{type:"toolbar",layout:"flow",items:f}},ic=lf,af=function(t,i){var f,r,u=[];if(n.each(!1===(r=(f=t).getParam("toolbar"))?[]:n.isArray(r)?n.grep(r,function(n){return 0<n.length}):function(n,t){for(var u,f,i=[],r=1;r<10;r++){if(u=n["toolbar"+r],!u)break;i.push(u)}return f=n.toolbar?[n.toolbar]:[t],0<i.length?i:f}(f.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image"),function(n){var r;(r=n)&&u.push(lf(t,r,i))}),u.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:u}},g=f.DOM,hr=function(n){return{left:n.x,top:n.y,width:n.w,height:n.h,right:n.x+n.w,bottom:n.y+n.h}},cr=function(n,t){n.moveTo(t.left,t.top)},lr=function(n,t,i,r,u,f){return f=hr({x:t,y:i,w:f.w,h:f.h}),n&&(f=n({elementRect:hr(r),contentAreaRect:hr(u),panelRect:f})),f},vf=function(t){var i,u=function(){return t.contextToolbars||[]},f=function(i,r){var h,e,u,f,o,c,nt,y=t.getParam("inline_toolbar_position_handler"),tt,rt,p,l,a,b,v,k,s,d;if(!t.removed){if(!i||!i.toolbar.panel)return tt=t,void n.each(tt.contextToolbars,function(n){n.panel&&n.panel.hide()});nt=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"];o=i.toolbar.panel;r&&o.show();rt=i.element;p=g.getPos(t.getContentAreaContainer());l=t.dom.getRect(rt);"BODY"===(a=t.dom.getRoot()).nodeName&&(l.x-=a.ownerDocument.documentElement.scrollLeft||a.scrollLeft,l.y-=a.ownerDocument.documentElement.scrollTop||a.scrollTop);l.x+=p.x;l.y+=p.y;u=l;e=g.getRect(o.getEl());f=g.getRect(t.getContentAreaContainer()||t.getBody());s=w.getUiContainerDelta(o).getOr({x:0,y:0});(u.x+=s.x,u.y+=s.y,e.x+=s.x,e.y+=s.y,f.x+=s.x,f.y+=s.y,"inline"!==g.getStyle(i.element,"display",!0))&&(d=i.element.getBoundingClientRect(),u.w=d.width,u.h=d.height);t.inline||(f.w=t.getDoc().documentElement.offsetWidth);t.selection.controlSelection.isResizable(i.element)&&u.w<25&&(u=it.inflate(u,0,8));h=it.findBestRelativePosition(e,u,f,nt);u=it.clamp(u,f);h?(c=it.relativePosition(e,u,h),cr(o,lr(y,c.x,c.y,u,f,e))):(f.h+=e.h,(u=it.intersect(f,u))?(h=it.findBestRelativePosition(e,u,f,["bc-tc","bl-tl","br-tr"]))?(c=it.relativePosition(e,u,h),cr(o,lr(y,c.x,c.y,u,f,e))):cr(o,lr(y,u.x,u.y,u,f,e)):o.hide());b=o;k=function(n,t){return n===t};v=(v=h)?v.substr(0,2):"";n.each({t:"down",b:"up"},function(n,t){b.classes.toggle("arrow-"+n,k(t,v.substr(0,1)))});n.each({l:"left",r:"right"},function(n,t){b.classes.toggle("arrow-"+n,k(t,v.substr(1,1)))})}},e=function(n){return function(){p.requestAnimationFrame(function(){t.selection&&f(r(t.selection.getNode()),n)})}},s=function(n){var r;if(n.toolbar.panel)return n.toolbar.panel.show(),void f(n);r=l.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:ic(t,n.toolbar.items),oncancel:function(){t.focus()}});w.setUiContainer(t,r),function(n){if(!i){var r=e(!0),u=w.getUiContainer(n);i=t.selection.getScrollContainer()||t.getWin();g.bind(i,"scroll",r);g.bind(u,"scroll",r);t.on("remove",function(){g.unbind(i,"scroll",r);g.unbind(u,"scroll",r)})}}(r);(n.toolbar.panel=r).renderTo().reflow();f(n)},o=function(){n.each(u(),function(n){n.panel&&n.panel.hide()})},r=function(n){for(var r,f,e=u(),i=(f=t.$(n).parents().add(n)).length-1;0<=i;i--)for(r=e.length-1;0<=r;r--)if(e[r].predicate(f[i]))return{toolbar:e[r],element:f[i]};return null};t.on("click keyup setContent ObjectResized",function(n){("setcontent"!==n.type||n.selection)&&p.setEditorTimeout(t,function(){var n;(n=r(t.selection.getNode()))?(o(),s(n)):o()})});t.on("blur hide contextmenu",o);t.on("ObjectResizeStart",function(){var n=r(t.selection.getNode());n&&n.toolbar.panel&&n.toolbar.panel.hide()});t.on("ResizeEditor ResizeWindow",e(!0));t.on("nodeChange",e(!1));t.on("remove",function(){n.each(u(),function(n){n.panel&&n.panel.remove()});t.contextToolbars={}});t.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var n=r(t.selection.getNode());n&&n.toolbar.panel&&n.toolbar.panel.items()[0].focus()})},nt=function(n){return function(t){return function(n){if(null===n)return"null";var t=typeof n;return"object"===t&&Array.prototype.isPrototypeOf(n)?"array":"object"===t&&String.prototype.isPrototypeOf(n)?"string":t}(t)===n}},yt={isString:nt("string"),isObject:nt("object"),isArray:nt("array"),isNull:nt("null"),isBoolean:nt("boolean"),isUndefined:nt("undefined"),isFunction:nt("function"),isNumber:nt("number")},yf=(rf=Array.prototype.indexOf)===undefined?function(n,t){return rc(n,t)}:function(n,t){return rf.call(n,t)},pf=function(n,t){return-1<yf(n,t)},wf=function(n,t){for(var f,r=n.length,u=new Array(r),i=0;i<r;i++)f=n[i],u[i]=t(f,i,n);return u},bf=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i],i,n)},kf=function(n,t){for(var i=n.length-1;0<=i;i--)t(n[i],i,n)},df=function(n,t){for(var r,u=[],i=0,f=n.length;i<f;i++)r=n[i],t(r,i,n)&&u.push(r);return u},gf=function(n,t){for(var i=0,r=n.length;i<r;i++)if(t(n[i],i,n))return e.some(i);return e.none()},rc=function(n,t){for(var i=0,r=n.length;i<r;++i)if(n[i]===t)return i;return-1},uc=Array.prototype.push,ne=function(n){for(var i=[],t=0,r=n.length;t<r;++t){if(!Array.prototype.isPrototypeOf(n[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+n);uc.apply(i,n[t])}return i},te=function(n,t){for(var i=0,r=n.length;i<r;++i)if(!0!==t(n[i],i,n))return!1;return!0},ar=Array.prototype.slice,fc=yt.isFunction(Array.from)?Array.from:function(n){return ar.call(n)},u={map:wf,each:bf,eachr:kf,partition:function(n,t){for(var r,u=[],f=[],i=0,e=n.length;i<e;i++)r=n[i],(t(r,i,n)?u:f).push(r);return{pass:u,fail:f}},filter:df,groupBy:function(n,t){var f,e;if(0===n.length)return[];for(var o=t(n[0]),r=[],i=[],u=0,s=n.length;u<s;u++)f=n[u],e=t(f),e!==o&&(r.push(i),i=[]),o=e,i.push(f);return 0!==i.length&&r.push(i),r},indexOf:function(n,t){var i=yf(n,t);return-1===i?e.none():e.some(i)},foldr:function(n,t,i){return kf(n,function(n){i=t(i,n)}),i},foldl:function(n,t,i){return bf(n,function(n){i=t(i,n)}),i},find:function(n,t){for(var r,i=0,u=n.length;i<u;i++)if(r=n[i],t(r,i,n))return e.some(r);return e.none()},findIndex:gf,flatten:ne,bind:function(n,t){var i=wf(n,t);return ne(i)},forall:te,exists:function(n,t){return gf(n,t).isSome()},contains:pf,equal:function(n,t){return n.length===t.length&&te(n,function(n,i){return n===t[i]})},reverse:function(n){var t=ar.call(n,0);return t.reverse(),t},chunk:function(n,t){for(var u,r=[],i=0;i<n.length;i+=t)u=n.slice(i,i+t),r.push(u);return r},difference:function(n,t){return df(n,function(n){return!pf(t,n)})},mapToObject:function(n,t){for(var r,u={},i=0,f=n.length;i<f;i++)r=n[i],u[String(r)]=t(r,i);return u},pure:function(n){return[n]},sort:function(n,t){var i=ar.call(n,0);return i.sort(t),i},range:function(n,t){for(var r=[],i=0;i<n;i++)r.push(t(i));return r},head:function(n){return 0===n.length?e.none():e.some(n[0])},last:function(n){return 0===n.length?e.none():e.some(n[n.length-1])},from:fc},ie={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}},vr=function(n,t){return"|"===n?{name:"|",item:{text:"|"}}:t?{name:n,item:t}:null},yr=function(n){return n&&"|"===n.item.text},ec=function(t,i,r,f){var s,o,e,h,c,l,a,v;return i?(o=i[f],h=!0):o=ie[f],o&&(s={text:o.title},e=[],n.each((o.items||"").split(/[ ,]/),function(n){var i=vr(n,t[n]);i&&e.push(i)}),h||n.each(t,function(n,t){var i,r;n.context!==f||(i=e,r=t,u.findIndex(i,function(n){return n.name===r}).isSome())||("before"===n.separator&&e.push({name:"|",item:{text:"|"}}),n.prependToContext?e.unshift(vr(t,n)):e.push(vr(t,n)),"after"===n.separator&&e.push({name:"|",item:{text:"|"}}))}),s.menu=u.map((c=e,l=r,a=u.filter(c,function(n){return!1===l.hasOwnProperty(n.name)}),v=u.filter(a,function(n,t,i){return!yr(n)||!yr(i[t-1])}),u.filter(v,function(n,t,i){return!yr(n)||0<t&&t<i.length-1})),function(n){return n.item}),!s.menu.length)?null:s},re=function(t){for(var s,r,u,f=[],h=function(n){var t,i=[],r=of(n);if(r)for(t in r)i.push(t);else for(t in ie)i.push(t);return i}(t),c=n.makeMap((u=t,u.getParam("removed_menuitems","")).split(/[ ,]/)),e=ff(t),o="string"==typeof e?e.split(/[ ,]/):h,i=0;i<o.length;i++)s=o[i],r=ec(t.menuItems,of(t),c,s),r&&f.push(r);return f},pr=f.DOM,ue=function(n){return{width:n.clientWidth,height:n.clientHeight}},fe=function(n,t,i){var u,r,f,e;u=n.getContainer();r=n.getContentAreaContainer().firstChild;f=ue(u);e=ue(r);null!==t&&(t=Math.max(n.getParam("min_width",100,"number"),t),t=Math.min(n.getParam("max_width",65535,"number"),t),pr.setStyle(u,"width",t+(f.width-e.width)),pr.setStyle(r,"width",t));i=Math.max(n.getParam("min_height",100,"number"),i);i=Math.min(n.getParam("max_height",65535,"number"),i);pr.setStyle(r,"height",i);sf(n)},wr=fe,oc=function(n,t,i){var r=n.getContentAreaContainer();fe(n,r.clientWidth+t,r.clientHeight+i)},b=tinymce.util.Tools.resolve("tinymce.Env"),ri=function(n,t,i){var r,u=n.settings[i];u&&u((r=t.getEl("body"),{element:function(){return r}}))},sc=function(t,i,r){return function(u){var h,c,a,v,y,e=u.control,o=e.parents().filter("panel")[0],f=o.find("#"+i)[0],s=(h=r,c=i,n.grep(h,function(n){return n.name===c})[0]);a=i;v=o;y=r;n.each(y,function(n){var t=v.items().filter("#"+n.name)[0];t&&t.visible()&&n.name!==a&&(ri(n,t,"onhide"),t.visible(!1))});e.parent().items().each(function(n){n.active(!1)});f&&f.visible()?(ri(s,f,"onhide"),f.hide(),e.active(!1)):(f?f.show():(f=l.create({type:"container",name:i,layout:"stack",classes:"sidebar-panel",html:""}),o.prepend(f),ri(s,f,"onrender")),ri(s,f,"onshow"),e.active(!0));sf(t)}},hc=function(n){return!(b.ie&&!(11<=b.ie)||!n.sidebars)&&0<n.sidebars.length},cc=function(t){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:n.map(t.sidebars,function(n){var i=n.settings;return{type:"button",icon:i.icon,image:i.image,tooltip:i.tooltip,onclick:sc(t,n.name,t.sidebars)}})}]}},ui=function(n){var t=function(){n._skinLoaded=!0;gh(n)};return function(){n.initialized?t():n.on("init",t)}},ee=f.DOM,oe=function(n){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:n,html:""}},lc=function(n,t,i){var r,f,u,e,o,s,h;return(!1===ir(n)&&i.skinUiCss?ee.styleSheetLoader.load(i.skinUiCss,ui(n)):ui(n)(),r=t.panel=l.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===uf(n)?null:{type:"menubar",border:"0 0 1 0",items:re(n)},af(n,ef(n))]},hc(n)?(e=n,{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[oe("0"),cc(e)]}):oe("1 0 0 0")]}),w.setUiContainer(n,r),"none"!==rr(n)&&(f={type:"resizehandle",direction:rr(n),onResizeStart:function(){var t=n.getContentAreaContainer().firstChild;u={width:t.clientWidth,height:t.clientHeight}},onResize:function(t){"both"===rr(n)?wr(n,u.width+t.deltaX,u.height+t.deltaY):wr(n,null,u.height+t.deltaY)}}),n.getParam("statusbar",!0,"boolean"))&&(s=dh.translate(["",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce<\/a>']),h=n.getParam("branding",!0,"boolean")?{type:"label",classes:"branding",html:" "+s}:null,r.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:n},f,h]})),hf(n),n.on("SwitchMode",(o=r,function(n){o.find("*").disabled("readonly"===n.mode)})),r.renderBefore(i.targetNode).reflow(),n.getParam("readonly",!1,"boolean")&&n.setMode("readonly"),i.width&&ee.setStyle(r.getEl(),"width",i.width),n.on("remove",function(){r.remove();r=null}),cf(n,r),vf(n),{iframeContainer:r.find("#iframe")[0].getEl(),editorContainer:r.getEl()}},t=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),ac=0,i={id:function(){return"mceu_"+ac++},create:function(t,i,r){var u=document.createElement(t);return f.DOM.setAttribs(u,i),"string"==typeof r?u.innerHTML=r:n.each(r,function(n){n.nodeType&&u.appendChild(n)}),u},createFragment:function(n){return f.DOM.createFragment(n)},getWindowSize:function(){return f.DOM.getViewPort()},getSize:function(n){var i,r,t;return n.getBoundingClientRect?(t=n.getBoundingClientRect(),i=Math.max(t.width||t.right-t.left,n.offsetWidth),r=Math.max(t.height||t.bottom-t.bottom,n.offsetHeight)):(i=n.offsetWidth,r=n.offsetHeight),{width:i,height:r}},getPos:function(n,t){return f.DOM.getPos(n,t||i.getContainer())},getContainer:function(){return b.container?b.container:document.body},getViewPort:function(n){return f.DOM.getViewPort(n)},get:function(n){return document.getElementById(n)},addClass:function(n,t){return f.DOM.addClass(n,t)},removeClass:function(n,t){return f.DOM.removeClass(n,t)},hasClass:function(n,t){return f.DOM.hasClass(n,t)},toggleClass:function(n,t,i){return f.DOM.toggleClass(n,t,i)},css:function(n,t,i){return f.DOM.setStyle(n,t,i)},getRuntimeStyle:function(n,t){return f.DOM.getStyle(n,t,!0)},on:function(n,t,i,r){return f.DOM.bind(n,t,i,r)},off:function(n,t,i){return f.DOM.unbind(n,t,i)},fire:function(n,t,i){return f.DOM.fire(n,t,i)},innerHtml:function(n,t){f.DOM.setHTML(n,t)}},se=function(n){return"static"===i.getRuntimeStyle(n,"position")},fi=function(n){return n.state.get("fixed")},ce=function(){var n=window,t=Math.max(n.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),i=Math.max(n.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:t,y:i,w:t+(n.innerWidth||document.documentElement.clientWidth),h:i+(n.innerHeight||document.documentElement.clientHeight)}},le=function(n){var t,i=w.getUiContainer(n);return i&&!fi(n)?{x:0,y:0,w:(t=i).scrollWidth-1,h:t.scrollHeight-1}:ce()},ei={testMoveRel:function(n,t){for(var i,r=le(this),u=0;u<t.length;u++)if(i=he(this,n,t[u]),fi(this)){if(0<i.x&&i.x+i.w<r.w&&0<i.y&&i.y+i.h<r.h)return t[u]}else if(i.x>r.x&&i.x+i.w<r.w&&i.y>r.y&&i.y+i.h<r.h)return t[u];return t[0]},moveRel:function(n,t){"string"!=typeof t&&(t=this.testMoveRel(n,t));var i=he(this,n,t);return this.moveTo(i.x,i.y)},moveBy:function(n,t){var i=this.layoutRect();return this.moveTo(i.x+n,i.y+t),this},moveTo:function(n,t){function e(n,t,i){return n<0?0:t<n+i&&(n=t-i)<0?0:n}var i=this,u,f,r;return i.settings.constrainToViewport&&(u=le(this),f=i.layoutRect(),n=e(n,u.w,f.w),t=e(t,u.h,f.h)),r=w.getUiContainer(i),r&&se(r)&&!fi(i)&&(n-=r.scrollLeft,t-=r.scrollTop),r&&(n+=1,t+=1),i.state.get("rendered")?i.layoutRect({x:n,y:t}).repaint():(i.settings.x=n,i.settings.y=t),i.fire("move",{x:n,y:t}),i}},pt=tinymce.util.Tools.resolve("tinymce.util.Class"),ae=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),wt=function(n){var t;if(n)return"number"==typeof n?{top:n=n||0,left:n,bottom:n,right:n}:(1===(t=(n=n.split(" ")).length)?n[1]=n[2]=n[3]=n[0]:2===t?(n[2]=n[0],n[3]=n[1]):3===t&&(n[3]=n[1]),{top:parseInt(n[0],10)||0,right:parseInt(n[1],10)||0,bottom:parseInt(n[2],10)||0,left:parseInt(n[3],10)||0})},br=function(n,t){function i(t){var i=parseFloat(function(t){var r=n.ownerDocument.defaultView,i;return r?(i=r.getComputedStyle(n,null),i?(t=t.replace(/[A-Z]/g,function(n){return"-"+n}),i.getPropertyValue(t)):null):n.currentStyle[t]}(t));return isNaN(i)?0:i}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},kt,ht,pe,h,gr,nu,ft,v,ou,uo,y,li,ni,ph;n.extend(oi.prototype,{add:function(n){return n&&!this.contains(n)&&(this.cls._map[n]=!0,this.cls.push(n),this._change()),this},remove:function(n){if(this.contains(n)){for(var t=void 0,t=0;t<this.cls.length&&this.cls[t]!==n;t++);this.cls.splice(t,1);delete this.cls._map[n];this._change()}return this},toggle:function(n,t){var i=this.contains(n);return i!==t&&(i?this.remove(n):this.add(n),this._change()),this},contains:function(n){return!!this.cls._map[n]},_change:function(){delete this.clsValue;this.onchange.call(this)}});oi.prototype.toString=function(){var t,n;if(this.clsValue)return this.clsValue;for(t="",n=0;n<this.cls.length;n++)0<n&&(t+=" "),t+=this.prefix+this.cls[n];return t};var kr,st,si,yc=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,ve=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,pc=/^\s*|\s*$/g,bt=pt.extend({init:function(n){function r(n,r,u){function e(n){n&&r.push(n)}var f;return e(function(n){if(n)return n=n.toLowerCase(),function(t){return"*"===n||t.type===n}}((f=yc.exec(n.replace(pc,"")))[1])),e(function(n){if(n)return function(t){return t._name===n}}(f[2])),e(function(n){if(n)return n=n.split("."),function(t){for(var i=n.length;i--;)if(!t.classes.contains(n[i]))return!1;return!0}}(f[3])),e(function(n,t,i){if(n)return function(r){var u=r[n]?r[n]():"";return t?"="===t?u===i:"*="===t?0<=u.indexOf(i):"~="===t?0<=(" "+u+" ").indexOf(" "+i+" "):"!="===t?u!==i:"^="===t?0===u.indexOf(i):"$="===t&&u.substr(u.length-i.length)===i:!!i}}(f[4],f[5],f[6])),e(function(n){var r;if(n)return(n=/(?:not\((.+)\))|(.+)/i.exec(n))[1]?(r=t(n[1],[]),function(n){return!i(n,r)}):(n=n[2],function(t,i,r){return"first"===n?0===i:"last"===n?i===r-1:"even"===n?i%2==0:"odd"===n?i%2==1:!!t[n]&&t[n]()})}(f[7])),r.pseudo=!!f[7],r.direct=u,r}function t(n,i){var o,u,f,e=[];do if(ve.exec(""),(u=ve.exec(n))&&(n=u[3],e.push(u[1]),u[2])){o=u[3];break}while(u);for(o&&t(o,i),n=[],f=0;f<e.length;f++)">"!==e[f]&&n.push(r(e[f],[],">"===e[f-1]));return i.push(n),i}var i=this.match;this._selectors=t(n,[])},match:function(n,t){for(var u,h,a,r,e,o,s,v,y,c,i,f=0,l=(t=t||this._selectors).length;f<l;f++){for(i=n,c=0,u=(h=(a=t[f]).length)-1;0<=u;u--)for(o=a[u];i;){if(o.pseudo)for(s=v=(y=i.parent().items()).length;s--&&y[s]!==i;);for(r=0,e=o.length;r<e;r++)if(!o[r](i,s,v)){r=e+1;break}if(r===e){c++;break}if(u===h-1)break;i=i.parent()}if(c===h)return!0}return!1},find:function(n){function u(n,t,r){for(var e,s,f,c=t[r],o=0,h=n.length;o<h;o++){for(f=n[o],e=0,s=c.length;e<s;e++)if(!c[e](f,o,h)){e=s+1;break}if(e===s)r===t.length-1?i.push(f):f.items&&u(f.items(),t,r+1);else if(c.direct)return;f.items&&u(f.items(),t,r)}}var t,r,i=[],f=this._selectors;if(n.items){for(t=0,r=f.length;t<r;t++)u(n.items(),f[t],0);1<r&&(i=function(n){for(var r,i=[],t=n.length;t--;)(r=n[t]).__checked||(i.push(r),r.__checked=1);for(t=i.length;t--;)delete i[t].__checked;return i}(i))}return kr||(kr=bt.Collection),new kr(i)}}),ye=Array.prototype.push,wc=Array.prototype.slice;si={length:0,init:function(n){n&&this.add(n)},add:function(t){return n.isArray(t)?ye.apply(this,t):t instanceof st?this.add(t.toArray()):ye.call(this,t),this},set:function(n){var i,t=this,r=t.length;for(t.length=0,t.add(n),i=t.length;i<r;i++)delete t[i];return t},filter:function(n){var t,r,u,i,f=[];for("string"==typeof n?(n=new bt(n),i=function(t){return n.match(t)}):i=n,t=0,r=this.length;t<r;t++)i(u=this[t])&&f.push(u);return new st(f)},slice:function(){return new st(wc.apply(this,arguments))},eq:function(n){return-1===n?this.slice(n):this.slice(n,+n+1)},each:function(t){return n.each(this,t),this},toArray:function(){return n.toArray(this)},indexOf:function(n){for(var t=this.length;t--&&this[t]!==n;);return t},reverse:function(){return new st(n.toArray(this).reverse())},hasClass:function(n){return!!this[0]&&this[0].classes.contains(n)},prop:function(n,t){var i;return t!==undefined?(this.each(function(i){i[n]&&i[n](t)}),this):(i=this[0])&&i[n]?i[n]():void 0},exec:function(t){var i=n.toArray(arguments).slice(1);return this.each(function(n){n[t]&&n[t].apply(n,i)}),this},remove:function(){for(var n=this.length;n--;)this[n].remove();return this},addClass:function(n){return this.each(function(t){t.classes.add(n)})},removeClass:function(n){return this.each(function(t){t.classes.remove(n)})}};n.each("fire on off show hide append prepend before after reflow".split(" "),function(t){si[t]=function(){var i=n.toArray(arguments);return this.each(function(n){t in n&&n[t].apply(n,i)}),this}});n.each("text name disabled active selected checked visible parent value data".split(" "),function(n){si[n]=function(t){return this.prop(n,t)}});st=pt.extend(si);kt=bt.Collection=st;ht=function(n){this.create=n.create};ht.create=function(n,t){return new ht({create:function(i,r){var u,f=function(n){i.set(r,n.value)};return i.on("change:"+r,function(i){n.set(t,i.value)}),n.on("change:"+t,f),(u=i._bindings)||(u=i._bindings=[],i.on("destroy",function(){for(var n=u.length;n--;)u[n]()})),u.push(function(){n.off("change:"+t,f)}),n.get(t)}})};pe=tinymce.util.Tools.resolve("tinymce.util.Observable");var dr,dt,be=pt.extend({Mixins:[pe],init:function(n){var t,i;for(t in n=n||{})(i=n[t])instanceof ht&&(n[t]=i.create(this,t));this.data=n},set:function(t,i){var r,u,e=this.data[t];if(i instanceof ht&&(i=i.create(this,t)),"object"==typeof t){for(r in t)this.set(r,t[r]);return this}return function f(t,i){var r,u;if(t===i)return!0;if(null===t||null===i||"object"!=typeof t||"object"!=typeof i)return t===i;if(n.isArray(i)){if(t.length!==i.length)return!1;for(r=t.length;r--;)if(!f(t[r],i[r]))return!1}if(we(t)||we(i))return t===i;for(r in u={},i){if(!f(t[r],i[r]))return!1;u[r]=!0}for(r in t)if(!u[r]&&!f(t[r],i[r]))return!1;return!0}(e,i)||(this.data[t]=i,u={target:this,name:t,value:i,oldValue:e},this.fire("change:"+t,u),this.fire("change",u)),this},get:function(n){return this.data[n]},has:function(n){return n in this.data},bind:function(n){return ht.create(this,n)},destroy:function(){this.fire("destroy")}}),ut={},gt={add:function(n){var t=n.parent();if(t){if(!t._layout||t._layout.isNative())return;ut[t._id]||(ut[t._id]=t);dr||(dr=!0,p.requestAnimationFrame(function(){var n,t;for(n in dr=!1,ut)(t=ut[n]).state.get("rendered")&&t.reflow();ut={}},document.body))}},remove:function(n){ut[n._id]&&delete ut[n._id]}},bc="onmousewheel"in document,kc=!1,dc=0,ke={Statics:{classPrefix:"mce-"},isRtl:function(){return dt.rtl},classPrefix:"mce-",init:function(i){function e(n){var t;for(n=n.split(" "),t=0;t<n.length;t++)r.classes.add(n[t])}var u,f,r=this;r.settings=i=n.extend({},r.Defaults,i);r._id=i.id||"mceu_"+dc++;r._aria={role:i.role};r._elmCache={};r.$=t;r.state=new be({visible:!0,active:!1,disabled:!1,value:""});r.data=new be(i.data);r.classes=new oi(function(){r.state.get("rendered")&&(r.getEl().className=this.toString())});r.classes.prefix=r.classPrefix;(u=i.classes)&&(r.Defaults&&(f=r.Defaults.classes)&&u!==f&&e(f),e(u));n.each("title text name visible disabled active value".split(" "),function(n){n in i&&r[n](i[n])});r.on("click",function(){if(r.disabled())return!1});r.settings=i;r.borderBox=wt(i.border);r.paddingBox=wt(i.padding);r.marginBox=wt(i.margin);i.hidden&&r.hide()},Properties:"parent,name",getContainerElm:function(){var n=w.getUiContainer(this);return n||i.getContainer()},getParentCtrl:function(n){for(var t,i=this.getRoot().controlIdLookup;n&&i&&!(t=i[n.id]);)n=n.parentNode;return t},initLayoutRect:function(){var f,p,r,u,s,h,e,c,l,a,n=this,t=n.settings,o=n.getEl();f=n.borderBox=n.borderBox||br(o,"border");n.paddingBox=n.paddingBox||br(o,"padding");n.marginBox=n.marginBox||br(o,"margin");a=i.getSize(o);c=t.minWidth;l=t.minHeight;s=c||a.width;h=l||a.height;r=t.width;u=t.height;e=void 0!==(e=t.autoResize)?e:!r&&!u;r=r||s;u=u||h;var v=f.left+f.right,y=f.top+f.bottom,w=t.maxWidth||65535,b=t.maxHeight||65535;return n._layoutRect=p={x:t.x||0,y:t.y||0,w:r,h:u,deltaW:v,deltaH:y,contentW:r-v,contentH:u-y,innerW:r-v,innerH:u-y,startMinWidth:c||0,startMinHeight:l||0,minW:Math.min(s,w),minH:Math.min(h,b),maxW:w,maxH:b,autoResize:e,scrollW:0},n._lastLayoutRect={},p},layoutRect:function(n){var r,i,u,f,o,e=this,t=e._layoutRect;return t||(t=e.initLayoutRect()),n?(u=t.deltaW,f=t.deltaH,n.x!==undefined&&(t.x=n.x),n.y!==undefined&&(t.y=n.y),n.minW!==undefined&&(t.minW=n.minW),n.minH!==undefined&&(t.minH=n.minH),(i=n.w)!==undefined&&(i=(i=i<t.minW?t.minW:i)>t.maxW?t.maxW:i,t.w=i,t.innerW=i-u),(i=n.h)!==undefined&&(i=(i=i<t.minH?t.minH:i)>t.maxH?t.maxH:i,t.h=i,t.innerH=i-f),(i=n.innerW)!==undefined&&(i=(i=i<t.minW-u?t.minW-u:i)>t.maxW-u?t.maxW-u:i,t.innerW=i,t.w=i+u),(i=n.innerH)!==undefined&&(i=(i=i<t.minH-f?t.minH-f:i)>t.maxH-f?t.maxH-f:i,t.innerH=i,t.h=i+f),n.contentW!==undefined&&(t.contentW=n.contentW),n.contentH!==undefined&&(t.contentH=n.contentH),(r=e._lastLayoutRect).x===t.x&&r.y===t.y&&r.w===t.w&&r.h===t.h||((o=dt.repaintControls)&&o.map&&!o.map[e._id]&&(o.push(e),o.map[e._id]=!0),r.x=t.x,r.y=t.y,r.w=t.w,r.h=t.h),e):t},repaint:function(){var f,s,e,n,o,h,c,t,u,i,r=this;u=document.createRange?function(n){return n}:Math.round;f=r.getEl().style;n=r._layoutRect;t=r._lastRepaintRect||{};h=(o=r.borderBox).left+o.right;c=o.top+o.bottom;n.x!==t.x&&(f.left=u(n.x)+"px",t.x=n.x);n.y!==t.y&&(f.top=u(n.y)+"px",t.y=n.y);n.w!==t.w&&(i=u(n.w-h),f.width=(0<=i?i:0)+"px",t.w=n.w);n.h!==t.h&&(i=u(n.h-c),f.height=(0<=i?i:0)+"px",t.h=n.h);r._hasBody&&n.innerW!==t.innerW&&(i=u(n.innerW),(e=r.getEl("body"))&&((s=e.style).width=(0<=i?i:0)+"px"),t.innerW=n.innerW);r._hasBody&&n.innerH!==t.innerH&&(i=u(n.innerH),(e=e||r.getEl("body"))&&((s=s||e.style).height=(0<=i?i:0)+"px"),t.innerH=n.innerH);r._lastRepaintRect=t;r.fire("repaint",{},!1)},updateLayoutRect:function(){var n=this;n.parent()._lastRect=null;i.css(n.getEl(),{width:"",height:""});n._layoutRect=n._lastRepaintRect=n._lastLayoutRect=null;n.initLayoutRect()},on:function(n,t){var i,r,f,u=this;return hi(u).on(n,"string"!=typeof(i=t)?i:function(n){return r||u.parentsAndSelf().each(function(n){var t=n.settings.callbacks;if(t&&(r=t[i]))return f=n,!1}),r?r.call(f,n):(n.action=i,void this.fire("execute",n))}),u},off:function(n,t){return hi(this).off(n,t),this},fire:function(n,t,i){if((t=t||{}).control||(t.control=this),t=hi(this).fire(n,t),!1!==i&&this.parent)for(var r=this.parent();r&&!t.isPropagationStopped();)r.fire(n,t,!1),r=r.parent();return t},hasEventListeners:function(n){return hi(this).has(n)},parents:function(n){for(var i=new kt,t=this.parent();t;t=t.parent())i.add(t);return n&&(i=i.filter(n)),i},parentsAndSelf:function(n){return new kt(this).add(this.parents(n))},next:function(){var n=this.parent().items();return n[n.indexOf(this)+1]},prev:function(){var n=this.parent().items();return n[n.indexOf(this)-1]},innerHtml:function(n){return this.$el.html(n),this},getEl:function(n){var i=n?this._id+"-"+n:this._id;return this._elmCache[i]||(this._elmCache[i]=t("#"+i)[0]),this._elmCache[i]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(n){}return this},blur:function(){return this.getEl().blur(),this},aria:function(n,t){var i=this,r=i.getEl(i.ariaTarget);return void 0===t?i._aria[n]:(i._aria[n]=t,i.state.get("rendered")&&r.setAttribute("role"===n?n:"aria-"+n,t),i)},encode:function(n,t){return!1!==t&&(n=this.translate(n)),(n||"").replace(/[&<>"]/g,function(n){return"&#"+n.charCodeAt(0)+";"})},translate:function(n){return dt.translate?dt.translate(n):n},before:function(n){var t=this.parent();return t&&t.insert(n,t.items().indexOf(this),!0),this},after:function(n){var t=this.parent();return t&&t.insert(n,t.items().indexOf(this)),this},remove:function(){var u,f,n=this,i=n.getEl(),r=n.parent(),e,o;if(n.items)for(e=n.items().toArray(),f=e.length;f--;)e[f].remove();return r&&r.items&&(u=[],r.items().each(function(t){t!==n&&u.push(t)}),r.items().set(u),r._lastRect=null),n._eventsRoot&&n._eventsRoot===n&&t(i).off(),o=n.getRoot().controlIdLookup,o&&delete o[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n.state.set("rendered",!1),n.state.destroy(),n.fire("remove"),n},renderBefore:function(n){return t(n).before(this.renderHtml()),this.postRender(),this},renderTo:function(n){return t(n||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"><\/div>'},postRender:function(){var s,r,u,i,e,n=this,f=n.settings,o,h;for(i in n.$el=t(n.getEl()),n.state.set("rendered",!0),f)0===i.indexOf("on")&&n.on(i.substr(2),f[i]);if(n._eventsRoot){for(u=n.parent();!e&&u;u=u.parent())e=u._eventsRoot;if(e)for(i in e._nativeEvents)n._nativeEvents[i]=!0}de(n);f.style&&(s=n.getEl())&&(s.setAttribute("style",f.style),s.style.cssText=f.style);n.settings.border&&(r=n.borderBox,n.$el.css({"border-top-width":r.top,"border-right-width":r.right,"border-bottom-width":r.bottom,"border-left-width":r.left}));o=n.getRoot();for(h in o.controlIdLookup||(o.controlIdLookup={}),(o.controlIdLookup[n._id]=n)._aria)n.aria(h,n._aria[h]);!1===n.state.get("visible")&&(n.getEl().style.display="none");n.bindStates();n.state.on("change:visible",function(t){var i,r=t.value;n.state.get("rendered")&&(n.getEl().style.display=!1===r?"none":"",n.getEl().getBoundingClientRect());(i=n.parent())&&(i._lastRect=null);n.fire(r?"show":"hide");gt.add(n)});n.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(n){var i,r,f,e,o,s,u=this.getEl(),t=u.parentNode,h=function(n,t){for(var u,i=n,r=u=0;i&&i!==t&&i.nodeType;)r+=i.offsetLeft||0,u+=i.offsetTop||0,i=i.offsetParent;return{x:r,y:u}}(u,t);return i=h.x,r=h.y,f=u.offsetWidth,e=u.offsetHeight,o=t.clientWidth,s=t.clientHeight,"end"===n?(i-=o-f,r-=s-e):"center"===n&&(i-=o/2-f/2,r-=s/2-e/2),t.scrollLeft=i,t.scrollTop=r,this},getRoot:function(){for(var t,r,n=this,i=[];n;){if(n.rootControl){t=n.rootControl;break}i.push(n);n=(t=n).parent()}for(t||(t=this),r=i.length;r--;)i[r].rootControl=t;return t},reflow:function(){gt.remove(this);var n=this.parent();return n&&n._layout&&!n._layout.isNative()&&n.reflow(),this}};n.each("text title visible disabled active value".split(" "),function(n){ke[n]=function(t){return 0===arguments.length?this.state.get(n):(void 0!==t&&this.state.set(n,t),this)}});h=dt=pt.extend(ke);gr=function(n){return!!n.getAttribute("data-mce-tabstop")};nu={};ft=h.extend({init:function(n){var t=this;t._super(n);(n=t.settings).fixed&&t.state.set("fixed",!0);t._items=new kt;t.isRtl()&&t.classes.add("rtl");t.bodyClasses=new oi(function(){t.state.get("rendered")&&(t.getEl("body").className=this.toString())});t.bodyClasses.prefix=t.classPrefix;t.classes.add("container");t.bodyClasses.add("container-body");n.containerCls&&t.classes.add(n.containerCls);t._layout=l.create((n.layout||"")+"layout");t.settings.items?t.add(t.settings.items):t.add(t.render());t._hasBody=!0},items:function(){return this._items},find:function(n){return(n=nu[n]=nu[n]||new bt(n)).find(this)},add:function(n){return this.items().add(this.create(n)).parent(this),this},focus:function(n){var i,u,r,t=this;if(!n||!(u=t.keyboardNav||t.parents().eq(-1)[0].keyboardNav))return r=t.find("*"),t.statusbar&&r.add(t.statusbar.items()),r.each(function(n){if(n.settings.autofocus)return i=null,!1;n.canFocus&&(i=i||n)}),i&&i.focus(),t;u.focusFirst(t)},replace:function(n,t){for(var i,u=this.items(),r=u.length;r--;)if(u[r]===n){u[r]=t;break}0<=r&&((i=t.getEl())&&i.parentNode.removeChild(i),(i=n.getEl())&&i.parentNode.removeChild(i));t.parent(this)},create:function(t){var i,r=this,u=[];return n.isArray(t)||(t=[t]),n.each(t,function(t){t&&(t instanceof h||("string"==typeof t&&(t={type:t}),i=n.extend({},r.settings.defaults,t),t.type=i.type=i.type||t.type||r.settings.defaultType||(i.defaults?i.defaults.type:null),t=l.create(i)),u.push(t))}),u},renderNew:function(){var n=this;return n.items().each(function(i,r){var u;i.parent(n);i.state.get("rendered")||((u=n.getEl("body")).hasChildNodes()&&r<=u.childNodes.length-1?t(u.childNodes[r]).before(i.renderHtml()):t(u).append(i.renderHtml()),i.postRender(),gt.add(i))}),n._layout.applyClasses(n.items().filter(":visible")),n._lastRect=null,n},append:function(n){return this.add(n).renderNew()},prepend:function(n){return this.items().set(this.create(n).concat(this.items().toArray())),this.renderNew()},insert:function(n,t,i){var r,u,f;return n=this.create(n),r=this.items(),!i&&t<r.length-1&&(t+=1),0<=t&&t<r.length&&(u=r.slice(0,t).toArray(),f=r.slice(t).toArray(),r.set(u.concat(n,f))),this.renderNew()},fromJSON:function(n){for(var t in n)this.find("#"+t).value(n[t]);return this},toJSON:function(){var n={};return this.find("*").each(function(t){var i=t.name(),r=t.value();i&&void 0!==r&&(n[i]=r)}),n},renderHtml:function(){var n=this,t=n._layout,i=this.settings.role;return n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'"'+(i?' role="'+this.settings.role+'"':"")+'><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var t,n=this;return n.items().exec("postRender"),n._super(),n._layout.postRender(n),n.state.set("rendered",!0),n.settings.style&&n.$el.css(n.settings.style),n.settings.border&&(t=n.borderBox,n.$el.css({"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left})),n.parent()||(n.keyboardNav=ge({root:n})),n},initLayoutRect:function(){var n=this._super();return this._layout.recalc(this),n},recalc:function(){var t=this,n=t._layoutRect,i=t._lastRect;if(!i||i.w!==n.w||i.h!==n.h)return t._layout.recalc(t),n=t.layoutRect(),t._lastRect={x:n.x,y:n.y,w:n.w,h:n.h},!0},reflow:function(){var n;if(gt.remove(this),this.visible()){for(h.repaintControls=[],h.repaintControls.map={},this.recalc(),n=h.repaintControls.length;n--;)h.repaintControls[n].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint();h.repaintControls=[]}return this}});var iu,ru,uu,fu,no={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){function i(){function f(i,f,e,o,s,h){var l,a,b,v,p,c,y,w;if(a=n.getEl("scroll"+i)){if(y=f.toLowerCase(),w=e.toLowerCase(),t(n.getEl("absend")).css(y,n.layoutRect()[o]-1),!s)return void t(a).css("display","none");t(a).css("display","block");l=n.getEl("body");b=n.getEl("scroll"+i+"t");v=l["client"+e]-4;p=(v-=r&&u?a["client"+h]:0)/l["scroll"+e];(c={})[y]=l["offset"+f]+2;c[w]=v;t(a).css(c);(c={})[y]=l["scroll"+f]*p;c[w]=v*p;t(b).css(c)}}var r,u,i;i=n.getEl("body");r=i.scrollWidth>i.clientWidth;u=i.scrollHeight>i.clientHeight;f("h","Left","Width","contentW",r,"Height");f("v","Top","Height","contentH",u,"Width")}var n=this;n.settings.autoScroll&&(n._hasScroll||(n._hasScroll=!0,function(){function i(i,r,u,f,e){var h,o=n._id+"-scroll"+i,s=n.classPrefix;t(n.getEl()).append('<div id="'+o+'" class="'+s+"scrollbar "+s+"scrollbar-"+i+'"><div id="'+o+'t" class="'+s+'scrollbar-thumb"><\/div><\/div>');n.draghelper=new et(o+"t",{start:function(){h=n.getEl("body")["scroll"+r];t("#"+o).addClass(s+"active")},drag:function(t){var s,c,l,a,o=n.layoutRect();c=o.contentW>o.innerW;l=o.contentH>o.innerH;a=n.getEl("body")["client"+u]-4;s=(a-=c&&l?n.getEl("scroll"+i)["client"+e]:0)/n.getEl("body")["scroll"+u];n.getEl("body")["scroll"+r]=h+t["delta"+f]/s},stop:function(){t("#"+o).removeClass(s+"active")}})}n.classes.add("scroll");i("v","Top","Height","Y","Width");i("h","Left","Width","X","Height")}(),n.on("wheel",function(t){var r=n.getEl("body");r.scrollLeft+=10*(t.deltaX||0);r.scrollTop+=10*t.deltaY;i()}),t(n.getEl("body")).on("scroll",i)),i())}},ci=ft.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[no],renderHtml:function(){var n=this,i=n._layout,t=n.settings.html;return n.preRender(),i.preRender(n),void 0===t?t='<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+i.renderHtml(n)+"<\/div>":("function"==typeof t&&(t=t.call(n)),n._hasBody=!1),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1" role="group">'+(n._preBodyHtml||"")+t+"<\/div>"}}),to={resizeToContent:function(){this._layoutRect.autoResize=!0;this._lastRect=null;this.reflow()},resizeTo:function(n,t){if(n<=1||t<=1){var r=i.getWindowSize();n=n<=1?n*r.w:n;t=t<=1?t*r.h:t}return this._layoutRect.autoResize=!1,this.layoutRect({minW:n,minH:t,w:n,h:t}).reflow()},resizeBy:function(n,t){var i=this.layoutRect();return this.resizeTo(i.w+n,i.h+t)}},s=[],a=[];v=ci.extend({Mixins:[ei,to],init:function(n){var i=this;i._super(n);(i._eventsRoot=i).classes.add("floatpanel");n.autohide&&(nl(),function(){if(!uu){var n=document.documentElement,i=n.clientWidth,r=n.clientHeight;uu=function(){document.all&&i===n.clientWidth&&r===n.clientHeight||(i=n.clientWidth,r=n.clientHeight,v.hideAll())};t(window).on("resize",uu)}}(),s.push(i));n.autofix&&(ru||(ru=function(){for(var n=s.length;n--;)io(s[n])},t(window).on("scroll",ru)),i.on("move",function(){io(this)}));i.on("postrender show",function(n){if(n.control===i){var u,r=i.classPrefix;i.modal&&!fu&&((u=t("#"+r+"modal-block",i.getContainerElm()))[0]||(u=t('<div id="'+r+'modal-block" class="'+r+"reset "+r+'fade"><\/div>').appendTo(i.getContainerElm())),p.setTimeout(function(){u.addClass(r+"in");t(i.getEl()).addClass(r+"in")}),fu=!0);eu(!0,i)}});i.on("show",function(){i.parents().each(function(n){if(n.state.get("fixed"))return i.fixed(!0),!1})});n.popover&&(i._preBodyHtml='<div class="'+i.classPrefix+'arrow"><\/div>',i.classes.add("popover").add("bottom").add(i.isRtl()?"end":"start"));i.aria("label",n.ariaLabel);i.aria("labelledby",i._id);i.aria("describedby",i.describedBy||i._id+"-none")},fixed:function(n){var t=this,r;return t.state.get("fixed")!==n&&(t.state.get("rendered")&&(r=i.getViewPort(),n?t.layoutRect().y-=r.y:t.layoutRect().y+=r.y),t.classes.toggle("fixed",n),t.state.set("fixed",n)),t},show:function(){for(var t=this._super(),n=s.length;n--&&s[n]!==this;);return-1===n&&s.push(this),t},hide:function(){return ro(this),eu(!1,this),this._super()},hideAll:function(){v.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),eu(!1,this)),this},remove:function(){ro(this);this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});v.hideAll=function(){for(var t,n=s.length;n--;)t=s[n],t&&t.settings.autohide&&(t.hide(),s.splice(n,1))};ou=function(n,t){return!(!n||t.settings.ui_container)};uo=function(n,t,i){var r,e,u=f.DOM,c=n.getParam("fixed_toolbar_container");c&&(e=u.select(c)[0]);var o=function(){var t,i;if(r&&r.moveRel&&r.visible()&&!r._fixed){var f=n.selection.getScrollContainer(),e=n.getBody(),o=0,s=0;f&&(t=u.getPos(e),i=u.getPos(f),o=Math.max(0,i.x-t.x),s=Math.max(0,i.y-t.y));r.fixed(!1).moveRel(e,n.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(o,s)}},s=function(){r&&(r.show(),o(),u.addClass(n.getBody(),"mce-edit-focus"))},a=function(){r&&(r.hide(),v.hideAll(),u.removeClass(n.getBody(),"mce-edit-focus"))},h=function(){r?r.visible()||s():(r=t.panel=l.create({type:e?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:ou(e,n),fixed:ou(e,n),border:1,items:[!1===uf(n)?null:{type:"menubar",border:"0 0 1 0",items:re(n)},af(n,ef(n))]}),w.setUiContainer(n,r),hf(n),e?r.renderTo(e).reflow():r.renderTo().reflow(),cf(n,r),s(),vf(n),n.on("nodeChange",o),n.on("ResizeWindow",o),n.on("activate",s),n.on("deactivate",a),n.nodeChanged())};return n.settings.content_editable=!0,n.on("focus",function(){!1===ir(n)&&i.skinUiCss?u.styleSheetLoader.load(i.skinUiCss,h,h):h()}),n.on("blur hide",a),n.on("remove",function(){r&&(r.remove(),r=null)}),!1===ir(n)&&i.skinUiCss?u.styleSheetLoader.load(i.skinUiCss,ui(n)):ui(n)(),{}};var tl=function(n,t){var i;n.on("ProgressState",function(n){i=i||new su(t.panel.getEl("body"));n.state?i.show(n.time):i.hide()})},il=function(n,t,i){var r=function(n){var i=n.settings,r=i.skin,t=i.skin_url,u;return!1!==r&&(u=r||"lightgray",t=t?n.documentBaseURI.toAbsolute(t):tr.baseURL+"/skins/"+u),t}(n);return r&&(i.skinUiCss=r+"/skin.min.css",n.contentCSS.push(r+"/content"+(n.inline?".inline":"")+".min.css")),tl(n,t),n.getParam("inline",!1,"boolean")?uo(n,t,i):lc(n,t,i)},fo=h.extend({Mixins:[ei],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes+'" role="presentation"><div class="'+t+'tooltip-arrow"><\/div><div class="'+t+'tooltip-inner">'+n.encode(n.state.get("text"))+"<\/div><\/div>"},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl().lastChild.innerHTML=n.encode(t.value)}),n._super()},repaint:function(){var n,t;n=this.getEl().style;t=this._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=131070}}),o=h.extend({init:function(n){var t=this;t._super(n);n=t.settings;t.canFocus=!0;n.tooltip&&!1!==o.tooltips&&(t.on("mouseenter",function(i){var r=t.tooltip().moveTo(-65535),u;i.control===t?(u=r.text(n.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]),r.classes.toggle("tooltip-n","bc-tc"===u),r.classes.toggle("tooltip-nw","bc-tl"===u),r.classes.toggle("tooltip-ne","bc-tr"===u),r.moveRel(t.getEl(),u)):r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().remove();t._tooltip=null}));t.aria("label",n.ariaLabel||n.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new fo({type:"tooltip"}),w.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var n=this,t=n.settings;n._super();n.parent()||!t.width&&!t.height||(n.initLayoutRect(),n.repaint());t.autofocus&&n.focus()},bindStates:function(){function t(t){n.aria("disabled",t);n.classes.toggle("disabled",t)}function i(t){n.aria("pressed",t);n.classes.toggle("active",t)}var n=this;return n.state.on("change:disabled",function(n){t(n.value)}),n.state.on("change:active",function(n){i(n.value)}),n.state.get("disabled")&&t(!0),n.state.get("active")&&i(!0),n._super()},remove:function(){this._super();this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),eo=o.extend({Defaults:{value:0},init:function(n){this._super(n);this.classes.add("progress");this.settings.filter||(this.settings.filter=function(n){return Math.round(n)})},renderHtml:function(){var t=this._id,n=this.classPrefix;return'<div id="'+t+'" class="'+this.classes+'"><div class="'+n+'bar-container"><div class="'+n+'bar"><\/div><\/div><div class="'+n+'text">0%<\/div><\/div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){function t(t){t=n.settings.filter(t);n.getEl().lastChild.innerHTML=t+"%";n.getEl().firstChild.firstChild.style.width=t+"%"}var n=this;return n.state.on("change:value",function(n){t(n.value)}),t(n.state.get("value")),n._super()}}),hu=function(n,t){n.getEl().lastChild.textContent=t+(n.progressBar?" "+n.progressBar.value()+"%":"")},oo=h.extend({Mixins:[ei],Defaults:{classes:"widget notification"},init:function(n){var t=this;t._super(n);t.maxWidth=n.maxWidth;n.text&&t.text(n.text);n.icon&&(t.icon=n.icon);n.color&&(t.color=n.color);n.type&&t.classes.add("notification-"+n.type);n.timeout&&(n.timeout<0||0<n.timeout)&&!n.closeButton?t.closeButton=!1:(t.classes.add("has-close"),t.closeButton=!0);n.progressBar&&(t.progressBar=new eo);t.on("click",function(n){-1!==n.target.className.indexOf(t.classPrefix+"close")&&t.close()})},renderHtml:function(){var i,n=this,t=n.classPrefix,r="",u="",f="";return n.icon&&(r='<i class="'+t+"ico "+t+"i-"+n.icon+'"><\/i>'),i=' style="max-width: '+n.maxWidth+"px;"+(n.color?"background-color: "+n.color+';"':'"'),n.closeButton&&(u='<button type="button" class="'+t+'close" aria-hidden="true">×<\/button>'),n.progressBar&&(f=n.progressBar.renderHtml()),'<div id="'+n._id+'" class="'+n.classes+'"'+i+' role="presentation">'+r+'<div class="'+t+'notification-inner">'+n.state.get("text")+"<\/div>"+f+u+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"><\/div><\/div>'},postRender:function(){var n=this;return p.setTimeout(function(){n.$el.addClass(n.classPrefix+"in");hu(n,n.state.get("text"))},100),n._super()},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl().firstChild.innerHTML=t.value;hu(n,t.value)}),n.progressBar&&(n.progressBar.bindStates(),n.progressBar.state.on("change:value",function(){hu(n,n.state.get("text"))})),n._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var n,t;n=this.getEl().style;t=this._layoutRect;n.left=t.x+"px";n.top=t.y+"px";n.zIndex=65534}});y=[];li="";ni=v.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(n){var t=this;t._super(n);t.isRtl()&&t.classes.add("rtl");t.classes.add("window");t.bodyClasses.add("window-body");t.state.set("fixed",!0);n.buttons&&(t.statusbar=new ci({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:t.isRtl()?"start":"end",defaults:{type:"button"},items:n.buttons}),t.statusbar.classes.add("foot"),t.statusbar.parent(t));t.on("click",function(n){var r=t.classPrefix+"close";(i.hasClass(n.target,r)||i.hasClass(n.target.parentNode,r))&&t.close()});t.on("cancel",function(){t.close()});t.on("move",function(n){n.control===t&&v.hideAll()});t.aria("describedby",t.describedBy||t._id+"-none");t.aria("label",n.title);t._fullscreen=!1},recalc:function(){var t,r,u,f,n=this,e=n.statusbar;n._fullscreen&&(n.layoutRect(i.getWindowSize()),n.layoutRect().contentH=n.layoutRect().innerH);n._super();t=n.layoutRect();n.settings.title&&!n._fullscreen&&(r=t.headerW)>t.w&&(u=t.x-Math.max(0,r/2),n.layoutRect({w:r,x:u}),f=!0);e&&(e.layoutRect({w:n.layoutRect().innerW}).recalc(),(r=e.layoutRect().minW+t.deltaW)>t.w&&(u=t.x-Math.max(0,r-t.w),n.layoutRect({w:r,x:u}),f=!0));f&&n.recalc()},initLayoutRect:function(){var e,t=this,n=t._super(),r=0,u,f;return t.settings.title&&!t._fullscreen&&(e=t.getEl("head"),u=i.getSize(e),n.headerW=u.width,n.headerH=u.height,r+=n.headerH),t.statusbar&&(r+=t.statusbar.layoutRect().h),n.deltaH+=r,n.minH+=r,n.h+=r,f=i.getWindowSize(),n.x=t.settings.x||Math.max(0,f.w/2-n.w/2),n.y=t.settings.y||Math.max(0,f.h/2-n.h/2),n},renderHtml:function(){var n=this,f=n._layout,t=n._id,r=n.classPrefix,i=n.settings,e="",o="",u=i.html;return n.preRender(),f.preRender(n),i.title&&(e='<div id="'+t+'-head" class="'+r+'window-head"><div id="'+t+'-title" class="'+r+'title">'+n.encode(i.title)+'<\/div><div id="'+t+'-dragh" class="'+r+'dragh"><\/div><button type="button" class="'+r+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"><\/i><\/button><\/div>'),i.url&&(u='<iframe src="'+i.url+'" tabindex="-1"><\/iframe>'),void 0===u&&(u=f.renderHtml(n)),n.statusbar&&(o=n.statusbar.renderHtml()),'<div id="'+t+'" class="'+n.classes+'" hidefocus="1"><div class="'+n.classPrefix+'reset" role="application">'+e+'<div id="'+t+'-body" class="'+n.bodyClasses+'">'+u+"<\/div>"+o+"<\/div><\/div>"},fullscreen:function(n){var e,u,r=this,o=document.documentElement,s=r.classPrefix,f;return n!==r._fullscreen&&((t(window).on("resize",function(){var t,n;r._fullscreen&&(e?r._timer||(r._timer=p.setTimeout(function(){var n=i.getWindowSize();r.moveTo(0,0).resizeTo(n.w,n.h);r._timer=0},50)):(t=(new Date).getTime(),n=i.getWindowSize(),r.moveTo(0,0).resizeTo(n.w,n.h),50<(new Date).getTime()-t&&(e=!0)))}),u=r.layoutRect(),r._fullscreen=n)?(r._initial={x:u.x,y:u.y,w:u.w,h:u.h},r.borderBox=wt("0"),r.getEl("head").style.display="none",u.deltaH-=u.headerH+2,t([o,document.body]).addClass(s+"fullscreen"),r.classes.add("fullscreen"),f=i.getWindowSize(),r.moveTo(0,0).resizeTo(f.w,f.h)):(r.borderBox=wt(r.settings.border),r.getEl("head").style.display="",u.deltaH+=u.headerH,t([o,document.body]).removeClass(s+"fullscreen"),r.classes.remove("fullscreen"),r.moveTo(r._initial.x,r._initial.y).resizeTo(r._initial.w,r._initial.h))),r.reflow()},postRender:function(){var t,n=this;setTimeout(function(){n.classes.add("in");n.fire("open")},0);n._super();n.statusbar&&n.statusbar.postRender();n.focus();this.dragHelper=new et(n._id+"-dragh",{start:function(){t={x:n.layoutRect().x,y:n.layoutRect().y}},drag:function(i){n.moveTo(t.x+i.deltaX,t.y+i.deltaY)}});n.on("submit",function(t){t.isDefaultPrevented()||n.close()});y.push(n);so(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var t,n=this;for(n.dragHelper.destroy(),n._super(),n.statusbar&&this.statusbar.remove(),ul(n.classPrefix,!1),t=y.length;t--;)y[t]===n&&y.splice(t,1);so(0<y.length)},getContentWindow:function(){var n=this.getEl().getElementsByTagName("iframe")[0];return n?n.contentWindow:null}});!function(){if(!b.desktop){var n={w:window.innerWidth,h:window.innerHeight};p.setInterval(function(){var i=window.innerWidth,r=window.innerHeight;n.w===i&&n.h===r||(n={w:i,h:r},t(window).trigger("resize"))},100)}t(window).on("resize",function(){for(var t,r=i.getWindowSize(),n=0;n<y.length;n++)t=y[n].layoutRect(),y[n].moveTo(y[n].settings.x||Math.max(0,r.w/2-t.w/2),y[n].settings.y||Math.max(0,r.h/2-t.h/2))})}();var ho,k=ni.extend({init:function(n){n={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}};this._super(n)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function t(n,t,i){return{type:"button",text:n,subtype:i?"primary":"",onClick:function(n){n.control.parents()[1].close();r(t)}}}var i,r=n.callback||function(){};switch(n.buttons){case k.OK_CANCEL:i=[t("Ok",!0,!0),t("Cancel",!1)];break;case k.YES_NO:case k.YES_NO_CANCEL:i=[t("Yes",1,!0),t("No",0)];n.buttons===k.YES_NO_CANCEL&&i.push(t("Cancel",-1));break;default:i=[t("Ok",!0,!0)]}return new ni({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:i,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(n,t){return"string"==typeof n&&(n={text:n}),n.callback=t,k.msgBox(n)},confirm:function(n,t){return"string"==typeof n&&(n={text:n}),n.callback=t,n.buttons=k.OK_CANCEL,k.msgBox(n)}}}),fl=function(n){return{renderUI:function(t){return il(n,this,t)},resizeTo:function(t,i){return wr(n,t,i)},resizeBy:function(t,i){return oc(n,t,i)},getNotificationManagerImpl:function(){return rl(n)},getWindowManagerImpl:function(){return{open:function(n,t,i){var r;return n.title=n.title||" ",n.url=n.url||n.file,n.url&&(n.width=parseInt(n.width||320,10),n.height=parseInt(n.height||240,10)),n.body&&(n.items={defaults:n.defaults,type:n.bodyType||"form",items:n.body,data:n.data,callbacks:n.commands}),n.url||n.buttons||(n.buttons=[{text:"Ok",subtype:"primary",onclick:function(){r.find("form")[0].submit()}},{text:"Cancel",onclick:function(){r.close()}}]),(r=new ni(n)).on("close",function(){i(r)}),n.data&&r.on("postRender",function(){this.find("*").each(function(t){var i=t.name();i in n.data&&t.value(n.data[i])})}),r.features=n||{},r.params=t||{},r=r.renderTo(document.body).reflow()},alert:function(n,t,i){var r;return(r=k.alert(n,function(){t()})).on("close",function(){i(r)}),r},confirm:function(n,t,i){var r;return(r=k.confirm(n,function(n){t(n)})).on("close",function(){i(r)}),r},close:function(n){n.close()},getParams:function(n){return n.params},setParams:function(n,t){n.params=t}}}}},cu=pt.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(t){this.settings=n.extend({},this.Defaults,t)},preRender:function(n){n.bodyClasses.add(this.settings.containerClass)},applyClasses:function(n){var i,r,t,u,f=this.settings;i=f.firstControlClass;r=f.lastControlClass;n.each(function(n){n.classes.remove(i).remove(r).add(f.controlClass);n.visible()&&(t||(t=n),u=n)});t&&t.classes.add(i);u&&u.classes.add(r)},renderHtml:function(n){var t="";return this.applyClasses(n.items()),n.items().each(function(n){t+=n.renderHtml()}),t},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),ai=cu.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(n){n.items().filter(":visible").each(function(n){var t=n.settings;n.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h});n.recalc&&n.recalc()})},renderHtml:function(n){return'<div id="'+n._id+'-absend" class="'+n.classPrefix+'abs-end"><\/div>'+this._super(n)}}),vi=o.extend({Defaults:{classes:"widget btn",role:"button"},init:function(n){var i,t=this;t._super(n);n=t.settings;i=t.settings.size;t.on("click mousedown",function(n){n.preventDefault()});t.on("touchstart",function(n){t.fire("click",n);n.preventDefault()});n.subtype&&t.classes.add(n.subtype);i&&t.classes.add("btn-"+i);n.icon&&t.icon(n.icon)},icon:function(n){return arguments.length?(this.state.set("icon",n),this):this.state.get("icon")},repaint:function(){var n,t=this.getEl().firstChild;t&&((n=t.style).width=n.height="100%");this._super()},renderHtml:function(){var n,f,t=this,e=t._id,r=t.classPrefix,i=t.state.get("icon"),o=t.state.get("text"),s="",u=t.settings;return(n=u.image)?(i="none","string"!=typeof n&&(n=window.getSelection?n[0]:n[1]),n=" style=\"background-image: url('"+n+"')\""):n="",o&&(t.classes.add("btn-has-text"),s='<span class="'+r+'txt">'+t.encode(o)+"<\/span>"),i=i?r+"ico "+r+"i-"+i:"",f="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+e+'" class="'+t.classes+'" tabindex="-1"'+f+'><button id="'+e+'-button" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+n+"><\/i>":"")+s+"<\/button><\/div>"},bindStates:function(){function r(r){var u=t("span."+i,n.getEl());r?(u[0]||(t("button:first",n.getEl()).append('<span class="'+i+'"><\/span>'),u=t("span."+i,n.getEl())),u.html(n.encode(r))):u.remove();n.classes.toggle("btn-has-text",!!r)}var n=this,t=n.$,i=n.classPrefix+"txt";return n.state.on("change:text",function(n){r(n.value)}),n.state.on("change:icon",function(t){var f=t.value,e=n.classPrefix,u,i;f=(n.settings.icon=f)?e+"ico "+e+"i-"+n.settings.icon:"";u=n.getEl().firstChild;i=u.getElementsByTagName("i")[0];f?(i&&i===u.firstChild||(i=document.createElement("i"),u.insertBefore(i,u.firstChild)),i.className=f):i&&u.removeChild(i);r(n.state.get("text"))}),n._super()}}),el=vi.extend({init:function(t){t=n.extend({text:"Browse...",multiple:!1,accept:null},t);this._super(t);this.classes.add("browsebutton");t.multiple&&this.classes.add("multiple")},postRender:function(){var n=this,r=i.create("input",{type:"file",id:n._id+"-browse",accept:n.settings.accept});n._super();t(r).on("change",function(t){var i=t.target.files;n.value=function(){return i.length?n.settings.multiple?i:i[0]:null};t.preventDefault();i.length&&n.fire("change",t)});t(r).on("click",function(n){n.stopPropagation()});t(n.getEl("button")).on("click",function(n){n.stopPropagation();r.click()});n.getEl().appendChild(r)},remove:function(){t(this.getEl("button")).off();t(this.getEl("input")).off();this._super()}}),ol=ft.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var n=this,t=n._layout;return n.classes.add("btn-group"),n.preRender(),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'"><div id="'+n._id+'-body">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}}),co=o.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(n){var t=this;t._super(n);t.on("click mousedown",function(n){n.preventDefault()});t.on("click",function(n){n.preventDefault();t.disabled()||t.checked(!t.checked())});t.checked(t.settings.checked)},checked:function(n){return arguments.length?(this.state.set("checked",n),this):this.state.get("checked")},value:function(n){return arguments.length?this.checked(n):this.checked()},renderHtml:function(){var n=this,t=n._id,i=n.classPrefix;return'<div id="'+t+'" class="'+n.classes+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+i+"ico "+i+'i-checkbox"><\/i><span id="'+t+'-al" class="'+i+'label">'+n.encode(n.state.get("text"))+"<\/span><\/div>"},bindStates:function(){function t(t){n.classes.toggle("checked",t);n.aria("checked",t)}var n=this;return n.state.on("change:text",function(t){n.getEl("al").firstChild.data=n.translate(t.value)}),n.state.on("change:checked change:value",function(i){n.fire("change");t(i.value)}),n.state.on("change:icon",function(t){var u=t.value,f=n.classPrefix,r,i;if(void 0===u)return n.settings.icon;u=(n.settings.icon=u)?f+"ico "+f+"i-"+n.settings.icon:"";r=n.getEl().firstChild;i=r.getElementsByTagName("i")[0];u?(i&&i===r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=u):i&&r.removeChild(i)}),n.state.get("checked")&&t(!0),n._super()}}),lo=tinymce.util.Tools.resolve("tinymce.util.VK"),lu=o.extend({init:function(n){var i=this;i._super(n);n=i.settings;i.classes.add("combobox");i.subinput=!0;i.ariaTarget="inp";n.menu=n.menu||n.values;n.menu&&(n.icon="caret");i.on("click",function(r){var u=r.target,f=i.getEl();if(t.contains(f,u)||u===f)for(;u&&u!==f;)u.id&&-1!==u.id.indexOf("-open")&&(i.fire("action"),n.menu&&(i.showMenu(),r.aria&&i.menu.items()[0].focus())),u=u.parentNode});i.on("keydown",function(n){var t;13===n.keyCode&&"INPUT"===n.target.nodeName&&(n.preventDefault(),i.parents().reverse().each(function(n){if(n.toJSON)return t=n,!1}),i.fire("submit",{data:t.toJSON()}))});i.on("keyup",function(n){if("INPUT"===n.target.nodeName){var r=i.state.get("value"),t=n.target.value;t!==r&&(i.state.set("value",t),i.fire("autocomplete",n))}});i.on("mouseover",function(n){var t=i.tooltip().moveTo(-65535),u,r;i.statusLevel()&&-1!==n.target.className.indexOf(i.classPrefix+"status")&&(u=i.statusMessage()||"Ok",r=t.text(u).show().testMoveRel(n.target,["bc-tc","bc-tl","bc-tr"]),t.classes.toggle("tooltip-n","bc-tc"===r),t.classes.toggle("tooltip-nw","bc-tl"===r),t.classes.toggle("tooltip-ne","bc-tr"===r),t.moveRel(n.target,r))})},statusLevel:function(n){return 0<arguments.length&&this.state.set("statusLevel",n),this.state.get("statusLevel")},statusMessage:function(n){return 0<arguments.length&&this.state.set("statusMessage",n),this.state.get("statusMessage")},showMenu:function(){var t,n=this,i=n.settings;n.menu||((t=i.menu||[]).length?t={type:"menu",items:t}:t.type=t.type||"menu",n.menu=l.create(t).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(t){t.control===n.menu&&n.focus()}),n.menu.on("show hide",function(t){t.control.items().each(function(t){t.active(t.value()===n.value())})}).fire("show"),n.menu.on("select",function(t){n.value(t.control.value())}),n.on("focusin",function(t){"INPUT"===t.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0));n.menu.show();n.menu.layoutRect({w:n.layoutRect().w});n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var f,e,n=this,c=n.getEl(),o=n.getEl("open"),s=n.layoutRect(),h=0,u=c.firstChild,r;return n.statusLevel()&&"none"!==n.statusLevel()&&(h=parseInt(i.getRuntimeStyle(u,"padding-right"),10)-parseInt(i.getRuntimeStyle(u,"padding-left"),10)),f=o?s.w-i.getSize(o).width-10:s.w-10,r=document,r.all&&(!r.documentMode||r.documentMode<=8)&&(e=n.layoutRect().h-2+"px"),t(u).css({width:f-h,lineHeight:e}),n._super(),n},postRender:function(){var n=this;return t(this.getEl("inp")).on("change",function(t){n.state.set("value",t.target.value);n.fire("change",t)}),n._super()},renderHtml:function(){var i,e,o,t=this,f=t._id,n=t.settings,r=t.classPrefix,h=t.state.get("value")||"",s="",u="";return"spellcheck"in n&&(u+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(u+=' maxlength="'+n.maxLength+'"'),n.size&&(u+=' size="'+n.size+'"'),n.subtype&&(u+=' type="'+n.subtype+'"'),o='<i id="'+f+'-status" class="mce-status mce-ico" style="display: none"><\/i>',t.disabled()&&(u+=' disabled="disabled"'),(i=n.icon)&&"caret"!==i&&(i=r+"ico "+r+"i-"+n.icon),e=t.state.get("text"),(i||e)&&(s='<div id="'+f+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+f+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==i?'<i class="'+i+'"><\/i>':'<i class="'+r+'caret"><\/i>')+(e?(i?" ":"")+e:"")+"<\/button><\/div>",t.classes.add("has-open")),'<div id="'+f+'" class="'+t.classes+'"><input id="'+f+'-inp" class="'+r+'textbox" value="'+t.encode(h,!1)+'" hidefocus="1"'+u+' placeholder="'+t.encode(n.placeholder)+'" />'+o+s+"<\/div>"},value:function(n){return arguments.length?(this.state.set("value",n),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(t,i){var r=this,u;0!==t.length?(r.menu?r.menu.items().remove():r.menu=l.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(r).renderTo(),n.each(t,function(n){var t,u;r.menu.add({text:n.title,url:n.previewUrl,match:i,classes:"menu-item-ellipsis",onclick:(t=n.value,u=n.title,function(){r.fire("selectitem",{title:u,value:t})})})}),r.menu.renderNew(),r.hideMenu(),r.menu.on("cancel",function(n){n.control.parent()===r.menu&&(n.stopPropagation(),r.focus(),r.hideMenu())}),r.menu.on("select",function(){r.focus()}),u=r.layoutRect().w,r.menu.layoutRect({w:u,minW:0,maxW:u}),r.menu.repaint(),r.menu.reflow(),r.menu.show(),r.menu.moveRel(r.getEl(),r.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])):r.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var n=this,t;return n.state.on("change:value",function(t){n.getEl("inp").value!==t.value&&(n.getEl("inp").value=t.value)}),n.state.on("change:disabled",function(t){n.getEl("inp").disabled=t.value}),n.state.on("change:statusLevel",function(t){var u=n.getEl("status"),f=n.classPrefix,r=t.value;i.css(u,"display","none"===r?"none":"");i.toggleClass(u,f+"i-checkmark","ok"===r);i.toggleClass(u,f+"i-warning","warn"===r);i.toggleClass(u,f+"i-error","error"===r);n.classes.toggle("has-status","none"!==r);n.repaint()}),i.on(n.getEl("status"),"mouseleave",function(){n.tooltip().hide()}),n.on("cancel",function(t){n.menu&&n.menu.visible()&&(t.stopPropagation(),n.hideMenu())}),t=function(n,t){t&&0<t.items().length&&t.items().eq(n)[0].focus()},n.on("keydown",function(i){var r=i.keyCode;"INPUT"===i.target.nodeName&&(r===lo.DOWN?(i.preventDefault(),n.fire("autocomplete"),t(0,n.menu)):r===lo.UP&&(i.preventDefault(),t(-1,n.menu)))}),n._super()},remove:function(){t(this.getEl("inp")).off();this.menu&&this.menu.remove();this._super()}}),sl=lu.extend({init:function(n){var t=this;n.spellcheck=!1;n.onaction&&(n.icon="none");t._super(n);t.classes.add("colorbox");t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(n){var t=this.getEl("open"),i=t?t.getElementsByTagName("i")[0]:null;if(i)try{i.style.background=n}catch(r){}},bindStates:function(){var n=this;return n.state.on("change:value",function(t){n.state.get("rendered")&&n.repaintColor(t.value)}),n._super()}}),ao=vi.extend({showPanel:function(){var n=this,u=n.settings,t,i,r;(n.classes.add("opened"),n.panel)?n.panel.show():(t=u.panel,t.type&&(t={layout:"grid",items:t}),t.role=t.role||"dialog",t.popover=!0,t.autohide=!0,t.ariaRoot=!0,n.panel=new v(t).on("hide",function(){n.classes.remove("opened")}).on("cancel",function(t){t.stopPropagation();n.focus();n.hidePanel()}).parent(n).renderTo(n.getContainerElm()),n.panel.fire("show"),n.panel.reflow());i=n.panel.testMoveRel(n.getEl(),u.popoverAlign||(n.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));n.panel.classes.toggle("start","l"===i.substr(-1));n.panel.classes.toggle("end","r"===i.substr(-1));r="t"===i.substr(0,1);n.panel.classes.toggle("bottom",!r);n.panel.classes.toggle("top",r);n.panel.moveRel(n.getEl(),i)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var n=this;return n.aria("haspopup",!0),n.on("click",function(t){t.control===n&&(n.panel&&n.panel.visible()?n.hidePanel():(n.showPanel(),n.panel.focus(!!t.aria)))}),n._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),hl=f.DOM,cl=ao.extend({init:function(n){this._super(n);this.classes.add("splitbtn");this.classes.add("colorbutton")},color:function(n){return n?(this._color=n,this.getEl("preview").style.backgroundColor=n,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var n=this,i=n._id,t=n.classPrefix,r=n.state.get("text"),u=n.settings.icon?t+"ico "+t+"i-"+n.settings.icon:"",e=n.settings.image?" style=\"background-image: url('"+n.settings.image+"')\"":"",f="";return r&&(n.classes.add("btn-has-text"),f='<span class="'+t+'txt">'+n.encode(r)+"<\/span>"),'<div id="'+i+'" class="'+n.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(u?'<i class="'+u+'"'+e+"><\/i>":"")+'<span id="'+i+'-preview" class="'+t+'preview"><\/span>'+f+'<\/button><button type="button" class="'+t+'open" hidefocus="1" tabindex="-1"> <i class="'+t+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this,t=n.settings.onclick;return n.on("click",function(i){i.aria&&"down"===i.aria.key||i.control!==n||hl.getParent(i.target,"."+n.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(n,i))}),delete n.settings.onclick,n._super()}}),vo=tinymce.util.Tools.resolve("tinymce.util.Color"),ll=o.extend({Defaults:{classes:"widget colorpicker"},init:function(n){this._super(n)},postRender:function(){function h(n,t){var r,u,f=i.getPos(n);return r=t.pageX-f.x,u=t.pageY-f.y,{x:r=Math.max(0,Math.min(r/n.clientWidth,1)),y:u=Math.max(0,Math.min(u/n.clientHeight,1))}}function u(t,u){var f=(360-t.h)/360;i.css(e,{top:100*f+"%"});u||i.css(o,{left:t.s+"%",top:100-t.v+"%"});r.style.background=vo({s:100,v:100,h:t.h}).toHex();n.color().parse({s:t.s,v:t.v,h:t.h})}function c(i){var f;f=h(r,i);t.s=100*f.x;t.v=100*(1-f.y);u(t);n.fire("change")}function l(i){var r;r=h(f,i);(t=s.toHsv()).h=360*(1-r.y);u(t,!0);n.fire("change")}var t,f,e,r,o,n=this,s=n.color();f=n.getEl("h");e=n.getEl("hp");r=n.getEl("sv");o=n.getEl("svp");n._repaint=function(){u(t=s.toHsv())};n._super();n._svdraghelper=new et(n._id+"-sv",{start:c,drag:c});n._hdraghelper=new et(n._id+"-h",{start:l,drag:l});n._repaint()},rgb:function(){return this.color().toRgb()},value:function(n){if(!arguments.length)return this.color().toHex();this.color().parse(n);this._rendered&&this._repaint()},color:function(){return this._color||(this._color=vo()),this._color},renderHtml:function(){var i,t=this._id,n=this.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return i='<div id="'+t+'-h" class="'+n+'colorpicker-h" style="background: -ms-linear-gradient(top,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);background: linear-gradient(to bottom,#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000);">'+function(){var t,u,f,i,e="";for(f="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",t=0,u=(i=r.split(",")).length-1;t<u;t++)e+='<div class="'+n+'colorpicker-h-chunk" style="height:'+100/u+"%;"+f+i[t]+",endColorstr="+i[t+1]+");-ms-"+f+i[t]+",endColorstr="+i[t+1]+')"><\/div>';return e}()+'<div id="'+t+'-hp" class="'+n+'colorpicker-h-marker"><\/div><\/div>','<div id="'+t+'" class="'+this.classes+'"><div id="'+t+'-sv" class="'+n+'colorpicker-sv"><div class="'+n+'colorpicker-overlay1"><div class="'+n+'colorpicker-overlay2"><div id="'+t+'-svp" class="'+n+'colorpicker-selector1"><div class="'+n+'colorpicker-selector2"><\/div><\/div><\/div><\/div><\/div>'+i+"<\/div>"}}),al=o.extend({init:function(t){t=n.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},t);this._super(t);this.classes.add("dropzone");t.multiple&&this.classes.add("multiple")},renderHtml:function(){var r,n,t=this.settings;return r={id:this._id,hidefocus:"1"},n=i.create("div",r,"<span>"+this.translate(t.text)+"<\/span>"),t.height&&i.css(n,"height",t.height+"px"),t.width&&i.css(n,"width",t.width+"px"),n.className=this.classes,n.outerHTML},postRender:function(){var t=this,i=function(n){n.preventDefault();t.classes.toggle("dragenter");t.getEl().className=t.classes};t._super();t.$el.on("dragover",function(n){n.preventDefault()});t.$el.on("dragenter",i);t.$el.on("dragleave",i);t.$el.on("drop",function(i){if(i.preventDefault(),!t.state.get("disabled")){var r=function(i){var r=t.settings.accept,u;return"string"!=typeof r?i:(u=new RegExp("("+r.split(/\s*,\s*/).join("|")+")$","i"),n.grep(i,function(n){return u.test(n.name)}))}(i.dataTransfer.files);t.value=function(){return r.length?t.settings.multiple?r:r[0]:null};r.length&&t.fire("change",i)}})},remove:function(){this.$el.off();this._super()}}),yo=o.extend({init:function(n){var t=this;n.delimiter||(n.delimiter="»");t._super(n);t.classes.add("path");t.canFocus=!0;t.on("click",function(n){var i;(i=n.target.getAttribute("data-index"))&&t.fire("select",{value:t.row()[i],index:i})});t.row(t.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(n){return arguments.length?(this.state.set("row",n),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"<\/div>"},bindStates:function(){var n=this;return n.state.on("change:row",function(t){n.innerHtml(n._getDataPathHtml(t.value))}),n._super()},_getDataPathHtml:function(n){for(var f=n||[],i="",r=this.classPrefix,t=0,u=f.length;t<u;t++)i+=(0<t?'<div class="'+r+'divider" aria-hidden="true"> '+this.settings.delimiter+" <\/div>":"")+'<div role="button" class="'+r+"path-item"+(t===u-1?" "+r+"last":"")+'" data-index="'+t+'" tabindex="-1" id="'+this._id+"-"+t+'" aria-level="'+(t+1)+'">'+f[t].name+"<\/div>";return i||(i='<div class="'+r+'path-item"> <\/div>'),i}}),vl=yo.extend({postRender:function(){function i(n){return 1===n.nodeType&&("BR"===n.nodeName||n.getAttribute("data-mce-bogus")||"bookmark"===n.getAttribute("data-mce-type"))?!0:!1}var t=this,n=t.settings.editor;return!1!==n.settings.elementpath&&(t.on("select",function(t){n.focus();n.selection.select(this.row()[t.index].element);n.nodeChanged()}),n.on("nodeChange",function(r){for(var e,o=[],u=r.parents,f=u.length;f--;)if(1===u[f].nodeType&&!i(u[f])&&(e=n.fire("ResolveName",{name:u[f].nodeName.toLowerCase(),target:u[f]}),e.isDefaultPrevented()||o.push({name:e.name,element:u[f]}),e.isPropagationStopped()))break;t.row(o)})),t._super()}}),po=ft.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.classes.add("formitem"),t.preRender(n),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<div id="'+n._id+'-title" class="'+i+'title">'+n.settings.title+"<\/div>":"")+'<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/div>"}}),wo=ft.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var t=this,i=t.items();t.settings.formItemDefaults||(t.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}});i.each(function(i){var r,u=i.settings.label;u&&((r=new po(n.extend({items:{type:"label",id:i._id+"-l",text:u,flex:0,forId:i._id,disabled:i.disabled()}},t.settings.formItemDefaults))).type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex&&(i.settings.flex=1),t.replace(i,r),r.add(i))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super();this.fromJSON(this.settings.data)},bindStates:function(){function t(){var i,u,t=0,r=[];if(!1!==n.settings.labelGapCalc)for(("children"===n.settings.labelGapCalc?n.find("formitem"):n.items()).filter("formitem").each(function(n){var i=n.items()[0],u=i.getEl().clientWidth;t=t<u?u:t;r.push(i)}),u=n.settings.labelGap||0,i=r.length;i--;)r[i].settings.minWidth=t+u}var n=this;n._super();n.on("show",t);t()}}),yl=wo.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var n=this,t=n._layout,i=n.classPrefix;return n.preRender(),t.preRender(n),'<fieldset id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1">'+(n.settings.title?'<legend id="'+n._id+'-title" class="'+i+'fieldset-title">'+n.settings.title+"<\/legend>":"")+'<div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+(n.settings.html||"")+t.renderHtml(n)+"<\/div><\/fieldset>"}}),pl=0,wl=function(n){var t=(new Date).getTime();return n+"_"+Math.floor(1e9*Math.random())+ ++pl+String(t)},ti=function(n){if(null===n||n===undefined)throw new Error("Node cannot be null or undefined");return{dom:r.constant(n)}},ct={fromHtml:function(n,t){var i=(t||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||1<i.childNodes.length)throw console.error("HTML does not have a single root node",n),"HTML must have a single root node";return ti(i.childNodes[0])},fromTag:function(n,t){var i=(t||document).createElement(n);return ti(i)},fromText:function(n,t){var i=(t||document).createTextNode(n);return ti(i)},fromDom:ti,fromPoint:function(n,t,i){return e.from(n.dom().elementFromPoint(t,i)).map(ti)}},bo=function(n){var t,i=!1;return function(){return i||(i=!0,t=n.apply(null,arguments)),t}},ko=9,go=1,bl=function(n){return n.dom().nodeType},au=function(n){return function(t){return bl(t)===n}},kl=(au(go),au(3),au(ko),bo(function(){return kl(ct.fromDom(document))}),function(n){var t=n.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return ct.fromDom(t)}),vu=(ho=Object.keys)===undefined?function(n){var i=[],t;for(t in n)n.hasOwnProperty(t)&&i.push(t);return i}:ho,yi=function(n,t){for(var r,u=vu(n),i=0,f=u.length;i<f;i++)r=u[i],t(n[r],r,n)},ns=function(n,t){var i={};return yi(n,function(r,u){var f=t(r,u,n);i[f.k]=f.v}),i},ts=function(n,t){var i=[];return yi(n,function(n,r){i.push(t(n,r))}),i},is=function(n){return ts(n,function(n){return n})},dl={bifilter:function(n,t){var i={},r={};return yi(n,function(n,u){(t(n,u)?i:r)[u]=n}),{t:i,f:r}},each:yi,map:function(n,t){return ns(n,function(n,i,r){return{k:i,v:t(n,i,r)}})},mapToArray:ts,tupleMap:ns,find:function(n,t){for(var r,u,f=vu(n),i=0,o=f.length;i<o;i++)if(r=f[i],u=n[r],t(u,r,n))return e.some(u);return e.none()},keys:vu,values:is,size:function(n){return is(n).length}},pi=function(n){return n.slice(0).sort()},gl=function(n,t){throw new Error("All required keys ("+pi(n).join(", ")+") were not specified. Specified keys were: "+pi(t).join(", ")+".");},na=function(n){throw new Error("Unsupported keys for object: "+pi(n).join(", "));},rs=function(n,t){if(!yt.isArray(t))throw new Error("The "+n+" fields must be an array. Was: "+t+".");u.each(t,function(t){if(!yt.isString(t))throw new Error("The value "+t+" in the "+n+" fields was not a string.");})},ta=function(n){var t=pi(n);u.find(t,function(n,i){return i<t.length-1&&n===t[i+1]}).each(function(n){throw new Error("The field: "+n+" occurs more than once in the combined fields: ["+t.join(", ")+"].");})},ia={immutable:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return function(){for(var f,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(n.length!==t.length)throw new Error('Wrong number of arguments to struct. Expected "['+n.length+']", got '+t.length+" arguments");return f={},u.each(n,function(n,i){f[n]=r.constant(t[i])}),f}},immutableBag:function(n,t){var i=n.concat(t);if(0===i.length)throw new Error("You must specify at least one required or optional field.");return rs("required",n),rs("optional",t),ta(i),function(f){var s=dl.keys(f),h,o;return u.forall(n,function(n){return u.contains(s,n)})||gl(n,s),h=u.filter(s,function(n){return!u.contains(i,n)}),0<h.length&&na(h),o={},u.each(n,function(n){o[n]=r.constant(f[n])}),u.each(t,function(n){o[n]=r.constant(Object.prototype.hasOwnProperty.call(f,n)?e.some(f[n]):e.none())}),o}}},ra=("undefined"!=typeof window?window:Function("return this;")(),function(n,t){var r=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i],r.test(t))return r;return undefined}(n,t),i;return r?(i=function(n){return Number(t.replace(r,"$"+n))},yu(i(1),i(2))):{major:0,minor:0}}),us=function(){return yu(0,0)},yu=function(n,t){return{major:n,minor:t}},wi={nu:yu,detect:function(n,t){var i=String(t).toLowerCase();return 0===n.length?us():ra(n,i)},unknown:us},fs="Firefox",lt=function(n,t){return function(){return t===n}},es=function(n){var t=n.current;return{current:t,version:n.version,isEdge:lt("Edge",t),isChrome:lt("Chrome",t),isIE:lt("IE",t),isOpera:lt("Opera",t),isFirefox:lt(fs,t),isSafari:lt("Safari",t)}},os={unknown:function(){return es({current:undefined,version:wi.unknown()})},nu:es,edge:r.constant("Edge"),chrome:r.constant("Chrome"),ie:r.constant("IE"),opera:r.constant("Opera"),firefox:r.constant(fs),safari:r.constant("Safari")},ss="Windows",hs="Android",cs="Solaris",ls="FreeBSD",ot=function(n,t){return function(){return t===n}},as=function(n){var t=n.current;return{current:t,version:n.version,isWindows:ot(ss,t),isiOS:ot("iOS",t),isAndroid:ot(hs,t),isOSX:ot("OSX",t),isLinux:ot("Linux",t),isSolaris:ot(cs,t),isFreeBSD:ot(ls,t)}},vs={unknown:function(){return as({current:undefined,version:wi.unknown()})},nu:as,windows:r.constant(ss),ios:r.constant("iOS"),android:r.constant(hs),linux:r.constant("Linux"),osx:r.constant("OSX"),solaris:r.constant(cs),freebsd:r.constant(ls)},ys=function(n,t){var i=String(t).toLowerCase();return u.find(n,function(n){return n.search(i)})},ua=function(n,t){return ys(n,t).map(function(n){var i=wi.detect(n.versionRegexes,t);return{current:n.name,version:i}})},fa=function(n,t){return ys(n,t).map(function(n){var i=wi.detect(n.versionRegexes,t);return{current:n.name,version:i}})},c=function(n,t){return-1!==n.indexOf(t)},pu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tt=function(n){return function(t){return c(t,n)}},ea=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return c(n,"edge/")&&c(n,"chrome")&&c(n,"safari")&&c(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pu],search:function(n){return c(n,"chrome")&&!c(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return c(n,"msie")||c(n,"trident")}},{name:"Opera",versionRegexes:[pu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tt("firefox")},{name:"Safari",versionRegexes:[pu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(c(n,"safari")||c(n,"mobile/"))&&c(n,"applewebkit")}}],oa=[{name:"Windows",search:tt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return c(n,"iphone")||c(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:tt("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tt("linux"),versionRegexes:[]},{name:"Solaris",search:tt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tt("freebsd"),versionRegexes:[]}],ps={browsers:r.constant(ea),oses:r.constant(oa)},sa=function(n){var t,o,i,u,s,h,c,f,e,l,a,p=ps.browsers(),w=ps.oses(),v=ua(p,n).fold(os.unknown,os.nu),y=fa(w,n).fold(vs.unknown,vs.nu);return{browser:v,os:y,deviceType:(o=v,i=n,u=(t=y).isiOS()&&!0===/ipad/i.test(i),s=t.isiOS()&&!u,h=t.isAndroid()&&3===t.version.major,c=t.isAndroid()&&4===t.version.major,f=u||h||c&&!0===/mobile/i.test(i),e=t.isiOS()||t.isAndroid(),l=e&&!f,a=o.isSafari()&&t.isiOS()&&!1===/safari/i.test(i),{isiPad:r.constant(u),isiPhone:r.constant(s),isTablet:r.constant(f),isPhone:r.constant(l),isTouch:r.constant(e),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:r.constant(a)})}},ha=bo(function(){var n=navigator.userAgent;return sa(n)}),ws=go,ca=ko,bs=function(n){return n.nodeType!==ws&&n.nodeType!==ca||0===n.childElementCount},ks={all:function(n,t){var i=t===undefined?document:t.dom();return bs(i)?[]:u.map(i.querySelectorAll(n),ct.fromDom)},is:function(n,t){var i=n.dom();if(i.nodeType!==ws)return!1;if(i.matches!==undefined)return i.matches(t);if(i.msMatchesSelector!==undefined)return i.msMatchesSelector(t);if(i.webkitMatchesSelector!==undefined)return i.webkitMatchesSelector(t);if(i.mozMatchesSelector!==undefined)return i.mozMatchesSelector(t);throw new Error("Browser lacks native selectors");},one:function(n,t){var i=t===undefined?document:t.dom();return bs(i)?e.none():e.from(i.querySelector(n)).map(ct.fromDom)}},la=(ha().browser.isIE(),ia.immutable("element","offset"),function(n,t){return ks.all(t,n)}),aa=n.trim,ds=function(n){return function(t){return t&&1===t.nodeType&&(t.contentEditable===n||t.getAttribute("data-mce-contenteditable")===n)?!0:!1}},va=ds("true"),ya=ds("false"),gs=function(n,t,i,r,u){return{type:n,title:t,url:i,level:r,attach:u}},nh=function(n){return n.innerText||n.textContent},pa=function(n){return(t=n)&&"A"===t.nodeName&&(t.id||t.name)&&ih(n);var t},th=function(n){return n&&/^(H[1-6])$/.test(n.nodeName)},ih=function(n){return function(n){for(;n=n.parentNode;){var t=n.contentEditable;if(t&&"inherit"!==t)return va(n)}return!1}(n)&&!ya(n)},wa=function(n){return th(n)&&ih(n)},ba=function(n){var t,i,r=(t=n).id?t.id:wl("h");return gs("header",nh(n),"#"+r,th(i=n)?parseInt(i.nodeName.substr(1),10):0,function(){n.id=r})},ka=function(n){var t=n.id||n.name,i=nh(n);return gs("anchor",i||"#"+t,"#"+t,0,r.noop)},da=function(n){var t,i;return t="h1,h2,h3,h4,h5,h6,a:not([href])",i=n,u.map(la(ct.fromDom(i),t),function(n){return n.dom()})},ga=function(n){return 0<aa(n.title).length},nv=function(n){var t,i,r=da(n);return u.filter((i=r,u.map(u.filter(i,wa),ba)).concat((t=r,u.map(u.filter(t,pa),ka))),ga)},at={},tv=function(n){return{title:n.title,value:{title:{raw:n.title},url:n.url,attach:n.attach}}},rh=function(n,t){return{title:n,value:{title:n,url:t,attach:r.noop}}},uh=function(n,t,i){var r=t in n?n[t]:i;return!1===r?null:r},iv=function(t,i,f,e){var c,o,s,h,v={title:"-"},l=function(t){var e=t.hasOwnProperty(f)?t[f]:[],o=u.filter(e,function(n){return t=n,r=i,!u.exists(r,function(n){return n.url===t});var t,r});return n.map(o,function(n){return{title:n,value:{title:n,url:n,attach:r.noop}}})},a=function(t){var r,f=u.filter(i,function(n){return n.type===t});return r=f,n.map(r,tv)};return!1===e.typeahead_urls?[]:"file"===f?(c=[bi(t,l(at)),bi(t,a("header")),bi(t,(o=a("anchor"),s=uh(e,"anchor_top","#top"),h=uh(e,"anchor_bottom","#bottom"),null!==s&&o.unshift(rh("<top>",s)),null!==h&&o.push(rh("<bottom>",h)),o))],u.foldl(c,function(n,t){return 0===n.length||0===t.length?n.concat(t):n.concat(v,t)},[])):bi(t,l(at))},bi=function(t,i){var u=t.toLowerCase(),r=n.grep(i,function(n){return-1!==n.title.toLowerCase().indexOf(u)});return 1===r.length&&r[0].title===t?[]:r},rv=function(n,t,i,r){var f=function(u){var f=nv(i),e=iv(u,f,r,t);n.showAutoComplete(e,u)};n.on("autocomplete",function(){f(n.value())});n.on("selectitem",function(t){var i=t.value,u,f;n.value(i.url);f=(u=i.title).raw?u.raw:u;"image"===r?n.fire("change",{meta:{alt:f,attach:i.attach}}):n.fire("change",{meta:{text:f,attach:i.attach}});n.focus()});n.on("click",function(t){0===n.value().length&&"INPUT"===t.target.nodeName&&f("")});n.on("PostRender",function(){n.getRoot().on("submit",function(t){var i,e,f;t.isDefaultPrevented()||(i=n.value(),f=at[e=r],/^https?/.test(i)&&(f?u.indexOf(f,i).isNone()&&(at[e]=f.slice(0,5).concat(i)):at[e]=[i]))})})},uv=function(n,t,i){var r=t.filepicker_validator_handler;r&&n.state.on("change:value",function(t){var u;0!==(u=t.value).length?r({url:u,type:i},function(t){var u,i,r,f=(i=(u=t).status,r=u.message,"valid"===i?{status:"ok",message:r}:"unknown"===i?{status:"warn",message:r}:"invalid"===i?{status:"warn",message:r}:{status:"none",message:""});n.statusMessage(f.message);n.statusLevel(f.status)}):n.statusLevel("none")})},fv=lu.extend({Statics:{clearHistory:function(){at={}}},init:function(t){var e,o,i,r=this,s=window.tinymce?window.tinymce.activeEditor:tr.activeEditor,f=s.settings,u=t.filetype;t.spellcheck=!1;(i=f.file_picker_types||f.file_browser_callback_types)&&(i=n.makeMap(i,/[, ]/));i&&!i[u]||(!(o=f.file_picker_callback)||i&&!i[u]?!(o=f.file_browser_callback)||i&&!i[u]||(e=function(){o(r.getEl("inp").id,r.value(),u,window)}):e=function(){var t=r.fire("beforecall").meta;t=n.extend({filetype:u},t);o.call(s,function(n,t){r.value(n).fire("change",{meta:t})},r.value(),t)});e&&(t.icon="browse",t.onaction=e);r._super(t);r.classes.add("filepicker");rv(r,f,s.getBody(),u);uv(r,f,u)}}),ev=ai.extend({recalc:function(n){var i=n.layoutRect(),t=n.paddingBox;n.items().filter(":visible").each(function(n){n.layoutRect({x:t.left,y:t.top,w:i.innerW-t.right-t.left,h:i.innerH-t.top-t.bottom});n.recalc&&n.recalc()})}}),ov=ai.extend({recalc:function(n){var f,l,o,r,u,a,ut,ft,et,w,e,b,h,i,lt,v,dt,ot,t,y,g,at,c,vt,nt,s,p,st,yt,k,tt,it,rt,d,ht,pt,wt,bt=[],kt=Math.max,gt=Math.min,ct;for(o=n.items().filter(":visible"),r=n.layoutRect(),u=n.paddingBox,a=n.settings,b=n.isRtl()?a.direction||"row-reversed":a.direction,ut=a.align,ft=n.isRtl()?a.pack||"end":a.pack,et=a.spacing||0,"row-reversed"!==b&&"column-reverse"!==b||(o=o.set(o.toArray().reverse()),b=b.split("-")[0]),"column"===b?(vt="y",at="h",c="minH",nt="maxH",p="innerH",s="top",st="deltaH",yt="contentH",d="left",it="w",k="x",tt="innerW",rt="minW",ht="right",pt="deltaW",wt="contentW"):(vt="x",at="w",c="minW",nt="maxW",p="innerW",s="left",st="deltaW",yt="contentW",d="top",it="h",k="y",tt="innerH",rt="minH",ht="bottom",pt="deltaH",wt="contentH"),e=r[p]-u[s]-u[s],g=w=0,f=0,l=o.length;f<l;f++)i=(h=o[f]).layoutRect(),e-=f<l-1?et:0,0<(lt=h.settings.flex)&&(w+=lt,i[nt]&&bt.push(h),i.flex=lt),e-=i[c],g<(v=u[d]+i[rt]+u[ht])&&(g=v);if((t={})[c]=e<0?r[c]-e+r[st]:r[p]-e+r[st],t[rt]=g+r[pt],t[yt]=r[p]-e,t[wt]=g,t.minW=gt(t.minW,r.maxW),t.minH=gt(t.minH,r.maxH),t.minW=kt(t.minW,r.startMinWidth),t.minH=kt(t.minH,r.startMinHeight),r.autoResize&&(t.minW!==r.minW||t.minH!==r.minH))(t.w=t.minW,t.h=t.minH,n.layoutRect(t),this.recalc(n),null===n._lastRect)&&(ct=n.parent(),ct&&(ct._lastRect=null,ct.recalc()));else{for(ot=e/w,f=0,l=bt.length;f<l;f++)(dt=(i=(h=bt[f]).layoutRect())[nt])<(v=i[c]+i.flex*ot)?(e-=i[nt]-i[c],w-=i.flex,i.flex=0,i.maxFlexSize=dt):i.maxFlexSize=0;for(ot=e/w,y=u[s],t={},0===w&&("end"===ft?y=e+u[s]:"center"===ft?(y=Math.round(r[p]/2-(r[p]-e)/2)+u[s])<0&&(y=u[s]):"justify"===ft&&(y=u[s],et=Math.floor(e/(o.length-1)))),t[k]=u[d],f=0,l=o.length;f<l;f++)v=(i=(h=o[f]).layoutRect()).maxFlexSize||i[c],"center"===ut?t[k]=Math.round(r[tt]/2-i[it]/2):"stretch"===ut?(t[it]=kt(i[rt]||0,r[tt]-u[d]-u[ht]),t[k]=u[d]):"end"===ut&&(t[k]=r[tt]-i[it]-u.top),0<i.flex&&(v+=i.flex*ot),t[at]=v,t[vt]=y,h.layoutRect(t),h.recalc&&h.recalc(),y+=v+et}}}),fh=cu.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(n){n.items().filter(":visible").each(function(n){n.recalc&&n.recalc()})},isNative:function(){return!0}}),sv=function(n,t){return ks.one(t,n)},d=function(n,t){return function(){n.execCommand("mceToggleFormat",!1,t)}},eh=function(n,t,i){var r=function(n){i(n,t)};n.formatter?n.formatter.formatChanged(t,r):n.on("init",function(){n.formatter.formatChanged(t,r)})},wu=function(n,t){return function(i){eh(n,t,function(n){i.control.active(n)})}},hv=function(t){var i=["alignleft","aligncenter","alignright","alignjustify"],r="alignleft",u=[{text:"Left",icon:"alignleft",onclick:d(t,"alignleft")},{text:"Center",icon:"aligncenter",onclick:d(t,"aligncenter")},{text:"Right",icon:"alignright",onclick:d(t,"alignright")},{text:"Justify",icon:"alignjustify",onclick:d(t,"alignjustify")}];t.addMenuItem("align",{text:"Align",menu:u});t.addButton("align",{type:"menubutton",icon:r,menu:u,onShowMenu:function(r){var u=r.control.menu;n.each(i,function(n,i){u.items().eq(i).each(function(i){return i.active(t.formatter.match(n))})})},onPostRender:function(u){var f=u.control;n.each(i,function(n){eh(t,n,function(t){f.icon(r);t&&f.icon(n)})})}});n.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(n,i){t.addButton(i,{active:!1,tooltip:n[0],cmd:n[1],onPostRender:wu(t,i)})})},bu=function(n){return n?n.split(",")[0]:""},cv=function(t,i){return function(){var r=this;t.on("init nodeChange",function(){var f,s,u,e,o=t.queryCommandValue("FontName"),h=(f=i,e=(s=o)?s.toLowerCase():"",n.each(f,function(n){n.value.toLowerCase()===e&&(u=n.value)}),n.each(f,function(n){u||bu(n.value).toLowerCase()!==bu(e).toLowerCase()||(u=n.value)}),u);r.value(h||null);!h&&o&&r.text(bu(o))})}},lv=function(t){t.addButton("fontselect",function(){var i,r=(i=function(n){for(var t=(n=n.replace(/;$/,"").split(";")).length;t--;)n[t]=n[t].split("=");return n}(t.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"),n.map(i,function(n){return{text:{raw:n[0]},value:n[1],textStyle:-1===n[1].indexOf("dings")?"font-family:"+n[1]:""}}));return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:cv(t,r),onselect:function(n){n.control.settings.value&&t.execCommand("FontName",!1,n.control.settings.value)}}})},av=function(n){lv(n)},vv=function(n,t){return/[0-9.]+px$/.test(n)?(r=72*parseInt(n,10)/96,u=t||0,i=Math.pow(10,u),Math.round(r*i)/i+"pt"):n;var r,u,i},yv=function(t,i,r){var u;return n.each(t,function(n){n.value===r?u=r:n.value===i&&(u=i)}),u},pv=function(t){t.addButton("fontsizeselect",function(){var r,i,u,f=(r=t.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt",n.map(r.split(" "),function(n){var i=n,r=n,t=n.split("=");return 1<t.length&&(i=t[0],r=t[1]),{text:i,value:r}}));return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:f,fixedWidth:!0,onPostRender:(i=t,u=f,function(){var n=this;i.on("init nodeChange",function(){var f,e,t,r;if(f=i.queryCommandValue("FontSize"))for(t=3;!r&&0<=t;t--)e=vv(f,t),r=yv(u,e,f);n.value(r||null);r||n.text(e)})}),onclick:function(n){n.control.settings.value&&t.execCommand("FontSize",!1,n.control.settings.value)}}})},wv=function(n){pv(n)},oh=function(t,i){var r=i.length;return n.each(i,function(n){n.menu&&(n.hidden=0===oh(t,n.menu));var i=n.format;i&&(n.hidden=!t.formatter.canApply(i));n.hidden&&r--}),r},sh=function(n,t){var i=t.items().length;return t.items().each(function(t){t.menu&&t.visible(0<sh(n,t.menu));!t.menu&&t.settings.menu&&t.visible(0<oh(n,t.settings.menu));var r=t.settings.format;r&&t.visible(n.formatter.canApply(r));t.visible()||i--}),i},bv=function(t){var i,o,f,u,r,s,e,h,c=(o=0,f=[],u=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],r=function(t){var i=[];if(t)return n.each(t,function(n){var t={text:n.title,icon:n.icon},u;n.items?t.menu=r(n.items):(u=n.format||"custom"+o++,n.format||(n.name=u,f.push(n)),t.format=u,t.cmd=n.cmd);i.push(t)}),i},(i=t).on("init",function(){n.each(f,function(n){i.formatter.register(n.name,n)})}),{type:"menu",items:i.settings.style_formats_merge?i.settings.style_formats?r(u.concat(i.settings.style_formats)):r(u):r(i.settings.style_formats||u),onPostRender:function(n){i.fire("renderFormatsMenu",{control:n.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return i.formatter.getCssText(this.settings.format)},onPostRender:function(){var n=this;n.parent().on("show",function(){var t,r;(t=n.settings.format)&&(n.disabled(!i.formatter.canApply(t)),n.active(i.formatter.match(t)));(r=n.settings.cmd)&&n.active(i.queryCommandState(r))})},onclick:function(){this.settings.format&&d(i,this.settings.format)();this.settings.cmd&&i.execCommand(this.settings.cmd)}}});s=c;t.addMenuItem("formats",{text:"Formats",menu:s});h=c;(e=t).addButton("styleselect",{type:"menubutton",text:"Formats",menu:h,onShowMenu:function(){e.settings.style_formats_autohide&&sh(e,this.menu)}})},kv=function(t,i){return function(){var r,f,e,u=[];return n.each(i,function(n){u.push({text:n[0],value:n[1],textStyle:function(){return t.formatter.getCssText(n[1])}})}),{type:"listbox",text:i[0][0],values:u,fixedWidth:!0,onselect:function(n){if(n.control){var i=n.control.value();d(t,i)()}},onPostRender:(r=t,f=u,function(){var t=this;r.on("nodeChange",function(i){var o=r.formatter,u=null;n.each(i.parents,function(t){if(n.each(f,function(n){if(e?o.matchNode(t,e,{value:n.value})&&(u=n.value):o.matchNode(t,n.value)&&(u=n.value),u)return!1}),u)return!1});t.value(u)})})}}},dv=function(t){var i,r,u=function(n){for(var t=(n=n.replace(/;$/,"").split(";")).length;t--;)n[t]=n[t].split("=");return n}(t.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");t.addMenuItem("blockformats",{text:"Blocks",menu:(i=t,r=u,n.map(r,function(n){return{text:n[0],onclick:d(i,n[1]),textStyle:function(){return i.formatter.getCssText(n[1])}}}))});t.addButton("formatselect",kv(t,u))},hh=function(t,i){var r,f;if("string"==typeof i)f=i.split(" ");else if(n.isArray(i))return u.flatten(n.map(i,function(n){return hh(t,n)}));return r=n.grep(f,function(n){return"|"===n||n in t.menuItems}),n.map(r,function(n){return"|"===n?{text:"-"}:t.menuItems[n]})},ku=function(n){return n&&"-"===n.text},gv=function(n){var t=u.filter(n,function(n,t,i){return!ku(n)||!ku(i[t-1])});return u.filter(t,function(n,t,i){return!ku(n)||0<t&&t<i.length-1})},ny=function(t){var r,u,i,f,e=t.settings.insert_button_items;return gv(e?hh(t,e):(r=t,u="insert",i=[{text:"-"}],f=n.grep(r.menuItems,function(n){return n.context===u}),n.each(f,function(n){"before"===n.separator&&i.push({text:"|"});n.prependToContext?i.unshift(n):i.push(n);"after"===n.separator&&i.push({text:"|"})}),i))},ty=function(n){var t;(t=n).addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(ny(t));this.menu.renderNew()}})},iy=function(t){var i,u,r;i=t;n.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(n,t){i.addButton(t,{active:!1,tooltip:n,onPostRender:wu(i,t),onclick:d(i,t)})});u=t;n.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(n,t){u.addButton(t,{tooltip:n[0],cmd:n[1]})});r=t;n.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(n,t){r.addButton(t,{active:!1,tooltip:n[0],cmd:n[1],onPostRender:wu(r,t)})})},ry=function(t){var i;iy(t);i=t;n.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(n,t){i.addMenuItem(t,{text:n[0],icon:t,shortcut:n[2],cmd:n[1]})});i.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:d(i,"code")})},ki=function(n,t){return function(){var i=this,r=function(){var i="redo"===t?"hasRedo":"hasUndo";return!!n.undoManager&&n.undoManager[i]()};i.disabled(!r());n.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){i.disabled(n.readonly||!r())})}},uy=function(n){var t,i;(t=n).addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:ki(t,"undo"),cmd:"undo"});t.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:ki(t,"redo"),cmd:"redo"});(i=n).addButton("undo",{tooltip:"Undo",onPostRender:ki(i,"undo"),cmd:"undo"});i.addButton("redo",{tooltip:"Redo",onPostRender:ki(i,"redo"),cmd:"redo"})},fy=function(n){var i,t;(i=n).addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:(t=i,function(){var n=this;t.on("VisualAid",function(t){n.active(t.hasVisual)});n.active(t.hasVisual)}),cmd:"mceToggleVisualAid"})},ch={setup:function(n){var t;n.rtl&&(h.rtl=!0);n.on("mousedown",function(){v.hideAll()});(t=n).settings.ui_container&&(b.container=sv(ct.fromDom(document.body),t.settings.ui_container).fold(r.constant(null),function(n){return n.dom()}));o.tooltips=!b.iOS;h.translate=function(n){return tr.translate(n)};dv(n);hv(n);ry(n);uy(n);wv(n);av(n);bv(n);fy(n);ty(n)}},ey=ai.extend({recalc:function(n){var e,y,o,b,u,k,d,i,f,h,t,r,g,nt,st,s,p,tt,it,c,l,rt,ut,ht,ct,lt,ft,vt,a=[],v=[],yt,et,w,at,ot;for(e=n.settings,b=n.items().filter(":visible"),u=n.layoutRect(),o=e.columns||Math.ceil(Math.sqrt(b.length)),y=Math.ceil(b.length/o),tt=e.spacingH||e.spacing||0,it=e.spacingV||e.spacing||0,c=e.alignH||e.align,l=e.alignV||e.align,s=n.paddingBox,vt=("reverseRows"in e)?e.reverseRows:n.isRtl(),c&&"string"==typeof c&&(c=[c]),l&&"string"==typeof l&&(l=[l]),t=0;t<o;t++)a.push(0);for(r=0;r<y;r++)v.push(0);for(r=0;r<y;r++)for(t=0;t<o&&(h=b[r*o+t]);t++)ht=(f=h.layoutRect()).minW,ct=f.minH,a[t]=ht>a[t]?ht:a[t],v[r]=ct>v[r]?ct:v[r];for(lt=u.innerW-s.left-s.right,t=rt=0;t<o;t++)rt+=a[t]+(0<t?tt:0),lt-=(0<t?tt:0)+a[t];for(ft=u.innerH-s.top-s.bottom,r=ut=0;r<y;r++)ut+=v[r]+(0<r?it:0),ft-=(0<r?it:0)+v[r];if(rt+=s.left+s.right,ut+=s.top+s.bottom,(i={}).minW=rt+(u.w-u.innerW),i.minH=ut+(u.h-u.innerH),i.contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH,i.minW=Math.min(i.minW,u.maxW),i.minH=Math.min(i.minH,u.maxH),i.minW=Math.max(i.minW,u.startMinWidth),i.minH=Math.max(i.minH,u.startMinHeight),u.autoResize&&(i.minW!==u.minW||i.minH!==u.minH))(i.w=i.minW,i.h=i.minH,n.layoutRect(i),this.recalc(n),null===n._lastRect)&&(ot=n.parent(),ot&&(ot._lastRect=null,ot.recalc()));else{if(u.autoResize&&((i=n.layoutRect(i)).contentW=i.minW-u.deltaW,i.contentH=i.minH-u.deltaH),yt="start"===e.packV?0:0<ft?Math.floor(ft/y):0,et=0,w=e.flexWidths,w)for(t=0;t<w.length;t++)et+=w[t];else et=o;for(at=lt/et,t=0;t<o;t++)a[t]+=w?w[t]*at:at;for(nt=s.top,r=0;r<y;r++){for(g=s.left,d=v[r]+yt,t=0;t<o&&(h=b[vt?r*o+o-1-t:r*o+t]);t++)st=h.settings,f=h.layoutRect(),k=Math.max(a[t],f.startMinWidth),f.x=g,f.y=nt,"center"===(p=st.alignH||(c?c[t]||c[0]:null))?f.x=g+k/2-f.w/2:"right"===p?f.x=g+k-f.w:"stretch"===p&&(f.w=k),"center"===(p=st.alignV||(l?l[t]||l[0]:null))?f.y=nt+d/2-f.h/2:"bottom"===p?f.y=nt+d-f.h:"stretch"===p&&(f.h=d),h.layoutRect(f),g+=k+tt,h.recalc&&h.recalc();nt+=d+it}}}}),oy=o.extend({renderHtml:function(){var n=this;return n.classes.add("iframe"),n.canFocus=!1,'<iframe id="'+n._id+'" class="'+n.classes+'" tabindex="-1" src="'+(n.settings.url||"javascript:''")+'" frameborder="0"><\/iframe>'},src:function(n){this.getEl().src=n},html:function(n,t){var r=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=n,t&&t()):p.setTimeout(function(){r.html(n)}),this}}),sy=o.extend({init:function(n){this._super(n);this.classes.add("widget").add("infobox");this.canFocus=!1},severity:function(n){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(n)},help:function(n){this.state.set("help",n)},renderHtml:function(){var n=this,t=n.classPrefix;return'<div id="'+n._id+'" class="'+n.classes+'"><div id="'+n._id+'-body">'+n.encode(n.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+t+"ico "+t+'i-help"><\/i><\/button><\/div><\/div>'},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.getEl("body").firstChild.data=n.encode(t.value);n.state.get("rendered")&&n.updateLayoutRect()}),n.state.on("change:help",function(t){n.classes.toggle("has-help",t.value);n.state.get("rendered")&&n.updateLayoutRect()}),n._super()}}),hy=o.extend({init:function(n){var t=this;t._super(n);t.classes.add("widget").add("label");t.canFocus=!1;n.multiline&&t.classes.add("autoscroll");n.strong&&t.classes.add("strong")},initLayoutRect:function(){var t=this,n=t._super();return t.settings.multiline&&(i.getSize(t.getEl()).width>n.maxW&&(n.minW=n.maxW,t.classes.add("multiline")),t.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,i.getSize(t.getEl()).height)),n},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(n){this.classes.remove("error");this.classes.remove("warning");this.classes.remove("success");this.classes.add(n)},renderHtml:function(){var i,r,n=this,t=n.settings.forId,u=n.settings.html?n.settings.html:n.encode(n.state.get("text"));return!t&&(r=n.settings.forName)&&(i=n.getRoot().find("#"+r)[0])&&(t=i._id),t?'<label id="'+n._id+'" class="'+n.classes+'"'+(t?' for="'+t+'"':"")+">"+u+"<\/label>":'<span id="'+n._id+'" class="'+n.classes+'">'+u+"<\/span>"},bindStates:function(){var n=this;return n.state.on("change:text",function(t){n.innerHtml(n.encode(t.value));n.state.get("rendered")&&n.updateLayoutRect()}),n._super()}}),lh=ft.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(n){this._super(n);this.classes.add("toolbar")},postRender:function(){return this.items().each(function(n){n.classes.add("toolbar-item")}),this._super()}}),ah=lh.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),di=vi.extend({init:function(n){var t=this;t._renderOpen=!0;t._super(n);n=t.settings;t.classes.add("menubtn");n.fixedWidth&&t.classes.add("fixed-width");t.aria("haspopup",!0);t.state.set("menu",n.menu||t.render())},showMenu:function(n){var i,t=this;if(t.menu&&t.menu.visible()&&!1!==n)return t.hideMenu();t.menu||(i=t.state.get("menu")||[],t.classes.add("opened"),i.length?i={type:"menu",animate:!0,items:i}:(i.type=i.type||"menu",i.animate=!0),t.menu=i.renderTo?i.parent(t).show().renderTo():l.create(i).parent(t).renderTo(),t.fire("createmenu"),t.menu.reflow(),t.menu.on("cancel",function(n){n.control.parent()===t.menu&&(n.stopPropagation(),t.focus(),t.hideMenu())}),t.menu.on("select",function(){t.focus()}),t.menu.on("show hide",function(n){n.control===t.menu&&(t.activeMenu("show"===n.type),t.classes.toggle("opened","show"===n.type));t.aria("expanded","show"===n.type)}).fire("show"));t.menu.show();t.menu.layoutRect({w:t.layoutRect().w});t.menu.repaint();t.menu.moveRel(t.getEl(),t.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]);t.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),this.menu.hide())},activeMenu:function(n){this.classes.toggle("active",n)},renderHtml:function(){var t,n=this,u=n._id,r=n.classPrefix,i=n.settings.icon,f=n.state.get("text"),e="";return(t=n.settings.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",f&&(n.classes.add("btn-has-text"),e='<span class="'+r+'txt">'+n.encode(f)+"<\/span>"),i=n.settings.icon?r+"ico "+r+"i-"+i:"",n.aria("role",n.parent()instanceof ah?"menuitem":"button"),'<div id="'+u+'" class="'+n.classes+'" tabindex="-1" aria-labelledby="'+u+'"><button id="'+u+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"><\/i>":"")+e+' <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this;return n.on("click",function(t){t.control===n&&function(n,t){for(;n;){if(t===n)return!0;n=n.parentNode}return!1}(t.target,n.getEl())&&(n.focus(),n.showMenu(!t.aria),t.aria&&n.menu.items().filter(":visible")[0].focus())}),n.on("mouseenter",function(t){var u,i=t.control,r=n.parent();i&&r&&i instanceof di&&i.parent()===r&&(r.items().filter("MenuButton").each(function(n){n.hideMenu&&n!==i&&(n.menu&&n.menu.visible()&&(u=!0),n.hideMenu())}),u&&(i.focus(),i.showMenu()))}),n._super()},bindStates:function(){var n=this;return n.state.on("change:menu",function(){n.menu&&n.menu.remove();n.menu=null}),n._super()},remove:function(){this._super();this.menu&&this.menu.remove()}}),vh=v.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(t){if(t.autohide=!0,t.constrainToViewport=!0,"function"==typeof t.items&&(t.itemsFactory=t.items,t.items=[]),t.itemDefaults)for(var i=t.items,r=i.length;r--;)i[r]=n.extend({},t.itemDefaults,i[r]);this._super(t);this.classes.add("menu");t.animate&&11!==b.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll();this.fire("select")},load:function(){function i(){n.throbber&&(n.throbber.hide(),n.throbber=null)}var t,n=this;n.settings.itemsFactory&&(n.throbber||(n.throbber=new su(n.getEl("body"),!0),0===n.items().length?(n.throbber.show(),n.fire("loading")):n.throbber.show(100,function(){n.items().remove();n.fire("loading")}),n.on("hide close",i)),n.requestTime=t=(new Date).getTime(),n.settings.itemsFactory(function(r){0!==r.length?n.requestTime===t&&(n.getEl().style.width="",n.getEl("body").style.width="",i(),n.items().remove(),n.getEl("body").innerHTML="",n.add(r),n.renderNew(),n.fire("loaded")):n.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var n=this;return n.items().each(function(t){var i=t.settings;if(i.icon||i.image||i.selectable)return!(n._hasIcons=!0)}),n.settings.itemsFactory&&n.on("postrender",function(){n.settings.itemsFactory&&n.load()}),n.on("show hide",function(t){t.control===n&&("show"===t.type?p.setTimeout(function(){n.classes.add("in")},0):n.classes.remove("in"))}),n._super()}}),cy=di.extend({init:function(n){var i,f,r,u,t=this;t._super(n);n=t.settings;t._values=i=n.values;i&&("undefined"!=typeof n.value&&function e(i){for(var u=0;u<i.length;u++){if(f=i[u].selected||n.value===i[u].value)return r=r||i[u].text,t.state.set("value",i[u].value),!0;if(i[u].menu&&e(i[u].menu))return!0}}(i),!f&&0<i.length&&(r=i[0].text,t.state.set("value",i[0].value)),t.state.set("menu",i));t.state.set("text",n.text||r);t.classes.add("listbox");t.on("select",function(i){var r=i.control;u&&(i.lastControl=u);n.multiple?r.active(!r.active()):t.value(i.control.value());u=r})},value:function(t){return 0===arguments.length?this.state.get("value"):(void 0===t||(this.settings.values?0<n.grep(this.settings.values,function(n){return n.value===t}).length?this.state.set("value",t):null===t&&this.state.set("value",null):this.state.set("value",t)),this)},bindStates:function(){var n=this;return n.on("show",function(t){var i,r;i=t.control;r=n.value();i instanceof vh&&i.items().each(function(n){n.hasMenus()||n.active(n.value()===r)})}),n.state.on("change:value",function(t){var i=function r(n,t){var u,i;if(n)for(i=0;i<n.length;i++){if(n[i].value===t)return n[i];if(n[i].menu&&(u=r(n[i].menu,t)))return u}}(n.state.get("menu"),t.value);i?n.text(i.text):n.text(n.settings.text)}),n._super()}}),ly=o.extend({Defaults:{border:0,role:"menuitem"},init:function(n){var i,t=this;t._super(n);n=t.settings;t.classes.add("menu-item");n.menu&&t.classes.add("menu-item-expand");n.preview&&t.classes.add("menu-item-preview");"-"!==(i=t.state.get("text"))&&"|"!==i||(t.classes.add("menu-item-sep"),t.aria("role","separator"),t.state.set("text","-"));n.selectable&&(t.aria("role","menuitemcheckbox"),t.classes.add("menu-item-checkbox"),n.icon="selected");n.preview||n.selectable||t.classes.add("menu-item-normal");t.on("mousedown",function(n){n.preventDefault()});n.menu&&!n.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var n,t=this,u=t.settings,r=t.parent(),i;(r.items().each(function(n){n!==t&&n.hideMenu()}),u.menu)&&((n=t.menu)?n.show():((n=u.menu).length?n={type:"menu",items:n}:n.type=n.type||"menu",r.settings.itemDefaults&&(n.itemDefaults=r.settings.itemDefaults),(n=t.menu=l.create(n).parent(t).renderTo()).reflow(),n.on("cancel",function(i){i.stopPropagation();t.focus();n.hide()}),n.on("show hide",function(n){n.control.items&&n.control.items().each(function(n){n.active(n.settings.selected)})}).fire("show"),n.on("hide",function(i){i.control===n&&t.classes.remove("selected")}),n.submenu=!0),n._parentMenu=r,n.classes.add("menu-sub"),i=n.testMoveRel(t.getEl(),t.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]),n.moveRel(t.getEl(),i),i="menu-sub-"+(n.rel=i),n.classes.remove(n._lastRel).add(i),n._lastRel=i,t.classes.add("selected"),t.aria("expanded",!0))},hideMenu:function(){var n=this;return n.menu&&(n.menu.items().each(function(n){n.hideMenu&&n.hideMenu()}),n.menu.hide(),n.aria("expanded",!1)),n},renderHtml:function(){function s(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(n){var i=t.match||"";return i?n.replace(new RegExp(s(i),"gi"),function(n){return"!mce~match["+n+"]mce~match!"}):n}function a(n){return n.replace(new RegExp(s("!mce~match["),"g"),"<b>").replace(new RegExp(s("]mce~match!"),"g"),"<\/b>")}var h,n=this,e=n._id,t=n.settings,i=n.classPrefix,r=n.state.get("text"),o=n.settings.icon,c="",u=t.shortcut,f=n.encode(t.url);return o&&n.parent().classes.add("menu-has-icons"),t.image&&(c=" style=\"background-image: url('"+t.image+"')\""),u&&(u=function(n){var t,i,r={};for(r=b.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},n=n.split("+"),t=0;t<n.length;t++)(i=r[n[t].toLowerCase()])&&(n[t]=i);return n.join("+")}(u)),o=i+"ico "+i+"i-"+(n.settings.icon||"none"),h="-"!==r?'<i class="'+o+'"'+c+"><\/i> ":"",r=a(n.encode(l(r))),f=a(n.encode(l(f))),'<div id="'+e+'" class="'+n.classes+'" tabindex="-1">'+h+("-"!==r?'<span id="'+e+'-text" class="'+i+'text">'+r+"<\/span>":"")+(u?'<div id="'+e+'-shortcut" class="'+i+'menu-shortcut">'+u+"<\/div>":"")+(t.menu?'<div class="'+i+'caret"><\/div>':"")+(f?'<div class="'+i+'menu-item-link">'+f+"<\/div>":"")+"<\/div>"},postRender:function(){var n=this,r=n.settings,t=r.textStyle,i;return("function"==typeof t&&(t=t.call(this)),t)&&(i=n.getEl("text"),i&&(i.setAttribute("style",t),n._textStyle=t)),n.on("mouseenter click",function(t){t.control===n&&(r.menu||"click"!==t.type?(n.showMenu(),t.aria&&n.menu.focus(!0)):(n.fire("select"),p.requestAnimationFrame(function(){n.parent().hideAll()})))}),n._super(),n},hover:function(){return this.parent().items().each(function(n){n.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(n){return function(n,t){var r=n._textStyle,i;r&&(i=n.getEl("text"),i.setAttribute("style",r),t&&(i.style.color="",i.style.backgroundColor=""))}(this,n),void 0!==n&&this.aria("checked",n),this._super(n)},remove:function(){this._super();this.menu&&this.menu.remove()}}),ay=co.extend({Defaults:{classes:"radio",role:"radio"}}),vy=o.extend({renderHtml:function(){var n=this,t=n.classPrefix;return n.classes.add("resizehandle"),"both"===n.settings.direction&&n.classes.add("resizehandle-both"),n.canFocus=!1,'<div id="'+n._id+'" class="'+n.classes+'"><i class="'+t+"ico "+t+'i-resize"><\/i><\/div>'},postRender:function(){var n=this;n._super();n.resizeDragHelper=new et(this._id,{start:function(){n.fire("ResizeStart")},drag:function(t){"both"!==n.settings.direction&&(t.deltaX=0);n.fire("Resize",t)},stop:function(){n.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});ph=o.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(n){var t=this;t._super(n);t.settings.size&&(t.size=t.settings.size);t.settings.options&&(t._options=t.settings.options);t.on("keydown",function(n){var i;13===n.keyCode&&(n.preventDefault(),t.parents().reverse().each(function(n){if(n.toJSON)return i=n,!1}),t.fire("submit",{data:i.toJSON()}))})},options:function(n){return arguments.length?(this.state.set("options",n),this):this.state.get("options")},renderHtml:function(){var t,n=this,i="";return t=yh(n._options),n.size&&(i=' size = "'+n.size+'"'),'<select id="'+n._id+'" class="'+n.classes+'"'+i+">"+t+"<\/select>"},bindStates:function(){var n=this;return n.state.on("change:options",function(t){n.getEl().innerHTML=yh(t.value)}),n._super()}});var yy=o.extend({init:function(n){var t=this;n.previewFilter||(n.previewFilter=function(n){return Math.round(100*n)/100});t._super(n);t.classes.add("slider");"v"===n.orientation&&t.classes.add("vertical");t._minValue=yt.isNumber(n.minValue)?n.minValue:0;t._maxValue=yt.isNumber(n.maxValue)?n.maxValue:100;t._initValue=t.state.get("value")},renderHtml:function(){var n=this._id,t=this.classPrefix;return'<div id="'+n+'" class="'+this.classes+'"><div id="'+n+'-handle" class="'+t+'slider-handle" role="slider" tabindex="-1"><\/div><\/div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var e,o,r,u,s,h,c,v,f,y,p,l,a,t,n=this;e=n._minValue;o=n._maxValue;"v"===n.settings.orientation?(r="screenY",u="top",s="height",h="h"):(r="screenX",u="left",s="width",h="w");n._super(),function(t,i){function r(r){var u,f,e,o;u=wh(u=(((u=n.value())+(o=f=t))/((e=i)-o)+.05*r)*(e-f)-f,t,i);n.value(u);n.fire("dragstart",{value:u});n.fire("drag",{value:u});n.fire("dragend",{value:u})}n.on("keydown",function(n){switch(n.keyCode){case 37:case 38:r(-1);break;case 39:case 40:r(1)}})}(e,o);c=e;v=o;f=n.getEl("handle");n._dragHelper=new et(n._id,{handle:n._id+"-handle",start:function(e){y=e[r];p=parseInt(n.getEl("handle").style[u],10);l=(n.layoutRect()[h]||100)-i.getSize(f)[s];n.fire("dragstart",{value:t})},drag:function(i){var e=i[r]-y;a=wh(p+e,0,l);f.style[u]=a+"px";t=c+a/l*(v-c);n.value(t);n.tooltip().text(""+n.settings.previewFilter(t)).show().moveRel(f,"bc tc");n.fire("drag",{value:t})},stop:function(){n.tooltip().hide();n.fire("dragend",{value:t})}})},repaint:function(){this._super();bh(this,this.value())},bindStates:function(){var n=this;return n.state.on("change:value",function(t){bh(n,t.value)}),n._super()}}),py=o.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><\/div>'}}),wy=di.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var u,n,f=this.getEl(),r=this.layoutRect();return this._super(),u=f.firstChild,n=f.lastChild,t(u).css({width:r.w-i.getSize(n).width,height:r.h-2}),t(n).css({height:r.h-2}),this},activeMenu:function(n){t(this.getEl().lastChild).toggleClass(this.classPrefix+"active",n)},renderHtml:function(){var t,f,n=this,s=n._id,r=n.classPrefix,i=n.state.get("icon"),e=n.state.get("text"),u=n.settings,o="";return(t=u.image)?(i="none","string"!=typeof t&&(t=window.getSelection?t[0]:t[1]),t=" style=\"background-image: url('"+t+"')\""):t="",i=u.icon?r+"ico "+r+"i-"+i:"",e&&(n.classes.add("btn-has-text"),o='<span class="'+r+'txt">'+n.encode(e)+"<\/span>"),f="boolean"==typeof u.active?' aria-pressed="'+u.active+'"':"",'<div id="'+s+'" class="'+n.classes+'" role="button"'+f+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(i?'<i class="'+i+'"'+t+"><\/i>":"")+o+'<\/button><button type="button" class="'+r+'open" hidefocus="1" tabindex="-1">'+(n._menuBtnText?(i?" ":"")+n._menuBtnText:"")+' <i class="'+r+'caret"><\/i><\/button><\/div>'},postRender:function(){var n=this.settings.onclick;return this.on("click",function(t){var i=t.target;if(t.control===this)for(;i;){if(t.aria&&"down"!==t.aria.key||"BUTTON"===i.nodeName&&-1===i.className.indexOf("open"))return t.stopImmediatePropagation(),void(n&&n.call(this,t));i=i.parentNode}}),delete this.settings.onclick,this._super()}}),by=fh.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),ky=ci.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(n){var i;this.activeTabId&&(i=this.getEl(this.activeTabId),t(i).removeClass(this.classPrefix+"active"),i.setAttribute("aria-selected","false"));this.activeTabId="t"+n;(i=this.getEl("t"+n)).setAttribute("aria-selected","true");t(i).addClass(this.classPrefix+"active");this.items()[n].show().fire("showtab");this.reflow();this.items().each(function(t,i){n!==i&&t.hide()})},renderHtml:function(){var n=this,t=n._layout,i="",r=n.classPrefix;return n.preRender(),t.preRender(n),n.items().each(function(t,u){var f=n._id+"-t"+u;t.aria("role","tabpanel");t.aria("labelledby",f);i+='<div id="'+f+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+n.encode(t.settings.title)+"<\/div>"}),'<div id="'+n._id+'" class="'+n.classes+'" hidefocus="1" tabindex="-1"><div id="'+n._id+'-head" class="'+r+'tabs" role="tablist">'+i+'<\/div><div id="'+n._id+'-body" class="'+n.bodyClasses+'">'+t.renderHtml(n)+"<\/div><\/div>"},postRender:function(){var n=this;n._super();n.settings.activeTab=n.settings.activeTab||0;n.activateTab(n.settings.activeTab);this.on("click",function(t){var i=t.target.parentNode,r;if(i&&i.id===n._id+"-head")for(r=i.childNodes.length;r--;)i.childNodes[r]===t.target&&n.activateTab(r)})},initLayoutRect:function(){var u,n,r,t=this,f;return n=(n=i.getSize(t.getEl("head")).width)<0?0:n,r=0,t.items().each(function(t){n=Math.max(n,t.layoutRect().minW);r=Math.max(r,t.layoutRect().minH)}),t.items().each(function(t){t.settings.x=0;t.settings.y=0;t.settings.w=n;t.settings.h=r;t.layoutRect({x:0,y:0,w:n,h:r})}),f=i.getSize(t.getEl("head")).height,t.settings.minWidth=n,t.settings.minHeight=r+f,(u=t._super()).deltaH+=f,u.innerH=u.h-u.deltaH,u}}),dy=o.extend({init:function(n){var t=this;t._super(n);t.classes.add("textbox");n.multiline?t.classes.add("multiline"):(t.on("keydown",function(n){var i;13===n.keyCode&&(n.preventDefault(),t.parents().reverse().each(function(n){if(n.toJSON)return i=n,!1}),t.fire("submit",{data:i.toJSON()}))}),t.on("keyup",function(n){t.state.set("value",n.target.value)}))},repaint:function(){var r,n,u,o,t,i=this,e=0,f;return r=i.getEl().style,n=i._layoutRect,t=i._lastRepaintRect||{},f=document,!i.settings.multiline&&f.all&&(!f.documentMode||f.documentMode<=8)&&(r.lineHeight=n.h-e+"px"),o=(u=i.borderBox).left+u.right+8,e=u.top+u.bottom+(i.settings.multiline?8:0),n.x!==t.x&&(r.left=n.x+"px",t.x=n.x),n.y!==t.y&&(r.top=n.y+"px",t.y=n.y),n.w!==t.w&&(r.width=n.w-o+"px",t.w=n.w),n.h!==t.h&&(r.height=n.h-e+"px",t.h=n.h),i._lastRepaintRect=t,i.fire("repaint",{},!1),i},renderHtml:function(){var t,f,r=this,u=r.settings;return t={id:r._id,hidefocus:"1"},n.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(n){t[n]=u[n]}),r.disabled()&&(t.disabled="disabled"),u.subtype&&(t.type=u.subtype),(f=i.create(u.multiline?"textarea":"input",t)).value=r.state.get("value"),f.className=r.classes.toString(),f.outerHTML},value:function(n){return arguments.length?(this.state.set("value",n),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var n=this;n.getEl().value=n.state.get("value");n._super();n.$el.on("change",function(t){n.state.set("value",t.target.value);n.fire("change",t)})},bindStates:function(){var n=this;return n.state.on("change:value",function(t){n.getEl().value!==t.value&&(n.getEl().value=t.value)}),n.state.on("change:disabled",function(t){n.getEl().disabled=t.value}),n._super()},remove:function(){this.$el.off();this._super()}}),du=function(){return{Selector:bt,Collection:kt,ReflowQueue:gt,Control:h,Factory:l,KeyboardNavigation:ge,Container:ft,DragHelper:et,Scrollable:no,Panel:ci,Movable:ei,Resizable:to,FloatPanel:v,Window:ni,MessageBox:k,Tooltip:fo,Widget:o,Progress:eo,Notification:oo,Layout:cu,AbsoluteLayout:ai,Button:vi,ButtonGroup:ol,Checkbox:co,ComboBox:lu,ColorBox:sl,PanelButton:ao,ColorButton:cl,ColorPicker:ll,Path:yo,ElementPath:vl,FormItem:po,Form:wo,FieldSet:yl,FilePicker:fv,FitLayout:ev,FlexLayout:ov,FlowLayout:fh,FormatControls:ch,GridLayout:ey,Iframe:oy,InfoBox:sy,Label:hy,Toolbar:lh,MenuBar:ah,MenuButton:di,MenuItem:ly,Throbber:su,Menu:vh,ListBox:cy,Radio:ay,ResizeHandle:vy,SelectBox:ph,Slider:yy,Spacer:py,SplitButton:wy,StackLayout:by,TabPanel:ky,TextBox:dy,DropZone:al,BrowseButton:el}},gy=function(t){t.ui?n.each(du(),function(n,i){t.ui[i]=n}):t.ui=du()};n.each(du(),function(n,t){l.add(t,n)});gy(window.tinymce?window.tinymce:{});kh.add("modern",function(n){return ch.setup(n),fl(n)})}()